(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./client/scripts/main.js":[function(require,module,exports){
'use strict';

var namespace = 'main';

var angular = require('angular');

var app = angular.module(namespace, [
    // inject:modules start

    require('./common')(namespace).name

    // inject:modules end
]);

module.exports = app;
},{"./common":"/home/codio/workspace/client/scripts/common/index.js","angular":"/home/codio/workspace/bower_components/angular/angular.min.js"}],"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js":[function(require,module,exports){
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(F,e,O){'use strict';e.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(G,s,g){g=g.ngAnimateChildren;e.isString(g)&&0===g.length?s.data("$$ngAnimateChildren",!0):G.$watch(g,function(e){s.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,s){return function(g){return e(function(){g()})}}]).config(["$provide","$animateProvider",function(G,s){function g(e){for(var g=0;g<e.length;g++){var l=e[g];if(l.nodeType==aa)return l}}
function B(l){return e.element(g(l))}var m=e.noop,u=e.forEach,P=s.$$selectors,aa=1,l="$$ngAnimateState",V="$$ngAnimateChildren",J="ng-animate",n={running:!0};G.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(z,F,$,R,E,H,O){function K(a){var b=a.data(l)||{};b.running=!0;a.data(l,b)}function L(a){if(a){var b=[],c={};a=a.substr(1).split(".");($.transitions||$.animations)&&b.push(F.get(P[""]));for(var d=0;d<a.length;d++){var f=
a[d],e=P[f];e&&!c[f]&&(b.push(F.get(e)),c[f]=!0)}return b}}function G(a,b,c){function d(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];if(c||d)return"leave"==b&&(d=c,c=null),n.push({event:b,fn:c}),h.push({event:b,fn:d}),!0}function f(b,d,e){var f=[];u(b,function(a){a.fn&&f.push(a)});var g=0;u(f,function(b,l){var C=function(){a:{if(d){(d[l]||m)();if(++g<f.length)break a;d=null}e()}};switch(b.event){case "setClass":d.push(b.fn(a,A,k,C));break;case "addClass":d.push(b.fn(a,A||c,
C));break;case "removeClass":d.push(b.fn(a,k||c,C));break;default:d.push(b.fn(a,C))}});d&&0===d.length&&e()}var g=a[0];if(g){var l="setClass"==b,p=l||"addClass"==b||"removeClass"==b,A,k;e.isArray(c)&&(A=c[0],k=c[1],c=A+" "+k);var x=a.attr("class")+" "+c;if(M(x)){var t=m,w=[],h=[],q=m,y=[],n=[],x=(" "+x).replace(/\s+/g,".");u(L(x),function(a){!d(a,b)&&l&&(d(a,"addClass"),d(a,"removeClass"))});return{node:g,event:b,className:c,isClassBased:p,isSetClassOperation:l,before:function(a){t=a;f(h,w,function(){t=
m;a()})},after:function(a){q=a;f(n,y,function(){q=m;a()})},cancel:function(){w&&(u(w,function(a){(a||m)(!0)}),t(!0));y&&(u(y,function(a){(a||m)(!0)}),q(!0))}}}}}function r(a,b,c,d,f,g,n){function p(d){var e="$animate:"+d;q&&(q[e]&&0<q[e].length)&&E(function(){c.triggerHandler(e,{event:a,className:b})})}function A(){p("before")}function m(){p("after")}function x(){p("close");n&&E(function(){n()})}function t(){t.hasBeenRun||(t.hasBeenRun=!0,g())}function w(){if(!w.hasBeenRun){w.hasBeenRun=!0;var d=
c.data(l);d&&(h&&h.isClassBased?k(c,b):(E(function(){var d=c.data(l)||{};r==d.index&&k(c,b,a)}),c.data(l,d)));x()}}var h=G(c,a,b);if(h){b=h.className;var q=e.element._data(h.node),q=q&&q.events;d||(d=f?f.parent():c.parent());var y=c.data(l)||{};f=y.active||{};var z=y.totalActive||0,C=y.last,D;h.isClassBased&&(D=y.running||y.disabled||C&&!C.isClassBased);if(D||N(c,d))t(),A(),m(),w();else{d=!1;if(0<z){D=[];if(h.isClassBased)"setClass"==C.event?(D.push(C),k(c,b)):f[b]&&(v=f[b],v.event==a?d=!0:(D.push(v),
k(c,b)));else if("leave"==a&&f["ng-leave"])d=!0;else{for(var v in f)D.push(f[v]),k(c,v);f={};z=0}0<D.length&&u(D,function(a){a.cancel()})}!h.isClassBased||(h.isSetClassOperation||d)||(d="addClass"==a==c.hasClass(b));if(d)t(),A(),m(),x();else{if("leave"==a)c.one("$destroy",function(a){a=e.element(this);var b=a.data(l);b&&(b=b.active["ng-leave"])&&(b.cancel(),k(a,"ng-leave"))});c.addClass(J);var r=Y++;z++;f[b]=h;c.data(l,{last:h,active:f,index:r,totalActive:z});A();h.before(function(d){var e=c.data(l);
d=d||!e||!e.active[b]||h.isClassBased&&e.active[b].event!=a;t();!0===d?w():(m(),h.after(w))})}}}else t(),A(),m(),w()}function T(a){if(a=g(a))a=e.isFunction(a.getElementsByClassName)?a.getElementsByClassName(J):a.querySelectorAll("."+J),u(a,function(a){a=e.element(a);(a=a.data(l))&&a.active&&u(a.active,function(a){a.cancel()})})}function k(a,b){if(g(a)==g(R))n.disabled||(n.running=!1,n.structural=!1);else if(b){var c=a.data(l)||{},d=!0===b;!d&&(c.active&&c.active[b])&&(c.totalActive--,delete c.active[b]);
if(d||!c.totalActive)a.removeClass(J),a.removeData(l)}}function N(a,b){if(n.disabled)return!0;if(g(a)==g(R))return n.running;var c,d,f;do{if(0===b.length)break;var m=g(b)==g(R),k=m?n:b.data(l)||{};if(k.disabled)return!0;m&&(f=!0);!1!==c&&(m=b.data(V),e.isDefined(m)&&(c=m));d=d||k.running||k.last&&!k.last.isClassBased}while(b=b.parent());return!f||!c&&d}var Y=0;R.data(l,n);H.$$postDigest(function(){H.$$postDigest(function(){n.running=!1})});var Q=s.classNameFilter(),M=Q?function(a){return Q.test(a)}:
function(){return!0};return{enter:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);K(a);z.enter(a,b,c);H.$$postDigest(function(){a=B(a);r("enter","ng-enter",a,b,c,m,d)})},leave:function(a,b){a=e.element(a);T(a);K(a);H.$$postDigest(function(){r("leave","ng-leave",B(a),null,null,function(){z.leave(a)},b)})},move:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);T(a);K(a);z.move(a,b,c);H.$$postDigest(function(){a=B(a);r("move","ng-move",a,b,c,m,d)})},addClass:function(a,
b,c){a=e.element(a);a=B(a);r("addClass",b,a,null,null,function(){z.addClass(a,b)},c)},removeClass:function(a,b,c){a=e.element(a);a=B(a);r("removeClass",b,a,null,null,function(){z.removeClass(a,b)},c)},setClass:function(a,b,c,d){a=e.element(a);a=B(a);r("setClass",[b,c],a,null,null,function(){z.setClass(a,b,c)},d)},enabled:function(a,b){switch(arguments.length){case 2:if(a)k(b);else{var c=b.data(l)||{};c.disabled=!0;b.data(l,c)}break;case 1:n.disabled=!a;break;default:a=!n.disabled}return!!a}}}]);s.register("",
["$window","$sniffer","$timeout","$$animateReflow",function(l,n,s,B){function E(a,U){S&&S();W.push(U);S=B(function(){u(W,function(a){a()});W=[];S=null;v={}})}function H(a,U){var b=g(a);a=e.element(b);Z.push(a);b=Date.now()+U;b<=da||(s.cancel(ca),da=b,ca=s(function(){G(Z);Z=[]},U,!1))}function G(a){u(a,function(a){(a=a.data(q))&&(a.closeAnimationFn||m)()})}function K(a,b){var c=b?v[b]:null;if(!c){var d=0,e=0,f=0,g=0,m,k,h,q;u(a,function(a){if(a.nodeType==aa){a=l.getComputedStyle(a)||{};h=a[I+P];d=
Math.max(L(h),d);q=a[I+x];m=a[I+t];e=Math.max(L(m),e);k=a[p+t];g=Math.max(L(k),g);var b=L(a[p+P]);0<b&&(b*=parseInt(a[p+w],10)||1);f=Math.max(b,f)}});c={total:0,transitionPropertyStyle:q,transitionDurationStyle:h,transitionDelayStyle:m,transitionDelay:e,transitionDuration:d,animationDelayStyle:k,animationDelay:g,animationDuration:f};b&&(v[b]=c)}return c}function L(a){var b=0;a=e.isString(a)?a.split(/\s*,\s*/):[];u(a,function(a){b=Math.max(parseFloat(a)||0,b)});return b}function J(a){var b=a.parent(),
c=b.data(h);c||(b.data(h,++ba),c=ba);return c+"-"+g(a).getAttribute("class")}function r(a,b,c,d){var e=J(b),f=e+" "+c,l=v[f]?++v[f].total:0,k={};if(0<l){var h=c+"-stagger",k=e+" "+h;(e=!v[k])&&b.addClass(h);k=K(b,k);e&&b.removeClass(h)}d=d||function(a){return a()};b.addClass(c);var h=b.data(q)||{},n=d(function(){return K(b,f)});d=n.transitionDuration;e=n.animationDuration;if(0===d&&0===e)return b.removeClass(c),!1;b.data(q,{running:h.running||0,itemIndex:l,stagger:k,timings:n,closeAnimationFn:m});
a=0<h.running||"setClass"==a;0<d&&T(b,c,a);0<e&&(0<k.animationDelay&&0===k.animationDuration)&&(g(b).style[p]="none 0s");return!0}function T(a,b,c){"ng-enter"!=b&&("ng-move"!=b&&"ng-leave"!=b)&&c?a.addClass(y):g(a).style[I+x]="none"}function k(a,b){var c=I+x,d=g(a);d.style[c]&&0<d.style[c].length&&(d.style[c]="");a.removeClass(y)}function N(a){var b=p;a=g(a);a.style[b]&&0<a.style[b].length&&(a.style[b]="")}function Y(a,b,d,e){function k(a){b.off(x,l);b.removeClass(m);c(b,d);a=g(b);for(var e in s)a.style.removeProperty(s[e])}
function l(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(V));Math.max(a-z,0)>=y&&b>=v&&e()}var h=g(b);a=b.data(q);if(-1!=h.getAttribute("class").indexOf(d)&&a){var m="";u(d.split(" "),function(a,b){m+=(0<b?" ":"")+a+"-active"});var n=a.stagger,p=a.timings,t=a.itemIndex,v=Math.max(p.transitionDuration,p.animationDuration),w=Math.max(p.transitionDelay,p.animationDelay),y=w*D,z=Date.now(),x=A+" "+X,r="",s=[];if(0<p.transitionDuration){var B=
p.transitionPropertyStyle;-1==B.indexOf("all")&&(r+=f+"transition-property: "+B+";",r+=f+"transition-duration: "+p.transitionDurationStyle+";",s.push(f+"transition-property"),s.push(f+"transition-duration"))}0<t&&(0<n.transitionDelay&&0===n.transitionDuration&&(r+=f+"transition-delay: "+Q(p.transitionDelayStyle,n.transitionDelay,t)+"; ",s.push(f+"transition-delay")),0<n.animationDelay&&0===n.animationDuration&&(r+=f+"animation-delay: "+Q(p.animationDelayStyle,n.animationDelay,t)+"; ",s.push(f+"animation-delay")));
0<s.length&&(p=h.getAttribute("style")||"",h.setAttribute("style",p+"; "+r));b.on(x,l);b.addClass(m);a.closeAnimationFn=function(){k();e()};h=(t*(Math.max(n.animationDelay,n.transitionDelay)||0)+(w+v)*C)*D;a.running++;H(b,h);return k}e()}function Q(a,b,c){var d="";u(a.split(","),function(a,e){d+=(0<e?",":"")+(c*b+parseInt(a,10))+"s"});return d}function M(a,b,d,e){if(r(a,b,d,e))return function(a){a&&c(b,d)}}function a(a,b,d,e){if(b.data(q))return Y(a,b,d,e);c(b,d);e()}function b(b,c,d,e){var f=M(b,
c,d);if(f){var g=f;E(c,function(){k(c,d);N(c);g=a(b,c,d,e)});return function(a){(g||m)(a)}}e()}function c(a,b){a.removeClass(b);var c=a.data(q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(q))}function d(a,b){var c="";a=e.isArray(a)?a:a.split(/\s+/);u(a,function(a,d){a&&0<a.length&&(c+=(0<d?" ":"")+a+b)});return c}var f="",I,X,p,A;F.ontransitionend===O&&F.onwebkittransitionend!==O?(f="-webkit-",I="WebkitTransition",X="webkitTransitionEnd transitionend"):(I="transition",X="transitionend");
F.onanimationend===O&&F.onwebkitanimationend!==O?(f="-webkit-",p="WebkitAnimation",A="webkitAnimationEnd animationend"):(p="animation",A="animationend");var P="Duration",x="Property",t="Delay",w="IterationCount",h="$$ngAnimateKey",q="$$ngAnimateCSS3Data",y="ng-animate-block-transitions",V=3,C=1.5,D=1E3,v={},ba=0,W=[],S,ca=null,da=0,Z=[];return{enter:function(a,c){return b("enter",a,"ng-enter",c)},leave:function(a,c){return b("leave",a,"ng-leave",c)},move:function(a,c){return b("move",a,"ng-move",
c)},beforeSetClass:function(a,b,c,e){var f=d(c,"-remove")+" "+d(b,"-add"),g=M("setClass",a,f,function(d){var e=a.attr("class");a.removeClass(c);a.addClass(b);d=d();a.attr("class",e);return d});if(g)return E(a,function(){k(a,f);N(a);e()}),g;e()},beforeAddClass:function(a,b,c){var e=M("addClass",a,d(b,"-add"),function(c){a.addClass(b);c=c();a.removeClass(b);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},setClass:function(b,c,e,f){e=d(e,"-remove");c=d(c,"-add");return a("setClass",b,
e+" "+c,f)},addClass:function(b,c,e){return a("addClass",b,d(c,"-add"),e)},beforeRemoveClass:function(a,b,c){var e=M("removeClass",a,d(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);c=c();a.attr("class",d);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},removeClass:function(b,c,e){return a("removeClass",b,d(c,"-remove"),e)}}}])}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

},{}],"/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js":[function(require,module,exports){
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(q,g,r){'use strict';function F(a){var d=[];t(d,g.noop).chars(a);return d.join("")}function m(a){var d={};a=a.split(",");var c;for(c=0;c<a.length;c++)d[a[c]]=!0;return d}function G(a,d){function c(a,b,c,h){b=g.lowercase(b);if(u[b])for(;f.last()&&v[f.last()];)e("",f.last());w[b]&&f.last()==b&&e("",b);(h=x[b]||!!h)||f.push(b);var n={};c.replace(H,function(a,b,d,c,e){n[b]=s(d||c||e||"")});d.start&&d.start(b,n,h)}function e(a,b){var c=0,e;if(b=g.lowercase(b))for(c=f.length-1;0<=c&&f[c]!=b;c--);
if(0<=c){for(e=f.length-1;e>=c;e--)d.end&&d.end(f[e]);f.length=c}}"string"!==typeof a&&(a=null===a||"undefined"===typeof a?"":""+a);var b,l,f=[],n=a,h;for(f.last=function(){return f[f.length-1]};a;){h="";l=!0;if(f.last()&&y[f.last()])a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(a,b){b=b.replace(I,"$1").replace(J,"$1");d.chars&&d.chars(s(b));return""}),e("",f.last());else{if(0===a.indexOf("\x3c!--"))b=a.indexOf("--",4),0<=b&&a.lastIndexOf("--\x3e",b)===b&&(d.comment&&d.comment(a.substring(4,
b)),a=a.substring(b+3),l=!1);else if(z.test(a)){if(b=a.match(z))a=a.replace(b[0],""),l=!1}else if(K.test(a)){if(b=a.match(A))a=a.substring(b[0].length),b[0].replace(A,e),l=!1}else L.test(a)&&((b=a.match(B))?(b[4]&&(a=a.substring(b[0].length),b[0].replace(B,c)),l=!1):(h+="<",a=a.substring(1)));l&&(b=a.indexOf("<"),h+=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),d.chars&&d.chars(s(h)))}if(a==n)throw M("badparse",a);n=a}e()}function s(a){if(!a)return"";var d=N.exec(a);a=d[1];var c=d[3];if(d=d[2])p.innerHTML=
d.replace(/</g,"&lt;"),d="textContent"in p?p.textContent:p.innerText;return a+d+c}function C(a){return a.replace(/&/g,"&amp;").replace(O,function(a){var c=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(c-55296)+(a-56320)+65536)+";"}).replace(P,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(a,d){var c=!1,e=g.bind(a,a.push);return{start:function(a,l,f){a=g.lowercase(a);!c&&y[a]&&(c=a);c||!0!==D[a]||(e("<"),e(a),g.forEach(l,function(c,f){var k=
g.lowercase(f),l="img"===a&&"src"===k||"background"===k;!0!==Q[k]||!0===E[k]&&!d(c,l)||(e(" "),e(f),e('="'),e(C(c)),e('"'))}),e(f?"/>":">"))},end:function(a){a=g.lowercase(a);c||!0!==D[a]||(e("</"),e(a),e(">"));a==c&&(c=!1)},chars:function(a){c||e(C(a))}}}var M=g.$$minErr("$sanitize"),B=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,A=/^<\/\s*([\w:-]+)[^>]*>/,H=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,L=/^</,
K=/^<\//,I=/\x3c!--(.*?)--\x3e/g,z=/<!DOCTYPE([^>]*?)>/i,J=/<!\[CDATA\[(.*?)]]\x3e/g,O=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P=/([^\#-~| |!])/g,x=m("area,br,col,hr,img,wbr");q=m("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");r=m("rp,rt");var w=g.extend({},r,q),u=g.extend({},q,m("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),v=g.extend({},r,m("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
y=m("script,style"),D=g.extend({},x,u,v,w),E=m("background,cite,href,longdesc,src,usemap"),Q=g.extend({},E,m("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),p=document.createElement("pre"),N=/^(\s*)([\s\S]*?)(\s*)$/;g.module("ngSanitize",[]).provider("$sanitize",
function(){this.$get=["$$sanitizeUri",function(a){return function(d){var c=[];G(d,t(c,function(c,b){return!/^unsafe/.test(a(c,b))}));return c.join("")}}]});g.module("ngSanitize").filter("linky",["$sanitize",function(a){var d=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,c=/^mailto:/;return function(e,b){function l(a){a&&k.push(F(a))}function f(a,c){k.push("<a ");g.isDefined(b)&&(k.push('target="'),k.push(b),k.push('" '));k.push('href="');k.push(a);k.push('">');l(c);k.push("</a>")}
if(!e)return e;for(var n,h=e,k=[],m,p;n=h.match(d);)m=n[0],n[2]==n[3]&&(m="mailto:"+m),p=n.index,l(h.substr(0,p)),f(m,n[0].replace(c,"")),h=h.substring(p+n[0].length);l(h);return a(k.join(""))}}])})(window,window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map

},{}],"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js":[function(require,module,exports){
(function (global){

; require("/home/codio/workspace/bower_components/angular/angular.min.js");
;__browserify_shim_require__=require;(function browserifyShim(module, define, require) {
/**
 * State-based routing for AngularJS
 * @version v0.2.10
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return I(new(I(function(){},{prototype:a})),b)}function e(a){return H(arguments,function(b){b!==a&&H(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function h(a,b,c,d){var e,h=f(c,d),i={},j=[];for(var k in h)if(h[k].params&&h[k].params.length){e=h[k].params;for(var l in e)g(j,e[l])>=0||(j.push(e[l]),i[e[l]]=a[e[l]])}return I({},i,b)}function i(a,b){var c={};return H(a,function(a){var d=b[a];c[a]=null!=d?String(d):null}),c}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return H(a,function(a){c[a]=b[a]}),c}function l(a,b){var d=1,f=2,g={},h=[],i=g,j=I(a.when(g),{$$promises:g,$$values:g});this.study=function(g){function k(a,c){if(o[c]!==f){if(n.push(c),o[c]===d)throw n.splice(0,n.indexOf(c)),new Error("Cyclic dependency: "+n.join(" -> "));if(o[c]=d,E(a))m.push(c,[function(){return b.get(a)}],h);else{var e=b.annotate(a);H(e,function(a){a!==c&&g.hasOwnProperty(a)&&k(g[a],a)}),m.push(c,a,e)}n.pop(),o[c]=f}}function l(a){return F(a)&&a.then&&a.$$promises}if(!F(g))throw new Error("'invocables' must be an object");var m=[],n=[],o={};return H(g,k),g=n=o=null,function(d,f,g){function h(){--s||(t||e(r,f.$$values),p.$$values=r,p.$$promises=!0,o.resolve(r))}function k(a){p.$$failure=a,o.reject(a)}function n(c,e,f){function i(a){l.reject(a),k(a)}function j(){if(!C(p.$$failure))try{l.resolve(b.invoke(e,g,r)),l.promise.then(function(a){r[c]=a,h()},i)}catch(a){i(a)}}var l=a.defer(),m=0;H(f,function(a){q.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,q[a].then(function(b){r[a]=b,--m||j()},i))}),m||j(),q[c]=l.promise}if(l(d)&&g===c&&(g=f,f=d,d=null),d){if(!F(d))throw new Error("'locals' must be an object")}else d=i;if(f){if(!l(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=j;var o=a.defer(),p=o.promise,q=p.$$promises={},r=I({},d),s=1+m.length/3,t=!1;if(C(f.$$failure))return k(f.$$failure),p;f.$$values?(t=e(r,f.$$values),h()):(I(q,f.$$promises),f.then(h,k));for(var u=0,v=m.length;v>u;u+=3)d.hasOwnProperty(m[u])?h():n(m[u],m[u+1],m[u+2]);return p}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function m(a,b,c){this.fromConfig=function(a,b,c){return C(a.template)?this.fromString(a.template,b):C(a.templateUrl)?this.fromUrl(a.templateUrl,b):C(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return D(a)?a(b):a},this.fromUrl=function(c,d){return D(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function n(a){function b(b){if(!/^\w+(-+\w+)*$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(f[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");f[b]=!0,j.push(b)}function c(a){return a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var d,e=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f={},g="^",h=0,i=this.segments=[],j=this.params=[];this.source=a;for(var k,l,m;(d=e.exec(a))&&(k=d[2]||d[3],l=d[4]||("*"==d[1]?".*":"[^/]*"),m=a.substring(h,d.index),!(m.indexOf("?")>=0));)g+=c(m)+"("+l+")",b(k),i.push(m),h=e.lastIndex;m=a.substring(h);var n=m.indexOf("?");if(n>=0){var o=this.sourceSearch=m.substring(n);m=m.substring(0,n),this.sourcePath=a.substring(0,h+n),H(o.substring(1).split(/[&?]/),b)}else this.sourcePath=a,this.sourceSearch="";g+=c(m)+"$",i.push(m),this.regexp=new RegExp(g),this.prefix=i[0]}function o(){this.compile=function(a){return new n(a)},this.isMatcher=function(a){return F(a)&&D(a.exec)&&D(a.format)&&D(a.concat)},this.$get=function(){return this}}function p(a){function b(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function c(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function d(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return C(d)?d:!0}var e=[],f=null;this.rule=function(a){if(!D(a))throw new Error("'rule' must be a function");return e.push(a),this},this.otherwise=function(a){if(E(a)){var b=a;a=function(){return b}}else if(!D(a))throw new Error("'rule' must be a function");return f=a,this},this.when=function(e,f){var g,h=E(f);if(E(e)&&(e=a.compile(e)),!h&&!D(f)&&!G(f))throw new Error("invalid 'handler' in when()");var i={matcher:function(b,c){return h&&(g=a.compile(c),c=["$match",function(a){return g.format(a)}]),I(function(a,e){return d(a,c,b.exec(e.path(),e.search()))},{prefix:E(b.prefix)?b.prefix:""})},regex:function(a,e){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=e,e=["$match",function(a){return c(g,a)}]),I(function(b,c){return d(b,e,a.exec(c.path()))},{prefix:b(a)})}},j={matcher:a.isMatcher(e),regex:e instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](e,f));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(a,b,c){function d(b){function d(b){var d=b(c,a);return d?(E(d)&&a.replace().url(d),!0):!1}if(!b||!b.defaultPrevented){var g,h=e.length;for(g=0;h>g;g++)if(d(e[g]))return;f&&d(f)}}return b.$on("$locationChangeSuccess",d),{sync:function(){d()}}}]}function q(a,e,f){function g(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function l(a,b){var d=E(a),e=d?a:a.name,f=g(e);if(f){if(!b)throw new Error("No reference point given for path '"+e+"'");for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=w[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function m(a,b){x[a]||(x[a]=[]),x[a].push(b)}function n(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!E(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(w.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):E(b.parent)?b.parent:"";if(e&&!w[e])return m(e,b.self);for(var f in z)D(z[f])&&(b[f]=z[f](b,z.$delegates[f]));if(w[c]=b,!b[y]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){v.$current.navigable==b&&j(a,c)||v.transitionTo(b,a,{location:!1})}]),x[c])for(var g=0;g<x[c].length;g++)n(x[c][g]);return b}function o(a){return a.indexOf("*")>-1}function p(a){var b=a.split("."),c=v.$current.name.split(".");if("**"===b[0]&&(c=c.slice(c.indexOf(b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(c.indexOf(b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length)return!1;for(var d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return c.join("")===b.join("")}function q(a,b){return E(a)&&!C(b)?z[a]:D(b)&&E(a)?(z[a]&&!z.$delegates[a]&&(z.$delegates[a]=z[a]),z[a]=b,this):this}function r(a,b){return F(a)?b=a:b.name=a,n(b),this}function s(a,e,g,m,n,q,r,s,x){function z(){r.url()!==M&&(r.url(M),r.replace())}function A(a,c,d,f,h){var i=d?c:k(a.params,c),j={$stateParams:i};h.resolve=n.resolve(a.resolve,j,h.resolve,a);var l=[h.resolve.then(function(a){h.globals=a})];return f&&l.push(f),H(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return g.load(d,{view:c,locals:j,params:i,notify:!1})||""}],l.push(n.resolve(e,j,h.resolve,a).then(function(f){if(D(c.controllerProvider)||G(c.controllerProvider)){var g=b.extend({},e,j);f.$$controller=m.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,f.$$controllerAs=c.controllerAs,h[d]=f}))}),e.all(l).then(function(){return h})}var B=e.reject(new Error("transition superseded")),F=e.reject(new Error("transition prevented")),K=e.reject(new Error("transition aborted")),L=e.reject(new Error("transition failed")),M=r.url(),N=x.baseHref();return u.locals={resolve:null,globals:{$stateParams:{}}},v={params:{},current:u.self,$current:u,transition:null},v.reload=function(){v.transitionTo(v.current,q,{reload:!0,inherit:!1,notify:!1})},v.go=function(a,b,c){return this.transitionTo(a,b,I({inherit:!0,relative:v.$current},c))},v.transitionTo=function(b,c,f){c=c||{},f=I({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,k=v.$current,n=v.params,o=k.path,p=l(b,f.relative);if(!C(p)){var s={to:b,toParams:c,options:f};if(g=a.$broadcast("$stateNotFound",s,k.self,n),g.defaultPrevented)return z(),K;if(g.retry){if(f.$retry)return z(),L;var w=v.transition=e.when(g.retry);return w.then(function(){return w!==v.transition?B:(s.options.$retry=!0,v.transitionTo(s.to,s.toParams,s.options))},function(){return K}),z(),w}if(b=s.to,c=s.toParams,f=s.options,p=l(b,f.relative),!C(p)){if(f.relative)throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'");throw new Error("No such state '"+b+"'")}}if(p[y])throw new Error("Cannot transition to abstract state '"+b+"'");f.inherit&&(c=h(q,c||{},v.$current,p)),b=p;var x,D,E=b.path,G=u.locals,H=[];for(x=0,D=E[x];D&&D===o[x]&&j(c,n,D.ownParams)&&!f.reload;x++,D=E[x])G=H[x]=D.locals;if(t(b,k,G,f))return b.self.reloadOnSearch!==!1&&z(),v.transition=null,e.when(v.current);if(c=i(b.params,c||{}),f.notify&&(g=a.$broadcast("$stateChangeStart",b.self,c,k.self,n),g.defaultPrevented))return z(),F;for(var N=e.when(G),O=x;O<E.length;O++,D=E[O])G=H[O]=d(G),N=A(D,c,D===b,N,G);var P=v.transition=N.then(function(){var d,e,g;if(v.transition!==P)return B;for(d=o.length-1;d>=x;d--)g=o[d],g.self.onExit&&m.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=x;d<E.length;d++)e=E[d],e.locals=H[d],e.self.onEnter&&m.invoke(e.self.onEnter,e.self,e.locals.globals);if(v.transition!==P)return B;v.$current=b,v.current=b.self,v.params=c,J(v.params,q),v.transition=null;var h=b.navigable;return f.location&&h&&(r.url(h.url.format(h.locals.globals.$stateParams)),"replace"===f.location&&r.replace()),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,k.self,n),M=r.url(),v.current},function(d){return v.transition!==P?B:(v.transition=null,a.$broadcast("$stateChangeError",b.self,c,k.self,n,d),z(),e.reject(d))});return P},v.is=function(a,d){var e=l(a);return C(e)?v.$current!==e?!1:C(d)&&null!==d?b.equals(q,d):!0:c},v.includes=function(a,d){if(E(a)&&o(a)){if(!p(a))return!1;a=v.$current.name}var e=l(a);if(!C(e))return c;if(!C(v.$current.includes[e.name]))return!1;var f=!0;return b.forEach(d,function(a,b){C(q[b])&&q[b]===a||(f=!1)}),f},v.href=function(a,b,c){c=I({lossy:!0,inherit:!1,absolute:!1,relative:v.$current},c||{});var d=l(a,c.relative);if(!C(d))return null;b=h(q,b||{},v.$current,d);var e=d&&c.lossy?d.navigable:d,g=e&&e.url?e.url.format(i(d.params,b||{})):null;return!f.html5Mode()&&g&&(g="#"+f.hashPrefix()+g),"/"!==N&&(f.html5Mode()?g=N.slice(0,-1)+g:c.absolute&&(g=N.slice(1)+g)),c.absolute&&g&&(g=r.protocol()+"://"+r.host()+(80==r.port()||443==r.port()?"":":"+r.port())+(!f.html5Mode()&&g?"/":"")+g),g},v.get=function(a,b){if(!C(a)){var c=[];return H(w,function(a){c.push(a.self)}),c}var d=l(a,b);return d&&d.self?d.self:null},v}function t(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var u,v,w={},x={},y="abstract",z={parent:function(a){if(C(a.parent)&&a.parent)return l(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?l(b[1]):u},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=I({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url;if(E(b))return"^"==b.charAt(0)?e.compile(b.substring(1)):(a.parent.navigable||u).url.concat(b);if(e.isMatcher(b)||null==b)return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},params:function(a){if(!a.params)return a.url?a.url.parameters():a.parent.params;if(!G(a.params))throw new Error("Invalid params in state '"+a+"'");if(a.url)throw new Error("Both params and url specicified in state '"+a+"'");return a.params},views:function(a){var b={};return H(C(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},ownParams:function(a){if(!a.parent)return a.params;var b={};H(a.params,function(a){b[a]=!0}),H(a.parent.params,function(c){if(!b[c])throw new Error("Missing required parameter '"+c+"' in state '"+a.name+"'");b[c]=!1});var c=[];return H(b,function(a,b){a&&c.push(b)}),c},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?I({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};u=n({name:"",url:"^",views:null,"abstract":!0}),u.navigable=null,this.decorator=q,this.state=r,this.$get=s,s.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"]}function r(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=I(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function s(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView()},0,!1)}}]}function t(a,c,d){function e(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function f(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(i)return{enter:function(a,b,c){i.enter(a,null,b,c)},leave:function(a,b){i.leave(a,b)}};if(h){var d=h&&h(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var g=e(),h=g("$animator"),i=g("$animate"),j={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,e,g){return function(c,e,h){function i(){k&&(k.remove(),k=null),m&&(m.$destroy(),m=null),l&&(q.leave(l,function(){k=null}),k=l,l=null)}function j(f){var h=c.$new(),j=l&&l.data("$uiViewName"),k=j&&a.$current&&a.$current.locals[j];if(f||k!==n){var r=g(h,function(a){q.enter(a,e,function(){(b.isDefined(p)&&!p||c.$eval(p))&&d(a)}),i()});n=a.$current.locals[r.data("$uiViewName")],l=r,m=h,m.$emit("$viewContentLoaded"),m.$eval(o)}}var k,l,m,n,o=h.onload||"",p=h.autoscroll,q=f(h,c);c.$on("$stateChangeSuccess",function(){j(!1)}),c.$on("$viewContentLoading",function(){j(!1)}),j(!0)}}};return j}function u(a,b,c){return{restrict:"ECA",priority:-400,compile:function(d){var e=d.html();return function(d,f,g){var h=g.uiView||g.name||"",i=f.inheritedData("$uiView");h.indexOf("@")<0&&(h=h+"@"+(i?i.state.name:"")),f.data("$uiViewName",h);var j=c.$current,k=j&&j.locals[h];if(k){f.data("$uiView",{name:h,state:k.$$state}),f.html(k.$template?k.$template:e);var l=a(f.contents());if(k.$$controller){k.$scope=d;var m=b(k.$$controller,k);k.$$controllerAs&&(d[k.$$controllerAs]=m),f.data("$ngControllerController",m),f.children().data("$ngControllerController",m)}l(d)}}}}}function v(a){var b=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!b||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1],paramExpr:b[3]||null}}function w(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function x(a,c){var d=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(e,f,g,h){var i=v(g.uiSref),j=null,k=w(f)||a.$current,l="FORM"===f[0].nodeName,m=l?"action":"href",n=!0,o={relative:k},p=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in p&&(o[a]=p[a])});var q=function(b){if(b&&(j=b),n){var c=a.href(i.state,j,o);return h&&h.$$setStateInfo(i.state,j),c?void(f[0][m]=c):(n=!1,!1)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a){a!==j&&q(a)},!0),j=e.$eval(i.paramExpr)),q(),l||f.bind("click",function(b){var d=b.which||b.button;d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target")||(c(function(){a.go(i.state,j,o)}),b.preventDefault())})}}}function y(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(d,e,f){function g(){a.$current.self===i&&h()?e.addClass(l):e.removeClass(l)}function h(){return!k||j(k,b)}var i,k,l;l=c(f.uiSrefActive||"",!1)(d),this.$$setStateInfo=function(b,c){i=a.get(b,w(e)),k=c,g()},d.$on("$stateChangeSuccess",g)}]}}function z(a){return function(b){return a.is(b)}}function A(a){return function(b){return a.includes(b)}}function B(a,b){function e(a){this.locals=a.locals.globals,this.params=this.locals.$stateParams}function f(){this.locals=null,this.params=null}function g(c,g){if(null!=g.redirectTo){var h,j=g.redirectTo;if(E(j))h=j;else{if(!D(j))throw new Error("Invalid 'redirectTo' in when()");h=function(a,b){return j(a,b.path(),b.search())}}b.when(c,h)}else a.state(d(g,{parent:null,name:"route:"+encodeURIComponent(c),url:c,onEnter:e,onExit:f}));return i.push(g),this}function h(a,b,d){function e(a){return""!==a.name?a:c}var f={routes:i,params:d,current:c};return b.$on("$stateChangeStart",function(a,c,d,f){b.$broadcast("$routeChangeStart",e(c),e(f))}),b.$on("$stateChangeSuccess",function(a,c,d,g){f.current=e(c),b.$broadcast("$routeChangeSuccess",e(c),e(g)),J(d,f.params)}),b.$on("$stateChangeError",function(a,c,d,f,g,h){b.$broadcast("$routeChangeError",e(c),e(f),h)}),f}var i=[];e.$inject=["$$state"],this.when=g,this.$get=h,h.$inject=["$state","$rootScope","$routeParams"]}var C=b.isDefined,D=b.isFunction,E=b.isString,F=b.isObject,G=b.isArray,H=b.forEach,I=b.extend,J=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),l.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",l),m.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",m),n.prototype.concat=function(a){return new n(this.sourcePath+a+this.sourceSearch)},n.prototype.toString=function(){return this.source},n.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;var d,e=this.params,f=e.length,g=this.segments.length-1,h={};if(g!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(d=0;g>d;d++)h[e[d]]=c[d+1];for(;f>d;d++)h[e[d]]=b[e[d]];return h},n.prototype.parameters=function(){return this.params},n.prototype.format=function(a){var b=this.segments,c=this.params;if(!a)return b.join("");var d,e,f,g=b.length-1,h=c.length,i=b[0];for(d=0;g>d;d++)f=a[c[d]],null!=f&&(i+=encodeURIComponent(f)),i+=b[d+1];for(;h>d;d++)f=a[c[d]],null!=f&&(i+=(e?"&":"?")+c[d]+"="+encodeURIComponent(f),e=!0);return i},b.module("ui.router.util").provider("$urlMatcherFactory",o),p.$inject=["$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",p),q.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",q),r.$inject=[],b.module("ui.router.state").provider("$view",r),b.module("ui.router.state").provider("$uiViewScroll",s),t.$inject=["$state","$injector","$uiViewScroll"],u.$inject=["$compile","$controller","$state"],b.module("ui.router.state").directive("uiView",t),b.module("ui.router.state").directive("uiView",u),x.$inject=["$state","$timeout"],y.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",x).directive("uiSrefActive",y),z.$inject=["$state"],A.$inject=["$state"],b.module("ui.router.state").filter("isState",z).filter("includedByState",A),B.$inject=["$stateProvider","$urlRouterProvider"],b.module("ui.router.compat").provider("$route",B).directive("ngView",t)}(window,window.angular);
}).call(global, module, undefined, undefined);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"/home/codio/workspace/bower_components/angular/angular.min.js":"/home/codio/workspace/bower_components/angular/angular.min.js"}],"/home/codio/workspace/bower_components/angular/angular.min.js":[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(W,X,t){'use strict';function C(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.2.26/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function Pa(b){if(null==b||Ga(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:v(b)||J(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function r(b,a,c){var d;if(b)if(P(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(J(b)||Pa(b))for(d=0;d<b.length;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==r)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function Zb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function Tc(b,
a,c){for(var d=Zb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function $b(b){return function(a,c){b(c,a)}}function hb(){for(var b=ma.length,a;b;){b--;a=ma[b].charCodeAt(0);if(57==a)return ma[b]="A",ma.join("");if(90==a)ma[b]="0";else return ma[b]=String.fromCharCode(a+1),ma.join("")}ma.unshift("0");return ma.join("")}function ac(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function D(b){var a=b.$$hashKey;r(arguments,function(a){a!==b&&r(a,function(a,c){b[c]=a})});ac(b,a);return b}function U(b){return parseInt(b,
10)}function bc(b,a){return D(new (D(function(){},{prototype:b})),a)}function E(){}function Qa(b){return b}function ba(b){return function(){return b}}function x(b){return"undefined"===typeof b}function y(b){return"undefined"!==typeof b}function T(b){return null!=b&&"object"===typeof b}function v(b){return"string"===typeof b}function ib(b){return"number"===typeof b}function ta(b){return"[object Date]"===za.call(b)}function P(b){return"function"===typeof b}function jb(b){return"[object RegExp]"===za.call(b)}
function Ga(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function Uc(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function Vc(b,a,c){var d=[];r(b,function(b,f,g){d.push(a.call(c,b,f,g))});return d}function Ra(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Sa(b,a){var c=Ra(b,a);0<=c&&b.splice(c,1);return a}function Ha(b,a,c,d){if(Ga(b)||b&&b.$evalAsync&&b.$watch)throw Ta("cpws");if(a){if(b===a)throw Ta("cpi");c=c||[];
d=d||[];if(T(b)){var e=Ra(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(J(b))for(var f=a.length=0;f<b.length;f++)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var g=a.$$hashKey;J(a)?a.length=0:r(a,function(b,c){delete a[c]});for(f in b)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e;ac(a,g)}}else if(a=b)J(b)?a=Ha(b,[],c,d):ta(b)?a=new Date(b.getTime()):jb(b)?(a=RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):T(b)&&(a=Ha(b,{},c,d));
return a}function ha(b,a){if(J(b)){a=a||[];for(var c=0;c<b.length;c++)a[c]=b[c]}else if(T(b))for(c in a=a||{},b)!kb.call(b,c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(a[c]=b[c]);return a||b}function Aa(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(J(b)){if(!J(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!Aa(b[d],a[d]))return!1;return!0}}else{if(ta(b))return ta(a)?isNaN(b.getTime())&&isNaN(a.getTime())||b.getTime()===
a.getTime():!1;if(jb(b)&&jb(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||Ga(b)||Ga(a)||J(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!P(b[d])){if(!Aa(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!P(a[d]))return!1;return!0}return!1}function Bb(b,a){var c=2<arguments.length?Ba.call(arguments,2):[];return!P(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(Ba.call(arguments,
0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Wc(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)?c=t:Ga(a)?c="$WINDOW":a&&X===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function na(b,a){return"undefined"===typeof b?t:JSON.stringify(b,Wc,a?"  ":null)}function cc(b){return v(b)?JSON.parse(b):b}function Ua(b){"function"===typeof b?b=!0:b&&0!==b.length?(b=K(""+b),b=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)):b=!1;
return b}function ia(b){b=w(b).clone();try{b.empty()}catch(a){}var c=w("<div>").append(b).html();try{return 3===b[0].nodeType?K(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(c)}}function dc(b){try{return decodeURIComponent(b)}catch(a){}}function ec(b){var a={},c,d;r((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=dc(c[0]),y(d)&&(b=y(c[1])?dc(c[1]):!0,kb.call(a,d)?J(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Cb(b){var a=
[];r(b,function(b,d){J(b)?r(b,function(b){a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))}):a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))});return a.length?a.join("&"):""}function lb(b){return Ca(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ca(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function Xc(b,a){function c(a){a&&d.push(a)}var d=[b],e,f,g=["ng:app","ng-app","x-ng-app",
"data-ng-app"],k=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(g,function(a){g[a]=!0;c(X.getElementById(a));a=a.replace(":","\\:");b.querySelectorAll&&(r(b.querySelectorAll("."+a),c),r(b.querySelectorAll("."+a+"\\:"),c),r(b.querySelectorAll("["+a+"]"),c))});r(d,function(a){if(!e){var b=k.exec(" "+a.className+" ");b?(e=a,f=(b[2]||"").replace(/\s+/g,",")):r(a.attributes,function(b){!e&&g[b.name]&&(e=a,f=b.value)})}});e&&a(e,f?[f]:[])}function fc(b,a){var c=function(){b=w(b);if(b.injector()){var c=b[0]===X?
"document":ia(b);throw Ta("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");c=gc(a);c.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},d=/^NG_DEFER_BOOTSTRAP!/;if(W&&!d.test(W.name))return c();W.name=W.name.replace(d,"");Va.resumeBootstrap=function(b){r(b,function(b){a.push(b)});c()}}function mb(b,a){a=
a||"_";return b.replace(Yc,function(b,d){return(d?a:"")+b.toLowerCase()})}function Db(b,a,c){if(!b)throw Ta("areq",a||"?",c||"required");return b}function Wa(b,a,c){c&&J(b)&&(b=b[b.length-1]);Db(P(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Da(b,a){if("hasOwnProperty"===b)throw Ta("badname",a);}function hc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&P(b)?Bb(e,b):b}function Eb(b){var a=
b[0];b=b[b.length-1];if(a===b)return w(a);var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return w(c)}function Zc(b){var a=C("$injector"),c=C("ng");b=b.angular||(b.angular={});b.$$minErr=b.$$minErr||C;return b.module||(b.module=function(){var b={};return function(e,f,g){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e){return function(){c[e||"push"]([a,d,arguments]);return n}}if(!f)throw a("nomod",
e);var c=[],d=[],l=b("$injector","invoke"),n={_invokeQueue:c,_runBlocks:d,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:l,run:function(a){d.push(a);return this}};g&&l(g);return n}())}}())}
function $c(b){D(b,{bootstrap:fc,copy:Ha,extend:D,equals:Aa,element:w,forEach:r,injector:gc,noop:E,bind:Bb,toJson:na,fromJson:cc,identity:Qa,isUndefined:x,isDefined:y,isString:v,isFunction:P,isObject:T,isNumber:ib,isElement:Uc,isArray:J,version:ad,isDate:ta,lowercase:K,uppercase:Ia,callbacks:{counter:0},$$minErr:C,$$csp:Xa});Ya=Zc(W);try{Ya("ngLocale")}catch(a){Ya("ngLocale",[]).provider("$locale",bd)}Ya("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:cd});a.provider("$compile",
ic).directive({a:dd,input:jc,textarea:jc,form:ed,script:fd,select:gd,style:hd,option:id,ngBind:jd,ngBindHtml:kd,ngBindTemplate:ld,ngClass:md,ngClassEven:nd,ngClassOdd:od,ngCloak:pd,ngController:qd,ngForm:rd,ngHide:sd,ngIf:td,ngInclude:ud,ngInit:vd,ngNonBindable:wd,ngPluralize:xd,ngRepeat:yd,ngShow:zd,ngStyle:Ad,ngSwitch:Bd,ngSwitchWhen:Cd,ngSwitchDefault:Dd,ngOptions:Ed,ngTransclude:Fd,ngModel:Gd,ngList:Hd,ngChange:Id,required:kc,ngRequired:kc,ngValue:Jd}).directive({ngInclude:Kd}).directive(Fb).directive(lc);
a.provider({$anchorScroll:Ld,$animate:Md,$browser:Nd,$cacheFactory:Od,$controller:Pd,$document:Qd,$exceptionHandler:Rd,$filter:mc,$interpolate:Sd,$interval:Td,$http:Ud,$httpBackend:Vd,$location:Wd,$log:Xd,$parse:Yd,$rootScope:Zd,$q:$d,$sce:ae,$sceDelegate:be,$sniffer:ce,$templateCache:de,$timeout:ee,$window:fe,$$rAF:ge,$$asyncCallback:he})}])}function Za(b){return b.replace(ie,function(a,b,d,e){return e?d.toUpperCase():d}).replace(je,"Moz$1")}function Gb(b,a,c,d){function e(b){var e=c&&b?[this.filter(b)]:
[this],m=a,h,l,n,p,q,s;if(!d||null!=b)for(;e.length;)for(h=e.shift(),l=0,n=h.length;l<n;l++)for(p=w(h[l]),m?p.triggerHandler("$destroy"):m=!m,q=0,p=(s=p.children()).length;q<p;q++)e.push(Ea(s[q]));return f.apply(this,arguments)}var f=Ea.fn[b],f=f.$original||f;e.$original=f;Ea.fn[b]=e}function S(b){if(b instanceof S)return b;v(b)&&(b=aa(b));if(!(this instanceof S)){if(v(b)&&"<"!=b.charAt(0))throw Hb("nosel");return new S(b)}if(v(b)){var a=b;b=X;var c;if(c=ke.exec(a))b=[b.createElement(c[1])];else{var d=
b,e;b=d.createDocumentFragment();c=[];if(Ib.test(a)){d=b.appendChild(d.createElement("div"));e=(le.exec(a)||["",""])[1].toLowerCase();e=ea[e]||ea._default;d.innerHTML="<div>&#160;</div>"+e[1]+a.replace(me,"<$1></$2>")+e[2];d.removeChild(d.firstChild);for(a=e[0];a--;)d=d.lastChild;a=0;for(e=d.childNodes.length;a<e;++a)c.push(d.childNodes[a]);d=b.firstChild;d.textContent=""}else c.push(d.createTextNode(a));b.textContent="";b.innerHTML="";b=c}Jb(this,b);w(X.createDocumentFragment()).append(this)}else Jb(this,
b)}function Kb(b){return b.cloneNode(!0)}function Ja(b){Lb(b);var a=0;for(b=b.childNodes||[];a<b.length;a++)Ja(b[a])}function nc(b,a,c,d){if(y(d))throw Hb("offargs");var e=oa(b,"events");oa(b,"handle")&&(x(a)?r(e,function(a,c){$a(b,c,a);delete e[c]}):r(a.split(" "),function(a){x(c)?($a(b,a,e[a]),delete e[a]):Sa(e[a]||[],c)}))}function Lb(b,a){var c=b.ng339,d=ab[c];d&&(a?delete ab[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),nc(b)),delete ab[c],b.ng339=t))}function oa(b,a,c){var d=
b.ng339,d=ab[d||-1];if(y(c))d||(b.ng339=d=++ne,d=ab[d]={}),d[a]=c;else return d&&d[a]}function Mb(b,a,c){var d=oa(b,"data"),e=y(c),f=!e&&y(a),g=f&&!T(a);d||g||oa(b,"data",d={});if(e)d[a]=c;else if(f){if(g)return d&&d[a];D(d,a)}else return d}function Nb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function nb(b,a){a&&b.setAttribute&&r(a.split(" "),function(a){b.setAttribute("class",aa((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ").replace(" "+aa(a)+" "," ")))})}function ob(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(a.split(" "),function(a){a=aa(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",aa(c))}}function Jb(b,a){if(a){a=a.nodeName||!y(a.length)||Ga(a)?[a]:a;for(var c=0;c<a.length;c++)b.push(a[c])}}function oc(b,a){return pb(b,"$"+(a||"ngController")+"Controller")}function pb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=J(a)?a:[a];b;){for(var d=
0,e=a.length;d<e;d++)if((c=w.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function pc(b){for(var a=0,c=b.childNodes;a<c.length;a++)Ja(c[a]);for(;b.firstChild;)b.removeChild(b.firstChild)}function qc(b,a){var c=qb[a.toLowerCase()];return c&&rc[b.nodeName]&&c}function oe(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||X);if(x(c.defaultPrevented)){var f=
c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue};var g=ha(a[e||c.type]||[]);r(g,function(a){a.call(b,c)});8>=Q?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ka(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=
b.$$hashKey)?d=b.$$hashKey():d===t&&(d=b.$$hashKey=(a||hb)()):d=b;return c+":"+d}function bb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}r(b,this.put,this)}function sc(b){var a,c;"function"===typeof b?(a=b.$inject)||(a=[],b.length&&(c=b.toString().replace(pe,""),c=c.match(qe),r(c[1].split(re),function(b){b.replace(se,function(b,c,d){a.push(d)})})),b.$inject=a):J(b)?(c=b.length-1,Wa(b[c],"fn"),a=b.slice(0,c)):Wa(b,"fn",!0);return a}function gc(b){function a(a){return function(b,c){if(T(b))r(b,
$b(a));else return a(b,c)}}function c(a,b){Da(a,"service");if(P(b)||J(b))b=n.instantiate(b);if(!b.$get)throw cb("pget",a);return l[a+k]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b=[],c,d,f,k;r(a,function(a){if(!h.get(a)){h.put(a,!0);try{if(v(a))for(c=Ya(a),b=b.concat(e(c.requires)).concat(c._runBlocks),d=c._invokeQueue,f=0,k=d.length;f<k;f++){var g=d[f],m=n.get(g[0]);m[g[1]].apply(m,g[2])}else P(a)?b.push(n.invoke(a)):J(a)?b.push(n.invoke(a)):Wa(a,"module")}catch(l){throw J(a)&&(a=
a[a.length-1]),l.message&&(l.stack&&-1==l.stack.indexOf(l.message))&&(l=l.message+"\n"+l.stack),cb("modulerr",a,l.stack||l.message||l);}}});return b}function f(a,b){function c(d){if(a.hasOwnProperty(d)){if(a[d]===g)throw cb("cdep",d+" <- "+m.join(" <- "));return a[d]}try{return m.unshift(d),a[d]=g,a[d]=b(d)}catch(e){throw a[d]===g&&delete a[d],e;}finally{m.shift()}}function d(a,b,e){var f=[],k=sc(a),g,m,h;m=0;for(g=k.length;m<g;m++){h=k[m];if("string"!==typeof h)throw cb("itkn",h);f.push(e&&e.hasOwnProperty(h)?
e[h]:c(h))}J(a)&&(a=a[g]);return a.apply(b,f)}return{invoke:d,instantiate:function(a,b){var c=function(){},e;c.prototype=(J(a)?a[a.length-1]:a).prototype;c=new c;e=d(a,c,b);return T(e)||P(e)?e:c},get:c,annotate:sc,has:function(b){return l.hasOwnProperty(b+k)||a.hasOwnProperty(b)}}}var g={},k="Provider",m=[],h=new bb([],!0),l={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,ba(b))}),constant:a(function(a,
b){Da(a,"constant");l[a]=b;p[a]=b}),decorator:function(a,b){var c=n.get(a+k),d=c.$get;c.$get=function(){var a=q.invoke(d,c);return q.invoke(b,null,{$delegate:a})}}}},n=l.$injector=f(l,function(){throw cb("unpr",m.join(" <- "));}),p={},q=p.$injector=f(p,function(a){a=n.get(a+k);return q.invoke(a.$get,a)});r(e(b),function(a){q.invoke(a||E)});return q}function Ld(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;
r(a,function(a){b||"a"!==K(a.nodeName)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=g.getElementById(b))?d.scrollIntoView():(d=e(g.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var g=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function he(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function te(b,a,c,d){function e(a){try{a.apply(null,
Ba.call(arguments,1))}finally{if(s--,0===s)for(;F.length;)try{F.pop()()}catch(b){c.error(b)}}}function f(a,b){(function fa(){r(u,function(a){a()});A=b(fa,a)})()}function g(){z=null;N!=k.url()&&(N=k.url(),r(ca,function(a){a(k.url())}))}var k=this,m=a[0],h=b.location,l=b.history,n=b.setTimeout,p=b.clearTimeout,q={};k.isMock=!1;var s=0,F=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){s++};k.notifyWhenNoOutstandingRequests=function(a){r(u,function(a){a()});0===s?a():F.push(a)};
var u=[],A;k.addPollFn=function(a){x(A)&&f(100,n);u.push(a);return a};var N=h.href,R=a.find("base"),z=null;k.url=function(a,c){h!==b.location&&(h=b.location);l!==b.history&&(l=b.history);if(a){if(N!=a)return N=a,d.history?c?l.replaceState(null,"",a):(l.pushState(null,"",a),R.attr("href",R.attr("href"))):(z=a,c?h.replace(a):h.href=a),k}else return z||h.href.replace(/%27/g,"'")};var ca=[],L=!1;k.onUrlChange=function(a){if(!L){if(d.history)w(b).on("popstate",g);if(d.hashchange)w(b).on("hashchange",g);
else k.addPollFn(g);L=!0}ca.push(a);return a};k.$$checkUrlChange=g;k.baseHref=function(){var a=R.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var O={},da="",B=k.baseHref();k.cookies=function(a,b){var d,e,f,k;if(a)b===t?m.cookie=escape(a)+"=;path="+B+";expires=Thu, 01 Jan 1970 00:00:00 GMT":v(b)&&(d=(m.cookie=escape(a)+"="+escape(b)+";path="+B).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(m.cookie!==
da)for(da=m.cookie,d=da.split("; "),O={},f=0;f<d.length;f++)e=d[f],k=e.indexOf("="),0<k&&(a=unescape(e.substring(0,k)),O[a]===t&&(O[a]=unescape(e.substring(k+1))));return O}};k.defer=function(a,b){var c;s++;c=n(function(){delete q[c];e(a)},b||0);q[c]=!0;return c};k.defer.cancel=function(a){return q[a]?(delete q[a],p(a),e(E),!0):!1}}function Nd(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new te(b,d,a,c)}]}function Od(){this.$get=function(){function b(b,d){function e(a){a!=
n&&(p?p==a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw C("$cacheFactory")("iid",b);var g=0,k=D({},d,{id:b}),m={},h=d&&d.capacity||Number.MAX_VALUE,l={},n=null,p=null;return a[b]={put:function(a,b){if(h<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}if(!x(b))return a in m||g++,m[a]=b,g>h&&this.remove(p.key),b},get:function(a){if(h<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return m[a]},remove:function(a){if(h<Number.MAX_VALUE){var b=
l[a];if(!b)return;b==n&&(n=b.p);b==p&&(p=b.n);f(b.n,b.p);delete l[a]}delete m[a];g--},removeAll:function(){m={};g=0;l={};n=p=null},destroy:function(){l=k=m=null;delete a[b]},info:function(){return D({},k,{size:g})}}}var a={};b.info=function(){var b={};r(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function de(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ic(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
g=/^(on[a-z]+|formaction)$/;this.directive=function m(a,e){Da(a,"directive");v(a)?(Db(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];r(c[a],function(c,f){try{var g=b.invoke(c);P(g)?g={compile:ba(g)}:!g.compile&&g.link&&(g.compile=ba(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(m){d(m)}});return e}])),c[a].push(e)):r(a,$b(m));
return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,l,n,p,q,s,F,u,A,N,R){function z(a,b,c,d,e){a instanceof
w||(a=w(a));r(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=w(b).wrap("<span></span>").parent()[0])});var f=L(a,b,a,c,d,e);ca(a,"ng-scope");return function(b,c,d,e){Db(b,"scope");var g=c?La.clone.call(a):a;r(d,function(a,b){g.data("$"+b+"Controller",a)});d=0;for(var m=g.length;d<m;d++){var h=g[d].nodeType;1!==h&&9!==h||g.eq(d).data("$scope",b)}c&&c(g,b);f&&f(b,g,g,e);return g}}function ca(a,b){try{a.addClass(b)}catch(c){}}function L(a,b,c,d,e,f){function g(a,c,d,e){var f,h,l,q,n,
p,s;f=c.length;var M=Array(f);for(q=0;q<f;q++)M[q]=c[q];p=q=0;for(n=m.length;q<n;p++)h=M[p],c=m[q++],f=m[q++],c?(c.scope?(l=a.$new(),w.data(h,"$scope",l)):l=a,s=c.transcludeOnThisElement?O(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?O(a,b):null,c(f,l,h,d,s)):f&&f(a,h.childNodes,t,e)}for(var m=[],h,l,q,n,p=0;p<a.length;p++)h=new Ob,l=da(a[p],[],h,0===p?d:t,e),(f=l.length?H(l,a[p],h,b,c,null,[],[],f):null)&&f.scope&&ca(h.$$element,"ng-scope"),h=f&&f.terminal||!(q=a[p].childNodes)||!q.length?
null:L(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),m.push(f,h),n=n||f||h,f=null;return n?g:null}function O(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function da(a,b,c,d,g){var m=c.$attr,h;switch(a.nodeType){case 1:fa(b,pa(Ma(a).toLowerCase()),"E",d,g);for(var l,q,n,p=a.attributes,s=0,F=p&&p.length;s<F;s++){var A=!1,N=!1;l=p[s];if(!Q||8<=Q||l.specified){h=l.name;q=
aa(l.value);l=pa(h);if(n=U.test(l))h=mb(l.substr(6),"-");var u=l.replace(/(Start|End)$/,"");l===u+"Start"&&(A=h,N=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6));l=pa(h.toLowerCase());m[l]=h;if(n||!c.hasOwnProperty(l))c[l]=q,qc(a,l)&&(c[l]=!0);S(a,b,q,l);fa(b,l,"A",d,g,A,N)}}a=a.className;if(v(a)&&""!==a)for(;h=f.exec(a);)l=pa(h[2]),fa(b,l,"C",d,g)&&(c[l]=aa(h[3])),a=a.substr(h.index+h[0].length);break;case 3:K(b,a.nodeValue);break;case 8:try{if(h=e.exec(a.nodeValue))l=pa(h[1]),fa(b,l,"M",
d,g)&&(c[l]=aa(h[2]))}catch(z){}}b.sort(x);return b}function B(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return w(d)}function I(a,b,c){return function(d,e,f,g,h){e=B(e[0],b,c);return a(d,e,f,g,h)}}function H(a,c,d,e,f,g,m,n,p){function F(a,b,c,d){if(a){c&&(a=I(a,c,d));a.require=G.require;a.directiveName=C;if(L===G||G.$$isolateScope)a=
tc(a,{isolateScope:!0});m.push(a)}if(b){c&&(b=I(b,c,d));b.require=G.require;b.directiveName=C;if(L===G||G.$$isolateScope)b=tc(b,{isolateScope:!0});n.push(b)}}function A(a,b,c,d){var e,f="data",g=!1;if(v(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);}else J(b)&&(e=[],r(b,function(b){e.push(A(a,b,c,d))}));return e}function N(a,e,f,g,p){function F(a,b){var c;2>arguments.length&&
(b=a,a=t);K&&(c=da);return p(a,b,c)}var u,M,z,O,I,B,da={},rb;u=c===f?d:ha(d,new Ob(w(f),d.$attr));M=u.$$element;if(L){var Na=/^\s*([@=&])(\??)\s*(\w*)\s*$/;B=e.$new(!0);!H||H!==L&&H!==L.$$originalDirective?M.data("$isolateScopeNoTemplate",B):M.data("$isolateScope",B);ca(M,"ng-isolate-scope");r(L.scope,function(a,c){var d=a.match(Na)||[],f=d[3]||c,g="?"==d[2],d=d[1],m,l,n,p;B.$$isolateBindings[c]=d+f;switch(d){case "@":u.$observe(f,function(a){B[c]=a});u.$$observers[f].$$scope=e;u[f]&&(B[c]=b(u[f])(e));
break;case "=":if(g&&!u[f])break;l=q(u[f]);p=l.literal?Aa:function(a,b){return a===b||a!==a&&b!==b};n=l.assign||function(){m=B[c]=l(e);throw ja("nonassign",u[f],L.name);};m=B[c]=l(e);B.$watch(function(){var a=l(e);p(a,B[c])||(p(a,m)?n(e,a=B[c]):B[c]=a);return m=a},null,l.literal);break;case "&":l=q(u[f]);B[c]=function(a){return l(e,a)};break;default:throw ja("iscp",L.name,c,a);}})}rb=p&&F;R&&r(R,function(a){var b={$scope:a===L||a.$$isolateScope?B:e,$element:M,$attrs:u,$transclude:rb},c;I=a.controller;
"@"==I&&(I=u[a.name]);c=s(I,b);da[a.name]=c;K||M.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(z=m.length;g<z;g++)try{O=m[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(G){l(G,ia(M))}g=e;L&&(L.template||null===L.templateUrl)&&(g=B);a&&a(g,f.childNodes,t,p);for(g=n.length-1;0<=g;g--)try{O=n[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(y){l(y,ia(M))}}p=p||{};for(var u=-Number.MAX_VALUE,
O,R=p.controllerDirectives,L=p.newIsolateScopeDirective,H=p.templateDirective,fa=p.nonTlbTranscludeDirective,x=!1,D=!1,K=p.hasElementTranscludeDirective,Z=d.$$element=w(c),G,C,V,S=e,Q,Fa=0,qa=a.length;Fa<qa;Fa++){G=a[Fa];var U=G.$$start,Y=G.$$end;U&&(Z=B(c,U,Y));V=t;if(u>G.priority)break;if(V=G.scope)O=O||G,G.templateUrl||(db("new/isolated scope",L,G,Z),T(V)&&(L=G));C=G.name;!G.templateUrl&&G.controller&&(V=G.controller,R=R||{},db("'"+C+"' controller",R[C],G,Z),R[C]=G);if(V=G.transclude)x=!0,G.$$tlb||
(db("transclusion",fa,G,Z),fa=G),"element"==V?(K=!0,u=G.priority,V=Z,Z=d.$$element=w(X.createComment(" "+C+": "+d[C]+" ")),c=Z[0],Na(f,Ba.call(V,0),c),S=z(V,e,u,g&&g.name,{nonTlbTranscludeDirective:fa})):(V=w(Kb(c)).contents(),Z.empty(),S=z(V,e));if(G.template)if(D=!0,db("template",H,G,Z),H=G,V=P(G.template)?G.template(Z,d):G.template,V=W(V),G.replace){g=G;V=Ib.test(V)?w(aa(V)):[];c=V[0];if(1!=V.length||1!==c.nodeType)throw ja("tplrt",C,"");Na(f,Z,c);qa={$attr:{}};V=da(c,[],qa);var $=a.splice(Fa+
1,a.length-(Fa+1));L&&y(V);a=a.concat(V).concat($);E(d,qa);qa=a.length}else Z.html(V);if(G.templateUrl)D=!0,db("template",H,G,Z),H=G,G.replace&&(g=G),N=ue(a.splice(Fa,a.length-Fa),Z,d,f,x&&S,m,n,{controllerDirectives:R,newIsolateScopeDirective:L,templateDirective:H,nonTlbTranscludeDirective:fa}),qa=a.length;else if(G.compile)try{Q=G.compile(Z,d,S),P(Q)?F(null,Q,U,Y):Q&&F(Q.pre,Q.post,U,Y)}catch(ve){l(ve,ia(Z))}G.terminal&&(N.terminal=!0,u=Math.max(u,G.priority))}N.scope=O&&!0===O.scope;N.transcludeOnThisElement=
x;N.templateOnThisElement=D;N.transclude=S;p.hasElementTranscludeDirective=K;return N}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=bc(a[b],{$$isolateScope:!0})}function fa(b,e,f,g,h,q,n){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var p;e=a.get(e+d);for(var s=0,u=e.length;s<u;s++)try{p=e[s],(g===t||g>p.priority)&&-1!=p.restrict.indexOf(f)&&(q&&(p=bc(p,{$$start:q,$$end:n})),b.push(p),h=p)}catch(F){l(F)}}return h}function E(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;r(a,function(d,e){"$"!=
e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,f){"class"==f?(ca(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function ue(a,b,c,d,e,f,g,h){var m=[],l,q,s=b[0],u=a.shift(),F=D({},u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),N=P(u.templateUrl)?u.templateUrl(b,c):u.templateUrl;
b.empty();n.get(A.getTrustedResourceUrl(N),{cache:p}).success(function(n){var p,A;n=W(n);if(u.replace){n=Ib.test(n)?w(aa(n)):[];p=n[0];if(1!=n.length||1!==p.nodeType)throw ja("tplrt",u.name,N);n={$attr:{}};Na(d,b,p);var z=da(p,[],n);T(u.scope)&&y(z);a=z.concat(a);E(c,n)}else p=s,b.html(n);a.unshift(F);l=H(a,p,c,e,b,u,f,g,h);r(d,function(a,c){a==p&&(d[c]=b[0])});for(q=L(b[0].childNodes,e);m.length;){n=m.shift();A=m.shift();var R=m.shift(),I=m.shift(),z=b[0];if(A!==s){var B=A.className;h.hasElementTranscludeDirective&&
u.replace||(z=Kb(p));Na(R,w(A),z);ca(w(z),B)}A=l.transcludeOnThisElement?O(n,l.transclude,I):I;l(q,n,z,d,A)}m=null}).error(function(a,b,c,d){throw ja("tpload",d.url);});return function(a,b,c,d,e){a=e;m?(m.push(b),m.push(c),m.push(d),m.push(a)):(l.transcludeOnThisElement&&(a=O(b,l.transclude,e)),l(q,b,c,d,a))}}function x(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function db(a,b,c,d){if(b)throw ja("multidir",b.name,c.name,a,ia(d));}function K(a,
c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent().length;b&&ca(a.parent(),"ng-binding");return function(a,c){var e=c.parent(),f=e.data("$binding")||[];f.push(d);e.data("$binding",f);b||ca(e,"ng-binding");a.$watch(d,function(a){c[0].nodeValue=a})}}})}function C(a,b){if("srcdoc"==b)return A.HTML;var c=Ma(a);if("xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b))return A.RESOURCE_URL}function S(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"SELECT"===
Ma(a))throw ja("selmulti",ia(a));c.push({priority:100,compile:function(){return{pre:function(c,d,m){d=m.$$observers||(m.$$observers={});if(g.test(e))throw ja("nodomevents");if(f=b(m[e],!0,C(a,e)))m[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(m.$$observers&&m.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?m.$updateClass(a,b):m.$set(e,a)})}}}})}}function Na(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,m;if(a)for(g=0,m=a.length;g<m;g++)if(a[g]==d){a[g++]=c;m=g+e-1;for(var h=a.length;g<
h;g++,m++)m<h?a[g]=a[m]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=X.createDocumentFragment();a.appendChild(d);c[w.expando]=d[w.expando];d=1;for(e=b.length;d<e;d++)f=b[d],w(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function tc(a,b){return D(function(){return a.apply(null,arguments)},a,b)}var Ob=function(a,b){this.$$element=a;this.$attr=b||{}};Ob.prototype={$normalize:pa,$addClass:function(a){a&&0<a.length&&N.addClass(this.$$element,a)},$removeClass:function(a){a&&0<
a.length&&N.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=uc(a,b),d=uc(b,a);0===c.length?N.removeClass(this.$$element,d):0===d.length?N.addClass(this.$$element,c):N.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=qc(this.$$element[0],a);e&&(this.$$element.prop(a,b),d=e);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=mb(a,"-"));e=Ma(this.$$element);if("A"===e&&"href"===a||"IMG"===e&&"src"===a)this[a]=b=R(b,"src"===a);!1!==c&&(null===b||b===t?this.$$element.removeAttr(d):
this.$$element.attr(d,b));(c=this.$$observers)&&r(c[a],function(a){try{a(b)}catch(c){l(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);F.$evalAsync(function(){e.$$inter||b(c[a])});return b}};var qa=b.startSymbol(),Z=b.endSymbol(),W="{{"==qa||"}}"==Z?Qa:function(a){return a.replace(/\{\{/g,qa).replace(/}}/g,Z)},U=/^ngAttr[A-Z]/;return z}]}function pa(b){return Za(b.replace(we,""))}function uc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=
0;a:for(;f<d.length;f++){for(var g=d[f],k=0;k<e.length;k++)if(g==e[k])continue a;c+=(0<c.length?" ":"")+g}return c}function Pd(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,d){Da(a,"controller");T(a)?D(b,a):b[a]=d};this.$get=["$injector","$window",function(c,d){return function(e,f){var g,k,m;v(e)&&(g=e.match(a),k=g[1],m=g[3],e=b.hasOwnProperty(k)?b[k]:hc(f.$scope,k,!0)||hc(d,k,!0),Wa(e,k,!0));g=c.instantiate(e,f);if(m){if(!f||"object"!==typeof f.$scope)throw C("$controller")("noscp",
k||e.name,m);f.$scope[m]=g}return g}}]}function Qd(){this.$get=["$window",function(b){return w(b.document)}]}function Rd(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function vc(b){var a={},c,d,e;if(!b)return a;r(b.split("\n"),function(b){e=b.indexOf(":");c=K(aa(b.substr(0,e)));d=aa(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function wc(b){var a=T(b)?b:t;return function(c){a||(a=vc(b));return c?a[K(c)]||null:a}}function xc(b,a,c){if(P(c))return c(b,
a);r(c,function(c){b=c(b,a)});return b}function Ud(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){v(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=cc(d)));return d}],transformRequest:[function(a){return T(a)&&"[object File]"!==za.call(a)&&"[object Blob]"!==za.call(a)?na(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ha(d),put:ha(d),patch:ha(d)},xsrfCookieName:"XSRF-TOKEN",
xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[],g=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,n,p){function q(a){function b(a){var d=D({},a,{data:xc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:n.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){var b=e.headers,c=D({},a.headers),d,f,b=D({},b.common,b[K(a.method)]);
a:for(d in b){a=K(d);for(f in c)if(K(f)===a)continue a;c[d]=b[d]}(function(a){var b;r(a,function(c,d){P(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})})(c);return c}(a);D(c,a);c.headers=d;c.method=Ia(c.method);var f=[function(a){d=a.headers;var c=xc(a.data,wc(d),a.transformRequest);x(c)&&r(d,function(a,b){"content-type"===K(b)&&delete d[b]});x(a.withCredentials)&&!x(e.withCredentials)&&(a.withCredentials=e.withCredentials);return s(a,c,d).then(b,b)},t],g=n.when(c);for(r(A,function(a){(a.request||a.requestError)&&
f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var m=f.shift(),g=g.then(a,m)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function s(c,f,g){function h(a,b,c,e){I&&(200<=a&&300>a?I.put(w,[a,b,vc(c),e]):I.remove(w));p(b,a,c,e);d.$$phase||d.$apply()}function p(a,b,d,e){b=Math.max(b,0);(200<=
b&&300>b?A.resolve:A.reject)({data:a,status:b,headers:wc(d),config:c,statusText:e})}function s(){var a=Ra(q.pendingRequests,c);-1!==a&&q.pendingRequests.splice(a,1)}var A=n.defer(),r=A.promise,I,H,w=F(c.url,c.params);q.pendingRequests.push(c);r.then(s,s);!c.cache&&!e.cache||(!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method)||(I=T(c.cache)?c.cache:T(e.cache)?e.cache:u);if(I)if(H=I.get(w),y(H)){if(H&&P(H.then))return H.then(s,s),H;J(H)?p(H[1],H[0],ha(H[2]),H[3]):p(H,200,{},"OK")}else I.put(w,r);x(H)&&
((H=Pb(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:t)&&(g[c.xsrfHeaderName||e.xsrfHeaderName]=H),a(c.method,w,f,h,g,c.timeout,c.withCredentials,c.responseType));return r}function F(a,b){if(!b)return a;var c=[];Tc(b,function(a,b){null===a||x(a)||(J(a)||(a=[a]),r(a,function(a){T(a)&&(a=ta(a)?a.toISOString():na(a));c.push(Ca(b)+"="+Ca(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var u=c("$http"),A=[];r(f,function(a){A.unshift(v(a)?p.get(a):p.invoke(a))});r(g,
function(a,b){var c=v(a)?p.get(a):p.invoke(a);A.splice(b,0,{response:function(a){return c(n.when(a))},responseError:function(a){return c(n.reject(a))}})});q.pendingRequests=[];(function(a){r(arguments,function(a){q[a]=function(b,c){return q(D(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){q[a]=function(b,c,d){return q(D(d||{},{method:a,url:b,data:c}))}})})("post","put");q.defaults=e;return q}]}function xe(b){if(8>=Q&&(!b.match(/^(get|post|head|put|delete|options)$/i)||
!W.XMLHttpRequest))return new W.ActiveXObject("Microsoft.XMLHTTP");if(W.XMLHttpRequest)return new W.XMLHttpRequest;throw C("$httpBackend")("noxhr");}function Vd(){this.$get=["$browser","$window","$document",function(b,a,c){return ye(b,xe,b.defer,a.angular.callbacks,c[0])}]}function ye(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),g=null;f.type="text/javascript";f.src=a;f.async=!0;g=function(a){$a(f,"load",g);$a(f,"error",g);e.body.removeChild(f);f=null;var k=-1,s="unknown";a&&("load"!==
a.type||d[b].called||(a={type:"error"}),s=a.type,k="error"===a.type?404:200);c&&c(k,s)};sb(f,"load",g);sb(f,"error",g);8>=Q&&(f.onreadystatechange=function(){v(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))});e.body.appendChild(f);return g}var g=-1;return function(e,m,h,l,n,p,q,s){function F(){A=g;R&&R();z&&z.abort()}function u(a,d,e,f,g){L&&c.cancel(L);R=z=null;0===d&&(d=e?200:"file"==ua(m).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(E)}
var A;b.$$incOutstandingRequestCount();m=m||b.url();if("jsonp"==K(e)){var N="_"+(d.counter++).toString(36);d[N]=function(a){d[N].data=a;d[N].called=!0};var R=f(m.replace("JSON_CALLBACK","angular.callbacks."+N),N,function(a,b){u(l,a,d[N].data,"",b);d[N]=E})}else{var z=a(e);z.open(e,m,!0);r(n,function(a,b){y(a)&&z.setRequestHeader(b,a)});z.onreadystatechange=function(){if(z&&4==z.readyState){var a=null,b=null,c="";A!==g&&(a=z.getAllResponseHeaders(),b="response"in z?z.response:z.responseText);A===g&&
10>Q||(c=z.statusText);u(l,A||z.status,b,a,c)}};q&&(z.withCredentials=!0);if(s)try{z.responseType=s}catch(ca){if("json"!==s)throw ca;}z.send(h||null)}if(0<p)var L=c(F,p);else p&&P(p.then)&&p.then(F)}}function Sd(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,h,l){for(var n,p,q=0,s=[],F=f.length,u=!1,A=[];q<F;)-1!=(n=f.indexOf(b,q))&&-1!=(p=f.indexOf(a,
n+g))?(q!=n&&s.push(f.substring(q,n)),s.push(q=c(u=f.substring(n+g,p))),q.exp=u,q=p+k,u=!0):(q!=F&&s.push(f.substring(q)),q=F);(F=s.length)||(s.push(""),F=1);if(l&&1<s.length)throw yc("noconcat",f);if(!h||u)return A.length=F,q=function(a){try{for(var b=0,c=F,g;b<c;b++){if("function"==typeof(g=s[b]))if(g=g(a),g=l?e.getTrusted(l,g):e.valueOf(g),null==g)g="";else switch(typeof g){case "string":break;case "number":g=""+g;break;default:g=na(g)}A[b]=g}return A.join("")}catch(k){a=yc("interr",f,k.toString()),
d(a)}},q.exp=f,q.parts=s,q}var g=b.length,k=a.length;f.startSymbol=function(){return b};f.endSymbol=function(){return a};return f}]}function Td(){this.$get=["$rootScope","$window","$q",function(b,a,c){function d(d,g,k,m){var h=a.setInterval,l=a.clearInterval,n=c.defer(),p=n.promise,q=0,s=y(m)&&!m;k=y(k)?k:0;p.then(null,null,d);p.$$intervalId=h(function(){n.notify(q++);0<k&&q>=k&&(n.resolve(q),l(p.$$intervalId),delete e[p.$$intervalId]);s||b.$apply()},g);e[p.$$intervalId]=n;return p}var e={};d.cancel=
function(b){return b&&b.$$intervalId in e?(e[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete e[b.$$intervalId],!0):!1};return d}]}function bd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),
SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Qb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=
lb(b[a]);return b.join("/")}function zc(b,a,c){b=ua(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=U(b.port)||ze[b.protocol]||null}function Ac(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=ua(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=ec(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ra(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function eb(b){var a=
b.indexOf("#");return-1==a?b:b.substr(0,a)}function Rb(b){return b.substr(0,eb(b).lastIndexOf("/")+1)}function Bc(b,a){this.$$html5=!0;a=a||"";var c=Rb(b);zc(b,this,b);this.$$parse=function(a){var e=ra(c,a);if(!v(e))throw Sb("ipthprfx",a,c);Ac(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Cb(this.$$search),b=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;
if((e=ra(b,d))!==t)return d=e,(e=ra(a,e))!==t?c+(ra("/",e)||e):b+d;if((e=ra(c,d))!==t)return c+e;if(c==d+"/")return c}}function Tb(b,a){var c=Rb(b);zc(b,this,b);this.$$parse=function(d){var e=ra(b,d)||ra(c,d),e="#"==e.charAt(0)?ra(a,e):this.$$html5?e:"";if(!v(e))throw Sb("ihshprfx",d,a);Ac(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?
"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(eb(b)==eb(a))return a}}function Ub(b,a){this.$$html5=!0;Tb.apply(this,arguments);var c=Rb(b);this.$$rewrite=function(d){var e;if(b==eb(d))return d;if(e=ra(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function tb(b){return function(){return this[b]}}
function Cc(b,a){return function(c){if(x(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Wd(){var b="",a=!1;this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return y(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function g(a){c.$broadcast("$locationChangeSuccess",k.absUrl(),a)}var k,m,h=d.baseHref(),l=d.url(),n;a?(n=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(h||"/"),m=e.history?Bc:Ub):(n=
eb(l),m=Tb);k=new m(n,"#"+b);k.$$parse(k.$$rewrite(l));var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=w(a.target);"a"!==K(e[0].nodeName);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href");T(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=ua(g.animVal).href);if(!p.test(g)){if(m===Ub){var h=e.attr("href")||e.attr("xlink:href");if(h&&0>h.indexOf("://"))if(g="#"+b,"/"==h[0])g=n+g+h;else if("#"==h[0])g=n+g+(k.path()||"/")+h;
else{var l=k.path().split("/"),h=h.split("/");2!==l.length||l[1]||(l.length=1);for(var q=0;q<h.length;q++)"."!=h[q]&&(".."==h[q]?l.pop():h[q].length&&l.push(h[q]));g=n+g+l.join("/")}}l=k.$$rewrite(g);g&&(!e.attr("target")&&l&&!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(k.$$parse(l),c.$apply(),W.angular["ff-684208-preventDefault"]=!0))}}});k.absUrl()!=l&&d.url(k.absUrl(),!0);d.onUrlChange(function(a){k.absUrl()!=a&&(c.$evalAsync(function(){var b=k.absUrl();k.$$parse(a);c.$broadcast("$locationChangeStart",
a,b).defaultPrevented?(k.$$parse(b),d.url(b)):g(b)}),c.$$phase||c.$digest())});var q=0;c.$watch(function(){var a=d.url(),b=k.$$replace;q&&a==k.absUrl()||(q++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",k.absUrl(),a).defaultPrevented?k.$$parse(a):(d.url(k.absUrl(),b),g(a))}));k.$$replace=!1;return q});return k}]}function Xd(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&
-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||E;a=!1;try{a=!!e.apply}catch(m){}return a?function(){var a=[];r(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ka(b,
a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function va(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.document&&b.location&&b.alert&&b.setInterval)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a);}return b}function ub(b,a,c,d,e){va(b,d);e=e||{};a=a.split(".");for(var f,g=0;1<a.length;g++){f=ka(a.shift(),
d);var k=va(b[f],d);k||(k={},b[f]=k);b=k;b.then&&e.unwrapPromises&&(wa(d),"$$v"in b||function(a){a.then(function(b){a.$$v=b})}(b),b.$$v===t&&(b.$$v={}),b=b.$$v)}f=ka(a.shift(),d);va(b[f],d);return b[f]=c}function Dc(b,a,c,d,e,f,g){ka(b,f);ka(a,f);ka(c,f);ka(d,f);ka(e,f);return g.unwrapPromises?function(g,m){var h=m&&m.hasOwnProperty(b)?m:g,l;if(null==h)return h;(h=h[b])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!a)return h;if(null==h)return t;(h=h[a])&&h.then&&
(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!c)return h;if(null==h)return t;(h=h[c])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!d)return h;if(null==h)return t;(h=h[d])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!e)return h;if(null==h)return t;(h=h[e])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);return h}:function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;if(null==
h)return h;h=h[b];if(!a)return h;if(null==h)return t;h=h[a];if(!c)return h;if(null==h)return t;h=h[c];if(!d)return h;if(null==h)return t;h=h[d];return e?null==h?t:h=h[e]:h}}function Ec(b,a,c){if(Vb.hasOwnProperty(b))return Vb[b];var d=b.split("."),e=d.length,f;if(a.csp)f=6>e?Dc(d[0],d[1],d[2],d[3],d[4],c,a):function(b,f){var g=0,k;do k=Dc(d[g++],d[g++],d[g++],d[g++],d[g++],c,a)(b,f),f=t,b=k;while(g<e);return k};else{var g="var p;\n";r(d,function(b,d){ka(b,c);g+="if(s == null) return undefined;\ns="+
(d?"s":'((k&&k.hasOwnProperty("'+b+'"))?k:s)')+'["'+b+'"];\n'+(a.unwrapPromises?'if (s && s.then) {\n pw("'+c.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var g=g+"return s;",k=new Function("s","k","pw",g);k.toString=ba(g);f=a.unwrapPromises?function(a,b){return k(a,b,wa)}:k}"hasOwnProperty"!==b&&(Vb[b]=f);return f}function Yd(){var b={},a={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=
function(b){return y(b)?(a.unwrapPromises=!!b,this):a.unwrapPromises};this.logPromiseWarnings=function(b){return y(b)?(a.logPromiseWarnings=b,this):a.logPromiseWarnings};this.$get=["$filter","$sniffer","$log",function(c,d,e){a.csp=d.csp;wa=function(b){a.logPromiseWarnings&&!Fc.hasOwnProperty(b)&&(Fc[b]=!0,e.warn("[$parse] Promise found in the expression `"+b+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))};return function(d){var e;switch(typeof d){case "string":if(b.hasOwnProperty(d))return b[d];
e=new Wb(a);e=(new fb(e,c,a)).parse(d);"hasOwnProperty"!==d&&(b[d]=e);return e;case "function":return d;default:return E}}}]}function $d(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return Ae(function(a){b.$evalAsync(a)},a)}]}function Ae(b,a){function c(a){return a}function d(a){return g(a)}var e=function(){var g=[],h,l;return l={resolve:function(a){if(g){var c=g;g=t;h=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],h.then(a[0],a[1],a[2])})}},reject:function(a){l.resolve(k(a))},
notify:function(a){if(g){var c=g;g.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,k){var l=e(),F=function(d){try{l.resolve((P(b)?b:c)(d))}catch(e){l.reject(e),a(e)}},u=function(b){try{l.resolve((P(f)?f:d)(b))}catch(c){l.reject(c),a(c)}},A=function(b){try{l.notify((P(k)?k:c)(b))}catch(d){a(d)}};g?g.push([F,u,A]):h.then(F,u,A);return l.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):
d.reject(a);return d.promise}function d(e,f){var g=null;try{g=(a||c)()}catch(k){return b(k,!1)}return g&&P(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&P(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},g=function(a){var b=e();b.reject(a);return b.promise},k=function(c){return{then:function(f,g){var k=e();b(function(){try{k.resolve((P(g)?
g:d)(c))}catch(b){k.reject(b),a(b)}});return k.promise}}};return{defer:e,reject:g,when:function(k,h,l,n){var p=e(),q,s=function(b){try{return(P(h)?h:c)(b)}catch(d){return a(d),g(d)}},F=function(b){try{return(P(l)?l:d)(b)}catch(c){return a(c),g(c)}},u=function(b){try{return(P(n)?n:c)(b)}catch(d){a(d)}};b(function(){f(k).then(function(a){q||(q=!0,p.resolve(f(a).then(s,F,u)))},function(a){q||(q=!0,p.resolve(F(a)))},function(a){q||p.notify(u(a))})});return p.promise},all:function(a){var b=e(),c=0,d=J(a)?
[]:{};r(a,function(a,e){c++;f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function ge(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:
function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function Zd(){var b=10,a=C("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,g){function k(){this.$id=hb();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=
[];this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function m(b){if(p.$$phase)throw a("inprog",p.$$phase);p.$$phase=b}function h(a,b){var c=f(a);Wa(c,b);return c}function l(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function n(){}k.prototype={constructor:k,$new:function(a){a?(a=new k,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=
function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=hb();this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d){var e=h(a,"watch"),f=this.$$watchers,g={fn:b,last:n,get:e,exp:a,
eq:!!d};c=null;if(!P(b)){var k=h(b||E,"listener");g.fn=function(a,b,c){k(c)}}if("string"==typeof a&&e.constant){var l=g.fn;g.fn=function(a,b,c){l.call(this,a,b,c);Sa(f,g)}}f||(f=this.$$watchers=[]);f.unshift(g);return function(){Sa(f,g);c=null}},$watchCollection:function(a,b){var c=this,d,e,g,k=1<b.length,h=0,l=f(a),m=[],p={},n=!0,r=0;return this.$watch(function(){d=l(c);var a,b,f;if(T(d))if(Pa(d))for(e!==m&&(e=m,r=e.length=0,h++),a=d.length,r!==a&&(h++,e.length=r=a),b=0;b<a;b++)f=e[b]!==e[b]&&d[b]!==
d[b],f||e[b]===d[b]||(h++,e[b]=d[b]);else{e!==p&&(e=p={},r=0,h++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?(f=e[b]!==e[b]&&d[b]!==d[b],f||e[b]===d[b]||(h++,e[b]=d[b])):(r++,e[b]=d[b],h++));if(r>a)for(b in h++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(r--,delete e[b])}else e!==d&&(e=d,h++);return h},function(){n?(n=!1,b(d,d,c)):b(d,g,c);if(k)if(T(d))if(Pa(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)kb.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,
f,k,h,l=this.$$asyncQueue,r=this.$$postDigestQueue,R,z,t=b,L,O=[],w,B,I;m("$digest");g.$$checkUrlChange();c=null;do{z=!1;for(L=this;l.length;){try{I=l.shift(),I.scope.$eval(I.expression)}catch(H){p.$$phase=null,e(H)}c=null}a:do{if(h=L.$$watchers)for(R=h.length;R--;)try{if(d=h[R])if((f=d.get(L))!==(k=d.last)&&!(d.eq?Aa(f,k):"number"===typeof f&&"number"===typeof k&&isNaN(f)&&isNaN(k)))z=!0,c=d,d.last=d.eq?Ha(f,null):f,d.fn(f,k===n?f:k,L),5>t&&(w=4-t,O[w]||(O[w]=[]),B=P(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):
d.exp,B+="; newVal: "+na(f)+"; oldVal: "+na(k),O[w].push(B));else if(d===c){z=!1;break a}}catch(y){p.$$phase=null,e(y)}if(!(h=L.$$childHead||L!==this&&L.$$nextSibling))for(;L!==this&&!(h=L.$$nextSibling);)L=L.$parent}while(L=h);if((z||l.length)&&!t--)throw p.$$phase=null,a("infdig",b,na(O));}while(z||l.length);for(p.$$phase=null;r.length;)try{r.shift()()}catch(v){e(v)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==p&&(r(this.$$listenerCount,
Bb(null,l,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=E,this.$on=
this.$watch=function(){return E})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){p.$$phase||p.$$asyncQueue.length||g.defer(function(){p.$$asyncQueue.length&&p.$digest()});this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){e(b)}finally{p.$$phase=null;try{p.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=
c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Ra(c,b)]=null;l(e,1,a)}},$emit:function(a,b){var c=[],d,f=this,g=!1,k={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){k.defaultPrevented=!0},defaultPrevented:!1},h=[k].concat(Ba.call(arguments,1)),l,m;do{d=f.$$listeners[a]||c;k.currentScope=f;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,h)}catch(p){e(p)}else d.splice(l,
1),l--,m--;if(g)break;f=f.$parent}while(f);return k},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(Ba.call(arguments,1)),k,h;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];k=0;for(h=d.length;k<h;k++)if(d[k])try{d[k].apply(null,g)}catch(l){e(l)}else d.splice(k,1),k--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return f}};
var p=new k;return p}]}function cd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!Q||8<=Q)if(f=ua(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function Be(b){if("self"===b)return b;if(v(b)){if(-1<b.indexOf("***"))throw xa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(jb(b))return RegExp("^"+b.source+"$");throw xa("imatcher");}function Gc(b){var a=[];y(b)&&r(b,function(b){a.push(Be(b))});return a}function be(){this.SCE_CONTEXTS=ga;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Gc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Gc(b));return a};this.$get=["$injector",function(c){function d(a){var b=
function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw xa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),g={};g[ga.HTML]=d(f);g[ga.CSS]=d(f);g[ga.URL]=d(f);g[ga.JS]=d(f);g[ga.RESOURCE_URL]=d(g[ga.URL]);return{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw xa("icontext",
a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw xa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===t||""===d)return d;var f=g.hasOwnProperty(c)?g[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===ga.RESOURCE_URL){var f=ua(d.toString()),l,n,p=!1;l=0;for(n=b.length;l<n;l++)if("self"===b[l]?Pb(f):b[l].exec(f.href)){p=!0;break}if(p)for(l=0,n=a.length;l<n;l++)if("self"===a[l]?Pb(f):a[l].exec(f.href)){p=!1;break}if(p)return d;throw xa("insecurl",
d.toString());}if(c===ga.HTML)return e(d);throw xa("unsafe");},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}function ae(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw xa("iequirks");var e=ha(ga);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},
e.valueOf=Qa);e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:function(a,c){return e.getTrusted(b,d(a,c))}};var f=e.parseAs,g=e.getTrusted,k=e.trustAs;r(ga,function(a,b){var c=K(b);e[Za("parse_as_"+c)]=function(b){return f(a,b)};e[Za("get_trusted_"+c)]=function(b){return g(a,b)};e[Za("trust_as_"+c)]=function(b){return k(a,b)}});return e}]}function ce(){this.$get=["$window","$document",function(b,a){var c={},d=U((/android (\d+)/.exec(K((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||
{}).userAgent),f=a[0]||{},g=f.documentMode,k,m=/^(Moz|webkit|O|ms)(?=[A-Z])/,h=f.body&&f.body.style,l=!1,n=!1;if(h){for(var p in h)if(l=m.exec(p)){k=l[0];k=k.substr(0,1).toUpperCase()+k.substr(1);break}k||(k="WebkitOpacity"in h&&"webkit");l=!!("transition"in h||k+"Transition"in h);n=!!("animation"in h||k+"Animation"in h);!d||l&&n||(l=v(f.body.style.webkitTransition),n=v(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!g||7<
g),hasEvent:function(a){if("input"==a&&9==Q)return!1;if(x(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Xa(),vendorPrefix:k,transitions:l,animations:n,android:d,msie:Q,msieDocumentMode:g}}]}function ee(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(b,a,c,d){function e(e,k,m){var h=c.defer(),l=h.promise,n=y(m)&&!m;k=a.defer(function(){try{h.resolve(e())}catch(a){h.reject(a),d(a)}finally{delete f[l.$$timeoutId]}n||b.$apply()},k);l.$$timeoutId=k;f[k]=h;
return l}var f={};e.cancel=function(b){return b&&b.$$timeoutId in f?(f[b.$$timeoutId].reject("canceled"),delete f[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return e}]}function ua(b,a){var c=b;Q&&(Y.setAttribute("href",c),c=Y.href);Y.setAttribute("href",c);return{href:Y.href,protocol:Y.protocol?Y.protocol.replace(/:$/,""):"",host:Y.host,search:Y.search?Y.search.replace(/^\?/,""):"",hash:Y.hash?Y.hash.replace(/^#/,""):"",hostname:Y.hostname,port:Y.port,pathname:"/"===Y.pathname.charAt(0)?Y.pathname:
"/"+Y.pathname}}function Pb(b){b=v(b)?ua(b):b;return b.protocol===Hc.protocol&&b.host===Hc.host}function fe(){this.$get=ba(W)}function mc(b){function a(d,e){if(T(d)){var f={};r(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Ic);a("date",Jc);a("filter",Ce);a("json",De);a("limitTo",Ee);a("lowercase",Fe);a("number",Kc);a("orderBy",Lc);a("uppercase",Ge)}function Ce(){return function(b,
a,c){if(!J(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&(c="boolean"===d&&c?function(a,b){return Va.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&kb.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,
b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var g in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(g);break;case "function":e.push(a);break;default:return b}d=[];for(g=0;g<b.length;g++){var k=
b[g];e.check(k)&&d.push(k)}return d}}function Ic(b){var a=b.NUMBER_FORMATS;return function(b,d){x(d)&&(d=a.CURRENCY_SYM);return Mc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Kc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Mc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Mc(b,a,c,d,e){if(null==b||!isFinite(b)||T(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",k="",m=[],h=!1;if(-1!==g.indexOf("e")){var l=g.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&
l[3]>e+1?(g="0",b=0):(k=g,h=!0)}if(h)0<e&&(-1<b&&1>b)&&(k=b.toFixed(e));else{g=(g.split(Nc)[1]||"").length;x(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);0===b&&(f=!1);b=(""+b).split(Nc);g=b[0];b=b[1]||"";var l=0,n=a.lgSize,p=a.gSize;if(g.length>=n+p)for(l=g.length-n,h=0;h<l;h++)0===(l-h)%p&&0!==h&&(k+=c),k+=g.charAt(h);for(h=l;h<g.length;h++)0===(g.length-h)%n&&0!==h&&(k+=c),k+=g.charAt(h);for(;b.length<e;)b+="0";e&&"0"!==e&&(k+=d+b.substr(0,
e))}m.push(f?a.negPre:a.posPre);m.push(k);m.push(f?a.negSuf:a.posSuf);return m.join("")}function Xb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Xb(e,a,d)}}function vb(b,a){return function(c,d){var e=c["get"+b](),f=Ia(a?"SHORT"+b:b);return d[f][e]}}function Jc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,k=b[8]?
a.setUTCFullYear:a.setFullYear,m=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=U(b[9]+b[10]),g=U(b[9]+b[11]));k.call(a,U(b[1]),U(b[2])-1,U(b[3]));f=U(b[4]||0)-f;g=U(b[5]||0)-g;k=U(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));m.call(a,f,g,k,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e){var f="",g=[],k,m;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;v(c)&&(c=He.test(c)?U(c):a(c));ib(c)&&(c=new Date(c));
if(!ta(c))return c;for(;e;)(m=Ie.exec(e))?(g=g.concat(Ba.call(m,1)),e=g.pop()):(g.push(e),e=null);r(g,function(a){k=Je[a];f+=k?k(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function De(){return function(b){return na(b,!0)}}function Ee(){return function(b,a){if(!J(b)&&!v(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):U(a);if(v(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=
b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Lc(b){return function(a,c,d){function e(a,b){return Ua(b)?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?(ta(a)&&ta(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Pa(a)||!c)return a;c=J(c)?c:[c];c=Vc(c,function(a){var c=!1,d=a||Qa;if(v(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=
d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var g=[],k=0;k<a.length;k++)g.push(a[k]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function ya(b){P(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ba(b)}function Oc(b,a,c,d){function e(a,c){c=c?"-"+mb(c,"-"):"";d.setClass(b,(a?wb:xb)+c,(a?xb:wb)+c)}var f=this,g=b.parent().controller("form")||yb,k=0,m=f.$error={},h=[];f.$name=
a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;g.$addControl(f);b.addClass(Oa);e(!0);f.$addControl=function(a){Da(a.$name,"input");h.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];r(m,function(b,c){f.$setValidity(c,!0,a)});Sa(h,a)};f.$setValidity=function(a,b,c){var d=m[a];if(b)d&&(Sa(d,c),d.length||(k--,k||(e(b),f.$valid=!0,f.$invalid=!1),m[a]=!1,e(!0,a),g.$setValidity(a,!0,f)));else{k||e(b);if(d){if(-1!=Ra(d,c))return}else m[a]=
d=[],k++,e(!1,a),g.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Oa);d.addClass(b,zb);f.$dirty=!0;f.$pristine=!1;g.$setDirty()};f.$setPristine=function(){d.removeClass(b,zb);d.addClass(b,Oa);f.$dirty=!1;f.$pristine=!0;r(h,function(a){a.$setPristine()})}}function sa(b,a,c,d){b.$setValidity(a,c);return c?d:t}function Pc(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function Ke(b,a,c,d,e){T(e)&&(b.$$hasNativeValidators=!0,
b.$parsers.push(function(f){if(b.$error[a]||Pc(e,d)||!Pc(e,c))return f;b.$setValidity(a,!1)}))}function Ab(b,a,c,d,e,f){var g=a.prop(Le),k=a[0].placeholder,m={},h=K(a[0].type);d.$$validityState=g;if(!e.android){var l=!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;n()})}var n=function(e){if(!l){var f=a.val();if(Q&&"input"===(e||m).type&&a[0].placeholder!==k)k=a[0].placeholder;else if("password"!==h&&Ua(c.ngTrim||"T")&&(f=aa(f)),e=g&&d.$$hasNativeValidators,d.$viewValue!==
f||""===f&&e)b.$root.$$phase?d.$setViewValue(f):b.$apply(function(){d.$setViewValue(f)})}};if(e.hasEvent("input"))a.on("input",n);else{var p,q=function(){p||(p=f.defer(function(){n();p=null}))};a.on("keydown",function(a){a=a.keyCode;91===a||(15<a&&19>a||37<=a&&40>=a)||q()});if(e.hasEvent("paste"))a.on("paste cut",q)}a.on("change",n);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)};var s=c.ngPattern;s&&((e=s.match(/^\/(.*)\/([gim]*)$/))?(s=RegExp(e[1],e[2]),e=function(a){return sa(d,
"pattern",d.$isEmpty(a)||s.test(a),a)}):e=function(c){var e=b.$eval(s);if(!e||!e.test)throw C("ngPattern")("noregexp",s,e,ia(a));return sa(d,"pattern",d.$isEmpty(c)||e.test(c),c)},d.$formatters.push(e),d.$parsers.push(e));if(c.ngMinlength){var r=U(c.ngMinlength);e=function(a){return sa(d,"minlength",d.$isEmpty(a)||a.length>=r,a)};d.$parsers.push(e);d.$formatters.push(e)}if(c.ngMaxlength){var u=U(c.ngMaxlength);e=function(a){return sa(d,"maxlength",d.$isEmpty(a)||a.length<=u,a)};d.$parsers.push(e);
d.$formatters.push(e)}}function Yb(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],l=0;l<b.length;l++)if(e==b[l])continue a;c.push(e)}return c}function e(a){if(!J(a)){if(v(a))return a.split(" ");if(T(a)){var b=[];r(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,g,k){function m(a,b){var c=g.data("$classCounts")||{},d=[];r(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<
b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function h(b){if(!0===a||f.$index%2===a){var h=e(b||[]);if(!l){var q=m(h,1);k.$addClass(q)}else if(!Aa(b,l)){var s=e(l),q=d(h,s),h=d(s,h),h=m(h,-1),q=m(q,1);0===q.length?c.removeClass(g,h):0===h.length?c.addClass(g,q):c.setClass(g,q,h)}}l=ha(b)}var l;f.$watch(k[b],h,!0);k.$observe("class",function(a){h(f.$eval(k[b]))});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var h=e(f.$eval(k[b]));g===a?(g=m(h,1),k.$addClass(g)):
(g=m(h,-1),k.$removeClass(g))}})}}}]}var Le="validity",K=function(b){return v(b)?b.toLowerCase():b},kb=Object.prototype.hasOwnProperty,Ia=function(b){return v(b)?b.toUpperCase():b},Q,w,Ea,Ba=[].slice,Me=[].push,za=Object.prototype.toString,Ta=C("ng"),Va=W.angular||(W.angular={}),Ya,Ma,ma=["0","0","0"];Q=U((/msie (\d+)/.exec(K(navigator.userAgent))||[])[1]);isNaN(Q)&&(Q=U((/trident\/.*; rv:(\d+)/.exec(K(navigator.userAgent))||[])[1]));E.$inject=[];Qa.$inject=[];var J=function(){return P(Array.isArray)?
Array.isArray:function(b){return"[object Array]"===za.call(b)}}(),aa=function(){return String.prototype.trim?function(b){return v(b)?b.trim():b}:function(b){return v(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();Ma=9>Q?function(b){b=b.nodeName?b:b[0];return b.scopeName&&"HTML"!=b.scopeName?Ia(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var Xa=function(){if(y(Xa.isActive_))return Xa.isActive_;var b=!(!X.querySelector("[ng-csp]")&&!X.querySelector("[data-ng-csp]"));
if(!b)try{new Function("")}catch(a){b=!0}return Xa.isActive_=b},Yc=/[A-Z]/g,ad={full:"1.2.26",major:1,minor:2,dot:26,codeName:"captivating-disinterest"};S.expando="ng339";var ab=S.cache={},ne=1,sb=W.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},$a=W.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};S._data=function(b){return this.cache[b[this.expando]]||{}};var ie=/([\:\-\_]+(.))/g,
je=/^moz([A-Z])/,Hb=C("jqLite"),ke=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ib=/<|&#?\w+;/,le=/<([\w:]+)/,me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=
ea.td;var La=S.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===X.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),S(W).on("load",a))},toString:function(){var b=[];r(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?w(this[b]):w(this[this.length+b])},length:0,push:Me,sort:[].sort,splice:[].splice},qb={};r("multiple selected checked disabled readOnly required open".split(" "),function(b){qb[K(b)]=b});var rc={};r("input select option textarea button form details".split(" "),
function(b){rc[Ia(b)]=!0});r({data:Mb,removeData:Lb},function(b,a){S[a]=b});r({data:Mb,inheritedData:pb,scope:function(b){return w.data(b,"$scope")||pb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return w.data(b,"$isolateScope")||w.data(b,"$isolateScopeNoTemplate")},controller:oc,injector:function(b){return pb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Nb,css:function(b,a,c){a=Za(a);if(y(c))b.style[a]=c;else{var d;8>=Q&&(d=b.currentStyle&&b.currentStyle[a],
""===d&&(d="auto"));d=d||b.style[a];8>=Q&&(d=""===d?t:d);return d}},attr:function(b,a,c){var d=K(a);if(qb[d])if(y(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||E).specified?d:t;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(b,d){var e=a[b.nodeType];if(x(d))return e?b[e]:"";b[e]=d}var a=[];9>Q?(a[1]=
"innerText",a[3]="nodeValue"):a[1]=a[3]="textContent";b.$dv="";return b}(),val:function(b,a){if(x(a)){if("SELECT"===Ma(b)&&b.multiple){var c=[];r(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(x(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)Ja(d[c]);b.innerHTML=a},empty:pc},function(b,a){S.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==pc&&(2==b.length&&b!==Nb&&b!==oc?a:d)===t){if(T(a)){for(e=
0;e<g;e++)if(b===Mb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var k=b(this[f],a,d);e=e?e+k:k}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});r({removeData:Lb,dealoc:Ja,on:function a(c,d,e,f){if(y(f))throw Hb("onargs");var g=oa(c,"events"),k=oa(c,"handle");g||oa(c,"events",g={});k||oa(c,"handle",k=oe(c,g));r(d.split(" "),function(d){var f=g[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var l=X.body.contains||X.body.compareDocumentPosition?
function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||l(this,c))||k(a,d)})}else sb(c,d,k),g[d]=[];f=g[d]}f.push(e)})},off:nc,one:function(a,c,d){a=w(a);a.on(c,function f(){a.off(c,
d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;Ja(a);r(new S(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];r(a.childNodes,function(a){1===a.nodeType&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){r(new S(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;r(new S(c),function(c){a.insertBefore(c,
d)})}},wrap:function(a,c){c=w(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){Ja(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;r(new S(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},addClass:ob,removeClass:nb,toggleClass:function(a,c,d){c&&r(c.split(" "),function(c){var f=d;x(f)&&(f=!Nb(a,c));(f?ob:nb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;
for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Kb,triggerHandler:function(a,c,d){var e,f;e=c.type||c;var g=(oa(a,"events")||{})[e];g&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:E,type:e,target:a},c.type&&(e=D(e,c)),c=ha(g),f=d?[e].concat(d):[e],r(c,function(c){c.apply(a,f)}))}},function(a,c){S.prototype[c]=
function(c,e,f){for(var g,k=0;k<this.length;k++)x(g)?(g=a(this[k],c,e,f),y(g)&&(g=w(g))):Jb(g,a(this[k],c,e,f));return y(g)?g:this};S.prototype.bind=S.prototype.on;S.prototype.unbind=S.prototype.off});bb.prototype={put:function(a,c){this[Ka(a,this.nextUid)]=c},get:function(a){return this[Ka(a,this.nextUid)]},remove:function(a){var c=this[a=Ka(a,this.nextUid)];delete this[a];return c}};var qe=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,re=/,/,se=/^\s*(_?)(\S+?)\1\s*$/,pe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
cb=C("$injector"),Ne=C("$animate"),Md=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Ne("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,g,k){g?g.after(a):(c&&c[0]||(c=g.parent()),c.append(a));k&&
d(k)},leave:function(a,c){a.remove();c&&d(c)},move:function(a,c,d,k){this.enter(a,c,d,k)},addClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){ob(a,c)});g&&d(g)},removeClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){nb(a,c)});g&&d(g)},setClass:function(a,c,g,k){r(a,function(a){ob(a,c);nb(a,g)});k&&d(k)},enabled:E}}]}],ja=C("$compile");ic.$inject=["$provide","$$sanitizeUriProvider"];var we=/^(x[\:\-_]|data[\:\-_])/i,yc=C("$interpolate"),Oe=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
ze={http:80,https:443,ftp:21},Sb=C("$location");Ub.prototype=Tb.prototype=Bc.prototype={$$html5:!1,$$replace:!1,absUrl:tb("$$absUrl"),url:function(a){if(x(a))return this.$$url;a=Oe.exec(a);a[1]&&this.path(decodeURIComponent(a[1]));(a[2]||a[1])&&this.search(a[3]||"");this.hash(a[5]||"");return this},protocol:tb("$$protocol"),host:tb("$$host"),port:tb("$$port"),path:Cc("$$path",function(a){a=a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;
case 1:if(v(a)||ib(a))a=a.toString(),this.$$search=ec(a);else if(T(a))r(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Sb("isrcharg");break;default:x(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Cc("$$hash",function(a){return a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};var la=C("$parse"),Fc={},wa,Pe=Function.prototype.call,Qe=Function.prototype.apply,Qc=Function.prototype.bind,gb={"null":function(){return null},
"true":function(){return!0},"false":function(){return!1},undefined:E,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":E,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,
c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Re={n:"\n",f:"\f",r:"\r",
t:"\t",v:"\v","'":"'",'"':'"'},Wb=function(a){this.options=a};Wb.prototype={constructor:Wb,lex:function(a){this.text=a;this.index=0;this.ch=t;this.lastCh=":";for(this.tokens=[];this.index<this.text.length;){this.ch=this.text.charAt(this.index);if(this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),
this.index++;else if(this.isWhitespace(this.ch)){this.index++;continue}else{a=this.ch+this.peek();var c=a+this.peek(2),d=gb[this.ch],e=gb[a],f=gb[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},
was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+
this.text.substring(c,d)+"]":" "+d;throw la("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=
1;this.tokens.push({index:c,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,g,k;this.index<this.text.length;){k=this.text.charAt(this.index);if("."===k||this.isIdent(k)||this.isNumber(k))"."===k&&(e=this.index),c+=k;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){k=this.text.charAt(f);if("("===k){g=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(k))f++;else break}d={index:d,text:c};if(gb.hasOwnProperty(c))d.fn=
gb[c],d.literal=!0,d.constant=!0;else{var m=Ec(c,this.options,this.text);d.fn=D(function(a,c){return m(a,c)},{assign:function(d,e){return ub(d,c,e,a.text,a.options)}})}this.tokens.push(d);g&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:g}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||
this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Re[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,string:d,literal:!0,constant:!0,fn:function(){return d}});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var fb=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};fb.ZERO=D(function(){return 0},{constant:!0});fb.prototype={constructor:fb,parse:function(a){this.text=
a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);a.literal=!!c.literal;a.constant=!!c.constant}for(var d;c=
this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],g=f.text;if(g===a||g===c||g===d||g===
e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return D(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return D(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return D(function(e,f){return c(e,f,a,d)},{constant:a.constant&&
d.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var g=a[f];g&&(e=g(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];;)if(a=this.expect(":"))d.push(this.expression());
else{var e=function(a,e,k){k=[k];for(var m=0;m<d.length;m++)k.push(d[m](a,e));return c.apply(a,k)};return function(){return e}}},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.assignment();
if(d=this.expect(":"))return this.ternaryFn(a,c,this.assignment());this.throwError("expected :",d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},
relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(fb.ZERO,a.fn,
this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=Ec(d,this.options,this.text);return D(function(c,d,k){return e(k||a(c,d))},{assign:function(e,g,k){(k=a(e,k))||a.assign(e,k={});return ub(k,d,g,c.text,c.options)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return D(function(e,f){var g=a(e,f),k=d(e,f),m;ka(k,c.text);if(!g)return t;(g=va(g[k],c.text))&&(g.then&&c.options.unwrapPromises)&&
(m=g,"$$v"in g||(m.$$v=t,m.then(function(a){m.$$v=a})),g=g.$$v);return g},{assign:function(e,f,g){var k=ka(d(e,g),c.text);(g=va(a(e,g),c.text))||a.assign(e,g={});return g[k]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))}this.consume(")");var e=this;return function(f,g){for(var k=[],m=c?c(f,g):f,h=0;h<d.length;h++)k.push(va(d[h](f,g),e.text));h=a(f,g,m)||E;va(m,e.text);var l=e.text;if(h){if(h.constructor===h)throw la("isecfn",
l);if(h===Pe||h===Qe||Qc&&h===Qc)throw la("isecff",l);}k=h.apply?h.apply(m,k):h(k[0],k[1],k[2],k[3],k[4]);return va(k,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");return D(function(c,d){for(var g=[],k=0;k<a.length;k++)g.push(a[k](c,d));return g},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return D(function(c,d){for(var e={},m=0;m<a.length;m++){var h=a[m];e[h.key]=h.value(c,d)}return e},{literal:!0,constant:c})}};var Vb={},xa=C("$sce"),ga={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Y=X.createElement("a"),Hc=ua(W.location.href,!0);mc.$inject=["$provide"];Ic.$inject=["$locale"];Kc.$inject=["$locale"];
var Nc=".",Je={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:vb("Month"),MMM:vb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:vb("Day"),EEE:vb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Xb(Math[0<
a?"floor":"ceil"](a/60),2)+Xb(Math.abs(a%60),2))}},Ie=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,He=/^\-?\d+$/;Jc.$inject=["$locale"];var Fe=ba(K),Ge=ba(Ia);Lc.$inject=["$parse"];var dd=ba({restrict:"E",compile:function(a,c){8>=Q&&(c.href||c.name||c.$set("href",""),a.append(X.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===za.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||
a.preventDefault()})}}}),Fb={};r(qb,function(a,c){if("multiple"!=a){var d=pa("ng-"+c);Fb[d]=function(){return{priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a)})}}}}});r(["src","srcset","href"],function(a){var c=pa("ng-"+a);Fb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===za.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$observe(c,function(c){c?(f.$set(k,c),Q&&g&&e.prop(g,f[k])):"href"===
a&&f.$set(k,null)})}}}});var yb={$addControl:E,$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E};Oc.$inject=["$element","$attrs","$scope","$animate"];var Rc=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Oc,compile:function(){return{pre:function(a,e,f,g){if(!f.action){var k=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};sb(e[0],"submit",k);e.on("$destroy",function(){c(function(){$a(e[0],"submit",k)},0,!1)})}var m=e.parent().controller("form"),
h=f.name||f.ngForm;h&&ub(a,h,g,h);if(m)e.on("$destroy",function(){m.$removeControl(g);h&&ub(a,h,t,h);D(g,yb)})}}}}}]},ed=Rc(),rd=Rc(!0),Se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Te=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ue=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Sc={text:Ab,number:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||Ue.test(a))return e.$setValidity("number",
!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return t});Ke(e,"number",Ve,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return sa(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return sa(e,"max",e.$isEmpty(a)||a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return sa(e,"number",e.$isEmpty(a)||
ib(a),a)})},url:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"url",e.$isEmpty(a)||Se.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},email:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"email",e.$isEmpty(a)||Te.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},radio:function(a,c,d,e){x(d.name)&&c.attr("name",hb());c.on("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};
d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var f=d.ngTrueValue,g=d.ngFalseValue;v(f)||(f=!0);v(g)||(g=!1);c.on("click",function(){a.$apply(function(){e.$setViewValue(c[0].checked)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==f};e.$formatters.push(function(a){return a===f});e.$parsers.push(function(a){return a?f:g})},hidden:E,button:E,submit:E,reset:E,file:E},Ve=["badInput"],jc=["$browser","$sniffer",function(a,c){return{restrict:"E",require:"?ngModel",
link:function(d,e,f,g){g&&(Sc[K(f.type)]||Sc.text)(d,e,f,g,c,a)}}}],wb="ng-valid",xb="ng-invalid",Oa="ng-pristine",zb="ng-dirty",We=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,c,d,e,f,g){function k(a,c){c=c?"-"+mb(c,"-"):"";g.removeClass(e,(a?xb:wb)+c);g.addClass(e,(a?wb:xb)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=
d.name;var m=f(d.ngModel),h=m.assign;if(!h)throw C("ngModel")("nonassign",d.ngModel,ia(e));this.$render=E;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||yb,n=0,p=this.$error={};e.addClass(Oa);k(!0);this.$setValidity=function(a,c){p[a]!==!c&&(c?(p[a]&&n--,n||(k(!0),this.$valid=!0,this.$invalid=!1)):(k(!1),this.$invalid=!0,this.$valid=!1,n++),p[a]=!c,k(c,a),l.$setValidity(a,c,this))};this.$setPristine=function(){this.$dirty=!1;this.$pristine=
!0;g.removeClass(e,zb);g.addClass(e,Oa)};this.$setViewValue=function(d){this.$viewValue=d;this.$pristine&&(this.$dirty=!0,this.$pristine=!1,g.removeClass(e,Oa),g.addClass(e,zb),l.$setDirty());r(this.$parsers,function(a){d=a(d)});this.$modelValue!==d&&(this.$modelValue=d,h(a,d),r(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}}))};var q=this;a.$watch(function(){var c=m(a);if(q.$modelValue!==c){var d=q.$formatters,e=d.length;for(q.$modelValue=c;e--;)c=d[e](c);q.$viewValue!==c&&(q.$viewValue=
c,q.$render())}return c})}],Gd=function(){return{require:["ngModel","^?form"],controller:We,link:function(a,c,d,e){var f=e[0],g=e[1]||yb;g.$addControl(f);a.$on("$destroy",function(){g.$removeControl(f)})}}},Id=ba({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){d.required=!0;var f=function(a){if(d.required&&e.$isEmpty(a))e.$setValidity("required",!1);else return e.$setValidity("required",
!0),a};e.$formatters.push(f);e.$parsers.unshift(f);d.$observe("required",function(){f(e.$viewValue)})}}}},Hd=function(){return{require:"ngModel",link:function(a,c,d,e){var f=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){if(!x(a)){var c=[];a&&r(a.split(f),function(a){a&&c.push(aa(a))});return c}});e.$formatters.push(function(a){return J(a)?a.join(", "):t});e.$isEmpty=function(a){return!a||!a.length}}}},Xe=/^(true|false|\d+)$/,Jd=function(){return{priority:100,
compile:function(a,c){return Xe.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},jd=ya({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==t?"":a)})}}}),ld=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],
kd=["$sce","$parse",function(a,c){return{compile:function(d){d.addClass("ng-binding");return function(d,f,g){f.data("$binding",g.ngBindHtml);var k=c(g.ngBindHtml);d.$watch(function(){return(k(d)||"").toString()},function(c){f.html(a.getTrustedHtml(k(d))||"")})}}}}],md=Yb("",!0),od=Yb("Odd",0),nd=Yb("Even",1),pd=ya({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak")}}),qd=[function(){return{scope:!0,controller:"@",priority:500}}],lc={},Ye={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var c=pa("ng-"+a);lc[c]=["$parse","$rootScope",function(d,e){return{compile:function(f,g){var k=d(g[c]);return function(c,d){d.on(a,function(d){var f=function(){k(c,{$event:d})};Ye[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var td=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var k,m,h;c.$watch(e.ngIf,function(f){Ua(f)?m||(m=c.$new(),g(m,function(c){c[c.length++]=X.createComment(" end ngIf: "+e.ngIf+
" ");k={clone:c};a.enter(c,d.parent(),d)})):(h&&(h.remove(),h=null),m&&(m.$destroy(),m=null),k&&(h=Eb(k.clone),a.leave(h,function(){h=null}),k=null))})}}}],ud=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Va.noop,compile:function(g,k){var m=k.ngInclude||k.src,h=k.onload||"",l=k.autoscroll;return function(g,k,q,r,F){var u=0,t,w,R,z=function(){w&&(w.remove(),w=null);t&&(t.$destroy(),t=null);
R&&(e.leave(R,function(){w=null}),w=R,R=null)};g.$watch(f.parseAsResourceUrl(m),function(f){var m=function(){!y(l)||l&&!g.$eval(l)||d()},q=++u;f?(a.get(f,{cache:c}).success(function(a){if(q===u){var c=g.$new();r.template=a;a=F(c,function(a){z();e.enter(a,null,k,m)});t=c;R=a;t.$emit("$includeContentLoaded");g.$eval(h)}}).error(function(){q===u&&z()}),g.$emit("$includeContentRequested")):(z(),r.template=null)})}}}}],Kd=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",
link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],vd=ya({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),wd=ya({terminal:!0,priority:1E3}),xd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,g){var k=g.count,m=g.$attr.when&&f.attr(g.$attr.when),h=g.offset||0,l=e.$eval(m)||{},n={},p=c.startSymbol(),q=c.endSymbol(),s=/^when(Minus)?(.+)$/;r(g,function(a,c){s.test(c)&&(l[K(c.replace("when","").replace("Minus","-"))]=
f.attr(g.$attr[c]))});r(l,function(a,e){n[e]=c(a.replace(d,p+k+"-"+h+q))});e.$watch(function(){var c=parseFloat(e.$eval(k));if(isNaN(c))return"";c in l||(c=a.pluralCat(c-h));return n[c](e,f,!0)},function(a){f.text(a)})}}}],yd=["$parse","$animate",function(a,c){var d=C("ngRepeat");return{transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,f,g,k,m){var h=g.ngRepeat,l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),n,p,q,s,t,u,A={$id:Ka};if(!l)throw d("iexp",
h);g=l[1];k=l[2];(l=l[3])?(n=a(l),p=function(a,c,d){u&&(A[u]=a);A[t]=c;A.$index=d;return n(e,A)}):(q=function(a,c){return Ka(c)},s=function(a){return a});l=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!l)throw d("iidexp",g);t=l[3]||l[1];u=l[2];var y={};e.$watchCollection(k,function(a){var g,k,l=f[0],n,A={},B,I,H,v,E,C,x,J=[];if(Pa(a))C=a,E=p||q;else{E=p||s;C=[];for(H in a)a.hasOwnProperty(H)&&"$"!=H.charAt(0)&&C.push(H);C.sort()}B=C.length;k=J.length=C.length;for(g=0;g<k;g++)if(H=a===
C?g:C[g],v=a[H],n=E(H,v,g),Da(n,"`track by` id"),y.hasOwnProperty(n))x=y[n],delete y[n],A[n]=x,J[g]=x;else{if(A.hasOwnProperty(n))throw r(J,function(a){a&&a.scope&&(y[a.id]=a)}),d("dupes",h,n,na(v));J[g]={id:n};A[n]=!1}for(H in y)y.hasOwnProperty(H)&&(x=y[H],g=Eb(x.clone),c.leave(g),r(g,function(a){a.$$NG_REMOVED=!0}),x.scope.$destroy());g=0;for(k=C.length;g<k;g++){H=a===C?g:C[g];v=a[H];x=J[g];J[g-1]&&(l=J[g-1].clone[J[g-1].clone.length-1]);if(x.scope){I=x.scope;n=l;do n=n.nextSibling;while(n&&n.$$NG_REMOVED);
x.clone[0]!=n&&c.move(Eb(x.clone),null,w(l));l=x.clone[x.clone.length-1]}else I=e.$new();I[t]=v;u&&(I[u]=H);I.$index=g;I.$first=0===g;I.$last=g===B-1;I.$middle=!(I.$first||I.$last);I.$odd=!(I.$even=0===(g&1));x.scope||m(I,function(a){a[a.length++]=X.createComment(" end ngRepeat: "+h+" ");c.enter(a,null,w(l));l=a;x.scope=I;x.clone=a;A[x.id]=x})}y=A})}}}],zd=["$animate",function(a){return function(c,d,e){c.$watch(e.ngShow,function(c){a[Ua(c)?"removeClass":"addClass"](d,"ng-hide")})}}],sd=["$animate",
function(a){return function(c,d,e){c.$watch(e.ngHide,function(c){a[Ua(c)?"addClass":"removeClass"](d,"ng-hide")})}}],Ad=ya(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Bd=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],k=[],m=[],h=[];c.$watch(e.ngSwitch||e.on,function(d){var n,p;n=0;for(p=m.length;n<p;++n)m[n].remove();n=m.length=0;for(p=
h.length;n<p;++n){var q=k[n];h[n].$destroy();m[n]=q;a.leave(q,function(){m.splice(n,1)})}k.length=0;h.length=0;if(g=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),r(g,function(d){var e=c.$new();h.push(e);d.transclude(e,function(c){var e=d.element;k.push(c);a.enter(c,e.parent(),e)})})})}}}],Cd=ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),Dd=
ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Fd=ya({link:function(a,c,d,e,f){if(!f)throw C("ngTransclude")("orphan",ia(c));f(function(a){c.empty();c.append(a)})}}),fd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Ze=C("ngOptions"),Ed=ba({terminal:!0}),gd=["$compile","$parse",function(a,c){var d=
/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:E};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var m=this,h={},l=e,n;m.databound=d.ngModel;m.init=function(a,c,d){l=a;n=d};m.addOption=function(c){Da(c,'"option value"');h[c]=!0;l.$viewValue==c&&(a.val(c),n.parent()&&n.remove())};
m.removeOption=function(a){this.hasOption(a)&&(delete h[a],l.$viewValue==a&&this.renderUnknownOption(a))};m.renderUnknownOption=function(c){c="? "+Ka(c)+" ?";n.val(c);a.prepend(n);a.val(c);n.prop("selected",!0)};m.hasOption=function(a){return h.hasOwnProperty(a)};c.$on("$destroy",function(){m.renderUnknownOption=E})}],link:function(e,g,k,m){function h(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(v.parent()&&v.remove(),c.val(a),""===a&&u.prop("selected",!0)):x(a)&&u?c.val(""):e.renderUnknownOption(a)};
c.on("change",function(){a.$apply(function(){v.parent()&&v.remove();d.$setViewValue(c.val())})})}function l(a,c,d){var e;d.$render=function(){var a=new bb(d.$viewValue);r(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){Aa(e,d.$viewValue)||(e=ha(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];r(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function n(e,f,g){function k(){var a={"":[]},c=[""],d,h,
s,t,v;s=g.$modelValue;t=w(e)||[];var E=n?Zb(t):t,I,M,B;M={};B=!1;if(q)if(h=g.$modelValue,x&&J(h))for(B=new bb([]),d={},v=0;v<h.length;v++)d[m]=h[v],B.put(x(e,d),h[v]);else B=new bb(h);v=B;var D,K;for(B=0;I=E.length,B<I;B++){h=B;if(n){h=E[B];if("$"===h.charAt(0))continue;M[n]=h}M[m]=t[h];d=r(e,M)||"";(h=a[d])||(h=a[d]=[],c.push(d));q?d=y(v.remove(x?x(e,M):u(e,M))):(x?(d={},d[m]=s,d=x(e,d)===x(e,M)):d=s===u(e,M),v=v||d);D=l(e,M);D=y(D)?D:"";h.push({id:x?x(e,M):n?E[B]:B,label:D,selected:d})}q||(F||null===
s?a[""].unshift({id:"",label:"",selected:!v}):v||a[""].unshift({id:"?",label:"",selected:!0}));M=0;for(E=c.length;M<E;M++){d=c[M];h=a[d];z.length<=M?(s={element:C.clone().attr("label",d),label:h.label},t=[s],z.push(t),f.append(s.element)):(t=z[M],s=t[0],s.label!=d&&s.element.attr("label",s.label=d));D=null;B=0;for(I=h.length;B<I;B++)d=h[B],(v=t[B+1])?(D=v.element,v.label!==d.label&&D.text(v.label=d.label),v.id!==d.id&&D.val(v.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",v.selected=d.selected),
Q&&D.prop("selected",v.selected))):(""===d.id&&F?K=F:(K=A.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),t.push({element:K,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,K),D?D.after(K):s.element.append(K),D=K);for(B++;t.length>B;)d=t.pop(),p.removeOption(d.label),d.element.remove()}for(;z.length>M;)z.pop()[0].element.remove()}var h;if(!(h=s.match(d)))throw Ze("iexp",s,ia(f));var l=c(h[2]||h[1]),m=h[4]||h[6],n=h[5],r=c(h[3]||""),u=c(h[2]?
h[1]:m),w=c(h[7]),x=h[8]?c(h[8]):null,z=[[{element:f,label:""}]];F&&(a(F)(e),F.removeClass("ng-scope"),F.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=w(e)||[],d={},h,l,p,r,s,v,y;if(q)for(l=[],r=0,v=z.length;r<v;r++)for(a=z[r],p=1,s=a.length;p<s;p++){if((h=a[p].element)[0].selected){h=h.val();n&&(d[n]=h);if(x)for(y=0;y<c.length&&(d[m]=c[y],x(e,d)!=h);y++);else d[m]=c[h];l.push(u(e,d))}}else if(h=f.val(),"?"==h)l=t;else if(""===h)l=null;else if(x)for(y=0;y<c.length;y++){if(d[m]=
c[y],x(e,d)==h){l=u(e,d);break}}else d[m]=c[h],n&&(d[n]=h),l=u(e,d);g.$setViewValue(l);k()})});g.$render=k;e.$watchCollection(w,k);e.$watchCollection(function(){var a={},c=w(e);if(c){for(var d=Array(c.length),f=0,g=c.length;f<g;f++)a[m]=c[f],d[f]=l(e,a);return d}},k);q&&e.$watchCollection(function(){return g.$modelValue},k)}if(m[1]){var p=m[0];m=m[1];var q=k.multiple,s=k.ngOptions,F=!1,u,A=w(X.createElement("option")),C=w(X.createElement("optgroup")),v=A.clone();k=0;for(var z=g.children(),E=z.length;k<
E;k++)if(""===z[k].value){u=F=z.eq(k);break}p.init(m,F,v);q&&(m.$isEmpty=function(a){return!a||0===a.length});s?n(e,g,m):q?l(e,g,m):h(e,g,m,p)}}}}],id=["$interpolate",function(a){var c={addOption:E,removeOption:E};return{restrict:"E",priority:100,compile:function(d,e){if(x(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var h=d.parent(),l=h.data("$selectController")||h.parent().data("$selectController");l&&l.databound?d.prop("selected",!1):l=c;f?a.$watch(f,function(a,
c){e.$set("value",a);a!==c&&l.removeOption(c);l.addOption(a)}):l.addOption(e.value);d.on("$destroy",function(){l.removeOption(e.value)})}}}}],hd=ba({restrict:"E",terminal:!0});W.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((Ea=W.jQuery)&&Ea.fn.on?(w=Ea,D(Ea.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),Gb("remove",!0,!0,!1),Gb("empty",!1,!1,!1),Gb("html",!1,!1,!0)):w=S,Va.element=w,
$c(Va),w(X).ready(function(){Xc(X,fc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
//# sourceMappingURL=angular.min.js.map

; browserify_shim__define__module__export__(typeof angular != "undefined" ? angular : window.angular);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"/home/codio/workspace/bower_components/famous-angular/dist/famous-angular.min.js":[function(require,module,exports){
(function (global){

; require("famous-polyfills");
require("/home/codio/workspace/bower_components/famous/dist/famous-global.min.js");
require("/home/codio/workspace/bower_components/angular/angular.min.js");
require("/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js");
require("/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js");
require("/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js");
;__browserify_shim_require__=require;(function browserifyShim(module, define, require) {
/**
 * famous-angular - Bring structure to your Famo.us apps with the power of AngularJS. Famo.us/Angular integrates seamlessly with existing Angular and Famo.us apps.
 * @version v0.5.0
 * @link https://github.com/Famous/famous-angular
 * @license MPL v2.0
 */
"use strict";var ngFameApp=angular.module("famous.angular",[]);ngFameApp.provider("$famous",function(){var e={"famous/core/Context":famous.core.Context,"famous/core/ElementAllocator":famous.core.ElementAllocator,"famous/core/Engine":famous.core.Engine,"famous/core/Entity":famous.core.Entity,"famous/core/EventEmitter":famous.core.EventEmitter,"famous/core/EventHandler":famous.core.EventHandler,"famous/core/Group":famous.core.Group,"famous/core/Modifier":famous.core.Modifier,"famous/core/OptionsManager":famous.core.OptionsManager,"famous/core/RenderNode":famous.core.RenderNode,"famous/core/Scene":famous.core.Scene,"famous/core/SpecParser":famous.core.SpecParser,"famous/core/Surface":famous.core.Surface,"famous/core/Transform":famous.core.Transform,"famous/core/View":famous.core.View,"famous/core/ViewSequence":famous.core.ViewSequence,"famous/events/EventArbiter":famous.events.EventArbiter,"famous/events/EventFilter":famous.events.EventFilter,"famous/events/EventMapper":famous.events.EventMapper,"famous/inputs/FastClick":famous.inputs.FastClick,"famous/inputs/GenericSync":famous.inputs.GenericSync,"famous/inputs/MouseSync":famous.inputs.MouseSync,"famous/inputs/PinchSync":famous.inputs.PinchSync,"famous/inputs/RotateSync":famous.inputs.RotateSync,"famous/inputs/ScaleSync":famous.inputs.ScaleSync,"famous/inputs/ScrollSync":famous.inputs.ScrollSync,"famous/inputs/TouchSync":famous.inputs.TouchSync,"famous/inputs/TouchTracker":famous.inputs.TouchTracker,"famous/inputs/TwoFingerSync":famous.inputs.TwoFingerSync,"famous/math/Matrix":famous.math.Matrix,"famous/math/Quaternion":famous.math.Quaternion,"famous/math/Random":famous.math.Random,"famous/math/Utilities":famous.math.Utilities,"famous/math/Vector":famous.math.Vector,"famous/modifiers/Draggable":famous.modifiers.Draggable,"famous/modifiers/Fader":famous.modifiers.Fader,"famous/modifiers/ModifierChain":famous.modifiers.ModifierChain,"famous/modifiers/StateModifier":famous.modifiers.StateModifier,"famous/surfaces/CanvasSurface":famous.surfaces.CanvasSurface,"famous/surfaces/ContainerSurface":famous.surfaces.ContainerSurface,"famous/surfaces/FormContainerSurface":famous.surfaces.FormContainerSurface,"famous/surfaces/ImageSurface":famous.surfaces.ImageSurface,"famous/surfaces/InputSurface":famous.surfaces.InputSurface,"famous/surfaces/SubmitInputSurface":famous.surfaces.SubmitInputSurface,"famous/surfaces/TextareaSurface":famous.surfaces.TextareaSurface,"famous/surfaces/VideoSurface":famous.surfaces.VideoSurface,"famous/transitions/CachedMap":famous.transitions.CachedMap,"famous/transitions/Easing":famous.transitions.Easing,"famous/transitions/MultipleTransition":famous.transitions.MultipleTransition,"famous/transitions/SnapTransition":famous.transitions.SnapTransition,"famous/transitions/SpringTransition":famous.transitions.SpringTransition,"famous/transitions/Transitionable":famous.transitions.Transitionable,"famous/transitions/TransitionableTransform":famous.transitions.TransitionableTransform,"famous/transitions/TweenTransition":famous.transitions.TweenTransition,"famous/transitions/WallTransition":famous.transitions.WallTransition,"famous/utilities/KeyCodes":famous.utilities.KeyCodes,"famous/utilities/Timer":famous.utilities.Timer,"famous/utilities/Utility":famous.utilities.Utility,"famous/views/Deck":famous.views.Deck,"famous/views/EdgeSwapper":famous.views.EdgeSwapper,"famous/views/FlexibleLayout":famous.views.FlexibleLayout,"famous/views/Flipper":famous.views.Flipper,"famous/views/GridLayout":famous.views.GridLayout,"famous/views/HeaderFooterLayout":famous.views.HeaderFooterLayout,"famous/views/Lightbox":famous.views.Lightbox,"famous/views/RenderController":famous.views.RenderController,"famous/views/ScrollContainer":famous.views.ScrollContainer,"famous/views/Scroller":famous.views.Scroller,"famous/views/Scrollview":famous.views.Scrollview,"famous/views/SequentialLayout":famous.views.SequentialLayout,"famous/widgets/NavigationBar":famous.widgets.NavigationBar,"famous/widgets/Slider":famous.widgets.Slider,"famous/widgets/TabBar":famous.widgets.TabBar,"famous/widgets/ToggleButton":famous.widgets.ToggleButton,"famous/physics/PhysicsEngine":famous.physics.PhysicsEngine,"famous/physics/bodies/Body":famous.physics.bodies.Body,"famous/physics/bodies/Circle":famous.physics.bodies.Circle,"famous/physics/bodies/Particle":famous.physics.bodies.Particle,"famous/physics/bodies/Rectangle":famous.physics.bodies.Rectangle,"famous/physics/constraints/Collision":famous.physics.constraints.Collision,"famous/physics/constraints/Constraint":famous.physics.constraints.Constraint,"famous/physics/constraints/Curve":famous.physics.constraints.Curve,"famous/physics/constraints/Distance":famous.physics.constraints.Distance,"famous/physics/constraints/Snap":famous.physics.constraints.Snap,"famous/physics/constraints/Surface":famous.physics.constraints.Surface,"famous/physics/constraints/Wall":famous.physics.constraints.Wall,"famous/physics/constraints/Walls":famous.physics.constraints.Walls,"famous/physics/forces/Drag":famous.physics.forces.Drag,"famous/physics/forces/Force":famous.physics.forces.Force,"famous/physics/forces/Repulsion":famous.physics.forces.Repulsion,"famous/physics/forces/RotationalDrag":famous.physics.forces.RotationalDrag,"famous/physics/forces/RotationalSpring":famous.physics.forces.RotationalSpring,"famous/physics/forces/Spring":famous.physics.forces.Spring,"famous/physics/forces/VectorField":famous.physics.forces.VectorField,"famous/physics/integrators/SymplecticEuler":famous.physics.integrators.SymplecticEuler};this.registerModule=function(n,r){e[n]=r},e.getIsolate=function(e){return e&&"isolate"in e?e.isolate[e.$id]:{}},e.find=function(n){var r=angular.element(window.document.querySelectorAll(n)),a=function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=angular.element(e).scope()}),n}(r),o=function(n){var r=[];return angular.forEach(n,function(n,a){r[a]=e.getIsolate(n)}),r}(a);return o};var n=/([\:\-\_]+(.))/g,r=/^moz([A-Z])/,a=/^(x[\:\-_]|data[\:\-_])/i,o=/^FA\-.*SURFACE/,t=/^FA\-.*/;window.$famousUtil=e.util={isASurface:function(e){return o.test(e[0].tagName)},isFaElement:function(e){if(t.test(e[0].tagName))return!0;var n=!1;return angular.forEach(e[0].attributes,function(e){n=n||t.test(e)}),n},camelCase:function(e){return e.replace(n,function(e,n,r,a){return a?r.toUpperCase():r}).replace(r,"Moz$1")},directiveNormalize:function(n){return e.util.camelCase(n.replace(a,""))}},this.$get=function(){return e}}),angular.module("famous.angular").config(["$provide",function(e){e.decorator("$animate",["$delegate","$rootScope","$famous","$parse","$famousDecorator",function(e,n,r,a,o){var t=r["famous/utilities/Timer"],i="$$faAnimationActive",s={},u=function(e){var n=r.getIsolate(e);return!n&&e&&(n=o.$$getIsolateById(s[e.$id])),n},c={enabled:e.enabled};return angular.forEach(["addClass","removeClass"],function(n){var a=angular.element.prototype[n];angular.element.prototype[n]=function(e){return a.apply(this,arguments),r.util.isASurface(this)&&"string"==typeof e&&""!==e.trim()&&u(this.scope()).renderNode[n](e),this},c[n]=function(a,o,t){if(e[n](a,o,t),r.util.isFaElement(a)){var i=u(a.scope());if(r.util.isASurface(a)){var s=i.renderNode;angular.forEach(o.split(" "),function(e){"ng-hide"===e?"addClass"===n?i.hide():"removeClass"===n&&i.show():s[n](e)})}else angular.forEach(o.split(" "),function(e){"ng-hide"===e&&("addClass"===n?i.hide():"removeClass"===n&&i.show())})}}}),c.setClass=function(n,a,o,t){if(e.setClass(n,a,o,t),r.util.isASurface(n)){var i=u(n.scope()).renderNode;angular.forEach(a.split(" "),function(e){i.addClass(e)}),angular.forEach(o.split(" "),function(e){i.removeClass(e)})}},angular.forEach(["enter","leave","move"],function(a){var o=a[0].toUpperCase()+a.slice(1);c[a]=function(c){var f=this,l=arguments,d="enter"===a,m=c.scope();m&&m.$parent&&(s[m.$id]=m.$parent.$id);var p=u(m);d===!0&&e[a].apply(this,arguments),c.data(i)===!0&&p&&p.$$animateHaltHandler&&p.$$animateHaltHandler(c.scope()),c.data(i,!0);var v=function(){m&&m.$id;if("leave"===a&&r.util.isFaElement(c)){var n=u(m);n&&n.id&&n.hide()}c.data(i)!==!1&&(c.data(i,!1),d===!1&&e[a].apply(f,l))};n.$$postDigest(function(){var e,n=c.scope(),r=u(n);if(r&&(e=r["$$animate"+o+"Handler"]),void 0===e)return void v();var a=e(n,{$done:v});"number"==typeof a&&t.setTimeout(v,a)})}}),c}])}]),angular.module("famous.angular").factory("$famousDecorator",["$famous",function(e){var n={child:{},parent:{},renderable:function(n){var r=e["famous/core/RenderNode"];n.renderGate=new r,n.emptyNode=new r,n.show=function(){n.renderGate&&n.renderGate.set(n.renderNode)},n.hide=function(){n.renderGate.set(n.emptyNode)}}},r={};return{addRole:function(e,r){n[e](r)},ensureIsolate:function(e,n){if(n){var a=["fa-edge-swapper","fa-render-controller","fa-deck","fa-light-box"],o=!1;angular.forEach(a,function(e){return e.toUpperCase()===n[0].tagName?void(o=!0):void 0!==n[0].attributes[e]?void(o=!0):void 0}),o&&(e=e.$parent)}e.isolate=e.isolate||{},e.isolate[e.$id]=e.isolate[e.$id]||{};var t=e.isolate[e.$id];t.id=e.$id;var i=e.$eval("$index");return i&&"$index"!==i&&!t.index&&(t.index=i),r[t.id]=t,t},$$getIsolateById:function(e){return r[e]},registerChild:function(e,n,r,a){e.$emit("registerChild",r),n.one("$destroy",function(){"removeMethod"in r&&r.removeMethod(r.id),r&&r.hide&&r.hide(),a&&a()})},sequenceWith:function(n,r,a,o){n.$on("registerChild",function(t,i){if(t.targetScope.$id!==n.$id){var s=e.getIsolate(n);i.$parent=s,s.$children=s.$children||[],s.$children.push(i),r(i),t.stopPropagation(),a&&(i.removeMethod=a),o&&(i.updateMethod=o)}})}}}]),angular.module("famous.angular").service("$famousPipe",function(){function e(e,n,r){e instanceof Array||(e=[e]),n instanceof Array||(n=[n]);for(var a=0;a<e.length;a++)for(var o=0;o<n.length;o++)void 0!==n[o]&&void 0!==e[a]&&n[o][r](e[a])}this.unpipesFromTargets=function(n,r){e(n,r,"unpipe")},this.pipesToTargets=function(n,r){e(n,r,"pipe")}}),angular.module("famous.angular").factory("$timeline",function(){var e=function(e,n){return"number"==typeof e?e+n:e.map(function(e,r){return e+n[r]})},n=function(e,n){return"number"==typeof e?e-n:e.map(function(e,r){return e-n[r]})},r=function(e,n){return"number"==typeof e?e*n:e.map(function(e){return e*n})},a=function(a,o,t,i,s){return function(u){var c=i,f=-o,l=1/(t-o),d=n(s,i);return e(r(d,a(l*(u+f))),c)}};return function(e){var n=function(e){return e};return function(r){if(r<e[0][0])return e[0][1];for(var o=0;o<e.length-1;o++)if(e[o][0]<=r&&r<e[o+1][0]){var t=a(e[o][2]||n,e[o][0],e[o+1][0],e[o][1],e[o+1][1]);return t(r)}return e[e.length-1][1]}}}),angular.module("famous.angular").directive("faAnimateEnter",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);t.$$animateEnterHandler=e(o.faAnimateEnter),o.$observe("faAnimateEnter",function(){t.$$animateEnterHandler=e(o.faAnimateEnter)})}}}}}]),angular.module("famous.angular").directive("faAnimateHalt",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);t.$$animateHaltHandler=e(o.faAnimateHalt),o.$observe("faAnimateHalt",function(){t.$$animateHaltHandler=e(o.faAnimateHalt)})}}}}}]),angular.module("famous.angular").directive("faAnimateLeave",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);t.$$animateLeaveHandler=e(o.faAnimateLeave),o.$observe("faAnimateLeave",function(){t.$$animateLeaveHandler=e(o.faAnimateLeave)})}}}}}]),angular.module("famous.angular").directive("faAnimateMove",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);t.$$animateMoveHandler=e(o.faAnimateMove),o.$observe("faAnimateMove",function(){t.$$animateMoveHandler=e(o.faAnimateMove)})}}}}}]),angular.module("famous.angular").directive("faAnimation",["$famous","$famousDecorator",function(e,n){return{restrict:"EA",scope:!0,compile:function(){var r=e["famous/core/Transform"],a=e["famous/transitions/Transitionable"],o=e["famous/transitions/Easing"];return{pre:function(e){n.ensureIsolate(e)},post:function(e,t,i){var s=n.ensureIsolate(e);setTimeout(function(){s.timeline=e.$eval(i.timeline),s._trans=new a(0),s.play=function(n){var r={duration:e.$eval(i.duration),curve:e.$eval(i.curve)||"linear"};s._trans.set(1,r,function(){n&&n(),i.loop&&setTimeout(function(){s.replay(n)},0)})},s.reset=function(){s._trans.set(0)},s.replay=function(e){s.reset(),s.play(e)};var n=null;i.event&&(n&&n(),n=e.$on(i.event,function(e,n){var r=n&&n.callback?n.callback:void 0;s.replay(r)}));i.id;if(void 0===s.timeline&&(s.timeline=s._trans.get.bind(s._trans),i.autoplay&&s.play()),!s.timeline instanceof Function)throw new Error("timeline must be a reference to a function or duration must be provided");for(var u=t[0].querySelectorAll("animate"),c={},f=0;f<u.length;f++)!function(){var n=u[f];if(n.attributes.targetmodselector){var a=angular.element(t[0].parentNode)[0].querySelectorAll(n.attributes.targetmodselector.value);angular.forEach(a,function(a){var t=angular.element(a).scope(),i=t.isolate[t.$id].modifier,u=t.isolate[t.$id].getTransform,f=n.attributes.curve&&"linear"!==n.attributes.curve.value?o[n.attributes.curve.value]:function(e){return e};if(n.attributes.field){var l=n.attributes.field.value,d=n.attributes.timelinelowerbound?parseFloat(n.attributes.timelinelowerbound.value):0,m=n.attributes.timelineupperbound?parseFloat(n.attributes.timelineupperbound.value):1;if(!n.attributes.startvalue)throw new Error("you must provide a start value for the animation");var p=e.$eval(n.attributes.startvalue.value);if(!n.attributes.endvalue)throw new Error("you must provide an end value for the animation");var v=e.$eval(n.attributes.endValue.value),g=c[t.$id]=c[t.$id]||{},h=g[l]=g[l]||[];h.push({field:l,lowerBound:d,upperBound:m,startValue:p,endValue:v,curve:f}),h.sort(function(e,n){return e.lowerBound-n.lowerBound});for(var $=1;$<h.length;$++)for(var y=h[$].lowerBound,w=0;$>w;w++)if(y<h[w].upperBound)throw new Error("Animate segments have overlappingdomains for the same field ("+l+").At any point in the timeline, only one <animate>can affect a given field on the same modifier.");var S=function(){for(var e=s.timeline()||0,n=0,r=h[n],a=0;a<h.length;a++){if(e>=h[a].lowerBound&&e<=h[a].upperBound){r=h[a];break}if(a===h.length-1){r=h[a];break}if(e>=h[a].upperBound&&e<h[a+1].lowerBound){r=h[a];break}}if(e<=r.lowerBound)return r.startValue;if(e>=r.upperBound)return r.endValue;var o=r.upperBound-r.lowerBound,t=(e-r.lowerBound)/o;if(Array.isArray(r.startValue)){for(var i=[],u=0;u<r.startValue.length;u++)i.push(r.startValue[u]+r.curve(t)*(r.endValue[u]-r.startValue[u]));return i}return r.startValue+r.curve(t)*(r.endValue-r.startValue)},b=g.transformComponents=g.transformComponents||[];"opacity"===l?i.opacityFrom(function(){return S()}):"origin"===l?i.originFrom(function(){return S()}):"size"===l?i.sizeFrom(function(){return S()}):(b.push({field:l,fn:S}),i.transformFrom(function(){for(var e={},n=u&&u()?[u()]:[],a=0;a<b.length;a++)!function(){var o=b[a].field;if(!e[o]){var t=b[a].fn();n.push(Array.isArray(t)?r[o].apply(this,t):r[o](t)),e[o]=!0}}();return 1===n.length?n[0]:r.multiply.apply(this,n)}))}})}}()},1)}}}}}]),angular.module("famous.angular").directive("faApp",["$famous","$famousDecorator",function(e,n){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,scope:!0,restrict:"EA",compile:function(r,a,o){return{pre:function(r,a,o){function t(){s.apply(this,arguments)}{var i=n.ensureIsolate(r),s=e["famous/core/View"],u=e["famous/core/Engine"];e["famous/core/Transform"]}a.append('<div class="famous-angular-clipping-container"><div class="famous-angular-container"></div></div>'),i.context=u.createContext(a[0].querySelector(".famous-angular-container")),window.context=i.context;var c=function(){var e=parseInt(o.faPerspective);e&&i.context.setPerspective(e)};o.$observe("faPerspective",c),c(),t.prototype=Object.create(s.prototype),t.prototype.constructor=t;i.view=new t,i.context.add(i.view),r.$on("$destroy",function(){i.context.update=angular.noop}),r.$on("registerChild",function(e,n){i.view.add(n.renderNode),e.stopPropagation()})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){angular.element(r[0].querySelectorAll("div div")[0]).append(e)}),a.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faCanvasSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,n){return{scope:!0,transclude:!0,template:'<canvas class="fa-canvas-surface"></canvas>',restrict:"EA",compile:function(r,a,o){return{pre:function(r,a,o){{var t=n.ensureIsolate(r),i=e["famous/surfaces/CanvasSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}t.renderNode=new i({size:r.$eval(o.faSize)}),n.addRole("renderable",t),t.show(),o.class&&t.renderNode.setClasses(o["class"].split(" ")),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r){var a=n.ensureIsolate(e),t=function(){a.renderNode.setContent(r[0].querySelector("canvas.fa-canvas-surface"))};t(),o(e,function(e){angular.element(r[0].querySelectorAll("canvas.fa-canvas-surface")).append(e)}),n.registerChild(e,r,a,function(){})}}}}}]),angular.module("famous.angular").directive("faClick",["$parse","$famousDecorator",function(e,n){return{restrict:"A",compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faClick){var i=t.renderNode._eventInput||t.renderNode;i.on("click",function(n){var a=e(o.faClick);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faContainerSurface",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/surfaces/ContainerSurface"],s=r.$eval(o.faOptions)||{};t.renderNode=new i(s),n.addRole("renderable",t),t.show(),n.sequenceWith(r,function(e){t.renderNode.add(e.renderGate)})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faDraggable",["$famous","$famousDecorator","$parse","$rootScope",function(e,n,r,a){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(r,o,t){return{post:function(r,o,i){var s=n.ensureIsolate(r),u=e["famous/core/RenderNode"],c=e["famous/modifiers/Draggable"],f=r.$eval(i.faOptions)||{};r.$watch(function(){return r.$eval(i.faOptions)},function(e){e=e||{},s.modifier.setOptions(e)},!0),s.modifier=new c(f),s.renderNode=(new u).add(s.modifier),n.addRole("renderable",s),s.show(),n.sequenceWith(r,function(e){s.renderNode.add(e.renderGate)}),t(r,function(e){o.find("div").append(e)}),n.registerChild(r,o,s,function(){s.modifier.deactivate()}),r.$$phase||a.$$phase||r.$apply()}}}}}]),angular.module("famous.angular").directive("faEdgeSwapper",["$famous","$famousDecorator",function(e,n){return{scope:!0,restrict:"A",priority:512,compile:function(){var r=e["famous/views/EdgeSwapper"];return{pre:function(e,a,o){var t,i=n.ensureIsolate(e);i.$$animateEnterHandler=function(e,n){i.renderNode.show(t,function(){i.$$leaveDoneCallback&&i.$$leaveDoneCallback(),n.$done()})},i.$$animateLeaveHandler=function(e,n){i.$$leaveDoneCallback=n.$done};var s=e.$eval(o.faOptions);i.renderNode=new r(s),n.addRole("renderable",i),i.show(),n.sequenceWith(e,function(e){t=e.renderGate})},post:function(e,r){var a=n.ensureIsolate(e);n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faFlexibleLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/FlexibleLayout"],s=(e["famous/core/ViewSequence"],e["famous/core/RenderNode"],[]),u=r.$eval(o.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=function(){s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))};n.sequenceWith(r,function(e){s.push(e),c()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),c()})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),e.$emit("registerChild",a)}}}}}]),angular.module("famous.angular").directive("faFlipper",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/Flipper"],s=r.$eval(o.faOptions)||{};t.renderNode=new i(s),n.addRole("renderable",t),t.show(),t.children=[],t.flip=function(e){t.renderNode.flip(e||r.$eval(o.faOptions))},n.sequenceWith(r,function(e){var n=t.children.length;if(0===n)t.renderNode.setFront(e.renderGate);else{if(1!==n)throw new Error("fa-flipper accepts only two child elements; more than two have been provided");t.renderNode.setBack(e.renderGate)}t.children.push(e.renderGate)},function(){t.children.splice(t.children.length-1,1)})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faGridLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/GridLayout"],s=(e["famous/core/ViewSequence"],[]),u=r.$eval(o.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=function(){r.$$postDigest(function(){s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))})};n.sequenceWith(r,function(e){s.push(e),c()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),c()},c)},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faHeaderFooterLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){var t=e["famous/views/HeaderFooterLayout"],i=e["famous/core/RenderNode"];return{pre:function(e,r,a){var o=n.ensureIsolate(e),s=(new i,new i,new i,e.$eval(a.faOptions)||{});o.renderNode=new t(s),n.addRole("renderable",o),o.show();var u=0;n.sequenceWith(e,function(e){if(u++,1===u)o.renderNode.header.add(e.renderGate);else if(2===u)o.renderNode.content.add(e.renderGate);else{if(3!==u)throw new Error("fa-header-footer-layout can accept no more than 3 children");o.renderNode.footer.add(e.renderGate)}},function(){1===u?o.renderNode.header.set({}):2===u?o.renderNode.content.set({}):3===u&&o.renderNode.footer.set({}),u--})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faImageSurface",["$famous","$famousDecorator",function(e,n){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(r,a,o){{var t=n.ensureIsolate(r),i=e["famous/surfaces/ImageSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}r.$watch(function(){return t.getProperties()},function(){t.renderNode&&t.renderNode.setProperties(t.getProperties())},!0);var s=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};t.getProperties=function(){for(var e=r.$eval(o.faProperties)||{},n=["backgroundColor","color"],a=0;a<n.length;a++){var t=n[a],i=s(t);o[i]&&(e[t]=r.$eval(o[i]))}return e},t.renderNode=new i({size:r.$eval(o.faSize),"class":r.$eval(o.class),properties:t.getProperties()}),n.addRole("renderable",t),t.show(),o.class&&t.renderNode.setClasses(o["class"].split(" "))},post:function(e,r,a){var o=n.ensureIsolate(e),t=function(){o.renderNode.setContent(a.faImageUrl)};t(),a.$observe("faImageUrl",t),n.registerChild(e,r,o)}}}}}]),angular.module("famous.angular").directive("faIndex",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(e,r,a){var o=n.ensureIsolate(e,r);o.index=e.$eval(a.faIndex),e.$watch(function(){return e.$eval(a.faIndex)},function(){o.index=e.$eval(a.faIndex),o.updateMethod&&o.updateMethod()})}}}}}]),angular.module("famous.angular").config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate","$famousDecorator","$parse","$rootElement","$famous","$timeout",function(e,n,r,a,o,t){function i(e,n,r,a){return Math.abs(e-r)<$&&Math.abs(n-a)<$}function s(e,n,r){for(var a=0;a<e.length;a+=2)if(i(e[a],e[a+1],n,r))return e.splice(a,a+2),!0;return!1}function u(e){if(!(Date.now()-l>h)){var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].clientX,a=n[0].clientY;s(d,r,a)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur())}}function c(e){var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].clientX,a=n[0].clientY;d.push(r,a),t(function(){for(var e=0;e<d.length;e+=2)if(d[e]===r&&d[e+1]===a)return void d.splice(e,e+2)},h,!1)}function f(e,n){d||(a[0].addEventListener("click",u,!0),a[0].addEventListener("touchstart",c,!0),d=[]),l=Date.now(),s(d,e,n)}{var l,d,m=e[0],p=m.compile,v=750,g=12,h=2500,$=25,y="ng-click-active";o["famous/core/Engine"]}return m.compile=function(e,n,a){return o.util.isFaElement(e)?o.util.isASurface(e)?{post:function(e,n,a){function t(){d=!1,p.removeClass(y)}var i,s,u,c,l=r(a.ngClick),d=!1,m=o.getIsolate(e),p=m.renderNode;p.on("touchstart",function(e){d=!0,i=e.target?e.target:e.srcElement,3===i.nodeType&&(i=i.parentNode),p.addClass(y),s=Date.now();var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].originalEvent||n[0];u=r.clientX,c=r.clientY}),p.on("touchmove",function(){t()}),p.on("touchcancel",function(){t()}),p.on("touchend",function(e){var n=Date.now()-s,r=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],o=r[0].originalEvent||r[0],i=o.clientX,l=o.clientY,m=Math.sqrt(Math.pow(i-u,2)+Math.pow(l-c,2));d&&v>n&&g>m&&(f(i,l),angular.isDefined(a.disabled)&&"false"!==a.disabled||p.emit("click",[e])),t()}),p.on("click",function(n,r){e.$apply(function(){l(e,{$event:r||n})})}),p.on("mousedown",function(){p.addClass(y)}),p.on("mousemove mouseup",function(){p.removeClass(y)})}}:void 0:p(e,n,a)},e}]),angular.forEach("dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(n){var r=window.$famousUtil.directiveNormalize("ng-"+n);e.decorator(r+"Directive",["$delegate","$famousDecorator","$parse","$famous",function(e,a,o,t){var i=e[0],s=i.compile;return i.compile=function(e,i,u){return t.util.isFaElement(e)?{post:function(e,t,i){var s=a.ensureIsolate(e);if(i[r]){var u=s.renderNode._eventInput||s.renderNode;u.on(n,function(n){var a=o(i[r]);a(e,{$event:n}),e.$$phase||e.$apply()})}}}:s(e,i,u)},e}])})}]),angular.module("famous.angular").directive("faModifier",["$famous","$famousDecorator","$parse","$rootScope",function(e,n,r,a){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(o,t,i){return{post:function(o,t,s){var u=n.ensureIsolate(o),c=e["famous/core/RenderNode"],f=e["famous/core/Modifier"],l=e["famous/core/Transform"],d=e["famous/physics/bodies/Particle"],m=function(e){return e.getPosition()},p=["aboutOrigin","perspective","rotate","rotateAxis","rotateX","rotateY","rotateZ","scale","skew","translate"];s.$observe("faTransformOrder",function(){var e=o.$eval(s.faTransformOrder);void 0!==e&&(p=e)});var v={};angular.forEach(p,function(n){var a=e.util.directiveNormalize("fa-"+n);s.$observe(a,function(){v[n]=r(s[a])})});var g=angular.noop;s.$observe("faTransform",function(){g=r(s.faTransform)}),u.getTransform=function(){var e=g(o);if(void 0!==e)return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e;var n=[];return angular.forEach(p,function(e){var r=v[e]?v[e](o):void 0;void 0!==r&&(r instanceof Function&&(r=r()),n.push(r instanceof Array?l[e].apply(this,r):r instanceof d?l[e].apply(this,m(r)):l[e].call(this,r)))}),n.length?1===n.length?n[0]:l.multiply.apply(this,n):void 0};var h=angular.noop;s.$observe("faAlign",function(){h=r(s.faAlign)}),u.getAlign=function(){var e=h(o);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof d?m(e):e};var $=angular.noop;s.$observe("faOpacity",function(){$=r(s.faOpacity)}),u.getOpacity=function(){var e=$(o);return void 0===e?1:e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof d?m(e):e};var y=angular.noop;s.$observe("faSize",function(){y=r(s.faSize)}),u.getSize=function(){var e=y(o);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof d?m(e):e};var w=angular.noop;s.$observe("faOrigin",function(){w=r(s.faOrigin)}),u.getOrigin=function(){var e=w(o);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof d?m(e):e},u.modifier=new f({transform:u.getTransform,size:u.getSize,opacity:u.getOpacity,origin:u.getOrigin,align:u.getAlign}),u.renderNode=(new c).add(u.modifier),n.addRole("renderable",u),u.show(),n.sequenceWith(o,function(e){u.renderNode.add(e.renderGate)}),i(o,function(e){t.find("div").append(e)}),n.registerChild(o,t,u,function(){u.modifier.setOpacity(0)}),o.$$phase||a.$$phase||o.$apply()}}}}}]),angular.module("famous.angular").directive("faMouseover",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faMouseover){var i=t.renderNode._eventInput||t.renderNode;i.on("mouseover",function(n){var a=e(o.faMouseover);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faOptions",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:-16,compile:function(){return{post:function(e,r,a){var o=n.ensureIsolate(e,r);e.$watch(function(){return e.$eval(a.faOptions)},function(){o.renderNode.setOptions(e.$eval(a.faOptions))},!0)}}}}}]),angular.module("famous.angular").directive("faPipeFrom",["$famous","$famousDecorator","$famousPipe",function(e,n,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var a=e["famous/core/Engine"];return{post:function(e,o,t){var i=n.ensureIsolate(e);e.$watch(function(){return e.$eval(t.faPipeFrom)},function(e,n){var o;o=i.renderNode&&i.renderNode._isModifier?i.renderNode._object:i.renderNode?i.renderNode._eventInput||i.renderNode:a,r.unpipesFromTargets(o,n),r.pipesToTargets(o,e)}),e.$on("$destroy",function(){r.unpipesFromTargets(i.renderNode||a,e.$eval(t.faPipeFrom))})}}}}}]),angular.module("famous.angular").directive("faPipeTo",["$famous","$famousDecorator","$famousPipe",function(e,n,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var a=e["famous/core/Engine"];return{post:function(e,o,t){var i=n.ensureIsolate(e);e.$watch(function(){return e.$eval(t.faPipeTo)},function(e,n){var o;o=i.renderNode&&i.renderNode._isModifier?i.renderNode._object:i.renderNode?i.renderNode._eventOutput||i.renderNode:a,r.unpipesFromTargets(n,o),r.pipesToTargets(e,o)}),e.$on("$destroy",function(){r.unpipesFromTargets(e.$eval(t.faPipeTo),i.renderNode||a)})}}}}}]),angular.module("famous.angular").directive("faRenderNode",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(r,a,o){return{pre:function(r,a,o){{var t=n.ensureIsolate(r),i=e["famous/core/Engine"];
e["famous/core/RenderNode"]}t.children=[],o.$observe("faPipeTo",function(e){var n=r.$eval(e);n&&i.pipe(n)}),t.renderNode=r.$eval(o.faNode),n.addRole("renderable",t),t.show(),n.sequenceWith(r,function(e){t.renderNode.add(e.renderGate),t.children.push(e)})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faScrollView",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/Scrollview"],s=e["famous/core/ViewSequence"],u=(e["famous/core/Surface"],[]),c=r.$eval(o.faOptions)||{};t.renderNode=new i(c),n.addRole("renderable",t),t.show();var f=function(e){r.$$postDigest(function(){u.sort(function(e,n){return e.index-n.index});var n={array:function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(u)};e&&(n.index=r.$eval(o.faStartIndex));var a=new s(n);t.renderNode.sequenceFrom(a)})};n.sequenceWith(r,function(e){u.push(e),f(!0)},function(e){u=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(u),f()},f)},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faSequentialLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return window.$f=e,{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/SequentialLayout"],s=[],u=r.$eval(o.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=function(){s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))};n.sequenceWith(r,function(e){s.push(e),c()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),c()})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,n){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(r,a,o){return{pre:function(r,a,o){{var t=n.ensureIsolate(r),i=e["famous/core/Surface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}r.$watch(function(){return t.getProperties()},function(){t.renderNode&&t.renderNode.setProperties(t.getProperties())},!0);var s=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};t.getProperties=function(){for(var e=r.$eval(o.faProperties)||{},n=["backgroundColor","margin","padding","color","pointerEvents","zIndex"],a=0;a<n.length;a++){var t=n[a],i=s(t);o[i]&&(e[t]=r.$eval(o[i]))}return e};var u=[];o.$observe("faSize",function(){t.renderNode.setSize(r.$eval(o.faSize)),u.push(new Date),u.length>5&&(u[4]-u[0]<=1e3&&console.warn("Using fa-size on fa-surface to animate is significantly non-performant, prefer to use fa-size on an fa-modifier surrounding a fa-surface"),u.shift())}),t.renderNode=new i({size:r.$eval(o.faSize),properties:t.getProperties()}),n.addRole("renderable",t),t.show(),o.class&&t.renderNode.setClasses(o["class"].split(" ")),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r){var a=n.ensureIsolate(e),t=function(){a.renderNode.setContent(r[0].querySelector("div.fa-surface"))};t(),o(e,function(e){angular.element(r[0].querySelectorAll("div.fa-surface")).append(e)}),n.registerChild(e,r,a,function(){})}}}}}]),angular.module("famous.angular").directive("faTap",["$parse","$famousDecorator",function(e,n){return{restrict:"A",compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faTap){var i=t.renderNode._eventInput||t.renderNode,s=!1;i.on("touchmove",function(e){return s=!0,e}),i.on("tap",function(n){if(!s){var a=e(o.faTap);a(r,{$event:n}),r.$$phase||r.$apply()}s=!1})}}}}}}]),angular.module("famous.angular").directive("faTouchend",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faTouchend){var i=t.renderNode._eventInput||t.renderNode;i.on("touchend",function(n){var a=e(o.faTouchend);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchmove",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faTouchmove){var i=t.renderNode._eventInput||t.renderNode;i.on("touchmove",function(n){var a=e(o.faTouchmove);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchstart",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faTouchstart){var i=t.renderNode._eventInput||t.renderNode;i.on("touchstart",function(n){var a=e(o.faTouchstart);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faVideoSurface",["$famous","$famousDecorator",function(e,n){return{scope:!0,transclude:!0,template:'<div class="fa-video-surface"></div>',restrict:"EA",compile:function(){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/surfaces/VideoSurface"];r.$watch(function(){return r.$eval(o.faOptions)},function(e,n){t.renderNode.setOptions(n)},!0),t.renderNode=new i({"class":r.$eval(o.class)}),n.addRole("renderable",t),t.show(),o.class&&t.renderNode.setClasses(o["class"].split(" ")),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r,a){var o=n.ensureIsolate(e),t=function(){o.renderNode.setContent(a.faVideoUrl)};t(),a.$observe("faVideoUrl",t),n.registerChild(e,r,o)}}}}}]),angular.module("famous.angular").directive("faView",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(r,a,o){var t=e["famous/core/View"];return{pre:function(e,r,a){var o=n.ensureIsolate(e);o.children=[],o.renderNode=new t({size:e.$eval(a.faSize)||[void 0,void 0]}),n.addRole("renderable",o),o.show(),n.sequenceWith(e,function(e){o.renderNode.add(e.renderGate),o.children.push(e)})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]);
}).call(global, module, undefined, undefined);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js":"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js","/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js":"/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js","/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js":"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js","/home/codio/workspace/bower_components/angular/angular.min.js":"/home/codio/workspace/bower_components/angular/angular.min.js","/home/codio/workspace/bower_components/famous/dist/famous-global.min.js":"/home/codio/workspace/bower_components/famous/dist/famous-global.min.js","famous-polyfills":"/home/codio/workspace/node_modules/famous-polyfills/index.js"}],"/home/codio/workspace/bower_components/famous/dist/famous-global.min.js":[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @copyright Famous Industries, Inc. 2014
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.famous=t()}}(function(){return function t(i,e,n){function o(r,a){if(!e[r]){if(!i[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var p=e[r]={exports:{}};i[r][0].call(p.exports,function(t){var e=i[r][1][t];return o(e?e:t)},p,p.exports,t,i,e,n)}return e[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,i){function e(t){return[t.clientWidth,t.clientHeight]}function n(t){this.container=t,this._allocator=new r(t),this._node=new o,this._eventOutput=new s,this._size=e(this.container),this._perspectiveState=new h(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:a.identity,opacity:1,origin:c,align:c,size:this._size},this._eventOutput.on("resize",function(){this.setSize(e(this.container))}.bind(this))}var o=t("./RenderNode"),s=t("./EventHandler"),r=t("./ElementAllocator"),a=t("./Transform"),h=t("../transitions/Transitionable"),c=[0,0],p=!("perspective"in document.documentElement.style),u=p?function(t,i){t.style.webkitPerspective=i?i.toFixed()+"px":""}:function(t,i){t.style.perspective=i?i.toFixed()+"px":""};n.prototype.getAllocator=function(){return this._allocator},n.prototype.add=function(t){return this._node.add(t)},n.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},n.prototype.getSize=function(){return this._size},n.prototype.setSize=function(t){t||(t=e(this.container)),this._size[0]=t[0],this._size[1]=t[1]},n.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var i=this._perspectiveState.get();i!==this._perspective&&(u(this.container,i),this._perspective=i),this._node.commit(this._nodeContext)},n.prototype.getPerspective=function(){return this._perspectiveState.get()},n.prototype.setPerspective=function(t,i,e){return this._perspectiveState.set(t,i,e)},n.prototype.emit=function(t,i){return this._eventOutput.emit(t,i)},n.prototype.on=function(t,i){return this._eventOutput.on(t,i)},n.prototype.removeListener=function(t,i){return this._eventOutput.removeListener(t,i)},n.prototype.pipe=function(t){return this._eventOutput.pipe(t)},n.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=n},{"../transitions/Transitionable":88,"./ElementAllocator":2,"./EventHandler":7,"./RenderNode":11,"./Transform":15}],2:[function(t,i){function e(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}e.prototype.migrate=function(t){var i=this.container;if(t!==i){if(i instanceof DocumentFragment)t.appendChild(i);else for(;i.hasChildNodes();)t.appendChild(i.removeChild(i.firstChild));this.container=t}},e.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var i,e=this.detachedNodes[t];return e.length>0?i=e.pop():(i=document.createElement(t),this.container.appendChild(i)),this.nodeCount++,i},e.prototype.deallocate=function(t){var i=t.nodeName.toLowerCase(),e=this.detachedNodes[i];e.push(t),this.nodeCount--},e.prototype.getNodeCount=function(){return this.nodeCount},i.exports=e},{}],3:[function(t,i){function e(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new c,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=h.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function n(t){for(var i in this._eventOutput.listeners)t.addEventListener(i,this.eventForwarder)}function o(t){for(var i in this._eventOutput.listeners)t.removeEventListener(i,this.eventForwarder)}function s(t){t[12]=Math.round(t[12]*l)/l,t[13]=Math.round(t[13]*l)/l;for(var i="matrix3d(",e=0;15>e;e++)i+=t[e]<1e-6&&t[e]>-1e-6?"0,":t[e]+",";return i+=t[15]+")"}function r(t){return 100*t[0]+"% "+100*t[1]+"%"}function a(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}var h=t("./Entity"),c=t("./EventHandler"),p=t("./Transform"),u=!("transform"in document.documentElement.style),l=window.devicePixelRatio||1;e.prototype.on=function(t,i){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,i)},e.prototype.removeListener=function(t,i){this._eventOutput.removeListener(t,i)},e.prototype.emit=function(t,i){i&&!i.origin&&(i.origin=this);var e=this._eventOutput.emit(t,i);return e&&i&&i.stopPropagation&&i.stopPropagation(),e},e.prototype.pipe=function(t){return this._eventOutput.pipe(t)},e.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},e.prototype.render=function(){return this.id};var f;f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,i){t.style.zIndex=1e6*i[14]|0,t.style.transform=s(i)}:u?function(t,i){t.style.webkitTransform=s(i)}:function(t,i){t.style.transform=s(i)};var d=u?function(t,i){t.style.webkitTransformOrigin=r(i)}:function(t,i){t.style.transformOrigin=r(i)},_=u?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};e.prototype.commit=function(t){var i=this._element;if(i){{var e=t.transform,n=t.opacity,o=t.origin;t.size}if(!e&&this._matrix)return this._matrix=null,this._opacity=0,void _(i);if(a(this._origin,o)&&(this._originDirty=!0),p.notEquals(this._matrix,e)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==n&&(this._opacity=n,i.style.opacity=n>=1?"0.999999":n),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(o?(this._origin||(this._origin=[0,0]),this._origin[0]=o[0],this._origin[1]=o[1]):this._origin=null,d(i,this._origin),this._originDirty=!1),e||(e=p.identity),this._matrix=e;var s=this._size?p.thenMove(e,[-this._size[0]*o[0],-this._size[1]*o[1],0]):e;f(i,s),this._transformDirty=!1}}},e.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},e.prototype.attach=function(t){this._element=t,n.call(this,t)},e.prototype.detach=function(){var t=this._element;return t&&(o.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},i.exports=e},{"./Entity":5,"./EventHandler":7,"./Transform":15}],4:[function(t,i){function e(){v.runLoop?(p.step(),window.requestAnimationFrame(e)):_=!1}function n(){for(var t=0;t<u.length;t++)u[t].emit("resize");g.emit("resize")}function o(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var s,r,a=t("./Context"),h=t("./EventHandler"),c=t("./OptionsManager"),p={},u=[],l=[],f=[],d=Date.now(),_=!0,y={},g=new h,v={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},m=new c(v),O=10;p.step=function(){var t=Date.now();if(!(r&&r>t-d)){var i=0;for(s=t-d,d=t,g.emit("prerender"),i=0;i<l.length;i++)l[i].call(this);for(l.splice(0);f.length&&Date.now()-t<O;)f.shift().call(this);for(i=0;i<u.length;i++)u[i].update();g.emit("postrender")}},window.requestAnimationFrame(e),window.addEventListener("resize",n,!1),n();var S=!1;p.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(p):g.pipe(t)},p.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(p):g.unpipe(t)},p.on=function(t,i){return t in y||(y[t]=g.emit.bind(g,t),document.body?document.body.addEventListener(t,y[t]):p.nextTick(function(t,i){document.body.addEventListener(t,i)}.bind(this,t,y[t]))),g.on(t,i)},p.emit=function(t,i){return g.emit(t,i)},p.removeListener=function(t,i){return g.removeListener(t,i)},p.getFPS=function(){return 1e3/s},p.setFPSCap=function(t){r=Math.floor(1e3/t)},p.getOptions=function(t){return m.getOptions(t)},p.setOptions=function(){return m.setOptions.apply(m,arguments)},p.createContext=function(t){!S&&v.appMode&&p.nextTick(o);var i=!1;t||(t=document.createElement(v.containerType),t.classList.add(v.containerClass),i=!0);var e=new a(t);return p.registerContext(e),i&&p.nextTick(function(t,i){document.body.appendChild(i),t.emit("resize")}.bind(this,e,t)),e},p.registerContext=function(t){return u.push(t),t},p.getContexts=function(){return u},p.deregisterContext=function(t){var i=u.indexOf(t);i>=0&&u.splice(i,1)},p.nextTick=function(t){l.push(t)},p.defer=function(t){f.push(t)},m.on("change",function(t){"fpsCap"===t.id?p.setFPSCap(t.value):"runLoop"===t.id&&!_&&t.value&&(_=!0,window.requestAnimationFrame(e))}),i.exports=p},{"./Context":1,"./EventHandler":7,"./OptionsManager":10}],5:[function(t,i){function e(t){return r[t]}function n(t,i){r[t]=i}function o(t){var i=r.length;return n(i,t),i}function s(t){n(t,null)}var r=[];i.exports={register:o,unregister:s,get:e,set:n}},{}],6:[function(t,i){function e(){this.listeners={},this._owner=this}e.prototype.emit=function(t,i){var e=this.listeners[t];if(e)for(var n=0;n<e.length;n++)e[n].call(this._owner,i);return this},e.prototype.on=function(t,i){t in this.listeners||(this.listeners[t]=[]);var e=this.listeners[t].indexOf(i);return 0>e&&this.listeners[t].push(i),this},e.prototype.addListener=e.prototype.on,e.prototype.removeListener=function(t,i){var e=this.listeners[t];if(void 0!==e){var n=e.indexOf(i);n>=0&&e.splice(n,1)}return this},e.prototype.bindThis=function(t){this._owner=t},i.exports=e},{}],7:[function(t,i){function e(){n.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var n=t("./EventEmitter");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.setInputHandler=function(t,i){t.trigger=i.trigger.bind(i),i.subscribe&&i.unsubscribe&&(t.subscribe=i.subscribe.bind(i),t.unsubscribe=i.unsubscribe.bind(i))},e.setOutputHandler=function(t,i){i instanceof e&&i.bindThis(t),t.pipe=i.pipe.bind(i),t.unpipe=i.unpipe.bind(i),t.on=i.on.bind(i),t.addListener=t.on,t.removeListener=i.removeListener.bind(i)},e.prototype.emit=function(t,i){n.prototype.emit.apply(this,arguments);var e=0;for(e=0;e<this.downstream.length;e++)this.downstream[e].trigger&&this.downstream[e].trigger(t,i);for(e=0;e<this.downstreamFn.length;e++)this.downstreamFn[e](t,i);return this},e.prototype.trigger=e.prototype.emit,e.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return 0>e&&i.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},e.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return e>=0?(i.splice(e,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},e.prototype.on=function(t){if(n.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var e=0;e<this.upstream.length;e++)this.upstream[e].on(t,i)}return this},e.prototype.addListener=e.prototype.on,e.prototype.subscribe=function(t){var i=this.upstream.indexOf(t);if(0>i){this.upstream.push(t);for(var e in this.upstreamListeners)t.on(e,this.upstreamListeners[e])}return this},e.prototype.unsubscribe=function(t){var i=this.upstream.indexOf(t);if(i>=0){this.upstream.splice(i,1);for(var e in this.upstreamListeners)t.removeListener(e,this.upstreamListeners[e])}return this},i.exports=e},{"./EventEmitter":6}],8:[function(t,i){function e(t){s.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new n(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var n=t("./Context"),o=t("./Transform"),s=t("./Surface");e.SIZE_ZERO=[0,0],e.prototype=Object.create(s.prototype),e.prototype.elementType="div",e.prototype.elementClass="famous-group",e.prototype.add=function(){return this.context.add.apply(this.context,arguments)},e.prototype.render=function(){return s.prototype.render.call(this)},e.prototype.deploy=function(t){this.context.migrate(t)},e.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},e.prototype.commit=function(t){var i=t.transform,n=t.origin,r=t.opacity,a=t.size,h=s.prototype.commit.call(this,{allocator:t.allocator,transform:o.thenMove(i,[-n[0]*a[0],-n[1]*a[1],0]),opacity:r,origin:n,size:e.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:o.translate(-n[0]*a[0],-n[1]*a[1],0),origin:n,size:a}),h},i.exports=e},{"./Context":1,"./Surface":14,"./Transform":15}],9:[function(t,i){function e(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:o.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size),t.proportions&&this.proportionsFrom(t.proportions))}function n(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}var o=t("./Transform"),s=t("../transitions/Transitionable"),r=t("../transitions/TransitionableTransform");e.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},e.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},e.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},e.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},e.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},e.prototype.proportionsFrom=function(t){return t instanceof Function?this._proportionGetter=t:t instanceof Object&&t.get?this._proportionGetter=t.get.bind(t):(this._proportionGetter=null,this._output.proportions=t),this},e.prototype.setTransform=function(t,i,e){return i||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new r(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,i,e),this):this.transformFrom(t)},e.prototype.setOpacity=function(t,i,e){return i||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new s(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,i,e)):this.opacityFrom(t)},e.prototype.setOrigin=function(t,i,e){return i||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new s(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,i,e),this):this.originFrom(t)},e.prototype.setAlign=function(t,i,e){return i||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new s(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,i,e),this):this.alignFrom(t)},e.prototype.setSize=function(t,i,e){return t&&(i||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new s(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,i,e),this):this.sizeFrom(t)},e.prototype.setProportions=function(t,i,e){return t&&(i||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new s(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(t,i,e),this):this.proportionsFrom(t)},e.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},e.prototype.getTransform=function(){return this._transformGetter()},e.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},e.prototype.getOpacity=function(){return this._opacityGetter()},e.prototype.getOrigin=function(){return this._originGetter()},e.prototype.getAlign=function(){return this._alignGetter()},e.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},e.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},e.prototype.modify=function(t){return n.call(this),this._output.target=t,this._output},i.exports=e},{"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89,"./Transform":15}],10:[function(t,i){function e(t){this._value=t,this.eventOutput=null}function n(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./EventHandler");e.patch=function(t){for(var i=new e(t),n=1;n<arguments.length;n++)i.patch(arguments[n]);return t},e.prototype.patch=function(){for(var t=this._value,i=0;i<arguments.length;i++){var e=arguments[i];for(var n in e)n in t&&e[n]&&e[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(e[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,e[n])}return this},e.prototype.setOptions=e.prototype.patch,e.prototype.key=function(t){var i=new e(this._value[t]);return(!(i._value instanceof Object)||i._value instanceof Array)&&(i._value={}),i},e.prototype.get=function(t){return t?this._value[t]:this._value},e.prototype.getOptions=e.prototype.get,e.prototype.set=function(t,i){var e=this.get(t);return this._value[t]=i,this.eventOutput&&i!==e&&this.eventOutput.emit("change",{id:t,value:i}),this},e.prototype.on=function(){return n.call(this),this.on.apply(this,arguments)},e.prototype.removeListener=function(){return n.call(this),this.removeListener.apply(this,arguments)},e.prototype.pipe=function(){return n.call(this),this.pipe.apply(this,arguments)},e.prototype.unpipe=function(){return n.call(this),this.unpipe.apply(this,arguments)},i.exports=e},{"./EventHandler":7}],11:[function(t,i){function e(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function n(t,i,e){for(var r=s.parse(t,i),a=Object.keys(r),h=0;h<a.length;h++){var c=a[h],p=o.get(c),u=r[c];u.allocator=i.allocator;var l=p.commit(u);l?n(l,i,e):e[c]=u}}var o=t("./Entity"),s=t("./SpecParser");e.prototype.add=function(t){var i=t instanceof e?t:new e(t);return this._child instanceof Array?this._child.push(i):this._child?(this._child=[this._child,i],this._hasMultipleChildren=!0,this._childResult=[]):this._child=i,i},e.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},e.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof e?t:this},e.prototype.getSize=function(){var t=null,i=this.get();return i&&i.getSize&&(t=i.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},e.prototype.commit=function(t){for(var i=Object.keys(this._prevResults),e=0;e<i.length;e++){var s=i[e];if(void 0===this._resultCache[s]){var r=o.get(s);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},n(this.render(),t,this._resultCache)},e.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var i=this._child,e=0;e<i.length;e++)t[e]=i[e].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=e},{"./Entity":5,"./SpecParser":13}],12:[function(t,i){function e(t){this.id=null,this._objects=null,this.node=new c,this._definition=null,t&&this.load(t)}function n(t){for(var i in p)if(i in t){var e=t[i];return e instanceof Array||(e=[e]),p[i].apply(this,e)}}function o(t){var i=t.transform,e=t.opacity,o=t.origin,s=t.align,r=t.size,c=a.identity;if(i instanceof Array)if(16===i.length&&"number"==typeof i[0])c=i;else for(var p=0;p<i.length;p++)c=a.multiply(c,n(i[p]));else i instanceof Function?c=i:i instanceof Object&&(c=n(i));var u=new h({transform:c,opacity:e,origin:o,align:s,size:r});return u}function s(t){for(var i=new c,e=0;e<t.length;e++){var n=r.call(this,t[e]);n&&i.add(n)}return i}function r(t){var i,e;if(t instanceof Array)i=s.call(this,t);else if(e=this._objects.length,t.render&&t.render instanceof Function)i=t;else if(t.target){var n=r.call(this,t.target),a=o.call(this,t);i=new c(a),i.add(n),t.id&&(this.id[t.id]=a)}else t.id&&(i=new c,this.id[t.id]=i);return this._objects[e]=i,i}var a=t("./Transform"),h=t("./Modifier"),c=t("./RenderNode"),p={translate:a.translate,rotate:a.rotate,rotateX:a.rotateX,rotateY:a.rotateY,rotateZ:a.rotateZ,rotateAxis:a.rotateAxis,scale:a.scale,skew:a.skew,matrix3d:function(){return arguments}};e.prototype.create=function(){return new e(this._definition)},e.prototype.load=function(t){this._definition=t,this.id={},this._objects=[],this.node.set(r.call(this,t))},e.prototype.add=function(){return this.node.add.apply(this.node,arguments)},e.prototype.render=function(){return this.node.render.apply(this.node,arguments)},i.exports=e},{"./Modifier":9,"./RenderNode":11,"./Transform":15}],13:[function(t,i){function e(){this.result={}}function n(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var o=t("./Transform");e._instance=new e,e.parse=function(t,i){return e._instance.parse(t,i)},e.prototype.parse=function(t,i){return this.reset(),this._parseSpec(t,i,o.identity),this.result},e.prototype.reset=function(){this.result={}};var s=[0,0];e.prototype._parseSpec=function(t,i,e){var r,a,h,c,p,u,l;if("number"==typeof t){if(r=t,h=i.transform,u=i.align||s,i.size&&u&&(u[0]||u[1])){var f=[u[0]*i.size[0],u[1]*i.size[1],0];h=o.thenMove(h,n(f,e))}this.result[r]={transform:h,opacity:i.opacity,origin:i.origin||s,align:i.align||s,size:i.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],i,e);else{a=t.target,h=i.transform,c=i.opacity,p=i.origin,u=i.align,l=i.size;var _=e;if(void 0!==t.opacity&&(c=i.opacity*t.opacity),t.transform&&(h=o.multiply(i.transform,t.transform)),t.origin&&(p=t.origin,_=i.transform),t.align&&(u=t.align),t.size||t.proportions){var y=l;l=[l[0],l[1]],t.size&&(void 0!==t.size[0]&&(l[0]=t.size[0]),void 0!==t.size[1]&&(l[1]=t.size[1])),t.proportions&&(void 0!==t.proportions[0]&&(l[0]=l[0]*t.proportions[0]),void 0!==t.proportions[1]&&(l[1]=l[1]*t.proportions[1])),y&&(u&&(u[0]||u[1])&&(h=o.thenMove(h,n([u[0]*y[0],u[1]*y[1],0],e))),p&&(p[0]||p[1])&&(h=o.moveThen([-p[0]*l[0],-p[1]*l[1],0],h))),_=i.transform,p=null,u=null}this._parseSpec(a,{transform:h,opacity:c,origin:p,align:u,size:l},_)}}},i.exports=e},{"./Transform":15}],14:[function(t,i){function e(t){c.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function n(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);this._dirtyClasses=[]}function o(t){for(var i in this.properties)t.style[i]=this.properties[i]}function s(t){for(var i in this.properties)t.style[i]=""}function r(t){for(var i in this.attributes)t.setAttribute(i,this.attributes[i])}function a(t){for(var i in this.attributes)t.removeAttribute(i)}function h(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}var c=t("./ElementOutput");e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.prototype.elementType="div",e.prototype.elementClass="famous-surface",e.prototype.setAttributes=function(t){for(var i in t){if("style"===i)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[i]=t[i]}this._attributesDirty=!0},e.prototype.getAttributes=function(){return this.attributes},e.prototype.setProperties=function(t){for(var i in t)this.properties[i]=t[i];return this._stylesDirty=!0,this},e.prototype.getProperties=function(){return this.properties},e.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0),this},e.prototype.removeClass=function(t){var i=this.classList.indexOf(t);return i>=0&&(this._dirtyClasses.push(this.classList.splice(i,1)[0]),this._classesDirty=!0),this},e.prototype.toggleClass=function(t){var i=this.classList.indexOf(t);return i>=0?this.removeClass(t):this.addClass(t),this},e.prototype.setClasses=function(t){var i=0,e=[];for(i=0;i<this.classList.length;i++)t.indexOf(this.classList[i])<0&&e.push(this.classList[i]);for(i=0;i<e.length;i++)this.removeClass(e[i]);for(i=0;i<t.length;i++)this.addClass(t[i]);return this},e.prototype.getClassList=function(){return this.classList},e.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0),this},e.prototype.getContent=function(){return this.content},e.prototype.setOptions=function(t){return t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.attributes&&this.setAttributes(t.attributes),t.content&&this.setContent(t.content),this},e.prototype.setup=function(t){var i=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var e=0;e<this.elementClass.length;e++)i.classList.add(this.elementClass[e]);else i.classList.add(this.elementClass);i.style.display="",this.attach(i),this._opacity=null,this._currentTarget=i,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},e.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var i=this._currentTarget,e=t.size;if(this._classesDirty){n.call(this,i);for(var s=this.getClassList(),a=0;a<s.length;a++)i.classList.add(s[a]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(o.call(this,i),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(r.call(this,i),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var p=t.size;if(e=[this.size[0],this.size[1]],void 0===e[0]&&(e[0]=p[0]),void 0===e[1]&&(e[1]=p[1]),e[0]===!0||e[1]===!0){if(e[0]!==!0||!this._trueSizeCheck&&0!==this._size[0])this._size&&(e[0]=this._size[0]);else{var u=i.offsetWidth;this._size&&this._size[0]!==u&&(this._size[0]=u,this._sizeDirty=!0),e[0]=u}if(e[1]!==!0||!this._trueSizeCheck&&0!==this._size[1])this._size&&(e[1]=this._size[1]);else{var l=i.offsetHeight;this._size&&this._size[1]!==l&&(this._size[1]=l,this._sizeDirty=!0),e[1]=l}this._trueSizeCheck=!1}}h(this._size,e)&&(this._size||(this._size=[0,0]),this._size[0]=e[0],this._size[1]=e[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(i.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",i.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(i),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),c.prototype.commit.call(this,t)},e.prototype.cleanup=function(t){var i=0,e=this._currentTarget;this._eventOutput.emit("recall"),this.recall(e),e.style.display="none",e.style.opacity="",e.style.width="",e.style.height="",s.call(this,e),a.call(this,e);var o=this.getClassList();for(n.call(this,e),i=0;i<o.length;i++)e.classList.remove(o[i]);if(this.elementClass)if(this.elementClass instanceof Array)for(i=0;i<this.elementClass.length;i++)e.classList.remove(this.elementClass[i]);else e.classList.remove(this.elementClass);this.detach(e),this._currentTarget=null,t.deallocate(e)},e.prototype.deploy=function(t){var i=this.getContent();if(i instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}else t.innerHTML=i},e.prototype.recall=function(t){for(var i=document.createDocumentFragment();t.hasChildNodes();)i.appendChild(t.firstChild);this.setContent(i)},e.prototype.getSize=function(){return this._size?this._size:this.size},e.prototype.setSize=function(t){return this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0,this},i.exports=e},{"./ElementOutput":3}],15:[function(t,i){function e(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function n(t){return Math.sqrt(e(t))}function o(t){return 0>t?-1:1}var s={};s.precision=1e-6,s.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s.multiply4x4=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15]]},s.multiply=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2],t[1]*i[0]+t[5]*i[1]+t[9]*i[2],t[2]*i[0]+t[6]*i[1]+t[10]*i[2],0,t[0]*i[4]+t[4]*i[5]+t[8]*i[6],t[1]*i[4]+t[5]*i[5]+t[9]*i[6],t[2]*i[4]+t[6]*i[5]+t[10]*i[6],0,t[0]*i[8]+t[4]*i[9]+t[8]*i[10],t[1]*i[8]+t[5]*i[9]+t[9]*i[10],t[2]*i[8]+t[6]*i[9]+t[10]*i[10],0,t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],1]
},s.thenMove=function(t,i){return i[2]||(i[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]},s.moveThen=function(t,i){t[2]||(t[2]=0);var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],n=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],o=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return s.thenMove(i,[e,n,o])},s.translate=function(t,i,e){return void 0===e&&(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]},s.thenScale=function(t,i){return[i[0]*t[0],i[1]*t[1],i[2]*t[2],0,i[0]*t[4],i[1]*t[5],i[2]*t[6],0,i[0]*t[8],i[1]*t[9],i[2]*t[10],0,i[0]*t[12],i[1]*t[13],i[2]*t[14],1]},s.scale=function(t,i,e){return void 0===e&&(e=1),void 0===i&&(i=t),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]},s.rotateX=function(t){var i=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]},s.rotateY=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]},s.rotateZ=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]},s.rotate=function(t,i,e){var n=Math.cos(t),o=Math.sin(t),s=Math.cos(i),r=Math.sin(i),a=Math.cos(e),h=Math.sin(e),c=[s*a,n*h+o*r*a,o*h-n*r*a,0,-s*h,n*a-o*r*h,o*a+n*r*h,0,r,-o*s,n*s,0,0,0,0,1];return c},s.rotateAxis=function(t,i){var e=Math.sin(i),n=Math.cos(i),o=1-n,s=t[0]*t[0]*o,r=t[0]*t[1]*o,a=t[0]*t[2]*o,h=t[1]*t[1]*o,c=t[1]*t[2]*o,p=t[2]*t[2]*o,u=t[0]*e,l=t[1]*e,f=t[2]*e,d=[s+n,r+f,a-l,0,r-f,h+n,c+u,0,a+l,c-u,p+n,0,0,0,0,1];return d},s.aboutOrigin=function(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]),n=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]),o=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return s.thenMove(i,[e,n,o])},s.skew=function(t,i,e){return[1,Math.tan(i),0,0,Math.tan(e),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},s.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},s.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},s.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},s.getTranslate=function(t){return[t[12],t[13],t[14]]},s.inverse=function(t){var i=t[5]*t[10]-t[6]*t[9],e=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],o=t[1]*t[10]-t[2]*t[9],s=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],h=t[0]*t[6]-t[2]*t[4],c=t[0]*t[5]-t[1]*t[4],p=t[0]*i-t[1]*e+t[2]*n,u=1/p,l=[u*i,-u*o,u*a,0,-u*e,u*s,-u*h,0,u*n,-u*r,u*c,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},s.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},s.interpret=function(t){var i=[t[0],t[1],t[2]],r=o(i[0]),a=n(i),h=[i[0]+r*a,i[1],i[2]],c=2/e(h);if(c>=1/0)return{translate:s.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];p[0]=1-c*h[0]*h[0],p[5]=1-c*h[1]*h[1],p[10]=1-c*h[2]*h[2],p[1]=-c*h[0]*h[1],p[2]=-c*h[0]*h[2],p[6]=-c*h[1]*h[2],p[4]=p[1],p[8]=p[2],p[9]=p[6];var u=s.multiply(p,t),l=[u[5],u[6]],f=o(l[0]),d=n(l),_=[l[0]+f*d,l[1]],y=2/e(_),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-y*_[0]*_[0],g[10]=1-y*_[1]*_[1],g[6]=-y*_[0]*_[1],g[9]=g[6];var v=s.multiply(g,p),m=s.multiply(v,t),O=s.scale(m[0]<0?-1:1,m[5]<0?-1:1,m[10]<0?-1:1);m=s.multiply(m,O),v=s.multiply(O,v);var S={};return S.translate=s.getTranslate(t),S.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],S.rotate[0]||(S.rotate[0]=0,S.rotate[2]=Math.atan2(v[4],v[5])),S.scale=[m[0],m[5],m[10]],S.skew=[Math.atan2(m[9],S.scale[2]),Math.atan2(m[8],S.scale[2]),Math.atan2(m[4],S.scale[0])],Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI&&(S.rotate[1]=Math.PI-S.rotate[1],S.rotate[1]>Math.PI&&(S.rotate[1]-=2*Math.PI),S.rotate[1]<-Math.PI&&(S.rotate[1]+=2*Math.PI),S.rotate[0]<0?S.rotate[0]+=Math.PI:S.rotate[0]-=Math.PI,S.rotate[2]<0?S.rotate[2]+=Math.PI:S.rotate[2]-=Math.PI),S},s.average=function(t,i,e){e=void 0===e?.5:e;for(var n=s.interpret(t),o=s.interpret(i),r={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)r.translate[a]=(1-e)*n.translate[a]+e*o.translate[a],r.rotate[a]=(1-e)*n.rotate[a]+e*o.rotate[a],r.scale[a]=(1-e)*n.scale[a]+e*o.scale[a],r.skew[a]=(1-e)*n.skew[a]+e*o.skew[a];return s.build(r)},s.build=function(t){var i=s.scale(t.scale[0],t.scale[1],t.scale[2]),e=s.skew(t.skew[0],t.skew[1],t.skew[2]),n=s.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return s.thenMove(s.multiply(s.multiply(n,e),i),t.translate)},s.equals=function(t,i){return!s.notEquals(t,i)},s.notEquals=function(t,i){return t===i?!1:!(t&&i)||t[12]!==i[12]||t[13]!==i[13]||t[14]!==i[14]||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]},s.normalizeRotation=function(t){var i=t.slice(0);for((i[0]===.5*Math.PI||i[0]===.5*-Math.PI)&&(i[0]=-i[0],i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]>.5*Math.PI&&(i[0]=i[0]-Math.PI,i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]<.5*-Math.PI&&(i[0]=i[0]+Math.PI,i[1]=-Math.PI-i[1],i[2]-=Math.PI);i[1]<-Math.PI;)i[1]+=2*Math.PI;for(;i[1]>=Math.PI;)i[1]-=2*Math.PI;for(;i[2]<-Math.PI;)i[2]+=2*Math.PI;for(;i[2]>=Math.PI;)i[2]-=2*Math.PI;return i},s.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],s.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=s},{}],16:[function(t,i){function e(t){this._node=new s,this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this.options=r.clone(this.constructor.DEFAULT_OPTIONS||e.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var n=t("./EventHandler"),o=t("./OptionsManager"),s=t("./RenderNode"),r=t("../utilities/Utility");e.DEFAULT_OPTIONS={},e.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},e.prototype.setOptions=function(t){this._optionsManager.patch(t)},e.prototype.add=function(){return this._node.add.apply(this._node,arguments)},e.prototype._add=e.prototype.add,e.prototype.render=function(){return this._node.render()},e.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=e},{"../utilities/Utility":95,"./EventHandler":7,"./OptionsManager":10,"./RenderNode":11}],17:[function(t,i){function e(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),void 0!==t.trackSize&&(this._.trackSize=t.trackSize),this._previousNode=null,this._nextNode=null}e.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},e.Backing.prototype.getValue=function(t){var i=t-this.firstIndex;return 0>i||i>=this.array.length?null:this.array[i]},e.Backing.prototype.setValue=function(t,i){this.array[t-this.firstIndex]=i},e.Backing.prototype.getSize=function(t){return this.cumulativeSizes[t]},e.Backing.prototype.calculateSize=function(t){t=t||this.array.length;for(var i=[0,0],e=0;t>e;e++){var n=this.array[e].getSize();if(!n)return void 0;void 0!==i[0]&&(void 0===n[0]?i[0]=void 0:i[0]+=n[0]),void 0!==i[1]&&(void 0===n[1]?i[1]=void 0:i[1]+=n[1]),this.cumulativeSizes[e+1]=i.slice()}return this.sizeDirty=!1,i},e.Backing.prototype.reindex=function(t,i,e){if(this.array[0]){for(var n=0,o=this.firstIndex,s=e-i,r=this.firstNode;t-1>o;)r=r.getNext(),o++;var a=r;for(n=0;i>n;n++)r=r.getNext(),r&&(r._previousNode=a);var h=r?r.getNext():null;for(a._nextNode=null,r=a,n=0;e>n;n++)r=r.getNext();if(o+=e,r!==h&&(r._nextNode=h,h&&(h._previousNode=r)),h)for(r=h,o++;r&&o<this.array.length+this.firstIndex;)r._nextNode?r.index+=s:r.index=o,r=r.getNext(),o++;this.trackSize&&(this.sizeDirty=!0)}},e.prototype.getPrevious=function(){var t=this._.array.length;return t?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+t-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},e.prototype.getNext=function(){var t=this._.array.length;return t?this.index===this._.firstIndex+t-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode},e.prototype.indexOf=function(t){return this._.array.indexOf(t)},e.prototype.getIndex=function(){return this.index},e.prototype.toString=function(){return""+this.index},e.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.splice=function(t,i){var e=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,i].concat(e)),this._.reindex(t,i,e.length)},e.prototype.swap=function(t){var i=t.get(),e=this.get();this._.setValue(this.index,i),this._.setValue(t.index,e);var n=this._previousNode,o=this._nextNode,s=this.index,r=t._previousNode,a=t._nextNode,h=t.index;this.index=h,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=s,t._previousNode=n===t?this:n,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=o===t?this:o,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t),this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.get=function(){return this._.getValue(this.index)},e.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},e.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=e},{}],18:[function(t,i){i.exports={Context:t("./Context"),ElementAllocator:t("./ElementAllocator"),ElementOutput:t("./ElementOutput"),Engine:t("./Engine"),Entity:t("./Entity"),EventEmitter:t("./EventEmitter"),EventHandler:t("./EventHandler"),Group:t("./Group"),Modifier:t("./Modifier"),OptionsManager:t("./OptionsManager"),RenderNode:t("./RenderNode"),Scene:t("./Scene"),SpecParser:t("./SpecParser"),Surface:t("./Surface"),Transform:t("./Transform"),View:t("./View"),ViewSequence:t("./ViewSequence")}},{"./Context":1,"./ElementAllocator":2,"./ElementOutput":3,"./Engine":4,"./Entity":5,"./EventEmitter":6,"./EventHandler":7,"./Group":8,"./Modifier":9,"./OptionsManager":10,"./RenderNode":11,"./Scene":12,"./SpecParser":13,"./Surface":14,"./Transform":15,"./View":16,"./ViewSequence":17}],19:[function(t,i){function e(t){this.dispatchers={},this.currMode=void 0,this.setMode(t)}var n=t("../core/EventHandler");e.prototype.setMode=function(t){if(t!==this.currMode){var i=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].trigger("unpipe"),this.currMode=t,this.dispatchers[t]&&this.dispatchers[t].emit("pipe"),this.emit("change",{from:i,to:t})}},e.prototype.forMode=function(t){return this.dispatchers[t]||(this.dispatchers[t]=new n),this.dispatchers[t]},e.prototype.emit=function(t,i){if(void 0===this.currMode)return!1;i||(i={});var e=this.dispatchers[this.currMode];return e?e.trigger(t,i):void 0},i.exports=e},{"../core/EventHandler":7}],20:[function(t,i){function e(t){n.call(this),this._condition=t}var n=t("../core/EventHandler");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.emit=function(t,i){return this._condition(t,i)?n.prototype.emit.apply(this,arguments):void 0},e.prototype.trigger=e.prototype.emit,i.exports=e},{"../core/EventHandler":7}],21:[function(t,i){function e(t){n.call(this),this._mappingFunction=t}var n=t("../core/EventHandler");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.subscribe=null,e.prototype.unsubscribe=null,e.prototype.emit=function(t,i){var e=this._mappingFunction.apply(this,arguments);e&&e.emit instanceof Function&&e.emit(t,i)},e.prototype.trigger=e.prototype.emit,i.exports=e},{"../core/EventHandler":7}],22:[function(t,i){i.exports={EventArbiter:t("./EventArbiter"),EventFilter:t("./EventFilter"),EventMapper:t("./EventMapper")}},{"./EventArbiter":19,"./EventFilter":20,"./EventMapper":21}],23:[function(t,i){i.exports={events:t("./events"),core:t("./core"),math:t("./math"),inputs:t("./inputs"),physics:t("./physics"),modifiers:t("./modifiers"),surfaces:t("./surfaces"),transitions:t("./transitions"),utilities:t("./utilities"),views:t("./views"),widgets:t("./widgets")}},{"./core":18,"./events":22,"./inputs":36,"./math":42,"./modifiers":47,"./physics":71,"./surfaces":82,"./transitions":92,"./utilities":96,"./views":111,"./widgets":116}],24:[function(t,i){function e(t,i){void 0===i&&(i="update"),this._state=t&&t.get&&t.set?t:new s(t||0),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventInput.on(i,n.bind(this))}function n(t){var i=t.delta,e=this.get();if(i.constructor===e.constructor){var n=i instanceof Array?[e[0]+i[0],e[1]+i[1]]:e+i;this.set(n)}}var o=t("../core/EventHandler"),s=t("../transitions/Transitionable");e.prototype.get=function(){return this._state.get()},e.prototype.set=function(t){this._state.set(t)},i.exports=e},{"../core/EventHandler":7,"../transitions/Transitionable":88}],25:[function(){function t(t){window.addEventListener(t,function(t){return t.stopPropagation(),!1},!0)}var i="ontouchstart"in window;i&&(t("mousedown"),t("mousemove"),t("mouseup"),t("mouseleave"))},{}],26:[function(){!function(){if(window.CustomEvent){var t=300,i=500,e={},n={},o=Date.now;window.addEventListener("touchstart",function(t){for(var i=o(),n=0;n<t.changedTouches.length;n++){var s=t.changedTouches[n];e[s.identifier]=i}}),window.addEventListener("touchmove",function(t){for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i];delete e[n.identifier]}}),window.addEventListener("touchend",function(i){for(var s=o(),r=0;r<i.changedTouches.length;r++){var a=i.changedTouches[r],h=e[a.identifier];if(h&&t>s-h){var c=new window.CustomEvent("click",{bubbles:!0,detail:a});n[s]=i,i.target.dispatchEvent(c)}delete e[a.identifier]}}),window.addEventListener("click",function(t){var e=o();for(var s in n){var r=n[s];i>e-s?t instanceof window.MouseEvent&&t.target===r.target&&t.stopPropagation():delete n[s]}},!0)}}()},{}],27:[function(t,i){function e(t,i){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),i&&this.setOptions(i)}function n(t,i){s[t]&&(this._syncs[t]=new s[t](i),this.pipeSync(t))}var o=t("../core/EventHandler");e.DIRECTION_X=0,e.DIRECTION_Y=1,e.DIRECTION_Z=2;var s={};e.register=function(t){for(var i in t){if(s[i]){if(s[i]===t[i])return;throw new Error("this key is registered to a different sync class")}s[i]=t[i]}},e.prototype.setOptions=function(t){for(var i in this._syncs)this._syncs[i].setOptions(t)},e.prototype.pipeSync=function(t){var i=this._syncs[t];this._eventInput.pipe(i),i.pipe(this._eventOutput)},e.prototype.unpipeSync=function(t){var i=this._syncs[t];this._eventInput.unpipe(i),i.unpipe(this._eventOutput)},e.prototype.addSync=function(t){if(t instanceof Array)for(var i=0;i<t.length;i++)n.call(this,t[i]);else if(t instanceof Object)for(var e in t)n.call(this,e,t[e])},i.exports=e},{"../core/EventHandler":7}],28:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._eventInput=new a,this._eventOutput=new a,a.setInputHandler(this,this._eventInput),a.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",n.bind(this)),this._eventInput.on("mousemove",o.bind(this)),this._eventInput.on("mouseup",s.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",r.bind(this)):this._eventInput.on("mouseleave",s.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._positionHistory=[],this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1,this._documentActive=!1}function n(t){var i,e;this.options.preventDefault&&t.preventDefault();var n=t.clientX,o=t.clientY;this._prevCoord=[n,o],this._prevTime=Date.now(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,i=0,e=0):(this._position=[0,0],i=[0,0],e=[0,0]);var s=this._payload;s.delta=i,s.position=this._position,s.velocity=e,s.clientX=n,s.clientY=o,s.offsetX=t.offsetX,s.offsetY=t.offsetY,this._positionHistory.push({position:s.position.slice?s.position.slice(0):s.position,time:this._prevTime}),this._eventOutput.emit("start",s),this._documentActive=!1}function o(t){if(this._prevCoord){var i=this._prevCoord,n=(this._prevTime,t.clientX),o=t.clientY,s=Date.now(),r=n-i[0],a=o-i[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var h,p,u=Math.max(s-this._positionHistory[0].time,c),l=this.options.scale;this.options.direction===e.DIRECTION_X?(p=l*r,this._position+=p,h=l*(this._position-this._positionHistory[0].position)/u):this.options.direction===e.DIRECTION_Y?(p=l*a,this._position+=p,h=l*(this._position-this._positionHistory[0].position)/u):(p=[l*r,l*a],h=[l*(this._position[0]-this._positionHistory[0].position[0])/u,l*(this._position[1]-this._positionHistory[0].position[1])/u],this._position[0]+=p[0],this._position[1]+=p[1]);var f=this._payload;f.delta=p,f.position=this._position,f.velocity=h,f.clientX=n,f.clientY=o,f.offsetX=t.offsetX,f.offsetY=t.offsetY,this._positionHistory.length===this.options.velocitySampleLength&&this._positionHistory.shift(),this._positionHistory.push({position:f.position.slice?f.position.slice(0):f.position,time:s}),this._eventOutput.emit("update",f),this._prevCoord=[n,o],this._prevTime=s,this._move=!0}}function s(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1,this._positionHistory=[])}function r(t){if(this._down&&this._move&&!this._documentActive){var i=o.bind(this),e=function(t){s.call(this,t),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}.bind(this,t);document.addEventListener("mousemove",i),document.addEventListener("mouseup",e),this._documentActive=!0}}var a=t("../core/EventHandler"),h=t("../core/OptionsManager");e.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0,velocitySampleLength:10,preventDefault:!0},e.DIRECTION_X=0,e.DIRECTION_Y=1;var c=8;e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10}],29:[function(t,i){function e(t){n.call(this),this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),this._displacement=0,this._previousDistance=0}var n=t("./TwoFingerSync"),o=t("../core/OptionsManager");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={scale:1},e.prototype._startUpdate=function(t){this._previousDistance=n.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:n.calculateCenter(this.posA,this.posB)})},e.prototype._moveUpdate=function(t){var i=n.calculateDistance(this.posA,this.posB),e=n.calculateCenter(this.posA,this.posB),o=this.options.scale,s=o*(i-this._previousDistance),r=s/t;this._previousDistance=i,this._displacement+=s,this._eventOutput.emit("update",{delta:s,velocity:r,distance:i,displacement:this._displacement,center:e,touches:[this.touchAId,this.touchBId]})},e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/OptionsManager":10,"./TwoFingerSync":35}],30:[function(t,i){function e(t){n.call(this),this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),this._angle=0,this._previousAngle=0}var n=t("./TwoFingerSync"),o=t("../core/OptionsManager");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={scale:1},e.prototype._startUpdate=function(t){this._angle=0,this._previousAngle=n.calculateAngle(this.posA,this.posB);var i=n.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:t.touches.length,angle:this._angle,center:i,touches:[this.touchAId,this.touchBId]})},e.prototype._moveUpdate=function(t){var i=this.options.scale,e=n.calculateAngle(this.posA,this.posB),o=n.calculateCenter(this.posA,this.posB),s=i*(e-this._previousAngle),r=s/t;this._angle+=s,this._eventOutput.emit("update",{delta:s,velocity:r,angle:this._angle,center:o,touches:[this.touchAId,this.touchBId]}),this._previousAngle=e},e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/OptionsManager":10,"./TwoFingerSync":35}],31:[function(t,i){function e(t){o.call(this),this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t),this._scaleFactor=1,this._startDist=0,this._eventInput.on("pipe",n.bind(this))}function n(){this.touchAId=void 0,this.touchBId=void 0}var o=t("./TwoFingerSync"),s=t("../core/OptionsManager");e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={scale:1},e.prototype._startUpdate=function(t){this._scaleFactor=1,this._startDist=o.calculateDistance(this.posA,this.posB),this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:o.calculateCenter(this.posA,this.posB)})},e.prototype._moveUpdate=function(t){var i=this.options.scale,e=o.calculateDistance(this.posA,this.posB),n=o.calculateCenter(this.posA,this.posB),s=(e-this._startDist)/this._startDist,r=Math.max(1+i*s,0),a=(r-this._scaleFactor)/t;this._eventOutput.emit("update",{delta:s,scale:r,velocity:a,distance:e,center:n,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=r},e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/OptionsManager":10,"./TwoFingerSync":35}],32:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",o.bind(this)),this._eventInput.on("wheel",o.bind(this)),this._inProgress=!1,this._loopBound=!1}function n(){if(this._inProgress&&c()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,i=this._payload;i.position=this._position,i.velocity=t,i.slip=!0,this._eventOutput.emit("end",i)}}function o(t){this.options.preventDefault&&t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,y=this._payload,y.slip=!0,y.position=this._position,y.clientX=t.clientX,y.clientY=t.clientY,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this._eventOutput.emit("start",y),this._loopBound||(r.on("prerender",n.bind(this)),this._loopBound=!0));var i=c(),o=this._prevTime||i,s=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,a=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(s*=this.options.lineHeight,a*=this.options.lineHeight),this.options.rails&&(Math.abs(s)>Math.abs(a)?a=0:s=0);var p,u,l=Math.max(i-o,h),f=s/l,d=a/l,_=this.options.scale;this.options.direction===e.DIRECTION_X?(u=_*s,p=_*f,this._position+=u):this.options.direction===e.DIRECTION_Y?(u=_*a,p=_*d,this._position+=u):(u=[_*s,_*a],p=[_*f,_*d],this._position[0]+=u[0],this._position[1]+=u[1]);var y=this._payload;y.delta=u,y.velocity=p,y.position=this._position,y.slip=!0,this._eventOutput.emit("update",y),this._prevTime=i,this._prevVel=p}var s=t("../core/EventHandler"),r=t("../core/Engine"),a=t("../core/OptionsManager");e.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},e.DIRECTION_X=0,e.DIRECTION_Y=1;var h=8,c=Date.now;e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/Engine":4,"../core/EventHandler":7,"../core/OptionsManager":10}],33:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._eventOutput=new a,this._touchTracker=new r({touchLimit:this.options.touchLimit}),a.setOutputHandler(this,this._eventOutput),a.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",n.bind(this)),this._touchTracker.on("trackmove",o.bind(this)),this._touchTracker.on("trackend",s.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function n(t){var i,e;void 0!==this.options.direction?(this._position=0,i=0,e=0):(this._position=[0,0],i=[0,0],e=[0,0]);var n=this._payload;n.delta=e,n.position=this._position,n.velocity=i,n.clientX=t.x,n.clientY=t.y,n.count=t.count,n.touch=t.identifier,this._eventOutput.emit("start",n)}function o(t){var i=t.history,n=i[i.length-1],o=i[i.length-2],s=i[i.length-this.options.velocitySampleLength]?i[i.length-this.options.velocitySampleLength]:i[i.length-2],r=s.timestamp,a=n.timestamp,h=n.x-o.x,p=n.y-o.y,u=n.x-s.x,l=n.y-s.y;this.options.rails&&(Math.abs(h)>Math.abs(p)?p=0:h=0,Math.abs(u)>Math.abs(l)?l=0:u=0);var f,d,_=Math.max(a-r,c),y=u/_,g=l/_,v=this.options.scale;this.options.direction===e.DIRECTION_X?(d=v*h,f=v*y,this._position+=d):this.options.direction===e.DIRECTION_Y?(d=v*p,f=v*g,this._position+=d):(d=[v*h,v*p],f=[v*y,v*g],this._position[0]+=d[0],this._position[1]+=d[1]);var m=this._payload;m.delta=d,m.velocity=f,m.position=this._position,m.clientX=t.x,m.clientY=t.y,m.count=t.count,m.touch=t.identifier,this._eventOutput.emit("update",m)}function s(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var r=t("./TouchTracker"),a=t("../core/EventHandler"),h=t("../core/OptionsManager");e.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},e.DIRECTION_X=0,e.DIRECTION_Y=1;var c=8;e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.getOptions=function(){return this.options},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"./TouchTracker":34}],34:[function(t,i){function e(t,i,e){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:i.origin,timestamp:c(),count:i.touches.length,history:e}}function n(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i],o=e(n,t,null);this.eventOutput.emit("trackstart",o),this.selective||this.touchHistory[n.identifier]||this.track(o)}}}function o(t){if(!(t.touches.length>this.touchLimit))for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i],o=this.touchHistory[n.identifier];if(o){var s=e(n,t,o);this.touchHistory[n.identifier].push(s),this.eventOutput.emit("trackmove",s)}}}function s(t){if(this.isTouched){for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i],o=this.touchHistory[n.identifier];if(o){var s=e(n,t,o);this.eventOutput.emit("trackend",s),delete this.touchHistory[n.identifier]}}this.isTouched=!1}}function r(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:i[i.length-1].touch,timestamp:Date.now(),count:0,history:i}),delete this.touchHistory[t]}}function a(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new h,this.eventOutput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",n.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",s.bind(this)),this.eventInput.on("touchcancel",s.bind(this)),this.eventInput.on("unpipe",r.bind(this)),this.isTouched=!1}var h=t("../core/EventHandler"),c=Date.now;a.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},i.exports=a},{"../core/EventHandler":7}],35:[function(t,i){function e(){this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var n=t("../core/EventHandler");e.calculateAngle=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.atan2(n,e)},e.calculateDistance=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.sqrt(e*e+n*n)},e.calculateCenter=function(t,i){return[(t[0]+i[0])/2,(t[1]+i[1])/2]};var o=Date.now;e.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAEnabled?this.touchBEnabled||(this.touchBId=e.identifier,this.touchBEnabled=!0,this.posB=[e.pageX,e.pageY],this.timestampB=o(),this._startUpdate(t)):(this.touchAId=e.identifier,this.touchAEnabled=!0,this.posA=[e.pageX,e.pageY],this.timestampA=o())}},e.prototype.handleMove=function(t){if(this.touchAEnabled&&this.touchBEnabled){for(var i,e=this.timestampA,n=this.timestampB,s=0;s<t.changedTouches.length;s++){var r=t.changedTouches[s];r.identifier===this.touchAId?(this.posA=[r.pageX,r.pageY],this.timestampA=o(),i=this.timestampA-e):r.identifier===this.touchBId&&(this.posB=[r.pageX,r.pageY],this.timestampB=o(),i=this.timestampB-n)}i&&this._moveUpdate(i)}},e.prototype.handleEnd=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];(e.identifier===this.touchAId||e.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},i.exports=e},{"../core/EventHandler":7}],36:[function(t,i){i.exports={Accumulator:t("./Accumulator"),DesktopEmulationMode:t("./DesktopEmulationMode"),FastClick:t("./FastClick"),GenericSync:t("./GenericSync"),MouseSync:t("./MouseSync"),PinchSync:t("./PinchSync"),RotateSync:t("./RotateSync"),ScaleSync:t("./ScaleSync"),ScrollSync:t("./ScrollSync"),TouchSync:t("./TouchSync"),TouchTracker:t("./TouchTracker"),TwoFingerSync:t("./TwoFingerSync")}},{"./Accumulator":24,"./DesktopEmulationMode":25,"./FastClick":26,"./GenericSync":27,"./MouseSync":28,"./PinchSync":29,"./RotateSync":30,"./ScaleSync":31,"./ScrollSync":32,"./TouchSync":33,"./TouchTracker":34,"./TwoFingerSync":35}],37:[function(t,i){function e(t){return this.values=t||[[1,0,0],[0,1,0],[0,0,1]],this}var n=t("./Vector"),o=new e,s=new n;
e.prototype.get=function(){return this.values},e.prototype.set=function(t){this.values=t},e.prototype.vectorMultiply=function(t){var i=this.get(),e=t.x,n=t.y,o=t.z,r=i[0],a=i[1],h=i[2],c=r[0],p=r[1],u=r[2],l=a[0],f=a[1],d=a[2],_=h[0],y=h[1],g=h[2];return s.setXYZ(c*e+p*n+u*o,l*e+f*n+d*o,_*e+y*n+g*o)},e.prototype.multiply=function(t){for(var i=this.get(),e=[[]],n=0;3>n;n++){e[n]=[];for(var s=0;3>s;s++){for(var r=0,a=0;3>a;a++)r+=i[n][a]*t[a][s];e[n][s]=r}}return o.set(e)},e.prototype.transpose=function(){for(var t=[],i=this.get(),e=0;3>e;e++)for(var n=0;3>n;n++)t[e][n]=i[n][e];return o.set(t)},e.prototype.clone=function(){for(var t=this.get(),i=[],n=0;3>n;n++)i[n]=t[n].slice();return new e(i)},i.exports=e},{"./Vector":41}],38:[function(t,i){function e(t,i,e,n){return 1===arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=void 0!==i?i:0,this.y=void 0!==e?e:0,this.z=void 0!==n?n:0),this}var n=t("./Matrix"),o=new e(1,0,0,0);e.prototype.add=function(t){return o.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.sub=function(t){return o.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},e.prototype.scalarMultiply=function(t){return o.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},e.prototype.multiply=function(t){var i=this.x,e=this.y,n=this.z,s=this.w,r=t.x,a=t.y,h=t.z,c=t.w||0;return o.setWXYZ(s*c-i*r-e*a-n*h,i*c+r*s+a*n-e*h,e*c+a*s+i*h-r*n,n*c+h*s+r*e-i*a)};var s=new e(1,0,0,0);e.prototype.rotateVector=function(t){return s.set(this.conj()),o.set(this.multiply(t).multiply(s))},e.prototype.inverse=function(){return o.set(this.conj().scalarDivide(this.normSquared()))},e.prototype.negate=function(){return this.scalarMultiply(-1)},e.prototype.conj=function(){return o.setWXYZ(this.w,-this.x,-this.y,-this.z)},e.prototype.normalize=function(t){return t=void 0===t?1:t,this.scalarDivide(t*this.norm())},e.prototype.makeFromAngleAndAxis=function(t,i){var e=i.normalize(),n=.5*t,o=-Math.sin(n);return this.x=o*e.x,this.y=o*e.y,this.z=o*e.z,this.w=Math.cos(n),this},e.prototype.setWXYZ=function(t,i,e,n){return o.clear(),this.w=t,this.x=i,this.y=e,this.z=n,this},e.prototype.set=function(t){return t instanceof Array?(this.w=0,this.x=t[0],this.y=t[1],this.z=t[2]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==o&&o.clear(),this},e.prototype.put=function(t){t.set(o)},e.prototype.clone=function(){return new e(this)},e.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},e.prototype.isEqual=function(t){return t.w===this.w&&t.x===this.x&&t.y===this.y&&t.z===this.z},e.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.normSquared=function(){return this.dot(this)},e.prototype.norm=function(){return Math.sqrt(this.normSquared())},e.prototype.isZero=function(){return!(this.x||this.y||this.z)},e.prototype.getTransform=function(){var t=this.normalize(1),i=t.x,e=t.y,n=t.z,o=t.w;return[1-2*e*e-2*n*n,2*i*e-2*n*o,2*i*n+2*e*o,0,2*i*e+2*n*o,1-2*i*i-2*n*n,2*e*n-2*i*o,0,2*i*n-2*e*o,2*e*n+2*i*o,1-2*i*i-2*e*e,0,0,0,0,1]};var r=new n;e.prototype.getMatrix=function(){var t=this.normalize(1),i=t.x,e=t.y,n=t.z,o=t.w;return r.set([[1-2*e*e-2*n*n,2*i*e+2*n*o,2*i*n-2*e*o],[2*i*e-2*n*o,1-2*i*i-2*n*n,2*e*n+2*i*o],[2*i*n+2*e*o,2*e*n-2*i*o,1-2*i*i-2*e*e]])};var a=1e-5;e.prototype.slerp=function(t,i){var e,n,s,r,h;return n=this.dot(t),1-n>a?(e=Math.acos(n),s=Math.sin(e),r=Math.sin((1-i)*e)/s,h=Math.sin(i*e)/s):(r=1-i,h=i),o.set(this.scalarMultiply(r/h).add(t).multiply(h))},i.exports=e},{"./Matrix":37}],39:[function(t,i){function e(t,i){return t+o()*(i-t)}function n(t,i){return t+o()*(i-t+1)>>0}var o=Math.random,s={};s.integer=function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var o=[],s=0;e>s;s++)o.push(n(t,i));return o}return n(t,i)},s.range=function(t,i,n){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==n){for(var o=[],s=0;n>s;s++)o.push(e(t,i));return o}return e(t,i)},s.sign=function(t){return t=void 0!==t?t:.5,o()<t?1:-1},s.bool=function(t){return t=void 0!==t?t:.5,o()<t},i.exports=s},{}],40:[function(t,i){var e={};e.clamp=function(t,i){return Math.max(Math.min(t,i[1]),i[0])},e.length=function(t){for(var i=0,e=0;e<t.length;e++)i+=t[e]*t[e];return Math.sqrt(i)},i.exports=e},{}],41:[function(t,i){function e(t,i,e){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}function n(t,i,e){return this.x=t,this.y=i,this.z=e,this}function o(t){return n.call(this,t[0],t[1],t[2]||0)}function s(t){return n.call(this,t.x,t.y,t.z)}function r(t){return n.call(this,t,0,0)}var a=new e(0,0,0);e.prototype.add=function(t){return n.call(a,this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.sub=function(t){return n.call(a,this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.mult=function(t){return n.call(a,t*this.x,t*this.y,t*this.z)},e.prototype.div=function(t){return this.mult(1/t)},e.prototype.cross=function(t){var i=this.x,e=this.y,o=this.z,s=t.x,r=t.y,h=t.z;return n.call(a,o*r-e*h,i*h-o*s,e*s-i*r)},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},e.prototype.rotateX=function(t){var i=this.x,e=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(a,i,e*s-o*r,e*r+o*s)},e.prototype.rotateY=function(t){var i=this.x,e=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(a,o*r+i*s,e,o*s-i*r)},e.prototype.rotateZ=function(t){var i=this.x,e=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(a,i*s-e*r,i*r+e*s,o)},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.normSquared=function(){return this.dot(this)},e.prototype.norm=function(){return Math.sqrt(this.normSquared())},e.prototype.normalize=function(t){0===arguments.length&&(t=1);var i=this.norm();return i>1e-7?s.call(a,this.mult(t/i)):n.call(a,t,0,0)},e.prototype.clone=function(){return new e(this)},e.prototype.isZero=function(){return!(this.x||this.y||this.z)},e.prototype.set=function(t){return t instanceof Array?o.call(this,t):"number"==typeof t?r.call(this,t):s.call(this,t)},e.prototype.setXYZ=function(){return n.apply(this,arguments)},e.prototype.set1D=function(t){return r.call(this,t)},e.prototype.put=function(t){this===a?s.call(t,a):s.call(t,this)},e.prototype.clear=function(){return n.call(this,0,0,0)},e.prototype.cap=function h(h){if(1/0===h)return s.call(a,this);var t=this.norm();return t>h?s.call(a,this.mult(h/t)):s.call(a,this)},e.prototype.project=function(t){return t.mult(this.dot(t))},e.prototype.reflectAcross=function(t){return t.normalize().put(t),s(a,this.sub(this.project(t).mult(2)))},e.prototype.get=function(){return[this.x,this.y,this.z]},e.prototype.get1D=function(){return this.x},i.exports=e},{}],42:[function(t,i){i.exports={Matrix:t("./Matrix"),Quaternion:t("./Quaternion"),Random:t("./Random"),Utilities:t("./Utilities"),Vector:t("./Vector")}},{"./Matrix":37,"./Quaternion":38,"./Random":39,"./Utilities":40,"./Vector":41}],43:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new c([0,0]),this._differential=[0,0],this._active=!0,this.sync=new l(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new p,p.setInputHandler(this,this.sync),p.setOutputHandler(this,this.eventOutput),a.call(this)}function n(t){var i=this.options,e=i.projection,n=i.snapX,o=i.snapY,s=e&_.x?t[0]:0,r=e&_.y?t[1]:0;return n>0&&(s-=s%n),o>0&&(r-=r%o),[s,r]}function o(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function s(t){if(this._active){var i=this.options;this._differential=t.position;var e=n.call(this,this._differential);this._differential[0]-=e[0],this._differential[1]-=e[1];var o=this.getPosition();if(o[0]+=e[0],o[1]+=e[1],i.xRange){var s=[i.xRange[0]+.5*i.snapX,i.xRange[1]-.5*i.snapX];o[0]=y(o[0],s)}if(i.yRange){var r=[i.yRange[0]+.5*i.snapY,i.yRange[1]-.5*i.snapY];o[1]=y(o[1],r)}this.eventOutput.emit("update",{position:o})}}function r(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function a(){this.sync.on("start",o.bind(this)),this.sync.on("update",s.bind(this)),this.sync.on("end",r.bind(this))}var h=t("../core/Transform"),c=t("../transitions/Transitionable"),p=t("../core/EventHandler"),u=t("../math/Utilities"),l=t("../inputs/GenericSync"),f=t("../inputs/MouseSync"),d=t("../inputs/TouchSync");l.register({mouse:f,touch:d});var _={x:1,y:2};e.DIRECTION_X=_.x,e.DIRECTION_Y=_.y;var y=u.clamp;e.DEFAULT_OPTIONS={projection:_.x|_.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},e.prototype.setOptions=function(t){var i=this.options;if(void 0!==t.projection){var e=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!==e.indexOf(t)&&(i.projection|=_[t])})}void 0!==t.scale&&(i.scale=t.scale,this.sync.setOptions({scale:t.scale})),void 0!==t.xRange&&(i.xRange=t.xRange),void 0!==t.yRange&&(i.yRange=t.yRange),void 0!==t.snapX&&(i.snapX=t.snapX),void 0!==t.snapY&&(i.snapY=t.snapY)},e.prototype.getPosition=function(){return this._positionState.get()},e.prototype.setRelativePosition=function(t,i,e){var n=this.getPosition(),o=[n[0]+t[0],n[1]+t[1]];this.setPosition(o,i,e)},e.prototype.setPosition=function(t,i,e){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,i,e)},e.prototype.activate=function(){this._active=!0},e.prototype.deactivate=function(){this._active=!1},e.prototype.toggle=function(){this._active=!this._active},e.prototype.modify=function(t){var i=this.getPosition();return{transform:h.translate(i[0],i[1]),target:t}},i.exports=e},{"../core/EventHandler":7,"../core/Transform":15,"../inputs/GenericSync":27,"../inputs/MouseSync":28,"../inputs/TouchSync":33,"../math/Utilities":40,"../transitions/Transitionable":88}],44:[function(t,i){function e(t,i){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),i||(i=0),this.transitionHelper=new n(i)}var n=t("../transitions/Transitionable"),o=t("../core/OptionsManager");e.DEFAULT_OPTIONS={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.show=function(t,i){t=t||this.options.transition,this.set(1,t,i)},e.prototype.hide=function(t,i){t=t||this.options.transition,this.set(0,t,i)},e.prototype.set=function(t,i,e){this.halt(),this.transitionHelper.set(t,i,e)},e.prototype.halt=function(){this.transitionHelper.halt()},e.prototype.isVisible=function(){return this.transitionHelper.get()>0},e.prototype.modify=function(t){var i=this.transitionHelper.get();return this.options.cull&&!i?void 0:{opacity:i,target:t}},i.exports=e},{"../core/OptionsManager":10,"../transitions/Transitionable":88}],45:[function(t,i){function e(){this._chain=[],arguments.length&&this.addModifier.apply(this,arguments)}e.prototype.addModifier=function(){Array.prototype.push.apply(this._chain,arguments)},e.prototype.removeModifier=function(t){var i=this._chain.indexOf(t);0>i||this._chain.splice(i,1)},e.prototype.modify=function(t){for(var i=this._chain,e=t,n=0;n<i.length;n++)e=i[n].modify(e);return e},i.exports=e},{}],46:[function(t,i){function e(t){this._transformState=new r(o.identity),this._opacityState=new s(1),this._originState=new s([0,0]),this._alignState=new s([0,0]),this._sizeState=new s([0,0]),this._proportionsState=new s([0,0]),this._modifier=new n({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null,proportions:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,this._hasProportions=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size),t.proportions&&this.setProportions(t.proportions))}var n=t("../core/Modifier"),o=t("../core/Transform"),s=t("../transitions/Transitionable"),r=t("../transitions/TransitionableTransform");e.prototype.setTransform=function(t,i,e){return this._transformState.set(t,i,e),this},e.prototype.setOpacity=function(t,i,e){return this._opacityState.set(t,i,e),this},e.prototype.setOrigin=function(t,i,e){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,i,e),this)},e.prototype.setAlign=function(t,i,e){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,i,e),this)},e.prototype.setSize=function(t,i,e){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,i,e),this)},e.prototype.setProportions=function(t,i,e){return null===t?(this._hasProportions&&(this._modifier.proportionsFrom(null),this._hasProportions=!1),this):(this._hasProportions||(this._hasProportions=!0,this._modifier.proportionsFrom(this._proportionsState)),this._proportionsState.set(t,i,e),this)},e.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt(),this._proportionsState.halt()},e.prototype.getTransform=function(){return this._transformState.get()},e.prototype.getFinalTransform=function(){return this._transformState.getFinal()},e.prototype.getOpacity=function(){return this._opacityState.get()},e.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},e.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},e.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},e.prototype.getProportions=function(){return this._hasProportions?this._proportionsState.get():null},e.prototype.modify=function(t){return this._modifier.modify(t)},i.exports=e},{"../core/Modifier":9,"../core/Transform":15,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89}],47:[function(t,i){i.exports={Draggable:t("./Draggable"),Fader:t("./Fader"),ModifierChain:t("./ModifierChain"),StateModifier:t("./StateModifier")}},{"./Draggable":43,"./Fader":44,"./ModifierChain":45,"./StateModifier":46}],48:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=S(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function n(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,i,e){return void 0===i&&(i=this.getParticlesAndBodies()),i instanceof Array||(i=[i]),t.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:t,id:this._currAgentId,targets:i,source:e},n.call(this,t).push(this._currAgentId),this._currAgentId++}function s(t){return this._agentData[t]}function r(t){var i=s.call(this,this._forces[t]);i.agent.applyForce(i.targets,i.source)}function a(){for(var t=this._forces.length-1;t>-1;t--)r.call(this,t)}function h(t,i){var e=this._agentData[this._constraints[t]];return e.agent.applyConstraint(e.targets,e.source,i)}function c(t){for(var i=0;i<this.options.constraintSteps;){for(var e=this._constraints.length-1;e>-1;e--)h.call(this,e,t);i++}}function p(t,i){t.integrateVelocity(i),this.options.velocityCap&&t.velocity.cap(this.options.velocityCap).put(t.velocity)}function u(t,i){t.integrateAngularMomentum(i),t.updateAngularVelocity(),this.options.angularVelocityCap&&t.angularVelocity.cap(this.options.angularVelocityCap).put(t.angularVelocity)}function l(t,i){t.integrateOrientation(i)}function f(t,i){t.integratePosition(i),t.emit(T.update,t)}function d(t){a.call(this,t),this.forEach(p,t),this.forEachBody(u,t),c.call(this,t),this.forEachBody(l,t),this.forEach(f,t)}function _(){var t=0,i=0;return this.forEach(function(e){i=e.getEnergy(),t+=i}),t}function y(){var t=0;for(var i in this._agentData)t+=this.getAgentEnergy(i);return t}var g=t("../core/EventHandler"),v=17,m=1e3/120,O=17,S=Date.now,T={start:"start",update:"update",end:"end"};e.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},e.prototype.setOptions=function(t){for(var i in t)this.options[i]&&(this.options[i]=t[i])},e.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t.on("start",this.wake.bind(this)),t},e.prototype.removeBody=function(t){var i=t.isBody?this._bodies:this._particles,e=i.indexOf(t);if(e>-1){for(var n in this._agentData)this.detachFrom(n.id,t);i.splice(e,1)}0===this.getBodies().length&&(this._hasBodies=!1)},e.prototype.attach=function(t,i,e){if(this.wake(),t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],i,e);return n}return o.call(this,t,i,e)},e.prototype.attachTo=function(t,i){s.call(this,t).targets.push(i)},e.prototype.detach=function(t){var i=this.getAgent(t),e=n.call(this,i),o=e.indexOf(t);e.splice(o,1),delete this._agentData[t]},e.prototype.detachFrom=function(t,i){var e=s.call(this,t);if(e.source===i)this.detach(t);else{var n=e.targets,o=n.indexOf(i);o>-1&&n.splice(o,1)}},e.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},e.prototype.getAgent=function(t){return s.call(this,t).agent},e.prototype.getParticles=function(){return this._particles},e.prototype.getBodies=function(){return this._bodies},e.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},e.prototype.forEachParticle=function(t,i){for(var e=this.getParticles(),n=0,o=e.length;o>n;n++)t.call(this,e[n],i)},e.prototype.forEachBody=function(t,i){if(this._hasBodies)for(var e=this.getBodies(),n=0,o=e.length;o>n;n++)t.call(this,e[n],i)},e.prototype.forEach=function(t,i){this.forEachParticle(t,i),this.forEachBody(t,i)},e.prototype.getAgentEnergy=function(t){var i=s.call(this,t);return i.agent.getEnergy(i.targets,i.source)},e.prototype.getEnergy=function(){return _.call(this)+y.call(this)},e.prototype.step=function(){if(!this.isSleeping()){var t=S(),i=t-this._prevTime;this._prevTime=t,m>i||(i>O&&(i=O),d.call(this,v),this.emit(T.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},e.prototype.isSleeping=function(){return this._isSleeping},e.prototype.isActive=function(){return!this._isSleeping},e.prototype.sleep=function(){this._isSleeping||(this.forEach(function(t){t.sleep()}),this.emit(T.end,this),this._isSleeping=!0)},e.prototype.wake=function(){this._isSleeping&&(this._prevTime=S(),this.emit(T.start,this),this._isSleeping=!1)},e.prototype.emit=function(t,i){null!==this._eventHandler&&this._eventHandler.emit(t,i)},e.prototype.on=function(t,i){null===this._eventHandler&&(this._eventHandler=new g),this._eventHandler.on(t,i)},i.exports=e},{"../core/EventHandler":7}],49:[function(t,i){function e(t){n.call(this,t),t=t||{},this.orientation=new r,this.angularVelocity=new s,this.angularMomentum=new s,this.torque=new s,t.orientation&&this.orientation.set(t.orientation),t.angularVelocity&&this.angularVelocity.set(t.angularVelocity),t.angularMomentum&&this.angularMomentum.set(t.angularMomentum),t.torque&&this.torque.set(t.torque),this.angularVelocity.w=0,this.setMomentsOfInertia(),this.pWorld=new s}var n=t("./Particle"),o=t("../../core/Transform"),s=t("../../math/Vector"),r=t("../../math/Quaternion"),a=t("../../math/Matrix"),h=t("../integrators/SymplecticEuler");e.DEFAULT_OPTIONS=n.DEFAULT_OPTIONS,e.DEFAULT_OPTIONS.orientation=[0,0,0,1],e.DEFAULT_OPTIONS.angularVelocity=[0,0,0],e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.isBody=!0,e.prototype.setMass=function(){n.prototype.setMass.apply(this,arguments),this.setMomentsOfInertia()},e.prototype.setMomentsOfInertia=function(){this.inertia=new a,this.inverseInertia=new a},e.prototype.updateAngularVelocity=function(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))},e.prototype.toWorldCoordinates=function(t){return this.pWorld.set(this.orientation.rotateVector(t))},e.prototype.getEnergy=function(){return n.prototype.getEnergy.call(this)+.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)},e.prototype.reset=function(t,i,e,o){n.prototype.reset.call(this,t,i),this.angularVelocity.clear(),this.setOrientation(e||[1,0,0,0]),this.setAngularMomentum(o||[0,0,0])},e.prototype.setOrientation=function(t){this.orientation.set(t)},e.prototype.setAngularVelocity=function(t){this.wake(),this.angularVelocity.set(t)},e.prototype.setAngularMomentum=function(t){this.wake(),this.angularMomentum.set(t)},e.prototype.applyForce=function(t,i){n.prototype.applyForce.call(this,t),void 0!==i&&this.applyTorque(i.cross(t))},e.prototype.applyTorque=function(t){this.wake(),this.torque.set(this.torque.add(t))},e.prototype.getTransform=function(){return o.thenMove(this.orientation.getTransform(),o.getTranslate(n.prototype.getTransform.call(this)))},e.prototype._integrate=function(t){n.prototype._integrate.call(this,t),this.integrateAngularMomentum(t),this.updateAngularVelocity(t),this.integrateOrientation(t)},e.prototype.integrateAngularMomentum=function(t){h.integrateAngularMomentum(this,t)},e.prototype.integrateOrientation=function(t){h.integrateOrientation(this,t)},i.exports=e},{"../../core/Transform":15,"../../math/Matrix":37,"../../math/Quaternion":38,"../../math/Vector":41,"../integrators/SymplecticEuler":72,"./Particle":51}],50:[function(t,i){function e(t){t=t||{},this.setRadius(t.radius||0),n.call(this,t)}var n=t("./Body"),o=t("../../math/Matrix");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.setRadius=function(t){this.radius=t,this.size=[2*this.radius,2*this.radius],this.setMomentsOfInertia()},e.prototype.setMomentsOfInertia=function(){var t=this.mass,i=this.radius;this.inertia=new o([[.25*t*i*i,0,0],[0,.25*t*i*i,0],[0,0,.5*t*i*i]]),this.inverseInertia=new o([[4/(t*i*i),0,0],[0,4/(t*i*i),0],[0,0,2/(t*i*i)]])},i.exports=e},{"../../math/Matrix":37,"./Body":49}],51:[function(t,i){function e(t){t=t||{};var i=e.DEFAULT_OPTIONS;this.position=new o,this.velocity=new o,this.force=new o,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==t.mass?t.mass:i.mass,this.inverseMass=1/this.mass,this.setPosition(t.position||i.position),this.setVelocity(t.velocity||i.velocity),this.force.set(t.force||[0,0,0]),this.transform=s.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function n(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var o=t("../../math/Vector"),s=t("../../core/Transform"),r=t("../../core/EventHandler"),a=t("../integrators/SymplecticEuler");e.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var h={start:"start",update:"update",end:"end"},c=Date.now;e.prototype.isBody=!1,e.prototype.isActive=function(){return!this._isSleeping},e.prototype.sleep=function(){this._isSleeping||(this.emit(h.end,this),this._isSleeping=!0)},e.prototype.wake=function(){this._isSleeping&&(this.emit(h.start,this),this._isSleeping=!1,this._prevTime=c(),this._engine&&this._engine.wake())},e.prototype.setPosition=function(t){this.position.set(t)},e.prototype.setPosition1D=function(t){this.position.x=t},e.prototype.getPosition=function(){return this._engine.step(),this.position.get()},e.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},e.prototype.setVelocity=function(t){this.velocity.set(t),(0!==t[0]||0!==t[1]||0!==t[2])&&this.wake()},e.prototype.setVelocity1D=function(t){this.velocity.x=t,0!==t&&this.wake()},e.prototype.getVelocity=function(){return this.velocity.get()},e.prototype.setForce=function(t){this.force.set(t),this.wake()},e.prototype.getVelocity1D=function(){return this.velocity.x},e.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},e.prototype.getMass=function(){return this.mass},e.prototype.reset=function(t,i){this.setPosition(t||[0,0,0]),this.setVelocity(i||[0,0,0])},e.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},e.prototype.applyImpulse=function(t){if(!t.isZero()){var i=this.velocity;i.add(t.mult(this.inverseMass)).put(i)}},e.prototype.integrateVelocity=function(t){a.integrateVelocity(this,t)},e.prototype.integratePosition=function(t){a.integratePosition(this,t)},e.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},e.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},e.prototype.getTransform=function(){this._engine.step();var t=this.position,i=this.transform;return i[12]=t.x,i[13]=t.y,i[14]=t.z,i},e.prototype.modify=function(t){var i=this._spec.target;return i.transform=this.getTransform(),i.target=t,this._spec},e.prototype.emit=function(t,i){this._eventOutput&&this._eventOutput.emit(t,i)},e.prototype.on=function(){return n.call(this),this.on.apply(this,arguments)},e.prototype.removeListener=function(){return n.call(this),this.removeListener.apply(this,arguments)},e.prototype.pipe=function(){return n.call(this),this.pipe.apply(this,arguments)},e.prototype.unpipe=function(){return n.call(this),this.unpipe.apply(this,arguments)},i.exports=e},{"../../core/EventHandler":7,"../../core/Transform":15,"../../math/Vector":41,"../integrators/SymplecticEuler":72}],52:[function(t,i){function e(t){t=t||{},this.size=t.size||[0,0],n.call(this,t)}var n=t("./Body"),o=t("../../math/Matrix");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.setSize=function(t){this.size=t,this.setMomentsOfInertia()},e.prototype.setMomentsOfInertia=function(){var t=this.mass,i=this.size[0],e=this.size[1];this.inertia=new o([[t*e*e/12,0,0],[0,t*i*i/12,0],[0,0,t*(i*i+e*e)/12]]),this.inverseInertia=new o([[12/(t*e*e),0,0],[0,12/(t*i*i),0],[0,0,12/(t*(i*i+e*e))]])},i.exports=e},{"../../math/Matrix":37,"./Body":49}],53:[function(t,i){i.exports={Body:t("./Body"),Circle:t("./Circle"),Particle:t("./Particle"),Rectangle:t("./Rectangle")}},{"./Body":49,"./Circle":50,"./Particle":51,"./Rectangle":52}],54:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.normal=new o,this.pDiff=new o,this.vDiff=new o,this.impulse1=new o,this.impulse2=new o,n.call(this)}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0},e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.prototype.applyConstraint=function(t,i,e){if(void 0!==i)for(var n=i.velocity,o=i.position,s=i.inverseMass,r=i.radius,a=this.options,h=a.drift,c=-a.slop,p=a.restitution,u=this.normal,l=this.pDiff,f=this.vDiff,d=this.impulse1,_=this.impulse2,y=0;y<t.length;y++){var g=t[y];if(g!==i){var v=g.velocity,m=g.position,O=g.inverseMass,S=g.radius;l.set(m.sub(o)),f.set(v.sub(n));var T=l.norm(),w=T-(r+S),b=1/(s+O),E=0;if(0>w){if(u.set(l.normalize()),this._eventOutput){var I={target:g,source:i,overlap:w,normal:u};this._eventOutput.emit("preCollision",I),this._eventOutput.emit("collision",I)}var x=c>=w?((1+p)*u.dot(f)+h/e*(w-c))/(E+e/b):(1+p)*u.dot(f)/(E+e/b);u.mult(e*x).put(d),d.mult(-1).put(_),i.applyImpulse(d),g.applyImpulse(_),this._eventOutput&&this._eventOutput.emit("postCollision",I)}}}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],55:[function(t,i){function e(){this.options=this.options||{},this._eventOutput=new n,n.setOutputHandler(this,this._eventOutput)}var n=t("../../core/EventHandler");e.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},e.prototype.applyConstraint=function(){},e.prototype.getEnergy=function(){return 0},i.exports=e},{"../../core/EventHandler":7}],56:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new o,this.impulse=new o,n.call(this)}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e;var s=1e-7,r=Math.PI;e.DEFAULT_OPTIONS={equation:function(){return 0},plane:function(t,i,e){return e},period:0,dampingRatio:0},e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.prototype.applyConstraint=function(t,i,e){for(var n=this.options,o=this.impulse,a=this.J,h=n.equation,c=n.plane,p=n.dampingRatio,u=n.period,l=0;l<t.length;l++){var f,d,_=t[l],y=_.velocity,g=_.position,v=_.mass;if(0===u)f=0,d=1;else{var m=4*v*r*p/u,O=4*v*r*r/(u*u);f=1/(m+e*O),d=e*O/(m+e*O)}var S=g.x,T=g.y,w=g.z,b=h(S,T,w),E=(h(S+s,g,g)-b)/s,I=(h(S,T+s,g)-b)/s,x=(h(S,T,g+s)-b)/s,M=c(S,T,w),z=(c(S+s,T,w)-M)/s,C=(c(S,T+s,w)-M)/s,P=(c(S,T,w+s)-M)/s;a.setXYZ(E+z,I+C,x+P);var F=d/e*(b+M),D=-(a.dot(y)+F)/(f+e*a.normSquared()/v);o.set(a.mult(e*D)),_.applyImpulse(o)}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],57:[function(t,i){function e(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.impulse=new o,this.normal=new o,this.diffP=new o,this.diffV=new o,n.call(this)}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var s=Math.PI;e.prototype.setOptions=function(t){t.anchor&&(t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof o&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),void 0!==t.minLength&&(this.options.minLength=t.minLength)},e.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new o),this.options.anchor.set(t)},e.prototype.applyConstraint=function(t,i,e){var n,o,r=this.normal,a=this.diffP,h=this.diffV,c=this.impulse,p=this.options,u=p.dampingRatio,l=p.period,f=p.minLength;if(i){var d=i.velocity;n=i.position,o=i.inverseMass}else n=this.options.anchor,o=0;for(var _=this.options.length,y=0;y<t.length;y++){var g=t[y],v=g.velocity,m=g.position,O=g.inverseMass;a.set(m.sub(n)),r.set(a.normalize());var S=a.norm()-_;if(Math.abs(S)<f)return;h.set(i?v.sub(d):v);var T,w,b=1/(O+o);if(0===l)T=0,w=1;else{var E=4*b*s*u/l,I=4*b*s*s/(l*l);T=1/(E+e*I),w=e*I/(E+e*I)}var x=w/e*S,M=-(r.dot(h)+x)/(T+e/b);c.set(r.mult(e*M)),g.applyImpulse(c),i&&i.applyImpulse(c.mult(-1))}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],58:[function(t,i){function e(t){n.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.pDiff=new o,this.vDiff=new o,this.impulse1=new o,this.impulse2=new o}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var s=Math.PI;e.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof o&&(this.options.anchor=t.anchor),t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),n.prototype.setOptions.call(this,t)},e.prototype.getEnergy=function(t,i){for(var e=this.options,n=e.length,o=e.anchor||i.position,r=Math.pow(2*s/e.period,2),a=0,h=0;h<t.length;h++){var c=t[h],p=o.sub(c.position).norm()-n;a+=.5*r*p*p}return a},e.prototype.applyConstraint=function(t,i,e){for(var n=this.options,o=this.pDiff,r=this.vDiff,a=this.impulse1,h=this.impulse2,c=n.length,p=n.anchor||i.position,u=n.period,l=n.dampingRatio,f=0;f<t.length;f++){var d=t[f],_=d.position,y=d.velocity,g=d.mass,v=d.inverseMass;
o.set(_.sub(p));var m,O=o.norm()-c;if(i){var S=i.inverseMass,T=i.velocity;r.set(y.sub(T)),m=1/(v+S)}else r.set(y),m=g;var w,b;if(0===this.options.period)w=0,b=1;else{var E=4*m*s*s/(u*u),I=4*m*s*l/u;b=e*E/(I+e*E),w=1/(I+e*E)}var x=b/e*O;o.normalize(-x).sub(r).mult(e/(w+e/m)).put(a),d.applyImpulse(a),i&&(a.mult(-1).put(h),i.applyImpulse(h))}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],59:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new o,this.impulse=new o,n.call(this)}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={equation:void 0,period:0,dampingRatio:0};var s=1e-7,r=Math.PI;e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.prototype.applyConstraint=function(t,i,e){for(var n=this.impulse,o=this.J,a=this.options,h=a.equation,c=a.dampingRatio,p=a.period,u=0;u<t.length;u++){var l,f,d=t[u],_=d.velocity,y=d.position,g=d.mass;if(0===p)l=0,f=1;else{var v=4*g*r*c/p,m=4*g*r*r/(p*p);l=1/(v+e*m),f=e*m/(v+e*m)}var O=y.x,S=y.y,T=y.z,w=h(O,S,T),b=(h(O+s,y,y)-w)/s,E=(h(O,S+s,y)-w)/s,I=(h(O,S,y+s)-w)/s;o.setXYZ(b,E,I);var x=f/e*w,M=-(o.dot(_)+x)/(l+e*o.normSquared()/g);n.set(o.mult(e*M)),d.applyImpulse(n)}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],60:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.diff=new h,this.impulse=new h,a.call(this)}function n(t,i){return i.dot(t)}function o(t){var i=this.options.normal,e=this.options.distance;return t.dot(i)+e}function s(t,i,n){var o=t.position,s=t.velocity,r=t.mass,a=this.options.normal,h=this.options.onContact,c=this.options.restitution,p=this.impulse,u=this.options.drift,l=-this.options.slop,f=0;if(this._eventOutput){var d={particle:t,wall:this,overlap:i,normal:a};this._eventOutput.emit("preCollision",d),this._eventOutput.emit("collision",d)}switch(h){case e.ON_CONTACT.REFLECT:var _=l>i?-((1+c)*a.dot(s)+u/n*(i-l))/(r*n+f):-((1+c)*a.dot(s))/(r*n+f);p.set(a.mult(n*_)),t.applyImpulse(p),t.setPosition(o.add(a.mult(-i)))}this._eventOutput&&this._eventOutput.emit("postCollision",d)}function r(t,i){var n=this.options.onContact,o=t.position,s=this.options.normal;n===e.ON_CONTACT.REFLECT&&t.setPosition(o.add(s.mult(-i)))}var a=t("./Constraint"),h=t("../../math/Vector");e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e.ON_CONTACT={REFLECT:0,SILENT:1},e.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:e.ON_CONTACT.REFLECT},e.prototype.setOptions=function(t){void 0!==t.normal&&(t.normal instanceof h&&(this.options.normal=t.normal.clone()),t.normal instanceof Array&&(this.options.normal=new h(t.normal))),void 0!==t.restitution&&(this.options.restitution=t.restitution),void 0!==t.drift&&(this.options.drift=t.drift),void 0!==t.slop&&(this.options.slop=t.slop),void 0!==t.distance&&(this.options.distance=t.distance),void 0!==t.onContact&&(this.options.onContact=t.onContact)},e.prototype.applyConstraint=function(t,i,e){for(var a=this.options.normal,h=0;h<t.length;h++){var c=t[h],p=c.position,u=c.velocity,l=c.radius||0,f=o.call(this,p.add(a.mult(-l))),d=n.call(this,a,u);0>=f&&(0>d?s.call(this,c,f,e):r.call(this,c,f,e))}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],61:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),o.call(this,t.sides||this.options.sides),r.call(this)}function n(t,i,n){var o,s=e.SIDES;switch(parseInt(t)){case s.LEFT:o=i[0]*n[0];break;case s.TOP:o=i[1]*n[1];break;case s.FRONT:o=i[2]*n[2];break;case s.RIGHT:o=i[0]*(1-n[0]);break;case s.BOTTOM:o=i[1]*(1-n[1]);break;case s.BACK:o=i[2]*(1-n[2])}return o}function o(t){this.components={};for(var i=this.components,e=0;e<t.length;e++){var o=t[e];i[e]=new a({normal:c[o].clone(),distance:n(o,this.options.size,this.options.origin)})}}function s(t){this.forEach(function(i){i.setOptions(t)});for(var i in t)this.options[i]=t[i]}var r=t("./Constraint"),a=t("./Wall"),h=t("../../math/Vector");e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.ON_CONTACT=a.ON_CONTACT,e.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]},e.DEFAULT_OPTIONS={sides:e.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],drift:.5,slop:0,restitution:.5,onContact:e.ON_CONTACT.REFLECT};var c={0:new h(1,0,0),1:new h(-1,0,0),2:new h(0,1,0),3:new h(0,-1,0),4:new h(0,0,1),5:new h(0,0,-1)};e.prototype.setOptions=function(t){var i=!1;void 0!==t.restitution&&s.call(this,{restitution:t.restitution}),void 0!==t.drift&&s.call(this,{drift:t.drift}),void 0!==t.slop&&s.call(this,{slop:t.slop}),void 0!==t.onContact&&s.call(this,{onContact:t.onContact}),void 0!==t.size&&(i=!0),void 0!==t.sides&&(this.options.sides=t.sides),void 0!==t.origin&&(i=!0),i&&this.setSize(t.size,t.origin)},e.prototype.setSize=function(t,i){i=i||this.options.origin,i.length<3&&(i[2]=.5),this.forEach(function(e,o){var s=n(o,t,i);e.setOptions({distance:s})}),this.options.size=t,this.options.origin=i},e.prototype.applyConstraint=function(t,i,e){this.forEach(function(n){n.applyConstraint(t,i,e)})},e.prototype.forEach=function(t){var i=this.options.sides;for(var e in this.sides)t(i[e],e)},e.prototype.rotateZ=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateZ(t).put(e)})},e.prototype.rotateX=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateX(t).put(e)})},e.prototype.rotateY=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateY(t).put(e)})},i.exports=e},{"../../math/Vector":41,"./Constraint":55,"./Wall":60}],62:[function(t,i){i.exports={Collision:t("./Collision"),Constraint:t("./Constraint"),Curve:t("./Curve"),Distance:t("./Distance"),Snap:t("./Snap"),Surface:t("./Surface"),Wall:t("./Wall"),Walls:t("./Walls")}},{"./Collision":54,"./Constraint":55,"./Curve":56,"./Distance":57,"./Snap":58,"./Surface":59,"./Wall":60,"./Walls":61}],63:[function(t,i){function e(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),n.call(this)}var n=t("./Force");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},e.DEFAULT_OPTIONS={strength:.01,forceFunction:e.FORCE_FUNCTIONS.LINEAR},e.prototype.applyForce=function(t){var i,e,n=this.options.strength,o=this.options.forceFunction,s=this.force;for(i=0;i<t.length;i++)e=t[i],o(e.velocity).mult(-n).put(s),e.applyForce(s)},e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},i.exports=e},{"./Force":64}],64:[function(t,i){function e(t){this.force=new n(t),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput)}var n=t("../../math/Vector"),o=t("../../core/EventHandler");e.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},e.prototype.applyForce=function(t){for(var i=t.length;i--;)t[i].applyForce(this.force)},e.prototype.getEnergy=function(){return 0},i.exports=e},{"../../core/EventHandler":7,"../../math/Vector":41}],65:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new o,n.call(this)}var n=t("./Force"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DECAY_FUNCTIONS={LINEAR:function(t,i){return Math.max(1-1/i*t,0)},MORSE:function(t,i){var e=0===i?100:i,n=t+e*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(n/e-1),2),0)},INVERSE:function(t,i){return 1/(1-i+t)},GRAVITY:function(t,i){return 1/(1-i+t*t)}},e.DEFAULT_OPTIONS={strength:1,anchor:void 0,range:[0,1/0],cutoff:0,cap:1/0,decayFunction:e.DECAY_FUNCTIONS.GRAVITY},e.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor)),delete t.anchor);for(var i in t)this.options[i]=t[i]},e.prototype.applyForce=function(t,i){var e=this.options,n=this.force,o=this.disp,s=e.strength,r=e.anchor||i.position,a=e.cap,h=e.cutoff,c=e.range[0],p=e.range[1],u=e.decayFunction;if(0!==s)for(var l,f,d,_,y=t.length;y--;)l=t[y],l!==i&&(f=l.mass,d=l.position,o.set(d.sub(r)),_=o.norm(),p>_&&_>c&&(n.set(o.normalize(s*f*u(_,h)).cap(a)),l.applyForce(n)))},i.exports=e},{"../../math/Vector":41,"./Force":64}],66:[function(t,i){function e(t){n.call(this,t)}var n=t("./Drag");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS=n.DEFAULT_OPTIONS,e.FORCE_FUNCTIONS=n.FORCE_FUNCTIONS,e.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},e.prototype.applyForce=function(t){var i,e,n=this.options.strength,o=this.options.forceFunction,s=this.force;for(i=0;i<t.length;i++)e=t[i],o(e.angularVelocity).mult(-100*n).put(s),e.applyTorque(s)},e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},i.exports=e},{"./Drag":63}],67:[function(t,i){function e(t){a.call(this,t)}function n(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function o(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function s(){n.call(this),o.call(this)}var r=t("./Force"),a=t("./Spring"),h=t("../../math/Quaternion");e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS=a.DEFAULT_OPTIONS,e.FORCE_FUNCTIONS=a.FORCE_FUNCTIONS;var c=Math.PI;e.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof h&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new h(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),s.call(this),r.prototype.setOptions.call(this,t)},e.prototype.applyForce=function(t){var i,e,n,o,s=this.force,r=this.options,a=this.disp,h=r.stiffness,c=r.damping,p=r.length,u=r.anchor,l=r.forceFunction,f=r.maxLength;for(i=0;i<t.length;i++){if(e=t[i],a.set(u.sub(e.orientation)),n=a.norm()-p,0===n)return;o=e.mass,h*=o,c*=o,s.set(a.normalize(h*l(n,f))),c&&s.add(e.angularVelocity.mult(-c)).put(s),e.applyTorque(s)}},e.prototype.getEnergy=function(t){for(var i=this.options,e=i.length,n=i.anchor,o=i.stiffness,s=0,r=0;r<t.length;r++){var a=t[r],h=n.sub(a.orientation).norm()-e;s+=.5*o*h*h}return s},i.exports=e},{"../../math/Quaternion":38,"./Force":64,"./Spring":68}],68:[function(t,i){function e(t){r.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new a(0,0,0),s.call(this)}function n(){var t=this.options;t.stiffness=Math.pow(2*h/t.period,2)}function o(){var t=this.options;t.damping=4*h*t.dampingRatio/t.period}function s(){n.call(this),o.call(this)}var r=t("./Force"),a=t("../../math/Vector");e.prototype=Object.create(r.prototype),e.prototype.constructor=e;var h=Math.PI,c=150;e.FORCE_FUNCTIONS={FENE:function(t,i){var e=.99*i,n=Math.max(Math.min(t,e),-e);return n/(1-n*n/(i*i))},HOOK:function(t){return t}},e.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:e.FORCE_FUNCTIONS.HOOK},e.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof a&&(this.options.anchor=t.anchor.position),t.anchor instanceof a&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new a(t.anchor))),void 0!==t.period&&(t.period<c&&(t.period=c,console.warn("The period of a SpringTransition is capped at "+c+" ms. Use a SnapTransition for faster transitions")),this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),s.call(this),r.prototype.setOptions.call(this,t)},e.prototype.applyForce=function(t,i){var e,n,o,s,r,a,h=this.force,c=this.disp,p=this.options,u=p.stiffness,l=p.damping,f=p.length,d=p.maxLength,_=p.anchor||i.position,y=p.forceFunction;for(e=0;e<t.length;e++){if(n=t[e],o=n.position,s=n.velocity,_.sub(o).put(c),r=c.norm()-f,0===r)return;a=n.mass,u*=a,l*=a,c.normalize(u*y(r,d)).put(h),l&&(i?h.add(s.sub(i.velocity).mult(-l)).put(h):h.add(s.mult(-l)).put(h)),n.applyForce(h),i&&i.applyForce(h.mult(-1))}},e.prototype.getEnergy=function(t,i){for(var e=this.options,n=e.length,o=i?i.position:e.anchor,s=e.stiffness,r=0,a=0;a<t.length;a++){var h=t[a],c=o.sub(h.position).norm()-n;r+=.5*s*c*c}return r},i.exports=e},{"../../math/Vector":41,"./Force":64}],69:[function(t,i){function e(t){o.call(this),this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.evaluation=new s}function n(t){var i=e.FIELDS;switch(t){case i.CONSTANT:this.options.direction?this.options.direction instanceof Array&&(this.options.direction=new s(this.options.direction)):this.options.direction=new s(0,1,0);break;case i.POINT_ATTRACTOR:this.options.position?this.options.position instanceof Array&&(this.options.position=new s(this.options.position)):this.options.position=new s(0,0,0)}}var o=t("./Force"),s=t("../../math/Vector");e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.FIELDS={CONSTANT:function(t,i){i.direction.put(this.evaluation)},LINEAR:function(t){t.put(this.evaluation)},RADIAL:function(t){t.mult(-1).put(this.evaluation)},POINT_ATTRACTOR:function(t,i){i.position.sub(t).put(this.evaluation)}},e.DEFAULT_OPTIONS={strength:.01,field:e.FIELDS.CONSTANT},e.prototype.setOptions=function(t){void 0!==t.strength&&(this.options.strength=t.strength),void 0!==t.field&&(this.options.field=t.field,n.call(this,this.options.field))},e.prototype.applyForce=function(t){var i,e,n=this.force,o=this.options.strength,s=this.options.field;for(i=0;i<t.length;i++)e=t[i],s.call(this,e.position,this.options),this.evaluation.mult(e.mass*o).put(n),e.applyForce(n)},e.prototype.getEnergy=function(t){var i,n,o=this.options.field,s=e.FIELDS,r=0;switch(o){case s.CONSTANT:r=t.length*this.options.direction.norm();break;case s.RADIAL:for(i=0;i<t.length;i++)n=t[i],r+=n.position.norm();break;case s.POINT_ATTRACTOR:for(i=0;i<t.length;i++)n=t[i],r+=n.position.sub(this.options.position).norm()}return r*=this.options.strength},i.exports=e},{"../../math/Vector":41,"./Force":64}],70:[function(t,i){i.exports={Drag:t("./Drag"),Force:t("./Force"),Repulsion:t("./Repulsion"),RotationalDrag:t("./RotationalDrag"),RotationalSpring:t("./RotationalSpring"),Spring:t("./Spring"),VectorField:t("./VectorField")}},{"./Drag":63,"./Force":64,"./Repulsion":65,"./RotationalDrag":66,"./RotationalSpring":67,"./Spring":68,"./VectorField":69}],71:[function(t,i){i.exports={PhysicsEngine:t("./PhysicsEngine"),bodies:t("./bodies"),constraints:t("./constraints"),forces:t("./forces"),integrators:t("./integrators")}},{"./PhysicsEngine":48,"./bodies":53,"./constraints":62,"./forces":70,"./integrators":73}],72:[function(t,i){var e={};e.integrateVelocity=function(t,i){var e=t.velocity,n=t.inverseMass,o=t.force;o.isZero()||(e.add(o.mult(i*n)).put(e),o.clear())},e.integratePosition=function(t,i){var e=t.position,n=t.velocity;e.add(n.mult(i)).put(e)},e.integrateAngularMomentum=function(t,i){var e=t.angularMomentum,n=t.torque;n.isZero()||(e.add(n.mult(i)).put(e),n.clear())},e.integrateOrientation=function(t,i){var e=t.orientation,n=t.angularVelocity;n.isZero()||e.add(e.multiply(n).scalarMultiply(.5*i)).put(e)},i.exports=e},{}],73:[function(t,i){i.exports={SymplecticEuler:t("./SymplecticEuler")}},{"./SymplecticEuler":72}],74:[function(t,i){function e(t){t&&t.canvasSize&&(this._canvasSize=t.canvasSize),n.apply(this,arguments),this._canvasSize||(this._canvasSize=this.getSize()),this._backBuffer=document.createElement("canvas"),this._canvasSize&&(this._backBuffer.width=this._canvasSize[0],this._backBuffer.height=this._canvasSize[1]),this._contextId=void 0}var n=t("../core/Surface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="canvas",e.prototype.elementClass="famous-surface",e.prototype.setContent=function(){},e.prototype.deploy=function(t){this._canvasSize&&(t.width=this._canvasSize[0],t.height=this._canvasSize[1]),"2d"===this._contextId&&(t.getContext(this._contextId).drawImage(this._backBuffer,0,0),this._backBuffer.width=0,this._backBuffer.height=0)},e.prototype.recall=function(t){this.getSize();this._backBuffer.width=t.width,this._backBuffer.height=t.height,"2d"===this._contextId&&(this._backBuffer.getContext(this._contextId).drawImage(t,0,0),t.width=0,t.height=0)},e.prototype.getContext=function(t){return this._contextId=t,this._currentTarget?this._currentTarget.getContext(t):this._backBuffer.getContext(t)},e.prototype.setSize=function(t,i){n.prototype.setSize.apply(this,arguments),i&&(this._canvasSize=[i[0],i[1]]),this._currentTarget&&(this._currentTarget.width=this._canvasSize[0],this._currentTarget.height=this._canvasSize[1])},i.exports=e},{"../core/Surface":14}],75:[function(t,i){function e(t){n.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new o(this._container),this.setContent(this._container)}var n=t("../core/Surface"),o=t("../core/Context");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="div",e.prototype.elementClass="famous-surface",e.prototype.add=function(){return this.context.add.apply(this.context,arguments)},e.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),n.prototype.render.apply(this,arguments)},e.prototype.deploy=function(){return this._shouldRecalculateSize=!0,n.prototype.deploy.apply(this,arguments)},e.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,i=n.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),i},i.exports=e},{"../core/Context":1,"../core/Surface":14}],76:[function(t,i){function e(t){t&&(this._method=t.method||""),n.apply(this,arguments)}var n=t("./ContainerSurface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="form",e.prototype.deploy=function(t){return this._method&&(t.method=this._method),n.prototype.deploy.apply(this,arguments)},i.exports=e},{"./ContainerSurface":75}],77:[function(t,i){function e(){this._imageUrl=void 0,n.apply(this,arguments)}var n=t("../core/Surface"),o=[],s=[],r=[],a=!0;e.enableCache=function(){a=!0},e.disableCache=function(){a=!1},e.clearCache=function(){o=[],s=[],r=[]},e.getCache=function(){return{urlCache:o,countCache:s,nodeCache:s}},e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="img",e.prototype.elementClass="famous-surface",e.prototype.setContent=function(t){var i=o.indexOf(this._imageUrl);-1!==i&&(1===s[i]?(o.splice(i,1),s.splice(i,1),r.splice(i,1)):s[i]--),i=o.indexOf(t),-1===i?(o.push(t),s.push(1)):s[i]++,this._imageUrl=t,this._contentDirty=!0},e.prototype.deploy=function(t){var i=o.indexOf(this._imageUrl);if(void 0===r[i]&&a){var e=new Image;e.src=this._imageUrl||"",r[i]=e}t.src=this._imageUrl||""},e.prototype.recall=function(t){t.src=""},i.exports=e},{"../core/Surface":14}],78:[function(t,i){function e(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._type=t.type||"text",this._name=t.name||"",n.apply(this,arguments),this.on("click",this.focus.bind(this)),window.addEventListener("click",function(t){t.target!==this._currentTarget&&this.blur()}.bind(this))}var n=t("../core/Surface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="input",e.prototype.elementClass="famous-surface",e.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},e.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},e.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},e.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},e.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},e.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},e.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},e.prototype.getName=function(){return this._name},e.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type,t.name=this._name},i.exports=e},{"../core/Surface":14}],79:[function(t,i){function e(t){n.apply(this,arguments),this._type="submit",t&&t.onClick&&this.setOnClick(t.onClick)}var n=t("./InputSurface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.setOnClick=function(t){this.onClick=t},e.prototype.deploy=function(t){this.onclick&&(t.onClick=this.onClick),n.prototype.deploy.apply(this,arguments)},i.exports=e},{"./InputSurface":78}],80:[function(t,i){function e(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._name=t.name||"",this._wrap=t.wrap||"",this._cols=t.cols||"",this._rows=t.rows||"",n.apply(this,arguments),this.on("click",this.focus.bind(this))}var n=t("../core/Surface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="textarea",e.prototype.elementClass="famous-surface",e.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},e.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},e.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},e.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},e.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},e.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},e.prototype.getName=function(){return this._name},e.prototype.setWrap=function(t){return this._wrap=t,this._contentDirty=!0,this},e.prototype.setColumns=function(t){return this._cols=t,this._contentDirty=!0,this},e.prototype.setRows=function(t){return this._rows=t,this._contentDirty=!0,this},e.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),""!==this._value&&(t.value=this._value),""!==this._name&&(t.name=this._name),""!==this._wrap&&(t.wrap=this._wrap),""!==this._cols&&(t.cols=this._cols),""!==this._rows&&(t.rows=this._rows)},i.exports=e},{"../core/Surface":14}],81:[function(t,i){function e(t){n.apply(this,arguments),this._videoUrl=void 0,this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t)}var n=t("../core/Surface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={autoplay:!1},e.prototype.elementType="video",e.prototype.elementClass="famous-surface",e.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.autoplay&&(this.options.autoplay=t.autoplay),t.src&&(this._videoUrl=t.src,this._contentDirty=!0)},e.prototype.setContent=function(t){this._videoUrl=t,this._contentDirty=!0},e.prototype.deploy=function(t){t.src=this._videoUrl,t.autoplay=this.options.autoplay},e.prototype.recall=function(t){t.src=""},i.exports=e},{"../core/Surface":14}],82:[function(t,i){i.exports={CanvasSurface:t("./CanvasSurface"),ContainerSurface:t("./ContainerSurface"),FormContainerSurface:t("./FormContainerSurface"),ImageSurface:t("./ImageSurface"),InputSurface:t("./InputSurface"),SubmitInputSurface:t("./SubmitInputSurface"),TextareaSurface:t("./TextareaSurface"),VideoSurface:t("./VideoSurface")}},{"./CanvasSurface":74,"./ContainerSurface":75,"./FormContainerSurface":76,"./ImageSurface":77,"./InputSurface":78,"./SubmitInputSurface":79,"./TextareaSurface":80,"./VideoSurface":81}],83:[function(t,i){function e(t){this._map=t||null,this._cachedOutput=null,this._cachedInput=Number.NaN}e.create=function(t){var i=new e(t);return i.get.bind(i)},e.prototype.get=function(t){return t!==this._cachedInput&&(this._cachedInput=t,this._cachedOutput=this._map(t)),this._cachedOutput},i.exports=e},{}],84:[function(t,i){var e={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)))},outElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-i)*Math.PI/e)+1)},inOutElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:2===(t/=.5)?1:(e||(e=.3*1.5),i=e/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)*.5+1)},inBack:function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)},outBack:function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1},inOutBack:function(t,i){return void 0===i&&(i=1.70158),(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},inBounce:function(t){return 1-e.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*e.inBounce(2*t):.5*e.outBounce(2*t-1)+.5}};i.exports=e},{}],85:[function(t,i){function e(t){this.method=t,this._instances=[],this.state=[]}var n=t("../utilities/Utility");e.SUPPORTS_MULTIPLE=!0,e.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},e.prototype.set=function(t,i,e){for(var o=n.after(t.length,e),s=0;s<t.length;s++)this._instances[s]||(this._instances[s]=new this.method),this._instances[s].set(t[s],i,o)},e.prototype.reset=function(t){for(var i=0;i<t.length;i++)this._instances[i]||(this._instances[i]=new this.method),this._instances[i].reset(t[i])},i.exports=e},{"../utilities/Utility":95}],86:[function(t,i){function e(t){t=t||0,this.endState=new v(t),this.initState=new v,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new _,this.particle=new y,this.spring=new g({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function n(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function s(t){this.endState.set(t),o.call(this)}function r(){this.PE.wake()}function a(){this.PE.sleep()}function h(t){this.particle.position.set(t)}function c(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function u(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function l(t){this._callback=t}function f(t){var i=e.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),c.call(this,t.velocity)}function d(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else n.call(this)<this._absRestTolerance&&(h.call(this,this.endState),c.call(this,[0,0,0]),a.call(this))}var _=t("../physics/PhysicsEngine"),y=t("../physics/bodies/Particle"),g=t("../physics/constraints/Snap"),v=t("../math/Vector");e.SUPPORTS_MULTIPLE=3,e.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},e.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),h.call(this,t),s.call(this,t),i&&c.call(this,i),l.call(this,void 0)},e.prototype.getVelocity=function(){return u.call(this)},e.prototype.setVelocity=function(t){this.call(this,c(t))},e.prototype.isActive=function(){return!this.PE.isSleeping()},e.prototype.halt=function(){this.set(this.get())},e.prototype.get=function(){return d.call(this),p.call(this)},e.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,r.call(this),f.call(this,i),s.call(this,t),void l.call(this,e)):(this.reset(t),void(e&&e()))},i.exports=e},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/constraints/Snap":58}],87:[function(t,i){function e(t){t=t||0,this.endState=new v(t),this.initState=new v,this._dimensions=void 0,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new _,this.spring=new g({anchor:this.endState}),this.particle=new y,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function n(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(t){this.particle.setPosition(t)}function s(t){this.particle.setVelocity(t)}function r(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function a(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function h(t){this._callback=t}function c(){this.PE.wake()}function p(){this.PE.sleep()}function u(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else n.call(this)<this._absRestTolerance&&(o.call(this,this.endState),s.call(this,[0,0,0]),p.call(this))}function l(t){var i=e.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),t.period<150&&(t.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),s.call(this,t.velocity)}function f(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function d(t){this.endState.set(t),f.call(this)}var _=t("../physics/PhysicsEngine"),y=t("../physics/bodies/Particle"),g=t("../physics/forces/Spring"),v=t("../math/Vector");e.SUPPORTS_MULTIPLE=3,e.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},e.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),o.call(this,t),d.call(this,t),i&&s.call(this,i),h.call(this,void 0)},e.prototype.getVelocity=function(){return a.call(this)},e.prototype.setVelocity=function(t){this.call(this,s(t))},e.prototype.isActive=function(){return!this.PE.isSleeping()
},e.prototype.halt=function(){this.set(this.get())},e.prototype.get=function(){return u.call(this),r.call(this)},e.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,c.call(this),l.call(this,i),d.call(this,t),void h.call(this,e)):(this.reset(t),void(e&&e()))},i.exports=e},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/forces/Spring":68}],88:[function(t,i){function e(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function n(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var i=null,e=this.currentAction[0],a=this.currentAction[1];a instanceof Object&&a.method?(i=a.method,"string"==typeof i&&(i=r[i])):i=s,this._currentMethod!==i&&(this._engineInstance=!(e instanceof Object)||i.SUPPORTS_MULTIPLE===!0||e.length<=i.SUPPORTS_MULTIPLE?new i:new o(i),this._currentMethod=i),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(a.velocity=this.velocity),this._engineInstance.set(e,a,n.bind(this))}var o=t("./MultipleTransition"),s=t("./TweenTransition"),r={};e.register=function(t){var i=!0;for(var n in t)e.registerMethod(n,t[n])||(i=!1);return i},e.registerMethod=function(t,i){return t in r?!1:(r[t]=i,!0)},e.unregisterMethod=function(t){return t in r?(delete r[t],!0):!1},e.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),this;var o=[t,i];return this.actionQueue.push(o),this.callbackQueue.push(e),this.currentAction||n.call(this),this},e.prototype.reset=function(t,i){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=i,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},e.prototype.delay=function(t,i){this.set(this.get(),{duration:t,curve:function(){return 0}},i)},e.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},e.prototype.isActive=function(){return!!this.currentAction},e.prototype.halt=function(){return this.set(this.get())},i.exports=e},{"./MultipleTransition":85,"./TweenTransition":90}],89:[function(t,i){function e(t){this._final=r.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=new s(this._finalTranslate),this.rotate=new s(this._finalRotate),this.skew=new s(this._finalSkew),this.scale=new s(this._finalScale),t&&this.set(t)}function n(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}function o(){return r.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}var s=t("./Transitionable"),r=t("../core/Transform"),a=t("../utilities/Utility");e.prototype.setTranslate=function(t,i,e){return this._finalTranslate=t,this._final=o.call(this),this.translate.set(t,i,e),this},e.prototype.setScale=function(t,i,e){return this._finalScale=t,this._final=o.call(this),this.scale.set(t,i,e),this},e.prototype.setRotate=function(t,i,e){return this._finalRotate=t,this._final=o.call(this),this.rotate.set(t,i,e),this},e.prototype.setSkew=function(t,i,e){return this._finalSkew=t,this._final=o.call(this),this.skew.set(t,i,e),this},e.prototype.set=function(t,i,e){var n=r.interpret(t);this._finalTranslate=n.translate,this._finalRotate=n.rotate,this._finalSkew=n.skew,this._finalScale=n.scale,this._final=t;var o=e?a.after(4,e):null;return this.translate.set(n.translate,i,o),this.rotate.set(n.rotate,i,o),this.skew.set(n.skew,i,o),this.scale.set(n.scale,i,o),this},e.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},e.prototype.get=function(){return this.isActive()?n.call(this):this._final},e.prototype.getFinal=function(){return this._final},e.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},e.prototype.halt=function(){return this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt(),this._final=this.get(),this._finalTranslate=this.translate.get(),this._finalRotate=this.rotate.get(),this._finalSkew=this.skew.get(),this._finalScale=this.scale.get(),this},i.exports=e},{"../core/Transform":15,"../utilities/Utility":95,"./Transitionable":88}],90:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function n(t,i,e){return(1-e)*t+e*i}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function s(t,i){var n={curve:i.curve};return i.duration&&(n.duration=i.duration),i.speed&&(n.speed=i.speed),t instanceof Object&&(void 0!==t.duration&&(n.duration=t.duration),t.curve&&(n.curve=t.curve),t.speed&&(n.speed=t.speed)),"string"==typeof n.curve&&(n.curve=e.getCurve(n.curve)),n}function r(t,i,e,n,o){var s,r=1e-7,a=(e(o)-e(o-r))/r;if(t instanceof Array){s=[];for(var h=0;h<t.length;h++)s[h]="number"==typeof t[h]?a*(t[h]-i[h])/n:0}else s=a*(t-i)/n;return s}function a(t,i,e){var o;if(t instanceof Array){o=[];for(var s=0;s<t.length;s++)o[s]="number"==typeof t[s]?n(t[s],i[s],e):t[s]}else o=n(t,i,e);return o}e.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},e.SUPPORTS_MULTIPLE=!0,e.DEFAULT_OPTIONS={curve:e.Curves.linear,duration:500,speed:0};var h={};e.registerCurve=function(t,i){return h[t]?!1:(h[t]=i,!0)},e.unregisterCurve=function(t){return h[t]?(delete h[t],!0):!1},e.getCurve=function(t){var i=h[t];if(void 0!==i)return i;throw new Error("curve not registered")},e.getCurves=function(){return h},e.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},e.prototype.set=function(t,i,e){if(!i)return this.reset(t),void(e&&e());if(this._startValue=o(this.get()),i=s(i,this.options),i.speed){var n=this._startValue;if(n instanceof Object){var r=0;for(var a in n)r+=(t[a]-n[a])*(t[a]-n[a]);i.duration=Math.sqrt(r)/i.speed}else i.duration=Math.abs(t-n)/i.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(i.velocity),this._duration=i.duration,this._curve=i.curve,this._active=!0,this._callback=e},e.prototype.reset=function(t,i){if(this._callback){var e=this._callback;this._callback=void 0,e()}this.state=o(t),this.velocity=o(i),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},e.prototype.getVelocity=function(){return this.velocity},e.prototype.get=function(t){return this.update(t),this.state},e.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var i=t-this._startTime;if(i>=this._duration)this.state=this._endValue,this.velocity=r(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>i)this.state=this._startValue,this.velocity=this._startVelocity;else{var e=i/this._duration;this.state=a(this._startValue,this._endValue,this._curve(e)),this.velocity=r(this.state,this._startValue,this._curve,this._duration,e)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},e.prototype.isActive=function(){return this._active},e.prototype.halt=function(){this.reset(this.get())},e.registerCurve("linear",e.Curves.linear),e.registerCurve("easeIn",e.Curves.easeIn),e.registerCurve("easeOut",e.Curves.easeOut),e.registerCurve("easeInOut",e.Curves.easeInOut),e.registerCurve("easeOutBounce",e.Curves.easeOutBounce),e.registerCurve("spring",e.Curves.spring),e.customCurve=function(t,i){return t=t||0,i=i||0,function(e){return t*e+(-2*t-i+3)*e*e+(t+i-2)*e*e*e}},i.exports=e},{}],91:[function(t,i){function e(t){t=t||0,this.endState=new m(t),this.initState=new m,this.spring=new g({anchor:this.endState}),this.wall=new v,this._restTolerance=1e-10,this._dimensions=1,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new _,this.particle=new y,this.PE.addBody(this.particle),this.PE.attach([this.wall,this.spring],this.particle)}function n(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function s(){this.PE.wake()}function r(){this.PE.sleep()}function a(t){this.endState.set(t);var i=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:0===i?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),o.call(this)}function h(t){this.particle.position.set(t)}function c(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function u(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function l(t){this._callback=t}function f(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else{var i=n.call(this);i<this._absRestTolerance&&(r.call(this),h.call(this,this.endState),c.call(this,[0,0,0]))}}function d(t){var i=e.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),void 0===t.restitution&&(t.restitution=i.restitution),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),this.wall.setOptions({restitution:t.restitution}),c.call(this,t.velocity)}var _=t("../physics/PhysicsEngine"),y=t("../physics/bodies/Particle"),g=t("../physics/forces/Spring"),v=t("../physics/constraints/Wall"),m=t("../math/Vector");e.SUPPORTS_MULTIPLE=3,e.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,restitution:.5},e.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),h.call(this,t),i&&c.call(this,i),a.call(this,t),l.call(this,void 0)},e.prototype.getVelocity=function(){return u.call(this)},e.prototype.setVelocity=function(t){this.call(this,c(t))},e.prototype.isActive=function(){return!this.PE.isSleeping()},e.prototype.halt=function(){this.set(this.get())},e.prototype.get=function(){return f.call(this),p.call(this)},e.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,s.call(this),d.call(this,i),a.call(this,t),void l.call(this,e)):(this.reset(t),void(e&&e()))},i.exports=e},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/constraints/Wall":60,"../physics/forces/Spring":68}],92:[function(t,i){i.exports={CachedMap:t("./CachedMap"),Easing:t("./Easing"),MultipleTransition:t("./MultipleTransition"),SnapTransition:t("./SnapTransition"),SpringTransition:t("./SpringTransition"),Transitionable:t("./Transitionable"),TransitionableTransform:t("./TransitionableTransform"),TweenTransition:t("./TweenTransition"),WallTransition:t("./WallTransition")}},{"./CachedMap":83,"./Easing":84,"./MultipleTransition":85,"./SnapTransition":86,"./SpringTransition":87,"./Transitionable":88,"./TransitionableTransform":89,"./TweenTransition":90,"./WallTransition":91}],93:[function(t,i){var e={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};i.exports=e},{}],94:[function(t,i){function e(t){return c.on(p,t),t}function n(t,i){var n=u(),o=function(){var e=u();e-n>=i&&(t.apply(this,arguments),c.removeListener(p,o))};return e(o)}function o(t,i){var n=u(),o=function(){var e=u();e-n>=i&&(t.apply(this,arguments),n=u())};return e(o)}function s(t,i){if(void 0===i)return void 0;var n=function(){i--,0>=i&&(t.apply(this,arguments),a(n))};return e(n)}function r(t,i){i=i||1;var n=i,o=function(){i--,0>=i&&(t.apply(this,arguments),i=n)};return e(o)}function a(t){c.removeListener(p,t)}function h(t,i){var e,o,s,r,h;return function(){o=this,h=arguments,s=u();var c=function(){var a=u-s;i>a?e=n(c,i-a):(e=null,r=t.apply(o,h))};return a(e),e=n(c,i),r}}var c=t("../core/Engine"),p="prerender",u=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};i.exports={setTimeout:n,setInterval:o,debounce:h,after:s,every:r,clear:a}},{"../core/Engine":4}],95:[function(t,i){var e={};e.Direction={X:0,Y:1,Z:2},e.after=function(t,i){var e=t;return function(){e--,0===e&&i.apply(this,arguments)}},e.loadURL=function(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&i&&i(this.responseText)},e.open("GET",t),e.send()},e.createDocumentFragmentFromHTML=function(t){var i=document.createElement("div");i.innerHTML=t;for(var e=document.createDocumentFragment();i.hasChildNodes();)e.appendChild(i.firstChild);return e},e.clone=function(t){var i;if("object"==typeof t){i=t instanceof Array?[]:{};for(var n in t)if("object"==typeof t[n]&&null!==t[n])if(t[n]instanceof Array){i[n]=new Array(t[n].length);for(var o=0;o<t[n].length;o++)i[n][o]=e.clone(t[n][o])}else i[n]=e.clone(t[n]);else i[n]=t[n]}else i=t;return i},i.exports=e},{}],96:[function(t,i){i.exports={KeyCodes:t("./KeyCodes"),Timer:t("./Timer"),Utility:t("./Utility")}},{"./KeyCodes":93,"./Timer":94,"./Utility":95}],97:[function(t,i){function e(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS||e.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t),this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._id=n.register(this)}var n=t("../core/Entity"),o=(t("../core/Transform"),t("../core/EventHandler")),s=t("../core/OptionsManager");e.DEFAULT_OPTIONS={},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},e.prototype.render=function(){return this._id},e.prototype.commit=function(){},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Transform":15}],98:[function(t,i){function e(){c.apply(this,arguments),this.state=new a(0),this._isOpen=!1,this.setOutputFunction(function(t,i,e){var o=n.call(this),r=this.options.direction===h.Direction.X?s.translate(o*i,0,.001*(o-1)*i):s.translate(0,o*i,.001*(o-1)*i),a=t.render();if(this.options.stackRotation){var c=this.options.stackRotation*e*(1-o);a={transform:s.rotateZ(c),origin:[.5,.5],target:a}}return{transform:r,size:t.getSize(),target:a}})}function n(t){return t?this._isOpen?1:0:this.state.get()}function o(t,i,e){this.state.halt(),this.state.set(t,i,e)}var s=t("../core/Transform"),r=t("../core/OptionsManager"),a=t("../transitions/Transitionable"),h=t("../utilities/Utility"),c=t("./SequentialLayout");e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS=r.patch(c.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0}),e.prototype.getSize=function(){var t=c.prototype.getSize.apply(this,arguments),i=this._items?this._items.get().getSize():[0,0];i||(i=[0,0]);var e=n.call(this),o=1-e;return[i[0]*o+t[0]*e,i[1]*o+t[1]*e]},e.prototype.isOpen=function(){return this._isOpen},e.prototype.open=function(t){this._isOpen=!0,o.call(this,1,this.options.transition,t)},e.prototype.close=function(t){this._isOpen=!1,o.call(this,0,this.options.transition,t)},e.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},i.exports=e},{"../core/OptionsManager":10,"../core/Transform":15,"../transitions/Transitionable":88,"../utilities/Utility":95,"./SequentialLayout":110}],99:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new p(this.options),t&&this.setOptions(t),this._position=new u(0),this._direction=n(this.options.side),this._orientation=o(this.options.side),this._isOpen=!1,this._cachedLength=0,this.drawer=new h,this.content=new h,this._eventInput=new l,this._eventOutput=new l,l.setInputHandler(this,this._eventInput),l.setOutputHandler(this,this._eventOutput),this._eventInput.on("update",r.bind(this)),this._eventInput.on("end",a.bind(this))}function n(t){var i=e.SIDES;return t===i.LEFT||t===i.RIGHT?f:d}function o(t){var i=e.SIDES;return t===i.LEFT||t===i.TOP?1:-1}function s(t){var i,e=this.options;if(e.drawerLength)i=e.drawerLength;else{var n=t.getSize();i=n?n[this._direction]:e.drawerLength}return this._orientation*i}function r(t){var i,e,n=this.getPosition()+t.delta;this._cachedLength=s.call(this,this.drawer),1===this._orientation?(i=0,e=this._cachedLength):(i=this._cachedLength,e=0),n>e?n=e:i>n&&(n=i),this.setPosition(n)}function a(t){var i=t.velocity,e=this._orientation*this.getPosition(),n=this.options,o=this._orientation*this._cachedLength,s=n.positionThreshold||o/2,r=n.velocityThreshold;if(n.transition instanceof Object&&(n.transition.velocity=t.velocity),0===e)return void(this._isOpen=!1);if(e===o)return void(this._isOpen=!0);var a=Math.abs(i)>r||!this._isOpen&&e>s||this._isOpen&&s>e;a?this.toggle():this.reset()}var h=t("../core/RenderNode"),c=t("../core/Transform"),p=t("../core/OptionsManager"),u=t("../transitions/Transitionable"),l=t("../core/EventHandler"),f=0,d=1;e.SIDES={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3},e.DEFAULT_OPTIONS={side:e.SIDES.LEFT,drawerLength:0,velocityThreshold:0,positionThreshold:0,transition:!0},e.prototype.setOptions=function(t){this._optionsManager.setOptions(t),void 0!==t.side&&(this._direction=n(t.side),this._orientation=o(t.side))},e.prototype.open=function(t,i){t instanceof Function&&(i=t),void 0===t&&(t=this.options.transition),this._cachedLength=s.call(this,this.drawer),this.setPosition(this._cachedLength,t,i),this._isOpen||(this._isOpen=!0,this._eventOutput.emit("open"))},e.prototype.close=function(t,i){t instanceof Function&&(i=t),void 0===t&&(t=this.options.transition),this.setPosition(0,t,i),this._isOpen&&(this._isOpen=!1,this._eventOutput.emit("close"))},e.prototype.setPosition=function(t,i,e){this._position.isActive()&&this._position.halt(),this._position.set(t,i,e)},e.prototype.getPosition=function(){return this._position.get()},e.prototype.setProgress=function(t,i,e){return this._position.set(t*this._cachedLength,i,e)},e.prototype.getProgress=function(){return this._position.get()/this._cachedLength},e.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},e.prototype.reset=function(t){this._isOpen?this.open(t):this.close(t)},e.prototype.isOpen=function(){return this._isOpen},e.prototype.render=function(){var t=this.getPosition();(!this._isOpen&&0>t&&1===this._orientation||t>0&&-1===this._orientation)&&(t=0,this.setPosition(t));var i=this._direction===f?c.translate(t,0,0):c.translate(0,t,0);return[{transform:c.behind,target:this.drawer.render()},{transform:i,target:this.content.render()}]},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88}],100:[function(t,i){function e(t){this._currentTarget=null,this._size=[void 0,void 0],this._controller=new h(t),this._controller.inTransformFrom(o.create(n.bind(this,1e-4))),this._controller.outTransformFrom(o.create(n.bind(this,-1e-4))),this._eventInput=new r,r.setInputHandler(this,this._eventInput),this._entityId=s.register(this),t&&this.setOptions(t)}function n(t,i){return a.translate(this._size[0]*(1-i),0,t*(1-i))}var o=t("../transitions/CachedMap"),s=t("../core/Entity"),r=t("../core/EventHandler"),a=t("../core/Transform"),h=t("./RenderController");e.prototype.show=function(t){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=t,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},e.prototype.setOptions=function(t){this._controller.setOptions(t)},e.prototype.render=function(){return this._entityId},e.prototype.commit=function(t){return this._size[0]=t.size[0],this._size[1]=t.size[1],{transform:t.transform,opacity:t.opacity,origin:t.origin,size:t.size,target:this._controller.render()}},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/Transform":15,"../transitions/CachedMap":83,"./RenderController":106}],101:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this.optionsManager=new a(this.options),t&&this.setOptions(t),this.id=s.register(this),this._ratios=new c(this.options.ratios),this._nodes=[],this._size=[0,0],this._cachedDirection=null,this._cachedLengths=[],this._cachedTransforms=null,this._ratiosDirty=!1,this._eventOutput=new h,h.setOutputHandler(this,this._eventOutput)}function n(t,i,n){var o,s,a,h,c=0,p=i,u=0;for(this._cachedLengths=[],this._cachedTransforms=[],h=0;h<t.length;h++)s=t[h],a=this._nodes[h],"number"!=typeof s?p-=a.getSize()[n]||0:u+=s;for(h=0;h<t.length;h++)a=this._nodes[h],s=t[h],i="number"==typeof s?p*s/u:a.getSize()[n],o=n===e.DIRECTION_X?r.translate(c,0,0):r.translate(0,c,0),this._cachedTransforms.push(o),this._cachedLengths.push(i),c+=i}function o(t,i){for(var e=0;e<t.length;e++)if("number"!=typeof t[e]&&this._nodes[e].getSize()[i]!==this._cachedLengths[e])return!0;return!1}var s=t("../core/Entity"),r=t("../core/Transform"),a=t("../core/OptionsManager"),h=t("../core/EventHandler"),c=t("../transitions/Transitionable");e.DIRECTION_X=0,e.DIRECTION_Y=1,e.DEFAULT_OPTIONS={direction:e.DIRECTION_X,transition:!1,ratios:[]},e.prototype.render=function(){return this.id},e.prototype.setOptions=function(t){this.optionsManager.setOptions(t)},e.prototype.sequenceFrom=function(t){if(this._nodes=t,0===this._ratios.get().length){for(var i=[],e=0;e<this._nodes.length;e++)i.push(1);this.setRatios(i)}},e.prototype.setRatios=function(t,i,e){void 0===i&&(i=this.options.transition);var n=this._ratios;0===n.get().length&&(i=void 0),n.isActive()&&n.halt(),n.set(t,i,e),this._ratiosDirty=!0},e.prototype.getSize=function(){return this._size},e.prototype.commit=function(t){var i,e=t.size,s=t.transform,a=t.origin,h=t.opacity,c=this._ratios.get(),p=this.options.direction,u=e[p];(u!==this._size[p]||this._ratiosDirty||this._ratios.isActive()||p!==this._cachedDirection||o.call(this,c,p))&&(n.call(this,c,u,p),u!==this._size[p]&&(this._size[0]=e[0],this._size[1]=e[1]),p!==this._cachedDirection&&(this._cachedDirection=p),this._ratiosDirty&&(this._ratiosDirty=!1));for(var l=[],f=0;f<c.length;f++)i=[void 0,void 0],u=this._cachedLengths[f],i[p]=u,l.push({transform:this._cachedTransforms[f],size:i,target:this._nodes[f].render()});return e&&0!==a[0]&&0!==a[1]&&(s=r.moveThen([-e[0]*a[0],-e[1]*a[1],0],s)),{transform:s,size:e,opacity:h,target:l}},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Transform":15,"../transitions/Transitionable":88}],102:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t),this.angle=new o(0),this.frontNode=void 0,this.backNode=void 0,this.flipped=!1}var n=t("../core/Transform"),o=t("../transitions/Transitionable"),s=(t("../core/RenderNode"),t("../core/OptionsManager"));e.DIRECTION_X=0,e.DIRECTION_Y=1;var r=1;e.DEFAULT_OPTIONS={transition:!0,direction:e.DIRECTION_X},e.prototype.flip=function(t,i){var e=this.flipped?0:Math.PI;this.setAngle(e,t,i),this.flipped=!this.flipped},e.prototype.setAngle=function(t,i,e){void 0===i&&(i=this.options.transition),this.angle.isActive()&&this.angle.halt(),this.angle.set(t,i,e)},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.setFront=function(t){this.frontNode=t},e.prototype.setBack=function(t){this.backNode=t},e.prototype.render=function(){var t,i,o=this.angle.get();this.options.direction===e.DIRECTION_X?(t=n.rotateY(o),i=n.rotateY(o+Math.PI)):(t=n.rotateX(o),i=n.rotateX(o+Math.PI));var s=[];return this.frontNode&&s.push({transform:t,target:this.frontNode.render()}),this.backNode&&s.push({transform:n.moveThen([0,0,r],i),target:this.backNode.render()}),s},i.exports=e},{"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88}],103:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this.optionsManager=new u(this.options),t&&this.setOptions(t),this.id=r.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new c,c.setOutputHandler(this,this._eventOutput)}function n(t,i,e){var n=[t[0],t[1]];n[0]-=this.options.gutterSize[0]*(i-1),n[1]-=this.options.gutterSize[1]*(e-1);for(var r,a=Math.round(n[1]/e),h=Math.round(n[0]/i),c=0,p=0,u=0;e>u;u++){r=0;for(var l=0;i>l;l++)void 0===this._modifiers[p]?o.call(this,p,[h,a],[r,c,0],1):s.call(this,p,[h,a],[r,c,0],1),p++,r+=h+this.options.gutterSize[0];c+=a+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[t[0],t[1]],this._activeCount=e*i,u=this._activeCount;u<this._modifiers.length;u++)s.call(this,u,[Math.round(h),Math.round(a)],[0,0],0);this._eventOutput.emit("reflow")}function o(t,i,e,n){var o={transform:new f(a.translate.apply(null,e)),opacity:new l(n),size:new l(i)},s=new p({transform:o.transform,opacity:o.opacity,size:o.size});this._states[t]=o,this._modifiers[t]=s}function s(t,i,e,n){var o=this._states[t],s=o.size,r=o.opacity,a=o.transform,h=this.options.transition;a.halt(),r.halt(),s.halt(),a.setTranslate(e,h),s.set(i,h),r.set(n,h)}var r=t("../core/Entity"),a=(t("../core/RenderNode"),t("../core/Transform")),h=t("../core/ViewSequence"),c=t("../core/EventHandler"),p=t("../core/Modifier"),u=t("../core/OptionsManager"),l=t("../transitions/Transitionable"),f=t("../transitions/TransitionableTransform");e.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},e.prototype.render=function(){return this.id},e.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},e.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new h(t)),this.sequence=t},e.prototype.commit=function(t){var i=t.transform,e=t.opacity,o=t.origin,s=t.size,r=this.options.dimensions[0],h=this.options.dimensions[1];(s[0]!==this._contextSizeCache[0]||s[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||h!==this._dimensionsCache[1])&&n.call(this,s,r,h);for(var c=this.sequence,p=[],u=0;c&&u<this._modifiers.length;){var l=c.get(),f=this._modifiers[u];u>=this._activeCount&&this._states[u].opacity.isActive()&&(this._modifiers.splice(u,1),this._states.splice(u,1)),l&&p.push(f.modify({origin:o,target:l.render()})),c=c.getNext(),u++}return s&&(i=a.moveThen([-s[0]*o[0],-s[1]*o[1],0],i)),{transform:i,opacity:e,size:s,target:p}},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/Modifier":9,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../core/ViewSequence":17,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89}],104:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._entityId=r.register(this),this.header=new a,this.footer=new a,this.content=new a}function n(t,i){var e=t.getSize();return e?e[this.options.direction]:i}function o(t){return this.options.direction===e.DIRECTION_X?h.translate(t,0,0):h.translate(0,t,0)}function s(t,i){return this.options.direction===e.DIRECTION_X?[t,i[1]]:[i[0],t]}var r=t("../core/Entity"),a=t("../core/RenderNode"),h=t("../core/Transform"),c=t("../core/OptionsManager");e.DIRECTION_X=0,e.DIRECTION_Y=1,e.DEFAULT_OPTIONS={direction:e.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},e.prototype.render=function(){return this._entityId},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.commit=function(t){var i=t.transform,e=t.origin,r=t.size,a=t.opacity,c=void 0!==this.options.headerSize?this.options.headerSize:n.call(this,this.header,this.options.defaultHeaderSize),p=void 0!==this.options.footerSize?this.options.footerSize:n.call(this,this.footer,this.options.defaultFooterSize),u=r[this.options.direction]-c-p;r&&(i=h.moveThen([-r[0]*e[0],-r[1]*e[1],0],i));var l=[{size:s.call(this,c,r),target:this.header.render()},{transform:o.call(this,c),size:s.call(this,u,r),target:this.content.render()},{transform:o.call(this,c+u),size:s.call(this,p,r),target:this.footer.render()}];return{transform:i,opacity:a,size:r,target:l}},i.exports=e},{"../core/Entity":5,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15}],105:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var n=t("../core/Transform"),o=t("../core/Modifier"),s=t("../core/RenderNode"),r=t("../utilities/Utility"),a=t("../core/OptionsManager"),h=t("../transitions/Transitionable"),c=t("../transitions/TransitionableTransform");e.DEFAULT_OPTIONS={inTransform:n.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],inAlign:[.5,.5],outTransform:n.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],outAlign:[.5,.5],showTransform:n.identity,showOpacity:1,showOrigin:[.5,.5],showAlign:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,i,e));this.hide()}this._showing=!0;var n={transform:new c(this.options.inTransform),origin:new h(this.options.inOrigin),align:new h(this.options.inAlign),opacity:new h(this.options.inOpacity)},a=new o({transform:n.transform,opacity:n.opacity,origin:n.origin,align:n.align}),p=new s;p.add(a).add(t),this.nodes.push(p),this.states.push(n),this.transforms.push(a);var u=e?r.after(3,e):void 0;i||(i=this.options.inTransition),n.transform.set(this.options.showTransform,i,u),n.opacity.set(this.options.showOpacity,i,u),n.origin.set(this.options.showOrigin,i,u),n.align.set(this.options.showAlign,i,u)},e.prototype.hide=function(t,i){if(this._showing){this._showing=!1,t instanceof Function&&(i=t,t=void 0);var e=this.nodes[this.nodes.length-1],n=this.transforms[this.transforms.length-1],o=this.states[this.states.length-1],s=r.after(3,function(){this.nodes.splice(this.nodes.indexOf(e),1),this.states.splice(this.states.indexOf(o),1),this.transforms.splice(this.transforms.indexOf(n),1),i&&i.call(this)}.bind(this));t||(t=this.options.outTransition),o.transform.set(this.options.outTransform,t,s),o.opacity.set(this.options.outOpacity,t,s),o.origin.set(this.options.outOrigin,t,s),o.align.set(this.options.outAlign,t,s)}},e.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t.push(this.nodes[i].render());return t},i.exports=e},{"../core/Modifier":9,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89,"../utilities/Utility":95}],106:[function(t,i){function e(){h.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=e.DefaultMap.transform,this.inOpacityMap=e.DefaultMap.opacity,this.inOriginMap=e.DefaultMap.origin,this.outTransformMap=e.DefaultMap.transform,this.outOpacityMap=e.DefaultMap.opacity,this.outOriginMap=e.DefaultMap.origin,this._output=[]
}function n(t,i){return t(i.get())}var o=t("../core/Modifier"),s=t("../core/RenderNode"),r=t("../core/Transform"),a=t("../transitions/Transitionable"),h=t("../core/View");e.prototype=Object.create(h.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},e.DefaultMap={transform:function(){return r.identity},opacity:function(t){return t},origin:null},e.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},e.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},e.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},e.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("outTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},e.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("outOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},e.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("outOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},e.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,e),this._nextRenderable=null})));this.hide()}var r=null,h=this._renderables.indexOf(t);if(h>=0){this._showing=h,r=this._states[h],r.halt();var c=this._outgoingRenderables.indexOf(t);c>=0&&this._outgoingRenderables.splice(c,1)}else{r=new a(0);var p=new o({transform:this.inTransformMap?n.bind(this,this.inTransformMap,r):null,opacity:this.inOpacityMap?n.bind(this,this.inOpacityMap,r):null,origin:this.inOriginMap?n.bind(this,this.inOriginMap,r):null}),u=new s;u.add(p).add(t),this._showing=this._nodes.length,this._nodes.push(u),this._modifiers.push(p),this._states.push(r),this._renderables.push(t)}i||(i=this.options.inTransition),r.set(1,i,e)},e.prototype.hide=function(t,i){if(!(this._showing<0)){var e=this._showing;this._showing=-1,t instanceof Function&&(i=t,t=void 0);var o=this._nodes[e],s=this._modifiers[e],r=this._states[e],a=this._renderables[e];s.transformFrom(this.outTransformMap?n.bind(this,this.outTransformMap,r):null),s.opacityFrom(this.outOpacityMap?n.bind(this,this.outOpacityMap,r):null),s.originFrom(this.outOriginMap?n.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,e,n,o){if(this._outgoingRenderables.indexOf(o)>=0){var s=this._nodes.indexOf(t);this._nodes.splice(s,1),this._modifiers.splice(s,1),this._states.splice(s,1),this._renderables.splice(s,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(o),1),this._showing>=s&&this._showing--}i&&i.call(this)}.bind(this,o,s,r,a))}},e.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var i=0;i<this._nodes.length;i++)t[i]=this._nodes[i].render();return t},i.exports=e},{"../core/Modifier":9,"../core/RenderNode":11,"../core/Transform":15,"../core/View":16,"../transitions/Transitionable":88}],107:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t),this.container=new n(this.options.container),this.scrollview=new s(this.options.scrollview),this.container.add(this.scrollview),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventInput.pipe(this.scrollview),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this.container.pipe(this._eventOutput),this.scrollview.pipe(this._eventOutput)}var n=t("../surfaces/ContainerSurface"),o=t("../core/EventHandler"),s=t("./Scrollview"),r=(t("../utilities/Utility"),t("../core/OptionsManager"));e.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{}},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},e.prototype.getSize=function(){return this.container.getSize.apply(this.container,arguments)},e.prototype.render=function(){return this.container.render()},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"../surfaces/ContainerSurface":75,"../utilities/Utility":95,"./Scrollview":109}],108:[function(t,i){function e(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new h,this.group.add({render:r.bind(this)}),this._entityId=a.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new f,this._eventOutput=new f,f.setInputHandler(this,this._eventInput),f.setOutputHandler(this,this._eventOutput)}function n(t){t||(t=this._contextSize);var i=this.options.direction;return void 0===t[i]?this._contextSize[i]:t[i]}function o(t,i,e){var o=t.getSize?t.getSize():this._contextSize,s=this._outputFunction(i);return e.push({transform:s,target:t.render()}),n.call(this,o)}function s(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?n.call(this,this.getCumulativeSize()):n.call(this,this._contextSize)}function r(){for(var t=null,i=this._position,e=[],r=-this._positionOffset,a=s.call(this),h=this._node;h&&r-i<a+this.options.margin;)r+=o.call(this,h,r,e),h=h.getNext?h.getNext():null;var c=this._node,p=n.call(this,c.getSize());if(a>r){for(;c&&a>p;)c=c.getPrevious(),c&&(p+=n.call(this,c.getSize()));for(c=this._node;c&&a>p;)c=c.getNext(),c&&(p+=n.call(this,c.getSize()))}for(!h&&a-d>r-i?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:r-a})):!this._node.getPrevious()&&-d>i?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),h=this._node&&this._node.getPrevious?this._node.getPrevious():null,r=-this._positionOffset,h&&(t=h.getSize?h.getSize():this._contextSize,r-=n.call(this,t));h&&r-i>-(a+this.options.margin);)o.call(this,h,r,e),h=h.getPrevious?h.getPrevious():null,h&&(t=h.getSize?h.getSize():this._contextSize,r-=n.call(this,t));return e}var a=t("../core/Entity"),h=t("../core/Group"),c=t("../core/OptionsManager"),p=t("../core/Transform"),u=t("../utilities/Utility"),l=t("../core/ViewSequence"),f=t("../core/EventHandler");e.DEFAULT_OPTIONS={direction:u.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var d=0;e.prototype.getCumulativeSize=function(t){return void 0===t&&(t=this._node._.cumulativeSizes.length-1),this._node._.getSize(t)},e.prototype.setOptions=function(t){t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(t)},e.prototype.onEdge=function(){return this._onEdge},e.prototype.outputFrom=function(t,i){t||(t=function(t){return this.options.direction===u.Direction.X?p.translate(t,0):p.translate(0,t)}.bind(this),i||(i=t)),this._outputFunction=t,this._masterOutputFunction=i?i:function(i){return p.inverse(t(-i))}},e.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},e.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new l({array:t})),this._node=t,this._positionOffset=0},e.prototype.getSize=function(t){return t?this._contextSize:this._size},e.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},e.prototype.commit=function(t){var i=t.transform,e=t.opacity,n=t.origin,o=t.size;this.options.clipSize||o[0]===this._contextSize[0]&&o[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=o[0],this._contextSize[1]=o[1],this.options.direction===u.Direction.X?(this._size[0]=s.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=s.call(this)));var r=this._masterOutputFunction(-this._position);return{transform:p.multiply(i,r),size:o,opacity:e,origin:n,target:this.group.render()}},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/Group":8,"../core/OptionsManager":10,"../core/Transform":15,"../core/ViewSequence":17,"../utilities/Utility":95}],109:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new O(this.options),this._scroller=new T(this.options),this.sync=new b(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:void 0!==this.options.preventDefault?this.options.preventDefault:this.options.direction!==w.Direction.Y}),this._physicsEngine=new _,this._particle=new y,this._physicsEngine.addBody(this._particle),this.spring=new v({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new g({forceFunction:g.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new g({forceFunction:g.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=x.NONE,this._onEdge=M.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new m,this._eventOutput=new m,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput),r.call(this),t&&this.setOptions(t)}function n(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),h.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var i=-t.velocity,e=-t.delta;if(this._onEdge!==M.NONE&&t.slip&&(0>i&&this._onEdge===M.TOP||i>0&&this._onEdge===M.BOTTOM?this._earlyEnd||(s.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(i)>Math.abs(this.getVelocity())&&n.call(this,t)),!this._earlyEnd){if(this._touchVelocity=i,t.slip){var o=this.options.speedLimit;-o>i?i=-o:i>o&&(i=o),this.setVelocity(i);var r=16*o;e>r?e=r:-r>e&&(e=-r)}this.setPosition(this.getPosition()+e),this._displacement+=e,this._springState===x.NONE&&f.call(this)}}function s(t){if(this._touchCount=t.count||0,!this._touchCount){h.call(this),this._onEdge!==M.NONE&&l.call(this,this._edgeSpringPosition,x.EDGE),a.call(this);var i=-t.velocity,e=this.options.speedLimit;t.slip&&(e*=this.options.edgeGrip),-e>i?i=-e:i>e&&(i=e),this.setVelocity(i),this._touchVelocity=0,this._needsPaginationCheck=!0}}function r(){this._eventInput.bindThis(this),this._eventInput.on("start",n),this._eventInput.on("update",o),this._eventInput.on("end",s),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(t){this._edgeSpringPosition=t.position,p.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(t){this._springState===x.NONE&&f.call(this),this._displacement=t.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==x.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function a(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function h(){this._springState=x.NONE,this._physicsEngine.detachAll()}function c(t){var i=this.options.direction,e=t.getSize();return e?e[i]:this._scroller.getSize()[i]}function p(t){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=t,this._touchCount||this._springState===x.EDGE||l.call(this,this._edgeSpringPosition,x.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(h.call(this),a.call(this))}function u(){if(!this._touchCount&&this._springState!==x.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var i=this.getPosition(),e=Math.abs(t)>this.options.pageSwitchSpeed,n=c.call(this,this._node),o=i>.5*n,s=t>0,r=0>t;this._needsPaginationCheck=!1,o&&!e||e&&s?this.goToNextPage():e&&r?this.goToPreviousPage():l.call(this,0,x.PAGE)}}}function l(t,i){var e;i===x.EDGE?(this._edgeSpringPosition=t,e={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):i===x.PAGE&&(this._pageSpringPosition=t,e={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(e),i&&!this._springState&&(h.call(this),this._springState=i,a.call(this)),this._springState=i}function f(){var t=0,i=this.getPosition();i+=(0>i?-.5:.5)>>0;for(var e=c.call(this,this._node),n=this._node.getNext();t+i>=e&&n;)t-=e,this._scroller.sequenceFrom(n),this._node=n,n=this._node.getNext(),e=c.call(this,this._node);for(var o,s=this._node.getPrevious();0>=t+i&&s;)o=c.call(this,s),this._scroller.sequenceFrom(s),this._node=s,t+=o,s=this._node.getPrevious();t&&d.call(this,t),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*e&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*e&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function d(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._totalShift+=t,this._springState===x.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===x.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var _=t("../physics/PhysicsEngine"),y=t("../physics/bodies/Particle"),g=t("../physics/forces/Drag"),v=t("../physics/forces/Spring"),m=t("../core/EventHandler"),O=t("../core/OptionsManager"),S=t("../core/ViewSequence"),T=t("../views/Scroller"),w=t("../utilities/Utility"),b=t("../inputs/GenericSync"),E=t("../inputs/ScrollSync"),I=t("../inputs/TouchSync");b.register({scroll:E,touch:I});var x={NONE:0,EDGE:1,PAGE:2},M={TOP:-1,NONE:0,BOTTOM:1};e.DEFAULT_OPTIONS={direction:w.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},e.prototype.getCurrentIndex=function(){return this._node.index},e.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===M.TOP)return null;if(this.getPosition()>1&&this._springState===x.NONE)return l.call(this,0,x.PAGE),this._node;var t=this._node.getPrevious();if(t){var i=c.call(this,t);this._scroller.sequenceFrom(t),this._node=t,d.call(this,i),l.call(this,0,x.PAGE)}return t},e.prototype.goToNextPage=function(){if(!this._node||this._onEdge===M.BOTTOM)return null;var t=this._node.getNext();if(t){var i=c.call(this,this._node);this._scroller.sequenceFrom(t),this._node=t,d.call(this,-i),l.call(this,0,x.PAGE)}return t},e.prototype.goToPage=function(t){var i,e=this.getCurrentIndex();if(e>t)for(i=0;e-t>i;i++)this.goToPreviousPage();if(t>e)for(i=0;t-e>i;i++)this.goToNextPage()},e.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},e.prototype.getPosition=function(){return this._particle.getPosition1D()},e.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},e.prototype.getOffset=e.prototype.getPosition,e.prototype.setPosition=function(t){this._particle.setPosition1D(t)},e.prototype.setOffset=e.prototype.setPosition,e.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},e.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},e.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=w.Direction.X:"y"===t.direction&&(t.direction=w.Direction.Y)),t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(t),this._scroller.setOptions(t),void 0!==t.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==t.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==t.edgePeriod||void 0!==t.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(t.rails||void 0!==t.direction||void 0!==t.syncScale||t.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===w.Direction.X?b.DIRECTION_X:b.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},e.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new S({array:t,trackSize:!0})),this._node=t,this._scroller.sequenceFrom(t)},e.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},e.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&u.call(this),this._scroller.render()},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/ViewSequence":17,"../inputs/GenericSync":27,"../inputs/ScrollSync":32,"../inputs/TouchSync":33,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/forces/Drag":63,"../physics/forces/Spring":68,"../utilities/Utility":95,"../views/Scroller":108}],110:[function(t,i){function e(t){this._items=null,this._size=null,this._outputFunction=e.DEFAULT_OUTPUT_FUNCTION,this.options=r.clone(this.constructor.DEFAULT_OPTIONS||e.DEFAULT_OPTIONS),this.optionsManager=new n(this.options),t&&this.setOptions(t)}var n=t("../core/OptionsManager"),o=t("../core/Transform"),s=t("../core/ViewSequence"),r=t("../utilities/Utility");e.DEFAULT_OPTIONS={direction:r.Direction.Y,itemSpacing:0},e.DEFAULT_OUTPUT_FUNCTION=function(t,i){var e=this.options.direction===r.Direction.X?o.translate(i,0):o.translate(0,i);return{transform:e,target:t.render()}},e.prototype.getSize=function(){return this._size||this.render(),this._size},e.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new s(t)),this._items=t,this},e.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},e.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},e.prototype.render=function(){var t=0,i=1^this.options.direction,e=this._items,n=null,o=[],s={},r=[],a=0;for(this._size=[0,0];e&&(n=e.get());)n.getSize&&(o=n.getSize()),s=this._outputFunction.call(this,n,t,a++),r.push(s),o&&(o[this.options.direction]&&(t+=o[this.options.direction]),o[i]>this._size[i]&&(this._size[i]=o[i])),e=e.getNext(),this.options.itemSpacing&&e&&(t+=this.options.itemSpacing);return this._size[this.options.direction]=t,r},i.exports=e},{"../core/OptionsManager":10,"../core/Transform":15,"../core/ViewSequence":17,"../utilities/Utility":95}],111:[function(t,i){i.exports={ContextualView:t("./ContextualView"),Deck:t("./Deck"),EdgeSwapper:t("./EdgeSwapper"),DrawerLayout:t("./DrawerLayout"),FlexibleLayout:t("./FlexibleLayout"),Flipper:t("./Flipper"),GridLayout:t("./GridLayout"),HeaderFooterLayout:t("./HeaderFooterLayout"),Lightbox:t("./Lightbox"),RenderController:t("./RenderController"),ScrollContainer:t("./ScrollContainer"),Scroller:t("./Scroller"),Scrollview:t("./Scrollview"),SequentialLayout:t("./SequentialLayout")}},{"./ContextualView":97,"./Deck":98,"./DrawerLayout":99,"./EdgeSwapper":100,"./FlexibleLayout":101,"./Flipper":102,"./GridLayout":103,"./HeaderFooterLayout":104,"./Lightbox":105,"./RenderController":106,"./ScrollContainer":107,"./Scroller":108,"./Scrollview":109,"./SequentialLayout":110}],112:[function(t,i){function e(){r.apply(this,arguments),this.title=new o({classes:this.options.classes,content:this.options.content}),this.back=new o({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new o({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new n({id:"master",size:this.options.size,target:[{transform:s.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:s.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(t){var i=t.id,e=t.value;"size"===i?(this.layout.id.master.setSize(e),this.title.setSize(e),this.back.setSize([e[1],e[1]]),this.more.setSize([e[1],e[1]])):"backClasses"===i?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):"backContent"===i?this.back.setContent(this.options.backContent):"classes"===i?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):"content"===i?this.setContent(this.options.content):"moreClasses"===i?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):"moreContent"===i&&this.more.setContent(this.options.content)}.bind(this))}var n=t("../core/Scene"),o=t("../core/Surface"),s=t("../core/Transform"),r=t("../core/View");e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={size:[void 0,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},e.prototype.setContent=function(t){return this.title.setContent(t)},i.exports=e},{"../core/Scene":12,"../core/Surface":14,"../core/Transform":15,"../core/View":16}],113:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this.optionsManager=new c(this.options),t&&this.setOptions(t),this.indicator=new s({size:this.options.indicatorSize,classes:["slider-back"]}),this.label=new o({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]}),this.eventOutput=new a,this.eventInput=new a,a.setInputHandler(this,this.eventInput),a.setOutputHandler(this,this.eventOutput);var i=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new l(["mouse","touch"],{scale:i,direction:l.DIRECTION_X}),this.indicator.pipe(this.sync),this.sync.pipe(this),this.eventInput.on("update",function(t){this.set(t.position)}.bind(this)),this._drawPos=0,n.call(this)}function n(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}var o=t("../core/Surface"),s=t("../surfaces/CanvasSurface"),r=t("../core/Transform"),a=t("../core/EventHandler"),h=t("../math/Utilities"),c=t("../core/OptionsManager"),p=t("../inputs/MouseSync"),u=t("../inputs/TouchSync"),l=t("../inputs/GenericSync");l.register({mouse:p,touch:u}),e.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"},e.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},e.prototype.get=function(){return this.options.value},e.prototype.set=function(t){t!==this.options.value&&(this.options.value=h.clamp(t,this.options.range),n.call(this),this.eventOutput.emit("change",{value:t}))},e.prototype.getSize=function(){return this.options.size},e.prototype.render=function(){var t=this.options.range,i=Math.floor((this.get()-t[0])/(t[1]-t[0])*this.options.indicatorSize[0]);if(i<this._drawPos)this.indicator.getContext("2d").clearRect(i,0,this._drawPos-i+1,this.options.indicatorSize[1]);else if(i>this._drawPos){var e=this.indicator.getContext("2d");e.fillStyle=this.options.fillColor,e.fillRect(this._drawPos-1,0,i-this._drawPos+1,this.options.indicatorSize[1])}return this._drawPos=i,{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:r.translate(0,0,1),origin:[0,0],target:this.label.render()}]}},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Surface":14,"../core/Transform":15,"../inputs/GenericSync":27,"../inputs/MouseSync":28,"../inputs/TouchSync":33,"../math/Utilities":40,"../surfaces/CanvasSurface":74}],114:[function(t,i){function e(){r.apply(this,arguments),this.layout=new a,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",n.bind(this))}function n(t){var i=t.id,e=t.value;if("direction"===i)this.layout.setOptions({dimensions:o.call(this.buttons.length,this.options.direction)});else if("buttons"===i)for(var n in this.buttons)this.buttons[n].setOptions(e);else if("sections"===i)for(var s in this.options.sections)this.defineSection(s,this.options.sections[s])}function o(t,i){return i===s.Direction.X?[t,1]:[1,t]}var s=t("../utilities/Utility"),r=t("../core/View"),a=t("../views/GridLayout"),h=t("./ToggleButton");e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={sections:[],widget:h,size:[void 0,50],direction:s.Direction.X,buttons:{toggleMode:h.ON}},e.prototype.defineSection=function(t,i){var e,n=this._buttonIds[t];if(void 0===n){n=this.buttons.length,this._buttonIds[t]=n;var s=this.options.widget;e=new s,this.buttons[n]=e,this.layout.setOptions({dimensions:o(this.buttons.length,this.options.direction)})}else e=this.buttons[n],e.unbind("select",this._buttonCallbacks[t]);this.options.buttons&&e.setOptions(this.options.buttons),e.setOptions(i),this._buttonCallbacks[t]=this.select.bind(this,t),e.on("select",this._buttonCallbacks[t])},e.prototype.select=function(t){var i=this._buttonIds[t];this.buttons[i]&&this.buttons[i].isSelected()?this._eventOutput.emit("select",{id:t}):this.buttons[i]&&this.buttons[i].select();for(var e=0;e<this.buttons.length;e++)e!==i&&this.buttons[e].deselect()},i.exports=e},{"../core/View":16,"../utilities/Utility":95,"../views/GridLayout":103,"./ToggleButton":115}],115:[function(t,i){function e(t){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:e.TOGGLE,crossfade:!0},this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this.offSurface=new n,this.offSurface.on("click",function(){this.options.toggleMode!==e.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this._eventOutput),this.onSurface=new n,this.onSurface.on("click",function(){this.options.toggleMode!==e.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this._eventOutput),this.arbiter=new s({overlap:this.options.crossfade}),this.deselect(),t&&this.setOptions(t)}var n=t("../core/Surface"),o=t("../core/EventHandler"),s=t("../views/RenderController");e.OFF=0,e.ON=1,e.TOGGLE=2,e.prototype.select=function(){this.selected=!0,this.arbiter.show(this.onSurface,this.options.inTransition),this._eventOutput.emit("select")},e.prototype.deselect=function(){this.selected=!1,this.arbiter.show(this.offSurface,this.options.outTransition),this._eventOutput.emit("deselect")},e.prototype.isSelected=function(){return this.selected},e.prototype.setOptions=function(t){void 0!==t.content&&(this.options.content=t.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),t.offClasses&&(this.options.offClasses=t.offClasses,this.offSurface.setClasses(this.options.offClasses)),t.onClasses&&(this.options.onClasses=t.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==t.size&&(this.options.size=t.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==t.toggleMode&&(this.options.toggleMode=t.toggleMode),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.crossfade&&(this.options.crossfade=t.crossfade,this.arbiter.setOptions({overlap:this.options.crossfade}))},e.prototype.getSize=function(){return this.options.size},e.prototype.render=function(){return this.arbiter.render()},i.exports=e},{"../core/EventHandler":7,"../core/Surface":14,"../views/RenderController":106}],116:[function(t,i){i.exports={NavigationBar:t("./NavigationBar"),Slider:t("./Slider"),TabBar:t("./TabBar"),ToggleButton:t("./ToggleButton")}},{"./NavigationBar":112,"./Slider":113,"./TabBar":114,"./ToggleButton":115}]},{},[23])(23)});
; browserify_shim__define__module__export__(typeof famous != "undefined" ? famous : window.famous);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"/home/codio/workspace/client/scripts/common/controllers/home.js":[function(require,module,exports){
'use strict';
var controllername = 'home';
var ProgressBar = require('progressbar.js');

module.exports = function(app) {
    /*jshint validthis: true */

    var deps = ['$window', '$famous', app.name + '.photos', app.name + '.famousHelper'];

    function controller($window, $famous, photos, famousHelper) {
        var vm = this;
        vm.viewSize = {
            width: $window.innerWidth,
            height: $window.innerHeight
        };
        vm.headerHeight = 200;
        vm.userName = 'John Doe';

        vm.photos = photos.generate(2 * vm.viewSize.width / 3, 2 * vm.viewSize.width / 3, 30, 3);
        vm.photoMain = 'images/background_image.jpg'; //photos.generate(vm.viewSize.width * 2, vm.headerHeight * 2)[0][0];
        vm.photoMainBlurred = 'images/background_image_blurred.jpg';
        vm.photoProfile = photos.generate(100, 100)[0][0];

        vm.getPhotoStyle = photos.getStyle;

        var EventHandler = $famous['famous/core/EventHandler'];
        vm.eventHandler = new EventHandler();

        var getScrollView = function() {
            vm.scrollview = famousHelper.getRenderNode(vm.scrollview, '#scrollView');
            return vm.scrollview;
        };

        var getMainPhoto = function() {
            vm.mainPhoto = famousHelper.getRenderNode(vm.mainPhoto, '#mainPhoto');
            return vm.mainPhoto;
        };

        vm.getOverpull = function() {
            return -Math.min(0, getScrollView().getAbsolutePosition());
        };

        vm.getToolbarTranslate = function() {
            var pos = getScrollView().getAbsolutePosition();
            return pos > (vm.headerHeight - 60) ? pos - (vm.headerHeight - 60) : 0;
        };

        var Timer = $famous['famous/utilities/Timer'];
        Timer.every(function() {
            var pos = vm.getOverpull();
            // rever the comments to blur with css
            //             if(getMainPhoto()) {
            //                 vm.mainPhoto.setProperties({
            //                     webkitFilter: 'blur(' + getBlur(pos) + 'px)'
            //                 });
            //             }
            fillCircle(Math.min(1, pos / 250));
        }, 2);

        function getBlur(pos) {
            var distance = 50;
            var blur = pos > distance ? Math.min(Math.round((pos - distance) / 15), 10) : 0;
            return blur;
        }

        vm.getOpacityBlur = function() {
            var pos = vm.getOverpull();

            var blur = getBlur(pos);
            var opacity = Math.min(blur / 10, 1);

            return opacity;
        };

        var fillCircle = function(value) {
            if(vm.circle) {
                vm.circle.set(value);
                return;
            }
            vm.circle = new ProgressBar.Circle($window.document.getElementById('circleSvgContainer'), {
                color: '#3498DB',
                strokeWidth: 4,
                fill: '#FFFFFF'
            });
        };
    }

    controller.$inject = deps;
    app.controller(app.name + '.' + controllername, controller);
};
},{"progressbar.js":"/home/codio/workspace/node_modules/progressbar.js/progressbar.js"}],"/home/codio/workspace/client/scripts/common/controllers/index.js":[function(require,module,exports){
'use strict';

module.exports = function(app) {
    // inject:start
    require('./home')(app);
    // inject:end
};
},{"./home":"/home/codio/workspace/client/scripts/common/controllers/home.js"}],"/home/codio/workspace/client/scripts/common/index.js":[function(require,module,exports){
'use strict';
require('angular-ui-router');

require('famous-angular');

var modulename = 'common';

module.exports = function(namespace) {

    var fullname = namespace + '.' + modulename;

    var angular = require('angular');
    var app = angular.module(fullname, ['ui.router', 'famous.angular']);
    // inject:folders start
    require('./controllers')(app);
    require('./services')(app);

    // inject:folders end
    app.config(['$stateProvider', '$urlRouterProvider',
        function($stateProvider, $urlRouterProvider) {
            $urlRouterProvider.otherwise('/');
            $stateProvider.state('home', {
                url: '/',
                template: require('./views/home.html'),
                controller: fullname + '.home',
                controllerAs: 'vm'
            });
        }
    ]);
    return app;
};
},{"./controllers":"/home/codio/workspace/client/scripts/common/controllers/index.js","./services":"/home/codio/workspace/client/scripts/common/services/index.js","./views/home.html":"/home/codio/workspace/client/scripts/common/views/home.html","angular":"/home/codio/workspace/bower_components/angular/angular.min.js","angular-ui-router":"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js","famous-angular":"/home/codio/workspace/bower_components/famous-angular/dist/famous-angular.min.js"}],"/home/codio/workspace/client/scripts/common/services/famousHelper.js":[function(require,module,exports){
'use strict';
var servicename = 'famousHelper';

module.exports = function(app) {

    var dependencies = ['$famous'];

    function service($famous) {
        var getRenderNode = function(cacheEl, findSelector) {
            if(!cacheEl) {
                var el = $famous.find(findSelector)[0];
                if(el) {
                    cacheEl = el.renderNode;
                }
            }
            return cacheEl;
        };

        return {
            getRenderNode: getRenderNode
        };

    }
    service.$inject = dependencies;
    app.factory(app.name + '.' + servicename, service);
};
},{}],"/home/codio/workspace/client/scripts/common/services/index.js":[function(require,module,exports){
'use strict';

module.exports = function(app) {
    // inject:start
    require('./famousHelper')(app);
    require('./photos')(app);
    // inject:end
};
},{"./famousHelper":"/home/codio/workspace/client/scripts/common/services/famousHelper.js","./photos":"/home/codio/workspace/client/scripts/common/services/photos.js"}],"/home/codio/workspace/client/scripts/common/services/photos.js":[function(require,module,exports){
'use strict';
var servicename = 'photos';
var _ = require('lodash');
var randomstring = require('randomstring');
module.exports = function(app) {

    var dependencies = [];

    function service() {
        var generate = function(width, height, number, groupOf) {
            number = number || 1;
            groupOf = groupOf || 1;
            var photos = _.chain(_.range(number))
                .map(function(index) {
                    return 'http://lorempixel.com/' + Math.round(width) + '/' + Math.round(height) + '/?i=' + randomstring.generate(7);
                })
                .groupBy(function(value, i) {
                    return Math.floor(i / groupOf);
                })
                .value();

            return photos;
        };

        var getStyle = function(photoUrl) {
            return {
                'background-image': 'url(\'' + photoUrl + '\')',
                'background-size': 'cover',
                'background-repeat': 'no-repeat',
                'background-position': 'center',
                'width': '100%',
                'height': '100%'
            };
        };

        return {
            generate: generate,
            getStyle: getStyle
        };
    }
    service.$inject = dependencies;
    app.factory(app.name + '.' + servicename, service);
};
},{"lodash":"/home/codio/workspace/node_modules/lodash/dist/lodash.js","randomstring":"/home/codio/workspace/node_modules/randomstring/index.js"}],"/home/codio/workspace/client/scripts/common/views/home.html":[function(require,module,exports){
module.exports = '<fa-view>\n' +
    '    <!-- SCROLL VIEW-->\n' +
    '    <fa-scroll-view id="scrollView" fa-options="{direction: 1, edgeGrip:1}" fa-pipe-from="vm.eventHandler">\n' +
    '        <!-- HEADER -->\n' +
    '        <fa-view>\n' +
    '            <fa-modifier fa-size="[undefined, vm.headerHeight]" fa-translate="[0, vm.getToolbarTranslate()]">\n' +
    '                <fa-surface></fa-surface>\n' +
    '                <!-- MAIN PHOTO -->\n' +
    '                <fa-modifier fa-align="[0.5,0]" fa-origin="[0.5,0]" fa-size="[vm.viewSize.width+vm.getOverpull(), vm.headerHeight+15+vm.getOverpull()]" fa-translate="[0, -15-vm.getOverpull()]" fa-opacity="1">\n' +
    '                    <fa-modifier >\n' +
    '                        <fa-surface class="full-height" fa-z-index="2" fa-pipe-to="vm.eventHandler" >\n' +
    '                            <div id="mainPhoto" class="full-height" ng-style="vm.getPhotoStyle(vm.photoMain)"></div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                    <fa-modifier fa-opacity="vm.getOpacityBlur()">\n' +
    '                        <fa-surface class="full-height" fa-z-index="3" fa-pipe-to="vm.eventHandler" >\n' +
    '                            <div id="mainPhoto" class="full-height" ng-style="vm.getPhotoStyle(vm.photoMainBlurred)"></div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                </fa-modifier>\n' +
    '                <!-- PROFILE PICTURE AND TEXT  -->\n' +
    '                <fa-modifier fa-align="[0.5,0.5]" fa-origin="[0.5,0.5]" fa-size="[200,110]" fa-translate="[0,-20-vm.getOverpull()/2]">\n' +
    '                    <!-- PROFILE CIRCLE -->\n' +
    '                    <fa-modifier fa-size="[88,88]" fa-align="[0.5,0]" fa-origin="[0.5,0]" fa-translate="[0, -4]">\n' +
    '                        <fa-surface class="circle full-height" fa-z-index="4" fa-pipe-to="vm.eventHandler">\n' +
    '                            <div id="circleSvgContainer"></div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                    <fa-modifier fa-size="[80,80]" fa-align="[0.5,0]" fa-origin="[0.5,0]">\n' +
    '                        <fa-surface class="full-height" fa-z-index="4" fa-pipe-to="vm.eventHandler">\n' +
    '                            <div class="circle full-height" ng-style="vm.getPhotoStyle(vm.photoProfile)">\n' +
    '                            </div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                    <fa-modifier fa-size="[undefined,20]" fa-align="[0.5,1]" fa-origin="[0.5,1]">\n' +
    '                        <fa-surface class="white text-center text-small full-height" fa-z-index="4" fa-pipe-to="vm.eventHandler">\n' +
    '                            <div>{{vm.userName}}</div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                </fa-modifier>\n' +
    '                <!-- HEADER TOOLBAR -->\n' +
    '                <fa-modifier fa-size="[undefined, 40]" fa-align="[0,1]" fa-origin="[0,1]" fa-translate=[0,0,10]>\n' +
    '                    <fa-modifier fa-opacity="0.6">\n' +
    '                        <fa-surface fa-background-color="\'black\'"></fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                    <fa-grid-layout fa-options="{dimensions: [3,1]}">\n' +
    '                        <fa-surface>\n' +
    '                            <div class="text-center-40">Photo</div>\n' +
    '                        </fa-surface>\n' +
    '                        <fa-surface>\n' +
    '                            <div class="text-center-40 border-bottom">Albums</div>\n' +
    '                        </fa-surface>\n' +
    '                        <fa-surface>\n' +
    '                            <div class="text-center-40">Groups</div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-grid-layout>\n' +
    '                </fa-modifier>\n' +
    '            </fa-modifier>\n' +
    '        </fa-view>\n' +
    '        <!-- IMAGES GRID-->\n' +
    '        <fa-view ng-repeat="row in vm.photos track by $index" fa-size="[undefined, vm.viewSize.width/3]" fa-index="$index">\n' +
    '            <fa-modifier>\n' +
    '                <fa-grid-layout fa-options="{dimensions :[3,1]}">\n' +
    '                    <fa-modifier ng-repeat="photo in row" fa-size="[vm.viewSize.width/3, vm.viewSize.width/3]">\n' +
    '                        <fa-surface fa-pipe-to="vm.eventHandler" fa-background-color="\'black\'" class="full-height">\n' +
    '                            <div class="full-height photo{{$index}}">\n' +
    '                                <div class="full-height" ng-style="vm.getPhotoStyle(photo)"></div>\n' +
    '                            </div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                </fa-grid-layout>\n' +
    '            </fa-modifier>\n' +
    '        </fa-view>\n' +
    '    </fa-scroll-view>\n' +
    '    <!-- FOOTER BAR-->\n' +
    '    <fa-modifier fa-size="[undefined, 40]" fa-align="[0,1]" fa-origin="[0,1]">\n' +
    '        <fa-modifier fa-opacity="0.6">\n' +
    '            <fa-surface fa-background-color="\'black\'"></fa-surface>\n' +
    '        </fa-modifier>\n' +
    '        <!-- FOOTER BAR BUTTONS -->\n' +
    '        <fa-grid-layout fa-options="{dimensions: [3,1]}">\n' +
    '            <fa-surface>\n' +
    '                <div class="text-center-40">\n' +
    '                    <i class="fa fa-photo"></i>\n' +
    '                </div>\n' +
    '            </fa-surface>\n' +
    '            <fa-surface>\n' +
    '                <div class="text-center-50">\n' +
    '                    <i class="fa fa-camera fa-2x"></i>\n' +
    '                </div>\n' +
    '            </fa-surface>\n' +
    '            <fa-surface>\n' +
    '                <div class="text-center-40">\n' +
    '                    <i class="fa fa-user"></i>\n' +
    '                </div>\n' +
    '            </fa-surface>\n' +
    '        </fa-grid-layout>\n' +
    '\n' +
    '    </fa-modifier>\n' +
    '</fa-view>';
},{}],"/home/codio/workspace/node_modules/famous-polyfills/classList.js":[function(require,module,exports){

/*
 * classList.js: Cross-browser full element.classList implementation.
 * 2011-06-15
 *
 * By Eli Grey, http://eligrey.com
 * Public Domain.
 * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.
 */

/*global self, document, DOMException */

/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/

if (typeof document !== "undefined" && !("classList" in document.createElement("a"))) {

(function (view) {

"use strict";

var
      classListProp = "classList"
    , protoProp = "prototype"
    , elemCtrProto = (view.HTMLElement || view.Element)[protoProp]
    , objCtr = Object
    , strTrim = String[protoProp].trim || function () {
        return this.replace(/^\s+|\s+$/g, "");
    }
    , arrIndexOf = Array[protoProp].indexOf || function (item) {
        var
              i = 0
            , len = this.length
        ;
        for (; i < len; i++) {
            if (i in this && this[i] === item) {
                return i;
            }
        }
        return -1;
    }
    // Vendors: please allow content code to instantiate DOMExceptions
    , DOMEx = function (type, message) {
        this.name = type;
        this.code = DOMException[type];
        this.message = message;
    }
    , checkTokenAndGetIndex = function (classList, token) {
        if (token === "") {
            throw new DOMEx(
                  "SYNTAX_ERR"
                , "An invalid or illegal string was specified"
            );
        }
        if (/\s/.test(token)) {
            throw new DOMEx(
                  "INVALID_CHARACTER_ERR"
                , "String contains an invalid character"
            );
        }
        return arrIndexOf.call(classList, token);
    }
    , ClassList = function (elem) {
        var
              trimmedClasses = strTrim.call(elem.className)
            , classes = trimmedClasses ? trimmedClasses.split(/\s+/) : []
            , i = 0
            , len = classes.length
        ;
        for (; i < len; i++) {
            this.push(classes[i]);
        }
        this._updateClassName = function () {
            elem.className = this.toString();
        };
    }
    , classListProto = ClassList[protoProp] = []
    , classListGetter = function () {
        return new ClassList(this);
    }
;
// Most DOMException implementations don't allow calling DOMException's toString()
// on non-DOMExceptions. Error's toString() is sufficient here.
DOMEx[protoProp] = Error[protoProp];
classListProto.item = function (i) {
    return this[i] || null;
};
classListProto.contains = function (token) {
    token += "";
    return checkTokenAndGetIndex(this, token) !== -1;
};
classListProto.add = function (token) {
    token += "";
    if (checkTokenAndGetIndex(this, token) === -1) {
        this.push(token);
        this._updateClassName();
    }
};
classListProto.remove = function (token) {
    token += "";
    var index = checkTokenAndGetIndex(this, token);
    if (index !== -1) {
        this.splice(index, 1);
        this._updateClassName();
    }
};
classListProto.toggle = function (token) {
    token += "";
    if (checkTokenAndGetIndex(this, token) === -1) {
        this.add(token);
    } else {
        this.remove(token);
    }
};
classListProto.toString = function () {
    return this.join(" ");
};

if (objCtr.defineProperty) {
    var classListPropDesc = {
          get: classListGetter
        , enumerable: true
        , configurable: true
    };
    try {
        objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
    } catch (ex) { // IE 8 doesn't support enumerable:true
        if (ex.number === -0x7FF5EC54) {
            classListPropDesc.enumerable = false;
            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
        }
    }
} else if (objCtr[protoProp].__defineGetter__) {
    elemCtrProto.__defineGetter__(classListProp, classListGetter);
}

}(self));

}

},{}],"/home/codio/workspace/node_modules/famous-polyfills/functionPrototypeBind.js":[function(require,module,exports){
if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {
        if (typeof this !== "function") {
            // closest thing possible to the ECMAScript 5 internal IsCallable function
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        }

        var aArgs = Array.prototype.slice.call(arguments, 1),
        fToBind = this,
        fNOP = function () {},
        fBound = function () {
            return fToBind.apply(this instanceof fNOP && oThis
                ? this
                : oThis,
                aArgs.concat(Array.prototype.slice.call(arguments)));
        };

        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();

        return fBound;
    };
}

},{}],"/home/codio/workspace/node_modules/famous-polyfills/index.js":[function(require,module,exports){
require('./classList.js');
require('./functionPrototypeBind.js');
require('./requestAnimationFrame.js');
},{"./classList.js":"/home/codio/workspace/node_modules/famous-polyfills/classList.js","./functionPrototypeBind.js":"/home/codio/workspace/node_modules/famous-polyfills/functionPrototypeBind.js","./requestAnimationFrame.js":"/home/codio/workspace/node_modules/famous-polyfills/requestAnimationFrame.js"}],"/home/codio/workspace/node_modules/famous-polyfills/requestAnimationFrame.js":[function(require,module,exports){
// adds requestAnimationFrame functionality
// Source: http://strd6.com/2011/05/better-window-requestanimationframe-shim/

window.requestAnimationFrame || (window.requestAnimationFrame =
  window.webkitRequestAnimationFrame ||
  window.mozRequestAnimationFrame    ||
  window.oRequestAnimationFrame      ||
  window.msRequestAnimationFrame     ||
  function(callback, element) {
    return window.setTimeout(function() {
      callback(+new Date());
  }, 1000 / 60);
});

},{}],"/home/codio/workspace/node_modules/lodash/dist/lodash.js":[function(require,module,exports){
(function (global){
/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modern -o ./dist/lodash.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
;(function() {

  /** Used as a safe reference for `undefined` in pre ES5 environments */
  var undefined;

  /** Used to pool arrays and objects used internally */
  var arrayPool = [],
      objectPool = [];

  /** Used to generate unique IDs */
  var idCounter = 0;

  /** Used to prefix keys to avoid issues with `__proto__` and properties on `Object.prototype` */
  var keyPrefix = +new Date + '';

  /** Used as the size when optimizations are enabled for large arrays */
  var largeArraySize = 75;

  /** Used as the max size of the `arrayPool` and `objectPool` */
  var maxPoolSize = 40;

  /** Used to detect and test whitespace */
  var whitespace = (
    // whitespace
    ' \t\x0B\f\xA0\ufeff' +

    // line terminators
    '\n\r\u2028\u2029' +

    // unicode category "Zs" space separators
    '\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000'
  );

  /** Used to match empty string literals in compiled template source */
  var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

  /**
   * Used to match ES6 template delimiters
   * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-literals-string-literals
   */
  var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

  /** Used to match regexp flags from their coerced string values */
  var reFlags = /\w*$/;

  /** Used to detected named functions */
  var reFuncName = /^\s*function[ \n\r\t]+\w/;

  /** Used to match "interpolate" template delimiters */
  var reInterpolate = /<%=([\s\S]+?)%>/g;

  /** Used to match leading whitespace and zeros to be removed */
  var reLeadingSpacesAndZeros = RegExp('^[' + whitespace + ']*0+(?=.$)');

  /** Used to ensure capturing order of template delimiters */
  var reNoMatch = /($^)/;

  /** Used to detect functions containing a `this` reference */
  var reThis = /\bthis\b/;

  /** Used to match unescaped characters in compiled string literals */
  var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;

  /** Used to assign default `context` object properties */
  var contextProps = [
    'Array', 'Boolean', 'Date', 'Function', 'Math', 'Number', 'Object',
    'RegExp', 'String', '_', 'attachEvent', 'clearTimeout', 'isFinite', 'isNaN',
    'parseInt', 'setTimeout'
  ];

  /** Used to make template sourceURLs easier to identify */
  var templateCounter = 0;

  /** `Object#toString` result shortcuts */
  var argsClass = '[object Arguments]',
      arrayClass = '[object Array]',
      boolClass = '[object Boolean]',
      dateClass = '[object Date]',
      funcClass = '[object Function]',
      numberClass = '[object Number]',
      objectClass = '[object Object]',
      regexpClass = '[object RegExp]',
      stringClass = '[object String]';

  /** Used to identify object classifications that `_.clone` supports */
  var cloneableClasses = {};
  cloneableClasses[funcClass] = false;
  cloneableClasses[argsClass] = cloneableClasses[arrayClass] =
  cloneableClasses[boolClass] = cloneableClasses[dateClass] =
  cloneableClasses[numberClass] = cloneableClasses[objectClass] =
  cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;

  /** Used as an internal `_.debounce` options object */
  var debounceOptions = {
    'leading': false,
    'maxWait': 0,
    'trailing': false
  };

  /** Used as the property descriptor for `__bindData__` */
  var descriptor = {
    'configurable': false,
    'enumerable': false,
    'value': null,
    'writable': false
  };

  /** Used to determine if values are of the language type Object */
  var objectTypes = {
    'boolean': false,
    'function': true,
    'object': true,
    'number': false,
    'string': false,
    'undefined': false
  };

  /** Used to escape characters for inclusion in compiled string literals */
  var stringEscapes = {
    '\\': '\\',
    "'": "'",
    '\n': 'n',
    '\r': 'r',
    '\t': 't',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  /** Used as a reference to the global object */
  var root = (objectTypes[typeof window] && window) || this;

  /** Detect free variable `exports` */
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  /** Detect free variable `module` */
  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports` */
  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;

  /** Detect free variable `global` from Node.js or Browserified code and use it as `root` */
  var freeGlobal = objectTypes[typeof global] && global;
  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {
    root = freeGlobal;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * The base implementation of `_.indexOf` without support for binary searches
   * or `fromIndex` constraints.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {*} value The value to search for.
   * @param {number} [fromIndex=0] The index to search from.
   * @returns {number} Returns the index of the matched value or `-1`.
   */
  function baseIndexOf(array, value, fromIndex) {
    var index = (fromIndex || 0) - 1,
        length = array ? array.length : 0;

    while (++index < length) {
      if (array[index] === value) {
        return index;
      }
    }
    return -1;
  }

  /**
   * An implementation of `_.contains` for cache objects that mimics the return
   * signature of `_.indexOf` by returning `0` if the value is found, else `-1`.
   *
   * @private
   * @param {Object} cache The cache object to inspect.
   * @param {*} value The value to search for.
   * @returns {number} Returns `0` if `value` is found, else `-1`.
   */
  function cacheIndexOf(cache, value) {
    var type = typeof value;
    cache = cache.cache;

    if (type == 'boolean' || value == null) {
      return cache[value] ? 0 : -1;
    }
    if (type != 'number' && type != 'string') {
      type = 'object';
    }
    var key = type == 'number' ? value : keyPrefix + value;
    cache = (cache = cache[type]) && cache[key];

    return type == 'object'
      ? (cache && baseIndexOf(cache, value) > -1 ? 0 : -1)
      : (cache ? 0 : -1);
  }

  /**
   * Adds a given value to the corresponding cache object.
   *
   * @private
   * @param {*} value The value to add to the cache.
   */
  function cachePush(value) {
    var cache = this.cache,
        type = typeof value;

    if (type == 'boolean' || value == null) {
      cache[value] = true;
    } else {
      if (type != 'number' && type != 'string') {
        type = 'object';
      }
      var key = type == 'number' ? value : keyPrefix + value,
          typeCache = cache[type] || (cache[type] = {});

      if (type == 'object') {
        (typeCache[key] || (typeCache[key] = [])).push(value);
      } else {
        typeCache[key] = true;
      }
    }
  }

  /**
   * Used by `_.max` and `_.min` as the default callback when a given
   * collection is a string value.
   *
   * @private
   * @param {string} value The character to inspect.
   * @returns {number} Returns the code unit of given character.
   */
  function charAtCallback(value) {
    return value.charCodeAt(0);
  }

  /**
   * Used by `sortBy` to compare transformed `collection` elements, stable sorting
   * them in ascending order.
   *
   * @private
   * @param {Object} a The object to compare to `b`.
   * @param {Object} b The object to compare to `a`.
   * @returns {number} Returns the sort order indicator of `1` or `-1`.
   */
  function compareAscending(a, b) {
    var ac = a.criteria,
        bc = b.criteria,
        index = -1,
        length = ac.length;

    while (++index < length) {
      var value = ac[index],
          other = bc[index];

      if (value !== other) {
        if (value > other || typeof value == 'undefined') {
          return 1;
        }
        if (value < other || typeof other == 'undefined') {
          return -1;
        }
      }
    }
    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
    // that causes it, under certain circumstances, to return the same value for
    // `a` and `b`. See https://github.com/jashkenas/underscore/pull/1247
    //
    // This also ensures a stable sort in V8 and other engines.
    // See http://code.google.com/p/v8/issues/detail?id=90
    return a.index - b.index;
  }

  /**
   * Creates a cache object to optimize linear searches of large arrays.
   *
   * @private
   * @param {Array} [array=[]] The array to search.
   * @returns {null|Object} Returns the cache object or `null` if caching should not be used.
   */
  function createCache(array) {
    var index = -1,
        length = array.length,
        first = array[0],
        mid = array[(length / 2) | 0],
        last = array[length - 1];

    if (first && typeof first == 'object' &&
        mid && typeof mid == 'object' && last && typeof last == 'object') {
      return false;
    }
    var cache = getObject();
    cache['false'] = cache['null'] = cache['true'] = cache['undefined'] = false;

    var result = getObject();
    result.array = array;
    result.cache = cache;
    result.push = cachePush;

    while (++index < length) {
      result.push(array[index]);
    }
    return result;
  }

  /**
   * Used by `template` to escape characters for inclusion in compiled
   * string literals.
   *
   * @private
   * @param {string} match The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeStringChar(match) {
    return '\\' + stringEscapes[match];
  }

  /**
   * Gets an array from the array pool or creates a new one if the pool is empty.
   *
   * @private
   * @returns {Array} The array from the pool.
   */
  function getArray() {
    return arrayPool.pop() || [];
  }

  /**
   * Gets an object from the object pool or creates a new one if the pool is empty.
   *
   * @private
   * @returns {Object} The object from the pool.
   */
  function getObject() {
    return objectPool.pop() || {
      'array': null,
      'cache': null,
      'criteria': null,
      'false': false,
      'index': 0,
      'null': false,
      'number': null,
      'object': null,
      'push': null,
      'string': null,
      'true': false,
      'undefined': false,
      'value': null
    };
  }

  /**
   * Releases the given array back to the array pool.
   *
   * @private
   * @param {Array} [array] The array to release.
   */
  function releaseArray(array) {
    array.length = 0;
    if (arrayPool.length < maxPoolSize) {
      arrayPool.push(array);
    }
  }

  /**
   * Releases the given object back to the object pool.
   *
   * @private
   * @param {Object} [object] The object to release.
   */
  function releaseObject(object) {
    var cache = object.cache;
    if (cache) {
      releaseObject(cache);
    }
    object.array = object.cache = object.criteria = object.object = object.number = object.string = object.value = null;
    if (objectPool.length < maxPoolSize) {
      objectPool.push(object);
    }
  }

  /**
   * Slices the `collection` from the `start` index up to, but not including,
   * the `end` index.
   *
   * Note: This function is used instead of `Array#slice` to support node lists
   * in IE < 9 and to ensure dense arrays are returned.
   *
   * @private
   * @param {Array|Object|string} collection The collection to slice.
   * @param {number} start The start index.
   * @param {number} end The end index.
   * @returns {Array} Returns the new array.
   */
  function slice(array, start, end) {
    start || (start = 0);
    if (typeof end == 'undefined') {
      end = array ? array.length : 0;
    }
    var index = -1,
        length = end - start || 0,
        result = Array(length < 0 ? 0 : length);

    while (++index < length) {
      result[index] = array[start + index];
    }
    return result;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Create a new `lodash` function using the given context object.
   *
   * @static
   * @memberOf _
   * @category Utilities
   * @param {Object} [context=root] The context object.
   * @returns {Function} Returns the `lodash` function.
   */
  function runInContext(context) {
    // Avoid issues with some ES3 environments that attempt to use values, named
    // after built-in constructors like `Object`, for the creation of literals.
    // ES5 clears this up by stating that literals must use built-in constructors.
    // See http://es5.github.io/#x11.1.5.
    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;

    /** Native constructor references */
    var Array = context.Array,
        Boolean = context.Boolean,
        Date = context.Date,
        Function = context.Function,
        Math = context.Math,
        Number = context.Number,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;

    /**
     * Used for `Array` method references.
     *
     * Normally `Array.prototype` would suffice, however, using an array literal
     * avoids issues in Narwhal.
     */
    var arrayRef = [];

    /** Used for native method references */
    var objectProto = Object.prototype;

    /** Used to restore the original `_` reference in `noConflict` */
    var oldDash = context._;

    /** Used to resolve the internal [[Class]] of values */
    var toString = objectProto.toString;

    /** Used to detect if a method is native */
    var reNative = RegExp('^' +
      String(toString)
        .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
        .replace(/toString| for [^\]]+/g, '.*?') + '$'
    );

    /** Native method shortcuts */
    var ceil = Math.ceil,
        clearTimeout = context.clearTimeout,
        floor = Math.floor,
        fnToString = Function.prototype.toString,
        getPrototypeOf = isNative(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,
        hasOwnProperty = objectProto.hasOwnProperty,
        push = arrayRef.push,
        setTimeout = context.setTimeout,
        splice = arrayRef.splice,
        unshift = arrayRef.unshift;

    /** Used to set meta data on functions */
    var defineProperty = (function() {
      // IE 8 only accepts DOM elements
      try {
        var o = {},
            func = isNative(func = Object.defineProperty) && func,
            result = func(o, o, o) && func;
      } catch(e) { }
      return result;
    }());

    /* Native method shortcuts for methods with the same name as other `lodash` methods */
    var nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate,
        nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray,
        nativeIsFinite = context.isFinite,
        nativeIsNaN = context.isNaN,
        nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys,
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random;

    /** Used to lookup a built-in constructor by [[Class]] */
    var ctorByClass = {};
    ctorByClass[arrayClass] = Array;
    ctorByClass[boolClass] = Boolean;
    ctorByClass[dateClass] = Date;
    ctorByClass[funcClass] = Function;
    ctorByClass[objectClass] = Object;
    ctorByClass[numberClass] = Number;
    ctorByClass[regexpClass] = RegExp;
    ctorByClass[stringClass] = String;

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object which wraps the given value to enable intuitive
     * method chaining.
     *
     * In addition to Lo-Dash methods, wrappers also have the following `Array` methods:
     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`, `splice`,
     * and `unshift`
     *
     * Chaining is supported in custom builds as long as the `value` method is
     * implicitly or explicitly included in the build.
     *
     * The chainable wrapper functions are:
     * `after`, `assign`, `bind`, `bindAll`, `bindKey`, `chain`, `compact`,
     * `compose`, `concat`, `countBy`, `create`, `createCallback`, `curry`,
     * `debounce`, `defaults`, `defer`, `delay`, `difference`, `filter`, `flatten`,
     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,
     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,
     * `invoke`, `keys`, `map`, `max`, `memoize`, `merge`, `min`, `object`, `omit`,
     * `once`, `pairs`, `partial`, `partialRight`, `pick`, `pluck`, `pull`, `push`,
     * `range`, `reject`, `remove`, `rest`, `reverse`, `shuffle`, `slice`, `sort`,
     * `sortBy`, `splice`, `tap`, `throttle`, `times`, `toArray`, `transform`,
     * `union`, `uniq`, `unshift`, `unzip`, `values`, `where`, `without`, `wrap`,
     * and `zip`
     *
     * The non-chainable wrapper functions are:
     * `clone`, `cloneDeep`, `contains`, `escape`, `every`, `find`, `findIndex`,
     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `has`, `identity`,
     * `indexOf`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,
     * `isEmpty`, `isEqual`, `isFinite`, `isFunction`, `isNaN`, `isNull`, `isNumber`,
     * `isObject`, `isPlainObject`, `isRegExp`, `isString`, `isUndefined`, `join`,
     * `lastIndexOf`, `mixin`, `noConflict`, `parseInt`, `pop`, `random`, `reduce`,
     * `reduceRight`, `result`, `shift`, `size`, `some`, `sortedIndex`, `runInContext`,
     * `template`, `unescape`, `uniqueId`, and `value`
     *
     * The wrapper functions `first` and `last` return wrapped values when `n` is
     * provided, otherwise they return unwrapped values.
     *
     * Explicit chaining can be enabled by using the `_.chain` method.
     *
     * @name _
     * @constructor
     * @category Chaining
     * @param {*} value The value to wrap in a `lodash` instance.
     * @returns {Object} Returns a `lodash` instance.
     * @example
     *
     * var wrapped = _([1, 2, 3]);
     *
     * // returns an unwrapped value
     * wrapped.reduce(function(sum, num) {
     *   return sum + num;
     * });
     * // => 6
     *
     * // returns a wrapped value
     * var squares = wrapped.map(function(num) {
     *   return num * num;
     * });
     *
     * _.isArray(squares);
     * // => false
     *
     * _.isArray(squares.value());
     * // => true
     */
    function lodash(value) {
      // don't wrap if already wrapped, even if wrapped by a different `lodash` constructor
      return (value && typeof value == 'object' && !isArray(value) && hasOwnProperty.call(value, '__wrapped__'))
       ? value
       : new lodashWrapper(value);
    }

    /**
     * A fast path for creating `lodash` wrapper objects.
     *
     * @private
     * @param {*} value The value to wrap in a `lodash` instance.
     * @param {boolean} chainAll A flag to enable chaining for all methods
     * @returns {Object} Returns a `lodash` instance.
     */
    function lodashWrapper(value, chainAll) {
      this.__chain__ = !!chainAll;
      this.__wrapped__ = value;
    }
    // ensure `new lodashWrapper` is an instance of `lodash`
    lodashWrapper.prototype = lodash.prototype;

    /**
     * An object used to flag environments features.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    var support = lodash.support = {};

    /**
     * Detect if functions can be decompiled by `Function#toString`
     * (all but PS3 and older Opera mobile browsers & avoided in Windows 8 apps).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.funcDecomp = !isNative(context.WinRTError) && reThis.test(runInContext);

    /**
     * Detect if `Function#name` is supported (all but IE).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.funcNames = typeof Function.name == 'string';

    /**
     * By default, the template delimiters used by Lo-Dash are similar to those in
     * embedded Ruby (ERB). Change the following template settings to use alternative
     * delimiters.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    lodash.templateSettings = {

      /**
       * Used to detect `data` property values to be HTML-escaped.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'escape': /<%-([\s\S]+?)%>/g,

      /**
       * Used to detect code to be evaluated.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'evaluate': /<%([\s\S]+?)%>/g,

      /**
       * Used to detect `data` property values to inject.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'interpolate': reInterpolate,

      /**
       * Used to reference the data object in the template text.
       *
       * @memberOf _.templateSettings
       * @type string
       */
      'variable': '',

      /**
       * Used to import variables into the compiled template.
       *
       * @memberOf _.templateSettings
       * @type Object
       */
      'imports': {

        /**
         * A reference to the `lodash` function.
         *
         * @memberOf _.templateSettings.imports
         * @type Function
         */
        '_': lodash
      }
    };

    /*--------------------------------------------------------------------------*/

    /**
     * The base implementation of `_.bind` that creates the bound function and
     * sets its meta data.
     *
     * @private
     * @param {Array} bindData The bind data array.
     * @returns {Function} Returns the new bound function.
     */
    function baseBind(bindData) {
      var func = bindData[0],
          partialArgs = bindData[2],
          thisArg = bindData[4];

      function bound() {
        // `Function#bind` spec
        // http://es5.github.io/#x15.3.4.5
        if (partialArgs) {
          // avoid `arguments` object deoptimizations by using `slice` instead
          // of `Array.prototype.slice.call` and not assigning `arguments` to a
          // variable as a ternary expression
          var args = slice(partialArgs);
          push.apply(args, arguments);
        }
        // mimic the constructor's `return` behavior
        // http://es5.github.io/#x13.2.2
        if (this instanceof bound) {
          // ensure `new bound` is an instance of `func`
          var thisBinding = baseCreate(func.prototype),
              result = func.apply(thisBinding, args || arguments);
          return isObject(result) ? result : thisBinding;
        }
        return func.apply(thisArg, args || arguments);
      }
      setBindData(bound, bindData);
      return bound;
    }

    /**
     * The base implementation of `_.clone` without argument juggling or support
     * for `thisArg` binding.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep=false] Specify a deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates clones with source counterparts.
     * @returns {*} Returns the cloned value.
     */
    function baseClone(value, isDeep, callback, stackA, stackB) {
      if (callback) {
        var result = callback(value);
        if (typeof result != 'undefined') {
          return result;
        }
      }
      // inspect [[Class]]
      var isObj = isObject(value);
      if (isObj) {
        var className = toString.call(value);
        if (!cloneableClasses[className]) {
          return value;
        }
        var ctor = ctorByClass[className];
        switch (className) {
          case boolClass:
          case dateClass:
            return new ctor(+value);

          case numberClass:
          case stringClass:
            return new ctor(value);

          case regexpClass:
            result = ctor(value.source, reFlags.exec(value));
            result.lastIndex = value.lastIndex;
            return result;
        }
      } else {
        return value;
      }
      var isArr = isArray(value);
      if (isDeep) {
        // check for circular references and return corresponding clone
        var initedStack = !stackA;
        stackA || (stackA = getArray());
        stackB || (stackB = getArray());

        var length = stackA.length;
        while (length--) {
          if (stackA[length] == value) {
            return stackB[length];
          }
        }
        result = isArr ? ctor(value.length) : {};
      }
      else {
        result = isArr ? slice(value) : assign({}, value);
      }
      // add array properties assigned by `RegExp#exec`
      if (isArr) {
        if (hasOwnProperty.call(value, 'index')) {
          result.index = value.index;
        }
        if (hasOwnProperty.call(value, 'input')) {
          result.input = value.input;
        }
      }
      // exit for shallow clone
      if (!isDeep) {
        return result;
      }
      // add the source value to the stack of traversed objects
      // and associate it with its clone
      stackA.push(value);
      stackB.push(result);

      // recursively populate clone (susceptible to call stack limits)
      (isArr ? forEach : forOwn)(value, function(objValue, key) {
        result[key] = baseClone(objValue, isDeep, callback, stackA, stackB);
      });

      if (initedStack) {
        releaseArray(stackA);
        releaseArray(stackB);
      }
      return result;
    }

    /**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} prototype The object to inherit from.
     * @returns {Object} Returns the new object.
     */
    function baseCreate(prototype, properties) {
      return isObject(prototype) ? nativeCreate(prototype) : {};
    }
    // fallback for browsers without `Object.create`
    if (!nativeCreate) {
      baseCreate = (function() {
        function Object() {}
        return function(prototype) {
          if (isObject(prototype)) {
            Object.prototype = prototype;
            var result = new Object;
            Object.prototype = null;
          }
          return result || context.Object();
        };
      }());
    }

    /**
     * The base implementation of `_.createCallback` without support for creating
     * "_.pluck" or "_.where" style callbacks.
     *
     * @private
     * @param {*} [func=identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of the created callback.
     * @param {number} [argCount] The number of arguments the callback accepts.
     * @returns {Function} Returns a callback function.
     */
    function baseCreateCallback(func, thisArg, argCount) {
      if (typeof func != 'function') {
        return identity;
      }
      // exit early for no `thisArg` or already bound by `Function#bind`
      if (typeof thisArg == 'undefined' || !('prototype' in func)) {
        return func;
      }
      var bindData = func.__bindData__;
      if (typeof bindData == 'undefined') {
        if (support.funcNames) {
          bindData = !func.name;
        }
        bindData = bindData || !support.funcDecomp;
        if (!bindData) {
          var source = fnToString.call(func);
          if (!support.funcNames) {
            bindData = !reFuncName.test(source);
          }
          if (!bindData) {
            // checks if `func` references the `this` keyword and stores the result
            bindData = reThis.test(source);
            setBindData(func, bindData);
          }
        }
      }
      // exit early if there are no `this` references or `func` is bound
      if (bindData === false || (bindData !== true && bindData[1] & 1)) {
        return func;
      }
      switch (argCount) {
        case 1: return function(value) {
          return func.call(thisArg, value);
        };
        case 2: return function(a, b) {
          return func.call(thisArg, a, b);
        };
        case 3: return function(value, index, collection) {
          return func.call(thisArg, value, index, collection);
        };
        case 4: return function(accumulator, value, index, collection) {
          return func.call(thisArg, accumulator, value, index, collection);
        };
      }
      return bind(func, thisArg);
    }

    /**
     * The base implementation of `createWrapper` that creates the wrapper and
     * sets its meta data.
     *
     * @private
     * @param {Array} bindData The bind data array.
     * @returns {Function} Returns the new function.
     */
    function baseCreateWrapper(bindData) {
      var func = bindData[0],
          bitmask = bindData[1],
          partialArgs = bindData[2],
          partialRightArgs = bindData[3],
          thisArg = bindData[4],
          arity = bindData[5];

      var isBind = bitmask & 1,
          isBindKey = bitmask & 2,
          isCurry = bitmask & 4,
          isCurryBound = bitmask & 8,
          key = func;

      function bound() {
        var thisBinding = isBind ? thisArg : this;
        if (partialArgs) {
          var args = slice(partialArgs);
          push.apply(args, arguments);
        }
        if (partialRightArgs || isCurry) {
          args || (args = slice(arguments));
          if (partialRightArgs) {
            push.apply(args, partialRightArgs);
          }
          if (isCurry && args.length < arity) {
            bitmask |= 16 & ~32;
            return baseCreateWrapper([func, (isCurryBound ? bitmask : bitmask & ~3), args, null, thisArg, arity]);
          }
        }
        args || (args = arguments);
        if (isBindKey) {
          func = thisBinding[key];
        }
        if (this instanceof bound) {
          thisBinding = baseCreate(func.prototype);
          var result = func.apply(thisBinding, args);
          return isObject(result) ? result : thisBinding;
        }
        return func.apply(thisBinding, args);
      }
      setBindData(bound, bindData);
      return bound;
    }

    /**
     * The base implementation of `_.difference` that accepts a single array
     * of values to exclude.
     *
     * @private
     * @param {Array} array The array to process.
     * @param {Array} [values] The array of values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     */
    function baseDifference(array, values) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array ? array.length : 0,
          isLarge = length >= largeArraySize && indexOf === baseIndexOf,
          result = [];

      if (isLarge) {
        var cache = createCache(values);
        if (cache) {
          indexOf = cacheIndexOf;
          values = cache;
        } else {
          isLarge = false;
        }
      }
      while (++index < length) {
        var value = array[index];
        if (indexOf(values, value) < 0) {
          result.push(value);
        }
      }
      if (isLarge) {
        releaseObject(values);
      }
      return result;
    }

    /**
     * The base implementation of `_.flatten` without support for callback
     * shorthands or `thisArg` binding.
     *
     * @private
     * @param {Array} array The array to flatten.
     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.
     * @param {boolean} [isStrict=false] A flag to restrict flattening to arrays and `arguments` objects.
     * @param {number} [fromIndex=0] The index to start from.
     * @returns {Array} Returns a new flattened array.
     */
    function baseFlatten(array, isShallow, isStrict, fromIndex) {
      var index = (fromIndex || 0) - 1,
          length = array ? array.length : 0,
          result = [];

      while (++index < length) {
        var value = array[index];

        if (value && typeof value == 'object' && typeof value.length == 'number'
            && (isArray(value) || isArguments(value))) {
          // recursively flatten arrays (susceptible to call stack limits)
          if (!isShallow) {
            value = baseFlatten(value, isShallow, isStrict);
          }
          var valIndex = -1,
              valLength = value.length,
              resIndex = result.length;

          result.length += valLength;
          while (++valIndex < valLength) {
            result[resIndex++] = value[valIndex];
          }
        } else if (!isStrict) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.isEqual`, without support for `thisArg` binding,
     * that allows partial "_.where" style comparisons.
     *
     * @private
     * @param {*} a The value to compare.
     * @param {*} b The other value to compare.
     * @param {Function} [callback] The function to customize comparing values.
     * @param {Function} [isWhere=false] A flag to indicate performing partial comparisons.
     * @param {Array} [stackA=[]] Tracks traversed `a` objects.
     * @param {Array} [stackB=[]] Tracks traversed `b` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */
    function baseIsEqual(a, b, callback, isWhere, stackA, stackB) {
      // used to indicate that when comparing objects, `a` has at least the properties of `b`
      if (callback) {
        var result = callback(a, b);
        if (typeof result != 'undefined') {
          return !!result;
        }
      }
      // exit early for identical values
      if (a === b) {
        // treat `+0` vs. `-0` as not equal
        return a !== 0 || (1 / a == 1 / b);
      }
      var type = typeof a,
          otherType = typeof b;

      // exit early for unlike primitive values
      if (a === a &&
          !(a && objectTypes[type]) &&
          !(b && objectTypes[otherType])) {
        return false;
      }
      // exit early for `null` and `undefined` avoiding ES3's Function#call behavior
      // http://es5.github.io/#x15.3.4.4
      if (a == null || b == null) {
        return a === b;
      }
      // compare [[Class]] names
      var className = toString.call(a),
          otherClass = toString.call(b);

      if (className == argsClass) {
        className = objectClass;
      }
      if (otherClass == argsClass) {
        otherClass = objectClass;
      }
      if (className != otherClass) {
        return false;
      }
      switch (className) {
        case boolClass:
        case dateClass:
          // coerce dates and booleans to numbers, dates to milliseconds and booleans
          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal
          return +a == +b;

        case numberClass:
          // treat `NaN` vs. `NaN` as equal
          return (a != +a)
            ? b != +b
            // but treat `+0` vs. `-0` as not equal
            : (a == 0 ? (1 / a == 1 / b) : a == +b);

        case regexpClass:
        case stringClass:
          // coerce regexes to strings (http://es5.github.io/#x15.10.6.4)
          // treat string primitives and their corresponding object instances as equal
          return a == String(b);
      }
      var isArr = className == arrayClass;
      if (!isArr) {
        // unwrap any `lodash` wrapped values
        var aWrapped = hasOwnProperty.call(a, '__wrapped__'),
            bWrapped = hasOwnProperty.call(b, '__wrapped__');

        if (aWrapped || bWrapped) {
          return baseIsEqual(aWrapped ? a.__wrapped__ : a, bWrapped ? b.__wrapped__ : b, callback, isWhere, stackA, stackB);
        }
        // exit for functions and DOM nodes
        if (className != objectClass) {
          return false;
        }
        // in older versions of Opera, `arguments` objects have `Array` constructors
        var ctorA = a.constructor,
            ctorB = b.constructor;

        // non `Object` object instances with different constructors are not equal
        if (ctorA != ctorB &&
              !(isFunction(ctorA) && ctorA instanceof ctorA && isFunction(ctorB) && ctorB instanceof ctorB) &&
              ('constructor' in a && 'constructor' in b)
            ) {
          return false;
        }
      }
      // assume cyclic structures are equal
      // the algorithm for detecting cyclic structures is adapted from ES 5.1
      // section 15.12.3, abstract operation `JO` (http://es5.github.io/#x15.12.3)
      var initedStack = !stackA;
      stackA || (stackA = getArray());
      stackB || (stackB = getArray());

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == a) {
          return stackB[length] == b;
        }
      }
      var size = 0;
      result = true;

      // add `a` and `b` to the stack of traversed objects
      stackA.push(a);
      stackB.push(b);

      // recursively compare objects and arrays (susceptible to call stack limits)
      if (isArr) {
        // compare lengths to determine if a deep comparison is necessary
        length = a.length;
        size = b.length;
        result = size == length;

        if (result || isWhere) {
          // deep compare the contents, ignoring non-numeric properties
          while (size--) {
            var index = length,
                value = b[size];

            if (isWhere) {
              while (index--) {
                if ((result = baseIsEqual(a[index], value, callback, isWhere, stackA, stackB))) {
                  break;
                }
              }
            } else if (!(result = baseIsEqual(a[size], value, callback, isWhere, stackA, stackB))) {
              break;
            }
          }
        }
      }
      else {
        // deep compare objects using `forIn`, instead of `forOwn`, to avoid `Object.keys`
        // which, in this case, is more costly
        forIn(b, function(value, key, b) {
          if (hasOwnProperty.call(b, key)) {
            // count the number of properties.
            size++;
            // deep compare each property value.
            return (result = hasOwnProperty.call(a, key) && baseIsEqual(a[key], value, callback, isWhere, stackA, stackB));
          }
        });

        if (result && !isWhere) {
          // ensure both objects have the same number of properties
          forIn(a, function(value, key, a) {
            if (hasOwnProperty.call(a, key)) {
              // `size` will be `-1` if `a` has more properties than `b`
              return (result = --size > -1);
            }
          });
        }
      }
      stackA.pop();
      stackB.pop();

      if (initedStack) {
        releaseArray(stackA);
        releaseArray(stackB);
      }
      return result;
    }

    /**
     * The base implementation of `_.merge` without argument juggling or support
     * for `thisArg` binding.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} [callback] The function to customize merging properties.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     */
    function baseMerge(object, source, callback, stackA, stackB) {
      (isArray(source) ? forEach : forOwn)(source, function(source, key) {
        var found,
            isArr,
            result = source,
            value = object[key];

        if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
          // avoid merging previously merged cyclic sources
          var stackLength = stackA.length;
          while (stackLength--) {
            if ((found = stackA[stackLength] == source)) {
              value = stackB[stackLength];
              break;
            }
          }
          if (!found) {
            var isShallow;
            if (callback) {
              result = callback(value, source);
              if ((isShallow = typeof result != 'undefined')) {
                value = result;
              }
            }
            if (!isShallow) {
              value = isArr
                ? (isArray(value) ? value : [])
                : (isPlainObject(value) ? value : {});
            }
            // add `source` and associated `value` to the stack of traversed objects
            stackA.push(source);
            stackB.push(value);

            // recursively merge objects and arrays (susceptible to call stack limits)
            if (!isShallow) {
              baseMerge(value, source, callback, stackA, stackB);
            }
          }
        }
        else {
          if (callback) {
            result = callback(value, source);
            if (typeof result == 'undefined') {
              result = source;
            }
          }
          if (typeof result != 'undefined') {
            value = result;
          }
        }
        object[key] = value;
      });
    }

    /**
     * The base implementation of `_.random` without argument juggling or support
     * for returning floating-point numbers.
     *
     * @private
     * @param {number} min The minimum possible value.
     * @param {number} max The maximum possible value.
     * @returns {number} Returns a random number.
     */
    function baseRandom(min, max) {
      return min + floor(nativeRandom() * (max - min + 1));
    }

    /**
     * The base implementation of `_.uniq` without support for callback shorthands
     * or `thisArg` binding.
     *
     * @private
     * @param {Array} array The array to process.
     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.
     * @param {Function} [callback] The function called per iteration.
     * @returns {Array} Returns a duplicate-value-free array.
     */
    function baseUniq(array, isSorted, callback) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array ? array.length : 0,
          result = [];

      var isLarge = !isSorted && length >= largeArraySize && indexOf === baseIndexOf,
          seen = (callback || isLarge) ? getArray() : result;

      if (isLarge) {
        var cache = createCache(seen);
        indexOf = cacheIndexOf;
        seen = cache;
      }
      while (++index < length) {
        var value = array[index],
            computed = callback ? callback(value, index, array) : value;

        if (isSorted
              ? !index || seen[seen.length - 1] !== computed
              : indexOf(seen, computed) < 0
            ) {
          if (callback || isLarge) {
            seen.push(computed);
          }
          result.push(value);
        }
      }
      if (isLarge) {
        releaseArray(seen.array);
        releaseObject(seen);
      } else if (callback) {
        releaseArray(seen);
      }
      return result;
    }

    /**
     * Creates a function that aggregates a collection, creating an object composed
     * of keys generated from the results of running each element of the collection
     * through a callback. The given `setter` function sets the keys and values
     * of the composed object.
     *
     * @private
     * @param {Function} setter The setter function.
     * @returns {Function} Returns the new aggregator function.
     */
    function createAggregator(setter) {
      return function(collection, callback, thisArg) {
        var result = {};
        callback = lodash.createCallback(callback, thisArg, 3);

        var index = -1,
            length = collection ? collection.length : 0;

        if (typeof length == 'number') {
          while (++index < length) {
            var value = collection[index];
            setter(result, value, callback(value, index, collection), collection);
          }
        } else {
          forOwn(collection, function(value, key, collection) {
            setter(result, value, callback(value, key, collection), collection);
          });
        }
        return result;
      };
    }

    /**
     * Creates a function that, when called, either curries or invokes `func`
     * with an optional `this` binding and partially applied arguments.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of method flags to compose.
     *  The bitmask may be composed of the following flags:
     *  1 - `_.bind`
     *  2 - `_.bindKey`
     *  4 - `_.curry`
     *  8 - `_.curry` (bound)
     *  16 - `_.partial`
     *  32 - `_.partialRight`
     * @param {Array} [partialArgs] An array of arguments to prepend to those
     *  provided to the new function.
     * @param {Array} [partialRightArgs] An array of arguments to append to those
     *  provided to the new function.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new function.
     */
    function createWrapper(func, bitmask, partialArgs, partialRightArgs, thisArg, arity) {
      var isBind = bitmask & 1,
          isBindKey = bitmask & 2,
          isCurry = bitmask & 4,
          isCurryBound = bitmask & 8,
          isPartial = bitmask & 16,
          isPartialRight = bitmask & 32;

      if (!isBindKey && !isFunction(func)) {
        throw new TypeError;
      }
      if (isPartial && !partialArgs.length) {
        bitmask &= ~16;
        isPartial = partialArgs = false;
      }
      if (isPartialRight && !partialRightArgs.length) {
        bitmask &= ~32;
        isPartialRight = partialRightArgs = false;
      }
      var bindData = func && func.__bindData__;
      if (bindData && bindData !== true) {
        // clone `bindData`
        bindData = slice(bindData);
        if (bindData[2]) {
          bindData[2] = slice(bindData[2]);
        }
        if (bindData[3]) {
          bindData[3] = slice(bindData[3]);
        }
        // set `thisBinding` is not previously bound
        if (isBind && !(bindData[1] & 1)) {
          bindData[4] = thisArg;
        }
        // set if previously bound but not currently (subsequent curried functions)
        if (!isBind && bindData[1] & 1) {
          bitmask |= 8;
        }
        // set curried arity if not yet set
        if (isCurry && !(bindData[1] & 4)) {
          bindData[5] = arity;
        }
        // append partial left arguments
        if (isPartial) {
          push.apply(bindData[2] || (bindData[2] = []), partialArgs);
        }
        // append partial right arguments
        if (isPartialRight) {
          unshift.apply(bindData[3] || (bindData[3] = []), partialRightArgs);
        }
        // merge flags
        bindData[1] |= bitmask;
        return createWrapper.apply(null, bindData);
      }
      // fast path for `_.bind`
      var creater = (bitmask == 1 || bitmask === 17) ? baseBind : baseCreateWrapper;
      return creater([func, bitmask, partialArgs, partialRightArgs, thisArg, arity]);
    }

    /**
     * Used by `escape` to convert characters to HTML entities.
     *
     * @private
     * @param {string} match The matched character to escape.
     * @returns {string} Returns the escaped character.
     */
    function escapeHtmlChar(match) {
      return htmlEscapes[match];
    }

    /**
     * Gets the appropriate "indexOf" function. If the `_.indexOf` method is
     * customized, this method returns the custom method, otherwise it returns
     * the `baseIndexOf` function.
     *
     * @private
     * @returns {Function} Returns the "indexOf" function.
     */
    function getIndexOf() {
      var result = (result = lodash.indexOf) === indexOf ? baseIndexOf : result;
      return result;
    }

    /**
     * Checks if `value` is a native function.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a native function, else `false`.
     */
    function isNative(value) {
      return typeof value == 'function' && reNative.test(value);
    }

    /**
     * Sets `this` binding data on a given function.
     *
     * @private
     * @param {Function} func The function to set data on.
     * @param {Array} value The data array to set.
     */
    var setBindData = !defineProperty ? noop : function(func, value) {
      descriptor.value = value;
      defineProperty(func, '__bindData__', descriptor);
    };

    /**
     * A fallback implementation of `isPlainObject` which checks if a given value
     * is an object created by the `Object` constructor, assuming objects created
     * by the `Object` constructor have no inherited enumerable properties and that
     * there are no `Object.prototype` extensions.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     */
    function shimIsPlainObject(value) {
      var ctor,
          result;

      // avoid non Object objects, `arguments` objects, and DOM elements
      if (!(value && toString.call(value) == objectClass) ||
          (ctor = value.constructor, isFunction(ctor) && !(ctor instanceof ctor))) {
        return false;
      }
      // In most environments an object's own properties are iterated before
      // its inherited properties. If the last iterated property is an object's
      // own property then there are no inherited enumerable properties.
      forIn(value, function(value, key) {
        result = key;
      });
      return typeof result == 'undefined' || hasOwnProperty.call(value, result);
    }

    /**
     * Used by `unescape` to convert HTML entities to characters.
     *
     * @private
     * @param {string} match The matched character to unescape.
     * @returns {string} Returns the unescaped character.
     */
    function unescapeHtmlChar(match) {
      return htmlUnescapes[match];
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Checks if `value` is an `arguments` object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an `arguments` object, else `false`.
     * @example
     *
     * (function() { return _.isArguments(arguments); })(1, 2, 3);
     * // => true
     *
     * _.isArguments([1, 2, 3]);
     * // => false
     */
    function isArguments(value) {
      return value && typeof value == 'object' && typeof value.length == 'number' &&
        toString.call(value) == argsClass || false;
    }

    /**
     * Checks if `value` is an array.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an array, else `false`.
     * @example
     *
     * (function() { return _.isArray(arguments); })();
     * // => false
     *
     * _.isArray([1, 2, 3]);
     * // => true
     */
    var isArray = nativeIsArray || function(value) {
      return value && typeof value == 'object' && typeof value.length == 'number' &&
        toString.call(value) == arrayClass || false;
    };

    /**
     * A fallback implementation of `Object.keys` which produces an array of the
     * given object's own enumerable property names.
     *
     * @private
     * @type Function
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names.
     */
    var shimKeys = function(object) {
      var index, iterable = object, result = [];
      if (!iterable) return result;
      if (!(objectTypes[typeof object])) return result;
        for (index in iterable) {
          if (hasOwnProperty.call(iterable, index)) {
            result.push(index);
          }
        }
      return result
    };

    /**
     * Creates an array composed of the own enumerable property names of an object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names.
     * @example
     *
     * _.keys({ 'one': 1, 'two': 2, 'three': 3 });
     * // => ['one', 'two', 'three'] (property order is not guaranteed across environments)
     */
    var keys = !nativeKeys ? shimKeys : function(object) {
      if (!isObject(object)) {
        return [];
      }
      return nativeKeys(object);
    };

    /**
     * Used to convert characters to HTML entities:
     *
     * Though the `>` character is escaped for symmetry, characters like `>` and `/`
     * don't require escaping in HTML and have no special meaning unless they're part
     * of a tag or an unquoted attribute value.
     * http://mathiasbynens.be/notes/ambiguous-ampersands (under "semi-related fun fact")
     */
    var htmlEscapes = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    };

    /** Used to convert HTML entities to characters */
    var htmlUnescapes = invert(htmlEscapes);

    /** Used to match HTML entities and HTML characters */
    var reEscapedHtml = RegExp('(' + keys(htmlUnescapes).join('|') + ')', 'g'),
        reUnescapedHtml = RegExp('[' + keys(htmlEscapes).join('') + ']', 'g');

    /*--------------------------------------------------------------------------*/

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object. Subsequent sources will overwrite property assignments of previous
     * sources. If a callback is provided it will be executed to produce the
     * assigned values. The callback is bound to `thisArg` and invoked with two
     * arguments; (objectValue, sourceValue).
     *
     * @static
     * @memberOf _
     * @type Function
     * @alias extend
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param {Function} [callback] The function to customize assigning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * _.assign({ 'name': 'fred' }, { 'employer': 'slate' });
     * // => { 'name': 'fred', 'employer': 'slate' }
     *
     * var defaults = _.partialRight(_.assign, function(a, b) {
     *   return typeof a == 'undefined' ? b : a;
     * });
     *
     * var object = { 'name': 'barney' };
     * defaults(object, { 'name': 'fred', 'employer': 'slate' });
     * // => { 'name': 'barney', 'employer': 'slate' }
     */
    var assign = function(object, source, guard) {
      var index, iterable = object, result = iterable;
      if (!iterable) return result;
      var args = arguments,
          argsIndex = 0,
          argsLength = typeof guard == 'number' ? 2 : args.length;
      if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {
        var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);
      } else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {
        callback = args[--argsLength];
      }
      while (++argsIndex < argsLength) {
        iterable = args[argsIndex];
        if (iterable && objectTypes[typeof iterable]) {
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          result[index] = callback ? callback(result[index], iterable[index]) : iterable[index];
        }
        }
      }
      return result
    };

    /**
     * Creates a clone of `value`. If `isDeep` is `true` nested objects will also
     * be cloned, otherwise they will be assigned by reference. If a callback
     * is provided it will be executed to produce the cloned values. If the
     * callback returns `undefined` cloning will be handled by the method instead.
     * The callback is bound to `thisArg` and invoked with one argument; (value).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep=false] Specify a deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the cloned value.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * var shallow = _.clone(characters);
     * shallow[0] === characters[0];
     * // => true
     *
     * var deep = _.clone(characters, true);
     * deep[0] === characters[0];
     * // => false
     *
     * _.mixin({
     *   'clone': _.partialRight(_.clone, function(value) {
     *     return _.isElement(value) ? value.cloneNode(false) : undefined;
     *   })
     * });
     *
     * var clone = _.clone(document.body);
     * clone.childNodes.length;
     * // => 0
     */
    function clone(value, isDeep, callback, thisArg) {
      // allows working with "Collections" methods without using their `index`
      // and `collection` arguments for `isDeep` and `callback`
      if (typeof isDeep != 'boolean' && isDeep != null) {
        thisArg = callback;
        callback = isDeep;
        isDeep = false;
      }
      return baseClone(value, isDeep, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));
    }

    /**
     * Creates a deep clone of `value`. If a callback is provided it will be
     * executed to produce the cloned values. If the callback returns `undefined`
     * cloning will be handled by the method instead. The callback is bound to
     * `thisArg` and invoked with one argument; (value).
     *
     * Note: This method is loosely based on the structured clone algorithm. Functions
     * and DOM nodes are **not** cloned. The enumerable properties of `arguments` objects and
     * objects created by constructors other than `Object` are cloned to plain `Object` objects.
     * See http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the deep cloned value.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * var deep = _.cloneDeep(characters);
     * deep[0] === characters[0];
     * // => false
     *
     * var view = {
     *   'label': 'docs',
     *   'node': element
     * };
     *
     * var clone = _.cloneDeep(view, function(value) {
     *   return _.isElement(value) ? value.cloneNode(true) : undefined;
     * });
     *
     * clone.node == view.node;
     * // => false
     */
    function cloneDeep(value, callback, thisArg) {
      return baseClone(value, true, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));
    }

    /**
     * Creates an object that inherits from the given `prototype` object. If a
     * `properties` object is provided its own enumerable properties are assigned
     * to the created object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} prototype The object to inherit from.
     * @param {Object} [properties] The properties to assign to the object.
     * @returns {Object} Returns the new object.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * function Circle() {
     *   Shape.call(this);
     * }
     *
     * Circle.prototype = _.create(Shape.prototype, { 'constructor': Circle });
     *
     * var circle = new Circle;
     * circle instanceof Circle;
     * // => true
     *
     * circle instanceof Shape;
     * // => true
     */
    function create(prototype, properties) {
      var result = baseCreate(prototype);
      return properties ? assign(result, properties) : result;
    }

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object for all destination properties that resolve to `undefined`. Once a
     * property is set, additional defaults of the same property will be ignored.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param- {Object} [guard] Allows working with `_.reduce` without using its
     *  `key` and `object` arguments as sources.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * var object = { 'name': 'barney' };
     * _.defaults(object, { 'name': 'fred', 'employer': 'slate' });
     * // => { 'name': 'barney', 'employer': 'slate' }
     */
    var defaults = function(object, source, guard) {
      var index, iterable = object, result = iterable;
      if (!iterable) return result;
      var args = arguments,
          argsIndex = 0,
          argsLength = typeof guard == 'number' ? 2 : args.length;
      while (++argsIndex < argsLength) {
        iterable = args[argsIndex];
        if (iterable && objectTypes[typeof iterable]) {
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          if (typeof result[index] == 'undefined') result[index] = iterable[index];
        }
        }
      }
      return result
    };

    /**
     * This method is like `_.findIndex` except that it returns the key of the
     * first element that passes the callback check, instead of the element itself.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [callback=identity] The function called per
     *  iteration. If a property name or object is provided it will be used to
     *  create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {string|undefined} Returns the key of the found element, else `undefined`.
     * @example
     *
     * var characters = {
     *   'barney': {  'age': 36, 'blocked': false },
     *   'fred': {    'age': 40, 'blocked': true },
     *   'pebbles': { 'age': 1,  'blocked': false }
     * };
     *
     * _.findKey(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => 'barney' (property order is not guaranteed across environments)
     *
     * // using "_.where" callback shorthand
     * _.findKey(characters, { 'age': 1 });
     * // => 'pebbles'
     *
     * // using "_.pluck" callback shorthand
     * _.findKey(characters, 'blocked');
     * // => 'fred'
     */
    function findKey(object, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forOwn(object, function(value, key, object) {
        if (callback(value, key, object)) {
          result = key;
          return false;
        }
      });
      return result;
    }

    /**
     * This method is like `_.findKey` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [callback=identity] The function called per
     *  iteration. If a property name or object is provided it will be used to
     *  create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {string|undefined} Returns the key of the found element, else `undefined`.
     * @example
     *
     * var characters = {
     *   'barney': {  'age': 36, 'blocked': true },
     *   'fred': {    'age': 40, 'blocked': false },
     *   'pebbles': { 'age': 1,  'blocked': true }
     * };
     *
     * _.findLastKey(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => returns `pebbles`, assuming `_.findKey` returns `barney`
     *
     * // using "_.where" callback shorthand
     * _.findLastKey(characters, { 'age': 40 });
     * // => 'fred'
     *
     * // using "_.pluck" callback shorthand
     * _.findLastKey(characters, 'blocked');
     * // => 'pebbles'
     */
    function findLastKey(object, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forOwnRight(object, function(value, key, object) {
        if (callback(value, key, object)) {
          result = key;
          return false;
        }
      });
      return result;
    }

    /**
     * Iterates over own and inherited enumerable properties of an object,
     * executing the callback for each property. The callback is bound to `thisArg`
     * and invoked with three arguments; (value, key, object). Callbacks may exit
     * iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * Shape.prototype.move = function(x, y) {
     *   this.x += x;
     *   this.y += y;
     * };
     *
     * _.forIn(new Shape, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'x', 'y', and 'move' (property order is not guaranteed across environments)
     */
    var forIn = function(collection, callback, thisArg) {
      var index, iterable = collection, result = iterable;
      if (!iterable) return result;
      if (!objectTypes[typeof iterable]) return result;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
        for (index in iterable) {
          if (callback(iterable[index], index, collection) === false) return result;
        }
      return result
    };

    /**
     * This method is like `_.forIn` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * Shape.prototype.move = function(x, y) {
     *   this.x += x;
     *   this.y += y;
     * };
     *
     * _.forInRight(new Shape, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'move', 'y', and 'x' assuming `_.forIn ` logs 'x', 'y', and 'move'
     */
    function forInRight(object, callback, thisArg) {
      var pairs = [];

      forIn(object, function(value, key) {
        pairs.push(key, value);
      });

      var length = pairs.length;
      callback = baseCreateCallback(callback, thisArg, 3);
      while (length--) {
        if (callback(pairs[length--], pairs[length], object) === false) {
          break;
        }
      }
      return object;
    }

    /**
     * Iterates over own enumerable properties of an object, executing the callback
     * for each property. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, key, object). Callbacks may exit iteration early by
     * explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {
     *   console.log(key);
     * });
     * // => logs '0', '1', and 'length' (property order is not guaranteed across environments)
     */
    var forOwn = function(collection, callback, thisArg) {
      var index, iterable = collection, result = iterable;
      if (!iterable) return result;
      if (!objectTypes[typeof iterable]) return result;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          if (callback(iterable[index], index, collection) === false) return result;
        }
      return result
    };

    /**
     * This method is like `_.forOwn` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.forOwnRight({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {
     *   console.log(key);
     * });
     * // => logs 'length', '1', and '0' assuming `_.forOwn` logs '0', '1', and 'length'
     */
    function forOwnRight(object, callback, thisArg) {
      var props = keys(object),
          length = props.length;

      callback = baseCreateCallback(callback, thisArg, 3);
      while (length--) {
        var key = props[length];
        if (callback(object[key], key, object) === false) {
          break;
        }
      }
      return object;
    }

    /**
     * Creates a sorted array of property names of all enumerable properties,
     * own and inherited, of `object` that have function values.
     *
     * @static
     * @memberOf _
     * @alias methods
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names that have function values.
     * @example
     *
     * _.functions(_);
     * // => ['all', 'any', 'bind', 'bindAll', 'clone', 'compact', 'compose', ...]
     */
    function functions(object) {
      var result = [];
      forIn(object, function(value, key) {
        if (isFunction(value)) {
          result.push(key);
        }
      });
      return result.sort();
    }

    /**
     * Checks if the specified property name exists as a direct property of `object`,
     * instead of an inherited property.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @param {string} key The name of the property to check.
     * @returns {boolean} Returns `true` if key is a direct property, else `false`.
     * @example
     *
     * _.has({ 'a': 1, 'b': 2, 'c': 3 }, 'b');
     * // => true
     */
    function has(object, key) {
      return object ? hasOwnProperty.call(object, key) : false;
    }

    /**
     * Creates an object composed of the inverted keys and values of the given object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to invert.
     * @returns {Object} Returns the created inverted object.
     * @example
     *
     * _.invert({ 'first': 'fred', 'second': 'barney' });
     * // => { 'fred': 'first', 'barney': 'second' }
     */
    function invert(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index];
        result[object[key]] = key;
      }
      return result;
    }

    /**
     * Checks if `value` is a boolean value.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a boolean value, else `false`.
     * @example
     *
     * _.isBoolean(null);
     * // => false
     */
    function isBoolean(value) {
      return value === true || value === false ||
        value && typeof value == 'object' && toString.call(value) == boolClass || false;
    }

    /**
     * Checks if `value` is a date.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a date, else `false`.
     * @example
     *
     * _.isDate(new Date);
     * // => true
     */
    function isDate(value) {
      return value && typeof value == 'object' && toString.call(value) == dateClass || false;
    }

    /**
     * Checks if `value` is a DOM element.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a DOM element, else `false`.
     * @example
     *
     * _.isElement(document.body);
     * // => true
     */
    function isElement(value) {
      return value && value.nodeType === 1 || false;
    }

    /**
     * Checks if `value` is empty. Arrays, strings, or `arguments` objects with a
     * length of `0` and objects with no own enumerable properties are considered
     * "empty".
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Array|Object|string} value The value to inspect.
     * @returns {boolean} Returns `true` if the `value` is empty, else `false`.
     * @example
     *
     * _.isEmpty([1, 2, 3]);
     * // => false
     *
     * _.isEmpty({});
     * // => true
     *
     * _.isEmpty('');
     * // => true
     */
    function isEmpty(value) {
      var result = true;
      if (!value) {
        return result;
      }
      var className = toString.call(value),
          length = value.length;

      if ((className == arrayClass || className == stringClass || className == argsClass ) ||
          (className == objectClass && typeof length == 'number' && isFunction(value.splice))) {
        return !length;
      }
      forOwn(value, function() {
        return (result = false);
      });
      return result;
    }

    /**
     * Performs a deep comparison between two values to determine if they are
     * equivalent to each other. If a callback is provided it will be executed
     * to compare values. If the callback returns `undefined` comparisons will
     * be handled by the method instead. The callback is bound to `thisArg` and
     * invoked with two arguments; (a, b).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} a The value to compare.
     * @param {*} b The other value to compare.
     * @param {Function} [callback] The function to customize comparing values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'name': 'fred' };
     * var copy = { 'name': 'fred' };
     *
     * object == copy;
     * // => false
     *
     * _.isEqual(object, copy);
     * // => true
     *
     * var words = ['hello', 'goodbye'];
     * var otherWords = ['hi', 'goodbye'];
     *
     * _.isEqual(words, otherWords, function(a, b) {
     *   var reGreet = /^(?:hello|hi)$/i,
     *       aGreet = _.isString(a) && reGreet.test(a),
     *       bGreet = _.isString(b) && reGreet.test(b);
     *
     *   return (aGreet || bGreet) ? (aGreet == bGreet) : undefined;
     * });
     * // => true
     */
    function isEqual(a, b, callback, thisArg) {
      return baseIsEqual(a, b, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 2));
    }

    /**
     * Checks if `value` is, or can be coerced to, a finite number.
     *
     * Note: This is not the same as native `isFinite` which will return true for
     * booleans and empty strings. See http://es5.github.io/#x15.1.2.5.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is finite, else `false`.
     * @example
     *
     * _.isFinite(-101);
     * // => true
     *
     * _.isFinite('10');
     * // => true
     *
     * _.isFinite(true);
     * // => false
     *
     * _.isFinite('');
     * // => false
     *
     * _.isFinite(Infinity);
     * // => false
     */
    function isFinite(value) {
      return nativeIsFinite(value) && !nativeIsNaN(parseFloat(value));
    }

    /**
     * Checks if `value` is a function.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a function, else `false`.
     * @example
     *
     * _.isFunction(_);
     * // => true
     */
    function isFunction(value) {
      return typeof value == 'function';
    }

    /**
     * Checks if `value` is the language type of Object.
     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(1);
     * // => false
     */
    function isObject(value) {
      // check if the value is the ECMAScript language type of Object
      // http://es5.github.io/#x8
      // and avoid a V8 bug
      // http://code.google.com/p/v8/issues/detail?id=2291
      return !!(value && objectTypes[typeof value]);
    }

    /**
     * Checks if `value` is `NaN`.
     *
     * Note: This is not the same as native `isNaN` which will return `true` for
     * `undefined` and other non-numeric values. See http://es5.github.io/#x15.1.2.4.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `NaN`, else `false`.
     * @example
     *
     * _.isNaN(NaN);
     * // => true
     *
     * _.isNaN(new Number(NaN));
     * // => true
     *
     * isNaN(undefined);
     * // => true
     *
     * _.isNaN(undefined);
     * // => false
     */
    function isNaN(value) {
      // `NaN` as a primitive is the only value that is not equal to itself
      // (perform the [[Class]] check first to avoid errors with some host objects in IE)
      return isNumber(value) && value != +value;
    }

    /**
     * Checks if `value` is `null`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `null`, else `false`.
     * @example
     *
     * _.isNull(null);
     * // => true
     *
     * _.isNull(undefined);
     * // => false
     */
    function isNull(value) {
      return value === null;
    }

    /**
     * Checks if `value` is a number.
     *
     * Note: `NaN` is considered a number. See http://es5.github.io/#x8.5.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a number, else `false`.
     * @example
     *
     * _.isNumber(8.4 * 5);
     * // => true
     */
    function isNumber(value) {
      return typeof value == 'number' ||
        value && typeof value == 'object' && toString.call(value) == numberClass || false;
    }

    /**
     * Checks if `value` is an object created by the `Object` constructor.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * _.isPlainObject(new Shape);
     * // => false
     *
     * _.isPlainObject([1, 2, 3]);
     * // => false
     *
     * _.isPlainObject({ 'x': 0, 'y': 0 });
     * // => true
     */
    var isPlainObject = !getPrototypeOf ? shimIsPlainObject : function(value) {
      if (!(value && toString.call(value) == objectClass)) {
        return false;
      }
      var valueOf = value.valueOf,
          objProto = isNative(valueOf) && (objProto = getPrototypeOf(valueOf)) && getPrototypeOf(objProto);

      return objProto
        ? (value == objProto || getPrototypeOf(value) == objProto)
        : shimIsPlainObject(value);
    };

    /**
     * Checks if `value` is a regular expression.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a regular expression, else `false`.
     * @example
     *
     * _.isRegExp(/fred/);
     * // => true
     */
    function isRegExp(value) {
      return value && typeof value == 'object' && toString.call(value) == regexpClass || false;
    }

    /**
     * Checks if `value` is a string.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a string, else `false`.
     * @example
     *
     * _.isString('fred');
     * // => true
     */
    function isString(value) {
      return typeof value == 'string' ||
        value && typeof value == 'object' && toString.call(value) == stringClass || false;
    }

    /**
     * Checks if `value` is `undefined`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `undefined`, else `false`.
     * @example
     *
     * _.isUndefined(void 0);
     * // => true
     */
    function isUndefined(value) {
      return typeof value == 'undefined';
    }

    /**
     * Creates an object with the same keys as `object` and values generated by
     * running each own enumerable property of `object` through the callback.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new object with values of the results of each `callback` execution.
     * @example
     *
     * _.mapValues({ 'a': 1, 'b': 2, 'c': 3} , function(num) { return num * 3; });
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     *
     * var characters = {
     *   'fred': { 'name': 'fred', 'age': 40 },
     *   'pebbles': { 'name': 'pebbles', 'age': 1 }
     * };
     *
     * // using "_.pluck" callback shorthand
     * _.mapValues(characters, 'age');
     * // => { 'fred': 40, 'pebbles': 1 }
     */
    function mapValues(object, callback, thisArg) {
      var result = {};
      callback = lodash.createCallback(callback, thisArg, 3);

      forOwn(object, function(value, key, object) {
        result[key] = callback(value, key, object);
      });
      return result;
    }

    /**
     * Recursively merges own enumerable properties of the source object(s), that
     * don't resolve to `undefined` into the destination object. Subsequent sources
     * will overwrite property assignments of previous sources. If a callback is
     * provided it will be executed to produce the merged values of the destination
     * and source properties. If the callback returns `undefined` merging will
     * be handled by the method instead. The callback is bound to `thisArg` and
     * invoked with two arguments; (objectValue, sourceValue).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param {Function} [callback] The function to customize merging properties.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * var names = {
     *   'characters': [
     *     { 'name': 'barney' },
     *     { 'name': 'fred' }
     *   ]
     * };
     *
     * var ages = {
     *   'characters': [
     *     { 'age': 36 },
     *     { 'age': 40 }
     *   ]
     * };
     *
     * _.merge(names, ages);
     * // => { 'characters': [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred', 'age': 40 }] }
     *
     * var food = {
     *   'fruits': ['apple'],
     *   'vegetables': ['beet']
     * };
     *
     * var otherFood = {
     *   'fruits': ['banana'],
     *   'vegetables': ['carrot']
     * };
     *
     * _.merge(food, otherFood, function(a, b) {
     *   return _.isArray(a) ? a.concat(b) : undefined;
     * });
     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
     */
    function merge(object) {
      var args = arguments,
          length = 2;

      if (!isObject(object)) {
        return object;
      }
      // allows working with `_.reduce` and `_.reduceRight` without using
      // their `index` and `collection` arguments
      if (typeof args[2] != 'number') {
        length = args.length;
      }
      if (length > 3 && typeof args[length - 2] == 'function') {
        var callback = baseCreateCallback(args[--length - 1], args[length--], 2);
      } else if (length > 2 && typeof args[length - 1] == 'function') {
        callback = args[--length];
      }
      var sources = slice(arguments, 1, length),
          index = -1,
          stackA = getArray(),
          stackB = getArray();

      while (++index < length) {
        baseMerge(object, sources[index], callback, stackA, stackB);
      }
      releaseArray(stackA);
      releaseArray(stackB);
      return object;
    }

    /**
     * Creates a shallow clone of `object` excluding the specified properties.
     * Property names may be specified as individual arguments or as arrays of
     * property names. If a callback is provided it will be executed for each
     * property of `object` omitting the properties the callback returns truey
     * for. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The source object.
     * @param {Function|...string|string[]} [callback] The properties to omit or the
     *  function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns an object without the omitted properties.
     * @example
     *
     * _.omit({ 'name': 'fred', 'age': 40 }, 'age');
     * // => { 'name': 'fred' }
     *
     * _.omit({ 'name': 'fred', 'age': 40 }, function(value) {
     *   return typeof value == 'number';
     * });
     * // => { 'name': 'fred' }
     */
    function omit(object, callback, thisArg) {
      var result = {};
      if (typeof callback != 'function') {
        var props = [];
        forIn(object, function(value, key) {
          props.push(key);
        });
        props = baseDifference(props, baseFlatten(arguments, true, false, 1));

        var index = -1,
            length = props.length;

        while (++index < length) {
          var key = props[index];
          result[key] = object[key];
        }
      } else {
        callback = lodash.createCallback(callback, thisArg, 3);
        forIn(object, function(value, key, object) {
          if (!callback(value, key, object)) {
            result[key] = value;
          }
        });
      }
      return result;
    }

    /**
     * Creates a two dimensional array of an object's key-value pairs,
     * i.e. `[[key1, value1], [key2, value2]]`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns new array of key-value pairs.
     * @example
     *
     * _.pairs({ 'barney': 36, 'fred': 40 });
     * // => [['barney', 36], ['fred', 40]] (property order is not guaranteed across environments)
     */
    function pairs(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        var key = props[index];
        result[index] = [key, object[key]];
      }
      return result;
    }

    /**
     * Creates a shallow clone of `object` composed of the specified properties.
     * Property names may be specified as individual arguments or as arrays of
     * property names. If a callback is provided it will be executed for each
     * property of `object` picking the properties the callback returns truey
     * for. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The source object.
     * @param {Function|...string|string[]} [callback] The function called per
     *  iteration or property names to pick, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns an object composed of the picked properties.
     * @example
     *
     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, 'name');
     * // => { 'name': 'fred' }
     *
     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, function(value, key) {
     *   return key.charAt(0) != '_';
     * });
     * // => { 'name': 'fred' }
     */
    function pick(object, callback, thisArg) {
      var result = {};
      if (typeof callback != 'function') {
        var index = -1,
            props = baseFlatten(arguments, true, false, 1),
            length = isObject(object) ? props.length : 0;

        while (++index < length) {
          var key = props[index];
          if (key in object) {
            result[key] = object[key];
          }
        }
      } else {
        callback = lodash.createCallback(callback, thisArg, 3);
        forIn(object, function(value, key, object) {
          if (callback(value, key, object)) {
            result[key] = value;
          }
        });
      }
      return result;
    }

    /**
     * An alternative to `_.reduce` this method transforms `object` to a new
     * `accumulator` object which is the result of running each of its own
     * enumerable properties through a callback, with each callback execution
     * potentially mutating the `accumulator` object. The callback is bound to
     * `thisArg` and invoked with four arguments; (accumulator, value, key, object).
     * Callbacks may exit iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Array|Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] The custom accumulator value.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var squares = _.transform([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], function(result, num) {
     *   num *= num;
     *   if (num % 2) {
     *     return result.push(num) < 3;
     *   }
     * });
     * // => [1, 9, 25]
     *
     * var mapped = _.transform({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {
     *   result[key] = num * 3;
     * });
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     */
    function transform(object, callback, accumulator, thisArg) {
      var isArr = isArray(object);
      if (accumulator == null) {
        if (isArr) {
          accumulator = [];
        } else {
          var ctor = object && object.constructor,
              proto = ctor && ctor.prototype;

          accumulator = baseCreate(proto);
        }
      }
      if (callback) {
        callback = lodash.createCallback(callback, thisArg, 4);
        (isArr ? forEach : forOwn)(object, function(value, index, object) {
          return callback(accumulator, value, index, object);
        });
      }
      return accumulator;
    }

    /**
     * Creates an array composed of the own enumerable property values of `object`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property values.
     * @example
     *
     * _.values({ 'one': 1, 'two': 2, 'three': 3 });
     * // => [1, 2, 3] (property order is not guaranteed across environments)
     */
    function values(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        result[index] = object[props[index]];
      }
      return result;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates an array of elements from the specified indexes, or keys, of the
     * `collection`. Indexes may be specified as individual arguments or as arrays
     * of indexes.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(number|number[]|string|string[])} [index] The indexes of `collection`
     *   to retrieve, specified as individual indexes or arrays of indexes.
     * @returns {Array} Returns a new array of elements corresponding to the
     *  provided indexes.
     * @example
     *
     * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
     * // => ['a', 'c', 'e']
     *
     * _.at(['fred', 'barney', 'pebbles'], 0, 2);
     * // => ['fred', 'pebbles']
     */
    function at(collection) {
      var args = arguments,
          index = -1,
          props = baseFlatten(args, true, false, 1),
          length = (args[2] && args[2][args[1]] === collection) ? 1 : props.length,
          result = Array(length);

      while(++index < length) {
        result[index] = collection[props[index]];
      }
      return result;
    }

    /**
     * Checks if a given value is present in a collection using strict equality
     * for comparisons, i.e. `===`. If `fromIndex` is negative, it is used as the
     * offset from the end of the collection.
     *
     * @static
     * @memberOf _
     * @alias include
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {*} target The value to check for.
     * @param {number} [fromIndex=0] The index to search from.
     * @returns {boolean} Returns `true` if the `target` element is found, else `false`.
     * @example
     *
     * _.contains([1, 2, 3], 1);
     * // => true
     *
     * _.contains([1, 2, 3], 1, 2);
     * // => false
     *
     * _.contains({ 'name': 'fred', 'age': 40 }, 'fred');
     * // => true
     *
     * _.contains('pebbles', 'eb');
     * // => true
     */
    function contains(collection, target, fromIndex) {
      var index = -1,
          indexOf = getIndexOf(),
          length = collection ? collection.length : 0,
          result = false;

      fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex) || 0;
      if (isArray(collection)) {
        result = indexOf(collection, target, fromIndex) > -1;
      } else if (typeof length == 'number') {
        result = (isString(collection) ? collection.indexOf(target, fromIndex) : indexOf(collection, target, fromIndex)) > -1;
      } else {
        forOwn(collection, function(value) {
          if (++index >= fromIndex) {
            return !(result = value === target);
          }
        });
      }
      return result;
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through the callback. The corresponding value
     * of each key is the number of times the key was returned by the callback.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.countBy([4.3, 6.1, 6.4], function(num) { return Math.floor(num); });
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy([4.3, 6.1, 6.4], function(num) { return this.floor(num); }, Math);
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy(['one', 'two', 'three'], 'length');
     * // => { '3': 2, '5': 1 }
     */
    var countBy = createAggregator(function(result, value, key) {
      (hasOwnProperty.call(result, key) ? result[key]++ : result[key] = 1);
    });

    /**
     * Checks if the given callback returns truey value for **all** elements of
     * a collection. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias all
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if all elements passed the callback check,
     *  else `false`.
     * @example
     *
     * _.every([true, 1, null, 'yes']);
     * // => false
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.every(characters, 'age');
     * // => true
     *
     * // using "_.where" callback shorthand
     * _.every(characters, { 'age': 36 });
     * // => false
     */
    function every(collection, callback, thisArg) {
      var result = true;
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          if (!(result = !!callback(collection[index], index, collection))) {
            break;
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          return (result = !!callback(value, index, collection));
        });
      }
      return result;
    }

    /**
     * Iterates over elements of a collection, returning an array of all elements
     * the callback returns truey for. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias select
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of elements that passed the callback check.
     * @example
     *
     * var evens = _.filter([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });
     * // => [2, 4, 6]
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.filter(characters, 'blocked');
     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]
     *
     * // using "_.where" callback shorthand
     * _.filter(characters, { 'age': 36 });
     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]
     */
    function filter(collection, callback, thisArg) {
      var result = [];
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          var value = collection[index];
          if (callback(value, index, collection)) {
            result.push(value);
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          if (callback(value, index, collection)) {
            result.push(value);
          }
        });
      }
      return result;
    }

    /**
     * Iterates over elements of a collection, returning the first element that
     * the callback returns truey for. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias detect, findWhere
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the found element, else `undefined`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': false },
     *   { 'name': 'fred',    'age': 40, 'blocked': true },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }
     * ];
     *
     * _.find(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => { 'name': 'barney', 'age': 36, 'blocked': false }
     *
     * // using "_.where" callback shorthand
     * _.find(characters, { 'age': 1 });
     * // =>  { 'name': 'pebbles', 'age': 1, 'blocked': false }
     *
     * // using "_.pluck" callback shorthand
     * _.find(characters, 'blocked');
     * // => { 'name': 'fred', 'age': 40, 'blocked': true }
     */
    function find(collection, callback, thisArg) {
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          var value = collection[index];
          if (callback(value, index, collection)) {
            return value;
          }
        }
      } else {
        var result;
        forOwn(collection, function(value, index, collection) {
          if (callback(value, index, collection)) {
            result = value;
            return false;
          }
        });
        return result;
      }
    }

    /**
     * This method is like `_.find` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the found element, else `undefined`.
     * @example
     *
     * _.findLast([1, 2, 3, 4], function(num) {
     *   return num % 2 == 1;
     * });
     * // => 3
     */
    function findLast(collection, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forEachRight(collection, function(value, index, collection) {
        if (callback(value, index, collection)) {
          result = value;
          return false;
        }
      });
      return result;
    }

    /**
     * Iterates over elements of a collection, executing the callback for each
     * element. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection). Callbacks may exit iteration early by
     * explicitly returning `false`.
     *
     * Note: As with other "Collections" methods, objects with a `length` property
     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
     * may be used for object iteration.
     *
     * @static
     * @memberOf _
     * @alias each
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2, 3]).forEach(function(num) { console.log(num); }).join(',');
     * // => logs each number and returns '1,2,3'
     *
     * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { console.log(num); });
     * // => logs each number and returns the object (property order is not guaranteed across environments)
     */
    function forEach(collection, callback, thisArg) {
      var index = -1,
          length = collection ? collection.length : 0;

      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        while (++index < length) {
          if (callback(collection[index], index, collection) === false) {
            break;
          }
        }
      } else {
        forOwn(collection, callback);
      }
      return collection;
    }

    /**
     * This method is like `_.forEach` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias eachRight
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2, 3]).forEachRight(function(num) { console.log(num); }).join(',');
     * // => logs each number from right to left and returns '3,2,1'
     */
    function forEachRight(collection, callback, thisArg) {
      var length = collection ? collection.length : 0;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        while (length--) {
          if (callback(collection[length], length, collection) === false) {
            break;
          }
        }
      } else {
        var props = keys(collection);
        length = props.length;
        forOwn(collection, function(value, key, collection) {
          key = props ? props[--length] : --length;
          return callback(collection[key], key, collection);
        });
      }
      return collection;
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of a collection through the callback. The corresponding value
     * of each key is an array of the elements responsible for generating the key.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.groupBy([4.2, 6.1, 6.4], function(num) { return Math.floor(num); });
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * _.groupBy([4.2, 6.1, 6.4], function(num) { return this.floor(num); }, Math);
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * // using "_.pluck" callback shorthand
     * _.groupBy(['one', 'two', 'three'], 'length');
     * // => { '3': ['one', 'two'], '5': ['three'] }
     */
    var groupBy = createAggregator(function(result, value, key) {
      (hasOwnProperty.call(result, key) ? result[key] : result[key] = []).push(value);
    });

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of the collection through the given callback. The corresponding
     * value of each key is the last element responsible for generating the key.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * var keys = [
     *   { 'dir': 'left', 'code': 97 },
     *   { 'dir': 'right', 'code': 100 }
     * ];
     *
     * _.indexBy(keys, 'dir');
     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keys, function(key) { return String.fromCharCode(key.code); });
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(characters, function(key) { this.fromCharCode(key.code); }, String);
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     */
    var indexBy = createAggregator(function(result, value, key) {
      result[key] = value;
    });

    /**
     * Invokes the method named by `methodName` on each element in the `collection`
     * returning an array of the results of each invoked method. Additional arguments
     * will be provided to each invoked method. If `methodName` is a function it
     * will be invoked for, and `this` bound to, each element in the `collection`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|string} methodName The name of the method to invoke or
     *  the function invoked per iteration.
     * @param {...*} [arg] Arguments to invoke the method with.
     * @returns {Array} Returns a new array of the results of each invoked method.
     * @example
     *
     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');
     * // => [[1, 5, 7], [1, 2, 3]]
     *
     * _.invoke([123, 456], String.prototype.split, '');
     * // => [['1', '2', '3'], ['4', '5', '6']]
     */
    function invoke(collection, methodName) {
      var args = slice(arguments, 2),
          index = -1,
          isFunc = typeof methodName == 'function',
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      forEach(collection, function(value) {
        result[++index] = (isFunc ? methodName : value[methodName]).apply(value, args);
      });
      return result;
    }

    /**
     * Creates an array of values by running each element in the collection
     * through the callback. The callback is bound to `thisArg` and invoked with
     * three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias collect
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of the results of each `callback` execution.
     * @example
     *
     * _.map([1, 2, 3], function(num) { return num * 3; });
     * // => [3, 6, 9]
     *
     * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });
     * // => [3, 6, 9] (property order is not guaranteed across environments)
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.map(characters, 'name');
     * // => ['barney', 'fred']
     */
    function map(collection, callback, thisArg) {
      var index = -1,
          length = collection ? collection.length : 0;

      callback = lodash.createCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        var result = Array(length);
        while (++index < length) {
          result[index] = callback(collection[index], index, collection);
        }
      } else {
        result = [];
        forOwn(collection, function(value, key, collection) {
          result[++index] = callback(value, key, collection);
        });
      }
      return result;
    }

    /**
     * Retrieves the maximum value of a collection. If the collection is empty or
     * falsey `-Infinity` is returned. If a callback is provided it will be executed
     * for each value in the collection to generate the criterion by which the value
     * is ranked. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * _.max([4, 2, 8, 6]);
     * // => 8
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.max(characters, function(chr) { return chr.age; });
     * // => { 'name': 'fred', 'age': 40 };
     *
     * // using "_.pluck" callback shorthand
     * _.max(characters, 'age');
     * // => { 'name': 'fred', 'age': 40 };
     */
    function max(collection, callback, thisArg) {
      var computed = -Infinity,
          result = computed;

      // allows working with functions like `_.map` without using
      // their `index` argument as a callback
      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {
        callback = null;
      }
      if (callback == null && isArray(collection)) {
        var index = -1,
            length = collection.length;

        while (++index < length) {
          var value = collection[index];
          if (value > result) {
            result = value;
          }
        }
      } else {
        callback = (callback == null && isString(collection))
          ? charAtCallback
          : lodash.createCallback(callback, thisArg, 3);

        forEach(collection, function(value, index, collection) {
          var current = callback(value, index, collection);
          if (current > computed) {
            computed = current;
            result = value;
          }
        });
      }
      return result;
    }

    /**
     * Retrieves the minimum value of a collection. If the collection is empty or
     * falsey `Infinity` is returned. If a callback is provided it will be executed
     * for each value in the collection to generate the criterion by which the value
     * is ranked. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * _.min([4, 2, 8, 6]);
     * // => 2
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.min(characters, function(chr) { return chr.age; });
     * // => { 'name': 'barney', 'age': 36 };
     *
     * // using "_.pluck" callback shorthand
     * _.min(characters, 'age');
     * // => { 'name': 'barney', 'age': 36 };
     */
    function min(collection, callback, thisArg) {
      var computed = Infinity,
          result = computed;

      // allows working with functions like `_.map` without using
      // their `index` argument as a callback
      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {
        callback = null;
      }
      if (callback == null && isArray(collection)) {
        var index = -1,
            length = collection.length;

        while (++index < length) {
          var value = collection[index];
          if (value < result) {
            result = value;
          }
        }
      } else {
        callback = (callback == null && isString(collection))
          ? charAtCallback
          : lodash.createCallback(callback, thisArg, 3);

        forEach(collection, function(value, index, collection) {
          var current = callback(value, index, collection);
          if (current < computed) {
            computed = current;
            result = value;
          }
        });
      }
      return result;
    }

    /**
     * Retrieves the value of a specified property from all elements in the collection.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {string} property The name of the property to pluck.
     * @returns {Array} Returns a new array of property values.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.pluck(characters, 'name');
     * // => ['barney', 'fred']
     */
    var pluck = map;

    /**
     * Reduces a collection to a value which is the accumulated result of running
     * each element in the collection through the callback, where each successive
     * callback execution consumes the return value of the previous execution. If
     * `accumulator` is not provided the first element of the collection will be
     * used as the initial `accumulator` value. The callback is bound to `thisArg`
     * and invoked with four arguments; (accumulator, value, index|key, collection).
     *
     * @static
     * @memberOf _
     * @alias foldl, inject
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] Initial value of the accumulator.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var sum = _.reduce([1, 2, 3], function(sum, num) {
     *   return sum + num;
     * });
     * // => 6
     *
     * var mapped = _.reduce({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {
     *   result[key] = num * 3;
     *   return result;
     * }, {});
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     */
    function reduce(collection, callback, accumulator, thisArg) {
      if (!collection) return accumulator;
      var noaccum = arguments.length < 3;
      callback = lodash.createCallback(callback, thisArg, 4);

      var index = -1,
          length = collection.length;

      if (typeof length == 'number') {
        if (noaccum) {
          accumulator = collection[++index];
        }
        while (++index < length) {
          accumulator = callback(accumulator, collection[index], index, collection);
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          accumulator = noaccum
            ? (noaccum = false, value)
            : callback(accumulator, value, index, collection)
        });
      }
      return accumulator;
    }

    /**
     * This method is like `_.reduce` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias foldr
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] Initial value of the accumulator.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var list = [[0, 1], [2, 3], [4, 5]];
     * var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);
     * // => [4, 5, 2, 3, 0, 1]
     */
    function reduceRight(collection, callback, accumulator, thisArg) {
      var noaccum = arguments.length < 3;
      callback = lodash.createCallback(callback, thisArg, 4);
      forEachRight(collection, function(value, index, collection) {
        accumulator = noaccum
          ? (noaccum = false, value)
          : callback(accumulator, value, index, collection);
      });
      return accumulator;
    }

    /**
     * The opposite of `_.filter` this method returns the elements of a
     * collection that the callback does **not** return truey for.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of elements that failed the callback check.
     * @example
     *
     * var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });
     * // => [1, 3, 5]
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.reject(characters, 'blocked');
     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]
     *
     * // using "_.where" callback shorthand
     * _.reject(characters, { 'age': 36 });
     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]
     */
    function reject(collection, callback, thisArg) {
      callback = lodash.createCallback(callback, thisArg, 3);
      return filter(collection, function(value, index, collection) {
        return !callback(value, index, collection);
      });
    }

    /**
     * Retrieves a random element or `n` random elements from a collection.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to sample.
     * @param {number} [n] The number of elements to sample.
     * @param- {Object} [guard] Allows working with functions like `_.map`
     *  without using their `index` arguments as `n`.
     * @returns {Array} Returns the random sample(s) of `collection`.
     * @example
     *
     * _.sample([1, 2, 3, 4]);
     * // => 2
     *
     * _.sample([1, 2, 3, 4], 2);
     * // => [3, 1]
     */
    function sample(collection, n, guard) {
      if (collection && typeof collection.length != 'number') {
        collection = values(collection);
      }
      if (n == null || guard) {
        return collection ? collection[baseRandom(0, collection.length - 1)] : undefined;
      }
      var result = shuffle(collection);
      result.length = nativeMin(nativeMax(0, n), result.length);
      return result;
    }

    /**
     * Creates an array of shuffled values, using a version of the Fisher-Yates
     * shuffle. See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to shuffle.
     * @returns {Array} Returns a new shuffled collection.
     * @example
     *
     * _.shuffle([1, 2, 3, 4, 5, 6]);
     * // => [4, 1, 6, 3, 5, 2]
     */
    function shuffle(collection) {
      var index = -1,
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      forEach(collection, function(value) {
        var rand = baseRandom(0, ++index);
        result[index] = result[rand];
        result[rand] = value;
      });
      return result;
    }

    /**
     * Gets the size of the `collection` by returning `collection.length` for arrays
     * and array-like objects or the number of own enumerable properties for objects.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to inspect.
     * @returns {number} Returns `collection.length` or number of own enumerable properties.
     * @example
     *
     * _.size([1, 2]);
     * // => 2
     *
     * _.size({ 'one': 1, 'two': 2, 'three': 3 });
     * // => 3
     *
     * _.size('pebbles');
     * // => 7
     */
    function size(collection) {
      var length = collection ? collection.length : 0;
      return typeof length == 'number' ? length : keys(collection).length;
    }

    /**
     * Checks if the callback returns a truey value for **any** element of a
     * collection. The function returns as soon as it finds a passing value and
     * does not iterate over the entire collection. The callback is bound to
     * `thisArg` and invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias any
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if any element passed the callback check,
     *  else `false`.
     * @example
     *
     * _.some([null, 0, 'yes', false], Boolean);
     * // => true
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.some(characters, 'blocked');
     * // => true
     *
     * // using "_.where" callback shorthand
     * _.some(characters, { 'age': 1 });
     * // => false
     */
    function some(collection, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          if ((result = callback(collection[index], index, collection))) {
            break;
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          return !(result = callback(value, index, collection));
        });
      }
      return !!result;
    }

    /**
     * Creates an array of elements, sorted in ascending order by the results of
     * running each element in a collection through the callback. This method
     * performs a stable sort, that is, it will preserve the original sort order
     * of equal elements. The callback is bound to `thisArg` and invoked with
     * three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an array of property names is provided for `callback` the collection
     * will be sorted by each property value.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of sorted elements.
     * @example
     *
     * _.sortBy([1, 2, 3], function(num) { return Math.sin(num); });
     * // => [3, 1, 2]
     *
     * _.sortBy([1, 2, 3], function(num) { return this.sin(num); }, Math);
     * // => [3, 1, 2]
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36 },
     *   { 'name': 'fred',    'age': 40 },
     *   { 'name': 'barney',  'age': 26 },
     *   { 'name': 'fred',    'age': 30 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.map(_.sortBy(characters, 'age'), _.values);
     * // => [['barney', 26], ['fred', 30], ['barney', 36], ['fred', 40]]
     *
     * // sorting by multiple properties
     * _.map(_.sortBy(characters, ['name', 'age']), _.values);
     * // = > [['barney', 26], ['barney', 36], ['fred', 30], ['fred', 40]]
     */
    function sortBy(collection, callback, thisArg) {
      var index = -1,
          isArr = isArray(callback),
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      if (!isArr) {
        callback = lodash.createCallback(callback, thisArg, 3);
      }
      forEach(collection, function(value, key, collection) {
        var object = result[++index] = getObject();
        if (isArr) {
          object.criteria = map(callback, function(key) { return value[key]; });
        } else {
          (object.criteria = getArray())[0] = callback(value, key, collection);
        }
        object.index = index;
        object.value = value;
      });

      length = result.length;
      result.sort(compareAscending);
      while (length--) {
        var object = result[length];
        result[length] = object.value;
        if (!isArr) {
          releaseArray(object.criteria);
        }
        releaseObject(object);
      }
      return result;
    }

    /**
     * Converts the `collection` to an array.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to convert.
     * @returns {Array} Returns the new converted array.
     * @example
     *
     * (function() { return _.toArray(arguments).slice(1); })(1, 2, 3, 4);
     * // => [2, 3, 4]
     */
    function toArray(collection) {
      if (collection && typeof collection.length == 'number') {
        return slice(collection);
      }
      return values(collection);
    }

    /**
     * Performs a deep comparison of each element in a `collection` to the given
     * `properties` object, returning an array of all elements that have equivalent
     * property values.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Object} props The object of property values to filter by.
     * @returns {Array} Returns a new array of elements that have the given properties.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'pets': ['hoppy'] },
     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * _.where(characters, { 'age': 36 });
     * // => [{ 'name': 'barney', 'age': 36, 'pets': ['hoppy'] }]
     *
     * _.where(characters, { 'pets': ['dino'] });
     * // => [{ 'name': 'fred', 'age': 40, 'pets': ['baby puss', 'dino'] }]
     */
    var where = filter;

    /*--------------------------------------------------------------------------*/

    /**
     * Creates an array with all falsey values removed. The values `false`, `null`,
     * `0`, `""`, `undefined`, and `NaN` are all falsey.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to compact.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.compact([0, 1, false, 2, '', 3]);
     * // => [1, 2, 3]
     */
    function compact(array) {
      var index = -1,
          length = array ? array.length : 0,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (value) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * Creates an array excluding all values of the provided arrays using strict
     * equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to process.
     * @param {...Array} [values] The arrays of values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.difference([1, 2, 3, 4, 5], [5, 2, 10]);
     * // => [1, 3, 4]
     */
    function difference(array) {
      return baseDifference(array, baseFlatten(arguments, true, true, 1));
    }

    /**
     * This method is like `_.find` except that it returns the index of the first
     * element that passes the callback check, instead of the element itself.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': false },
     *   { 'name': 'fred',    'age': 40, 'blocked': true },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }
     * ];
     *
     * _.findIndex(characters, function(chr) {
     *   return chr.age < 20;
     * });
     * // => 2
     *
     * // using "_.where" callback shorthand
     * _.findIndex(characters, { 'age': 36 });
     * // => 0
     *
     * // using "_.pluck" callback shorthand
     * _.findIndex(characters, 'blocked');
     * // => 1
     */
    function findIndex(array, callback, thisArg) {
      var index = -1,
          length = array ? array.length : 0;

      callback = lodash.createCallback(callback, thisArg, 3);
      while (++index < length) {
        if (callback(array[index], index, array)) {
          return index;
        }
      }
      return -1;
    }

    /**
     * This method is like `_.findIndex` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': true },
     *   { 'name': 'fred',    'age': 40, 'blocked': false },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': true }
     * ];
     *
     * _.findLastIndex(characters, function(chr) {
     *   return chr.age > 30;
     * });
     * // => 1
     *
     * // using "_.where" callback shorthand
     * _.findLastIndex(characters, { 'age': 36 });
     * // => 0
     *
     * // using "_.pluck" callback shorthand
     * _.findLastIndex(characters, 'blocked');
     * // => 2
     */
    function findLastIndex(array, callback, thisArg) {
      var length = array ? array.length : 0;
      callback = lodash.createCallback(callback, thisArg, 3);
      while (length--) {
        if (callback(array[length], length, array)) {
          return length;
        }
      }
      return -1;
    }

    /**
     * Gets the first element or first `n` elements of an array. If a callback
     * is provided elements at the beginning of the array are returned as long
     * as the callback returns truey. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias head, take
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback] The function called
     *  per element or the number of elements to return. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the first element(s) of `array`.
     * @example
     *
     * _.first([1, 2, 3]);
     * // => 1
     *
     * _.first([1, 2, 3], 2);
     * // => [1, 2]
     *
     * _.first([1, 2, 3], function(num) {
     *   return num < 3;
     * });
     * // => [1, 2]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': false, 'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.first(characters, 'blocked');
     * // => [{ 'name': 'barney', 'blocked': true, 'employer': 'slate' }]
     *
     * // using "_.where" callback shorthand
     * _.pluck(_.first(characters, { 'employer': 'slate' }), 'name');
     * // => ['barney', 'fred']
     */
    function first(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = -1;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (++index < length && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = callback;
        if (n == null || thisArg) {
          return array ? array[0] : undefined;
        }
      }
      return slice(array, 0, nativeMin(nativeMax(0, n), length));
    }

    /**
     * Flattens a nested array (the nesting can be to any depth). If `isShallow`
     * is truey, the array will only be flattened a single level. If a callback
     * is provided each element of the array is passed through the callback before
     * flattening. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to flatten.
     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new flattened array.
     * @example
     *
     * _.flatten([1, [2], [3, [[4]]]]);
     * // => [1, 2, 3, 4];
     *
     * _.flatten([1, [2], [3, [[4]]]], true);
     * // => [1, 2, 3, [[4]]];
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 30, 'pets': ['hoppy'] },
     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.flatten(characters, 'pets');
     * // => ['hoppy', 'baby puss', 'dino']
     */
    function flatten(array, isShallow, callback, thisArg) {
      // juggle arguments
      if (typeof isShallow != 'boolean' && isShallow != null) {
        thisArg = callback;
        callback = (typeof isShallow != 'function' && thisArg && thisArg[isShallow] === array) ? null : isShallow;
        isShallow = false;
      }
      if (callback != null) {
        array = map(array, callback, thisArg);
      }
      return baseFlatten(array, isShallow);
    }

    /**
     * Gets the index at which the first occurrence of `value` is found using
     * strict equality for comparisons, i.e. `===`. If the array is already sorted
     * providing `true` for `fromIndex` will run a faster binary search.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=0] The index to search from or `true`
     *  to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value or `-1`.
     * @example
     *
     * _.indexOf([1, 2, 3, 1, 2, 3], 2);
     * // => 1
     *
     * _.indexOf([1, 2, 3, 1, 2, 3], 2, 3);
     * // => 4
     *
     * _.indexOf([1, 1, 2, 2, 3, 3], 2, true);
     * // => 2
     */
    function indexOf(array, value, fromIndex) {
      if (typeof fromIndex == 'number') {
        var length = array ? array.length : 0;
        fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex || 0);
      } else if (fromIndex) {
        var index = sortedIndex(array, value);
        return array[index] === value ? index : -1;
      }
      return baseIndexOf(array, value, fromIndex);
    }

    /**
     * Gets all but the last element or last `n` elements of an array. If a
     * callback is provided elements at the end of the array are excluded from
     * the result as long as the callback returns truey. The callback is bound
     * to `thisArg` and invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback=1] The function called
     *  per element or the number of elements to exclude. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a slice of `array`.
     * @example
     *
     * _.initial([1, 2, 3]);
     * // => [1, 2]
     *
     * _.initial([1, 2, 3], 2);
     * // => [1]
     *
     * _.initial([1, 2, 3], function(num) {
     *   return num > 1;
     * });
     * // => [1]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.initial(characters, 'blocked');
     * // => [{ 'name': 'barney',  'blocked': false, 'employer': 'slate' }]
     *
     * // using "_.where" callback shorthand
     * _.pluck(_.initial(characters, { 'employer': 'na' }), 'name');
     * // => ['barney', 'fred']
     */
    function initial(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = length;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (index-- && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = (callback == null || thisArg) ? 1 : callback || n;
      }
      return slice(array, 0, nativeMin(nativeMax(0, length - n), length));
    }

    /**
     * Creates an array of unique values present in all provided arrays using
     * strict equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of shared values.
     * @example
     *
     * _.intersection([1, 2, 3], [5, 2, 1, 4], [2, 1]);
     * // => [1, 2]
     */
    function intersection() {
      var args = [],
          argsIndex = -1,
          argsLength = arguments.length,
          caches = getArray(),
          indexOf = getIndexOf(),
          trustIndexOf = indexOf === baseIndexOf,
          seen = getArray();

      while (++argsIndex < argsLength) {
        var value = arguments[argsIndex];
        if (isArray(value) || isArguments(value)) {
          args.push(value);
          caches.push(trustIndexOf && value.length >= largeArraySize &&
            createCache(argsIndex ? args[argsIndex] : seen));
        }
      }
      var array = args[0],
          index = -1,
          length = array ? array.length : 0,
          result = [];

      outer:
      while (++index < length) {
        var cache = caches[0];
        value = array[index];

        if ((cache ? cacheIndexOf(cache, value) : indexOf(seen, value)) < 0) {
          argsIndex = argsLength;
          (cache || seen).push(value);
          while (--argsIndex) {
            cache = caches[argsIndex];
            if ((cache ? cacheIndexOf(cache, value) : indexOf(args[argsIndex], value)) < 0) {
              continue outer;
            }
          }
          result.push(value);
        }
      }
      while (argsLength--) {
        cache = caches[argsLength];
        if (cache) {
          releaseObject(cache);
        }
      }
      releaseArray(caches);
      releaseArray(seen);
      return result;
    }

    /**
     * Gets the last element or last `n` elements of an array. If a callback is
     * provided elements at the end of the array are returned as long as the
     * callback returns truey. The callback is bound to `thisArg` and invoked
     * with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback] The function called
     *  per element or the number of elements to return. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the last element(s) of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     *
     * _.last([1, 2, 3], 2);
     * // => [2, 3]
     *
     * _.last([1, 2, 3], function(num) {
     *   return num > 1;
     * });
     * // => [2, 3]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.pluck(_.last(characters, 'blocked'), 'name');
     * // => ['fred', 'pebbles']
     *
     * // using "_.where" callback shorthand
     * _.last(characters, { 'employer': 'na' });
     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]
     */
    function last(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = length;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (index-- && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = callback;
        if (n == null || thisArg) {
          return array ? array[length - 1] : undefined;
        }
      }
      return slice(array, nativeMax(0, length - n));
    }

    /**
     * Gets the index at which the last occurrence of `value` is found using strict
     * equality for comparisons, i.e. `===`. If `fromIndex` is negative, it is used
     * as the offset from the end of the collection.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=array.length-1] The index to search from.
     * @returns {number} Returns the index of the matched value or `-1`.
     * @example
     *
     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2);
     * // => 4
     *
     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2, 3);
     * // => 1
     */
    function lastIndexOf(array, value, fromIndex) {
      var index = array ? array.length : 0;
      if (typeof fromIndex == 'number') {
        index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;
      }
      while (index--) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }

    /**
     * Removes all provided values from the given array using strict equality for
     * comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to modify.
     * @param {...*} [value] The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3, 1, 2, 3];
     * _.pull(array, 2, 3);
     * console.log(array);
     * // => [1, 1]
     */
    function pull(array) {
      var args = arguments,
          argsIndex = 0,
          argsLength = args.length,
          length = array ? array.length : 0;

      while (++argsIndex < argsLength) {
        var index = -1,
            value = args[argsIndex];
        while (++index < length) {
          if (array[index] === value) {
            splice.call(array, index--, 1);
            length--;
          }
        }
      }
      return array;
    }

    /**
     * Creates an array of numbers (positive and/or negative) progressing from
     * `start` up to but not including `end`. If `start` is less than `stop` a
     * zero-length range is created unless a negative `step` is specified.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns a new range array.
     * @example
     *
     * _.range(4);
     * // => [0, 1, 2, 3]
     *
     * _.range(1, 5);
     * // => [1, 2, 3, 4]
     *
     * _.range(0, 20, 5);
     * // => [0, 5, 10, 15]
     *
     * _.range(0, -4, -1);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.range(0);
     * // => []
     */
    function range(start, end, step) {
      start = +start || 0;
      step = typeof step == 'number' ? step : (+step || 1);

      if (end == null) {
        end = start;
        start = 0;
      }
      // use `Array(length)` so engines like Chakra and V8 avoid slower modes
      // http://youtu.be/XAqIpGU8ZZk#t=17m25s
      var index = -1,
          length = nativeMax(0, ceil((end - start) / (step || 1))),
          result = Array(length);

      while (++index < length) {
        result[index] = start;
        start += step;
      }
      return result;
    }

    /**
     * Removes all elements from an array that the callback returns truey for
     * and returns an array of removed elements. The callback is bound to `thisArg`
     * and invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to modify.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4, 5, 6];
     * var evens = _.remove(array, function(num) { return num % 2 == 0; });
     *
     * console.log(array);
     * // => [1, 3, 5]
     *
     * console.log(evens);
     * // => [2, 4, 6]
     */
    function remove(array, callback, thisArg) {
      var index = -1,
          length = array ? array.length : 0,
          result = [];

      callback = lodash.createCallback(callback, thisArg, 3);
      while (++index < length) {
        var value = array[index];
        if (callback(value, index, array)) {
          result.push(value);
          splice.call(array, index--, 1);
          length--;
        }
      }
      return result;
    }

    /**
     * The opposite of `_.initial` this method gets all but the first element or
     * first `n` elements of an array. If a callback function is provided elements
     * at the beginning of the array are excluded from the result as long as the
     * callback returns truey. The callback is bound to `thisArg` and invoked
     * with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias drop, tail
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback=1] The function called
     *  per element or the number of elements to exclude. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a slice of `array`.
     * @example
     *
     * _.rest([1, 2, 3]);
     * // => [2, 3]
     *
     * _.rest([1, 2, 3], 2);
     * // => [3]
     *
     * _.rest([1, 2, 3], function(num) {
     *   return num < 3;
     * });
     * // => [3]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': false,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true, 'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.pluck(_.rest(characters, 'blocked'), 'name');
     * // => ['fred', 'pebbles']
     *
     * // using "_.where" callback shorthand
     * _.rest(characters, { 'employer': 'slate' });
     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]
     */
    function rest(array, callback, thisArg) {
      if (typeof callback != 'number' && callback != null) {
        var n = 0,
            index = -1,
            length = array ? array.length : 0;

        callback = lodash.createCallback(callback, thisArg, 3);
        while (++index < length && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = (callback == null || thisArg) ? 1 : nativeMax(0, callback);
      }
      return slice(array, n);
    }

    /**
     * Uses a binary search to determine the smallest index at which a value
     * should be inserted into a given sorted array in order to maintain the sort
     * order of the array. If a callback is provided it will be executed for
     * `value` and each element of `array` to compute their sort ranking. The
     * callback is bound to `thisArg` and invoked with one argument; (value).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedIndex([20, 30, 50], 40);
     * // => 2
     *
     * // using "_.pluck" callback shorthand
     * _.sortedIndex([{ 'x': 20 }, { 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');
     * // => 2
     *
     * var dict = {
     *   'wordToNumber': { 'twenty': 20, 'thirty': 30, 'fourty': 40, 'fifty': 50 }
     * };
     *
     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {
     *   return dict.wordToNumber[word];
     * });
     * // => 2
     *
     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {
     *   return this.wordToNumber[word];
     * }, dict);
     * // => 2
     */
    function sortedIndex(array, value, callback, thisArg) {
      var low = 0,
          high = array ? array.length : low;

      // explicitly reference `identity` for better inlining in Firefox
      callback = callback ? lodash.createCallback(callback, thisArg, 1) : identity;
      value = callback(value);

      while (low < high) {
        var mid = (low + high) >>> 1;
        (callback(array[mid]) < value)
          ? low = mid + 1
          : high = mid;
      }
      return low;
    }

    /**
     * Creates an array of unique values, in order, of the provided arrays using
     * strict equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of combined values.
     * @example
     *
     * _.union([1, 2, 3], [5, 2, 1, 4], [2, 1]);
     * // => [1, 2, 3, 5, 4]
     */
    function union() {
      return baseUniq(baseFlatten(arguments, true, true));
    }

    /**
     * Creates a duplicate-value-free version of an array using strict equality
     * for comparisons, i.e. `===`. If the array is sorted, providing
     * `true` for `isSorted` will use a faster algorithm. If a callback is provided
     * each element of `array` is passed through the callback before uniqueness
     * is computed. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias unique
     * @category Arrays
     * @param {Array} array The array to process.
     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a duplicate-value-free array.
     * @example
     *
     * _.uniq([1, 2, 1, 3, 1]);
     * // => [1, 2, 3]
     *
     * _.uniq([1, 1, 2, 2, 3], true);
     * // => [1, 2, 3]
     *
     * _.uniq(['A', 'b', 'C', 'a', 'B', 'c'], function(letter) { return letter.toLowerCase(); });
     * // => ['A', 'b', 'C']
     *
     * _.uniq([1, 2.5, 3, 1.5, 2, 3.5], function(num) { return this.floor(num); }, Math);
     * // => [1, 2.5, 3]
     *
     * // using "_.pluck" callback shorthand
     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */
    function uniq(array, isSorted, callback, thisArg) {
      // juggle arguments
      if (typeof isSorted != 'boolean' && isSorted != null) {
        thisArg = callback;
        callback = (typeof isSorted != 'function' && thisArg && thisArg[isSorted] === array) ? null : isSorted;
        isSorted = false;
      }
      if (callback != null) {
        callback = lodash.createCallback(callback, thisArg, 3);
      }
      return baseUniq(array, isSorted, callback);
    }

    /**
     * Creates an array excluding all provided values using strict equality for
     * comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to filter.
     * @param {...*} [value] The values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);
     * // => [2, 3, 4]
     */
    function without(array) {
      return baseDifference(array, slice(arguments, 1));
    }

    /**
     * Creates an array that is the symmetric difference of the provided arrays.
     * See http://en.wikipedia.org/wiki/Symmetric_difference.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of values.
     * @example
     *
     * _.xor([1, 2, 3], [5, 2, 1, 4]);
     * // => [3, 5, 4]
     *
     * _.xor([1, 2, 5], [2, 3, 5], [3, 4, 5]);
     * // => [1, 4, 5]
     */
    function xor() {
      var index = -1,
          length = arguments.length;

      while (++index < length) {
        var array = arguments[index];
        if (isArray(array) || isArguments(array)) {
          var result = result
            ? baseUniq(baseDifference(result, array).concat(baseDifference(array, result)))
            : array;
        }
      }
      return result || [];
    }

    /**
     * Creates an array of grouped elements, the first of which contains the first
     * elements of the given arrays, the second of which contains the second
     * elements of the given arrays, and so on.
     *
     * @static
     * @memberOf _
     * @alias unzip
     * @category Arrays
     * @param {...Array} [array] Arrays to process.
     * @returns {Array} Returns a new array of grouped elements.
     * @example
     *
     * _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     */
    function zip() {
      var array = arguments.length > 1 ? arguments : arguments[0],
          index = -1,
          length = array ? max(pluck(array, 'length')) : 0,
          result = Array(length < 0 ? 0 : length);

      while (++index < length) {
        result[index] = pluck(array, index);
      }
      return result;
    }

    /**
     * Creates an object composed from arrays of `keys` and `values`. Provide
     * either a single two dimensional array, i.e. `[[key1, value1], [key2, value2]]`
     * or two arrays, one of `keys` and one of corresponding `values`.
     *
     * @static
     * @memberOf _
     * @alias object
     * @category Arrays
     * @param {Array} keys The array of keys.
     * @param {Array} [values=[]] The array of values.
     * @returns {Object} Returns an object composed of the given keys and
     *  corresponding values.
     * @example
     *
     * _.zipObject(['fred', 'barney'], [30, 40]);
     * // => { 'fred': 30, 'barney': 40 }
     */
    function zipObject(keys, values) {
      var index = -1,
          length = keys ? keys.length : 0,
          result = {};

      if (!values && length && !isArray(keys[0])) {
        values = [];
      }
      while (++index < length) {
        var key = keys[index];
        if (values) {
          result[key] = values[index];
        } else if (key) {
          result[key[0]] = key[1];
        }
      }
      return result;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a function that executes `func`, with  the `this` binding and
     * arguments of the created function, only after being called `n` times.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {number} n The number of times the function must be called before
     *  `func` is executed.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var saves = ['profile', 'settings'];
     *
     * var done = _.after(saves.length, function() {
     *   console.log('Done saving!');
     * });
     *
     * _.forEach(saves, function(type) {
     *   asyncSave({ 'type': type, 'complete': done });
     * });
     * // => logs 'Done saving!', after all saves have completed
     */
    function after(n, func) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      return function() {
        if (--n < 1) {
          return func.apply(this, arguments);
        }
      };
    }

    /**
     * Creates a function that, when called, invokes `func` with the `this`
     * binding of `thisArg` and prepends any additional `bind` arguments to those
     * provided to the bound function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to bind.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var func = function(greeting) {
     *   return greeting + ' ' + this.name;
     * };
     *
     * func = _.bind(func, { 'name': 'fred' }, 'hi');
     * func();
     * // => 'hi fred'
     */
    function bind(func, thisArg) {
      return arguments.length > 2
        ? createWrapper(func, 17, slice(arguments, 2), null, thisArg)
        : createWrapper(func, 1, null, null, thisArg);
    }

    /**
     * Binds methods of an object to the object itself, overwriting the existing
     * method. Method names may be specified as individual arguments or as arrays
     * of method names. If no method names are provided all the function properties
     * of `object` will be bound.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Object} object The object to bind and assign the bound methods to.
     * @param {...string} [methodName] The object method names to
     *  bind, specified as individual method names or arrays of method names.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var view = {
     *   'label': 'docs',
     *   'onClick': function() { console.log('clicked ' + this.label); }
     * };
     *
     * _.bindAll(view);
     * jQuery('#docs').on('click', view.onClick);
     * // => logs 'clicked docs', when the button is clicked
     */
    function bindAll(object) {
      var funcs = arguments.length > 1 ? baseFlatten(arguments, true, false, 1) : functions(object),
          index = -1,
          length = funcs.length;

      while (++index < length) {
        var key = funcs[index];
        object[key] = createWrapper(object[key], 1, null, null, object);
      }
      return object;
    }

    /**
     * Creates a function that, when called, invokes the method at `object[key]`
     * and prepends any additional `bindKey` arguments to those provided to the bound
     * function. This method differs from `_.bind` by allowing bound functions to
     * reference methods that will be redefined or don't yet exist.
     * See http://michaux.ca/articles/lazy-function-definition-pattern.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Object} object The object the method belongs to.
     * @param {string} key The key of the method.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var object = {
     *   'name': 'fred',
     *   'greet': function(greeting) {
     *     return greeting + ' ' + this.name;
     *   }
     * };
     *
     * var func = _.bindKey(object, 'greet', 'hi');
     * func();
     * // => 'hi fred'
     *
     * object.greet = function(greeting) {
     *   return greeting + 'ya ' + this.name + '!';
     * };
     *
     * func();
     * // => 'hiya fred!'
     */
    function bindKey(object, key) {
      return arguments.length > 2
        ? createWrapper(key, 19, slice(arguments, 2), null, object)
        : createWrapper(key, 3, null, null, object);
    }

    /**
     * Creates a function that is the composition of the provided functions,
     * where each function consumes the return value of the function that follows.
     * For example, composing the functions `f()`, `g()`, and `h()` produces `f(g(h()))`.
     * Each function is executed with the `this` binding of the composed function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {...Function} [func] Functions to compose.
     * @returns {Function} Returns the new composed function.
     * @example
     *
     * var realNameMap = {
     *   'pebbles': 'penelope'
     * };
     *
     * var format = function(name) {
     *   name = realNameMap[name.toLowerCase()] || name;
     *   return name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();
     * };
     *
     * var greet = function(formatted) {
     *   return 'Hiya ' + formatted + '!';
     * };
     *
     * var welcome = _.compose(greet, format);
     * welcome('pebbles');
     * // => 'Hiya Penelope!'
     */
    function compose() {
      var funcs = arguments,
          length = funcs.length;

      while (length--) {
        if (!isFunction(funcs[length])) {
          throw new TypeError;
        }
      }
      return function() {
        var args = arguments,
            length = funcs.length;

        while (length--) {
          args = [funcs[length].apply(this, args)];
        }
        return args[0];
      };
    }

    /**
     * Creates a function which accepts one or more arguments of `func` that when
     * invoked either executes `func` returning its result, if all `func` arguments
     * have been provided, or returns a function that accepts one or more of the
     * remaining `func` arguments, and so on. The arity of `func` can be specified
     * if `func.length` is not sufficient.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var curried = _.curry(function(a, b, c) {
     *   console.log(a + b + c);
     * });
     *
     * curried(1)(2)(3);
     * // => 6
     *
     * curried(1, 2)(3);
     * // => 6
     *
     * curried(1, 2, 3);
     * // => 6
     */
    function curry(func, arity) {
      arity = typeof arity == 'number' ? arity : (+arity || func.length);
      return createWrapper(func, 4, null, null, null, arity);
    }

    /**
     * Creates a function that will delay the execution of `func` until after
     * `wait` milliseconds have elapsed since the last time it was invoked.
     * Provide an options object to indicate that `func` should be invoked on
     * the leading and/or trailing edge of the `wait` timeout. Subsequent calls
     * to the debounced function will return the result of the last `func` call.
     *
     * Note: If `leading` and `trailing` options are `true` `func` will be called
     * on the trailing edge of the timeout only if the the debounced function is
     * invoked more than once during the `wait` timeout.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to debounce.
     * @param {number} wait The number of milliseconds to delay.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=false] Specify execution on the leading edge of the timeout.
     * @param {number} [options.maxWait] The maximum time `func` is allowed to be delayed before it's called.
     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.
     * @returns {Function} Returns the new debounced function.
     * @example
     *
     * // avoid costly calculations while the window size is in flux
     * var lazyLayout = _.debounce(calculateLayout, 150);
     * jQuery(window).on('resize', lazyLayout);
     *
     * // execute `sendMail` when the click event is fired, debouncing subsequent calls
     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
     *   'leading': true,
     *   'trailing': false
     * });
     *
     * // ensure `batchLog` is executed once after 1 second of debounced calls
     * var source = new EventSource('/stream');
     * source.addEventListener('message', _.debounce(batchLog, 250, {
     *   'maxWait': 1000
     * }, false);
     */
    function debounce(func, wait, options) {
      var args,
          maxTimeoutId,
          result,
          stamp,
          thisArg,
          timeoutId,
          trailingCall,
          lastCalled = 0,
          maxWait = false,
          trailing = true;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      wait = nativeMax(0, wait) || 0;
      if (options === true) {
        var leading = true;
        trailing = false;
      } else if (isObject(options)) {
        leading = options.leading;
        maxWait = 'maxWait' in options && (nativeMax(wait, options.maxWait) || 0);
        trailing = 'trailing' in options ? options.trailing : trailing;
      }
      var delayed = function() {
        var remaining = wait - (now() - stamp);
        if (remaining <= 0) {
          if (maxTimeoutId) {
            clearTimeout(maxTimeoutId);
          }
          var isCalled = trailingCall;
          maxTimeoutId = timeoutId = trailingCall = undefined;
          if (isCalled) {
            lastCalled = now();
            result = func.apply(thisArg, args);
            if (!timeoutId && !maxTimeoutId) {
              args = thisArg = null;
            }
          }
        } else {
          timeoutId = setTimeout(delayed, remaining);
        }
      };

      var maxDelayed = function() {
        if (timeoutId) {
          clearTimeout(timeoutId);
        }
        maxTimeoutId = timeoutId = trailingCall = undefined;
        if (trailing || (maxWait !== wait)) {
          lastCalled = now();
          result = func.apply(thisArg, args);
          if (!timeoutId && !maxTimeoutId) {
            args = thisArg = null;
          }
        }
      };

      return function() {
        args = arguments;
        stamp = now();
        thisArg = this;
        trailingCall = trailing && (timeoutId || !leading);

        if (maxWait === false) {
          var leadingCall = leading && !timeoutId;
        } else {
          if (!maxTimeoutId && !leading) {
            lastCalled = stamp;
          }
          var remaining = maxWait - (stamp - lastCalled),
              isCalled = remaining <= 0;

          if (isCalled) {
            if (maxTimeoutId) {
              maxTimeoutId = clearTimeout(maxTimeoutId);
            }
            lastCalled = stamp;
            result = func.apply(thisArg, args);
          }
          else if (!maxTimeoutId) {
            maxTimeoutId = setTimeout(maxDelayed, remaining);
          }
        }
        if (isCalled && timeoutId) {
          timeoutId = clearTimeout(timeoutId);
        }
        else if (!timeoutId && wait !== maxWait) {
          timeoutId = setTimeout(delayed, wait);
        }
        if (leadingCall) {
          isCalled = true;
          result = func.apply(thisArg, args);
        }
        if (isCalled && !timeoutId && !maxTimeoutId) {
          args = thisArg = null;
        }
        return result;
      };
    }

    /**
     * Defers executing the `func` function until the current call stack has cleared.
     * Additional arguments will be provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to defer.
     * @param {...*} [arg] Arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.defer(function(text) { console.log(text); }, 'deferred');
     * // logs 'deferred' after one or more milliseconds
     */
    function defer(func) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var args = slice(arguments, 1);
      return setTimeout(function() { func.apply(undefined, args); }, 1);
    }

    /**
     * Executes the `func` function after `wait` milliseconds. Additional arguments
     * will be provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay execution.
     * @param {...*} [arg] Arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.delay(function(text) { console.log(text); }, 1000, 'later');
     * // => logs 'later' after one second
     */
    function delay(func, wait) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var args = slice(arguments, 2);
      return setTimeout(function() { func.apply(undefined, args); }, wait);
    }

    /**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided it will be used to determine the cache key for storing the result
     * based on the arguments provided to the memoized function. By default, the
     * first argument provided to the memoized function is used as the cache key.
     * The `func` is executed with the `this` binding of the memoized function.
     * The result cache is exposed as the `cache` property on the memoized function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] A function used to resolve the cache key.
     * @returns {Function} Returns the new memoizing function.
     * @example
     *
     * var fibonacci = _.memoize(function(n) {
     *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
     * });
     *
     * fibonacci(9)
     * // => 34
     *
     * var data = {
     *   'fred': { 'name': 'fred', 'age': 40 },
     *   'pebbles': { 'name': 'pebbles', 'age': 1 }
     * };
     *
     * // modifying the result cache
     * var get = _.memoize(function(name) { return data[name]; }, _.identity);
     * get('pebbles');
     * // => { 'name': 'pebbles', 'age': 1 }
     *
     * get.cache.pebbles.name = 'penelope';
     * get('pebbles');
     * // => { 'name': 'penelope', 'age': 1 }
     */
    function memoize(func, resolver) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var memoized = function() {
        var cache = memoized.cache,
            key = resolver ? resolver.apply(this, arguments) : keyPrefix + arguments[0];

        return hasOwnProperty.call(cache, key)
          ? cache[key]
          : (cache[key] = func.apply(this, arguments));
      }
      memoized.cache = {};
      return memoized;
    }

    /**
     * Creates a function that is restricted to execute `func` once. Repeat calls to
     * the function will return the value of the first call. The `func` is executed
     * with the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var initialize = _.once(createApplication);
     * initialize();
     * initialize();
     * // `initialize` executes `createApplication` once
     */
    function once(func) {
      var ran,
          result;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      return function() {
        if (ran) {
          return result;
        }
        ran = true;
        result = func.apply(this, arguments);

        // clear the `func` variable so the function may be garbage collected
        func = null;
        return result;
      };
    }

    /**
     * Creates a function that, when called, invokes `func` with any additional
     * `partial` arguments prepended to those provided to the new function. This
     * method is similar to `_.bind` except it does **not** alter the `this` binding.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) { return greeting + ' ' + name; };
     * var hi = _.partial(greet, 'hi');
     * hi('fred');
     * // => 'hi fred'
     */
    function partial(func) {
      return createWrapper(func, 16, slice(arguments, 1));
    }

    /**
     * This method is like `_.partial` except that `partial` arguments are
     * appended to those provided to the new function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var defaultsDeep = _.partialRight(_.merge, _.defaults);
     *
     * var options = {
     *   'variable': 'data',
     *   'imports': { 'jq': $ }
     * };
     *
     * defaultsDeep(options, _.templateSettings);
     *
     * options.variable
     * // => 'data'
     *
     * options.imports
     * // => { '_': _, 'jq': $ }
     */
    function partialRight(func) {
      return createWrapper(func, 32, null, slice(arguments, 1));
    }

    /**
     * Creates a function that, when executed, will only call the `func` function
     * at most once per every `wait` milliseconds. Provide an options object to
     * indicate that `func` should be invoked on the leading and/or trailing edge
     * of the `wait` timeout. Subsequent calls to the throttled function will
     * return the result of the last `func` call.
     *
     * Note: If `leading` and `trailing` options are `true` `func` will be called
     * on the trailing edge of the timeout only if the the throttled function is
     * invoked more than once during the `wait` timeout.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to throttle.
     * @param {number} wait The number of milliseconds to throttle executions to.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=true] Specify execution on the leading edge of the timeout.
     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.
     * @returns {Function} Returns the new throttled function.
     * @example
     *
     * // avoid excessively updating the position while scrolling
     * var throttled = _.throttle(updatePosition, 100);
     * jQuery(window).on('scroll', throttled);
     *
     * // execute `renewToken` when the click event is fired, but not more than once every 5 minutes
     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
     *   'trailing': false
     * }));
     */
    function throttle(func, wait, options) {
      var leading = true,
          trailing = true;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      if (options === false) {
        leading = false;
      } else if (isObject(options)) {
        leading = 'leading' in options ? options.leading : leading;
        trailing = 'trailing' in options ? options.trailing : trailing;
      }
      debounceOptions.leading = leading;
      debounceOptions.maxWait = wait;
      debounceOptions.trailing = trailing;

      return debounce(func, wait, debounceOptions);
    }

    /**
     * Creates a function that provides `value` to the wrapper function as its
     * first argument. Additional arguments provided to the function are appended
     * to those provided to the wrapper function. The wrapper is executed with
     * the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {*} value The value to wrap.
     * @param {Function} wrapper The wrapper function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var p = _.wrap(_.escape, function(func, text) {
     *   return '<p>' + func(text) + '</p>';
     * });
     *
     * p('Fred, Wilma, & Pebbles');
     * // => '<p>Fred, Wilma, &amp; Pebbles</p>'
     */
    function wrap(value, wrapper) {
      return createWrapper(wrapper, 16, [value]);
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a function that returns `value`.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} value The value to return from the new function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var object = { 'name': 'fred' };
     * var getter = _.constant(object);
     * getter() === object;
     * // => true
     */
    function constant(value) {
      return function() {
        return value;
      };
    }

    /**
     * Produces a callback bound to an optional `thisArg`. If `func` is a property
     * name the created callback will return the property value for a given element.
     * If `func` is an object the created callback will return `true` for elements
     * that contain the equivalent object properties, otherwise it will return `false`.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} [func=identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of the created callback.
     * @param {number} [argCount] The number of arguments the callback accepts.
     * @returns {Function} Returns a callback function.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // wrap to create custom callback shorthands
     * _.createCallback = _.wrap(_.createCallback, function(func, callback, thisArg) {
     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(callback);
     *   return !match ? func(callback, thisArg) : function(object) {
     *     return match[2] == 'gt' ? object[match[1]] > match[3] : object[match[1]] < match[3];
     *   };
     * });
     *
     * _.filter(characters, 'age__gt38');
     * // => [{ 'name': 'fred', 'age': 40 }]
     */
    function createCallback(func, thisArg, argCount) {
      var type = typeof func;
      if (func == null || type == 'function') {
        return baseCreateCallback(func, thisArg, argCount);
      }
      // handle "_.pluck" style callback shorthands
      if (type != 'object') {
        return property(func);
      }
      var props = keys(func),
          key = props[0],
          a = func[key];

      // handle "_.where" style callback shorthands
      if (props.length == 1 && a === a && !isObject(a)) {
        // fast path the common case of providing an object with a single
        // property containing a primitive value
        return function(object) {
          var b = object[key];
          return a === b && (a !== 0 || (1 / a == 1 / b));
        };
      }
      return function(object) {
        var length = props.length,
            result = false;

        while (length--) {
          if (!(result = baseIsEqual(object[props[length]], func[props[length]], null, true))) {
            break;
          }
        }
        return result;
      };
    }

    /**
     * Converts the characters `&`, `<`, `>`, `"`, and `'` in `string` to their
     * corresponding HTML entities.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} string The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escape('Fred, Wilma, & Pebbles');
     * // => 'Fred, Wilma, &amp; Pebbles'
     */
    function escape(string) {
      return string == null ? '' : String(string).replace(reUnescapedHtml, escapeHtmlChar);
    }

    /**
     * This method returns the first argument provided to it.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} value Any value.
     * @returns {*} Returns `value`.
     * @example
     *
     * var object = { 'name': 'fred' };
     * _.identity(object) === object;
     * // => true
     */
    function identity(value) {
      return value;
    }

    /**
     * Adds function properties of a source object to the destination object.
     * If `object` is a function methods will be added to its prototype as well.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {Function|Object} [object=lodash] object The destination object.
     * @param {Object} source The object of functions to add.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.chain=true] Specify whether the functions added are chainable.
     * @example
     *
     * function capitalize(string) {
     *   return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();
     * }
     *
     * _.mixin({ 'capitalize': capitalize });
     * _.capitalize('fred');
     * // => 'Fred'
     *
     * _('fred').capitalize().value();
     * // => 'Fred'
     *
     * _.mixin({ 'capitalize': capitalize }, { 'chain': false });
     * _('fred').capitalize();
     * // => 'Fred'
     */
    function mixin(object, source, options) {
      var chain = true,
          methodNames = source && functions(source);

      if (!source || (!options && !methodNames.length)) {
        if (options == null) {
          options = source;
        }
        ctor = lodashWrapper;
        source = object;
        object = lodash;
        methodNames = functions(source);
      }
      if (options === false) {
        chain = false;
      } else if (isObject(options) && 'chain' in options) {
        chain = options.chain;
      }
      var ctor = object,
          isFunc = isFunction(ctor);

      forEach(methodNames, function(methodName) {
        var func = object[methodName] = source[methodName];
        if (isFunc) {
          ctor.prototype[methodName] = function() {
            var chainAll = this.__chain__,
                value = this.__wrapped__,
                args = [value];

            push.apply(args, arguments);
            var result = func.apply(object, args);
            if (chain || chainAll) {
              if (value === result && isObject(result)) {
                return this;
              }
              result = new ctor(result);
              result.__chain__ = chainAll;
            }
            return result;
          };
        }
      });
    }

    /**
     * Reverts the '_' variable to its previous value and returns a reference to
     * the `lodash` function.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @returns {Function} Returns the `lodash` function.
     * @example
     *
     * var lodash = _.noConflict();
     */
    function noConflict() {
      context._ = oldDash;
      return this;
    }

    /**
     * A no-operation function.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @example
     *
     * var object = { 'name': 'fred' };
     * _.noop(object) === undefined;
     * // => true
     */
    function noop() {
      // no operation performed
    }

    /**
     * Gets the number of milliseconds that have elapsed since the Unix epoch
     * (1 January 1970 00:00:00 UTC).
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @example
     *
     * var stamp = _.now();
     * _.defer(function() { console.log(_.now() - stamp); });
     * // => logs the number of milliseconds it took for the deferred function to be called
     */
    var now = isNative(now = Date.now) && now || function() {
      return new Date().getTime();
    };

    /**
     * Converts the given value into an integer of the specified radix.
     * If `radix` is `undefined` or `0` a `radix` of `10` is used unless the
     * `value` is a hexadecimal, in which case a `radix` of `16` is used.
     *
     * Note: This method avoids differences in native ES3 and ES5 `parseInt`
     * implementations. See http://es5.github.io/#E.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} value The value to parse.
     * @param {number} [radix] The radix used to interpret the value to parse.
     * @returns {number} Returns the new integer value.
     * @example
     *
     * _.parseInt('08');
     * // => 8
     */
    var parseInt = nativeParseInt(whitespace + '08') == 8 ? nativeParseInt : function(value, radix) {
      // Firefox < 21 and Opera < 15 follow the ES3 specified implementation of `parseInt`
      return nativeParseInt(isString(value) ? value.replace(reLeadingSpacesAndZeros, '') : value, radix || 0);
    };

    /**
     * Creates a "_.pluck" style function, which returns the `key` value of a
     * given object.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} key The name of the property to retrieve.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var characters = [
     *   { 'name': 'fred',   'age': 40 },
     *   { 'name': 'barney', 'age': 36 }
     * ];
     *
     * var getName = _.property('name');
     *
     * _.map(characters, getName);
     * // => ['barney', 'fred']
     *
     * _.sortBy(characters, getName);
     * // => [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred',   'age': 40 }]
     */
    function property(key) {
      return function(object) {
        return object[key];
      };
    }

    /**
     * Produces a random number between `min` and `max` (inclusive). If only one
     * argument is provided a number between `0` and the given number will be
     * returned. If `floating` is truey or either `min` or `max` are floats a
     * floating-point number will be returned instead of an integer.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {number} [min=0] The minimum possible value.
     * @param {number} [max=1] The maximum possible value.
     * @param {boolean} [floating=false] Specify returning a floating-point number.
     * @returns {number} Returns a random number.
     * @example
     *
     * _.random(0, 5);
     * // => an integer between 0 and 5
     *
     * _.random(5);
     * // => also an integer between 0 and 5
     *
     * _.random(5, true);
     * // => a floating-point number between 0 and 5
     *
     * _.random(1.2, 5.2);
     * // => a floating-point number between 1.2 and 5.2
     */
    function random(min, max, floating) {
      var noMin = min == null,
          noMax = max == null;

      if (floating == null) {
        if (typeof min == 'boolean' && noMax) {
          floating = min;
          min = 1;
        }
        else if (!noMax && typeof max == 'boolean') {
          floating = max;
          noMax = true;
        }
      }
      if (noMin && noMax) {
        max = 1;
      }
      min = +min || 0;
      if (noMax) {
        max = min;
        min = 0;
      } else {
        max = +max || 0;
      }
      if (floating || min % 1 || max % 1) {
        var rand = nativeRandom();
        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand +'').length - 1)))), max);
      }
      return baseRandom(min, max);
    }

    /**
     * Resolves the value of property `key` on `object`. If `key` is a function
     * it will be invoked with the `this` binding of `object` and its result returned,
     * else the property value is returned. If `object` is falsey then `undefined`
     * is returned.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {Object} object The object to inspect.
     * @param {string} key The name of the property to resolve.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = {
     *   'cheese': 'crumpets',
     *   'stuff': function() {
     *     return 'nonsense';
     *   }
     * };
     *
     * _.result(object, 'cheese');
     * // => 'crumpets'
     *
     * _.result(object, 'stuff');
     * // => 'nonsense'
     */
    function result(object, key) {
      if (object) {
        var value = object[key];
        return isFunction(value) ? object[key]() : value;
      }
    }

    /**
     * A micro-templating method that handles arbitrary delimiters, preserves
     * whitespace, and correctly escapes quotes within interpolated code.
     *
     * Note: In the development build, `_.template` utilizes sourceURLs for easier
     * debugging. See http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl
     *
     * For more information on precompiling templates see:
     * http://lodash.com/custom-builds
     *
     * For more information on Chrome extension sandboxes see:
     * http://developer.chrome.com/stable/extensions/sandboxingEval.html
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} text The template text.
     * @param {Object} data The data object used to populate the text.
     * @param {Object} [options] The options object.
     * @param {RegExp} [options.escape] The "escape" delimiter.
     * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
     * @param {Object} [options.imports] An object to import into the template as local variables.
     * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
     * @param {string} [sourceURL] The sourceURL of the template's compiled source.
     * @param {string} [variable] The data object variable name.
     * @returns {Function|string} Returns a compiled function when no `data` object
     *  is given, else it returns the interpolated text.
     * @example
     *
     * // using the "interpolate" delimiter to create a compiled template
     * var compiled = _.template('hello <%= name %>');
     * compiled({ 'name': 'fred' });
     * // => 'hello fred'
     *
     * // using the "escape" delimiter to escape HTML in data property values
     * _.template('<b><%- value %></b>', { 'value': '<script>' });
     * // => '<b>&lt;script&gt;</b>'
     *
     * // using the "evaluate" delimiter to generate HTML
     * var list = '<% _.forEach(people, function(name) { %><li><%- name %></li><% }); %>';
     * _.template(list, { 'people': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the ES6 delimiter as an alternative to the default "interpolate" delimiter
     * _.template('hello ${ name }', { 'name': 'pebbles' });
     * // => 'hello pebbles'
     *
     * // using the internal `print` function in "evaluate" delimiters
     * _.template('<% print("hello " + name); %>!', { 'name': 'barney' });
     * // => 'hello barney!'
     *
     * // using a custom template delimiters
     * _.templateSettings = {
     *   'interpolate': /{{([\s\S]+?)}}/g
     * };
     *
     * _.template('hello {{ name }}!', { 'name': 'mustache' });
     * // => 'hello mustache!'
     *
     * // using the `imports` option to import jQuery
     * var list = '<% jq.each(people, function(name) { %><li><%- name %></li><% }); %>';
     * _.template(list, { 'people': ['fred', 'barney'] }, { 'imports': { 'jq': jQuery } });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the `sourceURL` option to specify a custom sourceURL for the template
     * var compiled = _.template('hello <%= name %>', null, { 'sourceURL': '/basic/greeting.jst' });
     * compiled(data);
     * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
     *
     * // using the `variable` option to ensure a with-statement isn't used in the compiled template
     * var compiled = _.template('hi <%= data.name %>!', null, { 'variable': 'data' });
     * compiled.source;
     * // => function(data) {
     *   var __t, __p = '', __e = _.escape;
     *   __p += 'hi ' + ((__t = ( data.name )) == null ? '' : __t) + '!';
     *   return __p;
     * }
     *
     * // using the `source` property to inline compiled templates for meaningful
     * // line numbers in error messages and a stack trace
     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
     *   var JST = {\
     *     "main": ' + _.template(mainText).source + '\
     *   };\
     * ');
     */
    function template(text, data, options) {
      // based on John Resig's `tmpl` implementation
      // http://ejohn.org/blog/javascript-micro-templating/
      // and Laura Doktorova's doT.js
      // https://github.com/olado/doT
      var settings = lodash.templateSettings;
      text = String(text || '');

      // avoid missing dependencies when `iteratorTemplate` is not defined
      options = defaults({}, options, settings);

      var imports = defaults({}, options.imports, settings.imports),
          importsKeys = keys(imports),
          importsValues = values(imports);

      var isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";

      // compile the regexp to match each delimiter
      var reDelimiters = RegExp(
        (options.escape || reNoMatch).source + '|' +
        interpolate.source + '|' +
        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
        (options.evaluate || reNoMatch).source + '|$'
      , 'g');

      text.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
        interpolateValue || (interpolateValue = esTemplateValue);

        // escape characters that cannot be included in string literals
        source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);

        // replace delimiters with snippets
        if (escapeValue) {
          source += "' +\n__e(" + escapeValue + ") +\n'";
        }
        if (evaluateValue) {
          isEvaluating = true;
          source += "';\n" + evaluateValue + ";\n__p += '";
        }
        if (interpolateValue) {
          source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
        }
        index = offset + match.length;

        // the JS engine embedded in Adobe products requires returning the `match`
        // string in order to produce the correct `offset` value
        return match;
      });

      source += "';\n";

      // if `variable` is not specified, wrap a with-statement around the generated
      // code to add the data object to the top of the scope chain
      var variable = options.variable,
          hasVariable = variable;

      if (!hasVariable) {
        variable = 'obj';
        source = 'with (' + variable + ') {\n' + source + '\n}\n';
      }
      // cleanup code by stripping empty strings
      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
        .replace(reEmptyStringMiddle, '$1')
        .replace(reEmptyStringTrailing, '$1;');

      // frame code as the function body
      source = 'function(' + variable + ') {\n' +
        (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
        "var __t, __p = '', __e = _.escape" +
        (isEvaluating
          ? ', __j = Array.prototype.join;\n' +
            "function print() { __p += __j.call(arguments, '') }\n"
          : ';\n'
        ) +
        source +
        'return __p\n}';

      // Use a sourceURL for easier debugging.
      // http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl
      var sourceURL = '\n/*\n//# sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';

      try {
        var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
      } catch(e) {
        e.source = source;
        throw e;
      }
      if (data) {
        return result(data);
      }
      // provide the compiled function's source by its `toString` method, in
      // supported environments, or the `source` property as a convenience for
      // inlining compiled templates during the build process
      result.source = source;
      return result;
    }

    /**
     * Executes the callback `n` times, returning an array of the results
     * of each callback execution. The callback is bound to `thisArg` and invoked
     * with one argument; (index).
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {number} n The number of times to execute the callback.
     * @param {Function} callback The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns an array of the results of each `callback` execution.
     * @example
     *
     * var diceRolls = _.times(3, _.partial(_.random, 1, 6));
     * // => [3, 6, 4]
     *
     * _.times(3, function(n) { mage.castSpell(n); });
     * // => calls `mage.castSpell(n)` three times, passing `n` of `0`, `1`, and `2` respectively
     *
     * _.times(3, function(n) { this.cast(n); }, mage);
     * // => also calls `mage.castSpell(n)` three times
     */
    function times(n, callback, thisArg) {
      n = (n = +n) > -1 ? n : 0;
      var index = -1,
          result = Array(n);

      callback = baseCreateCallback(callback, thisArg, 1);
      while (++index < n) {
        result[index] = callback(index);
      }
      return result;
    }

    /**
     * The inverse of `_.escape` this method converts the HTML entities
     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to their
     * corresponding characters.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} string The string to unescape.
     * @returns {string} Returns the unescaped string.
     * @example
     *
     * _.unescape('Fred, Barney &amp; Pebbles');
     * // => 'Fred, Barney & Pebbles'
     */
    function unescape(string) {
      return string == null ? '' : String(string).replace(reEscapedHtml, unescapeHtmlChar);
    }

    /**
     * Generates a unique ID. If `prefix` is provided the ID will be appended to it.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} [prefix] The value to prefix the ID with.
     * @returns {string} Returns the unique ID.
     * @example
     *
     * _.uniqueId('contact_');
     * // => 'contact_104'
     *
     * _.uniqueId();
     * // => '105'
     */
    function uniqueId(prefix) {
      var id = ++idCounter;
      return String(prefix == null ? '' : prefix) + id;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object that wraps the given value with explicit
     * method chaining enabled.
     *
     * @static
     * @memberOf _
     * @category Chaining
     * @param {*} value The value to wrap.
     * @returns {Object} Returns the wrapper object.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36 },
     *   { 'name': 'fred',    'age': 40 },
     *   { 'name': 'pebbles', 'age': 1 }
     * ];
     *
     * var youngest = _.chain(characters)
     *     .sortBy('age')
     *     .map(function(chr) { return chr.name + ' is ' + chr.age; })
     *     .first()
     *     .value();
     * // => 'pebbles is 1'
     */
    function chain(value) {
      value = new lodashWrapper(value);
      value.__chain__ = true;
      return value;
    }

    /**
     * Invokes `interceptor` with the `value` as the first argument and then
     * returns `value`. The purpose of this method is to "tap into" a method
     * chain in order to perform operations on intermediate results within
     * the chain.
     *
     * @static
     * @memberOf _
     * @category Chaining
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @returns {*} Returns `value`.
     * @example
     *
     * _([1, 2, 3, 4])
     *  .tap(function(array) { array.pop(); })
     *  .reverse()
     *  .value();
     * // => [3, 2, 1]
     */
    function tap(value, interceptor) {
      interceptor(value);
      return value;
    }

    /**
     * Enables explicit method chaining on the wrapper object.
     *
     * @name chain
     * @memberOf _
     * @category Chaining
     * @returns {*} Returns the wrapper object.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // without explicit chaining
     * _(characters).first();
     * // => { 'name': 'barney', 'age': 36 }
     *
     * // with explicit chaining
     * _(characters).chain()
     *   .first()
     *   .pick('age')
     *   .value();
     * // => { 'age': 36 }
     */
    function wrapperChain() {
      this.__chain__ = true;
      return this;
    }

    /**
     * Produces the `toString` result of the wrapped value.
     *
     * @name toString
     * @memberOf _
     * @category Chaining
     * @returns {string} Returns the string result.
     * @example
     *
     * _([1, 2, 3]).toString();
     * // => '1,2,3'
     */
    function wrapperToString() {
      return String(this.__wrapped__);
    }

    /**
     * Extracts the wrapped value.
     *
     * @name valueOf
     * @memberOf _
     * @alias value
     * @category Chaining
     * @returns {*} Returns the wrapped value.
     * @example
     *
     * _([1, 2, 3]).valueOf();
     * // => [1, 2, 3]
     */
    function wrapperValueOf() {
      return this.__wrapped__;
    }

    /*--------------------------------------------------------------------------*/

    // add functions that return wrapped values when chaining
    lodash.after = after;
    lodash.assign = assign;
    lodash.at = at;
    lodash.bind = bind;
    lodash.bindAll = bindAll;
    lodash.bindKey = bindKey;
    lodash.chain = chain;
    lodash.compact = compact;
    lodash.compose = compose;
    lodash.constant = constant;
    lodash.countBy = countBy;
    lodash.create = create;
    lodash.createCallback = createCallback;
    lodash.curry = curry;
    lodash.debounce = debounce;
    lodash.defaults = defaults;
    lodash.defer = defer;
    lodash.delay = delay;
    lodash.difference = difference;
    lodash.filter = filter;
    lodash.flatten = flatten;
    lodash.forEach = forEach;
    lodash.forEachRight = forEachRight;
    lodash.forIn = forIn;
    lodash.forInRight = forInRight;
    lodash.forOwn = forOwn;
    lodash.forOwnRight = forOwnRight;
    lodash.functions = functions;
    lodash.groupBy = groupBy;
    lodash.indexBy = indexBy;
    lodash.initial = initial;
    lodash.intersection = intersection;
    lodash.invert = invert;
    lodash.invoke = invoke;
    lodash.keys = keys;
    lodash.map = map;
    lodash.mapValues = mapValues;
    lodash.max = max;
    lodash.memoize = memoize;
    lodash.merge = merge;
    lodash.min = min;
    lodash.omit = omit;
    lodash.once = once;
    lodash.pairs = pairs;
    lodash.partial = partial;
    lodash.partialRight = partialRight;
    lodash.pick = pick;
    lodash.pluck = pluck;
    lodash.property = property;
    lodash.pull = pull;
    lodash.range = range;
    lodash.reject = reject;
    lodash.remove = remove;
    lodash.rest = rest;
    lodash.shuffle = shuffle;
    lodash.sortBy = sortBy;
    lodash.tap = tap;
    lodash.throttle = throttle;
    lodash.times = times;
    lodash.toArray = toArray;
    lodash.transform = transform;
    lodash.union = union;
    lodash.uniq = uniq;
    lodash.values = values;
    lodash.where = where;
    lodash.without = without;
    lodash.wrap = wrap;
    lodash.xor = xor;
    lodash.zip = zip;
    lodash.zipObject = zipObject;

    // add aliases
    lodash.collect = map;
    lodash.drop = rest;
    lodash.each = forEach;
    lodash.eachRight = forEachRight;
    lodash.extend = assign;
    lodash.methods = functions;
    lodash.object = zipObject;
    lodash.select = filter;
    lodash.tail = rest;
    lodash.unique = uniq;
    lodash.unzip = zip;

    // add functions to `lodash.prototype`
    mixin(lodash);

    /*--------------------------------------------------------------------------*/

    // add functions that return unwrapped values when chaining
    lodash.clone = clone;
    lodash.cloneDeep = cloneDeep;
    lodash.contains = contains;
    lodash.escape = escape;
    lodash.every = every;
    lodash.find = find;
    lodash.findIndex = findIndex;
    lodash.findKey = findKey;
    lodash.findLast = findLast;
    lodash.findLastIndex = findLastIndex;
    lodash.findLastKey = findLastKey;
    lodash.has = has;
    lodash.identity = identity;
    lodash.indexOf = indexOf;
    lodash.isArguments = isArguments;
    lodash.isArray = isArray;
    lodash.isBoolean = isBoolean;
    lodash.isDate = isDate;
    lodash.isElement = isElement;
    lodash.isEmpty = isEmpty;
    lodash.isEqual = isEqual;
    lodash.isFinite = isFinite;
    lodash.isFunction = isFunction;
    lodash.isNaN = isNaN;
    lodash.isNull = isNull;
    lodash.isNumber = isNumber;
    lodash.isObject = isObject;
    lodash.isPlainObject = isPlainObject;
    lodash.isRegExp = isRegExp;
    lodash.isString = isString;
    lodash.isUndefined = isUndefined;
    lodash.lastIndexOf = lastIndexOf;
    lodash.mixin = mixin;
    lodash.noConflict = noConflict;
    lodash.noop = noop;
    lodash.now = now;
    lodash.parseInt = parseInt;
    lodash.random = random;
    lodash.reduce = reduce;
    lodash.reduceRight = reduceRight;
    lodash.result = result;
    lodash.runInContext = runInContext;
    lodash.size = size;
    lodash.some = some;
    lodash.sortedIndex = sortedIndex;
    lodash.template = template;
    lodash.unescape = unescape;
    lodash.uniqueId = uniqueId;

    // add aliases
    lodash.all = every;
    lodash.any = some;
    lodash.detect = find;
    lodash.findWhere = find;
    lodash.foldl = reduce;
    lodash.foldr = reduceRight;
    lodash.include = contains;
    lodash.inject = reduce;

    mixin(function() {
      var source = {}
      forOwn(lodash, function(func, methodName) {
        if (!lodash.prototype[methodName]) {
          source[methodName] = func;
        }
      });
      return source;
    }(), false);

    /*--------------------------------------------------------------------------*/

    // add functions capable of returning wrapped and unwrapped values when chaining
    lodash.first = first;
    lodash.last = last;
    lodash.sample = sample;

    // add aliases
    lodash.take = first;
    lodash.head = first;

    forOwn(lodash, function(func, methodName) {
      var callbackable = methodName !== 'sample';
      if (!lodash.prototype[methodName]) {
        lodash.prototype[methodName]= function(n, guard) {
          var chainAll = this.__chain__,
              result = func(this.__wrapped__, n, guard);

          return !chainAll && (n == null || (guard && !(callbackable && typeof n == 'function')))
            ? result
            : new lodashWrapper(result, chainAll);
        };
      }
    });

    /*--------------------------------------------------------------------------*/

    /**
     * The semantic version number.
     *
     * @static
     * @memberOf _
     * @type string
     */
    lodash.VERSION = '2.4.1';

    // add "Chaining" functions to the wrapper
    lodash.prototype.chain = wrapperChain;
    lodash.prototype.toString = wrapperToString;
    lodash.prototype.value = wrapperValueOf;
    lodash.prototype.valueOf = wrapperValueOf;

    // add `Array` functions that return unwrapped values
    forEach(['join', 'pop', 'shift'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        var chainAll = this.__chain__,
            result = func.apply(this.__wrapped__, arguments);

        return chainAll
          ? new lodashWrapper(result, chainAll)
          : result;
      };
    });

    // add `Array` functions that return the existing wrapped value
    forEach(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        func.apply(this.__wrapped__, arguments);
        return this;
      };
    });

    // add `Array` functions that return new wrapped values
    forEach(['concat', 'slice', 'splice'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        return new lodashWrapper(func.apply(this.__wrapped__, arguments), this.__chain__);
      };
    });

    return lodash;
  }

  /*--------------------------------------------------------------------------*/

  // expose Lo-Dash
  var _ = runInContext();

  // some AMD build optimizers like r.js check for condition patterns like the following:
  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
    // Expose Lo-Dash to the global object even when an AMD loader is present in
    // case Lo-Dash is loaded with a RequireJS shim config.
    // See http://requirejs.org/docs/api.html#config-shim
    root._ = _;

    // define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module
    define(function() {
      return _;
    });
  }
  // check for `exports` after `define` in case a build optimizer adds an `exports` object
  else if (freeExports && freeModule) {
    // in Node.js or RingoJS
    if (moduleExports) {
      (freeModule.exports = _)._ = _;
    }
    // in Narwhal or Rhino -require
    else {
      freeExports._ = _;
    }
  }
  else {
    // in a browser or Rhino
    root._ = _;
  }
}.call(this));

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"/home/codio/workspace/node_modules/progressbar.js/node_modules/shifty/dist/shifty.js":[function(require,module,exports){
/*! shifty - v1.2.2 - 2014-10-09 - http://jeremyckahn.github.io/shifty */
;(function (root) {

/*!
 * Shifty Core
 * By Jeremy Kahn - jeremyckahn@gmail.com
 */

// UglifyJS define hack.  Used for unit testing.  Contents of this if are
// compiled away.
if (typeof SHIFTY_DEBUG_NOW === 'undefined') {
  SHIFTY_DEBUG_NOW = function () {
    return +new Date();
  };
}

var Tweenable = (function () {

  'use strict';

  // Aliases that get defined later in this function
  var formula;

  // CONSTANTS
  var DEFAULT_SCHEDULE_FUNCTION;
  var DEFAULT_EASING = 'linear';
  var DEFAULT_DURATION = 500;
  var UPDATE_TIME = 1000 / 60;

  var _now = Date.now
       ? Date.now
       : function () {return +new Date();};

  var now = SHIFTY_DEBUG_NOW
       ? SHIFTY_DEBUG_NOW
       : _now;

  if (typeof window !== 'undefined') {
    // requestAnimationFrame() shim by Paul Irish (modified for Shifty)
    // http://paulirish.com/2011/requestanimationframe-for-smart-animating/
    DEFAULT_SCHEDULE_FUNCTION = window.requestAnimationFrame
       || window.webkitRequestAnimationFrame
       || window.oRequestAnimationFrame
       || window.msRequestAnimationFrame
       || (window.mozCancelRequestAnimationFrame
       && window.mozRequestAnimationFrame)
       || setTimeout;
  } else {
    DEFAULT_SCHEDULE_FUNCTION = setTimeout;
  }

  function noop () {
    // NOOP!
  }

  /*!
   * Handy shortcut for doing a for-in loop. This is not a "normal" each
   * function, it is optimized for Shifty.  The iterator function only receives
   * the property name, not the value.
   * @param {Object} obj
   * @param {Function(string)} fn
   */
  function each (obj, fn) {
    var key;
    for (key in obj) {
      if (Object.hasOwnProperty.call(obj, key)) {
        fn(key);
      }
    }
  }

  /*!
   * Perform a shallow copy of Object properties.
   * @param {Object} targetObject The object to copy into
   * @param {Object} srcObject The object to copy from
   * @return {Object} A reference to the augmented `targetObj` Object
   */
  function shallowCopy (targetObj, srcObj) {
    each(srcObj, function (prop) {
      targetObj[prop] = srcObj[prop];
    });

    return targetObj;
  }

  /*!
   * Copies each property from src onto target, but only if the property to
   * copy to target is undefined.
   * @param {Object} target Missing properties in this Object are filled in
   * @param {Object} src
   */
  function defaults (target, src) {
    each(src, function (prop) {
      if (typeof target[prop] === 'undefined') {
        target[prop] = src[prop];
      }
    });
  }

  /*!
   * Calculates the interpolated tween values of an Object for a given
   * timestamp.
   * @param {Number} forPosition The position to compute the state for.
   * @param {Object} currentState Current state properties.
   * @param {Object} originalState: The original state properties the Object is
   * tweening from.
   * @param {Object} targetState: The destination state properties the Object
   * is tweening to.
   * @param {number} duration: The length of the tween in milliseconds.
   * @param {number} timestamp: The UNIX epoch time at which the tween began.
   * @param {Object} easing: This Object's keys must correspond to the keys in
   * targetState.
   */
  function tweenProps (forPosition, currentState, originalState, targetState,
    duration, timestamp, easing) {
    var normalizedPosition = (forPosition - timestamp) / duration;

    var prop;
    for (prop in currentState) {
      if (currentState.hasOwnProperty(prop)) {
        currentState[prop] = tweenProp(originalState[prop],
          targetState[prop], formula[easing[prop]], normalizedPosition);
      }
    }

    return currentState;
  }

  /*!
   * Tweens a single property.
   * @param {number} start The value that the tween started from.
   * @param {number} end The value that the tween should end at.
   * @param {Function} easingFunc The easing curve to apply to the tween.
   * @param {number} position The normalized position (between 0.0 and 1.0) to
   * calculate the midpoint of 'start' and 'end' against.
   * @return {number} The tweened value.
   */
  function tweenProp (start, end, easingFunc, position) {
    return start + (end - start) * easingFunc(position);
  }

  /*!
   * Applies a filter to Tweenable instance.
   * @param {Tweenable} tweenable The `Tweenable` instance to call the filter
   * upon.
   * @param {String} filterName The name of the filter to apply.
   */
  function applyFilter (tweenable, filterName) {
    var filters = Tweenable.prototype.filter;
    var args = tweenable._filterArgs;

    each(filters, function (name) {
      if (typeof filters[name][filterName] !== 'undefined') {
        filters[name][filterName].apply(tweenable, args);
      }
    });
  }

  var timeoutHandler_endTime;
  var timeoutHandler_currentTime;
  var timeoutHandler_isEnded;
  /*!
   * Handles the update logic for one step of a tween.
   * @param {Tweenable} tweenable
   * @param {number} timestamp
   * @param {number} duration
   * @param {Object} currentState
   * @param {Object} originalState
   * @param {Object} targetState
   * @param {Object} easing
   * @param {Function} step
   * @param {Function(Function,number)}} schedule
   */
  function timeoutHandler (tweenable, timestamp, duration, currentState,
    originalState, targetState, easing, step, schedule) {
    timeoutHandler_endTime = timestamp + duration;
    timeoutHandler_currentTime = Math.min(now(), timeoutHandler_endTime);
    timeoutHandler_isEnded = timeoutHandler_currentTime >= timeoutHandler_endTime;

    if (tweenable.isPlaying() && !timeoutHandler_isEnded) {
      schedule(tweenable._timeoutHandler, UPDATE_TIME);

      applyFilter(tweenable, 'beforeTween');
      tweenProps(timeoutHandler_currentTime, currentState, originalState,
        targetState, duration, timestamp, easing);
      applyFilter(tweenable, 'afterTween');

      step(currentState);
    } else if (timeoutHandler_isEnded) {
      step(targetState);
      tweenable.stop(true);
    }
  }


  /*!
   * Creates a usable easing Object from either a string or another easing
   * Object.  If `easing` is an Object, then this function clones it and fills
   * in the missing properties with "linear".
   * @param {Object} fromTweenParams
   * @param {Object|string} easing
   */
  function composeEasingObject (fromTweenParams, easing) {
    var composedEasing = {};

    if (typeof easing === 'string') {
      each(fromTweenParams, function (prop) {
        composedEasing[prop] = easing;
      });
    } else {
      each(fromTweenParams, function (prop) {
        if (!composedEasing[prop]) {
          composedEasing[prop] = easing[prop] || DEFAULT_EASING;
        }
      });
    }

    return composedEasing;
  }

  /**
   * Tweenable constructor.
   * @param {Object=} opt_initialState The values that the initial tween should start at if a "from" object is not provided to Tweenable#tween.
   * @param {Object=} opt_config See Tweenable.prototype.setConfig()
   * @constructor
   */
  function Tweenable (opt_initialState, opt_config) {
    this._currentState = opt_initialState || {};
    this._configured = false;
    this._scheduleFunction = DEFAULT_SCHEDULE_FUNCTION;

    // To prevent unnecessary calls to setConfig do not set default configuration here.
    // Only set default configuration immediately before tweening if none has been set.
    if (typeof opt_config !== 'undefined') {
      this.setConfig(opt_config);
    }
  }

  /**
   * Configure and start a tween.
   * @param {Object=} opt_config See Tweenable.prototype.setConfig()
   * @return {Tweenable}
   */
  Tweenable.prototype.tween = function (opt_config) {
    if (this._isTweening) {
      return this;
    }

    // Only set default config if no configuration has been set previously and none is provided now.
    if (opt_config !== undefined || !this._configured) {
      this.setConfig(opt_config);
    }

    this._start(this.get());
    return this.resume();
  };

  /**
   * Sets the tween configuration. `config` may have the following options:
   *
   * - __from__ (_Object=_): Starting position.  If omitted, the current state is used.
   * - __to__ (_Object=_): Ending position.
   * - __duration__ (_number=_): How many milliseconds to animate for.
   * - __start__ (_Function(Object)=_): Function to execute when the tween begins.  Receives the state of the tween as the only parameter.
   * - __step__ (_Function(Object)=_): Function to execute on every tick.  Receives the state of the tween as the only parameter.  This function is not called on the final step of the animation, but `finish` is.
   * - __finish__ (_Function(Object)=_): Function to execute upon tween completion.  Receives the state of the tween as the only parameter.
   * - __easing__ (_Object|string=_): Easing curve name(s) to use for the tween.
   * @param {Object} config
   * @return {Tweenable}
   */
  Tweenable.prototype.setConfig = function (config) {
    config = config || {};
    this._configured = true;

    // Init the internal state
    this._pausedAtTime = null;
    this._start = config.start || noop;
    this._step = config.step || noop;
    this._finish = config.finish || noop;
    this._duration = config.duration || DEFAULT_DURATION;
    this._currentState = config.from || this.get();
    this._originalState = this.get();
    this._targetState = config.to || this.get();
    this._timestamp = now();

    // Aliases used below
    var currentState = this._currentState;
    var targetState = this._targetState;

    // Ensure that there is always something to tween to.
    defaults(targetState, currentState);

    this._easing = composeEasingObject(
      currentState, config.easing || DEFAULT_EASING);

    this._filterArgs =
      [currentState, this._originalState, targetState, this._easing];

    applyFilter(this, 'tweenCreated');
    return this;
  };

  /**
   * Gets the current state.
   * @return {Object}
   */
  Tweenable.prototype.get = function () {
    return shallowCopy({}, this._currentState);
  };

  /**
   * Sets the current state.
   * @param {Object} state
   */
  Tweenable.prototype.set = function (state) {
    this._currentState = state;
  };

  /**
   * Pauses a tween.  Paused tweens can be resumed from the point at which they were paused.  This is different than [`stop()`](#stop), as that method causes a tween to start over when it is resumed.
   * @return {Tweenable}
   */
  Tweenable.prototype.pause = function () {
    this._pausedAtTime = now();
    this._isPaused = true;
    return this;
  };

  /**
   * Resumes a paused tween.
   * @return {Tweenable}
   */
  Tweenable.prototype.resume = function () {
    if (this._isPaused) {
      this._timestamp += now() - this._pausedAtTime;
    }

    this._isPaused = false;
    this._isTweening = true;

    var self = this;
    this._timeoutHandler = function () {
      timeoutHandler(self, self._timestamp, self._duration, self._currentState,
        self._originalState, self._targetState, self._easing, self._step,
        self._scheduleFunction);
    };

    this._timeoutHandler();

    return this;
  };

  /**
   * Stops and cancels a tween.
   * @param {boolean=} gotoEnd If false or omitted, the tween just stops at its current state, and the "finish" handler is not invoked.  If true, the tweened object's values are instantly set to the target values, and "finish" is invoked.
   * @return {Tweenable}
   */
  Tweenable.prototype.stop = function (gotoEnd) {
    this._isTweening = false;
    this._isPaused = false;
    this._timeoutHandler = noop;

    if (gotoEnd) {
      shallowCopy(this._currentState, this._targetState);
      applyFilter(this, 'afterTweenEnd');
      this._finish.call(this, this._currentState);
    }

    return this;
  };

  /**
   * Returns whether or not a tween is running.
   * @return {boolean}
   */
  Tweenable.prototype.isPlaying = function () {
    return this._isTweening && !this._isPaused;
  };

  /**
   * Sets a custom schedule function.
   *
   * If a custom function is not set the default one is used [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame) if available, otherwise [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)).
   *
   * @param {Function(Function,number)} scheduleFunction The function to be called to schedule the next frame to be rendered
   */
  Tweenable.prototype.setScheduleFunction = function (scheduleFunction) {
    this._scheduleFunction = scheduleFunction;
  };

  /**
   * `delete`s all "own" properties.  Call this when the `Tweenable` instance is no longer needed to free memory.
   */
  Tweenable.prototype.dispose = function () {
    var prop;
    for (prop in this) {
      if (this.hasOwnProperty(prop)) {
        delete this[prop];
      }
    }
  };

  /*!
   * Filters are used for transforming the properties of a tween at various
   * points in a Tweenable's life cycle.  See the README for more info on this.
   */
  Tweenable.prototype.filter = {};

  /*!
   * This object contains all of the tweens available to Shifty.  It is extendible - simply attach properties to the Tweenable.prototype.formula Object following the same format at linear.
   *
   * `pos` should be a normalized `number` (between 0 and 1).
   */
  Tweenable.prototype.formula = {
    linear: function (pos) {
      return pos;
    }
  };

  formula = Tweenable.prototype.formula;

  shallowCopy(Tweenable, {
    'now': now
    ,'each': each
    ,'tweenProps': tweenProps
    ,'tweenProp': tweenProp
    ,'applyFilter': applyFilter
    ,'shallowCopy': shallowCopy
    ,'defaults': defaults
    ,'composeEasingObject': composeEasingObject
  });

  // `root` is provided in the intro/outro files.

  // A hook used for unit testing.
  if (typeof SHIFTY_DEBUG_NOW === 'function') {
    root.timeoutHandler = timeoutHandler;
  }

  // Bootstrap Tweenable appropriately for the environment.
  if (typeof exports === 'object') {
    // CommonJS
    module.exports = Tweenable;
  } else if (typeof define === 'function' && define.amd) {
    // AMD
    define(function () {return Tweenable;});
  } else if (typeof root.Tweenable === 'undefined') {
    // Browser: Make `Tweenable` globally accessible.
    root.Tweenable = Tweenable;
  }

  return Tweenable;

} ());

/*!
 * All equations are adapted from Thomas Fuchs' [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).
 *
 * Based on Easing Equations (c) 2003 [Robert Penner](http://www.robertpenner.com/), all rights reserved. This work is [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).
 */

/*!
 *  TERMS OF USE - EASING EQUATIONS
 *  Open source under the BSD License.
 *  Easing Equations (c) 2003 Robert Penner, all rights reserved.
 */

;(function () {

  Tweenable.shallowCopy(Tweenable.prototype.formula, {
    easeInQuad: function (pos) {
      return Math.pow(pos, 2);
    },

    easeOutQuad: function (pos) {
      return -(Math.pow((pos - 1), 2) - 1);
    },

    easeInOutQuad: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,2);}
      return -0.5 * ((pos -= 2) * pos - 2);
    },

    easeInCubic: function (pos) {
      return Math.pow(pos, 3);
    },

    easeOutCubic: function (pos) {
      return (Math.pow((pos - 1), 3) + 1);
    },

    easeInOutCubic: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,3);}
      return 0.5 * (Math.pow((pos - 2),3) + 2);
    },

    easeInQuart: function (pos) {
      return Math.pow(pos, 4);
    },

    easeOutQuart: function (pos) {
      return -(Math.pow((pos - 1), 4) - 1);
    },

    easeInOutQuart: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,4);}
      return -0.5 * ((pos -= 2) * Math.pow(pos,3) - 2);
    },

    easeInQuint: function (pos) {
      return Math.pow(pos, 5);
    },

    easeOutQuint: function (pos) {
      return (Math.pow((pos - 1), 5) + 1);
    },

    easeInOutQuint: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,5);}
      return 0.5 * (Math.pow((pos - 2),5) + 2);
    },

    easeInSine: function (pos) {
      return -Math.cos(pos * (Math.PI / 2)) + 1;
    },

    easeOutSine: function (pos) {
      return Math.sin(pos * (Math.PI / 2));
    },

    easeInOutSine: function (pos) {
      return (-0.5 * (Math.cos(Math.PI * pos) - 1));
    },

    easeInExpo: function (pos) {
      return (pos === 0) ? 0 : Math.pow(2, 10 * (pos - 1));
    },

    easeOutExpo: function (pos) {
      return (pos === 1) ? 1 : -Math.pow(2, -10 * pos) + 1;
    },

    easeInOutExpo: function (pos) {
      if (pos === 0) {return 0;}
      if (pos === 1) {return 1;}
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(2,10 * (pos - 1));}
      return 0.5 * (-Math.pow(2, -10 * --pos) + 2);
    },

    easeInCirc: function (pos) {
      return -(Math.sqrt(1 - (pos * pos)) - 1);
    },

    easeOutCirc: function (pos) {
      return Math.sqrt(1 - Math.pow((pos - 1), 2));
    },

    easeInOutCirc: function (pos) {
      if ((pos /= 0.5) < 1) {return -0.5 * (Math.sqrt(1 - pos * pos) - 1);}
      return 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1);
    },

    easeOutBounce: function (pos) {
      if ((pos) < (1 / 2.75)) {
        return (7.5625 * pos * pos);
      } else if (pos < (2 / 2.75)) {
        return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);
      } else if (pos < (2.5 / 2.75)) {
        return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);
      } else {
        return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);
      }
    },

    easeInBack: function (pos) {
      var s = 1.70158;
      return (pos) * pos * ((s + 1) * pos - s);
    },

    easeOutBack: function (pos) {
      var s = 1.70158;
      return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1;
    },

    easeInOutBack: function (pos) {
      var s = 1.70158;
      if ((pos /= 0.5) < 1) {return 0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s));}
      return 0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);
    },

    elastic: function (pos) {
      return -1 * Math.pow(4,-8 * pos) * Math.sin((pos * 6 - 1) * (2 * Math.PI) / 2) + 1;
    },

    swingFromTo: function (pos) {
      var s = 1.70158;
      return ((pos /= 0.5) < 1) ? 0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s)) :
          0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);
    },

    swingFrom: function (pos) {
      var s = 1.70158;
      return pos * pos * ((s + 1) * pos - s);
    },

    swingTo: function (pos) {
      var s = 1.70158;
      return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;
    },

    bounce: function (pos) {
      if (pos < (1 / 2.75)) {
        return (7.5625 * pos * pos);
      } else if (pos < (2 / 2.75)) {
        return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);
      } else if (pos < (2.5 / 2.75)) {
        return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);
      } else {
        return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);
      }
    },

    bouncePast: function (pos) {
      if (pos < (1 / 2.75)) {
        return (7.5625 * pos * pos);
      } else if (pos < (2 / 2.75)) {
        return 2 - (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);
      } else if (pos < (2.5 / 2.75)) {
        return 2 - (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);
      } else {
        return 2 - (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);
      }
    },

    easeFromTo: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,4);}
      return -0.5 * ((pos -= 2) * Math.pow(pos,3) - 2);
    },

    easeFrom: function (pos) {
      return Math.pow(pos,4);
    },

    easeTo: function (pos) {
      return Math.pow(pos,0.25);
    }
  });

}());

/*!
 * The Bezier magic in this file is adapted/copied almost wholesale from
 * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/cubic-bezier.js),
 * which was adapted from Apple code (which probably came from
 * [here](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h)).
 * Special thanks to Apple and Thomas Fuchs for much of this code.
 */

/*!
 *  Copyright (c) 2006 Apple Computer, Inc. All rights reserved.
 *
 *  Redistribution and use in source and binary forms, with or without
 *  modification, are permitted provided that the following conditions are met:
 *
 *  1. Redistributions of source code must retain the above copyright notice,
 *  this list of conditions and the following disclaimer.
 *
 *  2. Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation
 *  and/or other materials provided with the distribution.
 *
 *  3. Neither the name of the copyright holder(s) nor the names of any
 *  contributors may be used to endorse or promote products derived from
 *  this software without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 *  "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 *  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
 *  FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 *  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 *  ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 *  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
;(function () {
  // port of webkit cubic bezier handling by http://www.netzgesta.de/dev/
  function cubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration) {
    var ax = 0,bx = 0,cx = 0,ay = 0,by = 0,cy = 0;
    function sampleCurveX(t) {return ((ax * t + bx) * t + cx) * t;}
    function sampleCurveY(t) {return ((ay * t + by) * t + cy) * t;}
    function sampleCurveDerivativeX(t) {return (3.0 * ax * t + 2.0 * bx) * t + cx;}
    function solveEpsilon(duration) {return 1.0 / (200.0 * duration);}
    function solve(x,epsilon) {return sampleCurveY(solveCurveX(x,epsilon));}
    function fabs(n) {if (n >= 0) {return n;}else {return 0 - n;}}
    function solveCurveX(x,epsilon) {
      var t0,t1,t2,x2,d2,i;
      for (t2 = x, i = 0; i < 8; i++) {x2 = sampleCurveX(t2) - x; if (fabs(x2) < epsilon) {return t2;} d2 = sampleCurveDerivativeX(t2); if (fabs(d2) < 1e-6) {break;} t2 = t2 - x2 / d2;}
      t0 = 0.0; t1 = 1.0; t2 = x; if (t2 < t0) {return t0;} if (t2 > t1) {return t1;}
      while (t0 < t1) {x2 = sampleCurveX(t2); if (fabs(x2 - x) < epsilon) {return t2;} if (x > x2) {t0 = t2;}else {t1 = t2;} t2 = (t1 - t0) * 0.5 + t0;}
      return t2; // Failure.
    }
    cx = 3.0 * p1x; bx = 3.0 * (p2x - p1x) - cx; ax = 1.0 - cx - bx; cy = 3.0 * p1y; by = 3.0 * (p2y - p1y) - cy; ay = 1.0 - cy - by;
    return solve(t, solveEpsilon(duration));
  }
  /*!
   *  getCubicBezierTransition(x1, y1, x2, y2) -> Function
   *
   *  Generates a transition easing function that is compatible
   *  with WebKit's CSS transitions `-webkit-transition-timing-function`
   *  CSS property.
   *
   *  The W3C has more information about
   *  <a href="http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag">
   *  CSS3 transition timing functions</a>.
   *
   *  @param {number} x1
   *  @param {number} y1
   *  @param {number} x2
   *  @param {number} y2
   *  @return {function}
   */
  function getCubicBezierTransition (x1, y1, x2, y2) {
    return function (pos) {
      return cubicBezierAtTime(pos,x1,y1,x2,y2,1);
    };
  }
  // End ported code

  /**
   * Creates a Bezier easing function and attaches it to `Tweenable.prototype.formula`.  This function gives you total control over the easing curve.  Matthew Lein's [Ceaser](http://matthewlein.com/ceaser/) is a useful tool for visualizing the curves you can make with this function.
   *
   * @param {string} name The name of the easing curve.  Overwrites the old easing function on Tweenable.prototype.formula if it exists.
   * @param {number} x1
   * @param {number} y1
   * @param {number} x2
   * @param {number} y2
   * @return {function} The easing function that was attached to Tweenable.prototype.formula.
   */
  Tweenable.setBezierFunction = function (name, x1, y1, x2, y2) {
    var cubicBezierTransition = getCubicBezierTransition(x1, y1, x2, y2);
    cubicBezierTransition.x1 = x1;
    cubicBezierTransition.y1 = y1;
    cubicBezierTransition.x2 = x2;
    cubicBezierTransition.y2 = y2;

    return Tweenable.prototype.formula[name] = cubicBezierTransition;
  };


  /**
   * `delete`s an easing function from `Tweenable.prototype.formula`.  Be careful with this method, as it `delete`s whatever easing formula matches `name` (which means you can delete default Shifty easing functions).
   *
   * @param {string} name The name of the easing function to delete.
   * @return {function}
   */
  Tweenable.unsetBezierFunction = function (name) {
    delete Tweenable.prototype.formula[name];
  };

})();

;(function () {

  function getInterpolatedValues (
    from, current, targetState, position, easing) {
    return Tweenable.tweenProps(
      position, current, from, targetState, 1, 0, easing);
  }

  // Fake a Tweenable and patch some internals.  This approach allows us to
  // skip uneccessary processing and object recreation, cutting down on garbage
  // collection pauses.
  var mockTweenable = new Tweenable();
  mockTweenable._filterArgs = [];

  /**
   * Compute the midpoint of two Objects.  This method effectively calculates a specific frame of animation that [Tweenable#tween](shifty.core.js.html#tween) does many times over the course of a tween.
   *
   * Example:
   *
   * ```
   *  var interpolatedValues = Tweenable.interpolate({
   *    width: '100px',
   *    opacity: 0,
   *    color: '#fff'
   *  }, {
   *    width: '200px',
   *    opacity: 1,
   *    color: '#000'
   *  }, 0.5);
   *
   *  console.log(interpolatedValues);
   *  // {opacity: 0.5, width: "150px", color: "rgb(127,127,127)"}
   * ```
   *
   * @param {Object} from The starting values to tween from.
   * @param {Object} targetState The ending values to tween to.
   * @param {number} position The normalized position value (between 0.0 and 1.0) to interpolate the values between `from` and `to` for.  `from` represents 0 and `to` represents `1`.
   * @param {string|Object} easing The easing curve(s) to calculate the midpoint against.  You can reference any easing function attached to `Tweenable.prototype.formula`.  If omitted, this defaults to "linear".
   * @return {Object}
   */
  Tweenable.interpolate = function (from, targetState, position, easing) {
    var current = Tweenable.shallowCopy({}, from);
    var easingObject = Tweenable.composeEasingObject(
      from, easing || 'linear');

    mockTweenable.set({});

    // Alias and reuse the _filterArgs array instead of recreating it.
    var filterArgs = mockTweenable._filterArgs;
    filterArgs.length = 0;
    filterArgs[0] = current;
    filterArgs[1] = from;
    filterArgs[2] = targetState;
    filterArgs[3] = easingObject;

    // Any defined value transformation must be applied
    Tweenable.applyFilter(mockTweenable, 'tweenCreated');
    Tweenable.applyFilter(mockTweenable, 'beforeTween');

    var interpolatedValues = getInterpolatedValues(
      from, current, targetState, position, easingObject);

    // Transform values back into their original format
    Tweenable.applyFilter(mockTweenable, 'afterTween');

    return interpolatedValues;
  };

}());

/**
 * Adds string interpolation support to Shifty.
 *
 * The Token extension allows Shifty to tween numbers inside of strings.  Among other things, this allows you to animate CSS properties.  For example, you can do this:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { transform: 'translateX(45px)'},
 *   to: { transform: 'translateX(90xp)'}
 * });
 * ```
 *
 * `translateX(45)` will be tweened to `translateX(90)`.  To demonstrate:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { transform: 'translateX(45px)'},
 *   to: { transform: 'translateX(90px)'},
 *   step: function (state) {
 *     console.log(state.transform);
 *   }
 * });
 * ```
 *
 * The above snippet will log something like this in the console:
 *
 * ```
 * translateX(60.3px)
 * ...
 * translateX(76.05px)
 * ...
 * translateX(90px)
 * ```
 *
 * Another use for this is animating colors:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { color: 'rgb(0,255,0)'},
 *   to: { color: 'rgb(255,0,255)'},
 *   step: function (state) {
 *     console.log(state.color);
 *   }
 * });
 * ```
 *
 * The above snippet will log something like this:
 *
 * ```
 * rgb(84,170,84)
 * ...
 * rgb(170,84,170)
 * ...
 * rgb(255,0,255)
 * ```
 *
 * This extension also supports hexadecimal colors, in both long (`#ff00ff`) and short (`#f0f`) forms.  Be aware that hexadecimal input values will be converted into the equivalent RGB output values.  This is done to optimize for performance.
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { color: '#0f0'},
 *   to: { color: '#f0f'},
 *   step: function (state) {
 *     console.log(state.color);
 *   }
 * });
 * ```
 *
 * This snippet will generate the same output as the one before it because equivalent values were supplied (just in hexadecimal form rather than RGB):
 *
 * ```
 * rgb(84,170,84)
 * ...
 * rgb(170,84,170)
 * ...
 * rgb(255,0,255)
 * ```
 *
 * ## Easing support
 *
 * Easing works somewhat differently in the Token extension.  This is because some CSS properties have multiple values in them, and you might need to tween each value along its own easing curve.  A basic example:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { transform: 'translateX(0px) translateY(0px)'},
 *   to: { transform:   'translateX(100px) translateY(100px)'},
 *   easing: { transform: 'easeInQuad' },
 *   step: function (state) {
 *     console.log(state.transform);
 *   }
 * });
 * ```
 *
 * The above snippet create values like this:
 *
 * ```
 * translateX(11.560000000000002px) translateY(11.560000000000002px)
 * ...
 * translateX(46.24000000000001px) translateY(46.24000000000001px)
 * ...
 * translateX(100px) translateY(100px)
 * ```
 *
 * In this case, the values for `translateX` and `translateY` are always the same for each step of the tween, because they have the same start and end points and both use the same easing curve.  We can also tween `translateX` and `translateY` along independent curves:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { transform: 'translateX(0px) translateY(0px)'},
 *   to: { transform:   'translateX(100px) translateY(100px)'},
 *   easing: { transform: 'easeInQuad bounce' },
 *   step: function (state) {
 *     console.log(state.transform);
 *   }
 * });
 * ```
 *
 * The above snippet create values like this:
 *
 * ```
 * translateX(10.89px) translateY(82.355625px)
 * ...
 * translateX(44.89000000000001px) translateY(86.73062500000002px)
 * ...
 * translateX(100px) translateY(100px)
 * ```
 *
 * `translateX` and `translateY` are not in sync anymore, because `easeInQuad` was specified for `translateX` and `bounce` for `translateY`.  Mixing and matching easing curves can make for some interesting motion in your animations.
 *
 * The order of the space-separated easing curves correspond the token values they apply to.  If there are more token values than easing curves listed, the last easing curve listed is used.
 */
function token () {
  // Functionality for this extension runs implicitly if it is loaded.
} /*!*/

// token function is defined above only so that dox-foundation sees it as
// documentation and renders it.  It is never used, and is optimized away at
// build time.

;(function (Tweenable) {

  /*!
   * @typedef {{
   *   formatString: string
   *   chunkNames: Array.<string>
   * }}
   */
  var formatManifest;

  // CONSTANTS

  var R_NUMBER_COMPONENT = /(\d|\-|\.)/;
  var R_FORMAT_CHUNKS = /([^\-0-9\.]+)/g;
  var R_UNFORMATTED_VALUES = /[0-9.\-]+/g;
  var R_RGB = new RegExp(
    'rgb\\(' + R_UNFORMATTED_VALUES.source +
    (/,\s*/.source) + R_UNFORMATTED_VALUES.source +
    (/,\s*/.source) + R_UNFORMATTED_VALUES.source + '\\)', 'g');
  var R_RGB_PREFIX = /^.*\(/;
  var R_HEX = /#([0-9]|[a-f]){3,6}/gi;
  var VALUE_PLACEHOLDER = 'VAL';

  // HELPERS

  var getFormatChunksFrom_accumulator = [];
  /*!
   * @param {Array.number} rawValues
   * @param {string} prefix
   *
   * @return {Array.<string>}
   */
  function getFormatChunksFrom (rawValues, prefix) {
    getFormatChunksFrom_accumulator.length = 0;

    var rawValuesLength = rawValues.length;
    var i;

    for (i = 0; i < rawValuesLength; i++) {
      getFormatChunksFrom_accumulator.push('_' + prefix + '_' + i);
    }

    return getFormatChunksFrom_accumulator;
  }

  /*!
   * @param {string} formattedString
   *
   * @return {string}
   */
  function getFormatStringFrom (formattedString) {
    var chunks = formattedString.match(R_FORMAT_CHUNKS);

    if (!chunks) {
      // chunks will be null if there were no tokens to parse in
      // formattedString (for example, if formattedString is '2').  Coerce
      // chunks to be useful here.
      chunks = ['', ''];

      // If there is only one chunk, assume that the string is a number
      // followed by a token...
      // NOTE: This may be an unwise assumption.
    } else if (chunks.length === 1 ||
        // ...or if the string starts with a number component (".", "-", or a
        // digit)...
        formattedString[0].match(R_NUMBER_COMPONENT)) {
      // ...prepend an empty string here to make sure that the formatted number
      // is properly replaced by VALUE_PLACEHOLDER
      chunks.unshift('');
    }

    return chunks.join(VALUE_PLACEHOLDER);
  }

  /*!
   * Convert all hex color values within a string to an rgb string.
   *
   * @param {Object} stateObject
   *
   * @return {Object} The modified obj
   */
  function sanitizeObjectForHexProps (stateObject) {
    Tweenable.each(stateObject, function (prop) {
      var currentProp = stateObject[prop];

      if (typeof currentProp === 'string' && currentProp.match(R_HEX)) {
        stateObject[prop] = sanitizeHexChunksToRGB(currentProp);
      }
    });
  }

  /*!
   * @param {string} str
   *
   * @return {string}
   */
  function  sanitizeHexChunksToRGB (str) {
    return filterStringChunks(R_HEX, str, convertHexToRGB);
  }

  /*!
   * @param {string} hexString
   *
   * @return {string}
   */
  function convertHexToRGB (hexString) {
    var rgbArr = hexToRGBArray(hexString);
    return 'rgb(' + rgbArr[0] + ',' + rgbArr[1] + ',' + rgbArr[2] + ')';
  }

  var hexToRGBArray_returnArray = [];
  /*!
   * Convert a hexadecimal string to an array with three items, one each for
   * the red, blue, and green decimal values.
   *
   * @param {string} hex A hexadecimal string.
   *
   * @returns {Array.<number>} The converted Array of RGB values if `hex` is a
   * valid string, or an Array of three 0's.
   */
  function hexToRGBArray (hex) {

    hex = hex.replace(/#/, '');

    // If the string is a shorthand three digit hex notation, normalize it to
    // the standard six digit notation
    if (hex.length === 3) {
      hex = hex.split('');
      hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
    }

    hexToRGBArray_returnArray[0] = hexToDec(hex.substr(0, 2));
    hexToRGBArray_returnArray[1] = hexToDec(hex.substr(2, 2));
    hexToRGBArray_returnArray[2] = hexToDec(hex.substr(4, 2));

    return hexToRGBArray_returnArray;
  }

  /*!
   * Convert a base-16 number to base-10.
   *
   * @param {Number|String} hex The value to convert
   *
   * @returns {Number} The base-10 equivalent of `hex`.
   */
  function hexToDec (hex) {
    return parseInt(hex, 16);
  }

  /*!
   * Runs a filter operation on all chunks of a string that match a RegExp
   *
   * @param {RegExp} pattern
   * @param {string} unfilteredString
   * @param {function(string)} filter
   *
   * @return {string}
   */
  function filterStringChunks (pattern, unfilteredString, filter) {
    var pattenMatches = unfilteredString.match(pattern);
    var filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER);

    if (pattenMatches) {
      var pattenMatchesLength = pattenMatches.length;
      var currentChunk;

      for (var i = 0; i < pattenMatchesLength; i++) {
        currentChunk = pattenMatches.shift();
        filteredString = filteredString.replace(
          VALUE_PLACEHOLDER, filter(currentChunk));
      }
    }

    return filteredString;
  }

  /*!
   * Check for floating point values within rgb strings and rounds them.
   *
   * @param {string} formattedString
   *
   * @return {string}
   */
  function sanitizeRGBChunks (formattedString) {
    return filterStringChunks(R_RGB, formattedString, sanitizeRGBChunk);
  }

  /*!
   * @param {string} rgbChunk
   *
   * @return {string}
   */
  function sanitizeRGBChunk (rgbChunk) {
    var numbers = rgbChunk.match(R_UNFORMATTED_VALUES);
    var numbersLength = numbers.length;
    var sanitizedString = rgbChunk.match(R_RGB_PREFIX)[0];

    for (var i = 0; i < numbersLength; i++) {
      sanitizedString += parseInt(numbers[i], 10) + ',';
    }

    sanitizedString = sanitizedString.slice(0, -1) + ')';

    return sanitizedString;
  }

  /*!
   * @param {Object} stateObject
   *
   * @return {Object} An Object of formatManifests that correspond to
   * the string properties of stateObject
   */
  function getFormatManifests (stateObject) {
    var manifestAccumulator = {};

    Tweenable.each(stateObject, function (prop) {
      var currentProp = stateObject[prop];

      if (typeof currentProp === 'string') {
        var rawValues = getValuesFrom(currentProp);

        manifestAccumulator[prop] = {
          'formatString': getFormatStringFrom(currentProp)
          ,'chunkNames': getFormatChunksFrom(rawValues, prop)
        };
      }
    });

    return manifestAccumulator;
  }

  /*!
   * @param {Object} stateObject
   * @param {Object} formatManifests
   */
  function expandFormattedProperties (stateObject, formatManifests) {
    Tweenable.each(formatManifests, function (prop) {
      var currentProp = stateObject[prop];
      var rawValues = getValuesFrom(currentProp);
      var rawValuesLength = rawValues.length;

      for (var i = 0; i < rawValuesLength; i++) {
        stateObject[formatManifests[prop].chunkNames[i]] = +rawValues[i];
      }

      delete stateObject[prop];
    });
  }

  /*!
   * @param {Object} stateObject
   * @param {Object} formatManifests
   */
  function collapseFormattedProperties (stateObject, formatManifests) {
    Tweenable.each(formatManifests, function (prop) {
      var currentProp = stateObject[prop];
      var formatChunks = extractPropertyChunks(
        stateObject, formatManifests[prop].chunkNames);
      var valuesList = getValuesList(
        formatChunks, formatManifests[prop].chunkNames);
      currentProp = getFormattedValues(
        formatManifests[prop].formatString, valuesList);
      stateObject[prop] = sanitizeRGBChunks(currentProp);
    });
  }

  /*!
   * @param {Object} stateObject
   * @param {Array.<string>} chunkNames
   *
   * @return {Object} The extracted value chunks.
   */
  function extractPropertyChunks (stateObject, chunkNames) {
    var extractedValues = {};
    var currentChunkName, chunkNamesLength = chunkNames.length;

    for (var i = 0; i < chunkNamesLength; i++) {
      currentChunkName = chunkNames[i];
      extractedValues[currentChunkName] = stateObject[currentChunkName];
      delete stateObject[currentChunkName];
    }

    return extractedValues;
  }

  var getValuesList_accumulator = [];
  /*!
   * @param {Object} stateObject
   * @param {Array.<string>} chunkNames
   *
   * @return {Array.<number>}
   */
  function getValuesList (stateObject, chunkNames) {
    getValuesList_accumulator.length = 0;
    var chunkNamesLength = chunkNames.length;

    for (var i = 0; i < chunkNamesLength; i++) {
      getValuesList_accumulator.push(stateObject[chunkNames[i]]);
    }

    return getValuesList_accumulator;
  }

  /*!
   * @param {string} formatString
   * @param {Array.<number>} rawValues
   *
   * @return {string}
   */
  function getFormattedValues (formatString, rawValues) {
    var formattedValueString = formatString;
    var rawValuesLength = rawValues.length;

    for (var i = 0; i < rawValuesLength; i++) {
      formattedValueString = formattedValueString.replace(
        VALUE_PLACEHOLDER, +rawValues[i].toFixed(4));
    }

    return formattedValueString;
  }

  /*!
   * Note: It's the duty of the caller to convert the Array elements of the
   * return value into numbers.  This is a performance optimization.
   *
   * @param {string} formattedString
   *
   * @return {Array.<string>|null}
   */
  function getValuesFrom (formattedString) {
    return formattedString.match(R_UNFORMATTED_VALUES);
  }

  /*!
   * @param {Object} easingObject
   * @param {Object} tokenData
   */
  function expandEasingObject (easingObject, tokenData) {
    Tweenable.each(tokenData, function (prop) {
      var currentProp = tokenData[prop];
      var chunkNames = currentProp.chunkNames;
      var chunkLength = chunkNames.length;
      var easingChunks = easingObject[prop].split(' ');
      var lastEasingChunk = easingChunks[easingChunks.length - 1];

      for (var i = 0; i < chunkLength; i++) {
        easingObject[chunkNames[i]] = easingChunks[i] || lastEasingChunk;
      }

      delete easingObject[prop];
    });
  }

  /*!
   * @param {Object} easingObject
   * @param {Object} tokenData
   */
  function collapseEasingObject (easingObject, tokenData) {
    Tweenable.each(tokenData, function (prop) {
      var currentProp = tokenData[prop];
      var chunkNames = currentProp.chunkNames;
      var chunkLength = chunkNames.length;
      var composedEasingString = '';

      for (var i = 0; i < chunkLength; i++) {
        composedEasingString += ' ' + easingObject[chunkNames[i]];
        delete easingObject[chunkNames[i]];
      }

      easingObject[prop] = composedEasingString.substr(1);
    });
  }

  Tweenable.prototype.filter.token = {
    'tweenCreated': function (currentState, fromState, toState, easingObject) {
      sanitizeObjectForHexProps(currentState);
      sanitizeObjectForHexProps(fromState);
      sanitizeObjectForHexProps(toState);
      this._tokenData = getFormatManifests(currentState);
    },

    'beforeTween': function (currentState, fromState, toState, easingObject) {
      expandEasingObject(easingObject, this._tokenData);
      expandFormattedProperties(currentState, this._tokenData);
      expandFormattedProperties(fromState, this._tokenData);
      expandFormattedProperties(toState, this._tokenData);
    },

    'afterTween': function (currentState, fromState, toState, easingObject) {
      collapseFormattedProperties(currentState, this._tokenData);
      collapseFormattedProperties(fromState, this._tokenData);
      collapseFormattedProperties(toState, this._tokenData);
      collapseEasingObject(easingObject, this._tokenData);
    }
  };

} (Tweenable));

}(this));

},{}],"/home/codio/workspace/node_modules/progressbar.js/progressbar.js":[function(require,module,exports){
var Tweenable = require('shifty');

var EASING_ALIASES = {
    easeIn: 'easeInCubic',
    easeOut: 'easeOutCubic',
    easeInOut: 'easeInOutCubic'
};

// Base object for different progress bar shapes
var Progress = function(container, opts) {
    // Prevent calling constructor without parameters so inheritance
    // works correctly
    if (arguments.length === 0) return;

    var svgView = this._createSvgView(opts);

    var element;
    if (isString(container)) {
        element = document.querySelector(container);
    } else {
        element = container;
    }
    element.appendChild(svgView.svg);

    var newOpts = extend({
        attachment: this
    }, opts);
    this._path = new Path(svgView.path, newOpts);

    // Expose public attributes
    this.path = svgView.path;
    this.trail = svgView.trail;
};

Progress.prototype.animate = function animate(progress, opts, cb) {
    this._path.animate(progress, opts, cb);
};

Progress.prototype.stop = function stop() {
    this._path.stop();
};

Progress.prototype.set = function set(progress) {
    this._path.set(progress);
};

Progress.prototype.value = function value() {
    return this._path.value();
};

Progress.prototype._createSvgView = function _createSvgView(opts) {
    opts = extend({
        color: "#555",
        strokeWidth: 1.0,
        trailColor: null,
        fill: null
    }, opts);

    var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    this._initializeSvg(svg, opts);

    var trailPath = null;
    if (opts.trailColor) {
        var trailOpts = extend({}, opts);
        trailOpts.color = opts.trailColor;

        // When trail path is set, fill must be set for it instead of the
        // actual path to prevent trail stroke from clipping
        opts.fill = null;
        trailPath = this._createPath(trailOpts);
        svg.appendChild(trailPath);
    }

    var path = this._createPath(opts);
    svg.appendChild(path);

    return {
        svg: svg,
        path: path,
        trail: trailPath
    };
};

Progress.prototype._initializeSvg = function _initializeSvg(svg, opts) {
    svg.setAttribute("viewBox", "0 0 100 100");
};

Progress.prototype._createPath = function _createPath(opts) {
    var path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", this._pathString(opts));
    path.setAttribute("stroke", opts.color);
    path.setAttribute("stroke-width", opts.strokeWidth);

    if (opts.fill) {
        path.setAttribute("fill", opts.fill);
    } else {
        path.setAttribute("fill-opacity", "0");
    }

    return path;
};

Progress.prototype._pathString = function _pathString(opts) {
    throw new Error("Override this function for each progress bar");
};

// Progress bar shapes

var Line = function(container, options) {
    Progress.apply(this, arguments);
};

Line.prototype = new Progress();
Line.prototype.constructor = Line;

Line.prototype._initializeSvg = function _initializeSvg(svg, opts) {
    svg.setAttribute("viewBox", "0 0 100 " + opts.strokeWidth);
    svg.setAttribute("preserveAspectRatio", "none");
};

Line.prototype._pathString = function _pathString(opts) {
    var pathString = "M 0,{c} L 100,{c}";
    var center = opts.strokeWidth / 2;
    pathString = pathString.replace(/\{c\}/g, center);
    return pathString;
};

var Circle = function(container, options) {
    Progress.apply(this, arguments);
};

Circle.prototype = new Progress();
Circle.prototype.constructor = Circle;

Circle.prototype._pathString = function _pathString(opts) {
    // Use two arcs to form a circle
    // See this answer http://stackoverflow.com/a/10477334/1446092
    var pathString = "M 50,50 m 0,-{r} a {r},{r} 0 1 1 0,{r*2} a {r},{r} 0 1 1 0,-{r*2}";
    var r = 50 - opts.strokeWidth / 2;
    pathString = pathString.replace(/\{r\}/g, r);
    pathString = pathString.replace(/\{r\*2\}/g, r * 2);
    return pathString;
};

var Square = function(container, options) {
    Progress.apply(this, arguments);
};

Square.prototype = new Progress();
Square.prototype.constructor = Square;

Square.prototype._pathString = function _pathString(opts) {
    var pathString = "M 0,{s/2} L {w},{s/2} L {w},{w} L {s/2},{w} L {s/2},{s}";
    var w = 100 - opts.strokeWidth / 2;
    pathString = pathString.replace(/\{w\}/g, w);
    pathString = pathString.replace(/\{s\}/g, opts.strokeWidth);
    pathString = pathString.replace(/\{s\/2\}/g, opts.strokeWidth / 2);
    return pathString;
};

// Lower level API to animate any kind of svg path

var Path = function(path, opts) {
    opts = extend({
        duration: 800,
        easing: "linear",
        from: {},
        to: {},
        step: noop
    }, opts);

    this._path = path;
    this._opts = opts;
    this._tweenable = null;

    // Set up the starting positions
    var length = this._path.getTotalLength();
    this._path.style.strokeDasharray = length + ' ' + length;
    this._path.style.strokeDashoffset = length;
};

Path.prototype.value = function value() {
    var computedStyle = window.getComputedStyle(this._path, null);
    var offset = computedStyle.getPropertyValue('stroke-dashoffset');
    // Remove 'px' suffix
    offset = parseFloat(offset, 10);
    var length = this._path.getTotalLength();

    return 1 - offset / length;
};

Path.prototype.set = function set(progress) {
    this.stop();

    var length = this._path.getTotalLength();
    this._path.style.strokeDashoffset = length - progress * length;
};

Path.prototype.stop = function stop() {
    this._stopTween();

    var computedStyle = window.getComputedStyle(this._path, null);
    var offset = computedStyle.getPropertyValue('stroke-dashoffset');
    this._path.style.strokeDashoffset = offset;
};

// Method introduced here:
// http://jakearchibald.com/2013/animated-line-drawing-svg/
Path.prototype.animate = function animate(progress, opts, cb) {
    if (isFunction(opts)) {
        cb = opts;
        opts = {};
    }

    // Copy default opts to new object so defaults are not modified
    var defaultOpts = extend({}, this._opts);
    opts = extend(defaultOpts, opts);

    this.stop();

    // Trigger a layout so styles are calculated & the browser
    // picks up the starting position before animating
    this._path.getBoundingClientRect();

    var computedStyle = window.getComputedStyle(this._path, null);
    var offset = computedStyle.getPropertyValue('stroke-dashoffset');
    // Remove 'px' suffix
    offset = parseFloat(offset, 10);

    var length = this._path.getTotalLength();
    var newOffset = length - progress * length;

    var self = this;

    this._tweenable = new Tweenable();
    this._tweenable.tween({
        from: extend({ offset: offset }, opts.from),
        to: extend({ offset: newOffset }, opts.to),
        duration: opts.duration,
        easing: this._easing(opts.easing),
        step: function(state) {
            self._path.style.strokeDashoffset = state.offset;
            opts.step(state, opts.attachment);
        },
        finish: function(state) {
            // step function is not called on the last step of animation
            self._path.style.strokeDashoffset = state.offset;
            opts.step(state, opts.attachment);

            if (isFunction(cb)) {
                cb();
            }
        }
    });
};

Path.prototype._stopTween = function _stopTween() {
    if (this._tweenable !== null) {
        this._tweenable.stop();
        this._tweenable.dispose();
        this._tweenable = null;
    }
};

Path.prototype._easing = function _easing(easing) {
    if (EASING_ALIASES.hasOwnProperty(easing)) {
        return EASING_ALIASES[easing];
    }

    return easing;
};

// Utility functions

function noop() {}

// Copy all attributes from source object to destination object.
// destination object is mutated.
function extend(destination, source) {
    destination = destination || {};
    source = source || {};

    for (var attrName in source) {
        if (source.hasOwnProperty(attrName)) {
            destination[attrName] = source[attrName];
        }
    }

    return destination;
}

function isString(obj) {
    return typeof obj === 'string' || obj instanceof String;
}

function isFunction(obj) {
    return typeof obj === "function";
}

module.exports = {
    Line: Line,
    Circle: Circle,
    Square: Square,
    Path: Path
};

},{"shifty":"/home/codio/workspace/node_modules/progressbar.js/node_modules/shifty/dist/shifty.js"}],"/home/codio/workspace/node_modules/randomstring/index.js":[function(require,module,exports){
module.exports = require("./lib/randomstring");
},{"./lib/randomstring":"/home/codio/workspace/node_modules/randomstring/lib/randomstring.js"}],"/home/codio/workspace/node_modules/randomstring/lib/randomstring.js":[function(require,module,exports){
var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz';

exports.generate = function(length) {
  length = length ? length : 32;
  
  var string = '';
  
  for (var i = 0; i < length; i++) {
    var randomNumber = Math.floor(Math.random() * chars.length);
    string += chars.substring(randomNumber, randomNumber + 1);
  }
  
  return string;
}
},{}]},{},["./client/scripts/main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjbGllbnQvc2NyaXB0cy9tYWluLmpzIiwiYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyLWFuaW1hdGUvYW5ndWxhci1hbmltYXRlLm1pbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvYW5ndWxhci1zYW5pdGl6ZS9hbmd1bGFyLXNhbml0aXplLm1pbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvYW5ndWxhci11aS1yb3V0ZXIvcmVsZWFzZS9hbmd1bGFyLXVpLXJvdXRlci5taW4uanMiLCJib3dlcl9jb21wb25lbnRzL2FuZ3VsYXIvYW5ndWxhci5taW4uanMiLCJib3dlcl9jb21wb25lbnRzL2ZhbW91cy1hbmd1bGFyL2Rpc3QvZmFtb3VzLWFuZ3VsYXIubWluLmpzIiwiYm93ZXJfY29tcG9uZW50cy9mYW1vdXMvZGlzdC9mYW1vdXMtZ2xvYmFsLm1pbi5qcyIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi9jb250cm9sbGVycy9ob21lLmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL2NvbnRyb2xsZXJzL2luZGV4LmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL2luZGV4LmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL3NlcnZpY2VzL2ZhbW91c0hlbHBlci5qcyIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi9zZXJ2aWNlcy9pbmRleC5qcyIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi9zZXJ2aWNlcy9waG90b3MuanMiLCJjbGllbnQvc2NyaXB0cy9jb21tb24vdmlld3MvaG9tZS5odG1sIiwibm9kZV9tb2R1bGVzL2ZhbW91cy1wb2x5ZmlsbHMvY2xhc3NMaXN0LmpzIiwibm9kZV9tb2R1bGVzL2ZhbW91cy1wb2x5ZmlsbHMvZnVuY3Rpb25Qcm90b3R5cGVCaW5kLmpzIiwibm9kZV9tb2R1bGVzL2ZhbW91cy1wb2x5ZmlsbHMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZmFtb3VzLXBvbHlmaWxscy9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2Rpc3QvbG9kYXNoLmpzIiwibm9kZV9tb2R1bGVzL3Byb2dyZXNzYmFyLmpzL25vZGVfbW9kdWxlcy9zaGlmdHkvZGlzdC9zaGlmdHkuanMiLCJub2RlX21vZHVsZXMvcHJvZ3Jlc3NiYXIuanMvcHJvZ3Jlc3NiYXIuanMiLCJub2RlX21vZHVsZXMvcmFuZG9tc3RyaW5nL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JhbmRvbXN0cmluZy9saWIvcmFuZG9tc3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25vTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2gyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pUQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0JztcblxudmFyIG5hbWVzcGFjZSA9ICdtYWluJztcblxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShuYW1lc3BhY2UsIFtcbiAgICAvLyBpbmplY3Q6bW9kdWxlcyBzdGFydFxuXG4gICAgcmVxdWlyZSgnLi9jb21tb24nKShuYW1lc3BhY2UpLm5hbWVcblxuICAgIC8vIGluamVjdDptb2R1bGVzIGVuZFxuXSk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXBwOyIsIi8qXG4gQW5ndWxhckpTIHYxLjIuMjZcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihGLGUsTyl7J3VzZSBzdHJpY3QnO2UubW9kdWxlKFwibmdBbmltYXRlXCIsW1wibmdcIl0pLmRpcmVjdGl2ZShcIm5nQW5pbWF0ZUNoaWxkcmVuXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oRyxzLGcpe2c9Zy5uZ0FuaW1hdGVDaGlsZHJlbjtlLmlzU3RyaW5nKGcpJiYwPT09Zy5sZW5ndGg/cy5kYXRhKFwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiLCEwKTpHLiR3YXRjaChnLGZ1bmN0aW9uKGUpe3MuZGF0YShcIiQkbmdBbmltYXRlQ2hpbGRyZW5cIiwhIWUpfSl9fSkuZmFjdG9yeShcIiQkYW5pbWF0ZVJlZmxvd1wiLFtcIiQkckFGXCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihlLHMpe3JldHVybiBmdW5jdGlvbihnKXtyZXR1cm4gZShmdW5jdGlvbigpe2coKX0pfX1dKS5jb25maWcoW1wiJHByb3ZpZGVcIixcIiRhbmltYXRlUHJvdmlkZXJcIixmdW5jdGlvbihHLHMpe2Z1bmN0aW9uIGcoZSl7Zm9yKHZhciBnPTA7ZzxlLmxlbmd0aDtnKyspe3ZhciBsPWVbZ107aWYobC5ub2RlVHlwZT09YWEpcmV0dXJuIGx9fVxuZnVuY3Rpb24gQihsKXtyZXR1cm4gZS5lbGVtZW50KGcobCkpfXZhciBtPWUubm9vcCx1PWUuZm9yRWFjaCxQPXMuJCRzZWxlY3RvcnMsYWE9MSxsPVwiJCRuZ0FuaW1hdGVTdGF0ZVwiLFY9XCIkJG5nQW5pbWF0ZUNoaWxkcmVuXCIsSj1cIm5nLWFuaW1hdGVcIixuPXtydW5uaW5nOiEwfTtHLmRlY29yYXRvcihcIiRhbmltYXRlXCIsW1wiJGRlbGVnYXRlXCIsXCIkaW5qZWN0b3JcIixcIiRzbmlmZmVyXCIsXCIkcm9vdEVsZW1lbnRcIixcIiQkYXN5bmNDYWxsYmFja1wiLFwiJHJvb3RTY29wZVwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oeixGLCQsUixFLEgsTyl7ZnVuY3Rpb24gSyhhKXt2YXIgYj1hLmRhdGEobCl8fHt9O2IucnVubmluZz0hMDthLmRhdGEobCxiKX1mdW5jdGlvbiBMKGEpe2lmKGEpe3ZhciBiPVtdLGM9e307YT1hLnN1YnN0cigxKS5zcGxpdChcIi5cIik7KCQudHJhbnNpdGlvbnN8fCQuYW5pbWF0aW9ucykmJmIucHVzaChGLmdldChQW1wiXCJdKSk7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBmPVxuYVtkXSxlPVBbZl07ZSYmIWNbZl0mJihiLnB1c2goRi5nZXQoZSkpLGNbZl09ITApfXJldHVybiBifX1mdW5jdGlvbiBHKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9YVtiXSxkPWFbXCJiZWZvcmVcIitiLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Iuc3Vic3RyKDEpXTtpZihjfHxkKXJldHVyblwibGVhdmVcIj09YiYmKGQ9YyxjPW51bGwpLG4ucHVzaCh7ZXZlbnQ6YixmbjpjfSksaC5wdXNoKHtldmVudDpiLGZuOmR9KSwhMH1mdW5jdGlvbiBmKGIsZCxlKXt2YXIgZj1bXTt1KGIsZnVuY3Rpb24oYSl7YS5mbiYmZi5wdXNoKGEpfSk7dmFyIGc9MDt1KGYsZnVuY3Rpb24oYixsKXt2YXIgQz1mdW5jdGlvbigpe2E6e2lmKGQpeyhkW2xdfHxtKSgpO2lmKCsrZzxmLmxlbmd0aClicmVhayBhO2Q9bnVsbH1lKCl9fTtzd2l0Y2goYi5ldmVudCl7Y2FzZSBcInNldENsYXNzXCI6ZC5wdXNoKGIuZm4oYSxBLGssQykpO2JyZWFrO2Nhc2UgXCJhZGRDbGFzc1wiOmQucHVzaChiLmZuKGEsQXx8YyxcbkMpKTticmVhaztjYXNlIFwicmVtb3ZlQ2xhc3NcIjpkLnB1c2goYi5mbihhLGt8fGMsQykpO2JyZWFrO2RlZmF1bHQ6ZC5wdXNoKGIuZm4oYSxDKSl9fSk7ZCYmMD09PWQubGVuZ3RoJiZlKCl9dmFyIGc9YVswXTtpZihnKXt2YXIgbD1cInNldENsYXNzXCI9PWIscD1sfHxcImFkZENsYXNzXCI9PWJ8fFwicmVtb3ZlQ2xhc3NcIj09YixBLGs7ZS5pc0FycmF5KGMpJiYoQT1jWzBdLGs9Y1sxXSxjPUErXCIgXCIrayk7dmFyIHg9YS5hdHRyKFwiY2xhc3NcIikrXCIgXCIrYztpZihNKHgpKXt2YXIgdD1tLHc9W10saD1bXSxxPW0seT1bXSxuPVtdLHg9KFwiIFwiK3gpLnJlcGxhY2UoL1xccysvZyxcIi5cIik7dShMKHgpLGZ1bmN0aW9uKGEpeyFkKGEsYikmJmwmJihkKGEsXCJhZGRDbGFzc1wiKSxkKGEsXCJyZW1vdmVDbGFzc1wiKSl9KTtyZXR1cm57bm9kZTpnLGV2ZW50OmIsY2xhc3NOYW1lOmMsaXNDbGFzc0Jhc2VkOnAsaXNTZXRDbGFzc09wZXJhdGlvbjpsLGJlZm9yZTpmdW5jdGlvbihhKXt0PWE7ZihoLHcsZnVuY3Rpb24oKXt0PVxubTthKCl9KX0sYWZ0ZXI6ZnVuY3Rpb24oYSl7cT1hO2Yobix5LGZ1bmN0aW9uKCl7cT1tO2EoKX0pfSxjYW5jZWw6ZnVuY3Rpb24oKXt3JiYodSh3LGZ1bmN0aW9uKGEpeyhhfHxtKSghMCl9KSx0KCEwKSk7eSYmKHUoeSxmdW5jdGlvbihhKXsoYXx8bSkoITApfSkscSghMCkpfX19fX1mdW5jdGlvbiByKGEsYixjLGQsZixnLG4pe2Z1bmN0aW9uIHAoZCl7dmFyIGU9XCIkYW5pbWF0ZTpcIitkO3EmJihxW2VdJiYwPHFbZV0ubGVuZ3RoKSYmRShmdW5jdGlvbigpe2MudHJpZ2dlckhhbmRsZXIoZSx7ZXZlbnQ6YSxjbGFzc05hbWU6Yn0pfSl9ZnVuY3Rpb24gQSgpe3AoXCJiZWZvcmVcIil9ZnVuY3Rpb24gbSgpe3AoXCJhZnRlclwiKX1mdW5jdGlvbiB4KCl7cChcImNsb3NlXCIpO24mJkUoZnVuY3Rpb24oKXtuKCl9KX1mdW5jdGlvbiB0KCl7dC5oYXNCZWVuUnVufHwodC5oYXNCZWVuUnVuPSEwLGcoKSl9ZnVuY3Rpb24gdygpe2lmKCF3Lmhhc0JlZW5SdW4pe3cuaGFzQmVlblJ1bj0hMDt2YXIgZD1cbmMuZGF0YShsKTtkJiYoaCYmaC5pc0NsYXNzQmFzZWQ/ayhjLGIpOihFKGZ1bmN0aW9uKCl7dmFyIGQ9Yy5kYXRhKGwpfHx7fTtyPT1kLmluZGV4JiZrKGMsYixhKX0pLGMuZGF0YShsLGQpKSk7eCgpfX12YXIgaD1HKGMsYSxiKTtpZihoKXtiPWguY2xhc3NOYW1lO3ZhciBxPWUuZWxlbWVudC5fZGF0YShoLm5vZGUpLHE9cSYmcS5ldmVudHM7ZHx8KGQ9Zj9mLnBhcmVudCgpOmMucGFyZW50KCkpO3ZhciB5PWMuZGF0YShsKXx8e307Zj15LmFjdGl2ZXx8e307dmFyIHo9eS50b3RhbEFjdGl2ZXx8MCxDPXkubGFzdCxEO2guaXNDbGFzc0Jhc2VkJiYoRD15LnJ1bm5pbmd8fHkuZGlzYWJsZWR8fEMmJiFDLmlzQ2xhc3NCYXNlZCk7aWYoRHx8TihjLGQpKXQoKSxBKCksbSgpLHcoKTtlbHNle2Q9ITE7aWYoMDx6KXtEPVtdO2lmKGguaXNDbGFzc0Jhc2VkKVwic2V0Q2xhc3NcIj09Qy5ldmVudD8oRC5wdXNoKEMpLGsoYyxiKSk6ZltiXSYmKHY9ZltiXSx2LmV2ZW50PT1hP2Q9ITA6KEQucHVzaCh2KSxcbmsoYyxiKSkpO2Vsc2UgaWYoXCJsZWF2ZVwiPT1hJiZmW1wibmctbGVhdmVcIl0pZD0hMDtlbHNle2Zvcih2YXIgdiBpbiBmKUQucHVzaChmW3ZdKSxrKGMsdik7Zj17fTt6PTB9MDxELmxlbmd0aCYmdShELGZ1bmN0aW9uKGEpe2EuY2FuY2VsKCl9KX0haC5pc0NsYXNzQmFzZWR8fChoLmlzU2V0Q2xhc3NPcGVyYXRpb258fGQpfHwoZD1cImFkZENsYXNzXCI9PWE9PWMuaGFzQ2xhc3MoYikpO2lmKGQpdCgpLEEoKSxtKCkseCgpO2Vsc2V7aWYoXCJsZWF2ZVwiPT1hKWMub25lKFwiJGRlc3Ryb3lcIixmdW5jdGlvbihhKXthPWUuZWxlbWVudCh0aGlzKTt2YXIgYj1hLmRhdGEobCk7YiYmKGI9Yi5hY3RpdmVbXCJuZy1sZWF2ZVwiXSkmJihiLmNhbmNlbCgpLGsoYSxcIm5nLWxlYXZlXCIpKX0pO2MuYWRkQ2xhc3MoSik7dmFyIHI9WSsrO3orKztmW2JdPWg7Yy5kYXRhKGwse2xhc3Q6aCxhY3RpdmU6ZixpbmRleDpyLHRvdGFsQWN0aXZlOnp9KTtBKCk7aC5iZWZvcmUoZnVuY3Rpb24oZCl7dmFyIGU9Yy5kYXRhKGwpO1xuZD1kfHwhZXx8IWUuYWN0aXZlW2JdfHxoLmlzQ2xhc3NCYXNlZCYmZS5hY3RpdmVbYl0uZXZlbnQhPWE7dCgpOyEwPT09ZD93KCk6KG0oKSxoLmFmdGVyKHcpKX0pfX19ZWxzZSB0KCksQSgpLG0oKSx3KCl9ZnVuY3Rpb24gVChhKXtpZihhPWcoYSkpYT1lLmlzRnVuY3Rpb24oYS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKT9hLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoSik6YS5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiK0opLHUoYSxmdW5jdGlvbihhKXthPWUuZWxlbWVudChhKTsoYT1hLmRhdGEobCkpJiZhLmFjdGl2ZSYmdShhLmFjdGl2ZSxmdW5jdGlvbihhKXthLmNhbmNlbCgpfSl9KX1mdW5jdGlvbiBrKGEsYil7aWYoZyhhKT09ZyhSKSluLmRpc2FibGVkfHwobi5ydW5uaW5nPSExLG4uc3RydWN0dXJhbD0hMSk7ZWxzZSBpZihiKXt2YXIgYz1hLmRhdGEobCl8fHt9LGQ9ITA9PT1iOyFkJiYoYy5hY3RpdmUmJmMuYWN0aXZlW2JdKSYmKGMudG90YWxBY3RpdmUtLSxkZWxldGUgYy5hY3RpdmVbYl0pO1xuaWYoZHx8IWMudG90YWxBY3RpdmUpYS5yZW1vdmVDbGFzcyhKKSxhLnJlbW92ZURhdGEobCl9fWZ1bmN0aW9uIE4oYSxiKXtpZihuLmRpc2FibGVkKXJldHVybiEwO2lmKGcoYSk9PWcoUikpcmV0dXJuIG4ucnVubmluZzt2YXIgYyxkLGY7ZG97aWYoMD09PWIubGVuZ3RoKWJyZWFrO3ZhciBtPWcoYik9PWcoUiksaz1tP246Yi5kYXRhKGwpfHx7fTtpZihrLmRpc2FibGVkKXJldHVybiEwO20mJihmPSEwKTshMSE9PWMmJihtPWIuZGF0YShWKSxlLmlzRGVmaW5lZChtKSYmKGM9bSkpO2Q9ZHx8ay5ydW5uaW5nfHxrLmxhc3QmJiFrLmxhc3QuaXNDbGFzc0Jhc2VkfXdoaWxlKGI9Yi5wYXJlbnQoKSk7cmV0dXJuIWZ8fCFjJiZkfXZhciBZPTA7Ui5kYXRhKGwsbik7SC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtILiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe24ucnVubmluZz0hMX0pfSk7dmFyIFE9cy5jbGFzc05hbWVGaWx0ZXIoKSxNPVE/ZnVuY3Rpb24oYSl7cmV0dXJuIFEudGVzdChhKX06XG5mdW5jdGlvbigpe3JldHVybiEwfTtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxiLGMsZCl7YT1lLmVsZW1lbnQoYSk7Yj1iJiZlLmVsZW1lbnQoYik7Yz1jJiZlLmVsZW1lbnQoYyk7SyhhKTt6LmVudGVyKGEsYixjKTtILiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe2E9QihhKTtyKFwiZW50ZXJcIixcIm5nLWVudGVyXCIsYSxiLGMsbSxkKX0pfSxsZWF2ZTpmdW5jdGlvbihhLGIpe2E9ZS5lbGVtZW50KGEpO1QoYSk7SyhhKTtILiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3IoXCJsZWF2ZVwiLFwibmctbGVhdmVcIixCKGEpLG51bGwsbnVsbCxmdW5jdGlvbigpe3oubGVhdmUoYSl9LGIpfSl9LG1vdmU6ZnVuY3Rpb24oYSxiLGMsZCl7YT1lLmVsZW1lbnQoYSk7Yj1iJiZlLmVsZW1lbnQoYik7Yz1jJiZlLmVsZW1lbnQoYyk7VChhKTtLKGEpO3oubW92ZShhLGIsYyk7SC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXthPUIoYSk7cihcIm1vdmVcIixcIm5nLW1vdmVcIixhLGIsYyxtLGQpfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGEsXG5iLGMpe2E9ZS5lbGVtZW50KGEpO2E9QihhKTtyKFwiYWRkQ2xhc3NcIixiLGEsbnVsbCxudWxsLGZ1bmN0aW9uKCl7ei5hZGRDbGFzcyhhLGIpfSxjKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxiLGMpe2E9ZS5lbGVtZW50KGEpO2E9QihhKTtyKFwicmVtb3ZlQ2xhc3NcIixiLGEsbnVsbCxudWxsLGZ1bmN0aW9uKCl7ei5yZW1vdmVDbGFzcyhhLGIpfSxjKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYSxiLGMsZCl7YT1lLmVsZW1lbnQoYSk7YT1CKGEpO3IoXCJzZXRDbGFzc1wiLFtiLGNdLGEsbnVsbCxudWxsLGZ1bmN0aW9uKCl7ei5zZXRDbGFzcyhhLGIsYyl9LGQpfSxlbmFibGVkOmZ1bmN0aW9uKGEsYil7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMjppZihhKWsoYik7ZWxzZXt2YXIgYz1iLmRhdGEobCl8fHt9O2MuZGlzYWJsZWQ9ITA7Yi5kYXRhKGwsYyl9YnJlYWs7Y2FzZSAxOm4uZGlzYWJsZWQ9IWE7YnJlYWs7ZGVmYXVsdDphPSFuLmRpc2FibGVkfXJldHVybiEhYX19fV0pO3MucmVnaXN0ZXIoXCJcIixcbltcIiR3aW5kb3dcIixcIiRzbmlmZmVyXCIsXCIkdGltZW91dFwiLFwiJCRhbmltYXRlUmVmbG93XCIsZnVuY3Rpb24obCxuLHMsQil7ZnVuY3Rpb24gRShhLFUpe1MmJlMoKTtXLnB1c2goVSk7Uz1CKGZ1bmN0aW9uKCl7dShXLGZ1bmN0aW9uKGEpe2EoKX0pO1c9W107Uz1udWxsO3Y9e319KX1mdW5jdGlvbiBIKGEsVSl7dmFyIGI9ZyhhKTthPWUuZWxlbWVudChiKTtaLnB1c2goYSk7Yj1EYXRlLm5vdygpK1U7Yjw9ZGF8fChzLmNhbmNlbChjYSksZGE9YixjYT1zKGZ1bmN0aW9uKCl7RyhaKTtaPVtdfSxVLCExKSl9ZnVuY3Rpb24gRyhhKXt1KGEsZnVuY3Rpb24oYSl7KGE9YS5kYXRhKHEpKSYmKGEuY2xvc2VBbmltYXRpb25Gbnx8bSkoKX0pfWZ1bmN0aW9uIEsoYSxiKXt2YXIgYz1iP3ZbYl06bnVsbDtpZighYyl7dmFyIGQ9MCxlPTAsZj0wLGc9MCxtLGssaCxxO3UoYSxmdW5jdGlvbihhKXtpZihhLm5vZGVUeXBlPT1hYSl7YT1sLmdldENvbXB1dGVkU3R5bGUoYSl8fHt9O2g9YVtJK1BdO2Q9XG5NYXRoLm1heChMKGgpLGQpO3E9YVtJK3hdO209YVtJK3RdO2U9TWF0aC5tYXgoTChtKSxlKTtrPWFbcCt0XTtnPU1hdGgubWF4KEwoayksZyk7dmFyIGI9TChhW3ArUF0pOzA8YiYmKGIqPXBhcnNlSW50KGFbcCt3XSwxMCl8fDEpO2Y9TWF0aC5tYXgoYixmKX19KTtjPXt0b3RhbDowLHRyYW5zaXRpb25Qcm9wZXJ0eVN0eWxlOnEsdHJhbnNpdGlvbkR1cmF0aW9uU3R5bGU6aCx0cmFuc2l0aW9uRGVsYXlTdHlsZTptLHRyYW5zaXRpb25EZWxheTplLHRyYW5zaXRpb25EdXJhdGlvbjpkLGFuaW1hdGlvbkRlbGF5U3R5bGU6ayxhbmltYXRpb25EZWxheTpnLGFuaW1hdGlvbkR1cmF0aW9uOmZ9O2ImJih2W2JdPWMpfXJldHVybiBjfWZ1bmN0aW9uIEwoYSl7dmFyIGI9MDthPWUuaXNTdHJpbmcoYSk/YS5zcGxpdCgvXFxzKixcXHMqLyk6W107dShhLGZ1bmN0aW9uKGEpe2I9TWF0aC5tYXgocGFyc2VGbG9hdChhKXx8MCxiKX0pO3JldHVybiBifWZ1bmN0aW9uIEooYSl7dmFyIGI9YS5wYXJlbnQoKSxcbmM9Yi5kYXRhKGgpO2N8fChiLmRhdGEoaCwrK2JhKSxjPWJhKTtyZXR1cm4gYytcIi1cIitnKGEpLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfWZ1bmN0aW9uIHIoYSxiLGMsZCl7dmFyIGU9SihiKSxmPWUrXCIgXCIrYyxsPXZbZl0/Kyt2W2ZdLnRvdGFsOjAsaz17fTtpZigwPGwpe3ZhciBoPWMrXCItc3RhZ2dlclwiLGs9ZStcIiBcIitoOyhlPSF2W2tdKSYmYi5hZGRDbGFzcyhoKTtrPUsoYixrKTtlJiZiLnJlbW92ZUNsYXNzKGgpfWQ9ZHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEoKX07Yi5hZGRDbGFzcyhjKTt2YXIgaD1iLmRhdGEocSl8fHt9LG49ZChmdW5jdGlvbigpe3JldHVybiBLKGIsZil9KTtkPW4udHJhbnNpdGlvbkR1cmF0aW9uO2U9bi5hbmltYXRpb25EdXJhdGlvbjtpZigwPT09ZCYmMD09PWUpcmV0dXJuIGIucmVtb3ZlQ2xhc3MoYyksITE7Yi5kYXRhKHEse3J1bm5pbmc6aC5ydW5uaW5nfHwwLGl0ZW1JbmRleDpsLHN0YWdnZXI6ayx0aW1pbmdzOm4sY2xvc2VBbmltYXRpb25GbjptfSk7XG5hPTA8aC5ydW5uaW5nfHxcInNldENsYXNzXCI9PWE7MDxkJiZUKGIsYyxhKTswPGUmJigwPGsuYW5pbWF0aW9uRGVsYXkmJjA9PT1rLmFuaW1hdGlvbkR1cmF0aW9uKSYmKGcoYikuc3R5bGVbcF09XCJub25lIDBzXCIpO3JldHVybiEwfWZ1bmN0aW9uIFQoYSxiLGMpe1wibmctZW50ZXJcIiE9YiYmKFwibmctbW92ZVwiIT1iJiZcIm5nLWxlYXZlXCIhPWIpJiZjP2EuYWRkQ2xhc3MoeSk6ZyhhKS5zdHlsZVtJK3hdPVwibm9uZVwifWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz1JK3gsZD1nKGEpO2Quc3R5bGVbY10mJjA8ZC5zdHlsZVtjXS5sZW5ndGgmJihkLnN0eWxlW2NdPVwiXCIpO2EucmVtb3ZlQ2xhc3MoeSl9ZnVuY3Rpb24gTihhKXt2YXIgYj1wO2E9ZyhhKTthLnN0eWxlW2JdJiYwPGEuc3R5bGVbYl0ubGVuZ3RoJiYoYS5zdHlsZVtiXT1cIlwiKX1mdW5jdGlvbiBZKGEsYixkLGUpe2Z1bmN0aW9uIGsoYSl7Yi5vZmYoeCxsKTtiLnJlbW92ZUNsYXNzKG0pO2MoYixkKTthPWcoYik7Zm9yKHZhciBlIGluIHMpYS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShzW2VdKX1cbmZ1bmN0aW9uIGwoYSl7YS5zdG9wUHJvcGFnYXRpb24oKTt2YXIgYj1hLm9yaWdpbmFsRXZlbnR8fGE7YT1iLiRtYW51YWxUaW1lU3RhbXB8fGIudGltZVN0YW1wfHxEYXRlLm5vdygpO2I9cGFyc2VGbG9hdChiLmVsYXBzZWRUaW1lLnRvRml4ZWQoVikpO01hdGgubWF4KGEteiwwKT49eSYmYj49diYmZSgpfXZhciBoPWcoYik7YT1iLmRhdGEocSk7aWYoLTEhPWguZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikuaW5kZXhPZihkKSYmYSl7dmFyIG09XCJcIjt1KGQuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bSs9KDA8Yj9cIiBcIjpcIlwiKSthK1wiLWFjdGl2ZVwifSk7dmFyIG49YS5zdGFnZ2VyLHA9YS50aW1pbmdzLHQ9YS5pdGVtSW5kZXgsdj1NYXRoLm1heChwLnRyYW5zaXRpb25EdXJhdGlvbixwLmFuaW1hdGlvbkR1cmF0aW9uKSx3PU1hdGgubWF4KHAudHJhbnNpdGlvbkRlbGF5LHAuYW5pbWF0aW9uRGVsYXkpLHk9dypELHo9RGF0ZS5ub3coKSx4PUErXCIgXCIrWCxyPVwiXCIscz1bXTtpZigwPHAudHJhbnNpdGlvbkR1cmF0aW9uKXt2YXIgQj1cbnAudHJhbnNpdGlvblByb3BlcnR5U3R5bGU7LTE9PUIuaW5kZXhPZihcImFsbFwiKSYmKHIrPWYrXCJ0cmFuc2l0aW9uLXByb3BlcnR5OiBcIitCK1wiO1wiLHIrPWYrXCJ0cmFuc2l0aW9uLWR1cmF0aW9uOiBcIitwLnRyYW5zaXRpb25EdXJhdGlvblN0eWxlK1wiO1wiLHMucHVzaChmK1widHJhbnNpdGlvbi1wcm9wZXJ0eVwiKSxzLnB1c2goZitcInRyYW5zaXRpb24tZHVyYXRpb25cIikpfTA8dCYmKDA8bi50cmFuc2l0aW9uRGVsYXkmJjA9PT1uLnRyYW5zaXRpb25EdXJhdGlvbiYmKHIrPWYrXCJ0cmFuc2l0aW9uLWRlbGF5OiBcIitRKHAudHJhbnNpdGlvbkRlbGF5U3R5bGUsbi50cmFuc2l0aW9uRGVsYXksdCkrXCI7IFwiLHMucHVzaChmK1widHJhbnNpdGlvbi1kZWxheVwiKSksMDxuLmFuaW1hdGlvbkRlbGF5JiYwPT09bi5hbmltYXRpb25EdXJhdGlvbiYmKHIrPWYrXCJhbmltYXRpb24tZGVsYXk6IFwiK1EocC5hbmltYXRpb25EZWxheVN0eWxlLG4uYW5pbWF0aW9uRGVsYXksdCkrXCI7IFwiLHMucHVzaChmK1wiYW5pbWF0aW9uLWRlbGF5XCIpKSk7XG4wPHMubGVuZ3RoJiYocD1oLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpfHxcIlwiLGguc2V0QXR0cmlidXRlKFwic3R5bGVcIixwK1wiOyBcIityKSk7Yi5vbih4LGwpO2IuYWRkQ2xhc3MobSk7YS5jbG9zZUFuaW1hdGlvbkZuPWZ1bmN0aW9uKCl7aygpO2UoKX07aD0odCooTWF0aC5tYXgobi5hbmltYXRpb25EZWxheSxuLnRyYW5zaXRpb25EZWxheSl8fDApKyh3K3YpKkMpKkQ7YS5ydW5uaW5nKys7SChiLGgpO3JldHVybiBrfWUoKX1mdW5jdGlvbiBRKGEsYixjKXt2YXIgZD1cIlwiO3UoYS5zcGxpdChcIixcIiksZnVuY3Rpb24oYSxlKXtkKz0oMDxlP1wiLFwiOlwiXCIpKyhjKmIrcGFyc2VJbnQoYSwxMCkpK1wic1wifSk7cmV0dXJuIGR9ZnVuY3Rpb24gTShhLGIsZCxlKXtpZihyKGEsYixkLGUpKXJldHVybiBmdW5jdGlvbihhKXthJiZjKGIsZCl9fWZ1bmN0aW9uIGEoYSxiLGQsZSl7aWYoYi5kYXRhKHEpKXJldHVybiBZKGEsYixkLGUpO2MoYixkKTtlKCl9ZnVuY3Rpb24gYihiLGMsZCxlKXt2YXIgZj1NKGIsXG5jLGQpO2lmKGYpe3ZhciBnPWY7RShjLGZ1bmN0aW9uKCl7ayhjLGQpO04oYyk7Zz1hKGIsYyxkLGUpfSk7cmV0dXJuIGZ1bmN0aW9uKGEpeyhnfHxtKShhKX19ZSgpfWZ1bmN0aW9uIGMoYSxiKXthLnJlbW92ZUNsYXNzKGIpO3ZhciBjPWEuZGF0YShxKTtjJiYoYy5ydW5uaW5nJiZjLnJ1bm5pbmctLSxjLnJ1bm5pbmcmJjAhPT1jLnJ1bm5pbmd8fGEucmVtb3ZlRGF0YShxKSl9ZnVuY3Rpb24gZChhLGIpe3ZhciBjPVwiXCI7YT1lLmlzQXJyYXkoYSk/YTphLnNwbGl0KC9cXHMrLyk7dShhLGZ1bmN0aW9uKGEsZCl7YSYmMDxhLmxlbmd0aCYmKGMrPSgwPGQ/XCIgXCI6XCJcIikrYStiKX0pO3JldHVybiBjfXZhciBmPVwiXCIsSSxYLHAsQTtGLm9udHJhbnNpdGlvbmVuZD09PU8mJkYub253ZWJraXR0cmFuc2l0aW9uZW5kIT09Tz8oZj1cIi13ZWJraXQtXCIsST1cIldlYmtpdFRyYW5zaXRpb25cIixYPVwid2Via2l0VHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kXCIpOihJPVwidHJhbnNpdGlvblwiLFg9XCJ0cmFuc2l0aW9uZW5kXCIpO1xuRi5vbmFuaW1hdGlvbmVuZD09PU8mJkYub253ZWJraXRhbmltYXRpb25lbmQhPT1PPyhmPVwiLXdlYmtpdC1cIixwPVwiV2Via2l0QW5pbWF0aW9uXCIsQT1cIndlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmRcIik6KHA9XCJhbmltYXRpb25cIixBPVwiYW5pbWF0aW9uZW5kXCIpO3ZhciBQPVwiRHVyYXRpb25cIix4PVwiUHJvcGVydHlcIix0PVwiRGVsYXlcIix3PVwiSXRlcmF0aW9uQ291bnRcIixoPVwiJCRuZ0FuaW1hdGVLZXlcIixxPVwiJCRuZ0FuaW1hdGVDU1MzRGF0YVwiLHk9XCJuZy1hbmltYXRlLWJsb2NrLXRyYW5zaXRpb25zXCIsVj0zLEM9MS41LEQ9MUUzLHY9e30sYmE9MCxXPVtdLFMsY2E9bnVsbCxkYT0wLFo9W107cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoXCJlbnRlclwiLGEsXCJuZy1lbnRlclwiLGMpfSxsZWF2ZTpmdW5jdGlvbihhLGMpe3JldHVybiBiKFwibGVhdmVcIixhLFwibmctbGVhdmVcIixjKX0sbW92ZTpmdW5jdGlvbihhLGMpe3JldHVybiBiKFwibW92ZVwiLGEsXCJuZy1tb3ZlXCIsXG5jKX0sYmVmb3JlU2V0Q2xhc3M6ZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGY9ZChjLFwiLXJlbW92ZVwiKStcIiBcIitkKGIsXCItYWRkXCIpLGc9TShcInNldENsYXNzXCIsYSxmLGZ1bmN0aW9uKGQpe3ZhciBlPWEuYXR0cihcImNsYXNzXCIpO2EucmVtb3ZlQ2xhc3MoYyk7YS5hZGRDbGFzcyhiKTtkPWQoKTthLmF0dHIoXCJjbGFzc1wiLGUpO3JldHVybiBkfSk7aWYoZylyZXR1cm4gRShhLGZ1bmN0aW9uKCl7ayhhLGYpO04oYSk7ZSgpfSksZztlKCl9LGJlZm9yZUFkZENsYXNzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZT1NKFwiYWRkQ2xhc3NcIixhLGQoYixcIi1hZGRcIiksZnVuY3Rpb24oYyl7YS5hZGRDbGFzcyhiKTtjPWMoKTthLnJlbW92ZUNsYXNzKGIpO3JldHVybiBjfSk7aWYoZSlyZXR1cm4gRShhLGZ1bmN0aW9uKCl7ayhhLGIpO04oYSk7YygpfSksZTtjKCl9LHNldENsYXNzOmZ1bmN0aW9uKGIsYyxlLGYpe2U9ZChlLFwiLXJlbW92ZVwiKTtjPWQoYyxcIi1hZGRcIik7cmV0dXJuIGEoXCJzZXRDbGFzc1wiLGIsXG5lK1wiIFwiK2MsZil9LGFkZENsYXNzOmZ1bmN0aW9uKGIsYyxlKXtyZXR1cm4gYShcImFkZENsYXNzXCIsYixkKGMsXCItYWRkXCIpLGUpfSxiZWZvcmVSZW1vdmVDbGFzczpmdW5jdGlvbihhLGIsYyl7dmFyIGU9TShcInJlbW92ZUNsYXNzXCIsYSxkKGIsXCItcmVtb3ZlXCIpLGZ1bmN0aW9uKGMpe3ZhciBkPWEuYXR0cihcImNsYXNzXCIpO2EucmVtb3ZlQ2xhc3MoYik7Yz1jKCk7YS5hdHRyKFwiY2xhc3NcIixkKTtyZXR1cm4gY30pO2lmKGUpcmV0dXJuIEUoYSxmdW5jdGlvbigpe2soYSxiKTtOKGEpO2MoKX0pLGU7YygpfSxyZW1vdmVDbGFzczpmdW5jdGlvbihiLGMsZSl7cmV0dXJuIGEoXCJyZW1vdmVDbGFzc1wiLGIsZChjLFwiLXJlbW92ZVwiKSxlKX19fV0pfV0pfSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItYW5pbWF0ZS5taW4uanMubWFwXG4iLCIvKlxuIEFuZ3VsYXJKUyB2MS4yLjI2XG4gKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiBMaWNlbnNlOiBNSVRcbiovXG4oZnVuY3Rpb24ocSxnLHIpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBGKGEpe3ZhciBkPVtdO3QoZCxnLm5vb3ApLmNoYXJzKGEpO3JldHVybiBkLmpvaW4oXCJcIil9ZnVuY3Rpb24gbShhKXt2YXIgZD17fTthPWEuc3BsaXQoXCIsXCIpO3ZhciBjO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspZFthW2NdXT0hMDtyZXR1cm4gZH1mdW5jdGlvbiBHKGEsZCl7ZnVuY3Rpb24gYyhhLGIsYyxoKXtiPWcubG93ZXJjYXNlKGIpO2lmKHVbYl0pZm9yKDtmLmxhc3QoKSYmdltmLmxhc3QoKV07KWUoXCJcIixmLmxhc3QoKSk7d1tiXSYmZi5sYXN0KCk9PWImJmUoXCJcIixiKTsoaD14W2JdfHwhIWgpfHxmLnB1c2goYik7dmFyIG49e307Yy5yZXBsYWNlKEgsZnVuY3Rpb24oYSxiLGQsYyxlKXtuW2JdPXMoZHx8Y3x8ZXx8XCJcIil9KTtkLnN0YXJ0JiZkLnN0YXJ0KGIsbixoKX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9MCxlO2lmKGI9Zy5sb3dlcmNhc2UoYikpZm9yKGM9Zi5sZW5ndGgtMTswPD1jJiZmW2NdIT1iO2MtLSk7XG5pZigwPD1jKXtmb3IoZT1mLmxlbmd0aC0xO2U+PWM7ZS0tKWQuZW5kJiZkLmVuZChmW2VdKTtmLmxlbmd0aD1jfX1cInN0cmluZ1wiIT09dHlwZW9mIGEmJihhPW51bGw9PT1hfHxcInVuZGVmaW5lZFwiPT09dHlwZW9mIGE/XCJcIjpcIlwiK2EpO3ZhciBiLGwsZj1bXSxuPWEsaDtmb3IoZi5sYXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGZbZi5sZW5ndGgtMV19O2E7KXtoPVwiXCI7bD0hMDtpZihmLmxhc3QoKSYmeVtmLmxhc3QoKV0pYT1hLnJlcGxhY2UoUmVnRXhwKFwiKC4qKTxcXFxccypcXFxcL1xcXFxzKlwiK2YubGFzdCgpK1wiW14+XSo+XCIsXCJpXCIpLGZ1bmN0aW9uKGEsYil7Yj1iLnJlcGxhY2UoSSxcIiQxXCIpLnJlcGxhY2UoSixcIiQxXCIpO2QuY2hhcnMmJmQuY2hhcnMocyhiKSk7cmV0dXJuXCJcIn0pLGUoXCJcIixmLmxhc3QoKSk7ZWxzZXtpZigwPT09YS5pbmRleE9mKFwiXFx4M2MhLS1cIikpYj1hLmluZGV4T2YoXCItLVwiLDQpLDA8PWImJmEubGFzdEluZGV4T2YoXCItLVxceDNlXCIsYik9PT1iJiYoZC5jb21tZW50JiZkLmNvbW1lbnQoYS5zdWJzdHJpbmcoNCxcbmIpKSxhPWEuc3Vic3RyaW5nKGIrMyksbD0hMSk7ZWxzZSBpZih6LnRlc3QoYSkpe2lmKGI9YS5tYXRjaCh6KSlhPWEucmVwbGFjZShiWzBdLFwiXCIpLGw9ITF9ZWxzZSBpZihLLnRlc3QoYSkpe2lmKGI9YS5tYXRjaChBKSlhPWEuc3Vic3RyaW5nKGJbMF0ubGVuZ3RoKSxiWzBdLnJlcGxhY2UoQSxlKSxsPSExfWVsc2UgTC50ZXN0KGEpJiYoKGI9YS5tYXRjaChCKSk/KGJbNF0mJihhPWEuc3Vic3RyaW5nKGJbMF0ubGVuZ3RoKSxiWzBdLnJlcGxhY2UoQixjKSksbD0hMSk6KGgrPVwiPFwiLGE9YS5zdWJzdHJpbmcoMSkpKTtsJiYoYj1hLmluZGV4T2YoXCI8XCIpLGgrPTA+Yj9hOmEuc3Vic3RyaW5nKDAsYiksYT0wPmI/XCJcIjphLnN1YnN0cmluZyhiKSxkLmNoYXJzJiZkLmNoYXJzKHMoaCkpKX1pZihhPT1uKXRocm93IE0oXCJiYWRwYXJzZVwiLGEpO249YX1lKCl9ZnVuY3Rpb24gcyhhKXtpZighYSlyZXR1cm5cIlwiO3ZhciBkPU4uZXhlYyhhKTthPWRbMV07dmFyIGM9ZFszXTtpZihkPWRbMl0pcC5pbm5lckhUTUw9XG5kLnJlcGxhY2UoLzwvZyxcIiZsdDtcIiksZD1cInRleHRDb250ZW50XCJpbiBwP3AudGV4dENvbnRlbnQ6cC5pbm5lclRleHQ7cmV0dXJuIGErZCtjfWZ1bmN0aW9uIEMoYSl7cmV0dXJuIGEucmVwbGFjZSgvJi9nLFwiJmFtcDtcIikucmVwbGFjZShPLGZ1bmN0aW9uKGEpe3ZhciBjPWEuY2hhckNvZGVBdCgwKTthPWEuY2hhckNvZGVBdCgxKTtyZXR1cm5cIiYjXCIrKDEwMjQqKGMtNTUyOTYpKyhhLTU2MzIwKSs2NTUzNikrXCI7XCJ9KS5yZXBsYWNlKFAsZnVuY3Rpb24oYSl7cmV0dXJuXCImI1wiK2EuY2hhckNvZGVBdCgwKStcIjtcIn0pLnJlcGxhY2UoLzwvZyxcIiZsdDtcIikucmVwbGFjZSgvPi9nLFwiJmd0O1wiKX1mdW5jdGlvbiB0KGEsZCl7dmFyIGM9ITEsZT1nLmJpbmQoYSxhLnB1c2gpO3JldHVybntzdGFydDpmdW5jdGlvbihhLGwsZil7YT1nLmxvd2VyY2FzZShhKTshYyYmeVthXSYmKGM9YSk7Y3x8ITAhPT1EW2FdfHwoZShcIjxcIiksZShhKSxnLmZvckVhY2gobCxmdW5jdGlvbihjLGYpe3ZhciBrPVxuZy5sb3dlcmNhc2UoZiksbD1cImltZ1wiPT09YSYmXCJzcmNcIj09PWt8fFwiYmFja2dyb3VuZFwiPT09azshMCE9PVFba118fCEwPT09RVtrXSYmIWQoYyxsKXx8KGUoXCIgXCIpLGUoZiksZSgnPVwiJyksZShDKGMpKSxlKCdcIicpKX0pLGUoZj9cIi8+XCI6XCI+XCIpKX0sZW5kOmZ1bmN0aW9uKGEpe2E9Zy5sb3dlcmNhc2UoYSk7Y3x8ITAhPT1EW2FdfHwoZShcIjwvXCIpLGUoYSksZShcIj5cIikpO2E9PWMmJihjPSExKX0sY2hhcnM6ZnVuY3Rpb24oYSl7Y3x8ZShDKGEpKX19fXZhciBNPWcuJCRtaW5FcnIoXCIkc2FuaXRpemVcIiksQj0vXjwoKD86W2EtekEtWl0pW1xcdzotXSopKCg/OlxccytbXFx3Oi1dKyg/Olxccyo9XFxzKig/Oig/OlwiW15cIl0qXCIpfCg/OidbXiddKicpfFtePlxcc10rKSk/KSopXFxzKihcXC8/KVxccyooPj8pLyxBPS9ePFxcL1xccyooW1xcdzotXSspW14+XSo+LyxIPS8oW1xcdzotXSspKD86XFxzKj1cXHMqKD86KD86XCIoKD86W15cIl0pKilcIil8KD86JygoPzpbXiddKSopJyl8KFtePlxcc10rKSkpPy9nLEw9L148Lyxcbks9L148XFwvLyxJPS9cXHgzYyEtLSguKj8pLS1cXHgzZS9nLHo9LzwhRE9DVFlQRShbXj5dKj8pPi9pLEo9LzwhXFxbQ0RBVEFcXFsoLio/KV1dXFx4M2UvZyxPPS9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdL2csUD0vKFteXFwjLX58IHwhXSkvZyx4PW0oXCJhcmVhLGJyLGNvbCxocixpbWcsd2JyXCIpO3E9bShcImNvbGdyb3VwLGRkLGR0LGxpLHAsdGJvZHksdGQsdGZvb3QsdGgsdGhlYWQsdHJcIik7cj1tKFwicnAscnRcIik7dmFyIHc9Zy5leHRlbmQoe30scixxKSx1PWcuZXh0ZW5kKHt9LHEsbShcImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxibG9ja3F1b3RlLGNhcHRpb24sY2VudGVyLGRlbCxkaXIsZGl2LGRsLGZpZ3VyZSxmaWdjYXB0aW9uLGZvb3RlcixoMSxoMixoMyxoNCxoNSxoNixoZWFkZXIsaGdyb3VwLGhyLGlucyxtYXAsbWVudSxuYXYsb2wscHJlLHNjcmlwdCxzZWN0aW9uLHRhYmxlLHVsXCIpKSx2PWcuZXh0ZW5kKHt9LHIsbShcImEsYWJicixhY3JvbnltLGIsYmRpLGJkbyxiaWcsYnIsY2l0ZSxjb2RlLGRlbCxkZm4sZW0sZm9udCxpLGltZyxpbnMsa2JkLGxhYmVsLG1hcCxtYXJrLHEscnVieSxycCxydCxzLHNhbXAsc21hbGwsc3BhbixzdHJpa2Usc3Ryb25nLHN1YixzdXAsdGltZSx0dCx1LHZhclwiKSksXG55PW0oXCJzY3JpcHQsc3R5bGVcIiksRD1nLmV4dGVuZCh7fSx4LHUsdix3KSxFPW0oXCJiYWNrZ3JvdW5kLGNpdGUsaHJlZixsb25nZGVzYyxzcmMsdXNlbWFwXCIpLFE9Zy5leHRlbmQoe30sRSxtKFwiYWJicixhbGlnbixhbHQsYXhpcyxiZ2NvbG9yLGJvcmRlcixjZWxscGFkZGluZyxjZWxsc3BhY2luZyxjbGFzcyxjbGVhcixjb2xvcixjb2xzLGNvbHNwYW4sY29tcGFjdCxjb29yZHMsZGlyLGZhY2UsaGVhZGVycyxoZWlnaHQsaHJlZmxhbmcsaHNwYWNlLGlzbWFwLGxhbmcsbGFuZ3VhZ2Usbm9ocmVmLG5vd3JhcCxyZWwscmV2LHJvd3Mscm93c3BhbixydWxlcyxzY29wZSxzY3JvbGxpbmcsc2hhcGUsc2l6ZSxzcGFuLHN0YXJ0LHN1bW1hcnksdGFyZ2V0LHRpdGxlLHR5cGUsdmFsaWduLHZhbHVlLHZzcGFjZSx3aWR0aFwiKSkscD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpLE49L14oXFxzKikoW1xcc1xcU10qPykoXFxzKikkLztnLm1vZHVsZShcIm5nU2FuaXRpemVcIixbXSkucHJvdmlkZXIoXCIkc2FuaXRpemVcIixcbmZ1bmN0aW9uKCl7dGhpcy4kZ2V0PVtcIiQkc2FuaXRpemVVcmlcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGM9W107RyhkLHQoYyxmdW5jdGlvbihjLGIpe3JldHVybiEvXnVuc2FmZS8udGVzdChhKGMsYikpfSkpO3JldHVybiBjLmpvaW4oXCJcIil9fV19KTtnLm1vZHVsZShcIm5nU2FuaXRpemVcIikuZmlsdGVyKFwibGlua3lcIixbXCIkc2FuaXRpemVcIixmdW5jdGlvbihhKXt2YXIgZD0vKChmdHB8aHR0cHM/KTpcXC9cXC98KG1haWx0bzopP1tBLVphLXowLTkuXyUrLV0rQClcXFMqW15cXHMuOywoKXt9PD5cIl0vLGM9L15tYWlsdG86LztyZXR1cm4gZnVuY3Rpb24oZSxiKXtmdW5jdGlvbiBsKGEpe2EmJmsucHVzaChGKGEpKX1mdW5jdGlvbiBmKGEsYyl7ay5wdXNoKFwiPGEgXCIpO2cuaXNEZWZpbmVkKGIpJiYoay5wdXNoKCd0YXJnZXQ9XCInKSxrLnB1c2goYiksay5wdXNoKCdcIiAnKSk7ay5wdXNoKCdocmVmPVwiJyk7ay5wdXNoKGEpO2sucHVzaCgnXCI+Jyk7bChjKTtrLnB1c2goXCI8L2E+XCIpfVxuaWYoIWUpcmV0dXJuIGU7Zm9yKHZhciBuLGg9ZSxrPVtdLG0scDtuPWgubWF0Y2goZCk7KW09blswXSxuWzJdPT1uWzNdJiYobT1cIm1haWx0bzpcIittKSxwPW4uaW5kZXgsbChoLnN1YnN0cigwLHApKSxmKG0sblswXS5yZXBsYWNlKGMsXCJcIikpLGg9aC5zdWJzdHJpbmcocCtuWzBdLmxlbmd0aCk7bChoKTtyZXR1cm4gYShrLmpvaW4oXCJcIikpfX1dKX0pKHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLXNhbml0aXplLm1pbi5qcy5tYXBcbiIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcblxuOyByZXF1aXJlKFwiL2hvbWUvY29kaW8vd29ya3NwYWNlL2Jvd2VyX2NvbXBvbmVudHMvYW5ndWxhci9hbmd1bGFyLm1pbi5qc1wiKTtcbjtfX2Jyb3dzZXJpZnlfc2hpbV9yZXF1aXJlX189cmVxdWlyZTsoZnVuY3Rpb24gYnJvd3NlcmlmeVNoaW0obW9kdWxlLCBkZWZpbmUsIHJlcXVpcmUpIHtcbi8qKlxuICogU3RhdGUtYmFzZWQgcm91dGluZyBmb3IgQW5ndWxhckpTXG4gKiBAdmVyc2lvbiB2MC4yLjEwXG4gKiBAbGluayBodHRwOi8vYW5ndWxhci11aS5naXRodWIuY29tL1xuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cblwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzJiZtb2R1bGUuZXhwb3J0cz09PWV4cG9ydHMmJihtb2R1bGUuZXhwb3J0cz1cInVpLnJvdXRlclwiKSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe3JldHVybiBJKG5ldyhJKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmF9KSksYil9ZnVuY3Rpb24gZShhKXtyZXR1cm4gSChhcmd1bWVudHMsZnVuY3Rpb24oYil7YiE9PWEmJkgoYixmdW5jdGlvbihiLGMpe2EuaGFzT3duUHJvcGVydHkoYyl8fChhW2NdPWIpfSl9KSxhfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1bXTtmb3IodmFyIGQgaW4gYS5wYXRoKXtpZihhLnBhdGhbZF0hPT1iLnBhdGhbZF0pYnJlYWs7Yy5wdXNoKGEucGF0aFtkXSl9cmV0dXJuIGN9ZnVuY3Rpb24gZyhhLGIpe2lmKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKXJldHVybiBhLmluZGV4T2YoYixOdW1iZXIoYXJndW1lbnRzWzJdKXx8MCk7dmFyIGM9YS5sZW5ndGg+Pj4wLGQ9TnVtYmVyKGFyZ3VtZW50c1syXSl8fDA7Zm9yKGQ9MD5kP01hdGguY2VpbChkKTpNYXRoLmZsb29yKGQpLDA+ZCYmKGQrPWMpO2M+ZDtkKyspaWYoZCBpbiBhJiZhW2RdPT09YilyZXR1cm4gZDtyZXR1cm4tMX1mdW5jdGlvbiBoKGEsYixjLGQpe3ZhciBlLGg9ZihjLGQpLGk9e30saj1bXTtmb3IodmFyIGsgaW4gaClpZihoW2tdLnBhcmFtcyYmaFtrXS5wYXJhbXMubGVuZ3RoKXtlPWhba10ucGFyYW1zO2Zvcih2YXIgbCBpbiBlKWcoaixlW2xdKT49MHx8KGoucHVzaChlW2xdKSxpW2VbbF1dPWFbZVtsXV0pfXJldHVybiBJKHt9LGksYil9ZnVuY3Rpb24gaShhLGIpe3ZhciBjPXt9O3JldHVybiBIKGEsZnVuY3Rpb24oYSl7dmFyIGQ9YlthXTtjW2FdPW51bGwhPWQ/U3RyaW5nKGQpOm51bGx9KSxjfWZ1bmN0aW9uIGooYSxiLGMpe2lmKCFjKXtjPVtdO2Zvcih2YXIgZCBpbiBhKWMucHVzaChkKX1mb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXTtpZihhW2ZdIT1iW2ZdKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz17fTtyZXR1cm4gSChhLGZ1bmN0aW9uKGEpe2NbYV09YlthXX0pLGN9ZnVuY3Rpb24gbChhLGIpe3ZhciBkPTEsZj0yLGc9e30saD1bXSxpPWcsaj1JKGEud2hlbihnKSx7JCRwcm9taXNlczpnLCQkdmFsdWVzOmd9KTt0aGlzLnN0dWR5PWZ1bmN0aW9uKGcpe2Z1bmN0aW9uIGsoYSxjKXtpZihvW2NdIT09Zil7aWYobi5wdXNoKGMpLG9bY109PT1kKXRocm93IG4uc3BsaWNlKDAsbi5pbmRleE9mKGMpKSxuZXcgRXJyb3IoXCJDeWNsaWMgZGVwZW5kZW5jeTogXCIrbi5qb2luKFwiIC0+IFwiKSk7aWYob1tjXT1kLEUoYSkpbS5wdXNoKGMsW2Z1bmN0aW9uKCl7cmV0dXJuIGIuZ2V0KGEpfV0saCk7ZWxzZXt2YXIgZT1iLmFubm90YXRlKGEpO0goZSxmdW5jdGlvbihhKXthIT09YyYmZy5oYXNPd25Qcm9wZXJ0eShhKSYmayhnW2FdLGEpfSksbS5wdXNoKGMsYSxlKX1uLnBvcCgpLG9bY109Zn19ZnVuY3Rpb24gbChhKXtyZXR1cm4gRihhKSYmYS50aGVuJiZhLiQkcHJvbWlzZXN9aWYoIUYoZykpdGhyb3cgbmV3IEVycm9yKFwiJ2ludm9jYWJsZXMnIG11c3QgYmUgYW4gb2JqZWN0XCIpO3ZhciBtPVtdLG49W10sbz17fTtyZXR1cm4gSChnLGspLGc9bj1vPW51bGwsZnVuY3Rpb24oZCxmLGcpe2Z1bmN0aW9uIGgoKXstLXN8fCh0fHxlKHIsZi4kJHZhbHVlcykscC4kJHZhbHVlcz1yLHAuJCRwcm9taXNlcz0hMCxvLnJlc29sdmUocikpfWZ1bmN0aW9uIGsoYSl7cC4kJGZhaWx1cmU9YSxvLnJlamVjdChhKX1mdW5jdGlvbiBuKGMsZSxmKXtmdW5jdGlvbiBpKGEpe2wucmVqZWN0KGEpLGsoYSl9ZnVuY3Rpb24gaigpe2lmKCFDKHAuJCRmYWlsdXJlKSl0cnl7bC5yZXNvbHZlKGIuaW52b2tlKGUsZyxyKSksbC5wcm9taXNlLnRoZW4oZnVuY3Rpb24oYSl7cltjXT1hLGgoKX0saSl9Y2F0Y2goYSl7aShhKX19dmFyIGw9YS5kZWZlcigpLG09MDtIKGYsZnVuY3Rpb24oYSl7cS5oYXNPd25Qcm9wZXJ0eShhKSYmIWQuaGFzT3duUHJvcGVydHkoYSkmJihtKysscVthXS50aGVuKGZ1bmN0aW9uKGIpe3JbYV09YiwtLW18fGooKX0saSkpfSksbXx8aigpLHFbY109bC5wcm9taXNlfWlmKGwoZCkmJmc9PT1jJiYoZz1mLGY9ZCxkPW51bGwpLGQpe2lmKCFGKGQpKXRocm93IG5ldyBFcnJvcihcIidsb2NhbHMnIG11c3QgYmUgYW4gb2JqZWN0XCIpfWVsc2UgZD1pO2lmKGYpe2lmKCFsKGYpKXRocm93IG5ldyBFcnJvcihcIidwYXJlbnQnIG11c3QgYmUgYSBwcm9taXNlIHJldHVybmVkIGJ5ICRyZXNvbHZlLnJlc29sdmUoKVwiKX1lbHNlIGY9ajt2YXIgbz1hLmRlZmVyKCkscD1vLnByb21pc2UscT1wLiQkcHJvbWlzZXM9e30scj1JKHt9LGQpLHM9MSttLmxlbmd0aC8zLHQ9ITE7aWYoQyhmLiQkZmFpbHVyZSkpcmV0dXJuIGsoZi4kJGZhaWx1cmUpLHA7Zi4kJHZhbHVlcz8odD1lKHIsZi4kJHZhbHVlcyksaCgpKTooSShxLGYuJCRwcm9taXNlcyksZi50aGVuKGgsaykpO2Zvcih2YXIgdT0wLHY9bS5sZW5ndGg7dj51O3UrPTMpZC5oYXNPd25Qcm9wZXJ0eShtW3VdKT9oKCk6bihtW3VdLG1bdSsxXSxtW3UrMl0pO3JldHVybiBwfX0sdGhpcy5yZXNvbHZlPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLnN0dWR5KGEpKGIsYyxkKX19ZnVuY3Rpb24gbShhLGIsYyl7dGhpcy5mcm9tQ29uZmlnPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gQyhhLnRlbXBsYXRlKT90aGlzLmZyb21TdHJpbmcoYS50ZW1wbGF0ZSxiKTpDKGEudGVtcGxhdGVVcmwpP3RoaXMuZnJvbVVybChhLnRlbXBsYXRlVXJsLGIpOkMoYS50ZW1wbGF0ZVByb3ZpZGVyKT90aGlzLmZyb21Qcm92aWRlcihhLnRlbXBsYXRlUHJvdmlkZXIsYixjKTpudWxsfSx0aGlzLmZyb21TdHJpbmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRChhKT9hKGIpOmF9LHRoaXMuZnJvbVVybD1mdW5jdGlvbihjLGQpe3JldHVybiBEKGMpJiYoYz1jKGQpKSxudWxsPT1jP251bGw6YS5nZXQoYyx7Y2FjaGU6Yn0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGF0YX0pfSx0aGlzLmZyb21Qcm92aWRlcj1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuaW52b2tlKGEsbnVsbCxkfHx7cGFyYW1zOmJ9KX19ZnVuY3Rpb24gbihhKXtmdW5jdGlvbiBiKGIpe2lmKCEvXlxcdysoLStcXHcrKSokLy50ZXN0KGIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVyIG5hbWUgJ1wiK2IrXCInIGluIHBhdHRlcm4gJ1wiK2ErXCInXCIpO2lmKGZbYl0pdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICdcIitiK1wiJyBpbiBwYXR0ZXJuICdcIithK1wiJ1wiKTtmW2JdPSEwLGoucHVzaChiKX1mdW5jdGlvbiBjKGEpe3JldHVybiBhLnJlcGxhY2UoL1tcXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0vZyxcIlxcXFwkJlwiKX12YXIgZCxlPS8oWzoqXSkoXFx3Kyl8XFx7KFxcdyspKD86XFw6KCg/Oltee31cXFxcXSt8XFxcXC58XFx7KD86W157fVxcXFxdK3xcXFxcLikqXFx9KSspKT9cXH0vZyxmPXt9LGc9XCJeXCIsaD0wLGk9dGhpcy5zZWdtZW50cz1bXSxqPXRoaXMucGFyYW1zPVtdO3RoaXMuc291cmNlPWE7Zm9yKHZhciBrLGwsbTsoZD1lLmV4ZWMoYSkpJiYoaz1kWzJdfHxkWzNdLGw9ZFs0XXx8KFwiKlwiPT1kWzFdP1wiLipcIjpcIlteL10qXCIpLG09YS5zdWJzdHJpbmcoaCxkLmluZGV4KSwhKG0uaW5kZXhPZihcIj9cIik+PTApKTspZys9YyhtKStcIihcIitsK1wiKVwiLGIoayksaS5wdXNoKG0pLGg9ZS5sYXN0SW5kZXg7bT1hLnN1YnN0cmluZyhoKTt2YXIgbj1tLmluZGV4T2YoXCI/XCIpO2lmKG4+PTApe3ZhciBvPXRoaXMuc291cmNlU2VhcmNoPW0uc3Vic3RyaW5nKG4pO209bS5zdWJzdHJpbmcoMCxuKSx0aGlzLnNvdXJjZVBhdGg9YS5zdWJzdHJpbmcoMCxoK24pLEgoby5zdWJzdHJpbmcoMSkuc3BsaXQoL1smP10vKSxiKX1lbHNlIHRoaXMuc291cmNlUGF0aD1hLHRoaXMuc291cmNlU2VhcmNoPVwiXCI7Zys9YyhtKStcIiRcIixpLnB1c2gobSksdGhpcy5yZWdleHA9bmV3IFJlZ0V4cChnKSx0aGlzLnByZWZpeD1pWzBdfWZ1bmN0aW9uIG8oKXt0aGlzLmNvbXBpbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBuKGEpfSx0aGlzLmlzTWF0Y2hlcj1mdW5jdGlvbihhKXtyZXR1cm4gRihhKSYmRChhLmV4ZWMpJiZEKGEuZm9ybWF0KSYmRChhLmNvbmNhdCl9LHRoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzfX1mdW5jdGlvbiBwKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9L15cXF4oKD86XFxcXFteYS16QS1aMC05XXxbXlxcXFxcXFtcXF1cXF4kKis/LigpfHt9XSspKikvLmV4ZWMoYS5zb3VyY2UpO3JldHVybiBudWxsIT1iP2JbMV0ucmVwbGFjZSgvXFxcXCguKS9nLFwiJDFcIik6XCJcIn1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvXFwkKFxcJHxcXGR7MSwyfSkvLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGJbXCIkXCI9PT1jPzA6TnVtYmVyKGMpXX0pfWZ1bmN0aW9uIGQoYSxiLGMpe2lmKCFjKXJldHVybiExO3ZhciBkPWEuaW52b2tlKGIsYix7JG1hdGNoOmN9KTtyZXR1cm4gQyhkKT9kOiEwfXZhciBlPVtdLGY9bnVsbDt0aGlzLnJ1bGU9ZnVuY3Rpb24oYSl7aWYoIUQoYSkpdGhyb3cgbmV3IEVycm9yKFwiJ3J1bGUnIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gZS5wdXNoKGEpLHRoaXN9LHRoaXMub3RoZXJ3aXNlPWZ1bmN0aW9uKGEpe2lmKEUoYSkpe3ZhciBiPWE7YT1mdW5jdGlvbigpe3JldHVybiBifX1lbHNlIGlmKCFEKGEpKXRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGY9YSx0aGlzfSx0aGlzLndoZW49ZnVuY3Rpb24oZSxmKXt2YXIgZyxoPUUoZik7aWYoRShlKSYmKGU9YS5jb21waWxlKGUpKSwhaCYmIUQoZikmJiFHKGYpKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgJ2hhbmRsZXInIGluIHdoZW4oKVwiKTt2YXIgaT17bWF0Y2hlcjpmdW5jdGlvbihiLGMpe3JldHVybiBoJiYoZz1hLmNvbXBpbGUoYyksYz1bXCIkbWF0Y2hcIixmdW5jdGlvbihhKXtyZXR1cm4gZy5mb3JtYXQoYSl9XSksSShmdW5jdGlvbihhLGUpe3JldHVybiBkKGEsYyxiLmV4ZWMoZS5wYXRoKCksZS5zZWFyY2goKSkpfSx7cHJlZml4OkUoYi5wcmVmaXgpP2IucHJlZml4OlwiXCJ9KX0scmVnZXg6ZnVuY3Rpb24oYSxlKXtpZihhLmdsb2JhbHx8YS5zdGlja3kpdGhyb3cgbmV3IEVycm9yKFwid2hlbigpIFJlZ0V4cCBtdXN0IG5vdCBiZSBnbG9iYWwgb3Igc3RpY2t5XCIpO3JldHVybiBoJiYoZz1lLGU9W1wiJG1hdGNoXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGMoZyxhKX1dKSxJKGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGQoYixlLGEuZXhlYyhjLnBhdGgoKSkpfSx7cHJlZml4OmIoYSl9KX19LGo9e21hdGNoZXI6YS5pc01hdGNoZXIoZSkscmVnZXg6ZSBpbnN0YW5jZW9mIFJlZ0V4cH07Zm9yKHZhciBrIGluIGopaWYoaltrXSlyZXR1cm4gdGhpcy5ydWxlKGlba10oZSxmKSk7dGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCAnd2hhdCcgaW4gd2hlbigpXCIpfSx0aGlzLiRnZXQ9W1wiJGxvY2F0aW9uXCIsXCIkcm9vdFNjb3BlXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChiKXtmdW5jdGlvbiBkKGIpe3ZhciBkPWIoYyxhKTtyZXR1cm4gZD8oRShkKSYmYS5yZXBsYWNlKCkudXJsKGQpLCEwKTohMX1pZighYnx8IWIuZGVmYXVsdFByZXZlbnRlZCl7dmFyIGcsaD1lLmxlbmd0aDtmb3IoZz0wO2g+ZztnKyspaWYoZChlW2ddKSlyZXR1cm47ZiYmZChmKX19cmV0dXJuIGIuJG9uKFwiJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1wiLGQpLHtzeW5jOmZ1bmN0aW9uKCl7ZCgpfX19XX1mdW5jdGlvbiBxKGEsZSxmKXtmdW5jdGlvbiBnKGEpe3JldHVybiAwPT09YS5pbmRleE9mKFwiLlwiKXx8MD09PWEuaW5kZXhPZihcIl5cIil9ZnVuY3Rpb24gbChhLGIpe3ZhciBkPUUoYSksZT1kP2E6YS5uYW1lLGY9ZyhlKTtpZihmKXtpZighYil0aHJvdyBuZXcgRXJyb3IoXCJObyByZWZlcmVuY2UgcG9pbnQgZ2l2ZW4gZm9yIHBhdGggJ1wiK2UrXCInXCIpO2Zvcih2YXIgaD1lLnNwbGl0KFwiLlwiKSxpPTAsaj1oLmxlbmd0aCxrPWI7aj5pO2krKylpZihcIlwiIT09aFtpXXx8MCE9PWkpe2lmKFwiXlwiIT09aFtpXSlicmVhaztpZighay5wYXJlbnQpdGhyb3cgbmV3IEVycm9yKFwiUGF0aCAnXCIrZStcIicgbm90IHZhbGlkIGZvciBzdGF0ZSAnXCIrYi5uYW1lK1wiJ1wiKTtrPWsucGFyZW50fWVsc2Ugaz1iO2g9aC5zbGljZShpKS5qb2luKFwiLlwiKSxlPWsubmFtZSsoay5uYW1lJiZoP1wiLlwiOlwiXCIpK2h9dmFyIGw9d1tlXTtyZXR1cm4hbHx8IWQmJihkfHxsIT09YSYmbC5zZWxmIT09YSk/YzpsfWZ1bmN0aW9uIG0oYSxiKXt4W2FdfHwoeFthXT1bXSkseFthXS5wdXNoKGIpfWZ1bmN0aW9uIG4oYil7Yj1kKGIse3NlbGY6YixyZXNvbHZlOmIucmVzb2x2ZXx8e30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lfX0pO3ZhciBjPWIubmFtZTtpZighRShjKXx8Yy5pbmRleE9mKFwiQFwiKT49MCl0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSBtdXN0IGhhdmUgYSB2YWxpZCBuYW1lXCIpO2lmKHcuaGFzT3duUHJvcGVydHkoYykpdGhyb3cgbmV3IEVycm9yKFwiU3RhdGUgJ1wiK2MrXCInJyBpcyBhbHJlYWR5IGRlZmluZWRcIik7dmFyIGU9LTEhPT1jLmluZGV4T2YoXCIuXCIpP2Muc3Vic3RyaW5nKDAsYy5sYXN0SW5kZXhPZihcIi5cIikpOkUoYi5wYXJlbnQpP2IucGFyZW50OlwiXCI7aWYoZSYmIXdbZV0pcmV0dXJuIG0oZSxiLnNlbGYpO2Zvcih2YXIgZiBpbiB6KUQoeltmXSkmJihiW2ZdPXpbZl0oYix6LiRkZWxlZ2F0ZXNbZl0pKTtpZih3W2NdPWIsIWJbeV0mJmIudXJsJiZhLndoZW4oYi51cmwsW1wiJG1hdGNoXCIsXCIkc3RhdGVQYXJhbXNcIixmdW5jdGlvbihhLGMpe3YuJGN1cnJlbnQubmF2aWdhYmxlPT1iJiZqKGEsYyl8fHYudHJhbnNpdGlvblRvKGIsYSx7bG9jYXRpb246ITF9KX1dKSx4W2NdKWZvcih2YXIgZz0wO2c8eFtjXS5sZW5ndGg7ZysrKW4oeFtjXVtnXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gbyhhKXtyZXR1cm4gYS5pbmRleE9mKFwiKlwiKT4tMX1mdW5jdGlvbiBwKGEpe3ZhciBiPWEuc3BsaXQoXCIuXCIpLGM9di4kY3VycmVudC5uYW1lLnNwbGl0KFwiLlwiKTtpZihcIioqXCI9PT1iWzBdJiYoYz1jLnNsaWNlKGMuaW5kZXhPZihiWzFdKSksYy51bnNoaWZ0KFwiKipcIikpLFwiKipcIj09PWJbYi5sZW5ndGgtMV0mJihjLnNwbGljZShjLmluZGV4T2YoYltiLmxlbmd0aC0yXSkrMSxOdW1iZXIuTUFYX1ZBTFVFKSxjLnB1c2goXCIqKlwiKSksYi5sZW5ndGghPWMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylcIipcIj09PWJbZF0mJihjW2RdPVwiKlwiKTtyZXR1cm4gYy5qb2luKFwiXCIpPT09Yi5qb2luKFwiXCIpfWZ1bmN0aW9uIHEoYSxiKXtyZXR1cm4gRShhKSYmIUMoYik/elthXTpEKGIpJiZFKGEpPyh6W2FdJiYhei4kZGVsZWdhdGVzW2FdJiYoei4kZGVsZWdhdGVzW2FdPXpbYV0pLHpbYV09Yix0aGlzKTp0aGlzfWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gRihhKT9iPWE6Yi5uYW1lPWEsbihiKSx0aGlzfWZ1bmN0aW9uIHMoYSxlLGcsbSxuLHEscixzLHgpe2Z1bmN0aW9uIHooKXtyLnVybCgpIT09TSYmKHIudXJsKE0pLHIucmVwbGFjZSgpKX1mdW5jdGlvbiBBKGEsYyxkLGYsaCl7dmFyIGk9ZD9jOmsoYS5wYXJhbXMsYyksaj17JHN0YXRlUGFyYW1zOml9O2gucmVzb2x2ZT1uLnJlc29sdmUoYS5yZXNvbHZlLGosaC5yZXNvbHZlLGEpO3ZhciBsPVtoLnJlc29sdmUudGhlbihmdW5jdGlvbihhKXtoLmdsb2JhbHM9YX0pXTtyZXR1cm4gZiYmbC5wdXNoKGYpLEgoYS52aWV3cyxmdW5jdGlvbihjLGQpe3ZhciBlPWMucmVzb2x2ZSYmYy5yZXNvbHZlIT09YS5yZXNvbHZlP2MucmVzb2x2ZTp7fTtlLiR0ZW1wbGF0ZT1bZnVuY3Rpb24oKXtyZXR1cm4gZy5sb2FkKGQse3ZpZXc6Yyxsb2NhbHM6aixwYXJhbXM6aSxub3RpZnk6ITF9KXx8XCJcIn1dLGwucHVzaChuLnJlc29sdmUoZSxqLGgucmVzb2x2ZSxhKS50aGVuKGZ1bmN0aW9uKGYpe2lmKEQoYy5jb250cm9sbGVyUHJvdmlkZXIpfHxHKGMuY29udHJvbGxlclByb3ZpZGVyKSl7dmFyIGc9Yi5leHRlbmQoe30sZSxqKTtmLiQkY29udHJvbGxlcj1tLmludm9rZShjLmNvbnRyb2xsZXJQcm92aWRlcixudWxsLGcpfWVsc2UgZi4kJGNvbnRyb2xsZXI9Yy5jb250cm9sbGVyO2YuJCRzdGF0ZT1hLGYuJCRjb250cm9sbGVyQXM9Yy5jb250cm9sbGVyQXMsaFtkXT1mfSkpfSksZS5hbGwobCkudGhlbihmdW5jdGlvbigpe3JldHVybiBofSl9dmFyIEI9ZS5yZWplY3QobmV3IEVycm9yKFwidHJhbnNpdGlvbiBzdXBlcnNlZGVkXCIpKSxGPWUucmVqZWN0KG5ldyBFcnJvcihcInRyYW5zaXRpb24gcHJldmVudGVkXCIpKSxLPWUucmVqZWN0KG5ldyBFcnJvcihcInRyYW5zaXRpb24gYWJvcnRlZFwiKSksTD1lLnJlamVjdChuZXcgRXJyb3IoXCJ0cmFuc2l0aW9uIGZhaWxlZFwiKSksTT1yLnVybCgpLE49eC5iYXNlSHJlZigpO3JldHVybiB1LmxvY2Fscz17cmVzb2x2ZTpudWxsLGdsb2JhbHM6eyRzdGF0ZVBhcmFtczp7fX19LHY9e3BhcmFtczp7fSxjdXJyZW50OnUuc2VsZiwkY3VycmVudDp1LHRyYW5zaXRpb246bnVsbH0sdi5yZWxvYWQ9ZnVuY3Rpb24oKXt2LnRyYW5zaXRpb25Ubyh2LmN1cnJlbnQscSx7cmVsb2FkOiEwLGluaGVyaXQ6ITEsbm90aWZ5OiExfSl9LHYuZ289ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLnRyYW5zaXRpb25UbyhhLGIsSSh7aW5oZXJpdDohMCxyZWxhdGl2ZTp2LiRjdXJyZW50fSxjKSl9LHYudHJhbnNpdGlvblRvPWZ1bmN0aW9uKGIsYyxmKXtjPWN8fHt9LGY9SSh7bG9jYXRpb246ITAsaW5oZXJpdDohMSxyZWxhdGl2ZTpudWxsLG5vdGlmeTohMCxyZWxvYWQ6ITEsJHJldHJ5OiExfSxmfHx7fSk7dmFyIGcsaz12LiRjdXJyZW50LG49di5wYXJhbXMsbz1rLnBhdGgscD1sKGIsZi5yZWxhdGl2ZSk7aWYoIUMocCkpe3ZhciBzPXt0bzpiLHRvUGFyYW1zOmMsb3B0aW9uczpmfTtpZihnPWEuJGJyb2FkY2FzdChcIiRzdGF0ZU5vdEZvdW5kXCIscyxrLnNlbGYsbiksZy5kZWZhdWx0UHJldmVudGVkKXJldHVybiB6KCksSztpZihnLnJldHJ5KXtpZihmLiRyZXRyeSlyZXR1cm4geigpLEw7dmFyIHc9di50cmFuc2l0aW9uPWUud2hlbihnLnJldHJ5KTtyZXR1cm4gdy50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHchPT12LnRyYW5zaXRpb24/Qjoocy5vcHRpb25zLiRyZXRyeT0hMCx2LnRyYW5zaXRpb25UbyhzLnRvLHMudG9QYXJhbXMscy5vcHRpb25zKSl9LGZ1bmN0aW9uKCl7cmV0dXJuIEt9KSx6KCksd31pZihiPXMudG8sYz1zLnRvUGFyYW1zLGY9cy5vcHRpb25zLHA9bChiLGYucmVsYXRpdmUpLCFDKHApKXtpZihmLnJlbGF0aXZlKXRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCByZXNvbHZlICdcIitiK1wiJyBmcm9tIHN0YXRlICdcIitmLnJlbGF0aXZlK1wiJ1wiKTt0aHJvdyBuZXcgRXJyb3IoXCJObyBzdWNoIHN0YXRlICdcIitiK1wiJ1wiKX19aWYocFt5XSl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdHJhbnNpdGlvbiB0byBhYnN0cmFjdCBzdGF0ZSAnXCIrYitcIidcIik7Zi5pbmhlcml0JiYoYz1oKHEsY3x8e30sdi4kY3VycmVudCxwKSksYj1wO3ZhciB4LEQsRT1iLnBhdGgsRz11LmxvY2FscyxIPVtdO2Zvcih4PTAsRD1FW3hdO0QmJkQ9PT1vW3hdJiZqKGMsbixELm93blBhcmFtcykmJiFmLnJlbG9hZDt4KyssRD1FW3hdKUc9SFt4XT1ELmxvY2FscztpZih0KGIsayxHLGYpKXJldHVybiBiLnNlbGYucmVsb2FkT25TZWFyY2ghPT0hMSYmeigpLHYudHJhbnNpdGlvbj1udWxsLGUud2hlbih2LmN1cnJlbnQpO2lmKGM9aShiLnBhcmFtcyxjfHx7fSksZi5ub3RpZnkmJihnPWEuJGJyb2FkY2FzdChcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsYi5zZWxmLGMsay5zZWxmLG4pLGcuZGVmYXVsdFByZXZlbnRlZCkpcmV0dXJuIHooKSxGO2Zvcih2YXIgTj1lLndoZW4oRyksTz14O088RS5sZW5ndGg7TysrLEQ9RVtPXSlHPUhbT109ZChHKSxOPUEoRCxjLEQ9PT1iLE4sRyk7dmFyIFA9di50cmFuc2l0aW9uPU4udGhlbihmdW5jdGlvbigpe3ZhciBkLGUsZztpZih2LnRyYW5zaXRpb24hPT1QKXJldHVybiBCO2ZvcihkPW8ubGVuZ3RoLTE7ZD49eDtkLS0pZz1vW2RdLGcuc2VsZi5vbkV4aXQmJm0uaW52b2tlKGcuc2VsZi5vbkV4aXQsZy5zZWxmLGcubG9jYWxzLmdsb2JhbHMpLGcubG9jYWxzPW51bGw7Zm9yKGQ9eDtkPEUubGVuZ3RoO2QrKyllPUVbZF0sZS5sb2NhbHM9SFtkXSxlLnNlbGYub25FbnRlciYmbS5pbnZva2UoZS5zZWxmLm9uRW50ZXIsZS5zZWxmLGUubG9jYWxzLmdsb2JhbHMpO2lmKHYudHJhbnNpdGlvbiE9PVApcmV0dXJuIEI7di4kY3VycmVudD1iLHYuY3VycmVudD1iLnNlbGYsdi5wYXJhbXM9YyxKKHYucGFyYW1zLHEpLHYudHJhbnNpdGlvbj1udWxsO3ZhciBoPWIubmF2aWdhYmxlO3JldHVybiBmLmxvY2F0aW9uJiZoJiYoci51cmwoaC51cmwuZm9ybWF0KGgubG9jYWxzLmdsb2JhbHMuJHN0YXRlUGFyYW1zKSksXCJyZXBsYWNlXCI9PT1mLmxvY2F0aW9uJiZyLnJlcGxhY2UoKSksZi5ub3RpZnkmJmEuJGJyb2FkY2FzdChcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIixiLnNlbGYsYyxrLnNlbGYsbiksTT1yLnVybCgpLHYuY3VycmVudH0sZnVuY3Rpb24oZCl7cmV0dXJuIHYudHJhbnNpdGlvbiE9PVA/Qjoodi50cmFuc2l0aW9uPW51bGwsYS4kYnJvYWRjYXN0KFwiJHN0YXRlQ2hhbmdlRXJyb3JcIixiLnNlbGYsYyxrLnNlbGYsbixkKSx6KCksZS5yZWplY3QoZCkpfSk7cmV0dXJuIFB9LHYuaXM9ZnVuY3Rpb24oYSxkKXt2YXIgZT1sKGEpO3JldHVybiBDKGUpP3YuJGN1cnJlbnQhPT1lPyExOkMoZCkmJm51bGwhPT1kP2IuZXF1YWxzKHEsZCk6ITA6Y30sdi5pbmNsdWRlcz1mdW5jdGlvbihhLGQpe2lmKEUoYSkmJm8oYSkpe2lmKCFwKGEpKXJldHVybiExO2E9di4kY3VycmVudC5uYW1lfXZhciBlPWwoYSk7aWYoIUMoZSkpcmV0dXJuIGM7aWYoIUModi4kY3VycmVudC5pbmNsdWRlc1tlLm5hbWVdKSlyZXR1cm4hMTt2YXIgZj0hMDtyZXR1cm4gYi5mb3JFYWNoKGQsZnVuY3Rpb24oYSxiKXtDKHFbYl0pJiZxW2JdPT09YXx8KGY9ITEpfSksZn0sdi5ocmVmPWZ1bmN0aW9uKGEsYixjKXtjPUkoe2xvc3N5OiEwLGluaGVyaXQ6ITEsYWJzb2x1dGU6ITEscmVsYXRpdmU6di4kY3VycmVudH0sY3x8e30pO3ZhciBkPWwoYSxjLnJlbGF0aXZlKTtpZighQyhkKSlyZXR1cm4gbnVsbDtiPWgocSxifHx7fSx2LiRjdXJyZW50LGQpO3ZhciBlPWQmJmMubG9zc3k/ZC5uYXZpZ2FibGU6ZCxnPWUmJmUudXJsP2UudXJsLmZvcm1hdChpKGQucGFyYW1zLGJ8fHt9KSk6bnVsbDtyZXR1cm4hZi5odG1sNU1vZGUoKSYmZyYmKGc9XCIjXCIrZi5oYXNoUHJlZml4KCkrZyksXCIvXCIhPT1OJiYoZi5odG1sNU1vZGUoKT9nPU4uc2xpY2UoMCwtMSkrZzpjLmFic29sdXRlJiYoZz1OLnNsaWNlKDEpK2cpKSxjLmFic29sdXRlJiZnJiYoZz1yLnByb3RvY29sKCkrXCI6Ly9cIityLmhvc3QoKSsoODA9PXIucG9ydCgpfHw0NDM9PXIucG9ydCgpP1wiXCI6XCI6XCIrci5wb3J0KCkpKyghZi5odG1sNU1vZGUoKSYmZz9cIi9cIjpcIlwiKStnKSxnfSx2LmdldD1mdW5jdGlvbihhLGIpe2lmKCFDKGEpKXt2YXIgYz1bXTtyZXR1cm4gSCh3LGZ1bmN0aW9uKGEpe2MucHVzaChhLnNlbGYpfSksY312YXIgZD1sKGEsYik7cmV0dXJuIGQmJmQuc2VsZj9kLnNlbGY6bnVsbH0sdn1mdW5jdGlvbiB0KGEsYixjLGQpe3JldHVybiBhIT09Ynx8KGMhPT1iLmxvY2Fsc3x8ZC5yZWxvYWQpJiZhLnNlbGYucmVsb2FkT25TZWFyY2ghPT0hMT92b2lkIDA6ITB9dmFyIHUsdix3PXt9LHg9e30seT1cImFic3RyYWN0XCIsej17cGFyZW50OmZ1bmN0aW9uKGEpe2lmKEMoYS5wYXJlbnQpJiZhLnBhcmVudClyZXR1cm4gbChhLnBhcmVudCk7dmFyIGI9L14oLispXFwuW14uXSskLy5leGVjKGEubmFtZSk7cmV0dXJuIGI/bChiWzFdKTp1fSxkYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudCYmYS5wYXJlbnQuZGF0YSYmKGEuZGF0YT1hLnNlbGYuZGF0YT1JKHt9LGEucGFyZW50LmRhdGEsYS5kYXRhKSksYS5kYXRhfSx1cmw6ZnVuY3Rpb24oYSl7dmFyIGI9YS51cmw7aWYoRShiKSlyZXR1cm5cIl5cIj09Yi5jaGFyQXQoMCk/ZS5jb21waWxlKGIuc3Vic3RyaW5nKDEpKTooYS5wYXJlbnQubmF2aWdhYmxlfHx1KS51cmwuY29uY2F0KGIpO2lmKGUuaXNNYXRjaGVyKGIpfHxudWxsPT1iKXJldHVybiBiO3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgdXJsICdcIitiK1wiJyBpbiBzdGF0ZSAnXCIrYStcIidcIil9LG5hdmlnYWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gYS51cmw/YTphLnBhcmVudD9hLnBhcmVudC5uYXZpZ2FibGU6bnVsbH0scGFyYW1zOmZ1bmN0aW9uKGEpe2lmKCFhLnBhcmFtcylyZXR1cm4gYS51cmw/YS51cmwucGFyYW1ldGVycygpOmEucGFyZW50LnBhcmFtcztpZighRyhhLnBhcmFtcykpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbXMgaW4gc3RhdGUgJ1wiK2ErXCInXCIpO2lmKGEudXJsKXRocm93IG5ldyBFcnJvcihcIkJvdGggcGFyYW1zIGFuZCB1cmwgc3BlY2ljaWZpZWQgaW4gc3RhdGUgJ1wiK2ErXCInXCIpO3JldHVybiBhLnBhcmFtc30sdmlld3M6ZnVuY3Rpb24oYSl7dmFyIGI9e307cmV0dXJuIEgoQyhhLnZpZXdzKT9hLnZpZXdzOntcIlwiOmF9LGZ1bmN0aW9uKGMsZCl7ZC5pbmRleE9mKFwiQFwiKTwwJiYoZCs9XCJAXCIrYS5wYXJlbnQubmFtZSksYltkXT1jfSksYn0sb3duUGFyYW1zOmZ1bmN0aW9uKGEpe2lmKCFhLnBhcmVudClyZXR1cm4gYS5wYXJhbXM7dmFyIGI9e307SChhLnBhcmFtcyxmdW5jdGlvbihhKXtiW2FdPSEwfSksSChhLnBhcmVudC5wYXJhbXMsZnVuY3Rpb24oYyl7aWYoIWJbY10pdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXIgJ1wiK2MrXCInIGluIHN0YXRlICdcIithLm5hbWUrXCInXCIpO2JbY109ITF9KTt2YXIgYz1bXTtyZXR1cm4gSChiLGZ1bmN0aW9uKGEsYil7YSYmYy5wdXNoKGIpfSksY30scGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnQ/YS5wYXJlbnQucGF0aC5jb25jYXQoYSk6W119LGluY2x1ZGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50P0koe30sYS5wYXJlbnQuaW5jbHVkZXMpOnt9O3JldHVybiBiW2EubmFtZV09ITAsYn0sJGRlbGVnYXRlczp7fX07dT1uKHtuYW1lOlwiXCIsdXJsOlwiXlwiLHZpZXdzOm51bGwsXCJhYnN0cmFjdFwiOiEwfSksdS5uYXZpZ2FibGU9bnVsbCx0aGlzLmRlY29yYXRvcj1xLHRoaXMuc3RhdGU9cix0aGlzLiRnZXQ9cyxzLiRpbmplY3Q9W1wiJHJvb3RTY29wZVwiLFwiJHFcIixcIiR2aWV3XCIsXCIkaW5qZWN0b3JcIixcIiRyZXNvbHZlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRsb2NhdGlvblwiLFwiJHVybFJvdXRlclwiLFwiJGJyb3dzZXJcIl19ZnVuY3Rpb24gcigpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm57bG9hZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9e3RlbXBsYXRlOm51bGwsY29udHJvbGxlcjpudWxsLHZpZXc6bnVsbCxsb2NhbHM6bnVsbCxub3RpZnk6ITAsYXN5bmM6ITAscGFyYW1zOnt9fTtyZXR1cm4gZD1JKGYsZCksZC52aWV3JiYoZT1iLmZyb21Db25maWcoZC52aWV3LGQucGFyYW1zLGQubG9jYWxzKSksZSYmZC5ub3RpZnkmJmEuJGJyb2FkY2FzdChcIiR2aWV3Q29udGVudExvYWRpbmdcIixkKSxlfX19dGhpcy4kZ2V0PWEsYS4kaW5qZWN0PVtcIiRyb290U2NvcGVcIixcIiR0ZW1wbGF0ZUZhY3RvcnlcIl19ZnVuY3Rpb24gcygpe3ZhciBhPSExO3RoaXMudXNlQW5jaG9yU2Nyb2xsPWZ1bmN0aW9uKCl7YT0hMH0sdGhpcy4kZ2V0PVtcIiRhbmNob3JTY3JvbGxcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixjKXtyZXR1cm4gYT9iOmZ1bmN0aW9uKGEpe2MoZnVuY3Rpb24oKXthWzBdLnNjcm9sbEludG9WaWV3KCl9LDAsITEpfX1dfWZ1bmN0aW9uIHQoYSxjLGQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gYy5oYXM/ZnVuY3Rpb24oYSl7cmV0dXJuIGMuaGFzKGEpP2MuZ2V0KGEpOm51bGx9OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gYy5nZXQoYSl9Y2F0Y2goYil7cmV0dXJuIG51bGx9fX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxiLGMpe2IuYWZ0ZXIoYSksYygpfSxsZWF2ZTpmdW5jdGlvbihhLGIpe2EucmVtb3ZlKCksYigpfX19O2lmKGkpcmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjKXtpLmVudGVyKGEsbnVsbCxiLGMpfSxsZWF2ZTpmdW5jdGlvbihhLGIpe2kubGVhdmUoYSxiKX19O2lmKGgpe3ZhciBkPWgmJmgoYixhKTtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxiLGMpe2QuZW50ZXIoYSxudWxsLGIpLGMoKX0sbGVhdmU6ZnVuY3Rpb24oYSxiKXtkLmxlYXZlKGEpLGIoKX19fXJldHVybiBjKCl9dmFyIGc9ZSgpLGg9ZyhcIiRhbmltYXRvclwiKSxpPWcoXCIkYW5pbWF0ZVwiKSxqPXtyZXN0cmljdDpcIkVDQVwiLHRlcm1pbmFsOiEwLHByaW9yaXR5OjQwMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLGNvbXBpbGU6ZnVuY3Rpb24oYyxlLGcpe3JldHVybiBmdW5jdGlvbihjLGUsaCl7ZnVuY3Rpb24gaSgpe2smJihrLnJlbW92ZSgpLGs9bnVsbCksbSYmKG0uJGRlc3Ryb3koKSxtPW51bGwpLGwmJihxLmxlYXZlKGwsZnVuY3Rpb24oKXtrPW51bGx9KSxrPWwsbD1udWxsKX1mdW5jdGlvbiBqKGYpe3ZhciBoPWMuJG5ldygpLGo9bCYmbC5kYXRhKFwiJHVpVmlld05hbWVcIiksaz1qJiZhLiRjdXJyZW50JiZhLiRjdXJyZW50LmxvY2Fsc1tqXTtpZihmfHxrIT09bil7dmFyIHI9ZyhoLGZ1bmN0aW9uKGEpe3EuZW50ZXIoYSxlLGZ1bmN0aW9uKCl7KGIuaXNEZWZpbmVkKHApJiYhcHx8Yy4kZXZhbChwKSkmJmQoYSl9KSxpKCl9KTtuPWEuJGN1cnJlbnQubG9jYWxzW3IuZGF0YShcIiR1aVZpZXdOYW1lXCIpXSxsPXIsbT1oLG0uJGVtaXQoXCIkdmlld0NvbnRlbnRMb2FkZWRcIiksbS4kZXZhbChvKX19dmFyIGssbCxtLG4sbz1oLm9ubG9hZHx8XCJcIixwPWguYXV0b3Njcm9sbCxxPWYoaCxjKTtjLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIixmdW5jdGlvbigpe2ooITEpfSksYy4kb24oXCIkdmlld0NvbnRlbnRMb2FkaW5nXCIsZnVuY3Rpb24oKXtqKCExKX0pLGooITApfX19O3JldHVybiBqfWZ1bmN0aW9uIHUoYSxiLGMpe3JldHVybntyZXN0cmljdDpcIkVDQVwiLHByaW9yaXR5Oi00MDAsY29tcGlsZTpmdW5jdGlvbihkKXt2YXIgZT1kLmh0bWwoKTtyZXR1cm4gZnVuY3Rpb24oZCxmLGcpe3ZhciBoPWcudWlWaWV3fHxnLm5hbWV8fFwiXCIsaT1mLmluaGVyaXRlZERhdGEoXCIkdWlWaWV3XCIpO2guaW5kZXhPZihcIkBcIik8MCYmKGg9aCtcIkBcIisoaT9pLnN0YXRlLm5hbWU6XCJcIikpLGYuZGF0YShcIiR1aVZpZXdOYW1lXCIsaCk7dmFyIGo9Yy4kY3VycmVudCxrPWomJmoubG9jYWxzW2hdO2lmKGspe2YuZGF0YShcIiR1aVZpZXdcIix7bmFtZTpoLHN0YXRlOmsuJCRzdGF0ZX0pLGYuaHRtbChrLiR0ZW1wbGF0ZT9rLiR0ZW1wbGF0ZTplKTt2YXIgbD1hKGYuY29udGVudHMoKSk7aWYoay4kJGNvbnRyb2xsZXIpe2suJHNjb3BlPWQ7dmFyIG09YihrLiQkY29udHJvbGxlcixrKTtrLiQkY29udHJvbGxlckFzJiYoZFtrLiQkY29udHJvbGxlckFzXT1tKSxmLmRhdGEoXCIkbmdDb250cm9sbGVyQ29udHJvbGxlclwiLG0pLGYuY2hpbGRyZW4oKS5kYXRhKFwiJG5nQ29udHJvbGxlckNvbnRyb2xsZXJcIixtKX1sKGQpfX19fX1mdW5jdGlvbiB2KGEpe3ZhciBiPWEucmVwbGFjZSgvXFxuL2csXCIgXCIpLm1hdGNoKC9eKFteKF0rPylcXHMqKFxcKCguKilcXCkpPyQvKTtpZighYnx8NCE9PWIubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGUgcmVmICdcIithK1wiJ1wiKTtyZXR1cm57c3RhdGU6YlsxXSxwYXJhbUV4cHI6YlszXXx8bnVsbH19ZnVuY3Rpb24gdyhhKXt2YXIgYj1hLnBhcmVudCgpLmluaGVyaXRlZERhdGEoXCIkdWlWaWV3XCIpO3JldHVybiBiJiZiLnN0YXRlJiZiLnN0YXRlLm5hbWU/Yi5zdGF0ZTp2b2lkIDB9ZnVuY3Rpb24geChhLGMpe3ZhciBkPVtcImxvY2F0aW9uXCIsXCJpbmhlcml0XCIsXCJyZWxvYWRcIl07cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/XnVpU3JlZkFjdGl2ZVwiLGxpbms6ZnVuY3Rpb24oZSxmLGcsaCl7dmFyIGk9dihnLnVpU3JlZiksaj1udWxsLGs9dyhmKXx8YS4kY3VycmVudCxsPVwiRk9STVwiPT09ZlswXS5ub2RlTmFtZSxtPWw/XCJhY3Rpb25cIjpcImhyZWZcIixuPSEwLG89e3JlbGF0aXZlOmt9LHA9ZS4kZXZhbChnLnVpU3JlZk9wdHMpfHx7fTtiLmZvckVhY2goZCxmdW5jdGlvbihhKXthIGluIHAmJihvW2FdPXBbYV0pfSk7dmFyIHE9ZnVuY3Rpb24oYil7aWYoYiYmKGo9Yiksbil7dmFyIGM9YS5ocmVmKGkuc3RhdGUsaixvKTtyZXR1cm4gaCYmaC4kJHNldFN0YXRlSW5mbyhpLnN0YXRlLGopLGM/dm9pZChmWzBdW21dPWMpOihuPSExLCExKX19O2kucGFyYW1FeHByJiYoZS4kd2F0Y2goaS5wYXJhbUV4cHIsZnVuY3Rpb24oYSl7YSE9PWomJnEoYSl9LCEwKSxqPWUuJGV2YWwoaS5wYXJhbUV4cHIpKSxxKCksbHx8Zi5iaW5kKFwiY2xpY2tcIixmdW5jdGlvbihiKXt2YXIgZD1iLndoaWNofHxiLmJ1dHRvbjtkPjF8fGIuY3RybEtleXx8Yi5tZXRhS2V5fHxiLnNoaWZ0S2V5fHxmLmF0dHIoXCJ0YXJnZXRcIil8fChjKGZ1bmN0aW9uKCl7YS5nbyhpLnN0YXRlLGosbyl9KSxiLnByZXZlbnREZWZhdWx0KCkpfSl9fX1mdW5jdGlvbiB5KGEsYixjKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixmdW5jdGlvbihkLGUsZil7ZnVuY3Rpb24gZygpe2EuJGN1cnJlbnQuc2VsZj09PWkmJmgoKT9lLmFkZENsYXNzKGwpOmUucmVtb3ZlQ2xhc3MobCl9ZnVuY3Rpb24gaCgpe3JldHVybiFrfHxqKGssYil9dmFyIGksayxsO2w9YyhmLnVpU3JlZkFjdGl2ZXx8XCJcIiwhMSkoZCksdGhpcy4kJHNldFN0YXRlSW5mbz1mdW5jdGlvbihiLGMpe2k9YS5nZXQoYix3KGUpKSxrPWMsZygpfSxkLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIixnKX1dfX1mdW5jdGlvbiB6KGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5pcyhiKX19ZnVuY3Rpb24gQShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuaW5jbHVkZXMoYil9fWZ1bmN0aW9uIEIoYSxiKXtmdW5jdGlvbiBlKGEpe3RoaXMubG9jYWxzPWEubG9jYWxzLmdsb2JhbHMsdGhpcy5wYXJhbXM9dGhpcy5sb2NhbHMuJHN0YXRlUGFyYW1zfWZ1bmN0aW9uIGYoKXt0aGlzLmxvY2Fscz1udWxsLHRoaXMucGFyYW1zPW51bGx9ZnVuY3Rpb24gZyhjLGcpe2lmKG51bGwhPWcucmVkaXJlY3RUbyl7dmFyIGgsaj1nLnJlZGlyZWN0VG87aWYoRShqKSloPWo7ZWxzZXtpZighRChqKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdyZWRpcmVjdFRvJyBpbiB3aGVuKClcIik7aD1mdW5jdGlvbihhLGIpe3JldHVybiBqKGEsYi5wYXRoKCksYi5zZWFyY2goKSl9fWIud2hlbihjLGgpfWVsc2UgYS5zdGF0ZShkKGcse3BhcmVudDpudWxsLG5hbWU6XCJyb3V0ZTpcIitlbmNvZGVVUklDb21wb25lbnQoYyksdXJsOmMsb25FbnRlcjplLG9uRXhpdDpmfSkpO3JldHVybiBpLnB1c2goZyksdGhpc31mdW5jdGlvbiBoKGEsYixkKXtmdW5jdGlvbiBlKGEpe3JldHVyblwiXCIhPT1hLm5hbWU/YTpjfXZhciBmPXtyb3V0ZXM6aSxwYXJhbXM6ZCxjdXJyZW50OmN9O3JldHVybiBiLiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsZnVuY3Rpb24oYSxjLGQsZil7Yi4kYnJvYWRjYXN0KFwiJHJvdXRlQ2hhbmdlU3RhcnRcIixlKGMpLGUoZikpfSksYi4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsZnVuY3Rpb24oYSxjLGQsZyl7Zi5jdXJyZW50PWUoYyksYi4kYnJvYWRjYXN0KFwiJHJvdXRlQ2hhbmdlU3VjY2Vzc1wiLGUoYyksZShnKSksSihkLGYucGFyYW1zKX0pLGIuJG9uKFwiJHN0YXRlQ2hhbmdlRXJyb3JcIixmdW5jdGlvbihhLGMsZCxmLGcsaCl7Yi4kYnJvYWRjYXN0KFwiJHJvdXRlQ2hhbmdlRXJyb3JcIixlKGMpLGUoZiksaCl9KSxmfXZhciBpPVtdO2UuJGluamVjdD1bXCIkJHN0YXRlXCJdLHRoaXMud2hlbj1nLHRoaXMuJGdldD1oLGguJGluamVjdD1bXCIkc3RhdGVcIixcIiRyb290U2NvcGVcIixcIiRyb3V0ZVBhcmFtc1wiXX12YXIgQz1iLmlzRGVmaW5lZCxEPWIuaXNGdW5jdGlvbixFPWIuaXNTdHJpbmcsRj1iLmlzT2JqZWN0LEc9Yi5pc0FycmF5LEg9Yi5mb3JFYWNoLEk9Yi5leHRlbmQsSj1iLmNvcHk7Yi5tb2R1bGUoXCJ1aS5yb3V0ZXIudXRpbFwiLFtcIm5nXCJdKSxiLm1vZHVsZShcInVpLnJvdXRlci5yb3V0ZXJcIixbXCJ1aS5yb3V0ZXIudXRpbFwiXSksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIixbXCJ1aS5yb3V0ZXIucm91dGVyXCIsXCJ1aS5yb3V0ZXIudXRpbFwiXSksYi5tb2R1bGUoXCJ1aS5yb3V0ZXJcIixbXCJ1aS5yb3V0ZXIuc3RhdGVcIl0pLGIubW9kdWxlKFwidWkucm91dGVyLmNvbXBhdFwiLFtcInVpLnJvdXRlclwiXSksbC4kaW5qZWN0PVtcIiRxXCIsXCIkaW5qZWN0b3JcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIudXRpbFwiKS5zZXJ2aWNlKFwiJHJlc29sdmVcIixsKSxtLiRpbmplY3Q9W1wiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkaW5qZWN0b3JcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIudXRpbFwiKS5zZXJ2aWNlKFwiJHRlbXBsYXRlRmFjdG9yeVwiLG0pLG4ucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IG4odGhpcy5zb3VyY2VQYXRoK2ErdGhpcy5zb3VyY2VTZWFyY2gpfSxuLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZX0sbi5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVnZXhwLmV4ZWMoYSk7aWYoIWMpcmV0dXJuIG51bGw7dmFyIGQsZT10aGlzLnBhcmFtcyxmPWUubGVuZ3RoLGc9dGhpcy5zZWdtZW50cy5sZW5ndGgtMSxoPXt9O2lmKGchPT1jLmxlbmd0aC0xKXRocm93IG5ldyBFcnJvcihcIlVuYmFsYW5jZWQgY2FwdHVyZSBncm91cCBpbiByb3V0ZSAnXCIrdGhpcy5zb3VyY2UrXCInXCIpO2ZvcihkPTA7Zz5kO2QrKyloW2VbZF1dPWNbZCsxXTtmb3IoO2Y+ZDtkKyspaFtlW2RdXT1iW2VbZF1dO3JldHVybiBofSxuLnByb3RvdHlwZS5wYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyYW1zfSxuLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZWdtZW50cyxjPXRoaXMucGFyYW1zO2lmKCFhKXJldHVybiBiLmpvaW4oXCJcIik7dmFyIGQsZSxmLGc9Yi5sZW5ndGgtMSxoPWMubGVuZ3RoLGk9YlswXTtmb3IoZD0wO2c+ZDtkKyspZj1hW2NbZF1dLG51bGwhPWYmJihpKz1lbmNvZGVVUklDb21wb25lbnQoZikpLGkrPWJbZCsxXTtmb3IoO2g+ZDtkKyspZj1hW2NbZF1dLG51bGwhPWYmJihpKz0oZT9cIiZcIjpcIj9cIikrY1tkXStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoZiksZT0hMCk7cmV0dXJuIGl9LGIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIikucHJvdmlkZXIoXCIkdXJsTWF0Y2hlckZhY3RvcnlcIixvKSxwLiRpbmplY3Q9W1wiJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXJcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIucm91dGVyXCIpLnByb3ZpZGVyKFwiJHVybFJvdXRlclwiLHApLHEuJGluamVjdD1bXCIkdXJsUm91dGVyUHJvdmlkZXJcIixcIiR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyXCIsXCIkbG9jYXRpb25Qcm92aWRlclwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS52YWx1ZShcIiRzdGF0ZVBhcmFtc1wiLHt9KS5wcm92aWRlcihcIiRzdGF0ZVwiLHEpLHIuJGluamVjdD1bXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5wcm92aWRlcihcIiR2aWV3XCIsciksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikucHJvdmlkZXIoXCIkdWlWaWV3U2Nyb2xsXCIscyksdC4kaW5qZWN0PVtcIiRzdGF0ZVwiLFwiJGluamVjdG9yXCIsXCIkdWlWaWV3U2Nyb2xsXCJdLHUuJGluamVjdD1bXCIkY29tcGlsZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRzdGF0ZVwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVZpZXdcIix0KSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVZpZXdcIix1KSx4LiRpbmplY3Q9W1wiJHN0YXRlXCIsXCIkdGltZW91dFwiXSx5LiRpbmplY3Q9W1wiJHN0YXRlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRpbnRlcnBvbGF0ZVwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVNyZWZcIix4KS5kaXJlY3RpdmUoXCJ1aVNyZWZBY3RpdmVcIix5KSx6LiRpbmplY3Q9W1wiJHN0YXRlXCJdLEEuJGluamVjdD1bXCIkc3RhdGVcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikuZmlsdGVyKFwiaXNTdGF0ZVwiLHopLmZpbHRlcihcImluY2x1ZGVkQnlTdGF0ZVwiLEEpLEIuJGluamVjdD1bXCIkc3RhdGVQcm92aWRlclwiLFwiJHVybFJvdXRlclByb3ZpZGVyXCJdLGIubW9kdWxlKFwidWkucm91dGVyLmNvbXBhdFwiKS5wcm92aWRlcihcIiRyb3V0ZVwiLEIpLmRpcmVjdGl2ZShcIm5nVmlld1wiLHQpfSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xufSkuY2FsbChnbG9iYWwsIG1vZHVsZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSkiLCIoZnVuY3Rpb24gKGdsb2JhbCl7XG47X19icm93c2VyaWZ5X3NoaW1fcmVxdWlyZV9fPXJlcXVpcmU7KGZ1bmN0aW9uIGJyb3dzZXJpZnlTaGltKG1vZHVsZSwgZXhwb3J0cywgcmVxdWlyZSwgZGVmaW5lLCBicm93c2VyaWZ5X3NoaW1fX2RlZmluZV9fbW9kdWxlX19leHBvcnRfXykge1xuLypcbiBBbmd1bGFySlMgdjEuMi4yNlxuIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKFcsWCx0KXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gQyhiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF0sYyxhPVwiW1wiKyhiP2IrXCI6XCI6XCJcIikrYStcIl0gaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuMi4yNi9cIisoYj9iK1wiL1wiOlwiXCIpK2E7Zm9yKGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWE9YSsoMT09Yz9cIj9cIjpcIiZcIikrXCJwXCIrKGMtMSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1tjXT9hcmd1bWVudHNbY10udG9TdHJpbmcoKS5yZXBsYWNlKC8gXFx7W1xcc1xcU10qJC8sXCJcIik6XCJ1bmRlZmluZWRcIj09dHlwZW9mIGFyZ3VtZW50c1tjXT9cInVuZGVmaW5lZFwiOlwic3RyaW5nXCIhPXR5cGVvZiBhcmd1bWVudHNbY10/SlNPTi5zdHJpbmdpZnkoYXJndW1lbnRzW2NdKTphcmd1bWVudHNbY10pO3JldHVybiBFcnJvcihhKX19ZnVuY3Rpb24gUGEoYil7aWYobnVsbD09Ynx8R2EoYikpcmV0dXJuITE7XG52YXIgYT1iLmxlbmd0aDtyZXR1cm4gMT09PWIubm9kZVR5cGUmJmE/ITA6dihiKXx8SihiKXx8MD09PWF8fFwibnVtYmVyXCI9PT10eXBlb2YgYSYmMDxhJiZhLTEgaW4gYn1mdW5jdGlvbiByKGIsYSxjKXt2YXIgZDtpZihiKWlmKFAoYikpZm9yKGQgaW4gYilcInByb3RvdHlwZVwiPT1kfHwoXCJsZW5ndGhcIj09ZHx8XCJuYW1lXCI9PWR8fGIuaGFzT3duUHJvcGVydHkmJiFiLmhhc093blByb3BlcnR5KGQpKXx8YS5jYWxsKGMsYltkXSxkKTtlbHNlIGlmKEooYil8fFBhKGIpKWZvcihkPTA7ZDxiLmxlbmd0aDtkKyspYS5jYWxsKGMsYltkXSxkKTtlbHNlIGlmKGIuZm9yRWFjaCYmYi5mb3JFYWNoIT09ciliLmZvckVhY2goYSxjKTtlbHNlIGZvcihkIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShkKSYmYS5jYWxsKGMsYltkXSxkKTtyZXR1cm4gYn1mdW5jdGlvbiBaYihiKXt2YXIgYT1bXSxjO2ZvcihjIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShjKSYmYS5wdXNoKGMpO3JldHVybiBhLnNvcnQoKX1mdW5jdGlvbiBUYyhiLFxuYSxjKXtmb3IodmFyIGQ9WmIoYiksZT0wO2U8ZC5sZW5ndGg7ZSsrKWEuY2FsbChjLGJbZFtlXV0sZFtlXSk7cmV0dXJuIGR9ZnVuY3Rpb24gJGIoYil7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7YihjLGEpfX1mdW5jdGlvbiBoYigpe2Zvcih2YXIgYj1tYS5sZW5ndGgsYTtiOyl7Yi0tO2E9bWFbYl0uY2hhckNvZGVBdCgwKTtpZig1Nz09YSlyZXR1cm4gbWFbYl09XCJBXCIsbWEuam9pbihcIlwiKTtpZig5MD09YSltYVtiXT1cIjBcIjtlbHNlIHJldHVybiBtYVtiXT1TdHJpbmcuZnJvbUNoYXJDb2RlKGErMSksbWEuam9pbihcIlwiKX1tYS51bnNoaWZ0KFwiMFwiKTtyZXR1cm4gbWEuam9pbihcIlwiKX1mdW5jdGlvbiBhYyhiLGEpe2E/Yi4kJGhhc2hLZXk9YTpkZWxldGUgYi4kJGhhc2hLZXl9ZnVuY3Rpb24gRChiKXt2YXIgYT1iLiQkaGFzaEtleTtyKGFyZ3VtZW50cyxmdW5jdGlvbihhKXthIT09YiYmcihhLGZ1bmN0aW9uKGEsYyl7YltjXT1hfSl9KTthYyhiLGEpO3JldHVybiBifWZ1bmN0aW9uIFUoYil7cmV0dXJuIHBhcnNlSW50KGIsXG4xMCl9ZnVuY3Rpb24gYmMoYixhKXtyZXR1cm4gRChuZXcgKEQoZnVuY3Rpb24oKXt9LHtwcm90b3R5cGU6Yn0pKSxhKX1mdW5jdGlvbiBFKCl7fWZ1bmN0aW9uIFFhKGIpe3JldHVybiBifWZ1bmN0aW9uIGJhKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBifX1mdW5jdGlvbiB4KGIpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYn1mdW5jdGlvbiB5KGIpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgYn1mdW5jdGlvbiBUKGIpe3JldHVybiBudWxsIT1iJiZcIm9iamVjdFwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gdihiKXtyZXR1cm5cInN0cmluZ1wiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gaWIoYil7cmV0dXJuXCJudW1iZXJcIj09PXR5cGVvZiBifWZ1bmN0aW9uIHRhKGIpe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09emEuY2FsbChiKX1mdW5jdGlvbiBQKGIpe3JldHVyblwiZnVuY3Rpb25cIj09PXR5cGVvZiBifWZ1bmN0aW9uIGpiKGIpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT16YS5jYWxsKGIpfVxuZnVuY3Rpb24gR2EoYil7cmV0dXJuIGImJmIuZG9jdW1lbnQmJmIubG9jYXRpb24mJmIuYWxlcnQmJmIuc2V0SW50ZXJ2YWx9ZnVuY3Rpb24gVWMoYil7cmV0dXJuISghYnx8IShiLm5vZGVOYW1lfHxiLnByb3AmJmIuYXR0ciYmYi5maW5kKSl9ZnVuY3Rpb24gVmMoYixhLGMpe3ZhciBkPVtdO3IoYixmdW5jdGlvbihiLGYsZyl7ZC5wdXNoKGEuY2FsbChjLGIsZixnKSl9KTtyZXR1cm4gZH1mdW5jdGlvbiBSYShiLGEpe2lmKGIuaW5kZXhPZilyZXR1cm4gYi5pbmRleE9mKGEpO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGE9PT1iW2NdKXJldHVybiBjO3JldHVybi0xfWZ1bmN0aW9uIFNhKGIsYSl7dmFyIGM9UmEoYixhKTswPD1jJiZiLnNwbGljZShjLDEpO3JldHVybiBhfWZ1bmN0aW9uIEhhKGIsYSxjLGQpe2lmKEdhKGIpfHxiJiZiLiRldmFsQXN5bmMmJmIuJHdhdGNoKXRocm93IFRhKFwiY3B3c1wiKTtpZihhKXtpZihiPT09YSl0aHJvdyBUYShcImNwaVwiKTtjPWN8fFtdO1xuZD1kfHxbXTtpZihUKGIpKXt2YXIgZT1SYShjLGIpO2lmKC0xIT09ZSlyZXR1cm4gZFtlXTtjLnB1c2goYik7ZC5wdXNoKGEpfWlmKEooYikpZm9yKHZhciBmPWEubGVuZ3RoPTA7ZjxiLmxlbmd0aDtmKyspZT1IYShiW2ZdLG51bGwsYyxkKSxUKGJbZl0pJiYoYy5wdXNoKGJbZl0pLGQucHVzaChlKSksYS5wdXNoKGUpO2Vsc2V7dmFyIGc9YS4kJGhhc2hLZXk7SihhKT9hLmxlbmd0aD0wOnIoYSxmdW5jdGlvbihiLGMpe2RlbGV0ZSBhW2NdfSk7Zm9yKGYgaW4gYillPUhhKGJbZl0sbnVsbCxjLGQpLFQoYltmXSkmJihjLnB1c2goYltmXSksZC5wdXNoKGUpKSxhW2ZdPWU7YWMoYSxnKX19ZWxzZSBpZihhPWIpSihiKT9hPUhhKGIsW10sYyxkKTp0YShiKT9hPW5ldyBEYXRlKGIuZ2V0VGltZSgpKTpqYihiKT8oYT1SZWdFeHAoYi5zb3VyY2UsYi50b1N0cmluZygpLm1hdGNoKC9bXlxcL10qJC8pWzBdKSxhLmxhc3RJbmRleD1iLmxhc3RJbmRleCk6VChiKSYmKGE9SGEoYix7fSxjLGQpKTtcbnJldHVybiBhfWZ1bmN0aW9uIGhhKGIsYSl7aWYoSihiKSl7YT1hfHxbXTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylhW2NdPWJbY119ZWxzZSBpZihUKGIpKWZvcihjIGluIGE9YXx8e30sYikha2IuY2FsbChiLGMpfHxcIiRcIj09PWMuY2hhckF0KDApJiZcIiRcIj09PWMuY2hhckF0KDEpfHwoYVtjXT1iW2NdKTtyZXR1cm4gYXx8Yn1mdW5jdGlvbiBBYShiLGEpe2lmKGI9PT1hKXJldHVybiEwO2lmKG51bGw9PT1ifHxudWxsPT09YSlyZXR1cm4hMTtpZihiIT09YiYmYSE9PWEpcmV0dXJuITA7dmFyIGM9dHlwZW9mIGIsZDtpZihjPT10eXBlb2YgYSYmXCJvYmplY3RcIj09YylpZihKKGIpKXtpZighSihhKSlyZXR1cm4hMTtpZigoYz1iLmxlbmd0aCk9PWEubGVuZ3RoKXtmb3IoZD0wO2Q8YztkKyspaWYoIUFhKGJbZF0sYVtkXSkpcmV0dXJuITE7cmV0dXJuITB9fWVsc2V7aWYodGEoYikpcmV0dXJuIHRhKGEpP2lzTmFOKGIuZ2V0VGltZSgpKSYmaXNOYU4oYS5nZXRUaW1lKCkpfHxiLmdldFRpbWUoKT09PVxuYS5nZXRUaW1lKCk6ITE7aWYoamIoYikmJmpiKGEpKXJldHVybiBiLnRvU3RyaW5nKCk9PWEudG9TdHJpbmcoKTtpZihiJiZiLiRldmFsQXN5bmMmJmIuJHdhdGNofHxhJiZhLiRldmFsQXN5bmMmJmEuJHdhdGNofHxHYShiKXx8R2EoYSl8fEooYSkpcmV0dXJuITE7Yz17fTtmb3IoZCBpbiBiKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJiFQKGJbZF0pKXtpZighQWEoYltkXSxhW2RdKSlyZXR1cm4hMTtjW2RdPSEwfWZvcihkIGluIGEpaWYoIWMuaGFzT3duUHJvcGVydHkoZCkmJlwiJFwiIT09ZC5jaGFyQXQoMCkmJmFbZF0hPT10JiYhUChhW2RdKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBCYihiLGEpe3ZhciBjPTI8YXJndW1lbnRzLmxlbmd0aD9CYS5jYWxsKGFyZ3VtZW50cywyKTpbXTtyZXR1cm4hUChhKXx8YSBpbnN0YW5jZW9mIFJlZ0V4cD9hOmMubGVuZ3RoP2Z1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/YS5hcHBseShiLGMuY29uY2F0KEJhLmNhbGwoYXJndW1lbnRzLFxuMCkpKTphLmFwcGx5KGIsYyl9OmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/YS5hcHBseShiLGFyZ3VtZW50cyk6YS5jYWxsKGIpfX1mdW5jdGlvbiBXYyhiLGEpe3ZhciBjPWE7XCJzdHJpbmdcIj09PXR5cGVvZiBiJiZcIiRcIj09PWIuY2hhckF0KDApP2M9dDpHYShhKT9jPVwiJFdJTkRPV1wiOmEmJlg9PT1hP2M9XCIkRE9DVU1FTlRcIjphJiYoYS4kZXZhbEFzeW5jJiZhLiR3YXRjaCkmJihjPVwiJFNDT1BFXCIpO3JldHVybiBjfWZ1bmN0aW9uIG5hKGIsYSl7cmV0dXJuXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBiP3Q6SlNPTi5zdHJpbmdpZnkoYixXYyxhP1wiICBcIjpudWxsKX1mdW5jdGlvbiBjYyhiKXtyZXR1cm4gdihiKT9KU09OLnBhcnNlKGIpOmJ9ZnVuY3Rpb24gVWEoYil7XCJmdW5jdGlvblwiPT09dHlwZW9mIGI/Yj0hMDpiJiYwIT09Yi5sZW5ndGg/KGI9SyhcIlwiK2IpLGI9IShcImZcIj09Ynx8XCIwXCI9PWJ8fFwiZmFsc2VcIj09Ynx8XCJub1wiPT1ifHxcIm5cIj09Ynx8XCJbXVwiPT1iKSk6Yj0hMTtcbnJldHVybiBifWZ1bmN0aW9uIGlhKGIpe2I9dyhiKS5jbG9uZSgpO3RyeXtiLmVtcHR5KCl9Y2F0Y2goYSl7fXZhciBjPXcoXCI8ZGl2PlwiKS5hcHBlbmQoYikuaHRtbCgpO3RyeXtyZXR1cm4gMz09PWJbMF0ubm9kZVR5cGU/SyhjKTpjLm1hdGNoKC9eKDxbXj5dKz4pLylbMV0ucmVwbGFjZSgvXjwoW1xcd1xcLV0rKS8sZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxcIitLKGIpfSl9Y2F0Y2goZCl7cmV0dXJuIEsoYyl9fWZ1bmN0aW9uIGRjKGIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfWNhdGNoKGEpe319ZnVuY3Rpb24gZWMoYil7dmFyIGE9e30sYyxkO3IoKGJ8fFwiXCIpLnNwbGl0KFwiJlwiKSxmdW5jdGlvbihiKXtiJiYoYz1iLnJlcGxhY2UoL1xcKy9nLFwiJTIwXCIpLnNwbGl0KFwiPVwiKSxkPWRjKGNbMF0pLHkoZCkmJihiPXkoY1sxXSk/ZGMoY1sxXSk6ITAsa2IuY2FsbChhLGQpP0ooYVtkXSk/YVtkXS5wdXNoKGIpOmFbZF09W2FbZF0sYl06YVtkXT1iKSl9KTtyZXR1cm4gYX1mdW5jdGlvbiBDYihiKXt2YXIgYT1cbltdO3IoYixmdW5jdGlvbihiLGQpe0ooYik/cihiLGZ1bmN0aW9uKGIpe2EucHVzaChDYShkLCEwKSsoITA9PT1iP1wiXCI6XCI9XCIrQ2EoYiwhMCkpKX0pOmEucHVzaChDYShkLCEwKSsoITA9PT1iP1wiXCI6XCI9XCIrQ2EoYiwhMCkpKX0pO3JldHVybiBhLmxlbmd0aD9hLmpvaW4oXCImXCIpOlwiXCJ9ZnVuY3Rpb24gbGIoYil7cmV0dXJuIENhKGIsITApLnJlcGxhY2UoLyUyNi9naSxcIiZcIikucmVwbGFjZSgvJTNEL2dpLFwiPVwiKS5yZXBsYWNlKC8lMkIvZ2ksXCIrXCIpfWZ1bmN0aW9uIENhKGIsYSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChiKS5yZXBsYWNlKC8lNDAvZ2ksXCJAXCIpLnJlcGxhY2UoLyUzQS9naSxcIjpcIikucmVwbGFjZSgvJTI0L2csXCIkXCIpLnJlcGxhY2UoLyUyQy9naSxcIixcIikucmVwbGFjZSgvJTIwL2csYT9cIiUyMFwiOlwiK1wiKX1mdW5jdGlvbiBYYyhiLGEpe2Z1bmN0aW9uIGMoYSl7YSYmZC5wdXNoKGEpfXZhciBkPVtiXSxlLGYsZz1bXCJuZzphcHBcIixcIm5nLWFwcFwiLFwieC1uZy1hcHBcIixcblwiZGF0YS1uZy1hcHBcIl0saz0vXFxzbmdbOlxcLV1hcHAoOlxccyooW1xcd1xcZF9dKyk7Pyk/XFxzLztyKGcsZnVuY3Rpb24oYSl7Z1thXT0hMDtjKFguZ2V0RWxlbWVudEJ5SWQoYSkpO2E9YS5yZXBsYWNlKFwiOlwiLFwiXFxcXDpcIik7Yi5xdWVyeVNlbGVjdG9yQWxsJiYocihiLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIrYSksYykscihiLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIrYStcIlxcXFw6XCIpLGMpLHIoYi5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiK2ErXCJdXCIpLGMpKX0pO3IoZCxmdW5jdGlvbihhKXtpZighZSl7dmFyIGI9ay5leGVjKFwiIFwiK2EuY2xhc3NOYW1lK1wiIFwiKTtiPyhlPWEsZj0oYlsyXXx8XCJcIikucmVwbGFjZSgvXFxzKy9nLFwiLFwiKSk6cihhLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYil7IWUmJmdbYi5uYW1lXSYmKGU9YSxmPWIudmFsdWUpfSl9fSk7ZSYmYShlLGY/W2ZdOltdKX1mdW5jdGlvbiBmYyhiLGEpe3ZhciBjPWZ1bmN0aW9uKCl7Yj13KGIpO2lmKGIuaW5qZWN0b3IoKSl7dmFyIGM9YlswXT09PVg/XG5cImRvY3VtZW50XCI6aWEoYik7dGhyb3cgVGEoXCJidHN0cnBkXCIsYy5yZXBsYWNlKC88LyxcIiZsdDtcIikucmVwbGFjZSgvPi8sXCImZ3Q7XCIpKTt9YT1hfHxbXTthLnVuc2hpZnQoW1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXthLnZhbHVlKFwiJHJvb3RFbGVtZW50XCIsYil9XSk7YS51bnNoaWZ0KFwibmdcIik7Yz1nYyhhKTtjLmludm9rZShbXCIkcm9vdFNjb3BlXCIsXCIkcm9vdEVsZW1lbnRcIixcIiRjb21waWxlXCIsXCIkaW5qZWN0b3JcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxiLGMsZCxlKXthLiRhcHBseShmdW5jdGlvbigpe2IuZGF0YShcIiRpbmplY3RvclwiLGQpO2MoYikoYSl9KX1dKTtyZXR1cm4gY30sZD0vXk5HX0RFRkVSX0JPT1RTVFJBUCEvO2lmKFcmJiFkLnRlc3QoVy5uYW1lKSlyZXR1cm4gYygpO1cubmFtZT1XLm5hbWUucmVwbGFjZShkLFwiXCIpO1ZhLnJlc3VtZUJvb3RzdHJhcD1mdW5jdGlvbihiKXtyKGIsZnVuY3Rpb24oYil7YS5wdXNoKGIpfSk7YygpfX1mdW5jdGlvbiBtYihiLGEpe2E9XG5hfHxcIl9cIjtyZXR1cm4gYi5yZXBsYWNlKFljLGZ1bmN0aW9uKGIsZCl7cmV0dXJuKGQ/YTpcIlwiKStiLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBEYihiLGEsYyl7aWYoIWIpdGhyb3cgVGEoXCJhcmVxXCIsYXx8XCI/XCIsY3x8XCJyZXF1aXJlZFwiKTtyZXR1cm4gYn1mdW5jdGlvbiBXYShiLGEsYyl7YyYmSihiKSYmKGI9YltiLmxlbmd0aC0xXSk7RGIoUChiKSxhLFwibm90IGEgZnVuY3Rpb24sIGdvdCBcIisoYiYmXCJvYmplY3RcIj09PXR5cGVvZiBiP2IuY29uc3RydWN0b3IubmFtZXx8XCJPYmplY3RcIjp0eXBlb2YgYikpO3JldHVybiBifWZ1bmN0aW9uIERhKGIsYSl7aWYoXCJoYXNPd25Qcm9wZXJ0eVwiPT09Yil0aHJvdyBUYShcImJhZG5hbWVcIixhKTt9ZnVuY3Rpb24gaGMoYixhLGMpe2lmKCFhKXJldHVybiBiO2E9YS5zcGxpdChcIi5cIik7Zm9yKHZhciBkLGU9YixmPWEubGVuZ3RoLGc9MDtnPGY7ZysrKWQ9YVtnXSxiJiYoYj0oZT1iKVtkXSk7cmV0dXJuIWMmJlAoYik/QmIoZSxiKTpifWZ1bmN0aW9uIEViKGIpe3ZhciBhPVxuYlswXTtiPWJbYi5sZW5ndGgtMV07aWYoYT09PWIpcmV0dXJuIHcoYSk7dmFyIGM9W2FdO2Rve2E9YS5uZXh0U2libGluZztpZighYSlicmVhaztjLnB1c2goYSl9d2hpbGUoYSE9PWIpO3JldHVybiB3KGMpfWZ1bmN0aW9uIFpjKGIpe3ZhciBhPUMoXCIkaW5qZWN0b3JcIiksYz1DKFwibmdcIik7Yj1iLmFuZ3VsYXJ8fChiLmFuZ3VsYXI9e30pO2IuJCRtaW5FcnI9Yi4kJG1pbkVycnx8QztyZXR1cm4gYi5tb2R1bGV8fChiLm1vZHVsZT1mdW5jdGlvbigpe3ZhciBiPXt9O3JldHVybiBmdW5jdGlvbihlLGYsZyl7aWYoXCJoYXNPd25Qcm9wZXJ0eVwiPT09ZSl0aHJvdyBjKFwiYmFkbmFtZVwiLFwibW9kdWxlXCIpO2YmJmIuaGFzT3duUHJvcGVydHkoZSkmJihiW2VdPW51bGwpO3JldHVybiBiW2VdfHwoYltlXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYSxkLGUpe3JldHVybiBmdW5jdGlvbigpe2NbZXx8XCJwdXNoXCJdKFthLGQsYXJndW1lbnRzXSk7cmV0dXJuIG59fWlmKCFmKXRocm93IGEoXCJub21vZFwiLFxuZSk7dmFyIGM9W10sZD1bXSxsPWIoXCIkaW5qZWN0b3JcIixcImludm9rZVwiKSxuPXtfaW52b2tlUXVldWU6YyxfcnVuQmxvY2tzOmQscmVxdWlyZXM6ZixuYW1lOmUscHJvdmlkZXI6YihcIiRwcm92aWRlXCIsXCJwcm92aWRlclwiKSxmYWN0b3J5OmIoXCIkcHJvdmlkZVwiLFwiZmFjdG9yeVwiKSxzZXJ2aWNlOmIoXCIkcHJvdmlkZVwiLFwic2VydmljZVwiKSx2YWx1ZTpiKFwiJHByb3ZpZGVcIixcInZhbHVlXCIpLGNvbnN0YW50OmIoXCIkcHJvdmlkZVwiLFwiY29uc3RhbnRcIixcInVuc2hpZnRcIiksYW5pbWF0aW9uOmIoXCIkYW5pbWF0ZVByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxmaWx0ZXI6YihcIiRmaWx0ZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksY29udHJvbGxlcjpiKFwiJGNvbnRyb2xsZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZGlyZWN0aXZlOmIoXCIkY29tcGlsZVByb3ZpZGVyXCIsXCJkaXJlY3RpdmVcIiksY29uZmlnOmwscnVuOmZ1bmN0aW9uKGEpe2QucHVzaChhKTtyZXR1cm4gdGhpc319O2cmJmwoZyk7cmV0dXJuIG59KCkpfX0oKSl9XG5mdW5jdGlvbiAkYyhiKXtEKGIse2Jvb3RzdHJhcDpmYyxjb3B5OkhhLGV4dGVuZDpELGVxdWFsczpBYSxlbGVtZW50OncsZm9yRWFjaDpyLGluamVjdG9yOmdjLG5vb3A6RSxiaW5kOkJiLHRvSnNvbjpuYSxmcm9tSnNvbjpjYyxpZGVudGl0eTpRYSxpc1VuZGVmaW5lZDp4LGlzRGVmaW5lZDp5LGlzU3RyaW5nOnYsaXNGdW5jdGlvbjpQLGlzT2JqZWN0OlQsaXNOdW1iZXI6aWIsaXNFbGVtZW50OlVjLGlzQXJyYXk6Six2ZXJzaW9uOmFkLGlzRGF0ZTp0YSxsb3dlcmNhc2U6Syx1cHBlcmNhc2U6SWEsY2FsbGJhY2tzOntjb3VudGVyOjB9LCQkbWluRXJyOkMsJCRjc3A6WGF9KTtZYT1aYyhXKTt0cnl7WWEoXCJuZ0xvY2FsZVwiKX1jYXRjaChhKXtZYShcIm5nTG9jYWxlXCIsW10pLnByb3ZpZGVyKFwiJGxvY2FsZVwiLGJkKX1ZYShcIm5nXCIsW1wibmdMb2NhbGVcIl0sW1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXthLnByb3ZpZGVyKHskJHNhbml0aXplVXJpOmNkfSk7YS5wcm92aWRlcihcIiRjb21waWxlXCIsXG5pYykuZGlyZWN0aXZlKHthOmRkLGlucHV0OmpjLHRleHRhcmVhOmpjLGZvcm06ZWQsc2NyaXB0OmZkLHNlbGVjdDpnZCxzdHlsZTpoZCxvcHRpb246aWQsbmdCaW5kOmpkLG5nQmluZEh0bWw6a2QsbmdCaW5kVGVtcGxhdGU6bGQsbmdDbGFzczptZCxuZ0NsYXNzRXZlbjpuZCxuZ0NsYXNzT2RkOm9kLG5nQ2xvYWs6cGQsbmdDb250cm9sbGVyOnFkLG5nRm9ybTpyZCxuZ0hpZGU6c2QsbmdJZjp0ZCxuZ0luY2x1ZGU6dWQsbmdJbml0OnZkLG5nTm9uQmluZGFibGU6d2QsbmdQbHVyYWxpemU6eGQsbmdSZXBlYXQ6eWQsbmdTaG93OnpkLG5nU3R5bGU6QWQsbmdTd2l0Y2g6QmQsbmdTd2l0Y2hXaGVuOkNkLG5nU3dpdGNoRGVmYXVsdDpEZCxuZ09wdGlvbnM6RWQsbmdUcmFuc2NsdWRlOkZkLG5nTW9kZWw6R2QsbmdMaXN0OkhkLG5nQ2hhbmdlOklkLHJlcXVpcmVkOmtjLG5nUmVxdWlyZWQ6a2MsbmdWYWx1ZTpKZH0pLmRpcmVjdGl2ZSh7bmdJbmNsdWRlOktkfSkuZGlyZWN0aXZlKEZiKS5kaXJlY3RpdmUobGMpO1xuYS5wcm92aWRlcih7JGFuY2hvclNjcm9sbDpMZCwkYW5pbWF0ZTpNZCwkYnJvd3NlcjpOZCwkY2FjaGVGYWN0b3J5Ok9kLCRjb250cm9sbGVyOlBkLCRkb2N1bWVudDpRZCwkZXhjZXB0aW9uSGFuZGxlcjpSZCwkZmlsdGVyOm1jLCRpbnRlcnBvbGF0ZTpTZCwkaW50ZXJ2YWw6VGQsJGh0dHA6VWQsJGh0dHBCYWNrZW5kOlZkLCRsb2NhdGlvbjpXZCwkbG9nOlhkLCRwYXJzZTpZZCwkcm9vdFNjb3BlOlpkLCRxOiRkLCRzY2U6YWUsJHNjZURlbGVnYXRlOmJlLCRzbmlmZmVyOmNlLCR0ZW1wbGF0ZUNhY2hlOmRlLCR0aW1lb3V0OmVlLCR3aW5kb3c6ZmUsJCRyQUY6Z2UsJCRhc3luY0NhbGxiYWNrOmhlfSl9XSl9ZnVuY3Rpb24gWmEoYil7cmV0dXJuIGIucmVwbGFjZShpZSxmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gZT9kLnRvVXBwZXJDYXNlKCk6ZH0pLnJlcGxhY2UoamUsXCJNb3okMVwiKX1mdW5jdGlvbiBHYihiLGEsYyxkKXtmdW5jdGlvbiBlKGIpe3ZhciBlPWMmJmI/W3RoaXMuZmlsdGVyKGIpXTpcblt0aGlzXSxtPWEsaCxsLG4scCxxLHM7aWYoIWR8fG51bGwhPWIpZm9yKDtlLmxlbmd0aDspZm9yKGg9ZS5zaGlmdCgpLGw9MCxuPWgubGVuZ3RoO2w8bjtsKyspZm9yKHA9dyhoW2xdKSxtP3AudHJpZ2dlckhhbmRsZXIoXCIkZGVzdHJveVwiKTptPSFtLHE9MCxwPShzPXAuY2hpbGRyZW4oKSkubGVuZ3RoO3E8cDtxKyspZS5wdXNoKEVhKHNbcV0pKTtyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIGY9RWEuZm5bYl0sZj1mLiRvcmlnaW5hbHx8ZjtlLiRvcmlnaW5hbD1mO0VhLmZuW2JdPWV9ZnVuY3Rpb24gUyhiKXtpZihiIGluc3RhbmNlb2YgUylyZXR1cm4gYjt2KGIpJiYoYj1hYShiKSk7aWYoISh0aGlzIGluc3RhbmNlb2YgUykpe2lmKHYoYikmJlwiPFwiIT1iLmNoYXJBdCgwKSl0aHJvdyBIYihcIm5vc2VsXCIpO3JldHVybiBuZXcgUyhiKX1pZih2KGIpKXt2YXIgYT1iO2I9WDt2YXIgYztpZihjPWtlLmV4ZWMoYSkpYj1bYi5jcmVhdGVFbGVtZW50KGNbMV0pXTtlbHNle3ZhciBkPVxuYixlO2I9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Yz1bXTtpZihJYi50ZXN0KGEpKXtkPWIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtlPShsZS5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKTtlPWVhW2VdfHxlYS5fZGVmYXVsdDtkLmlubmVySFRNTD1cIjxkaXY+JiMxNjA7PC9kaXY+XCIrZVsxXSthLnJlcGxhY2UobWUsXCI8JDE+PC8kMj5cIikrZVsyXTtkLnJlbW92ZUNoaWxkKGQuZmlyc3RDaGlsZCk7Zm9yKGE9ZVswXTthLS07KWQ9ZC5sYXN0Q2hpbGQ7YT0wO2ZvcihlPWQuY2hpbGROb2Rlcy5sZW5ndGg7YTxlOysrYSljLnB1c2goZC5jaGlsZE5vZGVzW2FdKTtkPWIuZmlyc3RDaGlsZDtkLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBjLnB1c2goZC5jcmVhdGVUZXh0Tm9kZShhKSk7Yi50ZXh0Q29udGVudD1cIlwiO2IuaW5uZXJIVE1MPVwiXCI7Yj1jfUpiKHRoaXMsYik7dyhYLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSkuYXBwZW5kKHRoaXMpfWVsc2UgSmIodGhpcyxcbmIpfWZ1bmN0aW9uIEtiKGIpe3JldHVybiBiLmNsb25lTm9kZSghMCl9ZnVuY3Rpb24gSmEoYil7TGIoYik7dmFyIGE9MDtmb3IoYj1iLmNoaWxkTm9kZXN8fFtdO2E8Yi5sZW5ndGg7YSsrKUphKGJbYV0pfWZ1bmN0aW9uIG5jKGIsYSxjLGQpe2lmKHkoZCkpdGhyb3cgSGIoXCJvZmZhcmdzXCIpO3ZhciBlPW9hKGIsXCJldmVudHNcIik7b2EoYixcImhhbmRsZVwiKSYmKHgoYSk/cihlLGZ1bmN0aW9uKGEsYyl7JGEoYixjLGEpO2RlbGV0ZSBlW2NdfSk6cihhLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXt4KGMpPygkYShiLGEsZVthXSksZGVsZXRlIGVbYV0pOlNhKGVbYV18fFtdLGMpfSkpfWZ1bmN0aW9uIExiKGIsYSl7dmFyIGM9Yi5uZzMzOSxkPWFiW2NdO2QmJihhP2RlbGV0ZSBhYltjXS5kYXRhW2FdOihkLmhhbmRsZSYmKGQuZXZlbnRzLiRkZXN0cm95JiZkLmhhbmRsZSh7fSxcIiRkZXN0cm95XCIpLG5jKGIpKSxkZWxldGUgYWJbY10sYi5uZzMzOT10KSl9ZnVuY3Rpb24gb2EoYixhLGMpe3ZhciBkPVxuYi5uZzMzOSxkPWFiW2R8fC0xXTtpZih5KGMpKWR8fChiLm5nMzM5PWQ9KytuZSxkPWFiW2RdPXt9KSxkW2FdPWM7ZWxzZSByZXR1cm4gZCYmZFthXX1mdW5jdGlvbiBNYihiLGEsYyl7dmFyIGQ9b2EoYixcImRhdGFcIiksZT15KGMpLGY9IWUmJnkoYSksZz1mJiYhVChhKTtkfHxnfHxvYShiLFwiZGF0YVwiLGQ9e30pO2lmKGUpZFthXT1jO2Vsc2UgaWYoZil7aWYoZylyZXR1cm4gZCYmZFthXTtEKGQsYSl9ZWxzZSByZXR1cm4gZH1mdW5jdGlvbiBOYihiLGEpe3JldHVybiBiLmdldEF0dHJpYnV0ZT8tMTwoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKS5pbmRleE9mKFwiIFwiK2ErXCIgXCIpOiExfWZ1bmN0aW9uIG5iKGIsYSl7YSYmYi5zZXRBdHRyaWJ1dGUmJnIoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGFhKChcIiBcIisoYi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXG5cIiBcIikucmVwbGFjZShcIiBcIithYShhKStcIiBcIixcIiBcIikpKX0pfWZ1bmN0aW9uIG9iKGIsYSl7aWYoYSYmYi5zZXRBdHRyaWJ1dGUpe3ZhciBjPShcIiBcIisoYi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXCIgXCIpO3IoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7YT1hYShhKTstMT09PWMuaW5kZXhPZihcIiBcIithK1wiIFwiKSYmKGMrPWErXCIgXCIpfSk7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGFhKGMpKX19ZnVuY3Rpb24gSmIoYixhKXtpZihhKXthPWEubm9kZU5hbWV8fCF5KGEubGVuZ3RoKXx8R2EoYSk/W2FdOmE7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYi5wdXNoKGFbY10pfX1mdW5jdGlvbiBvYyhiLGEpe3JldHVybiBwYihiLFwiJFwiKyhhfHxcIm5nQ29udHJvbGxlclwiKStcIkNvbnRyb2xsZXJcIil9ZnVuY3Rpb24gcGIoYixhLGMpezk9PWIubm9kZVR5cGUmJihiPWIuZG9jdW1lbnRFbGVtZW50KTtmb3IoYT1KKGEpP2E6W2FdO2I7KXtmb3IodmFyIGQ9XG4wLGU9YS5sZW5ndGg7ZDxlO2QrKylpZigoYz13LmRhdGEoYixhW2RdKSkhPT10KXJldHVybiBjO2I9Yi5wYXJlbnROb2RlfHwxMT09PWIubm9kZVR5cGUmJmIuaG9zdH19ZnVuY3Rpb24gcGMoYil7Zm9yKHZhciBhPTAsYz1iLmNoaWxkTm9kZXM7YTxjLmxlbmd0aDthKyspSmEoY1thXSk7Zm9yKDtiLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKX1mdW5jdGlvbiBxYyhiLGEpe3ZhciBjPXFiW2EudG9Mb3dlckNhc2UoKV07cmV0dXJuIGMmJnJjW2Iubm9kZU5hbWVdJiZjfWZ1bmN0aW9uIG9lKGIsYSl7dmFyIGM9ZnVuY3Rpb24oYyxlKXtjLnByZXZlbnREZWZhdWx0fHwoYy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2MucmV0dXJuVmFsdWU9ITF9KTtjLnN0b3BQcm9wYWdhdGlvbnx8KGMuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7Yy5jYW5jZWxCdWJibGU9ITB9KTtjLnRhcmdldHx8KGMudGFyZ2V0PWMuc3JjRWxlbWVudHx8WCk7aWYoeChjLmRlZmF1bHRQcmV2ZW50ZWQpKXt2YXIgZj1cbmMucHJldmVudERlZmF1bHQ7Yy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2MuZGVmYXVsdFByZXZlbnRlZD0hMDtmLmNhbGwoYyl9O2MuZGVmYXVsdFByZXZlbnRlZD0hMX1jLmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBjLmRlZmF1bHRQcmV2ZW50ZWR8fCExPT09Yy5yZXR1cm5WYWx1ZX07dmFyIGc9aGEoYVtlfHxjLnR5cGVdfHxbXSk7cihnLGZ1bmN0aW9uKGEpe2EuY2FsbChiLGMpfSk7OD49UT8oYy5wcmV2ZW50RGVmYXVsdD1udWxsLGMuc3RvcFByb3BhZ2F0aW9uPW51bGwsYy5pc0RlZmF1bHRQcmV2ZW50ZWQ9bnVsbCk6KGRlbGV0ZSBjLnByZXZlbnREZWZhdWx0LGRlbGV0ZSBjLnN0b3BQcm9wYWdhdGlvbixkZWxldGUgYy5pc0RlZmF1bHRQcmV2ZW50ZWQpfTtjLmVsZW09YjtyZXR1cm4gY31mdW5jdGlvbiBLYShiLGEpe3ZhciBjPXR5cGVvZiBiLGQ7XCJmdW5jdGlvblwiPT1jfHxcIm9iamVjdFwiPT1jJiZudWxsIT09Yj9cImZ1bmN0aW9uXCI9PXR5cGVvZihkPVxuYi4kJGhhc2hLZXkpP2Q9Yi4kJGhhc2hLZXkoKTpkPT09dCYmKGQ9Yi4kJGhhc2hLZXk9KGF8fGhiKSgpKTpkPWI7cmV0dXJuIGMrXCI6XCIrZH1mdW5jdGlvbiBiYihiLGEpe2lmKGEpe3ZhciBjPTA7dGhpcy5uZXh0VWlkPWZ1bmN0aW9uKCl7cmV0dXJuKytjfX1yKGIsdGhpcy5wdXQsdGhpcyl9ZnVuY3Rpb24gc2MoYil7dmFyIGEsYztcImZ1bmN0aW9uXCI9PT10eXBlb2YgYj8oYT1iLiRpbmplY3QpfHwoYT1bXSxiLmxlbmd0aCYmKGM9Yi50b1N0cmluZygpLnJlcGxhY2UocGUsXCJcIiksYz1jLm1hdGNoKHFlKSxyKGNbMV0uc3BsaXQocmUpLGZ1bmN0aW9uKGIpe2IucmVwbGFjZShzZSxmdW5jdGlvbihiLGMsZCl7YS5wdXNoKGQpfSl9KSksYi4kaW5qZWN0PWEpOkooYik/KGM9Yi5sZW5ndGgtMSxXYShiW2NdLFwiZm5cIiksYT1iLnNsaWNlKDAsYykpOldhKGIsXCJmblwiLCEwKTtyZXR1cm4gYX1mdW5jdGlvbiBnYyhiKXtmdW5jdGlvbiBhKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2lmKFQoYikpcihiLFxuJGIoYSkpO2Vsc2UgcmV0dXJuIGEoYixjKX19ZnVuY3Rpb24gYyhhLGIpe0RhKGEsXCJzZXJ2aWNlXCIpO2lmKFAoYil8fEooYikpYj1uLmluc3RhbnRpYXRlKGIpO2lmKCFiLiRnZXQpdGhyb3cgY2IoXCJwZ2V0XCIsYSk7cmV0dXJuIGxbYStrXT1ifWZ1bmN0aW9uIGQoYSxiKXtyZXR1cm4gYyhhLHskZ2V0OmJ9KX1mdW5jdGlvbiBlKGEpe3ZhciBiPVtdLGMsZCxmLGs7cihhLGZ1bmN0aW9uKGEpe2lmKCFoLmdldChhKSl7aC5wdXQoYSwhMCk7dHJ5e2lmKHYoYSkpZm9yKGM9WWEoYSksYj1iLmNvbmNhdChlKGMucmVxdWlyZXMpKS5jb25jYXQoYy5fcnVuQmxvY2tzKSxkPWMuX2ludm9rZVF1ZXVlLGY9MCxrPWQubGVuZ3RoO2Y8aztmKyspe3ZhciBnPWRbZl0sbT1uLmdldChnWzBdKTttW2dbMV1dLmFwcGx5KG0sZ1syXSl9ZWxzZSBQKGEpP2IucHVzaChuLmludm9rZShhKSk6SihhKT9iLnB1c2gobi5pbnZva2UoYSkpOldhKGEsXCJtb2R1bGVcIil9Y2F0Y2gobCl7dGhyb3cgSihhKSYmKGE9XG5hW2EubGVuZ3RoLTFdKSxsLm1lc3NhZ2UmJihsLnN0YWNrJiYtMT09bC5zdGFjay5pbmRleE9mKGwubWVzc2FnZSkpJiYobD1sLm1lc3NhZ2UrXCJcXG5cIitsLnN0YWNrKSxjYihcIm1vZHVsZXJyXCIsYSxsLnN0YWNrfHxsLm1lc3NhZ2V8fGwpO319fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIpe2Z1bmN0aW9uIGMoZCl7aWYoYS5oYXNPd25Qcm9wZXJ0eShkKSl7aWYoYVtkXT09PWcpdGhyb3cgY2IoXCJjZGVwXCIsZCtcIiA8LSBcIittLmpvaW4oXCIgPC0gXCIpKTtyZXR1cm4gYVtkXX10cnl7cmV0dXJuIG0udW5zaGlmdChkKSxhW2RdPWcsYVtkXT1iKGQpfWNhdGNoKGUpe3Rocm93IGFbZF09PT1nJiZkZWxldGUgYVtkXSxlO31maW5hbGx5e20uc2hpZnQoKX19ZnVuY3Rpb24gZChhLGIsZSl7dmFyIGY9W10saz1zYyhhKSxnLG0saDttPTA7Zm9yKGc9ay5sZW5ndGg7bTxnO20rKyl7aD1rW21dO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgaCl0aHJvdyBjYihcIml0a25cIixoKTtmLnB1c2goZSYmZS5oYXNPd25Qcm9wZXJ0eShoKT9cbmVbaF06YyhoKSl9SihhKSYmKGE9YVtnXSk7cmV0dXJuIGEuYXBwbHkoYixmKX1yZXR1cm57aW52b2tlOmQsaW5zdGFudGlhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe30sZTtjLnByb3RvdHlwZT0oSihhKT9hW2EubGVuZ3RoLTFdOmEpLnByb3RvdHlwZTtjPW5ldyBjO2U9ZChhLGMsYik7cmV0dXJuIFQoZSl8fFAoZSk/ZTpjfSxnZXQ6Yyxhbm5vdGF0ZTpzYyxoYXM6ZnVuY3Rpb24oYil7cmV0dXJuIGwuaGFzT3duUHJvcGVydHkoYitrKXx8YS5oYXNPd25Qcm9wZXJ0eShiKX19fXZhciBnPXt9LGs9XCJQcm92aWRlclwiLG09W10saD1uZXcgYmIoW10sITApLGw9eyRwcm92aWRlOntwcm92aWRlcjphKGMpLGZhY3Rvcnk6YShkKSxzZXJ2aWNlOmEoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZChhLFtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmluc3RhbnRpYXRlKGIpfV0pfSksdmFsdWU6YShmdW5jdGlvbihhLGIpe3JldHVybiBkKGEsYmEoYikpfSksY29uc3RhbnQ6YShmdW5jdGlvbihhLFxuYil7RGEoYSxcImNvbnN0YW50XCIpO2xbYV09YjtwW2FdPWJ9KSxkZWNvcmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmdldChhK2spLGQ9Yy4kZ2V0O2MuJGdldD1mdW5jdGlvbigpe3ZhciBhPXEuaW52b2tlKGQsYyk7cmV0dXJuIHEuaW52b2tlKGIsbnVsbCx7JGRlbGVnYXRlOmF9KX19fX0sbj1sLiRpbmplY3Rvcj1mKGwsZnVuY3Rpb24oKXt0aHJvdyBjYihcInVucHJcIixtLmpvaW4oXCIgPC0gXCIpKTt9KSxwPXt9LHE9cC4kaW5qZWN0b3I9ZihwLGZ1bmN0aW9uKGEpe2E9bi5nZXQoYStrKTtyZXR1cm4gcS5pbnZva2UoYS4kZ2V0LGEpfSk7cihlKGIpLGZ1bmN0aW9uKGEpe3EuaW52b2tlKGF8fEUpfSk7cmV0dXJuIHF9ZnVuY3Rpb24gTGQoKXt2YXIgYj0hMDt0aGlzLmRpc2FibGVBdXRvU2Nyb2xsaW5nPWZ1bmN0aW9uKCl7Yj0hMX07dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRsb2NhdGlvblwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPW51bGw7XG5yKGEsZnVuY3Rpb24oYSl7Ynx8XCJhXCIhPT1LKGEubm9kZU5hbWUpfHwoYj1hKX0pO3JldHVybiBifWZ1bmN0aW9uIGYoKXt2YXIgYj1jLmhhc2goKSxkO2I/KGQ9Zy5nZXRFbGVtZW50QnlJZChiKSk/ZC5zY3JvbGxJbnRvVmlldygpOihkPWUoZy5nZXRFbGVtZW50c0J5TmFtZShiKSkpP2Quc2Nyb2xsSW50b1ZpZXcoKTpcInRvcFwiPT09YiYmYS5zY3JvbGxUbygwLDApOmEuc2Nyb2xsVG8oMCwwKX12YXIgZz1hLmRvY3VtZW50O2ImJmQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGMuaGFzaCgpfSxmdW5jdGlvbigpe2QuJGV2YWxBc3luYyhmKX0pO3JldHVybiBmfV19ZnVuY3Rpb24gaGUoKXt0aGlzLiRnZXQ9W1wiJCRyQUZcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gYi5zdXBwb3J0ZWQ/ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9OmZ1bmN0aW9uKGIpe3JldHVybiBhKGIsMCwhMSl9fV19ZnVuY3Rpb24gdGUoYixhLGMsZCl7ZnVuY3Rpb24gZShhKXt0cnl7YS5hcHBseShudWxsLFxuQmEuY2FsbChhcmd1bWVudHMsMSkpfWZpbmFsbHl7aWYocy0tLDA9PT1zKWZvcig7Ri5sZW5ndGg7KXRyeXtGLnBvcCgpKCl9Y2F0Y2goYil7Yy5lcnJvcihiKX19fWZ1bmN0aW9uIGYoYSxiKXsoZnVuY3Rpb24gZmEoKXtyKHUsZnVuY3Rpb24oYSl7YSgpfSk7QT1iKGZhLGEpfSkoKX1mdW5jdGlvbiBnKCl7ej1udWxsO04hPWsudXJsKCkmJihOPWsudXJsKCkscihjYSxmdW5jdGlvbihhKXthKGsudXJsKCkpfSkpfXZhciBrPXRoaXMsbT1hWzBdLGg9Yi5sb2NhdGlvbixsPWIuaGlzdG9yeSxuPWIuc2V0VGltZW91dCxwPWIuY2xlYXJUaW1lb3V0LHE9e307ay5pc01vY2s9ITE7dmFyIHM9MCxGPVtdO2suJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdD1lO2suJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudD1mdW5jdGlvbigpe3MrK307ay5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzPWZ1bmN0aW9uKGEpe3IodSxmdW5jdGlvbihhKXthKCl9KTswPT09cz9hKCk6Ri5wdXNoKGEpfTtcbnZhciB1PVtdLEE7ay5hZGRQb2xsRm49ZnVuY3Rpb24oYSl7eChBKSYmZigxMDAsbik7dS5wdXNoKGEpO3JldHVybiBhfTt2YXIgTj1oLmhyZWYsUj1hLmZpbmQoXCJiYXNlXCIpLHo9bnVsbDtrLnVybD1mdW5jdGlvbihhLGMpe2ghPT1iLmxvY2F0aW9uJiYoaD1iLmxvY2F0aW9uKTtsIT09Yi5oaXN0b3J5JiYobD1iLmhpc3RvcnkpO2lmKGEpe2lmKE4hPWEpcmV0dXJuIE49YSxkLmhpc3Rvcnk/Yz9sLnJlcGxhY2VTdGF0ZShudWxsLFwiXCIsYSk6KGwucHVzaFN0YXRlKG51bGwsXCJcIixhKSxSLmF0dHIoXCJocmVmXCIsUi5hdHRyKFwiaHJlZlwiKSkpOih6PWEsYz9oLnJlcGxhY2UoYSk6aC5ocmVmPWEpLGt9ZWxzZSByZXR1cm4genx8aC5ocmVmLnJlcGxhY2UoLyUyNy9nLFwiJ1wiKX07dmFyIGNhPVtdLEw9ITE7ay5vblVybENoYW5nZT1mdW5jdGlvbihhKXtpZighTCl7aWYoZC5oaXN0b3J5KXcoYikub24oXCJwb3BzdGF0ZVwiLGcpO2lmKGQuaGFzaGNoYW5nZSl3KGIpLm9uKFwiaGFzaGNoYW5nZVwiLGcpO1xuZWxzZSBrLmFkZFBvbGxGbihnKTtMPSEwfWNhLnB1c2goYSk7cmV0dXJuIGF9O2suJCRjaGVja1VybENoYW5nZT1nO2suYmFzZUhyZWY9ZnVuY3Rpb24oKXt2YXIgYT1SLmF0dHIoXCJocmVmXCIpO3JldHVybiBhP2EucmVwbGFjZSgvXihodHRwcz9cXDopP1xcL1xcL1teXFwvXSovLFwiXCIpOlwiXCJ9O3ZhciBPPXt9LGRhPVwiXCIsQj1rLmJhc2VIcmVmKCk7ay5jb29raWVzPWZ1bmN0aW9uKGEsYil7dmFyIGQsZSxmLGs7aWYoYSliPT09dD9tLmNvb2tpZT1lc2NhcGUoYSkrXCI9O3BhdGg9XCIrQitcIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UXCI6dihiKSYmKGQ9KG0uY29va2llPWVzY2FwZShhKStcIj1cIitlc2NhcGUoYikrXCI7cGF0aD1cIitCKS5sZW5ndGgrMSw0MDk2PGQmJmMud2FybihcIkNvb2tpZSAnXCIrYStcIicgcG9zc2libHkgbm90IHNldCBvciBvdmVyZmxvd2VkIGJlY2F1c2UgaXQgd2FzIHRvbyBsYXJnZSAoXCIrZCtcIiA+IDQwOTYgYnl0ZXMpIVwiKSk7ZWxzZXtpZihtLmNvb2tpZSE9PVxuZGEpZm9yKGRhPW0uY29va2llLGQ9ZGEuc3BsaXQoXCI7IFwiKSxPPXt9LGY9MDtmPGQubGVuZ3RoO2YrKyllPWRbZl0saz1lLmluZGV4T2YoXCI9XCIpLDA8ayYmKGE9dW5lc2NhcGUoZS5zdWJzdHJpbmcoMCxrKSksT1thXT09PXQmJihPW2FdPXVuZXNjYXBlKGUuc3Vic3RyaW5nKGsrMSkpKSk7cmV0dXJuIE99fTtrLmRlZmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM7cysrO2M9bihmdW5jdGlvbigpe2RlbGV0ZSBxW2NdO2UoYSl9LGJ8fDApO3FbY109ITA7cmV0dXJuIGN9O2suZGVmZXIuY2FuY2VsPWZ1bmN0aW9uKGEpe3JldHVybiBxW2FdPyhkZWxldGUgcVthXSxwKGEpLGUoRSksITApOiExfX1mdW5jdGlvbiBOZCgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9nXCIsXCIkc25pZmZlclwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhLGMsZCl7cmV0dXJuIG5ldyB0ZShiLGQsYSxjKX1dfWZ1bmN0aW9uIE9kKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihiLGQpe2Z1bmN0aW9uIGUoYSl7YSE9XG5uJiYocD9wPT1hJiYocD1hLm4pOnA9YSxmKGEubixhLnApLGYoYSxuKSxuPWEsbi5uPW51bGwpfWZ1bmN0aW9uIGYoYSxiKXthIT1iJiYoYSYmKGEucD1iKSxiJiYoYi5uPWEpKX1pZihiIGluIGEpdGhyb3cgQyhcIiRjYWNoZUZhY3RvcnlcIikoXCJpaWRcIixiKTt2YXIgZz0wLGs9RCh7fSxkLHtpZDpifSksbT17fSxoPWQmJmQuY2FwYWNpdHl8fE51bWJlci5NQVhfVkFMVUUsbD17fSxuPW51bGwscD1udWxsO3JldHVybiBhW2JdPXtwdXQ6ZnVuY3Rpb24oYSxiKXtpZihoPE51bWJlci5NQVhfVkFMVUUpe3ZhciBjPWxbYV18fChsW2FdPXtrZXk6YX0pO2UoYyl9aWYoIXgoYikpcmV0dXJuIGEgaW4gbXx8ZysrLG1bYV09YixnPmgmJnRoaXMucmVtb3ZlKHAua2V5KSxifSxnZXQ6ZnVuY3Rpb24oYSl7aWYoaDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1sW2FdO2lmKCFiKXJldHVybjtlKGIpfXJldHVybiBtW2FdfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYoaDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1cbmxbYV07aWYoIWIpcmV0dXJuO2I9PW4mJihuPWIucCk7Yj09cCYmKHA9Yi5uKTtmKGIubixiLnApO2RlbGV0ZSBsW2FdfWRlbGV0ZSBtW2FdO2ctLX0scmVtb3ZlQWxsOmZ1bmN0aW9uKCl7bT17fTtnPTA7bD17fTtuPXA9bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe2w9az1tPW51bGw7ZGVsZXRlIGFbYl19LGluZm86ZnVuY3Rpb24oKXtyZXR1cm4gRCh7fSxrLHtzaXplOmd9KX19fXZhciBhPXt9O2IuaW5mbz1mdW5jdGlvbigpe3ZhciBiPXt9O3IoYSxmdW5jdGlvbihhLGUpe2JbZV09YS5pbmZvKCl9KTtyZXR1cm4gYn07Yi5nZXQ9ZnVuY3Rpb24oYil7cmV0dXJuIGFbYl19O3JldHVybiBifX1mdW5jdGlvbiBkZSgpe3RoaXMuJGdldD1bXCIkY2FjaGVGYWN0b3J5XCIsZnVuY3Rpb24oYil7cmV0dXJuIGIoXCJ0ZW1wbGF0ZXNcIil9XX1mdW5jdGlvbiBpYyhiLGEpe3ZhciBjPXt9LGQ9XCJEaXJlY3RpdmVcIixlPS9eXFxzKmRpcmVjdGl2ZVxcOlxccyooW1xcZFxcd19cXC1dKylcXHMrKC4qKSQvLGY9LygoW1xcZFxcd19cXC1dKykoPzpcXDooW147XSspKT87PykvLFxuZz0vXihvblthLXpdK3xmb3JtYWN0aW9uKSQvO3RoaXMuZGlyZWN0aXZlPWZ1bmN0aW9uIG0oYSxlKXtEYShhLFwiZGlyZWN0aXZlXCIpO3YoYSk/KERiKGUsXCJkaXJlY3RpdmVGYWN0b3J5XCIpLGMuaGFzT3duUHJvcGVydHkoYSl8fChjW2FdPVtdLGIuZmFjdG9yeShhK2QsW1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsZCl7dmFyIGU9W107cihjW2FdLGZ1bmN0aW9uKGMsZil7dHJ5e3ZhciBnPWIuaW52b2tlKGMpO1AoZyk/Zz17Y29tcGlsZTpiYShnKX06IWcuY29tcGlsZSYmZy5saW5rJiYoZy5jb21waWxlPWJhKGcubGluaykpO2cucHJpb3JpdHk9Zy5wcmlvcml0eXx8MDtnLmluZGV4PWY7Zy5uYW1lPWcubmFtZXx8YTtnLnJlcXVpcmU9Zy5yZXF1aXJlfHxnLmNvbnRyb2xsZXImJmcubmFtZTtnLnJlc3RyaWN0PWcucmVzdHJpY3R8fFwiQVwiO2UucHVzaChnKX1jYXRjaChtKXtkKG0pfX0pO3JldHVybiBlfV0pKSxjW2FdLnB1c2goZSkpOnIoYSwkYihtKSk7XG5yZXR1cm4gdGhpc307dGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdChiKSx0aGlzKTphLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KCl9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdChiKSx0aGlzKTphLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCgpfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkaHR0cFwiLFwiJHRlbXBsYXRlQ2FjaGVcIixcIiRwYXJzZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRyb290U2NvcGVcIixcIiRkb2N1bWVudFwiLFwiJHNjZVwiLFwiJGFuaW1hdGVcIixcIiQkc2FuaXRpemVVcmlcIixmdW5jdGlvbihhLGIsbCxuLHAscSxzLEYsdSxBLE4sUil7ZnVuY3Rpb24geihhLGIsYyxkLGUpe2EgaW5zdGFuY2VvZlxud3x8KGE9dyhhKSk7cihhLGZ1bmN0aW9uKGIsYyl7Mz09Yi5ub2RlVHlwZSYmYi5ub2RlVmFsdWUubWF0Y2goL1xcUysvKSYmKGFbY109dyhiKS53cmFwKFwiPHNwYW4+PC9zcGFuPlwiKS5wYXJlbnQoKVswXSl9KTt2YXIgZj1MKGEsYixhLGMsZCxlKTtjYShhLFwibmctc2NvcGVcIik7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe0RiKGIsXCJzY29wZVwiKTt2YXIgZz1jP0xhLmNsb25lLmNhbGwoYSk6YTtyKGQsZnVuY3Rpb24oYSxiKXtnLmRhdGEoXCIkXCIrYitcIkNvbnRyb2xsZXJcIixhKX0pO2Q9MDtmb3IodmFyIG09Zy5sZW5ndGg7ZDxtO2QrKyl7dmFyIGg9Z1tkXS5ub2RlVHlwZTsxIT09aCYmOSE9PWh8fGcuZXEoZCkuZGF0YShcIiRzY29wZVwiLGIpfWMmJmMoZyxiKTtmJiZmKGIsZyxnLGUpO3JldHVybiBnfX1mdW5jdGlvbiBjYShhLGIpe3RyeXthLmFkZENsYXNzKGIpfWNhdGNoKGMpe319ZnVuY3Rpb24gTChhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGMsZCxlKXt2YXIgZixoLGwscSxuLFxucCxzO2Y9Yy5sZW5ndGg7dmFyIE09QXJyYXkoZik7Zm9yKHE9MDtxPGY7cSsrKU1bcV09Y1txXTtwPXE9MDtmb3Iobj1tLmxlbmd0aDtxPG47cCsrKWg9TVtwXSxjPW1bcSsrXSxmPW1bcSsrXSxjPyhjLnNjb3BlPyhsPWEuJG5ldygpLHcuZGF0YShoLFwiJHNjb3BlXCIsbCkpOmw9YSxzPWMudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ/TyhhLGMudHJhbnNjbHVkZSxlKTohYy50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQmJmU/ZTohZSYmYj9PKGEsYik6bnVsbCxjKGYsbCxoLGQscykpOmYmJmYoYSxoLmNoaWxkTm9kZXMsdCxlKX1mb3IodmFyIG09W10saCxsLHEsbixwPTA7cDxhLmxlbmd0aDtwKyspaD1uZXcgT2IsbD1kYShhW3BdLFtdLGgsMD09PXA/ZDp0LGUpLChmPWwubGVuZ3RoP0gobCxhW3BdLGgsYixjLG51bGwsW10sW10sZik6bnVsbCkmJmYuc2NvcGUmJmNhKGguJCRlbGVtZW50LFwibmctc2NvcGVcIiksaD1mJiZmLnRlcm1pbmFsfHwhKHE9YVtwXS5jaGlsZE5vZGVzKXx8IXEubGVuZ3RoP1xubnVsbDpMKHEsZj8oZi50cmFuc2NsdWRlT25UaGlzRWxlbWVudHx8IWYudGVtcGxhdGVPblRoaXNFbGVtZW50KSYmZi50cmFuc2NsdWRlOmIpLG0ucHVzaChmLGgpLG49bnx8Znx8aCxmPW51bGw7cmV0dXJuIG4/ZzpudWxsfWZ1bmN0aW9uIE8oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZil7dmFyIGc9ITE7ZHx8KGQ9YS4kbmV3KCksZz1kLiQkdHJhbnNjbHVkZWQ9ITApO2U9YihkLGUsZixjKTtpZihnKWUub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZC4kZGVzdHJveSgpfSk7cmV0dXJuIGV9fWZ1bmN0aW9uIGRhKGEsYixjLGQsZyl7dmFyIG09Yy4kYXR0cixoO3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6ZmEoYixwYShNYShhKS50b0xvd2VyQ2FzZSgpKSxcIkVcIixkLGcpO2Zvcih2YXIgbCxxLG4scD1hLmF0dHJpYnV0ZXMscz0wLEY9cCYmcC5sZW5ndGg7czxGO3MrKyl7dmFyIEE9ITEsTj0hMTtsPXBbc107aWYoIVF8fDg8PVF8fGwuc3BlY2lmaWVkKXtoPWwubmFtZTtxPVxuYWEobC52YWx1ZSk7bD1wYShoKTtpZihuPVUudGVzdChsKSloPW1iKGwuc3Vic3RyKDYpLFwiLVwiKTt2YXIgdT1sLnJlcGxhY2UoLyhTdGFydHxFbmQpJC8sXCJcIik7bD09PXUrXCJTdGFydFwiJiYoQT1oLE49aC5zdWJzdHIoMCxoLmxlbmd0aC01KStcImVuZFwiLGg9aC5zdWJzdHIoMCxoLmxlbmd0aC02KSk7bD1wYShoLnRvTG93ZXJDYXNlKCkpO21bbF09aDtpZihufHwhYy5oYXNPd25Qcm9wZXJ0eShsKSljW2xdPXEscWMoYSxsKSYmKGNbbF09ITApO1MoYSxiLHEsbCk7ZmEoYixsLFwiQVwiLGQsZyxBLE4pfX1hPWEuY2xhc3NOYW1lO2lmKHYoYSkmJlwiXCIhPT1hKWZvcig7aD1mLmV4ZWMoYSk7KWw9cGEoaFsyXSksZmEoYixsLFwiQ1wiLGQsZykmJihjW2xdPWFhKGhbM10pKSxhPWEuc3Vic3RyKGguaW5kZXgraFswXS5sZW5ndGgpO2JyZWFrO2Nhc2UgMzpLKGIsYS5ub2RlVmFsdWUpO2JyZWFrO2Nhc2UgODp0cnl7aWYoaD1lLmV4ZWMoYS5ub2RlVmFsdWUpKWw9cGEoaFsxXSksZmEoYixsLFwiTVwiLFxuZCxnKSYmKGNbbF09YWEoaFsyXSkpfWNhdGNoKHope319Yi5zb3J0KHgpO3JldHVybiBifWZ1bmN0aW9uIEIoYSxiLGMpe3ZhciBkPVtdLGU9MDtpZihiJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikpe2Rve2lmKCFhKXRocm93IGphKFwidXRlcmRpclwiLGIsYyk7MT09YS5ub2RlVHlwZSYmKGEuaGFzQXR0cmlidXRlKGIpJiZlKyssYS5oYXNBdHRyaWJ1dGUoYykmJmUtLSk7ZC5wdXNoKGEpO2E9YS5uZXh0U2libGluZ313aGlsZSgwPGUpfWVsc2UgZC5wdXNoKGEpO3JldHVybiB3KGQpfWZ1bmN0aW9uIEkoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZixnLGgpe2U9QihlWzBdLGIsYyk7cmV0dXJuIGEoZCxlLGYsZyxoKX19ZnVuY3Rpb24gSChhLGMsZCxlLGYsZyxtLG4scCl7ZnVuY3Rpb24gRihhLGIsYyxkKXtpZihhKXtjJiYoYT1JKGEsYyxkKSk7YS5yZXF1aXJlPUcucmVxdWlyZTthLmRpcmVjdGl2ZU5hbWU9QztpZihMPT09R3x8Ry4kJGlzb2xhdGVTY29wZSlhPVxudGMoYSx7aXNvbGF0ZVNjb3BlOiEwfSk7bS5wdXNoKGEpfWlmKGIpe2MmJihiPUkoYixjLGQpKTtiLnJlcXVpcmU9Ry5yZXF1aXJlO2IuZGlyZWN0aXZlTmFtZT1DO2lmKEw9PT1HfHxHLiQkaXNvbGF0ZVNjb3BlKWI9dGMoYix7aXNvbGF0ZVNjb3BlOiEwfSk7bi5wdXNoKGIpfX1mdW5jdGlvbiBBKGEsYixjLGQpe3ZhciBlLGY9XCJkYXRhXCIsZz0hMTtpZih2KGIpKXtmb3IoO1wiXlwiPT0oZT1iLmNoYXJBdCgwKSl8fFwiP1wiPT1lOyliPWIuc3Vic3RyKDEpLFwiXlwiPT1lJiYoZj1cImluaGVyaXRlZERhdGFcIiksZz1nfHxcIj9cIj09ZTtlPW51bGw7ZCYmXCJkYXRhXCI9PT1mJiYoZT1kW2JdKTtlPWV8fGNbZl0oXCIkXCIrYitcIkNvbnRyb2xsZXJcIik7aWYoIWUmJiFnKXRocm93IGphKFwiY3RyZXFcIixiLGEpO31lbHNlIEooYikmJihlPVtdLHIoYixmdW5jdGlvbihiKXtlLnB1c2goQShhLGIsYyxkKSl9KSk7cmV0dXJuIGV9ZnVuY3Rpb24gTihhLGUsZixnLHApe2Z1bmN0aW9uIEYoYSxiKXt2YXIgYzsyPmFyZ3VtZW50cy5sZW5ndGgmJlxuKGI9YSxhPXQpO0smJihjPWRhKTtyZXR1cm4gcChhLGIsYyl9dmFyIHUsTSx6LE8sSSxCLGRhPXt9LHJiO3U9Yz09PWY/ZDpoYShkLG5ldyBPYih3KGYpLGQuJGF0dHIpKTtNPXUuJCRlbGVtZW50O2lmKEwpe3ZhciBOYT0vXlxccyooW0A9Jl0pKFxcPz8pXFxzKihcXHcqKVxccyokLztCPWUuJG5ldyghMCk7IUh8fEghPT1MJiZIIT09TC4kJG9yaWdpbmFsRGlyZWN0aXZlP00uZGF0YShcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIsQik6TS5kYXRhKFwiJGlzb2xhdGVTY29wZVwiLEIpO2NhKE0sXCJuZy1pc29sYXRlLXNjb3BlXCIpO3IoTC5zY29wZSxmdW5jdGlvbihhLGMpe3ZhciBkPWEubWF0Y2goTmEpfHxbXSxmPWRbM118fGMsZz1cIj9cIj09ZFsyXSxkPWRbMV0sbSxsLG4scDtCLiQkaXNvbGF0ZUJpbmRpbmdzW2NdPWQrZjtzd2l0Y2goZCl7Y2FzZSBcIkBcIjp1LiRvYnNlcnZlKGYsZnVuY3Rpb24oYSl7QltjXT1hfSk7dS4kJG9ic2VydmVyc1tmXS4kJHNjb3BlPWU7dVtmXSYmKEJbY109Yih1W2ZdKShlKSk7XG5icmVhaztjYXNlIFwiPVwiOmlmKGcmJiF1W2ZdKWJyZWFrO2w9cSh1W2ZdKTtwPWwubGl0ZXJhbD9BYTpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Ynx8YSE9PWEmJmIhPT1ifTtuPWwuYXNzaWdufHxmdW5jdGlvbigpe209QltjXT1sKGUpO3Rocm93IGphKFwibm9uYXNzaWduXCIsdVtmXSxMLm5hbWUpO307bT1CW2NdPWwoZSk7Qi4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYT1sKGUpO3AoYSxCW2NdKXx8KHAoYSxtKT9uKGUsYT1CW2NdKTpCW2NdPWEpO3JldHVybiBtPWF9LG51bGwsbC5saXRlcmFsKTticmVhaztjYXNlIFwiJlwiOmw9cSh1W2ZdKTtCW2NdPWZ1bmN0aW9uKGEpe3JldHVybiBsKGUsYSl9O2JyZWFrO2RlZmF1bHQ6dGhyb3cgamEoXCJpc2NwXCIsTC5uYW1lLGMsYSk7fX0pfXJiPXAmJkY7UiYmcihSLGZ1bmN0aW9uKGEpe3ZhciBiPXskc2NvcGU6YT09PUx8fGEuJCRpc29sYXRlU2NvcGU/QjplLCRlbGVtZW50Ok0sJGF0dHJzOnUsJHRyYW5zY2x1ZGU6cmJ9LGM7ST1hLmNvbnRyb2xsZXI7XG5cIkBcIj09SSYmKEk9dVthLm5hbWVdKTtjPXMoSSxiKTtkYVthLm5hbWVdPWM7S3x8TS5kYXRhKFwiJFwiK2EubmFtZStcIkNvbnRyb2xsZXJcIixjKTthLmNvbnRyb2xsZXJBcyYmKGIuJHNjb3BlW2EuY29udHJvbGxlckFzXT1jKX0pO2c9MDtmb3Ioej1tLmxlbmd0aDtnPHo7ZysrKXRyeXtPPW1bZ10sTyhPLmlzb2xhdGVTY29wZT9COmUsTSx1LE8ucmVxdWlyZSYmQShPLmRpcmVjdGl2ZU5hbWUsTy5yZXF1aXJlLE0sZGEpLHJiKX1jYXRjaChHKXtsKEcsaWEoTSkpfWc9ZTtMJiYoTC50ZW1wbGF0ZXx8bnVsbD09PUwudGVtcGxhdGVVcmwpJiYoZz1CKTthJiZhKGcsZi5jaGlsZE5vZGVzLHQscCk7Zm9yKGc9bi5sZW5ndGgtMTswPD1nO2ctLSl0cnl7Tz1uW2ddLE8oTy5pc29sYXRlU2NvcGU/QjplLE0sdSxPLnJlcXVpcmUmJkEoTy5kaXJlY3RpdmVOYW1lLE8ucmVxdWlyZSxNLGRhKSxyYil9Y2F0Y2goeSl7bCh5LGlhKE0pKX19cD1wfHx7fTtmb3IodmFyIHU9LU51bWJlci5NQVhfVkFMVUUsXG5PLFI9cC5jb250cm9sbGVyRGlyZWN0aXZlcyxMPXAubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLEg9cC50ZW1wbGF0ZURpcmVjdGl2ZSxmYT1wLm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUseD0hMSxEPSExLEs9cC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSxaPWQuJCRlbGVtZW50PXcoYyksRyxDLFYsUz1lLFEsRmE9MCxxYT1hLmxlbmd0aDtGYTxxYTtGYSsrKXtHPWFbRmFdO3ZhciBVPUcuJCRzdGFydCxZPUcuJCRlbmQ7VSYmKFo9QihjLFUsWSkpO1Y9dDtpZih1PkcucHJpb3JpdHkpYnJlYWs7aWYoVj1HLnNjb3BlKU89T3x8RyxHLnRlbXBsYXRlVXJsfHwoZGIoXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixMLEcsWiksVChWKSYmKEw9RykpO0M9Ry5uYW1lOyFHLnRlbXBsYXRlVXJsJiZHLmNvbnRyb2xsZXImJihWPUcuY29udHJvbGxlcixSPVJ8fHt9LGRiKFwiJ1wiK0MrXCInIGNvbnRyb2xsZXJcIixSW0NdLEcsWiksUltDXT1HKTtpZihWPUcudHJhbnNjbHVkZSl4PSEwLEcuJCR0bGJ8fFxuKGRiKFwidHJhbnNjbHVzaW9uXCIsZmEsRyxaKSxmYT1HKSxcImVsZW1lbnRcIj09Vj8oSz0hMCx1PUcucHJpb3JpdHksVj1aLFo9ZC4kJGVsZW1lbnQ9dyhYLmNyZWF0ZUNvbW1lbnQoXCIgXCIrQytcIjogXCIrZFtDXStcIiBcIikpLGM9WlswXSxOYShmLEJhLmNhbGwoViwwKSxjKSxTPXooVixlLHUsZyYmZy5uYW1lLHtub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOmZhfSkpOihWPXcoS2IoYykpLmNvbnRlbnRzKCksWi5lbXB0eSgpLFM9eihWLGUpKTtpZihHLnRlbXBsYXRlKWlmKEQ9ITAsZGIoXCJ0ZW1wbGF0ZVwiLEgsRyxaKSxIPUcsVj1QKEcudGVtcGxhdGUpP0cudGVtcGxhdGUoWixkKTpHLnRlbXBsYXRlLFY9VyhWKSxHLnJlcGxhY2Upe2c9RztWPUliLnRlc3QoVik/dyhhYShWKSk6W107Yz1WWzBdO2lmKDEhPVYubGVuZ3RofHwxIT09Yy5ub2RlVHlwZSl0aHJvdyBqYShcInRwbHJ0XCIsQyxcIlwiKTtOYShmLFosYyk7cWE9eyRhdHRyOnt9fTtWPWRhKGMsW10scWEpO3ZhciAkPWEuc3BsaWNlKEZhK1xuMSxhLmxlbmd0aC0oRmErMSkpO0wmJnkoVik7YT1hLmNvbmNhdChWKS5jb25jYXQoJCk7RShkLHFhKTtxYT1hLmxlbmd0aH1lbHNlIFouaHRtbChWKTtpZihHLnRlbXBsYXRlVXJsKUQ9ITAsZGIoXCJ0ZW1wbGF0ZVwiLEgsRyxaKSxIPUcsRy5yZXBsYWNlJiYoZz1HKSxOPXVlKGEuc3BsaWNlKEZhLGEubGVuZ3RoLUZhKSxaLGQsZix4JiZTLG0sbix7Y29udHJvbGxlckRpcmVjdGl2ZXM6UixuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6TCx0ZW1wbGF0ZURpcmVjdGl2ZTpILG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6ZmF9KSxxYT1hLmxlbmd0aDtlbHNlIGlmKEcuY29tcGlsZSl0cnl7UT1HLmNvbXBpbGUoWixkLFMpLFAoUSk/RihudWxsLFEsVSxZKTpRJiZGKFEucHJlLFEucG9zdCxVLFkpfWNhdGNoKHZlKXtsKHZlLGlhKFopKX1HLnRlcm1pbmFsJiYoTi50ZXJtaW5hbD0hMCx1PU1hdGgubWF4KHUsRy5wcmlvcml0eSkpfU4uc2NvcGU9TyYmITA9PT1PLnNjb3BlO04udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ9XG54O04udGVtcGxhdGVPblRoaXNFbGVtZW50PUQ7Ti50cmFuc2NsdWRlPVM7cC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZT1LO3JldHVybiBOfWZ1bmN0aW9uIHkoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWFbYl09YmMoYVtiXSx7JCRpc29sYXRlU2NvcGU6ITB9KX1mdW5jdGlvbiBmYShiLGUsZixnLGgscSxuKXtpZihlPT09aClyZXR1cm4gbnVsbDtoPW51bGw7aWYoYy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHA7ZT1hLmdldChlK2QpO2Zvcih2YXIgcz0wLHU9ZS5sZW5ndGg7czx1O3MrKyl0cnl7cD1lW3NdLChnPT09dHx8Zz5wLnByaW9yaXR5KSYmLTEhPXAucmVzdHJpY3QuaW5kZXhPZihmKSYmKHEmJihwPWJjKHAseyQkc3RhcnQ6cSwkJGVuZDpufSkpLGIucHVzaChwKSxoPXApfWNhdGNoKEYpe2woRil9fXJldHVybiBofWZ1bmN0aW9uIEUoYSxiKXt2YXIgYz1iLiRhdHRyLGQ9YS4kYXR0cixlPWEuJCRlbGVtZW50O3IoYSxmdW5jdGlvbihkLGUpe1wiJFwiIT1cbmUuY2hhckF0KDApJiYoYltlXSYmYltlXSE9PWQmJihkKz0oXCJzdHlsZVwiPT09ZT9cIjtcIjpcIiBcIikrYltlXSksYS4kc2V0KGUsZCwhMCxjW2VdKSl9KTtyKGIsZnVuY3Rpb24oYixmKXtcImNsYXNzXCI9PWY/KGNhKGUsYiksYVtcImNsYXNzXCJdPShhW1wiY2xhc3NcIl0/YVtcImNsYXNzXCJdK1wiIFwiOlwiXCIpK2IpOlwic3R5bGVcIj09Zj8oZS5hdHRyKFwic3R5bGVcIixlLmF0dHIoXCJzdHlsZVwiKStcIjtcIitiKSxhLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrXCI7XCI6XCJcIikrYik6XCIkXCI9PWYuY2hhckF0KDApfHxhLmhhc093blByb3BlcnR5KGYpfHwoYVtmXT1iLGRbZl09Y1tmXSl9KX1mdW5jdGlvbiB1ZShhLGIsYyxkLGUsZixnLGgpe3ZhciBtPVtdLGwscSxzPWJbMF0sdT1hLnNoaWZ0KCksRj1EKHt9LHUse3RlbXBsYXRlVXJsOm51bGwsdHJhbnNjbHVkZTpudWxsLHJlcGxhY2U6bnVsbCwkJG9yaWdpbmFsRGlyZWN0aXZlOnV9KSxOPVAodS50ZW1wbGF0ZVVybCk/dS50ZW1wbGF0ZVVybChiLGMpOnUudGVtcGxhdGVVcmw7XG5iLmVtcHR5KCk7bi5nZXQoQS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwoTikse2NhY2hlOnB9KS5zdWNjZXNzKGZ1bmN0aW9uKG4pe3ZhciBwLEE7bj1XKG4pO2lmKHUucmVwbGFjZSl7bj1JYi50ZXN0KG4pP3coYWEobikpOltdO3A9blswXTtpZigxIT1uLmxlbmd0aHx8MSE9PXAubm9kZVR5cGUpdGhyb3cgamEoXCJ0cGxydFwiLHUubmFtZSxOKTtuPXskYXR0cjp7fX07TmEoZCxiLHApO3ZhciB6PWRhKHAsW10sbik7VCh1LnNjb3BlKSYmeSh6KTthPXouY29uY2F0KGEpO0UoYyxuKX1lbHNlIHA9cyxiLmh0bWwobik7YS51bnNoaWZ0KEYpO2w9SChhLHAsYyxlLGIsdSxmLGcsaCk7cihkLGZ1bmN0aW9uKGEsYyl7YT09cCYmKGRbY109YlswXSl9KTtmb3IocT1MKGJbMF0uY2hpbGROb2RlcyxlKTttLmxlbmd0aDspe249bS5zaGlmdCgpO0E9bS5zaGlmdCgpO3ZhciBSPW0uc2hpZnQoKSxJPW0uc2hpZnQoKSx6PWJbMF07aWYoQSE9PXMpe3ZhciBCPUEuY2xhc3NOYW1lO2guaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUmJlxudS5yZXBsYWNlfHwoej1LYihwKSk7TmEoUix3KEEpLHopO2NhKHcoeiksQil9QT1sLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P08obixsLnRyYW5zY2x1ZGUsSSk6STtsKHEsbix6LGQsQSl9bT1udWxsfSkuZXJyb3IoZnVuY3Rpb24oYSxiLGMsZCl7dGhyb3cgamEoXCJ0cGxvYWRcIixkLnVybCk7fSk7cmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQsZSl7YT1lO20/KG0ucHVzaChiKSxtLnB1c2goYyksbS5wdXNoKGQpLG0ucHVzaChhKSk6KGwudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQmJihhPU8oYixsLnRyYW5zY2x1ZGUsZSkpLGwocSxiLGMsZCxhKSl9fWZ1bmN0aW9uIHgoYSxiKXt2YXIgYz1iLnByaW9yaXR5LWEucHJpb3JpdHk7cmV0dXJuIDAhPT1jP2M6YS5uYW1lIT09Yi5uYW1lP2EubmFtZTxiLm5hbWU/LTE6MTphLmluZGV4LWIuaW5kZXh9ZnVuY3Rpb24gZGIoYSxiLGMsZCl7aWYoYil0aHJvdyBqYShcIm11bHRpZGlyXCIsYi5uYW1lLGMubmFtZSxhLGlhKGQpKTt9ZnVuY3Rpb24gSyhhLFxuYyl7dmFyIGQ9YihjLCEwKTtkJiZhLnB1c2goe3ByaW9yaXR5OjAsY29tcGlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudCgpLmxlbmd0aDtiJiZjYShhLnBhcmVudCgpLFwibmctYmluZGluZ1wiKTtyZXR1cm4gZnVuY3Rpb24oYSxjKXt2YXIgZT1jLnBhcmVudCgpLGY9ZS5kYXRhKFwiJGJpbmRpbmdcIil8fFtdO2YucHVzaChkKTtlLmRhdGEoXCIkYmluZGluZ1wiLGYpO2J8fGNhKGUsXCJuZy1iaW5kaW5nXCIpO2EuJHdhdGNoKGQsZnVuY3Rpb24oYSl7Y1swXS5ub2RlVmFsdWU9YX0pfX19KX1mdW5jdGlvbiBDKGEsYil7aWYoXCJzcmNkb2NcIj09YilyZXR1cm4gQS5IVE1MO3ZhciBjPU1hKGEpO2lmKFwieGxpbmtIcmVmXCI9PWJ8fFwiRk9STVwiPT1jJiZcImFjdGlvblwiPT1ifHxcIklNR1wiIT1jJiYoXCJzcmNcIj09Ynx8XCJuZ1NyY1wiPT1iKSlyZXR1cm4gQS5SRVNPVVJDRV9VUkx9ZnVuY3Rpb24gUyhhLGMsZCxlKXt2YXIgZj1iKGQsITApO2lmKGYpe2lmKFwibXVsdGlwbGVcIj09PWUmJlwiU0VMRUNUXCI9PT1cbk1hKGEpKXRocm93IGphKFwic2VsbXVsdGlcIixpYShhKSk7Yy5wdXNoKHtwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYyxkLG0pe2Q9bS4kJG9ic2VydmVyc3x8KG0uJCRvYnNlcnZlcnM9e30pO2lmKGcudGVzdChlKSl0aHJvdyBqYShcIm5vZG9tZXZlbnRzXCIpO2lmKGY9YihtW2VdLCEwLEMoYSxlKSkpbVtlXT1mKGMpLChkW2VdfHwoZFtlXT1bXSkpLiQkaW50ZXI9ITAsKG0uJCRvYnNlcnZlcnMmJm0uJCRvYnNlcnZlcnNbZV0uJCRzY29wZXx8YykuJHdhdGNoKGYsZnVuY3Rpb24oYSxiKXtcImNsYXNzXCI9PT1lJiZhIT1iP20uJHVwZGF0ZUNsYXNzKGEsYik6bS4kc2V0KGUsYSl9KX19fX0pfX1mdW5jdGlvbiBOYShhLGIsYyl7dmFyIGQ9YlswXSxlPWIubGVuZ3RoLGY9ZC5wYXJlbnROb2RlLGcsbTtpZihhKWZvcihnPTAsbT1hLmxlbmd0aDtnPG07ZysrKWlmKGFbZ109PWQpe2FbZysrXT1jO209ZytlLTE7Zm9yKHZhciBoPWEubGVuZ3RoO2c8XG5oO2crKyxtKyspbTxoP2FbZ109YVttXTpkZWxldGUgYVtnXTthLmxlbmd0aC09ZS0xO2JyZWFrfWYmJmYucmVwbGFjZUNoaWxkKGMsZCk7YT1YLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmFwcGVuZENoaWxkKGQpO2Nbdy5leHBhbmRvXT1kW3cuZXhwYW5kb107ZD0xO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspZj1iW2RdLHcoZikucmVtb3ZlKCksYS5hcHBlbmRDaGlsZChmKSxkZWxldGUgYltkXTtiWzBdPWM7Yi5sZW5ndGg9MX1mdW5jdGlvbiB0YyhhLGIpe3JldHVybiBEKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhLGIpfXZhciBPYj1mdW5jdGlvbihhLGIpe3RoaXMuJCRlbGVtZW50PWE7dGhpcy4kYXR0cj1ifHx7fX07T2IucHJvdG90eXBlPXskbm9ybWFsaXplOnBhLCRhZGRDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZOLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxcbmEubGVuZ3RoJiZOLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkdXBkYXRlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz11YyhhLGIpLGQ9dWMoYixhKTswPT09Yy5sZW5ndGg/Ti5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxkKTowPT09ZC5sZW5ndGg/Ti5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxjKTpOLnNldENsYXNzKHRoaXMuJCRlbGVtZW50LGMsZCl9LCRzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9cWModGhpcy4kJGVsZW1lbnRbMF0sYSk7ZSYmKHRoaXMuJCRlbGVtZW50LnByb3AoYSxiKSxkPWUpO3RoaXNbYV09YjtkP3RoaXMuJGF0dHJbYV09ZDooZD10aGlzLiRhdHRyW2FdKXx8KHRoaXMuJGF0dHJbYV09ZD1tYihhLFwiLVwiKSk7ZT1NYSh0aGlzLiQkZWxlbWVudCk7aWYoXCJBXCI9PT1lJiZcImhyZWZcIj09PWF8fFwiSU1HXCI9PT1lJiZcInNyY1wiPT09YSl0aGlzW2FdPWI9UihiLFwic3JjXCI9PT1hKTshMSE9PWMmJihudWxsPT09Ynx8Yj09PXQ/dGhpcy4kJGVsZW1lbnQucmVtb3ZlQXR0cihkKTpcbnRoaXMuJCRlbGVtZW50LmF0dHIoZCxiKSk7KGM9dGhpcy4kJG9ic2VydmVycykmJnIoY1thXSxmdW5jdGlvbihhKXt0cnl7YShiKX1jYXRjaChjKXtsKGMpfX0pfSwkb2JzZXJ2ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLiQkb2JzZXJ2ZXJzfHwoYy4kJG9ic2VydmVycz17fSksZT1kW2FdfHwoZFthXT1bXSk7ZS5wdXNoKGIpO0YuJGV2YWxBc3luYyhmdW5jdGlvbigpe2UuJCRpbnRlcnx8YihjW2FdKX0pO3JldHVybiBifX07dmFyIHFhPWIuc3RhcnRTeW1ib2woKSxaPWIuZW5kU3ltYm9sKCksVz1cInt7XCI9PXFhfHxcIn19XCI9PVo/UWE6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXFx7XFx7L2cscWEpLnJlcGxhY2UoL319L2csWil9LFU9L15uZ0F0dHJbQS1aXS87cmV0dXJuIHp9XX1mdW5jdGlvbiBwYShiKXtyZXR1cm4gWmEoYi5yZXBsYWNlKHdlLFwiXCIpKX1mdW5jdGlvbiB1YyhiLGEpe3ZhciBjPVwiXCIsZD1iLnNwbGl0KC9cXHMrLyksZT1hLnNwbGl0KC9cXHMrLyksZj1cbjA7YTpmb3IoO2Y8ZC5sZW5ndGg7ZisrKXtmb3IodmFyIGc9ZFtmXSxrPTA7azxlLmxlbmd0aDtrKyspaWYoZz09ZVtrXSljb250aW51ZSBhO2MrPSgwPGMubGVuZ3RoP1wiIFwiOlwiXCIpK2d9cmV0dXJuIGN9ZnVuY3Rpb24gUGQoKXt2YXIgYj17fSxhPS9eKFxcUyspKFxccythc1xccysoXFx3KykpPyQvO3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYSxkKXtEYShhLFwiY29udHJvbGxlclwiKTtUKGEpP0QoYixhKTpiW2FdPWR9O3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcIiR3aW5kb3dcIixmdW5jdGlvbihjLGQpe3JldHVybiBmdW5jdGlvbihlLGYpe3ZhciBnLGssbTt2KGUpJiYoZz1lLm1hdGNoKGEpLGs9Z1sxXSxtPWdbM10sZT1iLmhhc093blByb3BlcnR5KGspP2Jba106aGMoZi4kc2NvcGUsaywhMCl8fGhjKGQsaywhMCksV2EoZSxrLCEwKSk7Zz1jLmluc3RhbnRpYXRlKGUsZik7aWYobSl7aWYoIWZ8fFwib2JqZWN0XCIhPT10eXBlb2YgZi4kc2NvcGUpdGhyb3cgQyhcIiRjb250cm9sbGVyXCIpKFwibm9zY3BcIixcbmt8fGUubmFtZSxtKTtmLiRzY29wZVttXT1nfXJldHVybiBnfX1dfWZ1bmN0aW9uIFFkKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixmdW5jdGlvbihiKXtyZXR1cm4gdyhiLmRvY3VtZW50KX1dfWZ1bmN0aW9uIFJkKCl7dGhpcy4kZ2V0PVtcIiRsb2dcIixmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oYSxjKXtiLmVycm9yLmFwcGx5KGIsYXJndW1lbnRzKX19XX1mdW5jdGlvbiB2YyhiKXt2YXIgYT17fSxjLGQsZTtpZighYilyZXR1cm4gYTtyKGIuc3BsaXQoXCJcXG5cIiksZnVuY3Rpb24oYil7ZT1iLmluZGV4T2YoXCI6XCIpO2M9SyhhYShiLnN1YnN0cigwLGUpKSk7ZD1hYShiLnN1YnN0cihlKzEpKTtjJiYoYVtjXT1hW2NdP2FbY10rXCIsIFwiK2Q6ZCl9KTtyZXR1cm4gYX1mdW5jdGlvbiB3YyhiKXt2YXIgYT1UKGIpP2I6dDtyZXR1cm4gZnVuY3Rpb24oYyl7YXx8KGE9dmMoYikpO3JldHVybiBjP2FbSyhjKV18fG51bGw6YX19ZnVuY3Rpb24geGMoYixhLGMpe2lmKFAoYykpcmV0dXJuIGMoYixcbmEpO3IoYyxmdW5jdGlvbihjKXtiPWMoYixhKX0pO3JldHVybiBifWZ1bmN0aW9uIFVkKCl7dmFyIGI9L15cXHMqKFxcW3xcXHtbXlxce10pLyxhPS9bXFx9XFxdXVxccyokLyxjPS9eXFwpXFxdXFx9Jyw/XFxuLyxkPXtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04XCJ9LGU9dGhpcy5kZWZhdWx0cz17dHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uKGQpe3YoZCkmJihkPWQucmVwbGFjZShjLFwiXCIpLGIudGVzdChkKSYmYS50ZXN0KGQpJiYoZD1jYyhkKSkpO3JldHVybiBkfV0sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oYSl7cmV0dXJuIFQoYSkmJlwiW29iamVjdCBGaWxlXVwiIT09emEuY2FsbChhKSYmXCJbb2JqZWN0IEJsb2JdXCIhPT16YS5jYWxsKGEpP25hKGEpOmF9XSxoZWFkZXJzOntjb21tb246e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKlwifSxwb3N0OmhhKGQpLHB1dDpoYShkKSxwYXRjaDpoYShkKX0seHNyZkNvb2tpZU5hbWU6XCJYU1JGLVRPS0VOXCIsXG54c3JmSGVhZGVyTmFtZTpcIlgtWFNSRi1UT0tFTlwifSxmPXRoaXMuaW50ZXJjZXB0b3JzPVtdLGc9dGhpcy5yZXNwb25zZUludGVyY2VwdG9ycz1bXTt0aGlzLiRnZXQ9W1wiJGh0dHBCYWNrZW5kXCIsXCIkYnJvd3NlclwiLFwiJGNhY2hlRmFjdG9yeVwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEsYixjLGQsbixwKXtmdW5jdGlvbiBxKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGQ9RCh7fSxhLHtkYXRhOnhjKGEuZGF0YSxhLmhlYWRlcnMsYy50cmFuc2Zvcm1SZXNwb25zZSl9KTtyZXR1cm4gMjAwPD1hLnN0YXR1cyYmMzAwPmEuc3RhdHVzP2Q6bi5yZWplY3QoZCl9dmFyIGM9e21ldGhvZDpcImdldFwiLHRyYW5zZm9ybVJlcXVlc3Q6ZS50cmFuc2Zvcm1SZXF1ZXN0LHRyYW5zZm9ybVJlc3BvbnNlOmUudHJhbnNmb3JtUmVzcG9uc2V9LGQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZS5oZWFkZXJzLGM9RCh7fSxhLmhlYWRlcnMpLGQsZixiPUQoe30sYi5jb21tb24sYltLKGEubWV0aG9kKV0pO1xuYTpmb3IoZCBpbiBiKXthPUsoZCk7Zm9yKGYgaW4gYylpZihLKGYpPT09YSljb250aW51ZSBhO2NbZF09YltkXX0oZnVuY3Rpb24oYSl7dmFyIGI7cihhLGZ1bmN0aW9uKGMsZCl7UChjKSYmKGI9YygpLG51bGwhPWI/YVtkXT1iOmRlbGV0ZSBhW2RdKX0pfSkoYyk7cmV0dXJuIGN9KGEpO0QoYyxhKTtjLmhlYWRlcnM9ZDtjLm1ldGhvZD1JYShjLm1ldGhvZCk7dmFyIGY9W2Z1bmN0aW9uKGEpe2Q9YS5oZWFkZXJzO3ZhciBjPXhjKGEuZGF0YSx3YyhkKSxhLnRyYW5zZm9ybVJlcXVlc3QpO3goYykmJnIoZCxmdW5jdGlvbihhLGIpe1wiY29udGVudC10eXBlXCI9PT1LKGIpJiZkZWxldGUgZFtiXX0pO3goYS53aXRoQ3JlZGVudGlhbHMpJiYheChlLndpdGhDcmVkZW50aWFscykmJihhLndpdGhDcmVkZW50aWFscz1lLndpdGhDcmVkZW50aWFscyk7cmV0dXJuIHMoYSxjLGQpLnRoZW4oYixiKX0sdF0sZz1uLndoZW4oYyk7Zm9yKHIoQSxmdW5jdGlvbihhKXsoYS5yZXF1ZXN0fHxhLnJlcXVlc3RFcnJvcikmJlxuZi51bnNoaWZ0KGEucmVxdWVzdCxhLnJlcXVlc3RFcnJvcik7KGEucmVzcG9uc2V8fGEucmVzcG9uc2VFcnJvcikmJmYucHVzaChhLnJlc3BvbnNlLGEucmVzcG9uc2VFcnJvcil9KTtmLmxlbmd0aDspe2E9Zi5zaGlmdCgpO3ZhciBtPWYuc2hpZnQoKSxnPWcudGhlbihhLG0pfWcuc3VjY2Vzcz1mdW5jdGlvbihhKXtnLnRoZW4oZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGMpfSk7cmV0dXJuIGd9O2cuZXJyb3I9ZnVuY3Rpb24oYSl7Zy50aGVuKG51bGwsZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGMpfSk7cmV0dXJuIGd9O3JldHVybiBnfWZ1bmN0aW9uIHMoYyxmLGcpe2Z1bmN0aW9uIGgoYSxiLGMsZSl7SSYmKDIwMDw9YSYmMzAwPmE/SS5wdXQodyxbYSxiLHZjKGMpLGVdKTpJLnJlbW92ZSh3KSk7cChiLGEsYyxlKTtkLiQkcGhhc2V8fGQuJGFwcGx5KCl9ZnVuY3Rpb24gcChhLGIsZCxlKXtiPU1hdGgubWF4KGIsMCk7KDIwMDw9XG5iJiYzMDA+Yj9BLnJlc29sdmU6QS5yZWplY3QpKHtkYXRhOmEsc3RhdHVzOmIsaGVhZGVyczp3YyhkKSxjb25maWc6YyxzdGF0dXNUZXh0OmV9KX1mdW5jdGlvbiBzKCl7dmFyIGE9UmEocS5wZW5kaW5nUmVxdWVzdHMsYyk7LTEhPT1hJiZxLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoYSwxKX12YXIgQT1uLmRlZmVyKCkscj1BLnByb21pc2UsSSxILHc9RihjLnVybCxjLnBhcmFtcyk7cS5wZW5kaW5nUmVxdWVzdHMucHVzaChjKTtyLnRoZW4ocyxzKTshYy5jYWNoZSYmIWUuY2FjaGV8fCghMT09PWMuY2FjaGV8fFwiR0VUXCIhPT1jLm1ldGhvZCYmXCJKU09OUFwiIT09Yy5tZXRob2QpfHwoST1UKGMuY2FjaGUpP2MuY2FjaGU6VChlLmNhY2hlKT9lLmNhY2hlOnUpO2lmKEkpaWYoSD1JLmdldCh3KSx5KEgpKXtpZihIJiZQKEgudGhlbikpcmV0dXJuIEgudGhlbihzLHMpLEg7SihIKT9wKEhbMV0sSFswXSxoYShIWzJdKSxIWzNdKTpwKEgsMjAwLHt9LFwiT0tcIil9ZWxzZSBJLnB1dCh3LHIpO3goSCkmJlxuKChIPVBiKGMudXJsKT9iLmNvb2tpZXMoKVtjLnhzcmZDb29raWVOYW1lfHxlLnhzcmZDb29raWVOYW1lXTp0KSYmKGdbYy54c3JmSGVhZGVyTmFtZXx8ZS54c3JmSGVhZGVyTmFtZV09SCksYShjLm1ldGhvZCx3LGYsaCxnLGMudGltZW91dCxjLndpdGhDcmVkZW50aWFscyxjLnJlc3BvbnNlVHlwZSkpO3JldHVybiByfWZ1bmN0aW9uIEYoYSxiKXtpZighYilyZXR1cm4gYTt2YXIgYz1bXTtUYyhiLGZ1bmN0aW9uKGEsYil7bnVsbD09PWF8fHgoYSl8fChKKGEpfHwoYT1bYV0pLHIoYSxmdW5jdGlvbihhKXtUKGEpJiYoYT10YShhKT9hLnRvSVNPU3RyaW5nKCk6bmEoYSkpO2MucHVzaChDYShiKStcIj1cIitDYShhKSl9KSl9KTswPGMubGVuZ3RoJiYoYSs9KC0xPT1hLmluZGV4T2YoXCI/XCIpP1wiP1wiOlwiJlwiKStjLmpvaW4oXCImXCIpKTtyZXR1cm4gYX12YXIgdT1jKFwiJGh0dHBcIiksQT1bXTtyKGYsZnVuY3Rpb24oYSl7QS51bnNoaWZ0KHYoYSk/cC5nZXQoYSk6cC5pbnZva2UoYSkpfSk7cihnLFxuZnVuY3Rpb24oYSxiKXt2YXIgYz12KGEpP3AuZ2V0KGEpOnAuaW52b2tlKGEpO0Euc3BsaWNlKGIsMCx7cmVzcG9uc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGMobi53aGVuKGEpKX0scmVzcG9uc2VFcnJvcjpmdW5jdGlvbihhKXtyZXR1cm4gYyhuLnJlamVjdChhKSl9fSl9KTtxLnBlbmRpbmdSZXF1ZXN0cz1bXTsoZnVuY3Rpb24oYSl7cihhcmd1bWVudHMsZnVuY3Rpb24oYSl7cVthXT1mdW5jdGlvbihiLGMpe3JldHVybiBxKEQoY3x8e30se21ldGhvZDphLHVybDpifSkpfX0pfSkoXCJnZXRcIixcImRlbGV0ZVwiLFwiaGVhZFwiLFwianNvbnBcIik7KGZ1bmN0aW9uKGEpe3IoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3FbYV09ZnVuY3Rpb24oYixjLGQpe3JldHVybiBxKEQoZHx8e30se21ldGhvZDphLHVybDpiLGRhdGE6Y30pKX19KX0pKFwicG9zdFwiLFwicHV0XCIpO3EuZGVmYXVsdHM9ZTtyZXR1cm4gcX1dfWZ1bmN0aW9uIHhlKGIpe2lmKDg+PVEmJighYi5tYXRjaCgvXihnZXR8cG9zdHxoZWFkfHB1dHxkZWxldGV8b3B0aW9ucykkL2kpfHxcbiFXLlhNTEh0dHBSZXF1ZXN0KSlyZXR1cm4gbmV3IFcuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO2lmKFcuWE1MSHR0cFJlcXVlc3QpcmV0dXJuIG5ldyBXLlhNTEh0dHBSZXF1ZXN0O3Rocm93IEMoXCIkaHR0cEJhY2tlbmRcIikoXCJub3hoclwiKTt9ZnVuY3Rpb24gVmQoKXt0aGlzLiRnZXQ9W1wiJGJyb3dzZXJcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4geWUoYix4ZSxiLmRlZmVyLGEuYW5ndWxhci5jYWxsYmFja3MsY1swXSl9XX1mdW5jdGlvbiB5ZShiLGEsYyxkLGUpe2Z1bmN0aW9uIGYoYSxiLGMpe3ZhciBmPWUuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxnPW51bGw7Zi50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7Zi5zcmM9YTtmLmFzeW5jPSEwO2c9ZnVuY3Rpb24oYSl7JGEoZixcImxvYWRcIixnKTskYShmLFwiZXJyb3JcIixnKTtlLmJvZHkucmVtb3ZlQ2hpbGQoZik7Zj1udWxsO3ZhciBrPS0xLHM9XCJ1bmtub3duXCI7YSYmKFwibG9hZFwiIT09XG5hLnR5cGV8fGRbYl0uY2FsbGVkfHwoYT17dHlwZTpcImVycm9yXCJ9KSxzPWEudHlwZSxrPVwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwKTtjJiZjKGsscyl9O3NiKGYsXCJsb2FkXCIsZyk7c2IoZixcImVycm9yXCIsZyk7OD49USYmKGYub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dihmLnJlYWR5U3RhdGUpJiYvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KGYucmVhZHlTdGF0ZSkmJihmLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGcoe3R5cGU6XCJsb2FkXCJ9KSl9KTtlLmJvZHkuYXBwZW5kQ2hpbGQoZik7cmV0dXJuIGd9dmFyIGc9LTE7cmV0dXJuIGZ1bmN0aW9uKGUsbSxoLGwsbixwLHEscyl7ZnVuY3Rpb24gRigpe0E9ZztSJiZSKCk7eiYmei5hYm9ydCgpfWZ1bmN0aW9uIHUoYSxkLGUsZixnKXtMJiZjLmNhbmNlbChMKTtSPXo9bnVsbDswPT09ZCYmKGQ9ZT8yMDA6XCJmaWxlXCI9PXVhKG0pLnByb3RvY29sPzQwNDowKTthKDEyMjM9PT1kPzIwNDpkLGUsZixnfHxcIlwiKTtiLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoRSl9XG52YXIgQTtiLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTttPW18fGIudXJsKCk7aWYoXCJqc29ucFwiPT1LKGUpKXt2YXIgTj1cIl9cIisoZC5jb3VudGVyKyspLnRvU3RyaW5nKDM2KTtkW05dPWZ1bmN0aW9uKGEpe2RbTl0uZGF0YT1hO2RbTl0uY2FsbGVkPSEwfTt2YXIgUj1mKG0ucmVwbGFjZShcIkpTT05fQ0FMTEJBQ0tcIixcImFuZ3VsYXIuY2FsbGJhY2tzLlwiK04pLE4sZnVuY3Rpb24oYSxiKXt1KGwsYSxkW05dLmRhdGEsXCJcIixiKTtkW05dPUV9KX1lbHNle3ZhciB6PWEoZSk7ei5vcGVuKGUsbSwhMCk7cihuLGZ1bmN0aW9uKGEsYil7eShhKSYmei5zZXRSZXF1ZXN0SGVhZGVyKGIsYSl9KTt6Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKHomJjQ9PXoucmVhZHlTdGF0ZSl7dmFyIGE9bnVsbCxiPW51bGwsYz1cIlwiO0EhPT1nJiYoYT16LmdldEFsbFJlc3BvbnNlSGVhZGVycygpLGI9XCJyZXNwb25zZVwiaW4gej96LnJlc3BvbnNlOnoucmVzcG9uc2VUZXh0KTtBPT09ZyYmXG4xMD5RfHwoYz16LnN0YXR1c1RleHQpO3UobCxBfHx6LnN0YXR1cyxiLGEsYyl9fTtxJiYoei53aXRoQ3JlZGVudGlhbHM9ITApO2lmKHMpdHJ5e3oucmVzcG9uc2VUeXBlPXN9Y2F0Y2goY2Epe2lmKFwianNvblwiIT09cyl0aHJvdyBjYTt9ei5zZW5kKGh8fG51bGwpfWlmKDA8cCl2YXIgTD1jKEYscCk7ZWxzZSBwJiZQKHAudGhlbikmJnAudGhlbihGKX19ZnVuY3Rpb24gU2QoKXt2YXIgYj1cInt7XCIsYT1cIn19XCI7dGhpcy5zdGFydFN5bWJvbD1mdW5jdGlvbihhKXtyZXR1cm4gYT8oYj1hLHRoaXMpOmJ9O3RoaXMuZW5kU3ltYm9sPWZ1bmN0aW9uKGIpe3JldHVybiBiPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PVtcIiRwYXJzZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRzY2VcIixmdW5jdGlvbihjLGQsZSl7ZnVuY3Rpb24gZihmLGgsbCl7Zm9yKHZhciBuLHAscT0wLHM9W10sRj1mLmxlbmd0aCx1PSExLEE9W107cTxGOyktMSE9KG49Zi5pbmRleE9mKGIscSkpJiYtMSE9KHA9Zi5pbmRleE9mKGEsXG5uK2cpKT8ocSE9biYmcy5wdXNoKGYuc3Vic3RyaW5nKHEsbikpLHMucHVzaChxPWModT1mLnN1YnN0cmluZyhuK2cscCkpKSxxLmV4cD11LHE9cCtrLHU9ITApOihxIT1GJiZzLnB1c2goZi5zdWJzdHJpbmcocSkpLHE9Rik7KEY9cy5sZW5ndGgpfHwocy5wdXNoKFwiXCIpLEY9MSk7aWYobCYmMTxzLmxlbmd0aCl0aHJvdyB5YyhcIm5vY29uY2F0XCIsZik7aWYoIWh8fHUpcmV0dXJuIEEubGVuZ3RoPUYscT1mdW5jdGlvbihhKXt0cnl7Zm9yKHZhciBiPTAsYz1GLGc7YjxjO2IrKyl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YoZz1zW2JdKSlpZihnPWcoYSksZz1sP2UuZ2V0VHJ1c3RlZChsLGcpOmUudmFsdWVPZihnKSxudWxsPT1nKWc9XCJcIjtlbHNlIHN3aXRjaCh0eXBlb2YgZyl7Y2FzZSBcInN0cmluZ1wiOmJyZWFrO2Nhc2UgXCJudW1iZXJcIjpnPVwiXCIrZzticmVhaztkZWZhdWx0Omc9bmEoZyl9QVtiXT1nfXJldHVybiBBLmpvaW4oXCJcIil9Y2F0Y2goayl7YT15YyhcImludGVyclwiLGYsay50b1N0cmluZygpKSxcbmQoYSl9fSxxLmV4cD1mLHEucGFydHM9cyxxfXZhciBnPWIubGVuZ3RoLGs9YS5sZW5ndGg7Zi5zdGFydFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBifTtmLmVuZFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBhfTtyZXR1cm4gZn1dfWZ1bmN0aW9uIFRkKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiR3aW5kb3dcIixcIiRxXCIsZnVuY3Rpb24oYixhLGMpe2Z1bmN0aW9uIGQoZCxnLGssbSl7dmFyIGg9YS5zZXRJbnRlcnZhbCxsPWEuY2xlYXJJbnRlcnZhbCxuPWMuZGVmZXIoKSxwPW4ucHJvbWlzZSxxPTAscz15KG0pJiYhbTtrPXkoayk/azowO3AudGhlbihudWxsLG51bGwsZCk7cC4kJGludGVydmFsSWQ9aChmdW5jdGlvbigpe24ubm90aWZ5KHErKyk7MDxrJiZxPj1rJiYobi5yZXNvbHZlKHEpLGwocC4kJGludGVydmFsSWQpLGRlbGV0ZSBlW3AuJCRpbnRlcnZhbElkXSk7c3x8Yi4kYXBwbHkoKX0sZyk7ZVtwLiQkaW50ZXJ2YWxJZF09bjtyZXR1cm4gcH12YXIgZT17fTtkLmNhbmNlbD1cbmZ1bmN0aW9uKGIpe3JldHVybiBiJiZiLiQkaW50ZXJ2YWxJZCBpbiBlPyhlW2IuJCRpbnRlcnZhbElkXS5yZWplY3QoXCJjYW5jZWxlZFwiKSxhLmNsZWFySW50ZXJ2YWwoYi4kJGludGVydmFsSWQpLGRlbGV0ZSBlW2IuJCRpbnRlcnZhbElkXSwhMCk6ITF9O3JldHVybiBkfV19ZnVuY3Rpb24gYmQoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm57aWQ6XCJlbi11c1wiLE5VTUJFUl9GT1JNQVRTOntERUNJTUFMX1NFUDpcIi5cIixHUk9VUF9TRVA6XCIsXCIsUEFUVEVSTlM6W3ttaW5JbnQ6MSxtaW5GcmFjOjAsbWF4RnJhYzozLHBvc1ByZTpcIlwiLHBvc1N1ZjpcIlwiLG5lZ1ByZTpcIi1cIixuZWdTdWY6XCJcIixnU2l6ZTozLGxnU2l6ZTozfSx7bWluSW50OjEsbWluRnJhYzoyLG1heEZyYWM6Mixwb3NQcmU6XCJcXHUwMGE0XCIscG9zU3VmOlwiXCIsbmVnUHJlOlwiKFxcdTAwYTRcIixuZWdTdWY6XCIpXCIsZ1NpemU6MyxsZ1NpemU6M31dLENVUlJFTkNZX1NZTTpcIiRcIn0sREFURVRJTUVfRk9STUFUUzp7TU9OVEg6XCJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyXCIuc3BsaXQoXCIgXCIpLFxuU0hPUlRNT05USDpcIkphbiBGZWIgTWFyIEFwciBNYXkgSnVuIEp1bCBBdWcgU2VwIE9jdCBOb3YgRGVjXCIuc3BsaXQoXCIgXCIpLERBWTpcIlN1bmRheSBNb25kYXkgVHVlc2RheSBXZWRuZXNkYXkgVGh1cnNkYXkgRnJpZGF5IFNhdHVyZGF5XCIuc3BsaXQoXCIgXCIpLFNIT1JUREFZOlwiU3VuIE1vbiBUdWUgV2VkIFRodSBGcmkgU2F0XCIuc3BsaXQoXCIgXCIpLEFNUE1TOltcIkFNXCIsXCJQTVwiXSxtZWRpdW06XCJNTU0gZCwgeSBoOm1tOnNzIGFcIixcInNob3J0XCI6XCJNL2QveXkgaDptbSBhXCIsZnVsbERhdGU6XCJFRUVFLCBNTU1NIGQsIHlcIixsb25nRGF0ZTpcIk1NTU0gZCwgeVwiLG1lZGl1bURhdGU6XCJNTU0gZCwgeVwiLHNob3J0RGF0ZTpcIk0vZC95eVwiLG1lZGl1bVRpbWU6XCJoOm1tOnNzIGFcIixzaG9ydFRpbWU6XCJoOm1tIGFcIn0scGx1cmFsQ2F0OmZ1bmN0aW9uKGIpe3JldHVybiAxPT09Yj9cIm9uZVwiOlwib3RoZXJcIn19fX1mdW5jdGlvbiBRYihiKXtiPWIuc3BsaXQoXCIvXCIpO2Zvcih2YXIgYT1iLmxlbmd0aDthLS07KWJbYV09XG5sYihiW2FdKTtyZXR1cm4gYi5qb2luKFwiL1wiKX1mdW5jdGlvbiB6YyhiLGEsYyl7Yj11YShiLGMpO2EuJCRwcm90b2NvbD1iLnByb3RvY29sO2EuJCRob3N0PWIuaG9zdG5hbWU7YS4kJHBvcnQ9VShiLnBvcnQpfHx6ZVtiLnByb3RvY29sXXx8bnVsbH1mdW5jdGlvbiBBYyhiLGEsYyl7dmFyIGQ9XCIvXCIhPT1iLmNoYXJBdCgwKTtkJiYoYj1cIi9cIitiKTtiPXVhKGIsYyk7YS4kJHBhdGg9ZGVjb2RlVVJJQ29tcG9uZW50KGQmJlwiL1wiPT09Yi5wYXRobmFtZS5jaGFyQXQoMCk/Yi5wYXRobmFtZS5zdWJzdHJpbmcoMSk6Yi5wYXRobmFtZSk7YS4kJHNlYXJjaD1lYyhiLnNlYXJjaCk7YS4kJGhhc2g9ZGVjb2RlVVJJQ29tcG9uZW50KGIuaGFzaCk7YS4kJHBhdGgmJlwiL1wiIT1hLiQkcGF0aC5jaGFyQXQoMCkmJihhLiQkcGF0aD1cIi9cIithLiQkcGF0aCl9ZnVuY3Rpb24gcmEoYixhKXtpZigwPT09YS5pbmRleE9mKGIpKXJldHVybiBhLnN1YnN0cihiLmxlbmd0aCl9ZnVuY3Rpb24gZWIoYil7dmFyIGE9XG5iLmluZGV4T2YoXCIjXCIpO3JldHVybi0xPT1hP2I6Yi5zdWJzdHIoMCxhKX1mdW5jdGlvbiBSYihiKXtyZXR1cm4gYi5zdWJzdHIoMCxlYihiKS5sYXN0SW5kZXhPZihcIi9cIikrMSl9ZnVuY3Rpb24gQmMoYixhKXt0aGlzLiQkaHRtbDU9ITA7YT1hfHxcIlwiO3ZhciBjPVJiKGIpO3pjKGIsdGhpcyxiKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24oYSl7dmFyIGU9cmEoYyxhKTtpZighdihlKSl0aHJvdyBTYihcImlwdGhwcmZ4XCIsYSxjKTtBYyhlLHRoaXMsYik7dGhpcy4kJHBhdGh8fCh0aGlzLiQkcGF0aD1cIi9cIik7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYT1DYih0aGlzLiQkc2VhcmNoKSxiPXRoaXMuJCRoYXNoP1wiI1wiK2xiKHRoaXMuJCRoYXNoKTpcIlwiO3RoaXMuJCR1cmw9UWIodGhpcy4kJHBhdGgpKyhhP1wiP1wiK2E6XCJcIikrYjt0aGlzLiQkYWJzVXJsPWMrdGhpcy4kJHVybC5zdWJzdHIoMSl9O3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKGQpe3ZhciBlO1xuaWYoKGU9cmEoYixkKSkhPT10KXJldHVybiBkPWUsKGU9cmEoYSxlKSkhPT10P2MrKHJhKFwiL1wiLGUpfHxlKTpiK2Q7aWYoKGU9cmEoYyxkKSkhPT10KXJldHVybiBjK2U7aWYoYz09ZCtcIi9cIilyZXR1cm4gY319ZnVuY3Rpb24gVGIoYixhKXt2YXIgYz1SYihiKTt6YyhiLHRoaXMsYik7dGhpcy4kJHBhcnNlPWZ1bmN0aW9uKGQpe3ZhciBlPXJhKGIsZCl8fHJhKGMsZCksZT1cIiNcIj09ZS5jaGFyQXQoMCk/cmEoYSxlKTp0aGlzLiQkaHRtbDU/ZTpcIlwiO2lmKCF2KGUpKXRocm93IFNiKFwiaWhzaHByZnhcIixkLGEpO0FjKGUsdGhpcyxiKTtkPXRoaXMuJCRwYXRoO3ZhciBmPS9eXFwvW0EtWl06KFxcLy4qKS87MD09PWUuaW5kZXhPZihiKSYmKGU9ZS5yZXBsYWNlKGIsXCJcIikpO2YuZXhlYyhlKXx8KGQ9KGU9Zi5leGVjKGQpKT9lWzFdOmQpO3RoaXMuJCRwYXRoPWQ7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYz1DYih0aGlzLiQkc2VhcmNoKSxlPXRoaXMuJCRoYXNoP1xuXCIjXCIrbGIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1RYih0aGlzLiQkcGF0aCkrKGM/XCI/XCIrYzpcIlwiKStlO3RoaXMuJCRhYnNVcmw9YisodGhpcy4kJHVybD9hK3RoaXMuJCR1cmw6XCJcIil9O3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKGEpe2lmKGViKGIpPT1lYihhKSlyZXR1cm4gYX19ZnVuY3Rpb24gVWIoYixhKXt0aGlzLiQkaHRtbDU9ITA7VGIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBjPVJiKGIpO3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKGQpe3ZhciBlO2lmKGI9PWViKGQpKXJldHVybiBkO2lmKGU9cmEoYyxkKSlyZXR1cm4gYithK2U7aWYoYz09PWQrXCIvXCIpcmV0dXJuIGN9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGM9Q2IodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cIiNcIitsYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPVFiKHRoaXMuJCRwYXRoKSsoYz9cIj9cIitjOlwiXCIpK2U7dGhpcy4kJGFic1VybD1iK2ErdGhpcy4kJHVybH19ZnVuY3Rpb24gdGIoYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYl19fVxuZnVuY3Rpb24gQ2MoYixhKXtyZXR1cm4gZnVuY3Rpb24oYyl7aWYoeChjKSlyZXR1cm4gdGhpc1tiXTt0aGlzW2JdPWEoYyk7dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc319ZnVuY3Rpb24gV2QoKXt2YXIgYj1cIlwiLGE9ITE7dGhpcy5oYXNoUHJlZml4PWZ1bmN0aW9uKGEpe3JldHVybiB5KGEpPyhiPWEsdGhpcyk6Yn07dGhpcy5odG1sNU1vZGU9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGE9Yix0aGlzKTphfTt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixcIiRzbmlmZmVyXCIsXCIkcm9vdEVsZW1lbnRcIixmdW5jdGlvbihjLGQsZSxmKXtmdW5jdGlvbiBnKGEpe2MuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixrLmFic1VybCgpLGEpfXZhciBrLG0saD1kLmJhc2VIcmVmKCksbD1kLnVybCgpLG47YT8obj1sLnN1YnN0cmluZygwLGwuaW5kZXhPZihcIi9cIixsLmluZGV4T2YoXCIvL1wiKSsyKSkrKGh8fFwiL1wiKSxtPWUuaGlzdG9yeT9CYzpVYik6KG49XG5lYihsKSxtPVRiKTtrPW5ldyBtKG4sXCIjXCIrYik7ay4kJHBhcnNlKGsuJCRyZXdyaXRlKGwpKTt2YXIgcD0vXlxccyooamF2YXNjcmlwdHxtYWlsdG8pOi9pO2Yub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2lmKCFhLmN0cmxLZXkmJiFhLm1ldGFLZXkmJjIhPWEud2hpY2gpe2Zvcih2YXIgZT13KGEudGFyZ2V0KTtcImFcIiE9PUsoZVswXS5ub2RlTmFtZSk7KWlmKGVbMF09PT1mWzBdfHwhKGU9ZS5wYXJlbnQoKSlbMF0pcmV0dXJuO3ZhciBnPWUucHJvcChcImhyZWZcIik7VChnKSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09Zy50b1N0cmluZygpJiYoZz11YShnLmFuaW1WYWwpLmhyZWYpO2lmKCFwLnRlc3QoZykpe2lmKG09PT1VYil7dmFyIGg9ZS5hdHRyKFwiaHJlZlwiKXx8ZS5hdHRyKFwieGxpbms6aHJlZlwiKTtpZihoJiYwPmguaW5kZXhPZihcIjovL1wiKSlpZihnPVwiI1wiK2IsXCIvXCI9PWhbMF0pZz1uK2craDtlbHNlIGlmKFwiI1wiPT1oWzBdKWc9bitnKyhrLnBhdGgoKXx8XCIvXCIpK2g7XG5lbHNle3ZhciBsPWsucGF0aCgpLnNwbGl0KFwiL1wiKSxoPWguc3BsaXQoXCIvXCIpOzIhPT1sLmxlbmd0aHx8bFsxXXx8KGwubGVuZ3RoPTEpO2Zvcih2YXIgcT0wO3E8aC5sZW5ndGg7cSsrKVwiLlwiIT1oW3FdJiYoXCIuLlwiPT1oW3FdP2wucG9wKCk6aFtxXS5sZW5ndGgmJmwucHVzaChoW3FdKSk7Zz1uK2crbC5qb2luKFwiL1wiKX19bD1rLiQkcmV3cml0ZShnKTtnJiYoIWUuYXR0cihcInRhcmdldFwiKSYmbCYmIWEuaXNEZWZhdWx0UHJldmVudGVkKCkpJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGwhPWQudXJsKCkmJihrLiQkcGFyc2UobCksYy4kYXBwbHkoKSxXLmFuZ3VsYXJbXCJmZi02ODQyMDgtcHJldmVudERlZmF1bHRcIl09ITApKX19fSk7ay5hYnNVcmwoKSE9bCYmZC51cmwoay5hYnNVcmwoKSwhMCk7ZC5vblVybENoYW5nZShmdW5jdGlvbihhKXtrLmFic1VybCgpIT1hJiYoYy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIGI9ay5hYnNVcmwoKTtrLiQkcGFyc2UoYSk7Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixcbmEsYikuZGVmYXVsdFByZXZlbnRlZD8oay4kJHBhcnNlKGIpLGQudXJsKGIpKTpnKGIpfSksYy4kJHBoYXNlfHxjLiRkaWdlc3QoKSl9KTt2YXIgcT0wO2MuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGE9ZC51cmwoKSxiPWsuJCRyZXBsYWNlO3EmJmE9PWsuYWJzVXJsKCl8fChxKyssYy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixrLmFic1VybCgpLGEpLmRlZmF1bHRQcmV2ZW50ZWQ/ay4kJHBhcnNlKGEpOihkLnVybChrLmFic1VybCgpLGIpLGcoYSkpfSkpO2suJCRyZXBsYWNlPSExO3JldHVybiBxfSk7cmV0dXJuIGt9XX1mdW5jdGlvbiBYZCgpe3ZhciBiPSEwLGE9dGhpczt0aGlzLmRlYnVnRW5hYmxlZD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuJGdldD1bXCIkd2luZG93XCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhKXthIGluc3RhbmNlb2YgRXJyb3ImJihhLnN0YWNrP2E9YS5tZXNzYWdlJiZcbi0xPT09YS5zdGFjay5pbmRleE9mKGEubWVzc2FnZSk/XCJFcnJvcjogXCIrYS5tZXNzYWdlK1wiXFxuXCIrYS5zdGFjazphLnN0YWNrOmEuc291cmNlVVJMJiYoYT1hLm1lc3NhZ2UrXCJcXG5cIithLnNvdXJjZVVSTCtcIjpcIithLmxpbmUpKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3ZhciBiPWMuY29uc29sZXx8e30sZT1iW2FdfHxiLmxvZ3x8RTthPSExO3RyeXthPSEhZS5hcHBseX1jYXRjaChtKXt9cmV0dXJuIGE/ZnVuY3Rpb24oKXt2YXIgYT1bXTtyKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthLnB1c2goZChiKSl9KTtyZXR1cm4gZS5hcHBseShiLGEpfTpmdW5jdGlvbihhLGIpe2UoYSxudWxsPT1iP1wiXCI6Yil9fXJldHVybntsb2c6ZShcImxvZ1wiKSxpbmZvOmUoXCJpbmZvXCIpLHdhcm46ZShcIndhcm5cIiksZXJyb3I6ZShcImVycm9yXCIpLGRlYnVnOmZ1bmN0aW9uKCl7dmFyIGM9ZShcImRlYnVnXCIpO3JldHVybiBmdW5jdGlvbigpe2ImJmMuYXBwbHkoYSxhcmd1bWVudHMpfX0oKX19XX1mdW5jdGlvbiBrYShiLFxuYSl7aWYoXCJfX2RlZmluZUdldHRlcl9fXCI9PT1ifHxcIl9fZGVmaW5lU2V0dGVyX19cIj09PWJ8fFwiX19sb29rdXBHZXR0ZXJfX1wiPT09Ynx8XCJfX2xvb2t1cFNldHRlcl9fXCI9PT1ifHxcIl9fcHJvdG9fX1wiPT09Yil0aHJvdyBsYShcImlzZWNmbGRcIixhKTtyZXR1cm4gYn1mdW5jdGlvbiB2YShiLGEpe2lmKGIpe2lmKGIuY29uc3RydWN0b3I9PT1iKXRocm93IGxhKFwiaXNlY2ZuXCIsYSk7aWYoYi5kb2N1bWVudCYmYi5sb2NhdGlvbiYmYi5hbGVydCYmYi5zZXRJbnRlcnZhbCl0aHJvdyBsYShcImlzZWN3aW5kb3dcIixhKTtpZihiLmNoaWxkcmVuJiYoYi5ub2RlTmFtZXx8Yi5wcm9wJiZiLmF0dHImJmIuZmluZCkpdGhyb3cgbGEoXCJpc2VjZG9tXCIsYSk7aWYoYj09PU9iamVjdCl0aHJvdyBsYShcImlzZWNvYmpcIixhKTt9cmV0dXJuIGJ9ZnVuY3Rpb24gdWIoYixhLGMsZCxlKXt2YShiLGQpO2U9ZXx8e307YT1hLnNwbGl0KFwiLlwiKTtmb3IodmFyIGYsZz0wOzE8YS5sZW5ndGg7ZysrKXtmPWthKGEuc2hpZnQoKSxcbmQpO3ZhciBrPXZhKGJbZl0sZCk7a3x8KGs9e30sYltmXT1rKTtiPWs7Yi50aGVuJiZlLnVud3JhcFByb21pc2VzJiYod2EoZCksXCIkJHZcImluIGJ8fGZ1bmN0aW9uKGEpe2EudGhlbihmdW5jdGlvbihiKXthLiQkdj1ifSl9KGIpLGIuJCR2PT09dCYmKGIuJCR2PXt9KSxiPWIuJCR2KX1mPWthKGEuc2hpZnQoKSxkKTt2YShiW2ZdLGQpO3JldHVybiBiW2ZdPWN9ZnVuY3Rpb24gRGMoYixhLGMsZCxlLGYsZyl7a2EoYixmKTtrYShhLGYpO2thKGMsZik7a2EoZCxmKTtrYShlLGYpO3JldHVybiBnLnVud3JhcFByb21pc2VzP2Z1bmN0aW9uKGcsbSl7dmFyIGg9bSYmbS5oYXNPd25Qcm9wZXJ0eShiKT9tOmcsbDtpZihudWxsPT1oKXJldHVybiBoOyhoPWhbYl0pJiZoLnRoZW4mJih3YShmKSxcIiQkdlwiaW4gaHx8KGw9aCxsLiQkdj10LGwudGhlbihmdW5jdGlvbihhKXtsLiQkdj1hfSkpLGg9aC4kJHYpO2lmKCFhKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7KGg9aFthXSkmJmgudGhlbiYmXG4od2EoZiksXCIkJHZcImluIGh8fChsPWgsbC4kJHY9dCxsLnRoZW4oZnVuY3Rpb24oYSl7bC4kJHY9YX0pKSxoPWguJCR2KTtpZighYylyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0OyhoPWhbY10pJiZoLnRoZW4mJih3YShmKSxcIiQkdlwiaW4gaHx8KGw9aCxsLiQkdj10LGwudGhlbihmdW5jdGlvbihhKXtsLiQkdj1hfSkpLGg9aC4kJHYpO2lmKCFkKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7KGg9aFtkXSkmJmgudGhlbiYmKHdhKGYpLFwiJCR2XCJpbiBofHwobD1oLGwuJCR2PXQsbC50aGVuKGZ1bmN0aW9uKGEpe2wuJCR2PWF9KSksaD1oLiQkdik7aWYoIWUpcmV0dXJuIGg7aWYobnVsbD09aClyZXR1cm4gdDsoaD1oW2VdKSYmaC50aGVuJiYod2EoZiksXCIkJHZcImluIGh8fChsPWgsbC4kJHY9dCxsLnRoZW4oZnVuY3Rpb24oYSl7bC4kJHY9YX0pKSxoPWguJCR2KTtyZXR1cm4gaH06ZnVuY3Rpb24oZixnKXt2YXIgaD1nJiZnLmhhc093blByb3BlcnR5KGIpP2c6ZjtpZihudWxsPT1cbmgpcmV0dXJuIGg7aD1oW2JdO2lmKCFhKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7aD1oW2FdO2lmKCFjKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7aD1oW2NdO2lmKCFkKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7aD1oW2RdO3JldHVybiBlP251bGw9PWg/dDpoPWhbZV06aH19ZnVuY3Rpb24gRWMoYixhLGMpe2lmKFZiLmhhc093blByb3BlcnR5KGIpKXJldHVybiBWYltiXTt2YXIgZD1iLnNwbGl0KFwiLlwiKSxlPWQubGVuZ3RoLGY7aWYoYS5jc3ApZj02PmU/RGMoZFswXSxkWzFdLGRbMl0sZFszXSxkWzRdLGMsYSk6ZnVuY3Rpb24oYixmKXt2YXIgZz0wLGs7ZG8gaz1EYyhkW2crK10sZFtnKytdLGRbZysrXSxkW2crK10sZFtnKytdLGMsYSkoYixmKSxmPXQsYj1rO3doaWxlKGc8ZSk7cmV0dXJuIGt9O2Vsc2V7dmFyIGc9XCJ2YXIgcDtcXG5cIjtyKGQsZnVuY3Rpb24oYixkKXtrYShiLGMpO2crPVwiaWYocyA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xcbnM9XCIrXG4oZD9cInNcIjonKChrJiZrLmhhc093blByb3BlcnR5KFwiJytiKydcIikpP2s6cyknKSsnW1wiJytiKydcIl07XFxuJysoYS51bndyYXBQcm9taXNlcz8naWYgKHMgJiYgcy50aGVuKSB7XFxuIHB3KFwiJytjLnJlcGxhY2UoLyhbXCJcXHJcXG5dKS9nLFwiXFxcXCQxXCIpKydcIik7XFxuIGlmICghKFwiJCR2XCIgaW4gcykpIHtcXG4gcD1zO1xcbiBwLiQkdiA9IHVuZGVmaW5lZDtcXG4gcC50aGVuKGZ1bmN0aW9uKHYpIHtwLiQkdj12O30pO1xcbn1cXG4gcz1zLiQkdlxcbn1cXG4nOlwiXCIpfSk7dmFyIGc9ZytcInJldHVybiBzO1wiLGs9bmV3IEZ1bmN0aW9uKFwic1wiLFwia1wiLFwicHdcIixnKTtrLnRvU3RyaW5nPWJhKGcpO2Y9YS51bndyYXBQcm9taXNlcz9mdW5jdGlvbihhLGIpe3JldHVybiBrKGEsYix3YSl9Omt9XCJoYXNPd25Qcm9wZXJ0eVwiIT09YiYmKFZiW2JdPWYpO3JldHVybiBmfWZ1bmN0aW9uIFlkKCl7dmFyIGI9e30sYT17Y3NwOiExLHVud3JhcFByb21pc2VzOiExLGxvZ1Byb21pc2VXYXJuaW5nczohMH07dGhpcy51bndyYXBQcm9taXNlcz1cbmZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhLnVud3JhcFByb21pc2VzPSEhYix0aGlzKTphLnVud3JhcFByb21pc2VzfTt0aGlzLmxvZ1Byb21pc2VXYXJuaW5ncz1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS5sb2dQcm9taXNlV2FybmluZ3M9Yix0aGlzKTphLmxvZ1Byb21pc2VXYXJuaW5nc307dGhpcy4kZ2V0PVtcIiRmaWx0ZXJcIixcIiRzbmlmZmVyXCIsXCIkbG9nXCIsZnVuY3Rpb24oYyxkLGUpe2EuY3NwPWQuY3NwO3dhPWZ1bmN0aW9uKGIpe2EubG9nUHJvbWlzZVdhcm5pbmdzJiYhRmMuaGFzT3duUHJvcGVydHkoYikmJihGY1tiXT0hMCxlLndhcm4oXCJbJHBhcnNlXSBQcm9taXNlIGZvdW5kIGluIHRoZSBleHByZXNzaW9uIGBcIitiK1wiYC4gQXV0b21hdGljIHVud3JhcHBpbmcgb2YgcHJvbWlzZXMgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkZXByZWNhdGVkLlwiKSl9O3JldHVybiBmdW5jdGlvbihkKXt2YXIgZTtzd2l0Y2godHlwZW9mIGQpe2Nhc2UgXCJzdHJpbmdcIjppZihiLmhhc093blByb3BlcnR5KGQpKXJldHVybiBiW2RdO1xuZT1uZXcgV2IoYSk7ZT0obmV3IGZiKGUsYyxhKSkucGFyc2UoZCk7XCJoYXNPd25Qcm9wZXJ0eVwiIT09ZCYmKGJbZF09ZSk7cmV0dXJuIGU7Y2FzZSBcImZ1bmN0aW9uXCI6cmV0dXJuIGQ7ZGVmYXVsdDpyZXR1cm4gRX19fV19ZnVuY3Rpb24gJGQoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGEpe3JldHVybiBBZShmdW5jdGlvbihhKXtiLiRldmFsQXN5bmMoYSl9LGEpfV19ZnVuY3Rpb24gQWUoYixhKXtmdW5jdGlvbiBjKGEpe3JldHVybiBhfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGcoYSl9dmFyIGU9ZnVuY3Rpb24oKXt2YXIgZz1bXSxoLGw7cmV0dXJuIGw9e3Jlc29sdmU6ZnVuY3Rpb24oYSl7aWYoZyl7dmFyIGM9ZztnPXQ7aD1mKGEpO2MubGVuZ3RoJiZiKGZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxkPWMubGVuZ3RoO2I8ZDtiKyspYT1jW2JdLGgudGhlbihhWzBdLGFbMV0sYVsyXSl9KX19LHJlamVjdDpmdW5jdGlvbihhKXtsLnJlc29sdmUoayhhKSl9LFxubm90aWZ5OmZ1bmN0aW9uKGEpe2lmKGcpe3ZhciBjPWc7Zy5sZW5ndGgmJmIoZnVuY3Rpb24oKXtmb3IodmFyIGIsZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyliPWNbZF0sYlsyXShhKX0pfX0scHJvbWlzZTp7dGhlbjpmdW5jdGlvbihiLGYsayl7dmFyIGw9ZSgpLEY9ZnVuY3Rpb24oZCl7dHJ5e2wucmVzb2x2ZSgoUChiKT9iOmMpKGQpKX1jYXRjaChlKXtsLnJlamVjdChlKSxhKGUpfX0sdT1mdW5jdGlvbihiKXt0cnl7bC5yZXNvbHZlKChQKGYpP2Y6ZCkoYikpfWNhdGNoKGMpe2wucmVqZWN0KGMpLGEoYyl9fSxBPWZ1bmN0aW9uKGIpe3RyeXtsLm5vdGlmeSgoUChrKT9rOmMpKGIpKX1jYXRjaChkKXthKGQpfX07Zz9nLnB1c2goW0YsdSxBXSk6aC50aGVuKEYsdSxBKTtyZXR1cm4gbC5wcm9taXNlfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGEpfSxcImZpbmFsbHlcIjpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyl7dmFyIGQ9ZSgpO2M/ZC5yZXNvbHZlKGEpOlxuZC5yZWplY3QoYSk7cmV0dXJuIGQucHJvbWlzZX1mdW5jdGlvbiBkKGUsZil7dmFyIGc9bnVsbDt0cnl7Zz0oYXx8YykoKX1jYXRjaChrKXtyZXR1cm4gYihrLCExKX1yZXR1cm4gZyYmUChnLnRoZW4pP2cudGhlbihmdW5jdGlvbigpe3JldHVybiBiKGUsZil9LGZ1bmN0aW9uKGEpe3JldHVybiBiKGEsITEpfSk6YihlLGYpfXJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSwhMCl9LGZ1bmN0aW9uKGEpe3JldHVybiBkKGEsITEpfSl9fX19LGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJlAoYS50aGVuKT9hOnt0aGVuOmZ1bmN0aW9uKGMpe3ZhciBkPWUoKTtiKGZ1bmN0aW9uKCl7ZC5yZXNvbHZlKGMoYSkpfSk7cmV0dXJuIGQucHJvbWlzZX19fSxnPWZ1bmN0aW9uKGEpe3ZhciBiPWUoKTtiLnJlamVjdChhKTtyZXR1cm4gYi5wcm9taXNlfSxrPWZ1bmN0aW9uKGMpe3JldHVybnt0aGVuOmZ1bmN0aW9uKGYsZyl7dmFyIGs9ZSgpO2IoZnVuY3Rpb24oKXt0cnl7ay5yZXNvbHZlKChQKGcpP1xuZzpkKShjKSl9Y2F0Y2goYil7ay5yZWplY3QoYiksYShiKX19KTtyZXR1cm4gay5wcm9taXNlfX19O3JldHVybntkZWZlcjplLHJlamVjdDpnLHdoZW46ZnVuY3Rpb24oayxoLGwsbil7dmFyIHA9ZSgpLHEscz1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKFAoaCk/aDpjKShiKX1jYXRjaChkKXtyZXR1cm4gYShkKSxnKGQpfX0sRj1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKFAobCk/bDpkKShiKX1jYXRjaChjKXtyZXR1cm4gYShjKSxnKGMpfX0sdT1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKFAobik/bjpjKShiKX1jYXRjaChkKXthKGQpfX07YihmdW5jdGlvbigpe2YoaykudGhlbihmdW5jdGlvbihhKXtxfHwocT0hMCxwLnJlc29sdmUoZihhKS50aGVuKHMsRix1KSkpfSxmdW5jdGlvbihhKXtxfHwocT0hMCxwLnJlc29sdmUoRihhKSkpfSxmdW5jdGlvbihhKXtxfHxwLm5vdGlmeSh1KGEpKX0pfSk7cmV0dXJuIHAucHJvbWlzZX0sYWxsOmZ1bmN0aW9uKGEpe3ZhciBiPWUoKSxjPTAsZD1KKGEpP1xuW106e307cihhLGZ1bmN0aW9uKGEsZSl7YysrO2YoYSkudGhlbihmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHwoZFtlXT1hLC0tY3x8Yi5yZXNvbHZlKGQpKX0sZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8Yi5yZWplY3QoYSl9KX0pOzA9PT1jJiZiLnJlc29sdmUoZCk7cmV0dXJuIGIucHJvbWlzZX19fWZ1bmN0aW9uIGdlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixhKXt2YXIgYz1iLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lLGQ9Yi5jYW5jZWxBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8Yi5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZT0hIWMsZj1lP2Z1bmN0aW9uKGEpe3ZhciBiPWMoYSk7cmV0dXJuIGZ1bmN0aW9uKCl7ZChiKX19OlxuZnVuY3Rpb24oYil7dmFyIGM9YShiLDE2LjY2LCExKTtyZXR1cm4gZnVuY3Rpb24oKXthLmNhbmNlbChjKX19O2Yuc3VwcG9ydGVkPWU7cmV0dXJuIGZ9XX1mdW5jdGlvbiBaZCgpe3ZhciBiPTEwLGE9QyhcIiRyb290U2NvcGVcIiksYz1udWxsO3RoaXMuZGlnZXN0VHRsPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHBhcnNlXCIsXCIkYnJvd3NlclwiLGZ1bmN0aW9uKGQsZSxmLGcpe2Z1bmN0aW9uIGsoKXt0aGlzLiRpZD1oYigpO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpc1tcInRoaXNcIl09dGhpcy4kcm9vdD10aGlzO3RoaXMuJCRkZXN0cm95ZWQ9ITE7dGhpcy4kJGFzeW5jUXVldWU9W107dGhpcy4kJHBvc3REaWdlc3RRdWV1ZT1cbltdO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kJGlzb2xhdGVCaW5kaW5ncz17fX1mdW5jdGlvbiBtKGIpe2lmKHAuJCRwaGFzZSl0aHJvdyBhKFwiaW5wcm9nXCIscC4kJHBoYXNlKTtwLiQkcGhhc2U9Yn1mdW5jdGlvbiBoKGEsYil7dmFyIGM9ZihhKTtXYShjLGIpO3JldHVybiBjfWZ1bmN0aW9uIGwoYSxiLGMpe2RvIGEuJCRsaXN0ZW5lckNvdW50W2NdLT1iLDA9PT1hLiQkbGlzdGVuZXJDb3VudFtjXSYmZGVsZXRlIGEuJCRsaXN0ZW5lckNvdW50W2NdO3doaWxlKGE9YS4kcGFyZW50KX1mdW5jdGlvbiBuKCl7fWsucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjprLCRuZXc6ZnVuY3Rpb24oYSl7YT8oYT1uZXcgayxhLiRyb290PXRoaXMuJHJvb3QsYS4kJGFzeW5jUXVldWU9dGhpcy4kJGFzeW5jUXVldWUsYS4kJHBvc3REaWdlc3RRdWV1ZT10aGlzLiQkcG9zdERpZ2VzdFF1ZXVlKToodGhpcy4kJGNoaWxkU2NvcGVDbGFzc3x8KHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9XG5mdW5jdGlvbigpe3RoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiRpZD1oYigpO3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9bnVsbH0sdGhpcy4kJGNoaWxkU2NvcGVDbGFzcy5wcm90b3R5cGU9dGhpcyksYT1uZXcgdGhpcy4kJGNoaWxkU2NvcGVDbGFzcyk7YVtcInRoaXNcIl09YTthLiRwYXJlbnQ9dGhpczthLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkVGFpbDt0aGlzLiQkY2hpbGRIZWFkP3RoaXMuJCRjaGlsZFRhaWw9dGhpcy4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nPWE6dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPWE7cmV0dXJuIGF9LCR3YXRjaDpmdW5jdGlvbihhLGIsZCl7dmFyIGU9aChhLFwid2F0Y2hcIiksZj10aGlzLiQkd2F0Y2hlcnMsZz17Zm46YixsYXN0Om4sZ2V0OmUsZXhwOmEsXG5lcTohIWR9O2M9bnVsbDtpZighUChiKSl7dmFyIGs9aChifHxFLFwibGlzdGVuZXJcIik7Zy5mbj1mdW5jdGlvbihhLGIsYyl7ayhjKX19aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJmUuY29uc3RhbnQpe3ZhciBsPWcuZm47Zy5mbj1mdW5jdGlvbihhLGIsYyl7bC5jYWxsKHRoaXMsYSxiLGMpO1NhKGYsZyl9fWZ8fChmPXRoaXMuJCR3YXRjaGVycz1bXSk7Zi51bnNoaWZ0KGcpO3JldHVybiBmdW5jdGlvbigpe1NhKGYsZyk7Yz1udWxsfX0sJHdhdGNoQ29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZCxlLGcsaz0xPGIubGVuZ3RoLGg9MCxsPWYoYSksbT1bXSxwPXt9LG49ITAscj0wO3JldHVybiB0aGlzLiR3YXRjaChmdW5jdGlvbigpe2Q9bChjKTt2YXIgYSxiLGY7aWYoVChkKSlpZihQYShkKSlmb3IoZSE9PW0mJihlPW0scj1lLmxlbmd0aD0wLGgrKyksYT1kLmxlbmd0aCxyIT09YSYmKGgrKyxlLmxlbmd0aD1yPWEpLGI9MDtiPGE7YisrKWY9ZVtiXSE9PWVbYl0mJmRbYl0hPT1cbmRbYl0sZnx8ZVtiXT09PWRbYl18fChoKyssZVtiXT1kW2JdKTtlbHNle2UhPT1wJiYoZT1wPXt9LHI9MCxoKyspO2E9MDtmb3IoYiBpbiBkKWQuaGFzT3duUHJvcGVydHkoYikmJihhKyssZS5oYXNPd25Qcm9wZXJ0eShiKT8oZj1lW2JdIT09ZVtiXSYmZFtiXSE9PWRbYl0sZnx8ZVtiXT09PWRbYl18fChoKyssZVtiXT1kW2JdKSk6KHIrKyxlW2JdPWRbYl0saCsrKSk7aWYocj5hKWZvcihiIGluIGgrKyxlKWUuaGFzT3duUHJvcGVydHkoYikmJiFkLmhhc093blByb3BlcnR5KGIpJiYoci0tLGRlbGV0ZSBlW2JdKX1lbHNlIGUhPT1kJiYoZT1kLGgrKyk7cmV0dXJuIGh9LGZ1bmN0aW9uKCl7bj8obj0hMSxiKGQsZCxjKSk6YihkLGcsYyk7aWYoaylpZihUKGQpKWlmKFBhKGQpKXtnPUFycmF5KGQubGVuZ3RoKTtmb3IodmFyIGE9MDthPGQubGVuZ3RoO2ErKylnW2FdPWRbYV19ZWxzZSBmb3IoYSBpbiBnPXt9LGQpa2IuY2FsbChkLGEpJiYoZ1thXT1kW2FdKTtlbHNlIGc9ZH0pfSwkZGlnZXN0OmZ1bmN0aW9uKCl7dmFyIGQsXG5mLGssaCxsPXRoaXMuJCRhc3luY1F1ZXVlLHI9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZSxSLHosdD1iLEwsTz1bXSx3LEIsSTttKFwiJGRpZ2VzdFwiKTtnLiQkY2hlY2tVcmxDaGFuZ2UoKTtjPW51bGw7ZG97ej0hMTtmb3IoTD10aGlzO2wubGVuZ3RoOyl7dHJ5e0k9bC5zaGlmdCgpLEkuc2NvcGUuJGV2YWwoSS5leHByZXNzaW9uKX1jYXRjaChIKXtwLiQkcGhhc2U9bnVsbCxlKEgpfWM9bnVsbH1hOmRve2lmKGg9TC4kJHdhdGNoZXJzKWZvcihSPWgubGVuZ3RoO1ItLTspdHJ5e2lmKGQ9aFtSXSlpZigoZj1kLmdldChMKSkhPT0oaz1kLmxhc3QpJiYhKGQuZXE/QWEoZixrKTpcIm51bWJlclwiPT09dHlwZW9mIGYmJlwibnVtYmVyXCI9PT10eXBlb2YgayYmaXNOYU4oZikmJmlzTmFOKGspKSl6PSEwLGM9ZCxkLmxhc3Q9ZC5lcT9IYShmLG51bGwpOmYsZC5mbihmLGs9PT1uP2Y6ayxMKSw1PnQmJih3PTQtdCxPW3ddfHwoT1t3XT1bXSksQj1QKGQuZXhwKT9cImZuOiBcIisoZC5leHAubmFtZXx8ZC5leHAudG9TdHJpbmcoKSk6XG5kLmV4cCxCKz1cIjsgbmV3VmFsOiBcIituYShmKStcIjsgb2xkVmFsOiBcIituYShrKSxPW3ddLnB1c2goQikpO2Vsc2UgaWYoZD09PWMpe3o9ITE7YnJlYWsgYX19Y2F0Y2goeSl7cC4kJHBoYXNlPW51bGwsZSh5KX1pZighKGg9TC4kJGNoaWxkSGVhZHx8TCE9PXRoaXMmJkwuJCRuZXh0U2libGluZykpZm9yKDtMIT09dGhpcyYmIShoPUwuJCRuZXh0U2libGluZyk7KUw9TC4kcGFyZW50fXdoaWxlKEw9aCk7aWYoKHp8fGwubGVuZ3RoKSYmIXQtLSl0aHJvdyBwLiQkcGhhc2U9bnVsbCxhKFwiaW5mZGlnXCIsYixuYShPKSk7fXdoaWxlKHp8fGwubGVuZ3RoKTtmb3IocC4kJHBoYXNlPW51bGw7ci5sZW5ndGg7KXRyeXtyLnNoaWZ0KCkoKX1jYXRjaCh2KXtlKHYpfX0sJGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZighdGhpcy4kJGRlc3Ryb3llZCl7dmFyIGE9dGhpcy4kcGFyZW50O3RoaXMuJGJyb2FkY2FzdChcIiRkZXN0cm95XCIpO3RoaXMuJCRkZXN0cm95ZWQ9ITA7dGhpcyE9PXAmJihyKHRoaXMuJCRsaXN0ZW5lckNvdW50LFxuQmIobnVsbCxsLHRoaXMpKSxhLiQkY2hpbGRIZWFkPT10aGlzJiYoYS4kJGNoaWxkSGVhZD10aGlzLiQkbmV4dFNpYmxpbmcpLGEuJCRjaGlsZFRhaWw9PXRoaXMmJihhLiQkY2hpbGRUYWlsPXRoaXMuJCRwcmV2U2libGluZyksdGhpcy4kJHByZXZTaWJsaW5nJiYodGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmc9dGhpcy4kJG5leHRTaWJsaW5nKSx0aGlzLiQkbmV4dFNpYmxpbmcmJih0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZz10aGlzLiQkcHJldlNpYmxpbmcpLHRoaXMuJHBhcmVudD10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD10aGlzLiRyb290PW51bGwsdGhpcy4kJGxpc3RlbmVycz17fSx0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJGFzeW5jUXVldWU9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZT1bXSx0aGlzLiRkZXN0cm95PXRoaXMuJGRpZ2VzdD10aGlzLiRhcHBseT1FLHRoaXMuJG9uPVxudGhpcy4kd2F0Y2g9ZnVuY3Rpb24oKXtyZXR1cm4gRX0pfX0sJGV2YWw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhKSh0aGlzLGIpfSwkZXZhbEFzeW5jOmZ1bmN0aW9uKGEpe3AuJCRwaGFzZXx8cC4kJGFzeW5jUXVldWUubGVuZ3RofHxnLmRlZmVyKGZ1bmN0aW9uKCl7cC4kJGFzeW5jUXVldWUubGVuZ3RoJiZwLiRkaWdlc3QoKX0pO3RoaXMuJCRhc3luY1F1ZXVlLnB1c2goe3Njb3BlOnRoaXMsZXhwcmVzc2lvbjphfSl9LCQkcG9zdERpZ2VzdDpmdW5jdGlvbihhKXt0aGlzLiQkcG9zdERpZ2VzdFF1ZXVlLnB1c2goYSl9LCRhcHBseTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIG0oXCIkYXBwbHlcIiksdGhpcy4kZXZhbChhKX1jYXRjaChiKXtlKGIpfWZpbmFsbHl7cC4kJHBoYXNlPW51bGw7dHJ5e3AuJGRpZ2VzdCgpfWNhdGNoKGMpe3Rocm93IGUoYyksYzt9fX0sJG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy4kJGxpc3RlbmVyc1thXTtjfHwodGhpcy4kJGxpc3RlbmVyc1thXT1cbmM9W10pO2MucHVzaChiKTt2YXIgZD10aGlzO2RvIGQuJCRsaXN0ZW5lckNvdW50W2FdfHwoZC4kJGxpc3RlbmVyQ291bnRbYV09MCksZC4kJGxpc3RlbmVyQ291bnRbYV0rKzt3aGlsZShkPWQuJHBhcmVudCk7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtjW1JhKGMsYildPW51bGw7bChlLDEsYSl9fSwkZW1pdDpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQsZj10aGlzLGc9ITEsaz17bmFtZTphLHRhcmdldFNjb3BlOmYsc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7Zz0hMH0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtrLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGRlZmF1bHRQcmV2ZW50ZWQ6ITF9LGg9W2tdLmNvbmNhdChCYS5jYWxsKGFyZ3VtZW50cywxKSksbCxtO2Rve2Q9Zi4kJGxpc3RlbmVyc1thXXx8YztrLmN1cnJlbnRTY29wZT1mO2w9MDtmb3IobT1kLmxlbmd0aDtsPG07bCsrKWlmKGRbbF0pdHJ5e2RbbF0uYXBwbHkobnVsbCxoKX1jYXRjaChwKXtlKHApfWVsc2UgZC5zcGxpY2UobCxcbjEpLGwtLSxtLS07aWYoZylicmVhaztmPWYuJHBhcmVudH13aGlsZShmKTtyZXR1cm4ga30sJGJyb2FkY2FzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLGQ9dGhpcyxmPXtuYW1lOmEsdGFyZ2V0U2NvcGU6dGhpcyxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2YuZGVmYXVsdFByZXZlbnRlZD0hMH0sZGVmYXVsdFByZXZlbnRlZDohMX0sZz1bZl0uY29uY2F0KEJhLmNhbGwoYXJndW1lbnRzLDEpKSxrLGg7Yz1kOyl7Zi5jdXJyZW50U2NvcGU9YztkPWMuJCRsaXN0ZW5lcnNbYV18fFtdO2s9MDtmb3IoaD1kLmxlbmd0aDtrPGg7aysrKWlmKGRba10pdHJ5e2Rba10uYXBwbHkobnVsbCxnKX1jYXRjaChsKXtlKGwpfWVsc2UgZC5zcGxpY2UoaywxKSxrLS0saC0tO2lmKCEoZD1jLiQkbGlzdGVuZXJDb3VudFthXSYmYy4kJGNoaWxkSGVhZHx8YyE9PXRoaXMmJmMuJCRuZXh0U2libGluZykpZm9yKDtjIT09dGhpcyYmIShkPWMuJCRuZXh0U2libGluZyk7KWM9Yy4kcGFyZW50fXJldHVybiBmfX07XG52YXIgcD1uZXcgaztyZXR1cm4gcH1dfWZ1bmN0aW9uIGNkKCl7dmFyIGI9L15cXHMqKGh0dHBzP3xmdHB8bWFpbHRvfHRlbHxmaWxlKTovLGE9L15cXHMqKChodHRwcz98ZnRwfGZpbGUpOnxkYXRhOmltYWdlXFwvKS87dGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9ZD9hOmIsZjtpZighUXx8ODw9USlpZihmPXVhKGMpLmhyZWYsXCJcIiE9PWYmJiFmLm1hdGNoKGUpKXJldHVyblwidW5zYWZlOlwiK2Y7cmV0dXJuIGN9fX1mdW5jdGlvbiBCZShiKXtpZihcInNlbGZcIj09PWIpcmV0dXJuIGI7aWYodihiKSl7aWYoLTE8Yi5pbmRleE9mKFwiKioqXCIpKXRocm93IHhhKFwiaXdjYXJkXCIsYik7Yj1iLnJlcGxhY2UoLyhbLSgpXFxbXFxde30rPyouJFxcXnwsOiM8IVxcXFxdKS9nLFxuXCJcXFxcJDFcIikucmVwbGFjZSgvXFx4MDgvZyxcIlxcXFx4MDhcIikucmVwbGFjZShcIlxcXFwqXFxcXCpcIixcIi4qXCIpLnJlcGxhY2UoXCJcXFxcKlwiLFwiW146Ly4/JjtdKlwiKTtyZXR1cm4gUmVnRXhwKFwiXlwiK2IrXCIkXCIpfWlmKGpiKGIpKXJldHVybiBSZWdFeHAoXCJeXCIrYi5zb3VyY2UrXCIkXCIpO3Rocm93IHhhKFwiaW1hdGNoZXJcIik7fWZ1bmN0aW9uIEdjKGIpe3ZhciBhPVtdO3koYikmJnIoYixmdW5jdGlvbihiKXthLnB1c2goQmUoYikpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gYmUoKXt0aGlzLlNDRV9DT05URVhUUz1nYTt2YXIgYj1bXCJzZWxmXCJdLGE9W107dGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1HYyhhKSk7cmV0dXJuIGJ9O3RoaXMucmVzb3VyY2VVcmxCbGFja2xpc3Q9ZnVuY3Rpb24oYil7YXJndW1lbnRzLmxlbmd0aCYmKGE9R2MoYikpO3JldHVybiBhfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhKXt2YXIgYj1cbmZ1bmN0aW9uKGEpe3RoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gYX19O2EmJihiLnByb3RvdHlwZT1uZXcgYSk7Yi5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCl9O2IucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpfTtyZXR1cm4gYn12YXIgZT1mdW5jdGlvbihhKXt0aHJvdyB4YShcInVuc2FmZVwiKTt9O2MuaGFzKFwiJHNhbml0aXplXCIpJiYoZT1jLmdldChcIiRzYW5pdGl6ZVwiKSk7dmFyIGY9ZCgpLGc9e307Z1tnYS5IVE1MXT1kKGYpO2dbZ2EuQ1NTXT1kKGYpO2dbZ2EuVVJMXT1kKGYpO2dbZ2EuSlNdPWQoZik7Z1tnYS5SRVNPVVJDRV9VUkxdPWQoZ1tnYS5VUkxdKTtyZXR1cm57dHJ1c3RBczpmdW5jdGlvbihhLGIpe3ZhciBjPWcuaGFzT3duUHJvcGVydHkoYSk/Z1thXTpudWxsO2lmKCFjKXRocm93IHhhKFwiaWNvbnRleHRcIixcbmEsYik7aWYobnVsbD09PWJ8fGI9PT10fHxcIlwiPT09YilyZXR1cm4gYjtpZihcInN0cmluZ1wiIT09dHlwZW9mIGIpdGhyb3cgeGEoXCJpdHlwZVwiLGEpO3JldHVybiBuZXcgYyhiKX0sZ2V0VHJ1c3RlZDpmdW5jdGlvbihjLGQpe2lmKG51bGw9PT1kfHxkPT09dHx8XCJcIj09PWQpcmV0dXJuIGQ7dmFyIGY9Zy5oYXNPd25Qcm9wZXJ0eShjKT9nW2NdOm51bGw7aWYoZiYmZCBpbnN0YW5jZW9mIGYpcmV0dXJuIGQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtpZihjPT09Z2EuUkVTT1VSQ0VfVVJMKXt2YXIgZj11YShkLnRvU3RyaW5nKCkpLGwsbixwPSExO2w9MDtmb3Iobj1iLmxlbmd0aDtsPG47bCsrKWlmKFwic2VsZlwiPT09YltsXT9QYihmKTpiW2xdLmV4ZWMoZi5ocmVmKSl7cD0hMDticmVha31pZihwKWZvcihsPTAsbj1hLmxlbmd0aDtsPG47bCsrKWlmKFwic2VsZlwiPT09YVtsXT9QYihmKTphW2xdLmV4ZWMoZi5ocmVmKSl7cD0hMTticmVha31pZihwKXJldHVybiBkO3Rocm93IHhhKFwiaW5zZWN1cmxcIixcbmQudG9TdHJpbmcoKSk7fWlmKGM9PT1nYS5IVE1MKXJldHVybiBlKGQpO3Rocm93IHhhKFwidW5zYWZlXCIpO30sdmFsdWVPZjpmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGY/YS4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpOmF9fX1dfWZ1bmN0aW9uIGFlKCl7dmFyIGI9ITA7dGhpcy5lbmFibGVkPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPSEhYSk7cmV0dXJuIGJ9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRzbmlmZmVyXCIsXCIkc2NlRGVsZWdhdGVcIixmdW5jdGlvbihhLGMsZCl7aWYoYiYmYy5tc2llJiY4PmMubXNpZURvY3VtZW50TW9kZSl0aHJvdyB4YShcImllcXVpcmtzXCIpO3ZhciBlPWhhKGdhKTtlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiBifTtlLnRydXN0QXM9ZC50cnVzdEFzO2UuZ2V0VHJ1c3RlZD1kLmdldFRydXN0ZWQ7ZS52YWx1ZU9mPWQudmFsdWVPZjtifHwoZS50cnVzdEFzPWUuZ2V0VHJ1c3RlZD1mdW5jdGlvbihhLGIpe3JldHVybiBifSxcbmUudmFsdWVPZj1RYSk7ZS5wYXJzZUFzPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKTtyZXR1cm4gZC5saXRlcmFsJiZkLmNvbnN0YW50P2Q6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gZS5nZXRUcnVzdGVkKGIsZChhLGMpKX19O3ZhciBmPWUucGFyc2VBcyxnPWUuZ2V0VHJ1c3RlZCxrPWUudHJ1c3RBcztyKGdhLGZ1bmN0aW9uKGEsYil7dmFyIGM9SyhiKTtlW1phKFwicGFyc2VfYXNfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBmKGEsYil9O2VbWmEoXCJnZXRfdHJ1c3RlZF9cIitjKV09ZnVuY3Rpb24oYil7cmV0dXJuIGcoYSxiKX07ZVtaYShcInRydXN0X2FzX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gayhhLGIpfX0pO3JldHVybiBlfV19ZnVuY3Rpb24gY2UoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhKXt2YXIgYz17fSxkPVUoKC9hbmRyb2lkIChcXGQrKS8uZXhlYyhLKChiLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCkpfHxbXSlbMV0pLGU9L0JveGVlL2kudGVzdCgoYi5uYXZpZ2F0b3J8fFxue30pLnVzZXJBZ2VudCksZj1hWzBdfHx7fSxnPWYuZG9jdW1lbnRNb2RlLGssbT0vXihNb3p8d2Via2l0fE98bXMpKD89W0EtWl0pLyxoPWYuYm9keSYmZi5ib2R5LnN0eWxlLGw9ITEsbj0hMTtpZihoKXtmb3IodmFyIHAgaW4gaClpZihsPW0uZXhlYyhwKSl7az1sWzBdO2s9ay5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpK2suc3Vic3RyKDEpO2JyZWFrfWt8fChrPVwiV2Via2l0T3BhY2l0eVwiaW4gaCYmXCJ3ZWJraXRcIik7bD0hIShcInRyYW5zaXRpb25cImluIGh8fGsrXCJUcmFuc2l0aW9uXCJpbiBoKTtuPSEhKFwiYW5pbWF0aW9uXCJpbiBofHxrK1wiQW5pbWF0aW9uXCJpbiBoKTshZHx8bCYmbnx8KGw9dihmLmJvZHkuc3R5bGUud2Via2l0VHJhbnNpdGlvbiksbj12KGYuYm9keS5zdHlsZS53ZWJraXRBbmltYXRpb24pKX1yZXR1cm57aGlzdG9yeTohKCFiLmhpc3Rvcnl8fCFiLmhpc3RvcnkucHVzaFN0YXRlfHw0PmR8fGUpLGhhc2hjaGFuZ2U6XCJvbmhhc2hjaGFuZ2VcImluIGImJighZ3x8NzxcbmcpLGhhc0V2ZW50OmZ1bmN0aW9uKGEpe2lmKFwiaW5wdXRcIj09YSYmOT09USlyZXR1cm4hMTtpZih4KGNbYV0pKXt2YXIgYj1mLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Y1thXT1cIm9uXCIrYSBpbiBifXJldHVybiBjW2FdfSxjc3A6WGEoKSx2ZW5kb3JQcmVmaXg6ayx0cmFuc2l0aW9uczpsLGFuaW1hdGlvbnM6bixhbmRyb2lkOmQsbXNpZTpRLG1zaWVEb2N1bWVudE1vZGU6Z319XX1mdW5jdGlvbiBlZSgpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHFcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhLGMsZCl7ZnVuY3Rpb24gZShlLGssbSl7dmFyIGg9Yy5kZWZlcigpLGw9aC5wcm9taXNlLG49eShtKSYmIW07az1hLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e2gucmVzb2x2ZShlKCkpfWNhdGNoKGEpe2gucmVqZWN0KGEpLGQoYSl9ZmluYWxseXtkZWxldGUgZltsLiQkdGltZW91dElkXX1ufHxiLiRhcHBseSgpfSxrKTtsLiQkdGltZW91dElkPWs7ZltrXT1oO1xucmV0dXJuIGx9dmFyIGY9e307ZS5jYW5jZWw9ZnVuY3Rpb24oYil7cmV0dXJuIGImJmIuJCR0aW1lb3V0SWQgaW4gZj8oZltiLiQkdGltZW91dElkXS5yZWplY3QoXCJjYW5jZWxlZFwiKSxkZWxldGUgZltiLiQkdGltZW91dElkXSxhLmRlZmVyLmNhbmNlbChiLiQkdGltZW91dElkKSk6ITF9O3JldHVybiBlfV19ZnVuY3Rpb24gdWEoYixhKXt2YXIgYz1iO1EmJihZLnNldEF0dHJpYnV0ZShcImhyZWZcIixjKSxjPVkuaHJlZik7WS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYyk7cmV0dXJue2hyZWY6WS5ocmVmLHByb3RvY29sOlkucHJvdG9jb2w/WS5wcm90b2NvbC5yZXBsYWNlKC86JC8sXCJcIik6XCJcIixob3N0OlkuaG9zdCxzZWFyY2g6WS5zZWFyY2g/WS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sXCJcIik6XCJcIixoYXNoOlkuaGFzaD9ZLmhhc2gucmVwbGFjZSgvXiMvLFwiXCIpOlwiXCIsaG9zdG5hbWU6WS5ob3N0bmFtZSxwb3J0OlkucG9ydCxwYXRobmFtZTpcIi9cIj09PVkucGF0aG5hbWUuY2hhckF0KDApP1kucGF0aG5hbWU6XG5cIi9cIitZLnBhdGhuYW1lfX1mdW5jdGlvbiBQYihiKXtiPXYoYik/dWEoYik6YjtyZXR1cm4gYi5wcm90b2NvbD09PUhjLnByb3RvY29sJiZiLmhvc3Q9PT1IYy5ob3N0fWZ1bmN0aW9uIGZlKCl7dGhpcy4kZ2V0PWJhKFcpfWZ1bmN0aW9uIG1jKGIpe2Z1bmN0aW9uIGEoZCxlKXtpZihUKGQpKXt2YXIgZj17fTtyKGQsZnVuY3Rpb24oYixjKXtmW2NdPWEoYyxiKX0pO3JldHVybiBmfXJldHVybiBiLmZhY3RvcnkoZCtjLGUpfXZhciBjPVwiRmlsdGVyXCI7dGhpcy5yZWdpc3Rlcj1hO3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuZ2V0KGIrYyl9fV07YShcImN1cnJlbmN5XCIsSWMpO2EoXCJkYXRlXCIsSmMpO2EoXCJmaWx0ZXJcIixDZSk7YShcImpzb25cIixEZSk7YShcImxpbWl0VG9cIixFZSk7YShcImxvd2VyY2FzZVwiLEZlKTthKFwibnVtYmVyXCIsS2MpO2EoXCJvcmRlckJ5XCIsTGMpO2EoXCJ1cHBlcmNhc2VcIixHZSl9ZnVuY3Rpb24gQ2UoKXtyZXR1cm4gZnVuY3Rpb24oYixcbmEsYyl7aWYoIUooYikpcmV0dXJuIGI7dmFyIGQ9dHlwZW9mIGMsZT1bXTtlLmNoZWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8ZS5sZW5ndGg7YisrKWlmKCFlW2JdKGEpKXJldHVybiExO3JldHVybiEwfTtcImZ1bmN0aW9uXCIhPT1kJiYoYz1cImJvb2xlYW5cIj09PWQmJmM/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVmEuZXF1YWxzKGEsYil9OmZ1bmN0aW9uKGEsYil7aWYoYSYmYiYmXCJvYmplY3RcIj09PXR5cGVvZiBhJiZcIm9iamVjdFwiPT09dHlwZW9mIGIpe2Zvcih2YXIgZCBpbiBhKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJmtiLmNhbGwoYSxkKSYmYyhhW2RdLGJbZF0pKXJldHVybiEwO3JldHVybiExfWI9KFwiXCIrYikudG9Mb3dlckNhc2UoKTtyZXR1cm4tMTwoXCJcIithKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoYil9KTt2YXIgZj1mdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiJiZcIiFcIj09PWIuY2hhckF0KDApKXJldHVybiFmKGEsYi5zdWJzdHIoMSkpO3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwibnVtYmVyXCI6Y2FzZSBcInN0cmluZ1wiOnJldHVybiBjKGEsXG5iKTtjYXNlIFwib2JqZWN0XCI6c3dpdGNoKHR5cGVvZiBiKXtjYXNlIFwib2JqZWN0XCI6cmV0dXJuIGMoYSxiKTtkZWZhdWx0OmZvcih2YXIgZCBpbiBhKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJmYoYVtkXSxiKSlyZXR1cm4hMH1yZXR1cm4hMTtjYXNlIFwiYXJyYXlcIjpmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWlmKGYoYVtkXSxiKSlyZXR1cm4hMDtyZXR1cm4hMTtkZWZhdWx0OnJldHVybiExfX07c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwiYm9vbGVhblwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwic3RyaW5nXCI6YT17JDphfTtjYXNlIFwib2JqZWN0XCI6Zm9yKHZhciBnIGluIGEpKGZ1bmN0aW9uKGIpe1widW5kZWZpbmVkXCIhPT10eXBlb2YgYVtiXSYmZS5wdXNoKGZ1bmN0aW9uKGMpe3JldHVybiBmKFwiJFwiPT1iP2M6YyYmY1tiXSxhW2JdKX0pfSkoZyk7YnJlYWs7Y2FzZSBcImZ1bmN0aW9uXCI6ZS5wdXNoKGEpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGJ9ZD1bXTtmb3IoZz0wO2c8Yi5sZW5ndGg7ZysrKXt2YXIgaz1cbmJbZ107ZS5jaGVjayhrKSYmZC5wdXNoKGspfXJldHVybiBkfX1mdW5jdGlvbiBJYyhiKXt2YXIgYT1iLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihiLGQpe3goZCkmJihkPWEuQ1VSUkVOQ1lfU1lNKTtyZXR1cm4gTWMoYixhLlBBVFRFUk5TWzFdLGEuR1JPVVBfU0VQLGEuREVDSU1BTF9TRVAsMikucmVwbGFjZSgvXFx1MDBBNC9nLGQpfX1mdW5jdGlvbiBLYyhiKXt2YXIgYT1iLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBNYyhiLGEuUEFUVEVSTlNbMF0sYS5HUk9VUF9TRVAsYS5ERUNJTUFMX1NFUCxkKX19ZnVuY3Rpb24gTWMoYixhLGMsZCxlKXtpZihudWxsPT1ifHwhaXNGaW5pdGUoYil8fFQoYikpcmV0dXJuXCJcIjt2YXIgZj0wPmI7Yj1NYXRoLmFicyhiKTt2YXIgZz1iK1wiXCIsaz1cIlwiLG09W10saD0hMTtpZigtMSE9PWcuaW5kZXhPZihcImVcIikpe3ZhciBsPWcubWF0Y2goLyhbXFxkXFwuXSspZSgtPykoXFxkKykvKTtsJiZcIi1cIj09bFsyXSYmXG5sWzNdPmUrMT8oZz1cIjBcIixiPTApOihrPWcsaD0hMCl9aWYoaCkwPGUmJigtMTxiJiYxPmIpJiYoaz1iLnRvRml4ZWQoZSkpO2Vsc2V7Zz0oZy5zcGxpdChOYylbMV18fFwiXCIpLmxlbmd0aDt4KGUpJiYoZT1NYXRoLm1pbihNYXRoLm1heChhLm1pbkZyYWMsZyksYS5tYXhGcmFjKSk7Yj0rKE1hdGgucm91bmQoKyhiLnRvU3RyaW5nKCkrXCJlXCIrZSkpLnRvU3RyaW5nKCkrXCJlXCIrLWUpOzA9PT1iJiYoZj0hMSk7Yj0oXCJcIitiKS5zcGxpdChOYyk7Zz1iWzBdO2I9YlsxXXx8XCJcIjt2YXIgbD0wLG49YS5sZ1NpemUscD1hLmdTaXplO2lmKGcubGVuZ3RoPj1uK3ApZm9yKGw9Zy5sZW5ndGgtbixoPTA7aDxsO2grKykwPT09KGwtaCklcCYmMCE9PWgmJihrKz1jKSxrKz1nLmNoYXJBdChoKTtmb3IoaD1sO2g8Zy5sZW5ndGg7aCsrKTA9PT0oZy5sZW5ndGgtaCklbiYmMCE9PWgmJihrKz1jKSxrKz1nLmNoYXJBdChoKTtmb3IoO2IubGVuZ3RoPGU7KWIrPVwiMFwiO2UmJlwiMFwiIT09ZSYmKGsrPWQrYi5zdWJzdHIoMCxcbmUpKX1tLnB1c2goZj9hLm5lZ1ByZTphLnBvc1ByZSk7bS5wdXNoKGspO20ucHVzaChmP2EubmVnU3VmOmEucG9zU3VmKTtyZXR1cm4gbS5qb2luKFwiXCIpfWZ1bmN0aW9uIFhiKGIsYSxjKXt2YXIgZD1cIlwiOzA+YiYmKGQ9XCItXCIsYj0tYik7Zm9yKGI9XCJcIitiO2IubGVuZ3RoPGE7KWI9XCIwXCIrYjtjJiYoYj1iLnN1YnN0cihiLmxlbmd0aC1hKSk7cmV0dXJuIGQrYn1mdW5jdGlvbiAkKGIsYSxjLGQpe2M9Y3x8MDtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1lW1wiZ2V0XCIrYl0oKTtpZigwPGN8fGU+LWMpZSs9YzswPT09ZSYmLTEyPT1jJiYoZT0xMik7cmV0dXJuIFhiKGUsYSxkKX19ZnVuY3Rpb24gdmIoYixhKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZT1jW1wiZ2V0XCIrYl0oKSxmPUlhKGE/XCJTSE9SVFwiK2I6Yik7cmV0dXJuIGRbZl1bZV19fWZ1bmN0aW9uIEpjKGIpe2Z1bmN0aW9uIGEoYSl7dmFyIGI7aWYoYj1hLm1hdGNoKGMpKXthPW5ldyBEYXRlKDApO3ZhciBmPTAsZz0wLGs9Yls4XT9cbmEuc2V0VVRDRnVsbFllYXI6YS5zZXRGdWxsWWVhcixtPWJbOF0/YS5zZXRVVENIb3VyczphLnNldEhvdXJzO2JbOV0mJihmPVUoYls5XStiWzEwXSksZz1VKGJbOV0rYlsxMV0pKTtrLmNhbGwoYSxVKGJbMV0pLFUoYlsyXSktMSxVKGJbM10pKTtmPVUoYls0XXx8MCktZjtnPVUoYls1XXx8MCktZztrPVUoYls2XXx8MCk7Yj1NYXRoLnJvdW5kKDFFMypwYXJzZUZsb2F0KFwiMC5cIisoYls3XXx8MCkpKTttLmNhbGwoYSxmLGcsayxiKX1yZXR1cm4gYX12YXIgYz0vXihcXGR7NH0pLT8oXFxkXFxkKS0/KFxcZFxcZCkoPzpUKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlxcLihcXGQrKSk/KT8pPyhafChbKy1dKShcXGRcXGQpOj8oXFxkXFxkKSk/KT8kLztyZXR1cm4gZnVuY3Rpb24oYyxlKXt2YXIgZj1cIlwiLGc9W10sayxtO2U9ZXx8XCJtZWRpdW1EYXRlXCI7ZT1iLkRBVEVUSU1FX0ZPUk1BVFNbZV18fGU7dihjKSYmKGM9SGUudGVzdChjKT9VKGMpOmEoYykpO2liKGMpJiYoYz1uZXcgRGF0ZShjKSk7XG5pZighdGEoYykpcmV0dXJuIGM7Zm9yKDtlOykobT1JZS5leGVjKGUpKT8oZz1nLmNvbmNhdChCYS5jYWxsKG0sMSkpLGU9Zy5wb3AoKSk6KGcucHVzaChlKSxlPW51bGwpO3IoZyxmdW5jdGlvbihhKXtrPUplW2FdO2YrPWs/ayhjLGIuREFURVRJTUVfRk9STUFUUyk6YS5yZXBsYWNlKC8oXid8JyQpL2csXCJcIikucmVwbGFjZSgvJycvZyxcIidcIil9KTtyZXR1cm4gZn19ZnVuY3Rpb24gRGUoKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIG5hKGIsITApfX1mdW5jdGlvbiBFZSgpe3JldHVybiBmdW5jdGlvbihiLGEpe2lmKCFKKGIpJiYhdihiKSlyZXR1cm4gYjthPUluZmluaXR5PT09TWF0aC5hYnMoTnVtYmVyKGEpKT9OdW1iZXIoYSk6VShhKTtpZih2KGIpKXJldHVybiBhPzA8PWE/Yi5zbGljZSgwLGEpOmIuc2xpY2UoYSxiLmxlbmd0aCk6XCJcIjt2YXIgYz1bXSxkLGU7YT5iLmxlbmd0aD9hPWIubGVuZ3RoOmE8LWIubGVuZ3RoJiYoYT0tYi5sZW5ndGgpOzA8YT8oZD0wLGU9YSk6KGQ9XG5iLmxlbmd0aCthLGU9Yi5sZW5ndGgpO2Zvcig7ZDxlO2QrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9fWZ1bmN0aW9uIExjKGIpe3JldHVybiBmdW5jdGlvbihhLGMsZCl7ZnVuY3Rpb24gZShhLGIpe3JldHVybiBVYShiKT9mdW5jdGlvbihiLGMpe3JldHVybiBhKGMsYil9OmF9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPXR5cGVvZiBhLGQ9dHlwZW9mIGI7cmV0dXJuIGM9PWQ/KHRhKGEpJiZ0YShiKSYmKGE9YS52YWx1ZU9mKCksYj1iLnZhbHVlT2YoKSksXCJzdHJpbmdcIj09YyYmKGE9YS50b0xvd2VyQ2FzZSgpLGI9Yi50b0xvd2VyQ2FzZSgpKSxhPT09Yj8wOmE8Yj8tMToxKTpjPGQ/LTE6MX1pZighUGEoYSl8fCFjKXJldHVybiBhO2M9SihjKT9jOltjXTtjPVZjKGMsZnVuY3Rpb24oYSl7dmFyIGM9ITEsZD1hfHxRYTtpZih2KGEpKXtpZihcIitcIj09YS5jaGFyQXQoMCl8fFwiLVwiPT1hLmNoYXJBdCgwKSljPVwiLVwiPT1hLmNoYXJBdCgwKSxhPWEuc3Vic3RyaW5nKDEpO2Q9YihhKTtpZihkLmNvbnN0YW50KXt2YXIgZz1cbmQoKTtyZXR1cm4gZShmdW5jdGlvbihhLGIpe3JldHVybiBmKGFbZ10sYltnXSl9LGMpfX1yZXR1cm4gZShmdW5jdGlvbihhLGIpe3JldHVybiBmKGQoYSksZChiKSl9LGMpfSk7Zm9yKHZhciBnPVtdLGs9MDtrPGEubGVuZ3RoO2srKylnLnB1c2goYVtrXSk7cmV0dXJuIGcuc29ydChlKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0oYSxiKTtpZigwIT09ZSlyZXR1cm4gZX1yZXR1cm4gMH0sZCkpfX1mdW5jdGlvbiB5YShiKXtQKGIpJiYoYj17bGluazpifSk7Yi5yZXN0cmljdD1iLnJlc3RyaWN0fHxcIkFDXCI7cmV0dXJuIGJhKGIpfWZ1bmN0aW9uIE9jKGIsYSxjLGQpe2Z1bmN0aW9uIGUoYSxjKXtjPWM/XCItXCIrbWIoYyxcIi1cIik6XCJcIjtkLnNldENsYXNzKGIsKGE/d2I6eGIpK2MsKGE/eGI6d2IpK2MpfXZhciBmPXRoaXMsZz1iLnBhcmVudCgpLmNvbnRyb2xsZXIoXCJmb3JtXCIpfHx5YixrPTAsbT1mLiRlcnJvcj17fSxoPVtdO2YuJG5hbWU9XG5hLm5hbWV8fGEubmdGb3JtO2YuJGRpcnR5PSExO2YuJHByaXN0aW5lPSEwO2YuJHZhbGlkPSEwO2YuJGludmFsaWQ9ITE7Zy4kYWRkQ29udHJvbChmKTtiLmFkZENsYXNzKE9hKTtlKCEwKTtmLiRhZGRDb250cm9sPWZ1bmN0aW9uKGEpe0RhKGEuJG5hbWUsXCJpbnB1dFwiKTtoLnB1c2goYSk7YS4kbmFtZSYmKGZbYS4kbmFtZV09YSl9O2YuJHJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24oYSl7YS4kbmFtZSYmZlthLiRuYW1lXT09PWEmJmRlbGV0ZSBmW2EuJG5hbWVdO3IobSxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsITAsYSl9KTtTYShoLGEpfTtmLiRzZXRWYWxpZGl0eT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9bVthXTtpZihiKWQmJihTYShkLGMpLGQubGVuZ3RofHwoay0tLGt8fChlKGIpLGYuJHZhbGlkPSEwLGYuJGludmFsaWQ9ITEpLG1bYV09ITEsZSghMCxhKSxnLiRzZXRWYWxpZGl0eShhLCEwLGYpKSk7ZWxzZXtrfHxlKGIpO2lmKGQpe2lmKC0xIT1SYShkLGMpKXJldHVybn1lbHNlIG1bYV09XG5kPVtdLGsrKyxlKCExLGEpLGcuJHNldFZhbGlkaXR5KGEsITEsZik7ZC5wdXNoKGMpO2YuJHZhbGlkPSExO2YuJGludmFsaWQ9ITB9fTtmLiRzZXREaXJ0eT1mdW5jdGlvbigpe2QucmVtb3ZlQ2xhc3MoYixPYSk7ZC5hZGRDbGFzcyhiLHpiKTtmLiRkaXJ0eT0hMDtmLiRwcmlzdGluZT0hMTtnLiRzZXREaXJ0eSgpfTtmLiRzZXRQcmlzdGluZT1mdW5jdGlvbigpe2QucmVtb3ZlQ2xhc3MoYix6Yik7ZC5hZGRDbGFzcyhiLE9hKTtmLiRkaXJ0eT0hMTtmLiRwcmlzdGluZT0hMDtyKGgsZnVuY3Rpb24oYSl7YS4kc2V0UHJpc3RpbmUoKX0pfX1mdW5jdGlvbiBzYShiLGEsYyxkKXtiLiRzZXRWYWxpZGl0eShhLGMpO3JldHVybiBjP2Q6dH1mdW5jdGlvbiBQYyhiLGEpe3ZhciBjLGQ7aWYoYSlmb3IoYz0wO2M8YS5sZW5ndGg7KytjKWlmKGQ9YVtjXSxiW2RdKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEtlKGIsYSxjLGQsZSl7VChlKSYmKGIuJCRoYXNOYXRpdmVWYWxpZGF0b3JzPSEwLFxuYi4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGYpe2lmKGIuJGVycm9yW2FdfHxQYyhlLGQpfHwhUGMoZSxjKSlyZXR1cm4gZjtiLiRzZXRWYWxpZGl0eShhLCExKX0pKX1mdW5jdGlvbiBBYihiLGEsYyxkLGUsZil7dmFyIGc9YS5wcm9wKExlKSxrPWFbMF0ucGxhY2Vob2xkZXIsbT17fSxoPUsoYVswXS50eXBlKTtkLiQkdmFsaWRpdHlTdGF0ZT1nO2lmKCFlLmFuZHJvaWQpe3ZhciBsPSExO2Eub24oXCJjb21wb3NpdGlvbnN0YXJ0XCIsZnVuY3Rpb24oYSl7bD0hMH0pO2Eub24oXCJjb21wb3NpdGlvbmVuZFwiLGZ1bmN0aW9uKCl7bD0hMTtuKCl9KX12YXIgbj1mdW5jdGlvbihlKXtpZighbCl7dmFyIGY9YS52YWwoKTtpZihRJiZcImlucHV0XCI9PT0oZXx8bSkudHlwZSYmYVswXS5wbGFjZWhvbGRlciE9PWspaz1hWzBdLnBsYWNlaG9sZGVyO2Vsc2UgaWYoXCJwYXNzd29yZFwiIT09aCYmVWEoYy5uZ1RyaW18fFwiVFwiKSYmKGY9YWEoZikpLGU9ZyYmZC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMsZC4kdmlld1ZhbHVlIT09XG5mfHxcIlwiPT09ZiYmZSliLiRyb290LiQkcGhhc2U/ZC4kc2V0Vmlld1ZhbHVlKGYpOmIuJGFwcGx5KGZ1bmN0aW9uKCl7ZC4kc2V0Vmlld1ZhbHVlKGYpfSl9fTtpZihlLmhhc0V2ZW50KFwiaW5wdXRcIikpYS5vbihcImlucHV0XCIsbik7ZWxzZXt2YXIgcCxxPWZ1bmN0aW9uKCl7cHx8KHA9Zi5kZWZlcihmdW5jdGlvbigpe24oKTtwPW51bGx9KSl9O2Eub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7YT1hLmtleUNvZGU7OTE9PT1hfHwoMTU8YSYmMTk+YXx8Mzc8PWEmJjQwPj1hKXx8cSgpfSk7aWYoZS5oYXNFdmVudChcInBhc3RlXCIpKWEub24oXCJwYXN0ZSBjdXRcIixxKX1hLm9uKFwiY2hhbmdlXCIsbik7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7YS52YWwoZC4kaXNFbXB0eShkLiR2aWV3VmFsdWUpP1wiXCI6ZC4kdmlld1ZhbHVlKX07dmFyIHM9Yy5uZ1BhdHRlcm47cyYmKChlPXMubWF0Y2goL15cXC8oLiopXFwvKFtnaW1dKikkLykpPyhzPVJlZ0V4cChlWzFdLGVbMl0pLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGQsXG5cInBhdHRlcm5cIixkLiRpc0VtcHR5KGEpfHxzLnRlc3QoYSksYSl9KTplPWZ1bmN0aW9uKGMpe3ZhciBlPWIuJGV2YWwocyk7aWYoIWV8fCFlLnRlc3QpdGhyb3cgQyhcIm5nUGF0dGVyblwiKShcIm5vcmVnZXhwXCIscyxlLGlhKGEpKTtyZXR1cm4gc2EoZCxcInBhdHRlcm5cIixkLiRpc0VtcHR5KGMpfHxlLnRlc3QoYyksYyl9LGQuJGZvcm1hdHRlcnMucHVzaChlKSxkLiRwYXJzZXJzLnB1c2goZSkpO2lmKGMubmdNaW5sZW5ndGgpe3ZhciByPVUoYy5uZ01pbmxlbmd0aCk7ZT1mdW5jdGlvbihhKXtyZXR1cm4gc2EoZCxcIm1pbmxlbmd0aFwiLGQuJGlzRW1wdHkoYSl8fGEubGVuZ3RoPj1yLGEpfTtkLiRwYXJzZXJzLnB1c2goZSk7ZC4kZm9ybWF0dGVycy5wdXNoKGUpfWlmKGMubmdNYXhsZW5ndGgpe3ZhciB1PVUoYy5uZ01heGxlbmd0aCk7ZT1mdW5jdGlvbihhKXtyZXR1cm4gc2EoZCxcIm1heGxlbmd0aFwiLGQuJGlzRW1wdHkoYSl8fGEubGVuZ3RoPD11LGEpfTtkLiRwYXJzZXJzLnB1c2goZSk7XG5kLiRmb3JtYXR0ZXJzLnB1c2goZSl9fWZ1bmN0aW9uIFliKGIsYSl7Yj1cIm5nQ2xhc3NcIitiO3JldHVybltcIiRhbmltYXRlXCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhLGIpe3ZhciBjPVtdLGQ9MDthOmZvcig7ZDxhLmxlbmd0aDtkKyspe2Zvcih2YXIgZT1hW2RdLGw9MDtsPGIubGVuZ3RoO2wrKylpZihlPT1iW2xdKWNvbnRpbnVlIGE7Yy5wdXNoKGUpfXJldHVybiBjfWZ1bmN0aW9uIGUoYSl7aWYoIUooYSkpe2lmKHYoYSkpcmV0dXJuIGEuc3BsaXQoXCIgXCIpO2lmKFQoYSkpe3ZhciBiPVtdO3IoYSxmdW5jdGlvbihhLGMpe2EmJihiPWIuY29uY2F0KGMuc3BsaXQoXCIgXCIpKSl9KTtyZXR1cm4gYn19cmV0dXJuIGF9cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixsaW5rOmZ1bmN0aW9uKGYsZyxrKXtmdW5jdGlvbiBtKGEsYil7dmFyIGM9Zy5kYXRhKFwiJGNsYXNzQ291bnRzXCIpfHx7fSxkPVtdO3IoYSxmdW5jdGlvbihhKXtpZigwPGJ8fGNbYV0pY1thXT0oY1thXXx8MCkrYixjW2FdPT09KygwPFxuYikmJmQucHVzaChhKX0pO2cuZGF0YShcIiRjbGFzc0NvdW50c1wiLGMpO3JldHVybiBkLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIGgoYil7aWYoITA9PT1hfHxmLiRpbmRleCUyPT09YSl7dmFyIGg9ZShifHxbXSk7aWYoIWwpe3ZhciBxPW0oaCwxKTtrLiRhZGRDbGFzcyhxKX1lbHNlIGlmKCFBYShiLGwpKXt2YXIgcz1lKGwpLHE9ZChoLHMpLGg9ZChzLGgpLGg9bShoLC0xKSxxPW0ocSwxKTswPT09cS5sZW5ndGg/Yy5yZW1vdmVDbGFzcyhnLGgpOjA9PT1oLmxlbmd0aD9jLmFkZENsYXNzKGcscSk6Yy5zZXRDbGFzcyhnLHEsaCl9fWw9aGEoYil9dmFyIGw7Zi4kd2F0Y2goa1tiXSxoLCEwKTtrLiRvYnNlcnZlKFwiY2xhc3NcIixmdW5jdGlvbihhKXtoKGYuJGV2YWwoa1tiXSkpfSk7XCJuZ0NsYXNzXCIhPT1iJiZmLiR3YXRjaChcIiRpbmRleFwiLGZ1bmN0aW9uKGMsZCl7dmFyIGc9YyYxO2lmKGchPT0oZCYxKSl7dmFyIGg9ZShmLiRldmFsKGtbYl0pKTtnPT09YT8oZz1tKGgsMSksay4kYWRkQ2xhc3MoZykpOlxuKGc9bShoLC0xKSxrLiRyZW1vdmVDbGFzcyhnKSl9fSl9fX1dfXZhciBMZT1cInZhbGlkaXR5XCIsSz1mdW5jdGlvbihiKXtyZXR1cm4gdihiKT9iLnRvTG93ZXJDYXNlKCk6Yn0sa2I9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxJYT1mdW5jdGlvbihiKXtyZXR1cm4gdihiKT9iLnRvVXBwZXJDYXNlKCk6Yn0sUSx3LEVhLEJhPVtdLnNsaWNlLE1lPVtdLnB1c2gsemE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxUYT1DKFwibmdcIiksVmE9Vy5hbmd1bGFyfHwoVy5hbmd1bGFyPXt9KSxZYSxNYSxtYT1bXCIwXCIsXCIwXCIsXCIwXCJdO1E9VSgoL21zaWUgKFxcZCspLy5leGVjKEsobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pO2lzTmFOKFEpJiYoUT1VKCgvdHJpZGVudFxcLy4qOyBydjooXFxkKykvLmV4ZWMoSyhuYXZpZ2F0b3IudXNlckFnZW50KSl8fFtdKVsxXSkpO0UuJGluamVjdD1bXTtRYS4kaW5qZWN0PVtdO3ZhciBKPWZ1bmN0aW9uKCl7cmV0dXJuIFAoQXJyYXkuaXNBcnJheSk/XG5BcnJheS5pc0FycmF5OmZ1bmN0aW9uKGIpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PXphLmNhbGwoYil9fSgpLGFhPWZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbihiKXtyZXR1cm4gdihiKT9iLnRyaW0oKTpifTpmdW5jdGlvbihiKXtyZXR1cm4gdihiKT9iLnJlcGxhY2UoL15cXHNcXHMqLyxcIlwiKS5yZXBsYWNlKC9cXHNcXHMqJC8sXCJcIik6Yn19KCk7TWE9OT5RP2Z1bmN0aW9uKGIpe2I9Yi5ub2RlTmFtZT9iOmJbMF07cmV0dXJuIGIuc2NvcGVOYW1lJiZcIkhUTUxcIiE9Yi5zY29wZU5hbWU/SWEoYi5zY29wZU5hbWUrXCI6XCIrYi5ub2RlTmFtZSk6Yi5ub2RlTmFtZX06ZnVuY3Rpb24oYil7cmV0dXJuIGIubm9kZU5hbWU/Yi5ub2RlTmFtZTpiWzBdLm5vZGVOYW1lfTt2YXIgWGE9ZnVuY3Rpb24oKXtpZih5KFhhLmlzQWN0aXZlXykpcmV0dXJuIFhhLmlzQWN0aXZlXzt2YXIgYj0hKCFYLnF1ZXJ5U2VsZWN0b3IoXCJbbmctY3NwXVwiKSYmIVgucXVlcnlTZWxlY3RvcihcIltkYXRhLW5nLWNzcF1cIikpO1xuaWYoIWIpdHJ5e25ldyBGdW5jdGlvbihcIlwiKX1jYXRjaChhKXtiPSEwfXJldHVybiBYYS5pc0FjdGl2ZV89Yn0sWWM9L1tBLVpdL2csYWQ9e2Z1bGw6XCIxLjIuMjZcIixtYWpvcjoxLG1pbm9yOjIsZG90OjI2LGNvZGVOYW1lOlwiY2FwdGl2YXRpbmctZGlzaW50ZXJlc3RcIn07Uy5leHBhbmRvPVwibmczMzlcIjt2YXIgYWI9Uy5jYWNoZT17fSxuZT0xLHNiPVcuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihiLGEsYyl7Yi5hZGRFdmVudExpc3RlbmVyKGEsYywhMSl9OmZ1bmN0aW9uKGIsYSxjKXtiLmF0dGFjaEV2ZW50KFwib25cIithLGMpfSwkYT1XLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYixhLGMpe2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITEpfTpmdW5jdGlvbihiLGEsYyl7Yi5kZXRhY2hFdmVudChcIm9uXCIrYSxjKX07Uy5fZGF0YT1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5jYWNoZVtiW3RoaXMuZXhwYW5kb11dfHx7fX07dmFyIGllPS8oW1xcOlxcLVxcX10rKC4pKS9nLFxuamU9L15tb3ooW0EtWl0pLyxIYj1DKFwianFMaXRlXCIpLGtlPS9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyxJYj0vPHwmIz9cXHcrOy8sbGU9LzwoW1xcdzpdKykvLG1lPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxlYT17b3B0aW9uOlsxLCc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2VhLm9wdGdyb3VwPWVhLm9wdGlvbjtlYS50Ym9keT1lYS50Zm9vdD1lYS5jb2xncm91cD1lYS5jYXB0aW9uPWVhLnRoZWFkO2VhLnRoPVxuZWEudGQ7dmFyIExhPVMucHJvdG90eXBlPXtyZWFkeTpmdW5jdGlvbihiKXtmdW5jdGlvbiBhKCl7Y3x8KGM9ITAsYigpKX12YXIgYz0hMTtcImNvbXBsZXRlXCI9PT1YLnJlYWR5U3RhdGU/c2V0VGltZW91dChhKToodGhpcy5vbihcIkRPTUNvbnRlbnRMb2FkZWRcIixhKSxTKFcpLm9uKFwibG9hZFwiLGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYj1bXTtyKHRoaXMsZnVuY3Rpb24oYSl7Yi5wdXNoKFwiXCIrYSl9KTtyZXR1cm5cIltcIitiLmpvaW4oXCIsIFwiKStcIl1cIn0sZXE6ZnVuY3Rpb24oYil7cmV0dXJuIDA8PWI/dyh0aGlzW2JdKTp3KHRoaXNbdGhpcy5sZW5ndGgrYl0pfSxsZW5ndGg6MCxwdXNoOk1lLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSxxYj17fTtyKFwibXVsdGlwbGUgc2VsZWN0ZWQgY2hlY2tlZCBkaXNhYmxlZCByZWFkT25seSByZXF1aXJlZCBvcGVuXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe3FiW0soYildPWJ9KTt2YXIgcmM9e307cihcImlucHV0IHNlbGVjdCBvcHRpb24gdGV4dGFyZWEgYnV0dG9uIGZvcm0gZGV0YWlsc1wiLnNwbGl0KFwiIFwiKSxcbmZ1bmN0aW9uKGIpe3JjW0lhKGIpXT0hMH0pO3Ioe2RhdGE6TWIscmVtb3ZlRGF0YTpMYn0sZnVuY3Rpb24oYixhKXtTW2FdPWJ9KTtyKHtkYXRhOk1iLGluaGVyaXRlZERhdGE6cGIsc2NvcGU6ZnVuY3Rpb24oYil7cmV0dXJuIHcuZGF0YShiLFwiJHNjb3BlXCIpfHxwYihiLnBhcmVudE5vZGV8fGIsW1wiJGlzb2xhdGVTY29wZVwiLFwiJHNjb3BlXCJdKX0saXNvbGF0ZVNjb3BlOmZ1bmN0aW9uKGIpe3JldHVybiB3LmRhdGEoYixcIiRpc29sYXRlU2NvcGVcIil8fHcuZGF0YShiLFwiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGVcIil9LGNvbnRyb2xsZXI6b2MsaW5qZWN0b3I6ZnVuY3Rpb24oYil7cmV0dXJuIHBiKGIsXCIkaW5qZWN0b3JcIil9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYixhKXtiLnJlbW92ZUF0dHJpYnV0ZShhKX0saGFzQ2xhc3M6TmIsY3NzOmZ1bmN0aW9uKGIsYSxjKXthPVphKGEpO2lmKHkoYykpYi5zdHlsZVthXT1jO2Vsc2V7dmFyIGQ7OD49USYmKGQ9Yi5jdXJyZW50U3R5bGUmJmIuY3VycmVudFN0eWxlW2FdLFxuXCJcIj09PWQmJihkPVwiYXV0b1wiKSk7ZD1kfHxiLnN0eWxlW2FdOzg+PVEmJihkPVwiXCI9PT1kP3Q6ZCk7cmV0dXJuIGR9fSxhdHRyOmZ1bmN0aW9uKGIsYSxjKXt2YXIgZD1LKGEpO2lmKHFiW2RdKWlmKHkoYykpYz8oYlthXT0hMCxiLnNldEF0dHJpYnV0ZShhLGQpKTooYlthXT0hMSxiLnJlbW92ZUF0dHJpYnV0ZShkKSk7ZWxzZSByZXR1cm4gYlthXXx8KGIuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oYSl8fEUpLnNwZWNpZmllZD9kOnQ7ZWxzZSBpZih5KGMpKWIuc2V0QXR0cmlidXRlKGEsYyk7ZWxzZSBpZihiLmdldEF0dHJpYnV0ZSlyZXR1cm4gYj1iLmdldEF0dHJpYnV0ZShhLDIpLG51bGw9PT1iP3Q6Yn0scHJvcDpmdW5jdGlvbihiLGEsYyl7aWYoeShjKSliW2FdPWM7ZWxzZSByZXR1cm4gYlthXX0sdGV4dDpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYixkKXt2YXIgZT1hW2Iubm9kZVR5cGVdO2lmKHgoZCkpcmV0dXJuIGU/YltlXTpcIlwiO2JbZV09ZH12YXIgYT1bXTs5PlE/KGFbMV09XG5cImlubmVyVGV4dFwiLGFbM109XCJub2RlVmFsdWVcIik6YVsxXT1hWzNdPVwidGV4dENvbnRlbnRcIjtiLiRkdj1cIlwiO3JldHVybiBifSgpLHZhbDpmdW5jdGlvbihiLGEpe2lmKHgoYSkpe2lmKFwiU0VMRUNUXCI9PT1NYShiKSYmYi5tdWx0aXBsZSl7dmFyIGM9W107cihiLm9wdGlvbnMsZnVuY3Rpb24oYSl7YS5zZWxlY3RlZCYmYy5wdXNoKGEudmFsdWV8fGEudGV4dCl9KTtyZXR1cm4gMD09PWMubGVuZ3RoP251bGw6Y31yZXR1cm4gYi52YWx1ZX1iLnZhbHVlPWF9LGh0bWw6ZnVuY3Rpb24oYixhKXtpZih4KGEpKXJldHVybiBiLmlubmVySFRNTDtmb3IodmFyIGM9MCxkPWIuY2hpbGROb2RlcztjPGQubGVuZ3RoO2MrKylKYShkW2NdKTtiLmlubmVySFRNTD1hfSxlbXB0eTpwY30sZnVuY3Rpb24oYixhKXtTLnByb3RvdHlwZVthXT1mdW5jdGlvbihhLGQpe3ZhciBlLGYsZz10aGlzLmxlbmd0aDtpZihiIT09cGMmJigyPT1iLmxlbmd0aCYmYiE9PU5iJiZiIT09b2M/YTpkKT09PXQpe2lmKFQoYSkpe2ZvcihlPVxuMDtlPGc7ZSsrKWlmKGI9PT1NYiliKHRoaXNbZV0sYSk7ZWxzZSBmb3IoZiBpbiBhKWIodGhpc1tlXSxmLGFbZl0pO3JldHVybiB0aGlzfWU9Yi4kZHY7Zz1lPT09dD9NYXRoLm1pbihnLDEpOmc7Zm9yKGY9MDtmPGc7ZisrKXt2YXIgaz1iKHRoaXNbZl0sYSxkKTtlPWU/ZStrOmt9cmV0dXJuIGV9Zm9yKGU9MDtlPGc7ZSsrKWIodGhpc1tlXSxhLGQpO3JldHVybiB0aGlzfX0pO3Ioe3JlbW92ZURhdGE6TGIsZGVhbG9jOkphLG9uOmZ1bmN0aW9uIGEoYyxkLGUsZil7aWYoeShmKSl0aHJvdyBIYihcIm9uYXJnc1wiKTt2YXIgZz1vYShjLFwiZXZlbnRzXCIpLGs9b2EoYyxcImhhbmRsZVwiKTtnfHxvYShjLFwiZXZlbnRzXCIsZz17fSk7a3x8b2EoYyxcImhhbmRsZVwiLGs9b2UoYyxnKSk7cihkLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihkKXt2YXIgZj1nW2RdO2lmKCFmKXtpZihcIm1vdXNlZW50ZXJcIj09ZHx8XCJtb3VzZWxlYXZlXCI9PWQpe3ZhciBsPVguYm9keS5jb250YWluc3x8WC5ib2R5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP1xuZnVuY3Rpb24oYSxjKXt2YXIgZD05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGU9YyYmYy5wYXJlbnROb2RlO3JldHVybiBhPT09ZXx8ISEoZSYmMT09PWUubm9kZVR5cGUmJihkLmNvbnRhaW5zP2QuY29udGFpbnMoZSk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKSYxNikpfTpmdW5jdGlvbihhLGMpe2lmKGMpZm9yKDtjPWMucGFyZW50Tm9kZTspaWYoYz09PWEpcmV0dXJuITA7cmV0dXJuITF9O2dbZF09W107YShjLHttb3VzZWxlYXZlOlwibW91c2VvdXRcIixtb3VzZWVudGVyOlwibW91c2VvdmVyXCJ9W2RdLGZ1bmN0aW9uKGEpe3ZhciBjPWEucmVsYXRlZFRhcmdldDtjJiYoYz09PXRoaXN8fGwodGhpcyxjKSl8fGsoYSxkKX0pfWVsc2Ugc2IoYyxkLGspLGdbZF09W107Zj1nW2RdfWYucHVzaChlKX0pfSxvZmY6bmMsb25lOmZ1bmN0aW9uKGEsYyxkKXthPXcoYSk7YS5vbihjLGZ1bmN0aW9uIGYoKXthLm9mZihjLFxuZCk7YS5vZmYoYyxmKX0pO2Eub24oYyxkKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYSxjKXt2YXIgZCxlPWEucGFyZW50Tm9kZTtKYShhKTtyKG5ldyBTKGMpLGZ1bmN0aW9uKGMpe2Q/ZS5pbnNlcnRCZWZvcmUoYyxkLm5leHRTaWJsaW5nKTplLnJlcGxhY2VDaGlsZChjLGEpO2Q9Y30pfSxjaGlsZHJlbjpmdW5jdGlvbihhKXt2YXIgYz1bXTtyKGEuY2hpbGROb2RlcyxmdW5jdGlvbihhKXsxPT09YS5ub2RlVHlwZSYmYy5wdXNoKGEpfSk7cmV0dXJuIGN9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8YS5jaGlsZE5vZGVzfHxbXX0sYXBwZW5kOmZ1bmN0aW9uKGEsYyl7cihuZXcgUyhjKSxmdW5jdGlvbihjKXsxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxhLmFwcGVuZENoaWxkKGMpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oYSxjKXtpZigxPT09YS5ub2RlVHlwZSl7dmFyIGQ9YS5maXJzdENoaWxkO3IobmV3IFMoYyksZnVuY3Rpb24oYyl7YS5pbnNlcnRCZWZvcmUoYyxcbmQpfSl9fSx3cmFwOmZ1bmN0aW9uKGEsYyl7Yz13KGMpWzBdO3ZhciBkPWEucGFyZW50Tm9kZTtkJiZkLnJlcGxhY2VDaGlsZChjLGEpO2MuYXBwZW5kQ2hpbGQoYSl9LHJlbW92ZTpmdW5jdGlvbihhKXtKYShhKTt2YXIgYz1hLnBhcmVudE5vZGU7YyYmYy5yZW1vdmVDaGlsZChhKX0sYWZ0ZXI6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hLGU9YS5wYXJlbnROb2RlO3IobmV3IFMoYyksZnVuY3Rpb24oYSl7ZS5pbnNlcnRCZWZvcmUoYSxkLm5leHRTaWJsaW5nKTtkPWF9KX0sYWRkQ2xhc3M6b2IscmVtb3ZlQ2xhc3M6bmIsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxjLGQpe2MmJnIoYy5zcGxpdChcIiBcIiksZnVuY3Rpb24oYyl7dmFyIGY9ZDt4KGYpJiYoZj0hTmIoYSxjKSk7KGY/b2I6bmIpKGEsYyl9KX0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50Tm9kZSkmJjExIT09YS5ub2RlVHlwZT9hOm51bGx9LG5leHQ6ZnVuY3Rpb24oYSl7aWYoYS5uZXh0RWxlbWVudFNpYmxpbmcpcmV0dXJuIGEubmV4dEVsZW1lbnRTaWJsaW5nO1xuZm9yKGE9YS5uZXh0U2libGluZztudWxsIT1hJiYxIT09YS5ub2RlVHlwZTspYT1hLm5leHRTaWJsaW5nO3JldHVybiBhfSxmaW5kOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShjKTpbXX0sY2xvbmU6S2IsdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlLGY7ZT1jLnR5cGV8fGM7dmFyIGc9KG9hKGEsXCJldmVudHNcIil8fHt9KVtlXTtnJiYoZT17cHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGlzRGVmYXVsdFByZXZlbnRlZDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5kZWZhdWx0UHJldmVudGVkfSxzdG9wUHJvcGFnYXRpb246RSx0eXBlOmUsdGFyZ2V0OmF9LGMudHlwZSYmKGU9RChlLGMpKSxjPWhhKGcpLGY9ZD9bZV0uY29uY2F0KGQpOltlXSxyKGMsZnVuY3Rpb24oYyl7Yy5hcHBseShhLGYpfSkpfX0sZnVuY3Rpb24oYSxjKXtTLnByb3RvdHlwZVtjXT1cbmZ1bmN0aW9uKGMsZSxmKXtmb3IodmFyIGcsaz0wO2s8dGhpcy5sZW5ndGg7aysrKXgoZyk/KGc9YSh0aGlzW2tdLGMsZSxmKSx5KGcpJiYoZz13KGcpKSk6SmIoZyxhKHRoaXNba10sYyxlLGYpKTtyZXR1cm4geShnKT9nOnRoaXN9O1MucHJvdG90eXBlLmJpbmQ9Uy5wcm90b3R5cGUub247Uy5wcm90b3R5cGUudW5iaW5kPVMucHJvdG90eXBlLm9mZn0pO2JiLnByb3RvdHlwZT17cHV0OmZ1bmN0aW9uKGEsYyl7dGhpc1tLYShhLHRoaXMubmV4dFVpZCldPWN9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1tLYShhLHRoaXMubmV4dFVpZCldfSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpc1thPUthKGEsdGhpcy5uZXh0VWlkKV07ZGVsZXRlIHRoaXNbYV07cmV0dXJuIGN9fTt2YXIgcWU9L15mdW5jdGlvblxccypbXlxcKF0qXFwoXFxzKihbXlxcKV0qKVxcKS9tLHJlPS8sLyxzZT0vXlxccyooXz8pKFxcUys/KVxcMVxccyokLyxwZT0vKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWcsXG5jYj1DKFwiJGluamVjdG9yXCIpLE5lPUMoXCIkYW5pbWF0ZVwiKSxNZD1bXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe3RoaXMuJCRzZWxlY3RvcnM9e307dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihjLGQpe3ZhciBlPWMrXCItYW5pbWF0aW9uXCI7aWYoYyYmXCIuXCIhPWMuY2hhckF0KDApKXRocm93IE5lKFwibm90Y3NlbFwiLGMpO3RoaXMuJCRzZWxlY3RvcnNbYy5zdWJzdHIoMSldPWU7YS5mYWN0b3J5KGUsZCl9O3RoaXMuY2xhc3NOYW1lRmlsdGVyPWZ1bmN0aW9uKGEpezE9PT1hcmd1bWVudHMubGVuZ3RoJiYodGhpcy4kJGNsYXNzTmFtZUZpbHRlcj1hIGluc3RhbmNlb2YgUmVnRXhwP2E6bnVsbCk7cmV0dXJuIHRoaXMuJCRjbGFzc05hbWVGaWx0ZXJ9O3RoaXMuJGdldD1bXCIkdGltZW91dFwiLFwiJCRhc3luY0NhbGxiYWNrXCIsZnVuY3Rpb24oYSxkKXtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxjLGcsayl7Zz9nLmFmdGVyKGEpOihjJiZjWzBdfHwoYz1nLnBhcmVudCgpKSxjLmFwcGVuZChhKSk7ayYmXG5kKGspfSxsZWF2ZTpmdW5jdGlvbihhLGMpe2EucmVtb3ZlKCk7YyYmZChjKX0sbW92ZTpmdW5jdGlvbihhLGMsZCxrKXt0aGlzLmVudGVyKGEsYyxkLGspfSxhZGRDbGFzczpmdW5jdGlvbihhLGMsZyl7Yz12KGMpP2M6SihjKT9jLmpvaW4oXCIgXCIpOlwiXCI7cihhLGZ1bmN0aW9uKGEpe29iKGEsYyl9KTtnJiZkKGcpfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGMsZyl7Yz12KGMpP2M6SihjKT9jLmpvaW4oXCIgXCIpOlwiXCI7cihhLGZ1bmN0aW9uKGEpe25iKGEsYyl9KTtnJiZkKGcpfSxzZXRDbGFzczpmdW5jdGlvbihhLGMsZyxrKXtyKGEsZnVuY3Rpb24oYSl7b2IoYSxjKTtuYihhLGcpfSk7ayYmZChrKX0sZW5hYmxlZDpFfX1dfV0samE9QyhcIiRjb21waWxlXCIpO2ljLiRpbmplY3Q9W1wiJHByb3ZpZGVcIixcIiQkc2FuaXRpemVVcmlQcm92aWRlclwiXTt2YXIgd2U9L14oeFtcXDpcXC1fXXxkYXRhW1xcOlxcLV9dKS9pLHljPUMoXCIkaW50ZXJwb2xhdGVcIiksT2U9L14oW15cXD8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JC8sXG56ZT17aHR0cDo4MCxodHRwczo0NDMsZnRwOjIxfSxTYj1DKFwiJGxvY2F0aW9uXCIpO1ViLnByb3RvdHlwZT1UYi5wcm90b3R5cGU9QmMucHJvdG90eXBlPXskJGh0bWw1OiExLCQkcmVwbGFjZTohMSxhYnNVcmw6dGIoXCIkJGFic1VybFwiKSx1cmw6ZnVuY3Rpb24oYSl7aWYoeChhKSlyZXR1cm4gdGhpcy4kJHVybDthPU9lLmV4ZWMoYSk7YVsxXSYmdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChhWzFdKSk7KGFbMl18fGFbMV0pJiZ0aGlzLnNlYXJjaChhWzNdfHxcIlwiKTt0aGlzLmhhc2goYVs1XXx8XCJcIik7cmV0dXJuIHRoaXN9LHByb3RvY29sOnRiKFwiJCRwcm90b2NvbFwiKSxob3N0OnRiKFwiJCRob3N0XCIpLHBvcnQ6dGIoXCIkJHBvcnRcIikscGF0aDpDYyhcIiQkcGF0aFwiLGZ1bmN0aW9uKGEpe2E9YT9hLnRvU3RyaW5nKCk6XCJcIjtyZXR1cm5cIi9cIj09YS5jaGFyQXQoMCk/YTpcIi9cIithfSksc2VhcmNoOmZ1bmN0aW9uKGEsYyl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdGhpcy4kJHNlYXJjaDtcbmNhc2UgMTppZih2KGEpfHxpYihhKSlhPWEudG9TdHJpbmcoKSx0aGlzLiQkc2VhcmNoPWVjKGEpO2Vsc2UgaWYoVChhKSlyKGEsZnVuY3Rpb24oYyxlKXtudWxsPT1jJiZkZWxldGUgYVtlXX0pLHRoaXMuJCRzZWFyY2g9YTtlbHNlIHRocm93IFNiKFwiaXNyY2hhcmdcIik7YnJlYWs7ZGVmYXVsdDp4KGMpfHxudWxsPT09Yz9kZWxldGUgdGhpcy4kJHNlYXJjaFthXTp0aGlzLiQkc2VhcmNoW2FdPWN9dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc30saGFzaDpDYyhcIiQkaGFzaFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhP2EudG9TdHJpbmcoKTpcIlwifSkscmVwbGFjZTpmdW5jdGlvbigpe3RoaXMuJCRyZXBsYWNlPSEwO3JldHVybiB0aGlzfX07dmFyIGxhPUMoXCIkcGFyc2VcIiksRmM9e30sd2EsUGU9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsUWU9RnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LFFjPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLGdiPXtcIm51bGxcIjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxcblwidHJ1ZVwiOmZ1bmN0aW9uKCl7cmV0dXJuITB9LFwiZmFsc2VcIjpmdW5jdGlvbigpe3JldHVybiExfSx1bmRlZmluZWQ6RSxcIitcIjpmdW5jdGlvbihhLGMsZCxlKXtkPWQoYSxjKTtlPWUoYSxjKTtyZXR1cm4geShkKT95KGUpP2QrZTpkOnkoZSk/ZTp0fSxcIi1cIjpmdW5jdGlvbihhLGMsZCxlKXtkPWQoYSxjKTtlPWUoYSxjKTtyZXR1cm4oeShkKT9kOjApLSh5KGUpP2U6MCl9LFwiKlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykqZShhLGMpfSxcIi9cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpL2UoYSxjKX0sXCIlXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSVlKGEsYyl9LFwiXlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyleZShhLGMpfSxcIj1cIjpFLFwiPT09XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKT09PWUoYSxjKX0sXCIhPT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpIT09ZShhLGMpfSxcIj09XCI6ZnVuY3Rpb24oYSxcbmMsZCxlKXtyZXR1cm4gZChhLGMpPT1lKGEsYyl9LFwiIT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpIT1lKGEsYyl9LFwiPFwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk8ZShhLGMpfSxcIj5cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPmUoYSxjKX0sXCI8PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk8PWUoYSxjKX0sXCI+PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk+PWUoYSxjKX0sXCImJlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykmJmUoYSxjKX0sXCJ8fFwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyl8fGUoYSxjKX0sXCImXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSZlKGEsYyl9LFwifFwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBlKGEsYykoYSxjLGQoYSxjKSl9LFwiIVwiOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4hZChhLGMpfX0sUmU9e246XCJcXG5cIixmOlwiXFxmXCIscjpcIlxcclwiLFxudDpcIlxcdFwiLHY6XCJcXHZcIixcIidcIjpcIidcIiwnXCInOidcIid9LFdiPWZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz1hfTtXYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOldiLGxleDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLmluZGV4PTA7dGhpcy5jaD10O3RoaXMubGFzdENoPVwiOlwiO2Zvcih0aGlzLnRva2Vucz1bXTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt0aGlzLmNoPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYodGhpcy5pcyhcIlxcXCInXCIpKXRoaXMucmVhZFN0cmluZyh0aGlzLmNoKTtlbHNlIGlmKHRoaXMuaXNOdW1iZXIodGhpcy5jaCl8fHRoaXMuaXMoXCIuXCIpJiZ0aGlzLmlzTnVtYmVyKHRoaXMucGVlaygpKSl0aGlzLnJlYWROdW1iZXIoKTtlbHNlIGlmKHRoaXMuaXNJZGVudCh0aGlzLmNoKSl0aGlzLnJlYWRJZGVudCgpO2Vsc2UgaWYodGhpcy5pcyhcIigpe31bXS4sOzo/XCIpKXRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDp0aGlzLmNofSksXG50aGlzLmluZGV4Kys7ZWxzZSBpZih0aGlzLmlzV2hpdGVzcGFjZSh0aGlzLmNoKSl7dGhpcy5pbmRleCsrO2NvbnRpbnVlfWVsc2V7YT10aGlzLmNoK3RoaXMucGVlaygpO3ZhciBjPWErdGhpcy5wZWVrKDIpLGQ9Z2JbdGhpcy5jaF0sZT1nYlthXSxmPWdiW2NdO2Y/KHRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDpjLGZuOmZ9KSx0aGlzLmluZGV4Kz0zKTplPyh0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YSxmbjplfSksdGhpcy5pbmRleCs9Mik6ZD8odGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OnRoaXMuY2gsZm46ZH0pLHRoaXMuaW5kZXgrPTEpOnRoaXMudGhyb3dFcnJvcihcIlVuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgXCIsdGhpcy5pbmRleCx0aGlzLmluZGV4KzEpfXRoaXMubGFzdENoPXRoaXMuY2h9cmV0dXJuIHRoaXMudG9rZW5zfSxpczpmdW5jdGlvbihhKXtyZXR1cm4tMSE9PWEuaW5kZXhPZih0aGlzLmNoKX0sXG53YXM6ZnVuY3Rpb24oYSl7cmV0dXJuLTEhPT1hLmluZGV4T2YodGhpcy5sYXN0Q2gpfSxwZWVrOmZ1bmN0aW9uKGEpe2E9YXx8MTtyZXR1cm4gdGhpcy5pbmRleCthPHRoaXMudGV4dC5sZW5ndGg/dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4K2EpOiExfSxpc051bWJlcjpmdW5jdGlvbihhKXtyZXR1cm5cIjBcIjw9YSYmXCI5XCI+PWF9LGlzV2hpdGVzcGFjZTpmdW5jdGlvbihhKXtyZXR1cm5cIiBcIj09PWF8fFwiXFxyXCI9PT1hfHxcIlxcdFwiPT09YXx8XCJcXG5cIj09PWF8fFwiXFx2XCI9PT1hfHxcIlxcdTAwYTBcIj09PWF9LGlzSWRlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuXCJhXCI8PWEmJlwielwiPj1hfHxcIkFcIjw9YSYmXCJaXCI+PWF8fFwiX1wiPT09YXx8XCIkXCI9PT1hfSxpc0V4cE9wZXJhdG9yOmZ1bmN0aW9uKGEpe3JldHVyblwiLVwiPT09YXx8XCIrXCI9PT1hfHx0aGlzLmlzTnVtYmVyKGEpfSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYyxkKXtkPWR8fHRoaXMuaW5kZXg7Yz15KGMpP1wicyBcIitjK1wiLVwiK3RoaXMuaW5kZXgrXCIgW1wiK1xudGhpcy50ZXh0LnN1YnN0cmluZyhjLGQpK1wiXVwiOlwiIFwiK2Q7dGhyb3cgbGEoXCJsZXhlcnJcIixhLGMsdGhpcy50ZXh0KTt9LHJlYWROdW1iZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGE9XCJcIixjPXRoaXMuaW5kZXg7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGQ9Syh0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpKTtpZihcIi5cIj09ZHx8dGhpcy5pc051bWJlcihkKSlhKz1kO2Vsc2V7dmFyIGU9dGhpcy5wZWVrKCk7aWYoXCJlXCI9PWQmJnRoaXMuaXNFeHBPcGVyYXRvcihlKSlhKz1kO2Vsc2UgaWYodGhpcy5pc0V4cE9wZXJhdG9yKGQpJiZlJiZ0aGlzLmlzTnVtYmVyKGUpJiZcImVcIj09YS5jaGFyQXQoYS5sZW5ndGgtMSkpYSs9ZDtlbHNlIGlmKCF0aGlzLmlzRXhwT3BlcmF0b3IoZCl8fGUmJnRoaXMuaXNOdW1iZXIoZSl8fFwiZVwiIT1hLmNoYXJBdChhLmxlbmd0aC0xKSlicmVhaztlbHNlIHRoaXMudGhyb3dFcnJvcihcIkludmFsaWQgZXhwb25lbnRcIil9dGhpcy5pbmRleCsrfWEqPVxuMTt0aGlzLnRva2Vucy5wdXNoKHtpbmRleDpjLHRleHQ6YSxsaXRlcmFsOiEwLGNvbnN0YW50OiEwLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIGF9fSl9LHJlYWRJZGVudDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLGM9XCJcIixkPXRoaXMuaW5kZXgsZSxmLGcsazt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXtrPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYoXCIuXCI9PT1rfHx0aGlzLmlzSWRlbnQoayl8fHRoaXMuaXNOdW1iZXIoaykpXCIuXCI9PT1rJiYoZT10aGlzLmluZGV4KSxjKz1rO2Vsc2UgYnJlYWs7dGhpcy5pbmRleCsrfWlmKGUpZm9yKGY9dGhpcy5pbmRleDtmPHRoaXMudGV4dC5sZW5ndGg7KXtrPXRoaXMudGV4dC5jaGFyQXQoZik7aWYoXCIoXCI9PT1rKXtnPWMuc3Vic3RyKGUtZCsxKTtjPWMuc3Vic3RyKDAsZS1kKTt0aGlzLmluZGV4PWY7YnJlYWt9aWYodGhpcy5pc1doaXRlc3BhY2UoaykpZisrO2Vsc2UgYnJlYWt9ZD17aW5kZXg6ZCx0ZXh0OmN9O2lmKGdiLmhhc093blByb3BlcnR5KGMpKWQuZm49XG5nYltjXSxkLmxpdGVyYWw9ITAsZC5jb25zdGFudD0hMDtlbHNle3ZhciBtPUVjKGMsdGhpcy5vcHRpb25zLHRoaXMudGV4dCk7ZC5mbj1EKGZ1bmN0aW9uKGEsYyl7cmV0dXJuIG0oYSxjKX0se2Fzc2lnbjpmdW5jdGlvbihkLGUpe3JldHVybiB1YihkLGMsZSxhLnRleHQsYS5vcHRpb25zKX19KX10aGlzLnRva2Vucy5wdXNoKGQpO2cmJih0aGlzLnRva2Vucy5wdXNoKHtpbmRleDplLHRleHQ6XCIuXCJ9KSx0aGlzLnRva2Vucy5wdXNoKHtpbmRleDplKzEsdGV4dDpnfSkpfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuaW5kZXg7dGhpcy5pbmRleCsrO2Zvcih2YXIgZD1cIlwiLGU9YSxmPSExO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBnPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCksZT1lK2c7aWYoZilcInVcIj09PWc/KGY9dGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLmluZGV4KzEsdGhpcy5pbmRleCs1KSxmLm1hdGNoKC9bXFxkYS1mXXs0fS9pKXx8XG50aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIFtcXFxcdVwiK2YrXCJdXCIpLHRoaXMuaW5kZXgrPTQsZCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChmLDE2KSkpOmQrPVJlW2ddfHxnLGY9ITE7ZWxzZSBpZihcIlxcXFxcIj09PWcpZj0hMDtlbHNle2lmKGc9PT1hKXt0aGlzLmluZGV4Kys7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmUsc3RyaW5nOmQsbGl0ZXJhbDohMCxjb25zdGFudDohMCxmbjpmdW5jdGlvbigpe3JldHVybiBkfX0pO3JldHVybn1kKz1nfXRoaXMuaW5kZXgrK310aGlzLnRocm93RXJyb3IoXCJVbnRlcm1pbmF0ZWQgcXVvdGVcIixjKX19O3ZhciBmYj1mdW5jdGlvbihhLGMsZCl7dGhpcy5sZXhlcj1hO3RoaXMuJGZpbHRlcj1jO3RoaXMub3B0aW9ucz1kfTtmYi5aRVJPPUQoZnVuY3Rpb24oKXtyZXR1cm4gMH0se2NvbnN0YW50OiEwfSk7ZmIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpmYixwYXJzZTpmdW5jdGlvbihhKXt0aGlzLnRleHQ9XG5hO3RoaXMudG9rZW5zPXRoaXMubGV4ZXIubGV4KGEpO2E9dGhpcy5zdGF0ZW1lbnRzKCk7MCE9PXRoaXMudG9rZW5zLmxlbmd0aCYmdGhpcy50aHJvd0Vycm9yKFwiaXMgYW4gdW5leHBlY3RlZCB0b2tlblwiLHRoaXMudG9rZW5zWzBdKTthLmxpdGVyYWw9ISFhLmxpdGVyYWw7YS5jb25zdGFudD0hIWEuY29uc3RhbnQ7cmV0dXJuIGF9LHByaW1hcnk6ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLmV4cGVjdChcIihcIikpYT10aGlzLmZpbHRlckNoYWluKCksdGhpcy5jb25zdW1lKFwiKVwiKTtlbHNlIGlmKHRoaXMuZXhwZWN0KFwiW1wiKSlhPXRoaXMuYXJyYXlEZWNsYXJhdGlvbigpO2Vsc2UgaWYodGhpcy5leHBlY3QoXCJ7XCIpKWE9dGhpcy5vYmplY3QoKTtlbHNle3ZhciBjPXRoaXMuZXhwZWN0KCk7KGE9Yy5mbil8fHRoaXMudGhyb3dFcnJvcihcIm5vdCBhIHByaW1hcnkgZXhwcmVzc2lvblwiLGMpO2EubGl0ZXJhbD0hIWMubGl0ZXJhbDthLmNvbnN0YW50PSEhYy5jb25zdGFudH1mb3IodmFyIGQ7Yz1cbnRoaXMuZXhwZWN0KFwiKFwiLFwiW1wiLFwiLlwiKTspXCIoXCI9PT1jLnRleHQ/KGE9dGhpcy5mdW5jdGlvbkNhbGwoYSxkKSxkPW51bGwpOlwiW1wiPT09Yy50ZXh0PyhkPWEsYT10aGlzLm9iamVjdEluZGV4KGEpKTpcIi5cIj09PWMudGV4dD8oZD1hLGE9dGhpcy5maWVsZEFjY2VzcyhhKSk6dGhpcy50aHJvd0Vycm9yKFwiSU1QT1NTSUJMRVwiKTtyZXR1cm4gYX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGMpe3Rocm93IGxhKFwic3ludGF4XCIsYy50ZXh0LGEsYy5pbmRleCsxLHRoaXMudGV4dCx0aGlzLnRleHQuc3Vic3RyaW5nKGMuaW5kZXgpKTt9LHBlZWtUb2tlbjpmdW5jdGlvbigpe2lmKDA9PT10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cgbGEoXCJ1ZW9lXCIsdGhpcy50ZXh0KTtyZXR1cm4gdGhpcy50b2tlbnNbMF19LHBlZWs6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoMDx0aGlzLnRva2Vucy5sZW5ndGgpe3ZhciBmPXRoaXMudG9rZW5zWzBdLGc9Zi50ZXh0O2lmKGc9PT1hfHxnPT09Y3x8Zz09PWR8fGc9PT1cbmV8fCEoYXx8Y3x8ZHx8ZSkpcmV0dXJuIGZ9cmV0dXJuITF9LGV4cGVjdDpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4oYT10aGlzLnBlZWsoYSxjLGQsZSkpPyh0aGlzLnRva2Vucy5zaGlmdCgpLGEpOiExfSxjb25zdW1lOmZ1bmN0aW9uKGEpe3RoaXMuZXhwZWN0KGEpfHx0aGlzLnRocm93RXJyb3IoXCJpcyB1bmV4cGVjdGVkLCBleHBlY3RpbmcgW1wiK2ErXCJdXCIsdGhpcy5wZWVrKCkpfSx1bmFyeUZuOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIEQoZnVuY3Rpb24oZCxlKXtyZXR1cm4gYShkLGUsYyl9LHtjb25zdGFudDpjLmNvbnN0YW50fSl9LHRlcm5hcnlGbjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIEQoZnVuY3Rpb24oZSxmKXtyZXR1cm4gYShlLGYpP2MoZSxmKTpkKGUsZil9LHtjb25zdGFudDphLmNvbnN0YW50JiZjLmNvbnN0YW50JiZkLmNvbnN0YW50fSl9LGJpbmFyeUZuOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gRChmdW5jdGlvbihlLGYpe3JldHVybiBjKGUsZixhLGQpfSx7Y29uc3RhbnQ6YS5jb25zdGFudCYmXG5kLmNvbnN0YW50fSl9LHN0YXRlbWVudHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9W107OylpZigwPHRoaXMudG9rZW5zLmxlbmd0aCYmIXRoaXMucGVlayhcIn1cIixcIilcIixcIjtcIixcIl1cIikmJmEucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpLCF0aGlzLmV4cGVjdChcIjtcIikpcmV0dXJuIDE9PT1hLmxlbmd0aD9hWzBdOmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBlLGY9MDtmPGEubGVuZ3RoO2YrKyl7dmFyIGc9YVtmXTtnJiYoZT1nKGMsZCkpfXJldHVybiBlfX0sZmlsdGVyQ2hhaW46ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5leHByZXNzaW9uKCksYzs7KWlmKGM9dGhpcy5leHBlY3QoXCJ8XCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5maWx0ZXIoKSk7ZWxzZSByZXR1cm4gYX0sZmlsdGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXhwZWN0KCksYz10aGlzLiRmaWx0ZXIoYS50ZXh0KSxkPVtdOzspaWYoYT10aGlzLmV4cGVjdChcIjpcIikpZC5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtcbmVsc2V7dmFyIGU9ZnVuY3Rpb24oYSxlLGspe2s9W2tdO2Zvcih2YXIgbT0wO208ZC5sZW5ndGg7bSsrKWsucHVzaChkW21dKGEsZSkpO3JldHVybiBjLmFwcGx5KGEsayl9O3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX19LGV4cHJlc3Npb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc3NpZ25tZW50KCl9LGFzc2lnbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlcm5hcnkoKSxjLGQ7cmV0dXJuKGQ9dGhpcy5leHBlY3QoXCI9XCIpKT8oYS5hc3NpZ258fHRoaXMudGhyb3dFcnJvcihcImltcGxpZXMgYXNzaWdubWVudCBidXQgW1wiK3RoaXMudGV4dC5zdWJzdHJpbmcoMCxkLmluZGV4KStcIl0gY2FuIG5vdCBiZSBhc3NpZ25lZCB0b1wiLGQpLGM9dGhpcy50ZXJuYXJ5KCksZnVuY3Rpb24oZCxmKXtyZXR1cm4gYS5hc3NpZ24oZCxjKGQsZiksZil9KTphfSx0ZXJuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2dpY2FsT1IoKSxjLGQ7aWYodGhpcy5leHBlY3QoXCI/XCIpKXtjPXRoaXMuYXNzaWdubWVudCgpO1xuaWYoZD10aGlzLmV4cGVjdChcIjpcIikpcmV0dXJuIHRoaXMudGVybmFyeUZuKGEsYyx0aGlzLmFzc2lnbm1lbnQoKSk7dGhpcy50aHJvd0Vycm9yKFwiZXhwZWN0ZWQgOlwiLGQpfWVsc2UgcmV0dXJuIGF9LGxvZ2ljYWxPUjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmxvZ2ljYWxBTkQoKSxjOzspaWYoYz10aGlzLmV4cGVjdChcInx8XCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5sb2dpY2FsQU5EKCkpO2Vsc2UgcmV0dXJuIGF9LGxvZ2ljYWxBTkQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVxdWFsaXR5KCksYztpZihjPXRoaXMuZXhwZWN0KFwiJiZcIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLmxvZ2ljYWxBTkQoKSk7cmV0dXJuIGF9LGVxdWFsaXR5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWxhdGlvbmFsKCksYztpZihjPXRoaXMuZXhwZWN0KFwiPT1cIixcIiE9XCIsXCI9PT1cIixcIiE9PVwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMuZXF1YWxpdHkoKSk7cmV0dXJuIGF9LFxucmVsYXRpb25hbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYWRkaXRpdmUoKSxjO2lmKGM9dGhpcy5leHBlY3QoXCI8XCIsXCI+XCIsXCI8PVwiLFwiPj1cIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLnJlbGF0aW9uYWwoKSk7cmV0dXJuIGF9LGFkZGl0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubXVsdGlwbGljYXRpdmUoKSxjO2M9dGhpcy5leHBlY3QoXCIrXCIsXCItXCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMubXVsdGlwbGljYXRpdmUoKSk7cmV0dXJuIGF9LG11bHRpcGxpY2F0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMudW5hcnkoKSxjO2M9dGhpcy5leHBlY3QoXCIqXCIsXCIvXCIsXCIlXCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMudW5hcnkoKSk7cmV0dXJuIGF9LHVuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIHRoaXMuZXhwZWN0KFwiK1wiKT90aGlzLnByaW1hcnkoKTooYT10aGlzLmV4cGVjdChcIi1cIikpP3RoaXMuYmluYXJ5Rm4oZmIuWkVSTyxhLmZuLFxudGhpcy51bmFyeSgpKTooYT10aGlzLmV4cGVjdChcIiFcIikpP3RoaXMudW5hcnlGbihhLmZuLHRoaXMudW5hcnkoKSk6dGhpcy5wcmltYXJ5KCl9LGZpZWxkQWNjZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD10aGlzLmV4cGVjdCgpLnRleHQsZT1FYyhkLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO3JldHVybiBEKGZ1bmN0aW9uKGMsZCxrKXtyZXR1cm4gZShrfHxhKGMsZCkpfSx7YXNzaWduOmZ1bmN0aW9uKGUsZyxrKXsoaz1hKGUsaykpfHxhLmFzc2lnbihlLGs9e30pO3JldHVybiB1YihrLGQsZyxjLnRleHQsYy5vcHRpb25zKX19KX0sb2JqZWN0SW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPXRoaXMuZXhwcmVzc2lvbigpO3RoaXMuY29uc3VtZShcIl1cIik7cmV0dXJuIEQoZnVuY3Rpb24oZSxmKXt2YXIgZz1hKGUsZiksaz1kKGUsZiksbTtrYShrLGMudGV4dCk7aWYoIWcpcmV0dXJuIHQ7KGc9dmEoZ1trXSxjLnRleHQpKSYmKGcudGhlbiYmYy5vcHRpb25zLnVud3JhcFByb21pc2VzKSYmXG4obT1nLFwiJCR2XCJpbiBnfHwobS4kJHY9dCxtLnRoZW4oZnVuY3Rpb24oYSl7bS4kJHY9YX0pKSxnPWcuJCR2KTtyZXR1cm4gZ30se2Fzc2lnbjpmdW5jdGlvbihlLGYsZyl7dmFyIGs9a2EoZChlLGcpLGMudGV4dCk7KGc9dmEoYShlLGcpLGMudGV4dCkpfHxhLmFzc2lnbihlLGc9e30pO3JldHVybiBnW2tdPWZ9fSl9LGZ1bmN0aW9uQ2FsbDpmdW5jdGlvbihhLGMpe3ZhciBkPVtdO2lmKFwiKVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkbyBkLnB1c2godGhpcy5leHByZXNzaW9uKCkpO3doaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9dGhpcy5jb25zdW1lKFwiKVwiKTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbihmLGcpe2Zvcih2YXIgaz1bXSxtPWM/YyhmLGcpOmYsaD0wO2g8ZC5sZW5ndGg7aCsrKWsucHVzaCh2YShkW2hdKGYsZyksZS50ZXh0KSk7aD1hKGYsZyxtKXx8RTt2YShtLGUudGV4dCk7dmFyIGw9ZS50ZXh0O2lmKGgpe2lmKGguY29uc3RydWN0b3I9PT1oKXRocm93IGxhKFwiaXNlY2ZuXCIsXG5sKTtpZihoPT09UGV8fGg9PT1RZXx8UWMmJmg9PT1RYyl0aHJvdyBsYShcImlzZWNmZlwiLGwpO31rPWguYXBwbHk/aC5hcHBseShtLGspOmgoa1swXSxrWzFdLGtbMl0sa1szXSxrWzRdKTtyZXR1cm4gdmEoayxlLnRleHQpfX0sYXJyYXlEZWNsYXJhdGlvbjpmdW5jdGlvbigpe3ZhciBhPVtdLGM9ITA7aWYoXCJdXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIl1cIikpYnJlYWs7dmFyIGQ9dGhpcy5leHByZXNzaW9uKCk7YS5wdXNoKGQpO2QuY29uc3RhbnR8fChjPSExKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIl1cIik7cmV0dXJuIEQoZnVuY3Rpb24oYyxkKXtmb3IodmFyIGc9W10saz0wO2s8YS5sZW5ndGg7aysrKWcucHVzaChhW2tdKGMsZCkpO3JldHVybiBnfSx7bGl0ZXJhbDohMCxjb25zdGFudDpjfSl9LG9iamVjdDpmdW5jdGlvbigpe3ZhciBhPVtdLGM9ITA7aWYoXCJ9XCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIn1cIikpYnJlYWs7XG52YXIgZD10aGlzLmV4cGVjdCgpLGQ9ZC5zdHJpbmd8fGQudGV4dDt0aGlzLmNvbnN1bWUoXCI6XCIpO3ZhciBlPXRoaXMuZXhwcmVzc2lvbigpO2EucHVzaCh7a2V5OmQsdmFsdWU6ZX0pO2UuY29uc3RhbnR8fChjPSExKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIn1cIik7cmV0dXJuIEQoZnVuY3Rpb24oYyxkKXtmb3IodmFyIGU9e30sbT0wO208YS5sZW5ndGg7bSsrKXt2YXIgaD1hW21dO2VbaC5rZXldPWgudmFsdWUoYyxkKX1yZXR1cm4gZX0se2xpdGVyYWw6ITAsY29uc3RhbnQ6Y30pfX07dmFyIFZiPXt9LHhhPUMoXCIkc2NlXCIpLGdhPXtIVE1MOlwiaHRtbFwiLENTUzpcImNzc1wiLFVSTDpcInVybFwiLFJFU09VUkNFX1VSTDpcInJlc291cmNlVXJsXCIsSlM6XCJqc1wifSxZPVguY3JlYXRlRWxlbWVudChcImFcIiksSGM9dWEoVy5sb2NhdGlvbi5ocmVmLCEwKTttYy4kaW5qZWN0PVtcIiRwcm92aWRlXCJdO0ljLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTtLYy4kaW5qZWN0PVtcIiRsb2NhbGVcIl07XG52YXIgTmM9XCIuXCIsSmU9e3l5eXk6JChcIkZ1bGxZZWFyXCIsNCkseXk6JChcIkZ1bGxZZWFyXCIsMiwwLCEwKSx5OiQoXCJGdWxsWWVhclwiLDEpLE1NTU06dmIoXCJNb250aFwiKSxNTU06dmIoXCJNb250aFwiLCEwKSxNTTokKFwiTW9udGhcIiwyLDEpLE06JChcIk1vbnRoXCIsMSwxKSxkZDokKFwiRGF0ZVwiLDIpLGQ6JChcIkRhdGVcIiwxKSxISDokKFwiSG91cnNcIiwyKSxIOiQoXCJIb3Vyc1wiLDEpLGhoOiQoXCJIb3Vyc1wiLDIsLTEyKSxoOiQoXCJIb3Vyc1wiLDEsLTEyKSxtbTokKFwiTWludXRlc1wiLDIpLG06JChcIk1pbnV0ZXNcIiwxKSxzczokKFwiU2Vjb25kc1wiLDIpLHM6JChcIlNlY29uZHNcIiwxKSxzc3M6JChcIk1pbGxpc2Vjb25kc1wiLDMpLEVFRUU6dmIoXCJEYXlcIiksRUVFOnZiKFwiRGF5XCIsITApLGE6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gMTI+YS5nZXRIb3VycygpP2MuQU1QTVNbMF06Yy5BTVBNU1sxXX0sWjpmdW5jdGlvbihhKXthPS0xKmEuZ2V0VGltZXpvbmVPZmZzZXQoKTtyZXR1cm4gYT0oMDw9YT9cIitcIjpcIlwiKSsoWGIoTWF0aFswPFxuYT9cImZsb29yXCI6XCJjZWlsXCJdKGEvNjApLDIpK1hiKE1hdGguYWJzKGElNjApLDIpKX19LEllPS8oKD86W155TWRIaG1zYVpFJ10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8ZCt8SCt8aCt8bSt8cyt8YXxaKSkoLiopLyxIZT0vXlxcLT9cXGQrJC87SmMuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciBGZT1iYShLKSxHZT1iYShJYSk7TGMuJGluamVjdD1bXCIkcGFyc2VcIl07dmFyIGRkPWJhKHtyZXN0cmljdDpcIkVcIixjb21waWxlOmZ1bmN0aW9uKGEsYyl7OD49USYmKGMuaHJlZnx8Yy5uYW1lfHxjLiRzZXQoXCJocmVmXCIsXCJcIiksYS5hcHBlbmQoWC5jcmVhdGVDb21tZW50KFwiSUUgZml4XCIpKSk7aWYoIWMuaHJlZiYmIWMueGxpbmtIcmVmJiYhYy5uYW1lKXJldHVybiBmdW5jdGlvbihhLGMpe3ZhciBmPVwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PXphLmNhbGwoYy5wcm9wKFwiaHJlZlwiKSk/XCJ4bGluazpocmVmXCI6XCJocmVmXCI7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Yy5hdHRyKGYpfHxcbmEucHJldmVudERlZmF1bHQoKX0pfX19KSxGYj17fTtyKHFiLGZ1bmN0aW9uKGEsYyl7aWYoXCJtdWx0aXBsZVwiIT1hKXt2YXIgZD1wYShcIm5nLVwiK2MpO0ZiW2RdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKGEsZixnKXthLiR3YXRjaChnW2RdLGZ1bmN0aW9uKGEpe2cuJHNldChjLCEhYSl9KX19fX19KTtyKFtcInNyY1wiLFwic3Jjc2V0XCIsXCJocmVmXCJdLGZ1bmN0aW9uKGEpe3ZhciBjPXBhKFwibmctXCIrYSk7RmJbY109ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6OTksbGluazpmdW5jdGlvbihkLGUsZil7dmFyIGc9YSxrPWE7XCJocmVmXCI9PT1hJiZcIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddXCI9PT16YS5jYWxsKGUucHJvcChcImhyZWZcIikpJiYoaz1cInhsaW5rSHJlZlwiLGYuJGF0dHJba109XCJ4bGluazpocmVmXCIsZz1udWxsKTtmLiRvYnNlcnZlKGMsZnVuY3Rpb24oYyl7Yz8oZi4kc2V0KGssYyksUSYmZyYmZS5wcm9wKGcsZltrXSkpOlwiaHJlZlwiPT09XG5hJiZmLiRzZXQoayxudWxsKX0pfX19fSk7dmFyIHliPXskYWRkQ29udHJvbDpFLCRyZW1vdmVDb250cm9sOkUsJHNldFZhbGlkaXR5OkUsJHNldERpcnR5OkUsJHNldFByaXN0aW5lOkV9O09jLiRpbmplY3Q9W1wiJGVsZW1lbnRcIixcIiRhdHRyc1wiLFwiJHNjb3BlXCIsXCIkYW5pbWF0ZVwiXTt2YXIgUmM9ZnVuY3Rpb24oYSl7cmV0dXJuW1wiJHRpbWVvdXRcIixmdW5jdGlvbihjKXtyZXR1cm57bmFtZTpcImZvcm1cIixyZXN0cmljdDphP1wiRUFDXCI6XCJFXCIsY29udHJvbGxlcjpPYyxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGUsZixnKXtpZighZi5hY3Rpb24pe3ZhciBrPWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITF9O3NiKGVbMF0sXCJzdWJtaXRcIixrKTtlLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2MoZnVuY3Rpb24oKXskYShlWzBdLFwic3VibWl0XCIsayl9LDAsITEpfSl9dmFyIG09ZS5wYXJlbnQoKS5jb250cm9sbGVyKFwiZm9ybVwiKSxcbmg9Zi5uYW1lfHxmLm5nRm9ybTtoJiZ1YihhLGgsZyxoKTtpZihtKWUub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7bS4kcmVtb3ZlQ29udHJvbChnKTtoJiZ1YihhLGgsdCxoKTtEKGcseWIpfSl9fX19fV19LGVkPVJjKCkscmQ9UmMoITApLFNlPS9eKGZ0cHxodHRwfGh0dHBzKTpcXC9cXC8oXFx3Kzp7MCwxfVxcdypAKT8oXFxTKykoOlswLTldKyk/KFxcL3xcXC8oW1xcdyMhOi4/Kz0mJUAhXFwtXFwvXSkpPyQvLFRlPS9eW2EtejAtOSEjJCUmJyorXFwvPT9eX2B7fH1+Li1dK0BbYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPyhcXC5bYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPykqJC9pLFVlPS9eXFxzKihcXC18XFwrKT8oXFxkK3woXFxkKihcXC5cXGQqKSkpXFxzKiQvLFNjPXt0ZXh0OkFiLG51bWJlcjpmdW5jdGlvbihhLGMsZCxlLGYsZyl7QWIoYSxjLGQsZSxmLGcpO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXt2YXIgYz1lLiRpc0VtcHR5KGEpO2lmKGN8fFVlLnRlc3QoYSkpcmV0dXJuIGUuJHNldFZhbGlkaXR5KFwibnVtYmVyXCIsXG4hMCksXCJcIj09PWE/bnVsbDpjP2E6cGFyc2VGbG9hdChhKTtlLiRzZXRWYWxpZGl0eShcIm51bWJlclwiLCExKTtyZXR1cm4gdH0pO0tlKGUsXCJudW1iZXJcIixWZSxudWxsLGUuJCR2YWxpZGl0eVN0YXRlKTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGUuJGlzRW1wdHkoYSk/XCJcIjpcIlwiK2F9KTtkLm1pbiYmKGE9ZnVuY3Rpb24oYSl7dmFyIGM9cGFyc2VGbG9hdChkLm1pbik7cmV0dXJuIHNhKGUsXCJtaW5cIixlLiRpc0VtcHR5KGEpfHxhPj1jLGEpfSxlLiRwYXJzZXJzLnB1c2goYSksZS4kZm9ybWF0dGVycy5wdXNoKGEpKTtkLm1heCYmKGE9ZnVuY3Rpb24oYSl7dmFyIGM9cGFyc2VGbG9hdChkLm1heCk7cmV0dXJuIHNhKGUsXCJtYXhcIixlLiRpc0VtcHR5KGEpfHxhPD1jLGEpfSxlLiRwYXJzZXJzLnB1c2goYSksZS4kZm9ybWF0dGVycy5wdXNoKGEpKTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGUsXCJudW1iZXJcIixlLiRpc0VtcHR5KGEpfHxcbmliKGEpLGEpfSl9LHVybDpmdW5jdGlvbihhLGMsZCxlLGYsZyl7QWIoYSxjLGQsZSxmLGcpO2E9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGUsXCJ1cmxcIixlLiRpc0VtcHR5KGEpfHxTZS50ZXN0KGEpLGEpfTtlLiRmb3JtYXR0ZXJzLnB1c2goYSk7ZS4kcGFyc2Vycy5wdXNoKGEpfSxlbWFpbDpmdW5jdGlvbihhLGMsZCxlLGYsZyl7QWIoYSxjLGQsZSxmLGcpO2E9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGUsXCJlbWFpbFwiLGUuJGlzRW1wdHkoYSl8fFRlLnRlc3QoYSksYSl9O2UuJGZvcm1hdHRlcnMucHVzaChhKTtlLiRwYXJzZXJzLnB1c2goYSl9LHJhZGlvOmZ1bmN0aW9uKGEsYyxkLGUpe3goZC5uYW1lKSYmYy5hdHRyKFwibmFtZVwiLGhiKCkpO2Mub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7Y1swXS5jaGVja2VkJiZhLiRhcHBseShmdW5jdGlvbigpe2UuJHNldFZpZXdWYWx1ZShkLnZhbHVlKX0pfSk7ZS4kcmVuZGVyPWZ1bmN0aW9uKCl7Y1swXS5jaGVja2VkPWQudmFsdWU9PWUuJHZpZXdWYWx1ZX07XG5kLiRvYnNlcnZlKFwidmFsdWVcIixlLiRyZW5kZXIpfSxjaGVja2JveDpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLm5nVHJ1ZVZhbHVlLGc9ZC5uZ0ZhbHNlVmFsdWU7dihmKXx8KGY9ITApO3YoZyl8fChnPSExKTtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7ZS4kc2V0Vmlld1ZhbHVlKGNbMF0uY2hlY2tlZCl9KX0pO2UuJHJlbmRlcj1mdW5jdGlvbigpe2NbMF0uY2hlY2tlZD1lLiR2aWV3VmFsdWV9O2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1mfTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1mfSk7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhP2Y6Z30pfSxoaWRkZW46RSxidXR0b246RSxzdWJtaXQ6RSxyZXNldDpFLGZpbGU6RX0sVmU9W1wiYmFkSW5wdXRcIl0samM9W1wiJGJyb3dzZXJcIixcIiRzbmlmZmVyXCIsZnVuY3Rpb24oYSxjKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsXG5saW5rOmZ1bmN0aW9uKGQsZSxmLGcpe2cmJihTY1tLKGYudHlwZSldfHxTYy50ZXh0KShkLGUsZixnLGMsYSl9fX1dLHdiPVwibmctdmFsaWRcIix4Yj1cIm5nLWludmFsaWRcIixPYT1cIm5nLXByaXN0aW5lXCIsemI9XCJuZy1kaXJ0eVwiLFdlPVtcIiRzY29wZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRhdHRyc1wiLFwiJGVsZW1lbnRcIixcIiRwYXJzZVwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGMsZCxlLGYsZyl7ZnVuY3Rpb24gayhhLGMpe2M9Yz9cIi1cIittYihjLFwiLVwiKTpcIlwiO2cucmVtb3ZlQ2xhc3MoZSwoYT94Yjp3YikrYyk7Zy5hZGRDbGFzcyhlLChhP3diOnhiKStjKX10aGlzLiRtb2RlbFZhbHVlPXRoaXMuJHZpZXdWYWx1ZT1OdW1iZXIuTmFOO3RoaXMuJHBhcnNlcnM9W107dGhpcy4kZm9ybWF0dGVycz1bXTt0aGlzLiR2aWV3Q2hhbmdlTGlzdGVuZXJzPVtdO3RoaXMuJHByaXN0aW5lPSEwO3RoaXMuJGRpcnR5PSExO3RoaXMuJHZhbGlkPSEwO3RoaXMuJGludmFsaWQ9ITE7dGhpcy4kbmFtZT1cbmQubmFtZTt2YXIgbT1mKGQubmdNb2RlbCksaD1tLmFzc2lnbjtpZighaCl0aHJvdyBDKFwibmdNb2RlbFwiKShcIm5vbmFzc2lnblwiLGQubmdNb2RlbCxpYShlKSk7dGhpcy4kcmVuZGVyPUU7dGhpcy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4geChhKXx8XCJcIj09PWF8fG51bGw9PT1hfHxhIT09YX07dmFyIGw9ZS5pbmhlcml0ZWREYXRhKFwiJGZvcm1Db250cm9sbGVyXCIpfHx5YixuPTAscD10aGlzLiRlcnJvcj17fTtlLmFkZENsYXNzKE9hKTtrKCEwKTt0aGlzLiRzZXRWYWxpZGl0eT1mdW5jdGlvbihhLGMpe3BbYV0hPT0hYyYmKGM/KHBbYV0mJm4tLSxufHwoayghMCksdGhpcy4kdmFsaWQ9ITAsdGhpcy4kaW52YWxpZD0hMSkpOihrKCExKSx0aGlzLiRpbnZhbGlkPSEwLHRoaXMuJHZhbGlkPSExLG4rKykscFthXT0hYyxrKGMsYSksbC4kc2V0VmFsaWRpdHkoYSxjLHRoaXMpKX07dGhpcy4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXt0aGlzLiRkaXJ0eT0hMTt0aGlzLiRwcmlzdGluZT1cbiEwO2cucmVtb3ZlQ2xhc3MoZSx6Yik7Zy5hZGRDbGFzcyhlLE9hKX07dGhpcy4kc2V0Vmlld1ZhbHVlPWZ1bmN0aW9uKGQpe3RoaXMuJHZpZXdWYWx1ZT1kO3RoaXMuJHByaXN0aW5lJiYodGhpcy4kZGlydHk9ITAsdGhpcy4kcHJpc3RpbmU9ITEsZy5yZW1vdmVDbGFzcyhlLE9hKSxnLmFkZENsYXNzKGUsemIpLGwuJHNldERpcnR5KCkpO3IodGhpcy4kcGFyc2VycyxmdW5jdGlvbihhKXtkPWEoZCl9KTt0aGlzLiRtb2RlbFZhbHVlIT09ZCYmKHRoaXMuJG1vZGVsVmFsdWU9ZCxoKGEsZCkscih0aGlzLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLGZ1bmN0aW9uKGEpe3RyeXthKCl9Y2F0Y2goZCl7YyhkKX19KSl9O3ZhciBxPXRoaXM7YS4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYz1tKGEpO2lmKHEuJG1vZGVsVmFsdWUhPT1jKXt2YXIgZD1xLiRmb3JtYXR0ZXJzLGU9ZC5sZW5ndGg7Zm9yKHEuJG1vZGVsVmFsdWU9YztlLS07KWM9ZFtlXShjKTtxLiR2aWV3VmFsdWUhPT1jJiYocS4kdmlld1ZhbHVlPVxuYyxxLiRyZW5kZXIoKSl9cmV0dXJuIGN9KX1dLEdkPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6W1wibmdNb2RlbFwiLFwiXj9mb3JtXCJdLGNvbnRyb2xsZXI6V2UsbGluazpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1lWzBdLGc9ZVsxXXx8eWI7Zy4kYWRkQ29udHJvbChmKTthLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtnLiRyZW1vdmVDb250cm9sKGYpfSl9fX0sSWQ9YmEoe3JlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtlLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXthLiRldmFsKGQubmdDaGFuZ2UpfSl9fSksa2M9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtpZihlKXtkLnJlcXVpcmVkPSEwO3ZhciBmPWZ1bmN0aW9uKGEpe2lmKGQucmVxdWlyZWQmJmUuJGlzRW1wdHkoYSkpZS4kc2V0VmFsaWRpdHkoXCJyZXF1aXJlZFwiLCExKTtlbHNlIHJldHVybiBlLiRzZXRWYWxpZGl0eShcInJlcXVpcmVkXCIsXG4hMCksYX07ZS4kZm9ybWF0dGVycy5wdXNoKGYpO2UuJHBhcnNlcnMudW5zaGlmdChmKTtkLiRvYnNlcnZlKFwicmVxdWlyZWRcIixmdW5jdGlvbigpe2YoZS4kdmlld1ZhbHVlKX0pfX19fSxIZD1mdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9KGE9L1xcLyguKilcXC8vLmV4ZWMoZC5uZ0xpc3QpKSYmUmVnRXhwKGFbMV0pfHxkLm5nTGlzdHx8XCIsXCI7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKCF4KGEpKXt2YXIgYz1bXTthJiZyKGEuc3BsaXQoZiksZnVuY3Rpb24oYSl7YSYmYy5wdXNoKGFhKGEpKX0pO3JldHVybiBjfX0pO2UuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gSihhKT9hLmpvaW4oXCIsIFwiKTp0fSk7ZS4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8IWEubGVuZ3RofX19fSxYZT0vXih0cnVlfGZhbHNlfFxcZCspJC8sSmQ9ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6MTAwLFxuY29tcGlsZTpmdW5jdGlvbihhLGMpe3JldHVybiBYZS50ZXN0KGMubmdWYWx1ZSk/ZnVuY3Rpb24oYSxjLGYpe2YuJHNldChcInZhbHVlXCIsYS4kZXZhbChmLm5nVmFsdWUpKX06ZnVuY3Rpb24oYSxjLGYpe2EuJHdhdGNoKGYubmdWYWx1ZSxmdW5jdGlvbihhKXtmLiRzZXQoXCJ2YWx1ZVwiLGEpfSl9fX19LGpkPXlhKHtjb21waWxlOmZ1bmN0aW9uKGEpe2EuYWRkQ2xhc3MoXCJuZy1iaW5kaW5nXCIpO3JldHVybiBmdW5jdGlvbihhLGQsZSl7ZC5kYXRhKFwiJGJpbmRpbmdcIixlLm5nQmluZCk7YS4kd2F0Y2goZS5uZ0JpbmQsZnVuY3Rpb24oYSl7ZC50ZXh0KGE9PXQ/XCJcIjphKX0pfX19KSxsZD1bXCIkaW50ZXJwb2xhdGVcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2M9YShkLmF0dHIoZS4kYXR0ci5uZ0JpbmRUZW1wbGF0ZSkpO2QuYWRkQ2xhc3MoXCJuZy1iaW5kaW5nXCIpLmRhdGEoXCIkYmluZGluZ1wiLGMpO2UuJG9ic2VydmUoXCJuZ0JpbmRUZW1wbGF0ZVwiLGZ1bmN0aW9uKGEpe2QudGV4dChhKX0pfX1dLFxua2Q9W1wiJHNjZVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxjKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihkKXtkLmFkZENsYXNzKFwibmctYmluZGluZ1wiKTtyZXR1cm4gZnVuY3Rpb24oZCxmLGcpe2YuZGF0YShcIiRiaW5kaW5nXCIsZy5uZ0JpbmRIdG1sKTt2YXIgaz1jKGcubmdCaW5kSHRtbCk7ZC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4oayhkKXx8XCJcIikudG9TdHJpbmcoKX0sZnVuY3Rpb24oYyl7Zi5odG1sKGEuZ2V0VHJ1c3RlZEh0bWwoayhkKSl8fFwiXCIpfSl9fX19XSxtZD1ZYihcIlwiLCEwKSxvZD1ZYihcIk9kZFwiLDApLG5kPVliKFwiRXZlblwiLDEpLHBkPXlhKHtjb21waWxlOmZ1bmN0aW9uKGEsYyl7Yy4kc2V0KFwibmdDbG9ha1wiLHQpO2EucmVtb3ZlQ2xhc3MoXCJuZy1jbG9ha1wiKX19KSxxZD1bZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6ITAsY29udHJvbGxlcjpcIkBcIixwcmlvcml0eTo1MDB9fV0sbGM9e30sWWU9e2JsdXI6ITAsZm9jdXM6ITB9O3IoXCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlXCIuc3BsaXQoXCIgXCIpLFxuZnVuY3Rpb24oYSl7dmFyIGM9cGEoXCJuZy1cIithKTtsY1tjXT1bXCIkcGFyc2VcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihkLGUpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGYsZyl7dmFyIGs9ZChnW2NdKTtyZXR1cm4gZnVuY3Rpb24oYyxkKXtkLm9uKGEsZnVuY3Rpb24oZCl7dmFyIGY9ZnVuY3Rpb24oKXtrKGMseyRldmVudDpkfSl9O1llW2FdJiZlLiQkcGhhc2U/Yy4kZXZhbEFzeW5jKGYpOmMuJGFwcGx5KGYpfSl9fX19XX0pO3ZhciB0ZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybnt0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjYwMCx0ZXJtaW5hbDohMCxyZXN0cmljdDpcIkFcIiwkJHRsYjohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYsZyl7dmFyIGssbSxoO2MuJHdhdGNoKGUubmdJZixmdW5jdGlvbihmKXtVYShmKT9tfHwobT1jLiRuZXcoKSxnKG0sZnVuY3Rpb24oYyl7Y1tjLmxlbmd0aCsrXT1YLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nSWY6IFwiK2UubmdJZitcblwiIFwiKTtrPXtjbG9uZTpjfTthLmVudGVyKGMsZC5wYXJlbnQoKSxkKX0pKTooaCYmKGgucmVtb3ZlKCksaD1udWxsKSxtJiYobS4kZGVzdHJveSgpLG09bnVsbCksayYmKGg9RWIoay5jbG9uZSksYS5sZWF2ZShoLGZ1bmN0aW9uKCl7aD1udWxsfSksaz1udWxsKSl9KX19fV0sdWQ9W1wiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkYW5jaG9yU2Nyb2xsXCIsXCIkYW5pbWF0ZVwiLFwiJHNjZVwiLGZ1bmN0aW9uKGEsYyxkLGUsZil7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6NDAwLHRlcm1pbmFsOiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsY29udHJvbGxlcjpWYS5ub29wLGNvbXBpbGU6ZnVuY3Rpb24oZyxrKXt2YXIgbT1rLm5nSW5jbHVkZXx8ay5zcmMsaD1rLm9ubG9hZHx8XCJcIixsPWsuYXV0b3Njcm9sbDtyZXR1cm4gZnVuY3Rpb24oZyxrLHEscixGKXt2YXIgdT0wLHQsdyxSLHo9ZnVuY3Rpb24oKXt3JiYody5yZW1vdmUoKSx3PW51bGwpO3QmJih0LiRkZXN0cm95KCksdD1udWxsKTtcblImJihlLmxlYXZlKFIsZnVuY3Rpb24oKXt3PW51bGx9KSx3PVIsUj1udWxsKX07Zy4kd2F0Y2goZi5wYXJzZUFzUmVzb3VyY2VVcmwobSksZnVuY3Rpb24oZil7dmFyIG09ZnVuY3Rpb24oKXsheShsKXx8bCYmIWcuJGV2YWwobCl8fGQoKX0scT0rK3U7Zj8oYS5nZXQoZix7Y2FjaGU6Y30pLnN1Y2Nlc3MoZnVuY3Rpb24oYSl7aWYocT09PXUpe3ZhciBjPWcuJG5ldygpO3IudGVtcGxhdGU9YTthPUYoYyxmdW5jdGlvbihhKXt6KCk7ZS5lbnRlcihhLG51bGwsayxtKX0pO3Q9YztSPWE7dC4kZW1pdChcIiRpbmNsdWRlQ29udGVudExvYWRlZFwiKTtnLiRldmFsKGgpfX0pLmVycm9yKGZ1bmN0aW9uKCl7cT09PXUmJnooKX0pLGcuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWRcIikpOih6KCksci50ZW1wbGF0ZT1udWxsKX0pfX19fV0sS2Q9W1wiJGNvbXBpbGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTotNDAwLHJlcXVpcmU6XCJuZ0luY2x1ZGVcIixcbmxpbms6ZnVuY3Rpb24oYyxkLGUsZil7ZC5odG1sKGYudGVtcGxhdGUpO2EoZC5jb250ZW50cygpKShjKX19fV0sdmQ9eWEoe3ByaW9yaXR5OjQ1MCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGMsZCl7YS4kZXZhbChkLm5nSW5pdCl9fX19KSx3ZD15YSh7dGVybWluYWw6ITAscHJpb3JpdHk6MUUzfSkseGQ9W1wiJGxvY2FsZVwiLFwiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD0ve30vZztyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLGxpbms6ZnVuY3Rpb24oZSxmLGcpe3ZhciBrPWcuY291bnQsbT1nLiRhdHRyLndoZW4mJmYuYXR0cihnLiRhdHRyLndoZW4pLGg9Zy5vZmZzZXR8fDAsbD1lLiRldmFsKG0pfHx7fSxuPXt9LHA9Yy5zdGFydFN5bWJvbCgpLHE9Yy5lbmRTeW1ib2woKSxzPS9ed2hlbihNaW51cyk/KC4rKSQvO3IoZyxmdW5jdGlvbihhLGMpe3MudGVzdChjKSYmKGxbSyhjLnJlcGxhY2UoXCJ3aGVuXCIsXCJcIikucmVwbGFjZShcIk1pbnVzXCIsXCItXCIpKV09XG5mLmF0dHIoZy4kYXR0cltjXSkpfSk7cihsLGZ1bmN0aW9uKGEsZSl7bltlXT1jKGEucmVwbGFjZShkLHAraytcIi1cIitoK3EpKX0pO2UuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGM9cGFyc2VGbG9hdChlLiRldmFsKGspKTtpZihpc05hTihjKSlyZXR1cm5cIlwiO2MgaW4gbHx8KGM9YS5wbHVyYWxDYXQoYy1oKSk7cmV0dXJuIG5bY10oZSxmLCEwKX0sZnVuY3Rpb24oYSl7Zi50ZXh0KGEpfSl9fX1dLHlkPVtcIiRwYXJzZVwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGMpe3ZhciBkPUMoXCJuZ1JlcGVhdFwiKTtyZXR1cm57dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxRTMsdGVybWluYWw6ITAsJCR0bGI6ITAsbGluazpmdW5jdGlvbihlLGYsZyxrLG0pe3ZhciBoPWcubmdSZXBlYXQsbD1oLm1hdGNoKC9eXFxzKihbXFxzXFxTXSs/KVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMqJC8pLG4scCxxLHMsdCx1LEE9eyRpZDpLYX07aWYoIWwpdGhyb3cgZChcImlleHBcIixcbmgpO2c9bFsxXTtrPWxbMl07KGw9bFszXSk/KG49YShsKSxwPWZ1bmN0aW9uKGEsYyxkKXt1JiYoQVt1XT1hKTtBW3RdPWM7QS4kaW5kZXg9ZDtyZXR1cm4gbihlLEEpfSk6KHE9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gS2EoYyl9LHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9KTtsPWcubWF0Y2goL14oPzooW1xcJFxcd10rKXxcXCgoW1xcJFxcd10rKVxccyosXFxzKihbXFwkXFx3XSspXFwpKSQvKTtpZighbCl0aHJvdyBkKFwiaWlkZXhwXCIsZyk7dD1sWzNdfHxsWzFdO3U9bFsyXTt2YXIgeT17fTtlLiR3YXRjaENvbGxlY3Rpb24oayxmdW5jdGlvbihhKXt2YXIgZyxrLGw9ZlswXSxuLEE9e30sQixJLEgsdixFLEMseCxKPVtdO2lmKFBhKGEpKUM9YSxFPXB8fHE7ZWxzZXtFPXB8fHM7Qz1bXTtmb3IoSCBpbiBhKWEuaGFzT3duUHJvcGVydHkoSCkmJlwiJFwiIT1ILmNoYXJBdCgwKSYmQy5wdXNoKEgpO0Muc29ydCgpfUI9Qy5sZW5ndGg7az1KLmxlbmd0aD1DLmxlbmd0aDtmb3IoZz0wO2c8aztnKyspaWYoSD1hPT09XG5DP2c6Q1tnXSx2PWFbSF0sbj1FKEgsdixnKSxEYShuLFwiYHRyYWNrIGJ5YCBpZFwiKSx5Lmhhc093blByb3BlcnR5KG4pKXg9eVtuXSxkZWxldGUgeVtuXSxBW25dPXgsSltnXT14O2Vsc2V7aWYoQS5oYXNPd25Qcm9wZXJ0eShuKSl0aHJvdyByKEosZnVuY3Rpb24oYSl7YSYmYS5zY29wZSYmKHlbYS5pZF09YSl9KSxkKFwiZHVwZXNcIixoLG4sbmEodikpO0pbZ109e2lkOm59O0Fbbl09ITF9Zm9yKEggaW4geSl5Lmhhc093blByb3BlcnR5KEgpJiYoeD15W0hdLGc9RWIoeC5jbG9uZSksYy5sZWF2ZShnKSxyKGcsZnVuY3Rpb24oYSl7YS4kJE5HX1JFTU9WRUQ9ITB9KSx4LnNjb3BlLiRkZXN0cm95KCkpO2c9MDtmb3Ioaz1DLmxlbmd0aDtnPGs7ZysrKXtIPWE9PT1DP2c6Q1tnXTt2PWFbSF07eD1KW2ddO0pbZy0xXSYmKGw9SltnLTFdLmNsb25lW0pbZy0xXS5jbG9uZS5sZW5ndGgtMV0pO2lmKHguc2NvcGUpe0k9eC5zY29wZTtuPWw7ZG8gbj1uLm5leHRTaWJsaW5nO3doaWxlKG4mJm4uJCROR19SRU1PVkVEKTtcbnguY2xvbmVbMF0hPW4mJmMubW92ZShFYih4LmNsb25lKSxudWxsLHcobCkpO2w9eC5jbG9uZVt4LmNsb25lLmxlbmd0aC0xXX1lbHNlIEk9ZS4kbmV3KCk7SVt0XT12O3UmJihJW3VdPUgpO0kuJGluZGV4PWc7SS4kZmlyc3Q9MD09PWc7SS4kbGFzdD1nPT09Qi0xO0kuJG1pZGRsZT0hKEkuJGZpcnN0fHxJLiRsYXN0KTtJLiRvZGQ9IShJLiRldmVuPTA9PT0oZyYxKSk7eC5zY29wZXx8bShJLGZ1bmN0aW9uKGEpe2FbYS5sZW5ndGgrK109WC5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ1JlcGVhdDogXCIraCtcIiBcIik7Yy5lbnRlcihhLG51bGwsdyhsKSk7bD1hO3guc2NvcGU9STt4LmNsb25lPWE7QVt4LmlkXT14fSl9eT1BfSl9fX1dLHpkPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtjLiR3YXRjaChlLm5nU2hvdyxmdW5jdGlvbihjKXthW1VhKGMpP1wicmVtb3ZlQ2xhc3NcIjpcImFkZENsYXNzXCJdKGQsXCJuZy1oaWRlXCIpfSl9fV0sc2Q9W1wiJGFuaW1hdGVcIixcbmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yy4kd2F0Y2goZS5uZ0hpZGUsZnVuY3Rpb24oYyl7YVtVYShjKT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShkLFwibmctaGlkZVwiKX0pfX1dLEFkPXlhKGZ1bmN0aW9uKGEsYyxkKXthLiR3YXRjaChkLm5nU3R5bGUsZnVuY3Rpb24oYSxkKXtkJiZhIT09ZCYmcihkLGZ1bmN0aW9uKGEsZCl7Yy5jc3MoZCxcIlwiKX0pO2EmJmMuY3NzKGEpfSwhMCl9KSxCZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpcIm5nU3dpdGNoXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixmdW5jdGlvbigpe3RoaXMuY2FzZXM9e319XSxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe3ZhciBnPVtdLGs9W10sbT1bXSxoPVtdO2MuJHdhdGNoKGUubmdTd2l0Y2h8fGUub24sZnVuY3Rpb24oZCl7dmFyIG4scDtuPTA7Zm9yKHA9bS5sZW5ndGg7bjxwOysrbiltW25dLnJlbW92ZSgpO249bS5sZW5ndGg9MDtmb3IocD1cbmgubGVuZ3RoO248cDsrK24pe3ZhciBxPWtbbl07aFtuXS4kZGVzdHJveSgpO21bbl09cTthLmxlYXZlKHEsZnVuY3Rpb24oKXttLnNwbGljZShuLDEpfSl9ay5sZW5ndGg9MDtoLmxlbmd0aD0wO2lmKGc9Zi5jYXNlc1tcIiFcIitkXXx8Zi5jYXNlc1tcIj9cIl0pYy4kZXZhbChlLmNoYW5nZSkscihnLGZ1bmN0aW9uKGQpe3ZhciBlPWMuJG5ldygpO2gucHVzaChlKTtkLnRyYW5zY2x1ZGUoZSxmdW5jdGlvbihjKXt2YXIgZT1kLmVsZW1lbnQ7ay5wdXNoKGMpO2EuZW50ZXIoYyxlLnBhcmVudCgpLGUpfSl9KX0pfX19XSxDZD15YSh7dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eTo4MDAscmVxdWlyZTpcIl5uZ1N3aXRjaFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtlLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXT1lLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXXx8W107ZS5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl0ucHVzaCh7dHJhbnNjbHVkZTpmLGVsZW1lbnQ6Y30pfX0pLERkPVxueWEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6ODAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUsZil7ZS5jYXNlc1tcIj9cIl09ZS5jYXNlc1tcIj9cIl18fFtdO2UuY2FzZXNbXCI/XCJdLnB1c2goe3RyYW5zY2x1ZGU6ZixlbGVtZW50OmN9KX19KSxGZD15YSh7bGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2lmKCFmKXRocm93IEMoXCJuZ1RyYW5zY2x1ZGVcIikoXCJvcnBoYW5cIixpYShjKSk7ZihmdW5jdGlvbihhKXtjLmVtcHR5KCk7Yy5hcHBlbmQoYSl9KX19KSxmZD1bXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVcIix0ZXJtaW5hbDohMCxjb21waWxlOmZ1bmN0aW9uKGMsZCl7XCJ0ZXh0L25nLXRlbXBsYXRlXCI9PWQudHlwZSYmYS5wdXQoZC5pZCxjWzBdLnRleHQpfX19XSxaZT1DKFwibmdPcHRpb25zXCIpLEVkPWJhKHt0ZXJtaW5hbDohMH0pLGdkPVtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGMpe3ZhciBkPVxuL15cXHMqKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK2dyb3VwXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooW1xcJFxcd11bXFwkXFx3XSopfCg/OlxcKFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKixcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccypcXCkpKVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8kLyxlPXskc2V0Vmlld1ZhbHVlOkV9O3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcInNlbGVjdFwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpbXCIkZWxlbWVudFwiLFwiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGMsZCl7dmFyIG09dGhpcyxoPXt9LGw9ZSxuO20uZGF0YWJvdW5kPWQubmdNb2RlbDttLmluaXQ9ZnVuY3Rpb24oYSxjLGQpe2w9YTtuPWR9O20uYWRkT3B0aW9uPWZ1bmN0aW9uKGMpe0RhKGMsJ1wib3B0aW9uIHZhbHVlXCInKTtoW2NdPSEwO2wuJHZpZXdWYWx1ZT09YyYmKGEudmFsKGMpLG4ucGFyZW50KCkmJm4ucmVtb3ZlKCkpfTtcbm0ucmVtb3ZlT3B0aW9uPWZ1bmN0aW9uKGEpe3RoaXMuaGFzT3B0aW9uKGEpJiYoZGVsZXRlIGhbYV0sbC4kdmlld1ZhbHVlPT1hJiZ0aGlzLnJlbmRlclVua25vd25PcHRpb24oYSkpfTttLnJlbmRlclVua25vd25PcHRpb249ZnVuY3Rpb24oYyl7Yz1cIj8gXCIrS2EoYykrXCIgP1wiO24udmFsKGMpO2EucHJlcGVuZChuKTthLnZhbChjKTtuLnByb3AoXCJzZWxlY3RlZFwiLCEwKX07bS5oYXNPcHRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIGguaGFzT3duUHJvcGVydHkoYSl9O2MuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe20ucmVuZGVyVW5rbm93bk9wdGlvbj1FfSl9XSxsaW5rOmZ1bmN0aW9uKGUsZyxrLG0pe2Z1bmN0aW9uIGgoYSxjLGQsZSl7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9ZC4kdmlld1ZhbHVlO2UuaGFzT3B0aW9uKGEpPyh2LnBhcmVudCgpJiZ2LnJlbW92ZSgpLGMudmFsKGEpLFwiXCI9PT1hJiZ1LnByb3AoXCJzZWxlY3RlZFwiLCEwKSk6eChhKSYmdT9jLnZhbChcIlwiKTplLnJlbmRlclVua25vd25PcHRpb24oYSl9O1xuYy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXt2LnBhcmVudCgpJiZ2LnJlbW92ZSgpO2QuJHNldFZpZXdWYWx1ZShjLnZhbCgpKX0pfSl9ZnVuY3Rpb24gbChhLGMsZCl7dmFyIGU7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGJiKGQuJHZpZXdWYWx1ZSk7cihjLmZpbmQoXCJvcHRpb25cIiksZnVuY3Rpb24oYyl7Yy5zZWxlY3RlZD15KGEuZ2V0KGMudmFsdWUpKX0pfTthLiR3YXRjaChmdW5jdGlvbigpe0FhKGUsZC4kdmlld1ZhbHVlKXx8KGU9aGEoZC4kdmlld1ZhbHVlKSxkLiRyZW5kZXIoKSl9KTtjLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXthLiRhcHBseShmdW5jdGlvbigpe3ZhciBhPVtdO3IoYy5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGMpe2Muc2VsZWN0ZWQmJmEucHVzaChjLnZhbHVlKX0pO2QuJHNldFZpZXdWYWx1ZShhKX0pfSl9ZnVuY3Rpb24gbihlLGYsZyl7ZnVuY3Rpb24gaygpe3ZhciBhPXtcIlwiOltdfSxjPVtcIlwiXSxkLGgsXG5zLHQsdjtzPWcuJG1vZGVsVmFsdWU7dD13KGUpfHxbXTt2YXIgRT1uP1piKHQpOnQsSSxNLEI7TT17fTtCPSExO2lmKHEpaWYoaD1nLiRtb2RlbFZhbHVlLHgmJkooaCkpZm9yKEI9bmV3IGJiKFtdKSxkPXt9LHY9MDt2PGgubGVuZ3RoO3YrKylkW21dPWhbdl0sQi5wdXQoeChlLGQpLGhbdl0pO2Vsc2UgQj1uZXcgYmIoaCk7dj1CO3ZhciBELEs7Zm9yKEI9MDtJPUUubGVuZ3RoLEI8STtCKyspe2g9QjtpZihuKXtoPUVbQl07aWYoXCIkXCI9PT1oLmNoYXJBdCgwKSljb250aW51ZTtNW25dPWh9TVttXT10W2hdO2Q9cihlLE0pfHxcIlwiOyhoPWFbZF0pfHwoaD1hW2RdPVtdLGMucHVzaChkKSk7cT9kPXkodi5yZW1vdmUoeD94KGUsTSk6dShlLE0pKSk6KHg/KGQ9e30sZFttXT1zLGQ9eChlLGQpPT09eChlLE0pKTpkPXM9PT11KGUsTSksdj12fHxkKTtEPWwoZSxNKTtEPXkoRCk/RDpcIlwiO2gucHVzaCh7aWQ6eD94KGUsTSk6bj9FW0JdOkIsbGFiZWw6RCxzZWxlY3RlZDpkfSl9cXx8KEZ8fG51bGw9PT1cbnM/YVtcIlwiXS51bnNoaWZ0KHtpZDpcIlwiLGxhYmVsOlwiXCIsc2VsZWN0ZWQ6IXZ9KTp2fHxhW1wiXCJdLnVuc2hpZnQoe2lkOlwiP1wiLGxhYmVsOlwiXCIsc2VsZWN0ZWQ6ITB9KSk7TT0wO2ZvcihFPWMubGVuZ3RoO008RTtNKyspe2Q9Y1tNXTtoPWFbZF07ei5sZW5ndGg8PU0/KHM9e2VsZW1lbnQ6Qy5jbG9uZSgpLmF0dHIoXCJsYWJlbFwiLGQpLGxhYmVsOmgubGFiZWx9LHQ9W3NdLHoucHVzaCh0KSxmLmFwcGVuZChzLmVsZW1lbnQpKToodD16W01dLHM9dFswXSxzLmxhYmVsIT1kJiZzLmVsZW1lbnQuYXR0cihcImxhYmVsXCIscy5sYWJlbD1kKSk7RD1udWxsO0I9MDtmb3IoST1oLmxlbmd0aDtCPEk7QisrKWQ9aFtCXSwodj10W0IrMV0pPyhEPXYuZWxlbWVudCx2LmxhYmVsIT09ZC5sYWJlbCYmRC50ZXh0KHYubGFiZWw9ZC5sYWJlbCksdi5pZCE9PWQuaWQmJkQudmFsKHYuaWQ9ZC5pZCksRFswXS5zZWxlY3RlZCE9PWQuc2VsZWN0ZWQmJihELnByb3AoXCJzZWxlY3RlZFwiLHYuc2VsZWN0ZWQ9ZC5zZWxlY3RlZCksXG5RJiZELnByb3AoXCJzZWxlY3RlZFwiLHYuc2VsZWN0ZWQpKSk6KFwiXCI9PT1kLmlkJiZGP0s9RjooSz1BLmNsb25lKCkpLnZhbChkLmlkKS5wcm9wKFwic2VsZWN0ZWRcIixkLnNlbGVjdGVkKS5hdHRyKFwic2VsZWN0ZWRcIixkLnNlbGVjdGVkKS50ZXh0KGQubGFiZWwpLHQucHVzaCh7ZWxlbWVudDpLLGxhYmVsOmQubGFiZWwsaWQ6ZC5pZCxzZWxlY3RlZDpkLnNlbGVjdGVkfSkscC5hZGRPcHRpb24oZC5sYWJlbCxLKSxEP0QuYWZ0ZXIoSyk6cy5lbGVtZW50LmFwcGVuZChLKSxEPUspO2ZvcihCKys7dC5sZW5ndGg+QjspZD10LnBvcCgpLHAucmVtb3ZlT3B0aW9uKGQubGFiZWwpLGQuZWxlbWVudC5yZW1vdmUoKX1mb3IoO3oubGVuZ3RoPk07KXoucG9wKClbMF0uZWxlbWVudC5yZW1vdmUoKX12YXIgaDtpZighKGg9cy5tYXRjaChkKSkpdGhyb3cgWmUoXCJpZXhwXCIscyxpYShmKSk7dmFyIGw9YyhoWzJdfHxoWzFdKSxtPWhbNF18fGhbNl0sbj1oWzVdLHI9YyhoWzNdfHxcIlwiKSx1PWMoaFsyXT9cbmhbMV06bSksdz1jKGhbN10pLHg9aFs4XT9jKGhbOF0pOm51bGwsej1bW3tlbGVtZW50OmYsbGFiZWw6XCJcIn1dXTtGJiYoYShGKShlKSxGLnJlbW92ZUNsYXNzKFwibmctc2NvcGVcIiksRi5yZW1vdmUoKSk7Zi5lbXB0eSgpO2Yub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2UuJGFwcGx5KGZ1bmN0aW9uKCl7dmFyIGEsYz13KGUpfHxbXSxkPXt9LGgsbCxwLHIscyx2LHk7aWYocSlmb3IobD1bXSxyPTAsdj16Lmxlbmd0aDtyPHY7cisrKWZvcihhPXpbcl0scD0xLHM9YS5sZW5ndGg7cDxzO3ArKyl7aWYoKGg9YVtwXS5lbGVtZW50KVswXS5zZWxlY3RlZCl7aD1oLnZhbCgpO24mJihkW25dPWgpO2lmKHgpZm9yKHk9MDt5PGMubGVuZ3RoJiYoZFttXT1jW3ldLHgoZSxkKSE9aCk7eSsrKTtlbHNlIGRbbV09Y1toXTtsLnB1c2godShlLGQpKX19ZWxzZSBpZihoPWYudmFsKCksXCI/XCI9PWgpbD10O2Vsc2UgaWYoXCJcIj09PWgpbD1udWxsO2Vsc2UgaWYoeClmb3IoeT0wO3k8Yy5sZW5ndGg7eSsrKXtpZihkW21dPVxuY1t5XSx4KGUsZCk9PWgpe2w9dShlLGQpO2JyZWFrfX1lbHNlIGRbbV09Y1toXSxuJiYoZFtuXT1oKSxsPXUoZSxkKTtnLiRzZXRWaWV3VmFsdWUobCk7aygpfSl9KTtnLiRyZW5kZXI9aztlLiR3YXRjaENvbGxlY3Rpb24odyxrKTtlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXt2YXIgYT17fSxjPXcoZSk7aWYoYyl7Zm9yKHZhciBkPUFycmF5KGMubGVuZ3RoKSxmPTAsZz1jLmxlbmd0aDtmPGc7ZisrKWFbbV09Y1tmXSxkW2ZdPWwoZSxhKTtyZXR1cm4gZH19LGspO3EmJmUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpe3JldHVybiBnLiRtb2RlbFZhbHVlfSxrKX1pZihtWzFdKXt2YXIgcD1tWzBdO209bVsxXTt2YXIgcT1rLm11bHRpcGxlLHM9ay5uZ09wdGlvbnMsRj0hMSx1LEE9dyhYLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLEM9dyhYLmNyZWF0ZUVsZW1lbnQoXCJvcHRncm91cFwiKSksdj1BLmNsb25lKCk7az0wO2Zvcih2YXIgej1nLmNoaWxkcmVuKCksRT16Lmxlbmd0aDtrPFxuRTtrKyspaWYoXCJcIj09PXpba10udmFsdWUpe3U9Rj16LmVxKGspO2JyZWFrfXAuaW5pdChtLEYsdik7cSYmKG0uJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fDA9PT1hLmxlbmd0aH0pO3M/bihlLGcsbSk6cT9sKGUsZyxtKTpoKGUsZyxtLHApfX19fV0saWQ9W1wiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSl7dmFyIGM9e2FkZE9wdGlvbjpFLHJlbW92ZU9wdGlvbjpFfTtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oZCxlKXtpZih4KGUudmFsdWUpKXt2YXIgZj1hKGQudGV4dCgpLCEwKTtmfHxlLiRzZXQoXCJ2YWx1ZVwiLGQudGV4dCgpKX1yZXR1cm4gZnVuY3Rpb24oYSxkLGUpe3ZhciBoPWQucGFyZW50KCksbD1oLmRhdGEoXCIkc2VsZWN0Q29udHJvbGxlclwiKXx8aC5wYXJlbnQoKS5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIik7bCYmbC5kYXRhYm91bmQ/ZC5wcm9wKFwic2VsZWN0ZWRcIiwhMSk6bD1jO2Y/YS4kd2F0Y2goZixmdW5jdGlvbihhLFxuYyl7ZS4kc2V0KFwidmFsdWVcIixhKTthIT09YyYmbC5yZW1vdmVPcHRpb24oYyk7bC5hZGRPcHRpb24oYSl9KTpsLmFkZE9wdGlvbihlLnZhbHVlKTtkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2wucmVtb3ZlT3B0aW9uKGUudmFsdWUpfSl9fX19XSxoZD1iYSh7cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITB9KTtXLmFuZ3VsYXIuYm9vdHN0cmFwP2NvbnNvbGUubG9nKFwiV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLlwiKTooKEVhPVcualF1ZXJ5KSYmRWEuZm4ub24/KHc9RWEsRChFYS5mbix7c2NvcGU6TGEuc2NvcGUsaXNvbGF0ZVNjb3BlOkxhLmlzb2xhdGVTY29wZSxjb250cm9sbGVyOkxhLmNvbnRyb2xsZXIsaW5qZWN0b3I6TGEuaW5qZWN0b3IsaW5oZXJpdGVkRGF0YTpMYS5pbmhlcml0ZWREYXRhfSksR2IoXCJyZW1vdmVcIiwhMCwhMCwhMSksR2IoXCJlbXB0eVwiLCExLCExLCExKSxHYihcImh0bWxcIiwhMSwhMSwhMCkpOnc9UyxWYS5lbGVtZW50PXcsXG4kYyhWYSksdyhYKS5yZWFkeShmdW5jdGlvbigpe1hjKFgsZmMpfSkpfSkod2luZG93LGRvY3VtZW50KTshd2luZG93LmFuZ3VsYXIuJCRjc3AoKSYmd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZChcImhlYWRcIikucHJlcGVuZCgnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPkBjaGFyc2V0IFwiVVRGLThcIjtbbmdcXFxcOmNsb2FrXSxbbmctY2xvYWtdLFtkYXRhLW5nLWNsb2FrXSxbeC1uZy1jbG9ha10sLm5nLWNsb2FrLC54LW5nLWNsb2FrLC5uZy1oaWRle2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcXFw6Zm9ybXtkaXNwbGF5OmJsb2NrO30ubmctYW5pbWF0ZS1ibG9jay10cmFuc2l0aW9uc3t0cmFuc2l0aW9uOjBzIGFsbCFpbXBvcnRhbnQ7LXdlYmtpdC10cmFuc2l0aW9uOjBzIGFsbCFpbXBvcnRhbnQ7fS5uZy1oaWRlLWFkZC1hY3RpdmUsLm5nLWhpZGUtcmVtb3Zle2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50O308L3N0eWxlPicpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci5taW4uanMubWFwXG5cbjsgYnJvd3NlcmlmeV9zaGltX19kZWZpbmVfX21vZHVsZV9fZXhwb3J0X18odHlwZW9mIGFuZ3VsYXIgIT0gXCJ1bmRlZmluZWRcIiA/IGFuZ3VsYXIgOiB3aW5kb3cuYW5ndWxhcik7XG5cbn0pLmNhbGwoZ2xvYmFsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uIGRlZmluZUV4cG9ydChleCkgeyBtb2R1bGUuZXhwb3J0cyA9IGV4OyB9KTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIiwiKGZ1bmN0aW9uIChnbG9iYWwpe1xuXG47IHJlcXVpcmUoXCJmYW1vdXMtcG9seWZpbGxzXCIpO1xucmVxdWlyZShcIi9ob21lL2NvZGlvL3dvcmtzcGFjZS9ib3dlcl9jb21wb25lbnRzL2ZhbW91cy9kaXN0L2ZhbW91cy1nbG9iYWwubWluLmpzXCIpO1xucmVxdWlyZShcIi9ob21lL2NvZGlvL3dvcmtzcGFjZS9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXIvYW5ndWxhci5taW4uanNcIik7XG5yZXF1aXJlKFwiL2hvbWUvY29kaW8vd29ya3NwYWNlL2Jvd2VyX2NvbXBvbmVudHMvYW5ndWxhci1hbmltYXRlL2FuZ3VsYXItYW5pbWF0ZS5taW4uanNcIik7XG5yZXF1aXJlKFwiL2hvbWUvY29kaW8vd29ya3NwYWNlL2Jvd2VyX2NvbXBvbmVudHMvYW5ndWxhci1zYW5pdGl6ZS9hbmd1bGFyLXNhbml0aXplLm1pbi5qc1wiKTtcbnJlcXVpcmUoXCIvaG9tZS9jb2Rpby93b3Jrc3BhY2UvYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyLXVpLXJvdXRlci9yZWxlYXNlL2FuZ3VsYXItdWktcm91dGVyLm1pbi5qc1wiKTtcbjtfX2Jyb3dzZXJpZnlfc2hpbV9yZXF1aXJlX189cmVxdWlyZTsoZnVuY3Rpb24gYnJvd3NlcmlmeVNoaW0obW9kdWxlLCBkZWZpbmUsIHJlcXVpcmUpIHtcbi8qKlxuICogZmFtb3VzLWFuZ3VsYXIgLSBCcmluZyBzdHJ1Y3R1cmUgdG8geW91ciBGYW1vLnVzIGFwcHMgd2l0aCB0aGUgcG93ZXIgb2YgQW5ndWxhckpTLiBGYW1vLnVzL0FuZ3VsYXIgaW50ZWdyYXRlcyBzZWFtbGVzc2x5IHdpdGggZXhpc3RpbmcgQW5ndWxhciBhbmQgRmFtby51cyBhcHBzLlxuICogQHZlcnNpb24gdjAuNS4wXG4gKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vRmFtb3VzL2ZhbW91cy1hbmd1bGFyXG4gKiBAbGljZW5zZSBNUEwgdjIuMFxuICovXG5cInVzZSBzdHJpY3RcIjt2YXIgbmdGYW1lQXBwPWFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIixbXSk7bmdGYW1lQXBwLnByb3ZpZGVyKFwiJGZhbW91c1wiLGZ1bmN0aW9uKCl7dmFyIGU9e1wiZmFtb3VzL2NvcmUvQ29udGV4dFwiOmZhbW91cy5jb3JlLkNvbnRleHQsXCJmYW1vdXMvY29yZS9FbGVtZW50QWxsb2NhdG9yXCI6ZmFtb3VzLmNvcmUuRWxlbWVudEFsbG9jYXRvcixcImZhbW91cy9jb3JlL0VuZ2luZVwiOmZhbW91cy5jb3JlLkVuZ2luZSxcImZhbW91cy9jb3JlL0VudGl0eVwiOmZhbW91cy5jb3JlLkVudGl0eSxcImZhbW91cy9jb3JlL0V2ZW50RW1pdHRlclwiOmZhbW91cy5jb3JlLkV2ZW50RW1pdHRlcixcImZhbW91cy9jb3JlL0V2ZW50SGFuZGxlclwiOmZhbW91cy5jb3JlLkV2ZW50SGFuZGxlcixcImZhbW91cy9jb3JlL0dyb3VwXCI6ZmFtb3VzLmNvcmUuR3JvdXAsXCJmYW1vdXMvY29yZS9Nb2RpZmllclwiOmZhbW91cy5jb3JlLk1vZGlmaWVyLFwiZmFtb3VzL2NvcmUvT3B0aW9uc01hbmFnZXJcIjpmYW1vdXMuY29yZS5PcHRpb25zTWFuYWdlcixcImZhbW91cy9jb3JlL1JlbmRlck5vZGVcIjpmYW1vdXMuY29yZS5SZW5kZXJOb2RlLFwiZmFtb3VzL2NvcmUvU2NlbmVcIjpmYW1vdXMuY29yZS5TY2VuZSxcImZhbW91cy9jb3JlL1NwZWNQYXJzZXJcIjpmYW1vdXMuY29yZS5TcGVjUGFyc2VyLFwiZmFtb3VzL2NvcmUvU3VyZmFjZVwiOmZhbW91cy5jb3JlLlN1cmZhY2UsXCJmYW1vdXMvY29yZS9UcmFuc2Zvcm1cIjpmYW1vdXMuY29yZS5UcmFuc2Zvcm0sXCJmYW1vdXMvY29yZS9WaWV3XCI6ZmFtb3VzLmNvcmUuVmlldyxcImZhbW91cy9jb3JlL1ZpZXdTZXF1ZW5jZVwiOmZhbW91cy5jb3JlLlZpZXdTZXF1ZW5jZSxcImZhbW91cy9ldmVudHMvRXZlbnRBcmJpdGVyXCI6ZmFtb3VzLmV2ZW50cy5FdmVudEFyYml0ZXIsXCJmYW1vdXMvZXZlbnRzL0V2ZW50RmlsdGVyXCI6ZmFtb3VzLmV2ZW50cy5FdmVudEZpbHRlcixcImZhbW91cy9ldmVudHMvRXZlbnRNYXBwZXJcIjpmYW1vdXMuZXZlbnRzLkV2ZW50TWFwcGVyLFwiZmFtb3VzL2lucHV0cy9GYXN0Q2xpY2tcIjpmYW1vdXMuaW5wdXRzLkZhc3RDbGljayxcImZhbW91cy9pbnB1dHMvR2VuZXJpY1N5bmNcIjpmYW1vdXMuaW5wdXRzLkdlbmVyaWNTeW5jLFwiZmFtb3VzL2lucHV0cy9Nb3VzZVN5bmNcIjpmYW1vdXMuaW5wdXRzLk1vdXNlU3luYyxcImZhbW91cy9pbnB1dHMvUGluY2hTeW5jXCI6ZmFtb3VzLmlucHV0cy5QaW5jaFN5bmMsXCJmYW1vdXMvaW5wdXRzL1JvdGF0ZVN5bmNcIjpmYW1vdXMuaW5wdXRzLlJvdGF0ZVN5bmMsXCJmYW1vdXMvaW5wdXRzL1NjYWxlU3luY1wiOmZhbW91cy5pbnB1dHMuU2NhbGVTeW5jLFwiZmFtb3VzL2lucHV0cy9TY3JvbGxTeW5jXCI6ZmFtb3VzLmlucHV0cy5TY3JvbGxTeW5jLFwiZmFtb3VzL2lucHV0cy9Ub3VjaFN5bmNcIjpmYW1vdXMuaW5wdXRzLlRvdWNoU3luYyxcImZhbW91cy9pbnB1dHMvVG91Y2hUcmFja2VyXCI6ZmFtb3VzLmlucHV0cy5Ub3VjaFRyYWNrZXIsXCJmYW1vdXMvaW5wdXRzL1R3b0ZpbmdlclN5bmNcIjpmYW1vdXMuaW5wdXRzLlR3b0ZpbmdlclN5bmMsXCJmYW1vdXMvbWF0aC9NYXRyaXhcIjpmYW1vdXMubWF0aC5NYXRyaXgsXCJmYW1vdXMvbWF0aC9RdWF0ZXJuaW9uXCI6ZmFtb3VzLm1hdGguUXVhdGVybmlvbixcImZhbW91cy9tYXRoL1JhbmRvbVwiOmZhbW91cy5tYXRoLlJhbmRvbSxcImZhbW91cy9tYXRoL1V0aWxpdGllc1wiOmZhbW91cy5tYXRoLlV0aWxpdGllcyxcImZhbW91cy9tYXRoL1ZlY3RvclwiOmZhbW91cy5tYXRoLlZlY3RvcixcImZhbW91cy9tb2RpZmllcnMvRHJhZ2dhYmxlXCI6ZmFtb3VzLm1vZGlmaWVycy5EcmFnZ2FibGUsXCJmYW1vdXMvbW9kaWZpZXJzL0ZhZGVyXCI6ZmFtb3VzLm1vZGlmaWVycy5GYWRlcixcImZhbW91cy9tb2RpZmllcnMvTW9kaWZpZXJDaGFpblwiOmZhbW91cy5tb2RpZmllcnMuTW9kaWZpZXJDaGFpbixcImZhbW91cy9tb2RpZmllcnMvU3RhdGVNb2RpZmllclwiOmZhbW91cy5tb2RpZmllcnMuU3RhdGVNb2RpZmllcixcImZhbW91cy9zdXJmYWNlcy9DYW52YXNTdXJmYWNlXCI6ZmFtb3VzLnN1cmZhY2VzLkNhbnZhc1N1cmZhY2UsXCJmYW1vdXMvc3VyZmFjZXMvQ29udGFpbmVyU3VyZmFjZVwiOmZhbW91cy5zdXJmYWNlcy5Db250YWluZXJTdXJmYWNlLFwiZmFtb3VzL3N1cmZhY2VzL0Zvcm1Db250YWluZXJTdXJmYWNlXCI6ZmFtb3VzLnN1cmZhY2VzLkZvcm1Db250YWluZXJTdXJmYWNlLFwiZmFtb3VzL3N1cmZhY2VzL0ltYWdlU3VyZmFjZVwiOmZhbW91cy5zdXJmYWNlcy5JbWFnZVN1cmZhY2UsXCJmYW1vdXMvc3VyZmFjZXMvSW5wdXRTdXJmYWNlXCI6ZmFtb3VzLnN1cmZhY2VzLklucHV0U3VyZmFjZSxcImZhbW91cy9zdXJmYWNlcy9TdWJtaXRJbnB1dFN1cmZhY2VcIjpmYW1vdXMuc3VyZmFjZXMuU3VibWl0SW5wdXRTdXJmYWNlLFwiZmFtb3VzL3N1cmZhY2VzL1RleHRhcmVhU3VyZmFjZVwiOmZhbW91cy5zdXJmYWNlcy5UZXh0YXJlYVN1cmZhY2UsXCJmYW1vdXMvc3VyZmFjZXMvVmlkZW9TdXJmYWNlXCI6ZmFtb3VzLnN1cmZhY2VzLlZpZGVvU3VyZmFjZSxcImZhbW91cy90cmFuc2l0aW9ucy9DYWNoZWRNYXBcIjpmYW1vdXMudHJhbnNpdGlvbnMuQ2FjaGVkTWFwLFwiZmFtb3VzL3RyYW5zaXRpb25zL0Vhc2luZ1wiOmZhbW91cy50cmFuc2l0aW9ucy5FYXNpbmcsXCJmYW1vdXMvdHJhbnNpdGlvbnMvTXVsdGlwbGVUcmFuc2l0aW9uXCI6ZmFtb3VzLnRyYW5zaXRpb25zLk11bHRpcGxlVHJhbnNpdGlvbixcImZhbW91cy90cmFuc2l0aW9ucy9TbmFwVHJhbnNpdGlvblwiOmZhbW91cy50cmFuc2l0aW9ucy5TbmFwVHJhbnNpdGlvbixcImZhbW91cy90cmFuc2l0aW9ucy9TcHJpbmdUcmFuc2l0aW9uXCI6ZmFtb3VzLnRyYW5zaXRpb25zLlNwcmluZ1RyYW5zaXRpb24sXCJmYW1vdXMvdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjpmYW1vdXMudHJhbnNpdGlvbnMuVHJhbnNpdGlvbmFibGUsXCJmYW1vdXMvdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIjpmYW1vdXMudHJhbnNpdGlvbnMuVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0sXCJmYW1vdXMvdHJhbnNpdGlvbnMvVHdlZW5UcmFuc2l0aW9uXCI6ZmFtb3VzLnRyYW5zaXRpb25zLlR3ZWVuVHJhbnNpdGlvbixcImZhbW91cy90cmFuc2l0aW9ucy9XYWxsVHJhbnNpdGlvblwiOmZhbW91cy50cmFuc2l0aW9ucy5XYWxsVHJhbnNpdGlvbixcImZhbW91cy91dGlsaXRpZXMvS2V5Q29kZXNcIjpmYW1vdXMudXRpbGl0aWVzLktleUNvZGVzLFwiZmFtb3VzL3V0aWxpdGllcy9UaW1lclwiOmZhbW91cy51dGlsaXRpZXMuVGltZXIsXCJmYW1vdXMvdXRpbGl0aWVzL1V0aWxpdHlcIjpmYW1vdXMudXRpbGl0aWVzLlV0aWxpdHksXCJmYW1vdXMvdmlld3MvRGVja1wiOmZhbW91cy52aWV3cy5EZWNrLFwiZmFtb3VzL3ZpZXdzL0VkZ2VTd2FwcGVyXCI6ZmFtb3VzLnZpZXdzLkVkZ2VTd2FwcGVyLFwiZmFtb3VzL3ZpZXdzL0ZsZXhpYmxlTGF5b3V0XCI6ZmFtb3VzLnZpZXdzLkZsZXhpYmxlTGF5b3V0LFwiZmFtb3VzL3ZpZXdzL0ZsaXBwZXJcIjpmYW1vdXMudmlld3MuRmxpcHBlcixcImZhbW91cy92aWV3cy9HcmlkTGF5b3V0XCI6ZmFtb3VzLnZpZXdzLkdyaWRMYXlvdXQsXCJmYW1vdXMvdmlld3MvSGVhZGVyRm9vdGVyTGF5b3V0XCI6ZmFtb3VzLnZpZXdzLkhlYWRlckZvb3RlckxheW91dCxcImZhbW91cy92aWV3cy9MaWdodGJveFwiOmZhbW91cy52aWV3cy5MaWdodGJveCxcImZhbW91cy92aWV3cy9SZW5kZXJDb250cm9sbGVyXCI6ZmFtb3VzLnZpZXdzLlJlbmRlckNvbnRyb2xsZXIsXCJmYW1vdXMvdmlld3MvU2Nyb2xsQ29udGFpbmVyXCI6ZmFtb3VzLnZpZXdzLlNjcm9sbENvbnRhaW5lcixcImZhbW91cy92aWV3cy9TY3JvbGxlclwiOmZhbW91cy52aWV3cy5TY3JvbGxlcixcImZhbW91cy92aWV3cy9TY3JvbGx2aWV3XCI6ZmFtb3VzLnZpZXdzLlNjcm9sbHZpZXcsXCJmYW1vdXMvdmlld3MvU2VxdWVudGlhbExheW91dFwiOmZhbW91cy52aWV3cy5TZXF1ZW50aWFsTGF5b3V0LFwiZmFtb3VzL3dpZGdldHMvTmF2aWdhdGlvbkJhclwiOmZhbW91cy53aWRnZXRzLk5hdmlnYXRpb25CYXIsXCJmYW1vdXMvd2lkZ2V0cy9TbGlkZXJcIjpmYW1vdXMud2lkZ2V0cy5TbGlkZXIsXCJmYW1vdXMvd2lkZ2V0cy9UYWJCYXJcIjpmYW1vdXMud2lkZ2V0cy5UYWJCYXIsXCJmYW1vdXMvd2lkZ2V0cy9Ub2dnbGVCdXR0b25cIjpmYW1vdXMud2lkZ2V0cy5Ub2dnbGVCdXR0b24sXCJmYW1vdXMvcGh5c2ljcy9QaHlzaWNzRW5naW5lXCI6ZmFtb3VzLnBoeXNpY3MuUGh5c2ljc0VuZ2luZSxcImZhbW91cy9waHlzaWNzL2JvZGllcy9Cb2R5XCI6ZmFtb3VzLnBoeXNpY3MuYm9kaWVzLkJvZHksXCJmYW1vdXMvcGh5c2ljcy9ib2RpZXMvQ2lyY2xlXCI6ZmFtb3VzLnBoeXNpY3MuYm9kaWVzLkNpcmNsZSxcImZhbW91cy9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZVwiOmZhbW91cy5waHlzaWNzLmJvZGllcy5QYXJ0aWNsZSxcImZhbW91cy9waHlzaWNzL2JvZGllcy9SZWN0YW5nbGVcIjpmYW1vdXMucGh5c2ljcy5ib2RpZXMuUmVjdGFuZ2xlLFwiZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvQ29sbGlzaW9uXCI6ZmFtb3VzLnBoeXNpY3MuY29uc3RyYWludHMuQ29sbGlzaW9uLFwiZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvQ29uc3RyYWludFwiOmZhbW91cy5waHlzaWNzLmNvbnN0cmFpbnRzLkNvbnN0cmFpbnQsXCJmYW1vdXMvcGh5c2ljcy9jb25zdHJhaW50cy9DdXJ2ZVwiOmZhbW91cy5waHlzaWNzLmNvbnN0cmFpbnRzLkN1cnZlLFwiZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvRGlzdGFuY2VcIjpmYW1vdXMucGh5c2ljcy5jb25zdHJhaW50cy5EaXN0YW5jZSxcImZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1NuYXBcIjpmYW1vdXMucGh5c2ljcy5jb25zdHJhaW50cy5TbmFwLFwiZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvU3VyZmFjZVwiOmZhbW91cy5waHlzaWNzLmNvbnN0cmFpbnRzLlN1cmZhY2UsXCJmYW1vdXMvcGh5c2ljcy9jb25zdHJhaW50cy9XYWxsXCI6ZmFtb3VzLnBoeXNpY3MuY29uc3RyYWludHMuV2FsbCxcImZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1dhbGxzXCI6ZmFtb3VzLnBoeXNpY3MuY29uc3RyYWludHMuV2FsbHMsXCJmYW1vdXMvcGh5c2ljcy9mb3JjZXMvRHJhZ1wiOmZhbW91cy5waHlzaWNzLmZvcmNlcy5EcmFnLFwiZmFtb3VzL3BoeXNpY3MvZm9yY2VzL0ZvcmNlXCI6ZmFtb3VzLnBoeXNpY3MuZm9yY2VzLkZvcmNlLFwiZmFtb3VzL3BoeXNpY3MvZm9yY2VzL1JlcHVsc2lvblwiOmZhbW91cy5waHlzaWNzLmZvcmNlcy5SZXB1bHNpb24sXCJmYW1vdXMvcGh5c2ljcy9mb3JjZXMvUm90YXRpb25hbERyYWdcIjpmYW1vdXMucGh5c2ljcy5mb3JjZXMuUm90YXRpb25hbERyYWcsXCJmYW1vdXMvcGh5c2ljcy9mb3JjZXMvUm90YXRpb25hbFNwcmluZ1wiOmZhbW91cy5waHlzaWNzLmZvcmNlcy5Sb3RhdGlvbmFsU3ByaW5nLFwiZmFtb3VzL3BoeXNpY3MvZm9yY2VzL1NwcmluZ1wiOmZhbW91cy5waHlzaWNzLmZvcmNlcy5TcHJpbmcsXCJmYW1vdXMvcGh5c2ljcy9mb3JjZXMvVmVjdG9yRmllbGRcIjpmYW1vdXMucGh5c2ljcy5mb3JjZXMuVmVjdG9yRmllbGQsXCJmYW1vdXMvcGh5c2ljcy9pbnRlZ3JhdG9ycy9TeW1wbGVjdGljRXVsZXJcIjpmYW1vdXMucGh5c2ljcy5pbnRlZ3JhdG9ycy5TeW1wbGVjdGljRXVsZXJ9O3RoaXMucmVnaXN0ZXJNb2R1bGU9ZnVuY3Rpb24obixyKXtlW25dPXJ9LGUuZ2V0SXNvbGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJpc29sYXRlXCJpbiBlP2UuaXNvbGF0ZVtlLiRpZF06e319LGUuZmluZD1mdW5jdGlvbihuKXt2YXIgcj1hbmd1bGFyLmVsZW1lbnQod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwobikpLGE9ZnVuY3Rpb24oZSl7dmFyIG49W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUscil7bltyXT1hbmd1bGFyLmVsZW1lbnQoZSkuc2NvcGUoKX0pLG59KHIpLG89ZnVuY3Rpb24obil7dmFyIHI9W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChuLGZ1bmN0aW9uKG4sYSl7clthXT1lLmdldElzb2xhdGUobil9KSxyfShhKTtyZXR1cm4gb307dmFyIG49LyhbXFw6XFwtXFxfXSsoLikpL2cscj0vXm1veihbQS1aXSkvLGE9L14oeFtcXDpcXC1fXXxkYXRhW1xcOlxcLV9dKS9pLG89L15GQVxcLS4qU1VSRkFDRS8sdD0vXkZBXFwtLiovO3dpbmRvdy4kZmFtb3VzVXRpbD1lLnV0aWw9e2lzQVN1cmZhY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIG8udGVzdChlWzBdLnRhZ05hbWUpfSxpc0ZhRWxlbWVudDpmdW5jdGlvbihlKXtpZih0LnRlc3QoZVswXS50YWdOYW1lKSlyZXR1cm4hMDt2YXIgbj0hMTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGVbMF0uYXR0cmlidXRlcyxmdW5jdGlvbihlKXtuPW58fHQudGVzdChlKX0pLG59LGNhbWVsQ2FzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSxuLHIsYSl7cmV0dXJuIGE/ci50b1VwcGVyQ2FzZSgpOnJ9KS5yZXBsYWNlKHIsXCJNb3okMVwiKX0sZGlyZWN0aXZlTm9ybWFsaXplOmZ1bmN0aW9uKG4pe3JldHVybiBlLnV0aWwuY2FtZWxDYXNlKG4ucmVwbGFjZShhLFwiXCIpKX19LHRoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBlfX0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuY29uZmlnKFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoXCIkYW5pbWF0ZVwiLFtcIiRkZWxlZ2F0ZVwiLFwiJHJvb3RTY29wZVwiLFwiJGZhbW91c1wiLFwiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuLHIsYSxvKXt2YXIgdD1yW1wiZmFtb3VzL3V0aWxpdGllcy9UaW1lclwiXSxpPVwiJCRmYUFuaW1hdGlvbkFjdGl2ZVwiLHM9e30sdT1mdW5jdGlvbihlKXt2YXIgbj1yLmdldElzb2xhdGUoZSk7cmV0dXJuIW4mJmUmJihuPW8uJCRnZXRJc29sYXRlQnlJZChzW2UuJGlkXSkpLG59LGM9e2VuYWJsZWQ6ZS5lbmFibGVkfTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKFtcImFkZENsYXNzXCIsXCJyZW1vdmVDbGFzc1wiXSxmdW5jdGlvbihuKXt2YXIgYT1hbmd1bGFyLmVsZW1lbnQucHJvdG90eXBlW25dO2FuZ3VsYXIuZWxlbWVudC5wcm90b3R5cGVbbl09ZnVuY3Rpb24oZSl7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpLHIudXRpbC5pc0FTdXJmYWNlKHRoaXMpJiZcInN0cmluZ1wiPT10eXBlb2YgZSYmXCJcIiE9PWUudHJpbSgpJiZ1KHRoaXMuc2NvcGUoKSkucmVuZGVyTm9kZVtuXShlKSx0aGlzfSxjW25dPWZ1bmN0aW9uKGEsbyx0KXtpZihlW25dKGEsbyx0KSxyLnV0aWwuaXNGYUVsZW1lbnQoYSkpe3ZhciBpPXUoYS5zY29wZSgpKTtpZihyLnV0aWwuaXNBU3VyZmFjZShhKSl7dmFyIHM9aS5yZW5kZXJOb2RlO2FuZ3VsYXIuZm9yRWFjaChvLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihlKXtcIm5nLWhpZGVcIj09PWU/XCJhZGRDbGFzc1wiPT09bj9pLmhpZGUoKTpcInJlbW92ZUNsYXNzXCI9PT1uJiZpLnNob3coKTpzW25dKGUpfSl9ZWxzZSBhbmd1bGFyLmZvckVhY2goby5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSl7XCJuZy1oaWRlXCI9PT1lJiYoXCJhZGRDbGFzc1wiPT09bj9pLmhpZGUoKTpcInJlbW92ZUNsYXNzXCI9PT1uJiZpLnNob3coKSl9KX19fSksYy5zZXRDbGFzcz1mdW5jdGlvbihuLGEsbyx0KXtpZihlLnNldENsYXNzKG4sYSxvLHQpLHIudXRpbC5pc0FTdXJmYWNlKG4pKXt2YXIgaT11KG4uc2NvcGUoKSkucmVuZGVyTm9kZTthbmd1bGFyLmZvckVhY2goYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSl7aS5hZGRDbGFzcyhlKX0pLGFuZ3VsYXIuZm9yRWFjaChvLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihlKXtpLnJlbW92ZUNsYXNzKGUpfSl9fSxhbmd1bGFyLmZvckVhY2goW1wiZW50ZXJcIixcImxlYXZlXCIsXCJtb3ZlXCJdLGZ1bmN0aW9uKGEpe3ZhciBvPWFbMF0udG9VcHBlckNhc2UoKSthLnNsaWNlKDEpO2NbYV09ZnVuY3Rpb24oYyl7dmFyIGY9dGhpcyxsPWFyZ3VtZW50cyxkPVwiZW50ZXJcIj09PWEsbT1jLnNjb3BlKCk7bSYmbS4kcGFyZW50JiYoc1ttLiRpZF09bS4kcGFyZW50LiRpZCk7dmFyIHA9dShtKTtkPT09ITAmJmVbYV0uYXBwbHkodGhpcyxhcmd1bWVudHMpLGMuZGF0YShpKT09PSEwJiZwJiZwLiQkYW5pbWF0ZUhhbHRIYW5kbGVyJiZwLiQkYW5pbWF0ZUhhbHRIYW5kbGVyKGMuc2NvcGUoKSksYy5kYXRhKGksITApO3ZhciB2PWZ1bmN0aW9uKCl7bSYmbS4kaWQ7aWYoXCJsZWF2ZVwiPT09YSYmci51dGlsLmlzRmFFbGVtZW50KGMpKXt2YXIgbj11KG0pO24mJm4uaWQmJm4uaGlkZSgpfWMuZGF0YShpKSE9PSExJiYoYy5kYXRhKGksITEpLGQ9PT0hMSYmZVthXS5hcHBseShmLGwpKX07bi4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXt2YXIgZSxuPWMuc2NvcGUoKSxyPXUobik7aWYociYmKGU9cltcIiQkYW5pbWF0ZVwiK28rXCJIYW5kbGVyXCJdKSx2b2lkIDA9PT1lKXJldHVybiB2b2lkIHYoKTt2YXIgYT1lKG4seyRkb25lOnZ9KTtcIm51bWJlclwiPT10eXBlb2YgYSYmdC5zZXRUaW1lb3V0KHYsYSl9KX19KSxjfV0pfV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZmFjdG9yeShcIiRmYW1vdXNEZWNvcmF0b3JcIixbXCIkZmFtb3VzXCIsZnVuY3Rpb24oZSl7dmFyIG49e2NoaWxkOnt9LHBhcmVudDp7fSxyZW5kZXJhYmxlOmZ1bmN0aW9uKG4pe3ZhciByPWVbXCJmYW1vdXMvY29yZS9SZW5kZXJOb2RlXCJdO24ucmVuZGVyR2F0ZT1uZXcgcixuLmVtcHR5Tm9kZT1uZXcgcixuLnNob3c9ZnVuY3Rpb24oKXtuLnJlbmRlckdhdGUmJm4ucmVuZGVyR2F0ZS5zZXQobi5yZW5kZXJOb2RlKX0sbi5oaWRlPWZ1bmN0aW9uKCl7bi5yZW5kZXJHYXRlLnNldChuLmVtcHR5Tm9kZSl9fX0scj17fTtyZXR1cm57YWRkUm9sZTpmdW5jdGlvbihlLHIpe25bZV0ocil9LGVuc3VyZUlzb2xhdGU6ZnVuY3Rpb24oZSxuKXtpZihuKXt2YXIgYT1bXCJmYS1lZGdlLXN3YXBwZXJcIixcImZhLXJlbmRlci1jb250cm9sbGVyXCIsXCJmYS1kZWNrXCIsXCJmYS1saWdodC1ib3hcIl0sbz0hMTthbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpPT09blswXS50YWdOYW1lP3ZvaWQobz0hMCk6dm9pZCAwIT09blswXS5hdHRyaWJ1dGVzW2VdP3ZvaWQobz0hMCk6dm9pZCAwfSksbyYmKGU9ZS4kcGFyZW50KX1lLmlzb2xhdGU9ZS5pc29sYXRlfHx7fSxlLmlzb2xhdGVbZS4kaWRdPWUuaXNvbGF0ZVtlLiRpZF18fHt9O3ZhciB0PWUuaXNvbGF0ZVtlLiRpZF07dC5pZD1lLiRpZDt2YXIgaT1lLiRldmFsKFwiJGluZGV4XCIpO3JldHVybiBpJiZcIiRpbmRleFwiIT09aSYmIXQuaW5kZXgmJih0LmluZGV4PWkpLHJbdC5pZF09dCx0fSwkJGdldElzb2xhdGVCeUlkOmZ1bmN0aW9uKGUpe3JldHVybiByW2VdfSxyZWdpc3RlckNoaWxkOmZ1bmN0aW9uKGUsbixyLGEpe2UuJGVtaXQoXCJyZWdpc3RlckNoaWxkXCIsciksbi5vbmUoXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7XCJyZW1vdmVNZXRob2RcImluIHImJnIucmVtb3ZlTWV0aG9kKHIuaWQpLHImJnIuaGlkZSYmci5oaWRlKCksYSYmYSgpfSl9LHNlcXVlbmNlV2l0aDpmdW5jdGlvbihuLHIsYSxvKXtuLiRvbihcInJlZ2lzdGVyQ2hpbGRcIixmdW5jdGlvbih0LGkpe2lmKHQudGFyZ2V0U2NvcGUuJGlkIT09bi4kaWQpe3ZhciBzPWUuZ2V0SXNvbGF0ZShuKTtpLiRwYXJlbnQ9cyxzLiRjaGlsZHJlbj1zLiRjaGlsZHJlbnx8W10scy4kY2hpbGRyZW4ucHVzaChpKSxyKGkpLHQuc3RvcFByb3BhZ2F0aW9uKCksYSYmKGkucmVtb3ZlTWV0aG9kPWEpLG8mJihpLnVwZGF0ZU1ldGhvZD1vKX19KX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuc2VydmljZShcIiRmYW1vdXNQaXBlXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsbixyKXtlIGluc3RhbmNlb2YgQXJyYXl8fChlPVtlXSksbiBpbnN0YW5jZW9mIEFycmF5fHwobj1bbl0pO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXZvaWQgMCE9PW5bb10mJnZvaWQgMCE9PWVbYV0mJm5bb11bcl0oZVthXSl9dGhpcy51bnBpcGVzRnJvbVRhcmdldHM9ZnVuY3Rpb24obixyKXtlKG4scixcInVucGlwZVwiKX0sdGhpcy5waXBlc1RvVGFyZ2V0cz1mdW5jdGlvbihuLHIpe2UobixyLFwicGlwZVwiKX19KSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmZhY3RvcnkoXCIkdGltZWxpbmVcIixmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUsbil7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGU/ZStuOmUubWFwKGZ1bmN0aW9uKGUscil7cmV0dXJuIGUrbltyXX0pfSxuPWZ1bmN0aW9uKGUsbil7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGU/ZS1uOmUubWFwKGZ1bmN0aW9uKGUscil7cmV0dXJuIGUtbltyXX0pfSxyPWZ1bmN0aW9uKGUsbil7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGU/ZSpuOmUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlKm59KX0sYT1mdW5jdGlvbihhLG8sdCxpLHMpe3JldHVybiBmdW5jdGlvbih1KXt2YXIgYz1pLGY9LW8sbD0xLyh0LW8pLGQ9bihzLGkpO3JldHVybiBlKHIoZCxhKGwqKHUrZikpKSxjKX19O3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbihlKXtyZXR1cm4gZX07cmV0dXJuIGZ1bmN0aW9uKHIpe2lmKHI8ZVswXVswXSlyZXR1cm4gZVswXVsxXTtmb3IodmFyIG89MDtvPGUubGVuZ3RoLTE7bysrKWlmKGVbb11bMF08PXImJnI8ZVtvKzFdWzBdKXt2YXIgdD1hKGVbb11bMl18fG4sZVtvXVswXSxlW28rMV1bMF0sZVtvXVsxXSxlW28rMV1bMV0pO3JldHVybiB0KHIpfXJldHVybiBlW2UubGVuZ3RoLTFdWzFdfX19KSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhQW5pbWF0ZUVudGVyXCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEscHJpb3JpdHk6MTYsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUocik7dC4kJGFuaW1hdGVFbnRlckhhbmRsZXI9ZShvLmZhQW5pbWF0ZUVudGVyKSxvLiRvYnNlcnZlKFwiZmFBbmltYXRlRW50ZXJcIixmdW5jdGlvbigpe3QuJCRhbmltYXRlRW50ZXJIYW5kbGVyPWUoby5mYUFuaW1hdGVFbnRlcil9KX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUFuaW1hdGVIYWx0XCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEscHJpb3JpdHk6MTYsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUocik7dC4kJGFuaW1hdGVIYWx0SGFuZGxlcj1lKG8uZmFBbmltYXRlSGFsdCksby4kb2JzZXJ2ZShcImZhQW5pbWF0ZUhhbHRcIixmdW5jdGlvbigpe3QuJCRhbmltYXRlSGFsdEhhbmRsZXI9ZShvLmZhQW5pbWF0ZUhhbHQpfSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFBbmltYXRlTGVhdmVcIixbXCIkcGFyc2VcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMSxwcmlvcml0eToxNixjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKTt0LiQkYW5pbWF0ZUxlYXZlSGFuZGxlcj1lKG8uZmFBbmltYXRlTGVhdmUpLG8uJG9ic2VydmUoXCJmYUFuaW1hdGVMZWF2ZVwiLGZ1bmN0aW9uKCl7dC4kJGFuaW1hdGVMZWF2ZUhhbmRsZXI9ZShvLmZhQW5pbWF0ZUxlYXZlKX0pfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhQW5pbWF0ZU1vdmVcIixbXCIkcGFyc2VcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMSxwcmlvcml0eToxNixjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKTt0LiQkYW5pbWF0ZU1vdmVIYW5kbGVyPWUoby5mYUFuaW1hdGVNb3ZlKSxvLiRvYnNlcnZlKFwiZmFBbmltYXRlTW92ZVwiLGZ1bmN0aW9uKCl7dC4kJGFuaW1hdGVNb3ZlSGFuZGxlcj1lKG8uZmFBbmltYXRlTW92ZSl9KX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUFuaW1hdGlvblwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntyZXN0cmljdDpcIkVBXCIsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbigpe3ZhciByPWVbXCJmYW1vdXMvY29yZS9UcmFuc2Zvcm1cIl0sYT1lW1wiZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCJdLG89ZVtcImZhbW91cy90cmFuc2l0aW9ucy9FYXNpbmdcIl07cmV0dXJue3ByZTpmdW5jdGlvbihlKXtuLmVuc3VyZUlzb2xhdGUoZSl9LHBvc3Q6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPW4uZW5zdXJlSXNvbGF0ZShlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy50aW1lbGluZT1lLiRldmFsKGkudGltZWxpbmUpLHMuX3RyYW5zPW5ldyBhKDApLHMucGxheT1mdW5jdGlvbihuKXt2YXIgcj17ZHVyYXRpb246ZS4kZXZhbChpLmR1cmF0aW9uKSxjdXJ2ZTplLiRldmFsKGkuY3VydmUpfHxcImxpbmVhclwifTtzLl90cmFucy5zZXQoMSxyLGZ1bmN0aW9uKCl7biYmbigpLGkubG9vcCYmc2V0VGltZW91dChmdW5jdGlvbigpe3MucmVwbGF5KG4pfSwwKX0pfSxzLnJlc2V0PWZ1bmN0aW9uKCl7cy5fdHJhbnMuc2V0KDApfSxzLnJlcGxheT1mdW5jdGlvbihlKXtzLnJlc2V0KCkscy5wbGF5KGUpfTt2YXIgbj1udWxsO2kuZXZlbnQmJihuJiZuKCksbj1lLiRvbihpLmV2ZW50LGZ1bmN0aW9uKGUsbil7dmFyIHI9biYmbi5jYWxsYmFjaz9uLmNhbGxiYWNrOnZvaWQgMDtzLnJlcGxheShyKX0pKTtpLmlkO2lmKHZvaWQgMD09PXMudGltZWxpbmUmJihzLnRpbWVsaW5lPXMuX3RyYW5zLmdldC5iaW5kKHMuX3RyYW5zKSxpLmF1dG9wbGF5JiZzLnBsYXkoKSksIXMudGltZWxpbmUgaW5zdGFuY2VvZiBGdW5jdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJ0aW1lbGluZSBtdXN0IGJlIGEgcmVmZXJlbmNlIHRvIGEgZnVuY3Rpb24gb3IgZHVyYXRpb24gbXVzdCBiZSBwcm92aWRlZFwiKTtmb3IodmFyIHU9dFswXS5xdWVyeVNlbGVjdG9yQWxsKFwiYW5pbWF0ZVwiKSxjPXt9LGY9MDtmPHUubGVuZ3RoO2YrKykhZnVuY3Rpb24oKXt2YXIgbj11W2ZdO2lmKG4uYXR0cmlidXRlcy50YXJnZXRtb2RzZWxlY3Rvcil7dmFyIGE9YW5ndWxhci5lbGVtZW50KHRbMF0ucGFyZW50Tm9kZSlbMF0ucXVlcnlTZWxlY3RvckFsbChuLmF0dHJpYnV0ZXMudGFyZ2V0bW9kc2VsZWN0b3IudmFsdWUpO2FuZ3VsYXIuZm9yRWFjaChhLGZ1bmN0aW9uKGEpe3ZhciB0PWFuZ3VsYXIuZWxlbWVudChhKS5zY29wZSgpLGk9dC5pc29sYXRlW3QuJGlkXS5tb2RpZmllcix1PXQuaXNvbGF0ZVt0LiRpZF0uZ2V0VHJhbnNmb3JtLGY9bi5hdHRyaWJ1dGVzLmN1cnZlJiZcImxpbmVhclwiIT09bi5hdHRyaWJ1dGVzLmN1cnZlLnZhbHVlP29bbi5hdHRyaWJ1dGVzLmN1cnZlLnZhbHVlXTpmdW5jdGlvbihlKXtyZXR1cm4gZX07aWYobi5hdHRyaWJ1dGVzLmZpZWxkKXt2YXIgbD1uLmF0dHJpYnV0ZXMuZmllbGQudmFsdWUsZD1uLmF0dHJpYnV0ZXMudGltZWxpbmVsb3dlcmJvdW5kP3BhcnNlRmxvYXQobi5hdHRyaWJ1dGVzLnRpbWVsaW5lbG93ZXJib3VuZC52YWx1ZSk6MCxtPW4uYXR0cmlidXRlcy50aW1lbGluZXVwcGVyYm91bmQ/cGFyc2VGbG9hdChuLmF0dHJpYnV0ZXMudGltZWxpbmV1cHBlcmJvdW5kLnZhbHVlKToxO2lmKCFuLmF0dHJpYnV0ZXMuc3RhcnR2YWx1ZSl0aHJvdyBuZXcgRXJyb3IoXCJ5b3UgbXVzdCBwcm92aWRlIGEgc3RhcnQgdmFsdWUgZm9yIHRoZSBhbmltYXRpb25cIik7dmFyIHA9ZS4kZXZhbChuLmF0dHJpYnV0ZXMuc3RhcnR2YWx1ZS52YWx1ZSk7aWYoIW4uYXR0cmlidXRlcy5lbmR2YWx1ZSl0aHJvdyBuZXcgRXJyb3IoXCJ5b3UgbXVzdCBwcm92aWRlIGFuIGVuZCB2YWx1ZSBmb3IgdGhlIGFuaW1hdGlvblwiKTt2YXIgdj1lLiRldmFsKG4uYXR0cmlidXRlcy5lbmRWYWx1ZS52YWx1ZSksZz1jW3QuJGlkXT1jW3QuJGlkXXx8e30saD1nW2xdPWdbbF18fFtdO2gucHVzaCh7ZmllbGQ6bCxsb3dlckJvdW5kOmQsdXBwZXJCb3VuZDptLHN0YXJ0VmFsdWU6cCxlbmRWYWx1ZTp2LGN1cnZlOmZ9KSxoLnNvcnQoZnVuY3Rpb24oZSxuKXtyZXR1cm4gZS5sb3dlckJvdW5kLW4ubG93ZXJCb3VuZH0pO2Zvcih2YXIgJD0xOyQ8aC5sZW5ndGg7JCsrKWZvcih2YXIgeT1oWyRdLmxvd2VyQm91bmQsdz0wOyQ+dzt3KyspaWYoeTxoW3ddLnVwcGVyQm91bmQpdGhyb3cgbmV3IEVycm9yKFwiQW5pbWF0ZSBzZWdtZW50cyBoYXZlIG92ZXJsYXBwaW5nZG9tYWlucyBmb3IgdGhlIHNhbWUgZmllbGQgKFwiK2wrXCIpLkF0IGFueSBwb2ludCBpbiB0aGUgdGltZWxpbmUsIG9ubHkgb25lIDxhbmltYXRlPmNhbiBhZmZlY3QgYSBnaXZlbiBmaWVsZCBvbiB0aGUgc2FtZSBtb2RpZmllci5cIik7dmFyIFM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9cy50aW1lbGluZSgpfHwwLG49MCxyPWhbbl0sYT0wO2E8aC5sZW5ndGg7YSsrKXtpZihlPj1oW2FdLmxvd2VyQm91bmQmJmU8PWhbYV0udXBwZXJCb3VuZCl7cj1oW2FdO2JyZWFrfWlmKGE9PT1oLmxlbmd0aC0xKXtyPWhbYV07YnJlYWt9aWYoZT49aFthXS51cHBlckJvdW5kJiZlPGhbYSsxXS5sb3dlckJvdW5kKXtyPWhbYV07YnJlYWt9fWlmKGU8PXIubG93ZXJCb3VuZClyZXR1cm4gci5zdGFydFZhbHVlO2lmKGU+PXIudXBwZXJCb3VuZClyZXR1cm4gci5lbmRWYWx1ZTt2YXIgbz1yLnVwcGVyQm91bmQtci5sb3dlckJvdW5kLHQ9KGUtci5sb3dlckJvdW5kKS9vO2lmKEFycmF5LmlzQXJyYXkoci5zdGFydFZhbHVlKSl7Zm9yKHZhciBpPVtdLHU9MDt1PHIuc3RhcnRWYWx1ZS5sZW5ndGg7dSsrKWkucHVzaChyLnN0YXJ0VmFsdWVbdV0rci5jdXJ2ZSh0KSooci5lbmRWYWx1ZVt1XS1yLnN0YXJ0VmFsdWVbdV0pKTtyZXR1cm4gaX1yZXR1cm4gci5zdGFydFZhbHVlK3IuY3VydmUodCkqKHIuZW5kVmFsdWUtci5zdGFydFZhbHVlKX0sYj1nLnRyYW5zZm9ybUNvbXBvbmVudHM9Zy50cmFuc2Zvcm1Db21wb25lbnRzfHxbXTtcIm9wYWNpdHlcIj09PWw/aS5vcGFjaXR5RnJvbShmdW5jdGlvbigpe3JldHVybiBTKCl9KTpcIm9yaWdpblwiPT09bD9pLm9yaWdpbkZyb20oZnVuY3Rpb24oKXtyZXR1cm4gUygpfSk6XCJzaXplXCI9PT1sP2kuc2l6ZUZyb20oZnVuY3Rpb24oKXtyZXR1cm4gUygpfSk6KGIucHVzaCh7ZmllbGQ6bCxmbjpTfSksaS50cmFuc2Zvcm1Gcm9tKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPXt9LG49dSYmdSgpP1t1KCldOltdLGE9MDthPGIubGVuZ3RoO2ErKykhZnVuY3Rpb24oKXt2YXIgbz1iW2FdLmZpZWxkO2lmKCFlW29dKXt2YXIgdD1iW2FdLmZuKCk7bi5wdXNoKEFycmF5LmlzQXJyYXkodCk/cltvXS5hcHBseSh0aGlzLHQpOnJbb10odCkpLGVbb109ITB9fSgpO3JldHVybiAxPT09bi5sZW5ndGg/blswXTpyLm11bHRpcGx5LmFwcGx5KHRoaXMsbil9KSl9fSl9fSgpfSwxKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUFwcFwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybnt0ZW1wbGF0ZTonPGRpdiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PGRpdj48L2Rpdj48L2Rpdj4nLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAscmVzdHJpY3Q6XCJFQVwiLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe2Z1bmN0aW9uIHQoKXtzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX17dmFyIGk9bi5lbnN1cmVJc29sYXRlKHIpLHM9ZVtcImZhbW91cy9jb3JlL1ZpZXdcIl0sdT1lW1wiZmFtb3VzL2NvcmUvRW5naW5lXCJdO2VbXCJmYW1vdXMvY29yZS9UcmFuc2Zvcm1cIl19YS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmYW1vdXMtYW5ndWxhci1jbGlwcGluZy1jb250YWluZXJcIj48ZGl2IGNsYXNzPVwiZmFtb3VzLWFuZ3VsYXItY29udGFpbmVyXCI+PC9kaXY+PC9kaXY+JyksaS5jb250ZXh0PXUuY3JlYXRlQ29udGV4dChhWzBdLnF1ZXJ5U2VsZWN0b3IoXCIuZmFtb3VzLWFuZ3VsYXItY29udGFpbmVyXCIpKSx3aW5kb3cuY29udGV4dD1pLmNvbnRleHQ7dmFyIGM9ZnVuY3Rpb24oKXt2YXIgZT1wYXJzZUludChvLmZhUGVyc3BlY3RpdmUpO2UmJmkuY29udGV4dC5zZXRQZXJzcGVjdGl2ZShlKX07by4kb2JzZXJ2ZShcImZhUGVyc3BlY3RpdmVcIixjKSxjKCksdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzLnByb3RvdHlwZSksdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dDtpLnZpZXc9bmV3IHQsaS5jb250ZXh0LmFkZChpLnZpZXcpLHIuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2kuY29udGV4dC51cGRhdGU9YW5ndWxhci5ub29wfSksci4kb24oXCJyZWdpc3RlckNoaWxkXCIsZnVuY3Rpb24oZSxuKXtpLnZpZXcuYWRkKG4ucmVuZGVyTm9kZSksZS5zdG9wUHJvcGFnYXRpb24oKX0pfSxwb3N0OmZ1bmN0aW9uKGUscil7dmFyIGE9bi5lbnN1cmVJc29sYXRlKGUpO28oZSxmdW5jdGlvbihlKXthbmd1bGFyLmVsZW1lbnQoclswXS5xdWVyeVNlbGVjdG9yQWxsKFwiZGl2IGRpdlwiKVswXSkuYXBwZW5kKGUpfSksYS5yZWFkeVRvUmVuZGVyPSEwfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhQ2FudmFzU3VyZmFjZVwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRjb21waWxlXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57c2NvcGU6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZTonPGNhbnZhcyBjbGFzcz1cImZhLWNhbnZhcy1zdXJmYWNlXCI+PC9jYW52YXM+JyxyZXN0cmljdDpcIkVBXCIsY29tcGlsZTpmdW5jdGlvbihyLGEsbyl7cmV0dXJue3ByZTpmdW5jdGlvbihyLGEsbyl7e3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKSxpPWVbXCJmYW1vdXMvc3VyZmFjZXMvQ2FudmFzU3VyZmFjZVwiXTtlW1wiZmFtb3VzL2NvcmUvVHJhbnNmb3JtXCJdLGVbXCJmYW1vdXMvY29yZS9FdmVudEhhbmRsZXJcIl19dC5yZW5kZXJOb2RlPW5ldyBpKHtzaXplOnIuJGV2YWwoby5mYVNpemUpfSksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpLG8uY2xhc3MmJnQucmVuZGVyTm9kZS5zZXRDbGFzc2VzKG9bXCJjbGFzc1wiXS5zcGxpdChcIiBcIikpLG4uc2VxdWVuY2VXaXRoKHIsZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJTdXJmYWNlcyBhcmUgbGVhZiBub2RlcyBvZiB0aGUgRmFtby51cyByZW5kZXIgdHJlZSBhbmQgY2Fubm90IGFjY2VwdCByZW5kZXJub2RlIGNoaWxkcmVuLiAgVG8gaW5jbHVkZSBhZGRpdGlvbmFsIEZhbW8udXMgY29udGVudCBpbnNpZGUgb2YgYSBmYS1zdXJmYWNlLCB0aGF0IGNvbnRlbnQgbXVzdCBiZSBlbmNsb3NlZCBpbiBhbiBhZGRpdGlvbmFsIGZhLWFwcC5cIil9KX0scG9zdDpmdW5jdGlvbihlLHIpe3ZhciBhPW4uZW5zdXJlSXNvbGF0ZShlKSx0PWZ1bmN0aW9uKCl7YS5yZW5kZXJOb2RlLnNldENvbnRlbnQoclswXS5xdWVyeVNlbGVjdG9yKFwiY2FudmFzLmZhLWNhbnZhcy1zdXJmYWNlXCIpKX07dCgpLG8oZSxmdW5jdGlvbihlKXthbmd1bGFyLmVsZW1lbnQoclswXS5xdWVyeVNlbGVjdG9yQWxsKFwiY2FudmFzLmZhLWNhbnZhcy1zdXJmYWNlXCIpKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEsZnVuY3Rpb24oKXt9KX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUNsaWNrXCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUocik7aWYoby5mYUNsaWNrKXt2YXIgaT10LnJlbmRlck5vZGUuX2V2ZW50SW5wdXR8fHQucmVuZGVyTm9kZTtpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihuKXt2YXIgYT1lKG8uZmFDbGljayk7YShyLHskZXZlbnQ6bn0pLHIuJCRwaGFzZXx8ci4kYXBwbHkoKX0pfX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUNvbnRhaW5lclN1cmZhY2VcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHJlc3RyaWN0OlwiRVwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbihyLGEsbyl7cmV0dXJue3ByZTpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy9zdXJmYWNlcy9Db250YWluZXJTdXJmYWNlXCJdLHM9ci4kZXZhbChvLmZhT3B0aW9ucyl8fHt9O3QucmVuZGVyTm9kZT1uZXcgaShzKSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIsdCksdC5zaG93KCksbi5zZXF1ZW5jZVdpdGgocixmdW5jdGlvbihlKXt0LnJlbmRlck5vZGUuYWRkKGUucmVuZGVyR2F0ZSl9KX0scG9zdDpmdW5jdGlvbihlLHIpe3ZhciBhPW4uZW5zdXJlSXNvbGF0ZShlKTtvKGUsZnVuY3Rpb24oZSl7ci5maW5kKFwiZGl2XCIpLmFwcGVuZChlKX0pLG4ucmVnaXN0ZXJDaGlsZChlLHIsYSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFEcmFnZ2FibGVcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsXCIkcGFyc2VcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihlLG4scixhKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHRyYW5zY2x1ZGU6ITAscmVzdHJpY3Q6XCJFQVwiLHByaW9yaXR5OjIsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbihyLG8sdCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24ocixvLGkpe3ZhciBzPW4uZW5zdXJlSXNvbGF0ZShyKSx1PWVbXCJmYW1vdXMvY29yZS9SZW5kZXJOb2RlXCJdLGM9ZVtcImZhbW91cy9tb2RpZmllcnMvRHJhZ2dhYmxlXCJdLGY9ci4kZXZhbChpLmZhT3B0aW9ucyl8fHt9O3IuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuJGV2YWwoaS5mYU9wdGlvbnMpfSxmdW5jdGlvbihlKXtlPWV8fHt9LHMubW9kaWZpZXIuc2V0T3B0aW9ucyhlKX0sITApLHMubW9kaWZpZXI9bmV3IGMoZikscy5yZW5kZXJOb2RlPShuZXcgdSkuYWRkKHMubW9kaWZpZXIpLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIixzKSxzLnNob3coKSxuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKGUpe3MucmVuZGVyTm9kZS5hZGQoZS5yZW5kZXJHYXRlKX0pLHQocixmdW5jdGlvbihlKXtvLmZpbmQoXCJkaXZcIikuYXBwZW5kKGUpfSksbi5yZWdpc3RlckNoaWxkKHIsbyxzLGZ1bmN0aW9uKCl7cy5tb2RpZmllci5kZWFjdGl2YXRlKCl9KSxyLiQkcGhhc2V8fGEuJCRwaGFzZXx8ci4kYXBwbHkoKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUVkZ2VTd2FwcGVyXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Njb3BlOiEwLHJlc3RyaWN0OlwiQVwiLHByaW9yaXR5OjUxMixjb21waWxlOmZ1bmN0aW9uKCl7dmFyIHI9ZVtcImZhbW91cy92aWV3cy9FZGdlU3dhcHBlclwiXTtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgdCxpPW4uZW5zdXJlSXNvbGF0ZShlKTtpLiQkYW5pbWF0ZUVudGVySGFuZGxlcj1mdW5jdGlvbihlLG4pe2kucmVuZGVyTm9kZS5zaG93KHQsZnVuY3Rpb24oKXtpLiQkbGVhdmVEb25lQ2FsbGJhY2smJmkuJCRsZWF2ZURvbmVDYWxsYmFjaygpLG4uJGRvbmUoKX0pfSxpLiQkYW5pbWF0ZUxlYXZlSGFuZGxlcj1mdW5jdGlvbihlLG4pe2kuJCRsZWF2ZURvbmVDYWxsYmFjaz1uLiRkb25lfTt2YXIgcz1lLiRldmFsKG8uZmFPcHRpb25zKTtpLnJlbmRlck5vZGU9bmV3IHIocyksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLGkpLGkuc2hvdygpLG4uc2VxdWVuY2VXaXRoKGUsZnVuY3Rpb24oZSl7dD1lLnJlbmRlckdhdGV9KX0scG9zdDpmdW5jdGlvbihlLHIpe3ZhciBhPW4uZW5zdXJlSXNvbGF0ZShlKTtuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEpfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhRmxleGlibGVMYXlvdXRcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHJlc3RyaWN0OlwiRVwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbihyLGEsbyl7cmV0dXJue3ByZTpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy92aWV3cy9GbGV4aWJsZUxheW91dFwiXSxzPShlW1wiZmFtb3VzL2NvcmUvVmlld1NlcXVlbmNlXCJdLGVbXCJmYW1vdXMvY29yZS9SZW5kZXJOb2RlXCJdLFtdKSx1PXIuJGV2YWwoby5mYU9wdGlvbnMpfHx7fTt0LnJlbmRlck5vZGU9bmV3IGkodSksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpO3ZhciBjPWZ1bmN0aW9uKCl7cy5zb3J0KGZ1bmN0aW9uKGUsbil7cmV0dXJuIGUuaW5kZXgtbi5pbmRleH0pLHQucmVuZGVyTm9kZS5zZXF1ZW5jZUZyb20oZnVuY3Rpb24oZSl7dmFyIG49W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUscil7bltyXT1lLnJlbmRlckdhdGV9KSxufShzKSl9O24uc2VxdWVuY2VXaXRoKHIsZnVuY3Rpb24oZSl7cy5wdXNoKGUpLGMoKX0sZnVuY3Rpb24oZSl7cz1mdW5jdGlvbihuKXt2YXIgcj1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKG4sZnVuY3Rpb24obil7bi5pZCE9PWUmJnIucHVzaChuKX0pLHJ9KHMpLGMoKX0pfSxwb3N0OmZ1bmN0aW9uKGUscil7dmFyIGE9bi5lbnN1cmVJc29sYXRlKGUpO28oZSxmdW5jdGlvbihlKXtyLmZpbmQoXCJkaXZcIikuYXBwZW5kKGUpfSksZS4kZW1pdChcInJlZ2lzdGVyQ2hpbGRcIixhKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUZsaXBwZXJcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHJlc3RyaWN0OlwiRVwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbihyLGEsbyl7cmV0dXJue3ByZTpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy92aWV3cy9GbGlwcGVyXCJdLHM9ci4kZXZhbChvLmZhT3B0aW9ucyl8fHt9O3QucmVuZGVyTm9kZT1uZXcgaShzKSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIsdCksdC5zaG93KCksdC5jaGlsZHJlbj1bXSx0LmZsaXA9ZnVuY3Rpb24oZSl7dC5yZW5kZXJOb2RlLmZsaXAoZXx8ci4kZXZhbChvLmZhT3B0aW9ucykpfSxuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKGUpe3ZhciBuPXQuY2hpbGRyZW4ubGVuZ3RoO2lmKDA9PT1uKXQucmVuZGVyTm9kZS5zZXRGcm9udChlLnJlbmRlckdhdGUpO2Vsc2V7aWYoMSE9PW4pdGhyb3cgbmV3IEVycm9yKFwiZmEtZmxpcHBlciBhY2NlcHRzIG9ubHkgdHdvIGNoaWxkIGVsZW1lbnRzOyBtb3JlIHRoYW4gdHdvIGhhdmUgYmVlbiBwcm92aWRlZFwiKTt0LnJlbmRlck5vZGUuc2V0QmFjayhlLnJlbmRlckdhdGUpfXQuY2hpbGRyZW4ucHVzaChlLnJlbmRlckdhdGUpfSxmdW5jdGlvbigpe3QuY2hpbGRyZW4uc3BsaWNlKHQuY2hpbGRyZW4ubGVuZ3RoLTEsMSl9KX0scG9zdDpmdW5jdGlvbihlLHIpe3ZhciBhPW4uZW5zdXJlSXNvbGF0ZShlKTtvKGUsZnVuY3Rpb24oZSl7ci5maW5kKFwiZGl2XCIpLmFwcGVuZChlKX0pLG4ucmVnaXN0ZXJDaGlsZChlLHIsYSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFHcmlkTGF5b3V0XCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3RlbXBsYXRlOlwiPGRpdj48L2Rpdj5cIixyZXN0cmljdDpcIkVcIix0cmFuc2NsdWRlOiEwLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKSxpPWVbXCJmYW1vdXMvdmlld3MvR3JpZExheW91dFwiXSxzPShlW1wiZmFtb3VzL2NvcmUvVmlld1NlcXVlbmNlXCJdLFtdKSx1PXIuJGV2YWwoby5mYU9wdGlvbnMpfHx7fTt0LnJlbmRlck5vZGU9bmV3IGkodSksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpO3ZhciBjPWZ1bmN0aW9uKCl7ci4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtzLnNvcnQoZnVuY3Rpb24oZSxuKXtyZXR1cm4gZS5pbmRleC1uLmluZGV4fSksdC5yZW5kZXJOb2RlLnNlcXVlbmNlRnJvbShmdW5jdGlvbihlKXt2YXIgbj1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSxyKXtuW3JdPWUucmVuZGVyR2F0ZX0pLG59KHMpKX0pfTtuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKGUpe3MucHVzaChlKSxjKCl9LGZ1bmN0aW9uKGUpe3M9ZnVuY3Rpb24obil7dmFyIHI9W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChuLGZ1bmN0aW9uKG4pe24uaWQhPT1lJiZyLnB1c2gobil9KSxyfShzKSxjKCl9LGMpfSxwb3N0OmZ1bmN0aW9uKGUscil7dmFyIGE9bi5lbnN1cmVJc29sYXRlKGUpO28oZSxmdW5jdGlvbihlKXtyLmZpbmQoXCJkaXZcIikuYXBwZW5kKGUpfSksbi5yZWdpc3RlckNoaWxkKGUscixhKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUhlYWRlckZvb3RlckxheW91dFwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybnt0ZW1wbGF0ZTpcIjxkaXY+PC9kaXY+XCIscmVzdHJpY3Q6XCJFXCIsdHJhbnNjbHVkZTohMCxzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1lW1wiZmFtb3VzL3ZpZXdzL0hlYWRlckZvb3RlckxheW91dFwiXSxpPWVbXCJmYW1vdXMvY29yZS9SZW5kZXJOb2RlXCJdO3JldHVybntwcmU6ZnVuY3Rpb24oZSxyLGEpe3ZhciBvPW4uZW5zdXJlSXNvbGF0ZShlKSxzPShuZXcgaSxuZXcgaSxuZXcgaSxlLiRldmFsKGEuZmFPcHRpb25zKXx8e30pO28ucmVuZGVyTm9kZT1uZXcgdChzKSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIsbyksby5zaG93KCk7dmFyIHU9MDtuLnNlcXVlbmNlV2l0aChlLGZ1bmN0aW9uKGUpe2lmKHUrKywxPT09dSlvLnJlbmRlck5vZGUuaGVhZGVyLmFkZChlLnJlbmRlckdhdGUpO2Vsc2UgaWYoMj09PXUpby5yZW5kZXJOb2RlLmNvbnRlbnQuYWRkKGUucmVuZGVyR2F0ZSk7ZWxzZXtpZigzIT09dSl0aHJvdyBuZXcgRXJyb3IoXCJmYS1oZWFkZXItZm9vdGVyLWxheW91dCBjYW4gYWNjZXB0IG5vIG1vcmUgdGhhbiAzIGNoaWxkcmVuXCIpO28ucmVuZGVyTm9kZS5mb290ZXIuYWRkKGUucmVuZGVyR2F0ZSl9fSxmdW5jdGlvbigpezE9PT11P28ucmVuZGVyTm9kZS5oZWFkZXIuc2V0KHt9KToyPT09dT9vLnJlbmRlck5vZGUuY29udGVudC5zZXQoe30pOjM9PT11JiZvLnJlbmRlck5vZGUuZm9vdGVyLnNldCh7fSksdS0tfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSk7byhlLGZ1bmN0aW9uKGUpe3IuZmluZChcImRpdlwiKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEpfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhSW1hZ2VTdXJmYWNlXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Njb3BlOiEwLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwiZmEtaW1hZ2Utc3VyZmFjZVwiPjwvZGl2PicscmVzdHJpY3Q6XCJFQVwiLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKHIsYSxvKXt7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy9zdXJmYWNlcy9JbWFnZVN1cmZhY2VcIl07ZVtcImZhbW91cy9jb3JlL1RyYW5zZm9ybVwiXSxlW1wiZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyXCJdfXIuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0UHJvcGVydGllcygpfSxmdW5jdGlvbigpe3QucmVuZGVyTm9kZSYmdC5yZW5kZXJOb2RlLnNldFByb3BlcnRpZXModC5nZXRQcm9wZXJ0aWVzKCkpfSwhMCk7dmFyIHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmYVwiK2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX07dC5nZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXIuJGV2YWwoby5mYVByb3BlcnRpZXMpfHx7fSxuPVtcImJhY2tncm91bmRDb2xvclwiLFwiY29sb3JcIl0sYT0wO2E8bi5sZW5ndGg7YSsrKXt2YXIgdD1uW2FdLGk9cyh0KTtvW2ldJiYoZVt0XT1yLiRldmFsKG9baV0pKX1yZXR1cm4gZX0sdC5yZW5kZXJOb2RlPW5ldyBpKHtzaXplOnIuJGV2YWwoby5mYVNpemUpLFwiY2xhc3NcIjpyLiRldmFsKG8uY2xhc3MpLHByb3BlcnRpZXM6dC5nZXRQcm9wZXJ0aWVzKCl9KSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIsdCksdC5zaG93KCksby5jbGFzcyYmdC5yZW5kZXJOb2RlLnNldENsYXNzZXMob1tcImNsYXNzXCJdLnNwbGl0KFwiIFwiKSl9LHBvc3Q6ZnVuY3Rpb24oZSxyLGEpe3ZhciBvPW4uZW5zdXJlSXNvbGF0ZShlKSx0PWZ1bmN0aW9uKCl7by5yZW5kZXJOb2RlLnNldENvbnRlbnQoYS5mYUltYWdlVXJsKX07dCgpLGEuJG9ic2VydmUoXCJmYUltYWdlVXJsXCIsdCksbi5yZWdpc3RlckNoaWxkKGUscixvKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUluZGV4XCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEscHJpb3JpdHk6MTYsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKGUscixhKXt2YXIgbz1uLmVuc3VyZUlzb2xhdGUoZSxyKTtvLmluZGV4PWUuJGV2YWwoYS5mYUluZGV4KSxlLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBlLiRldmFsKGEuZmFJbmRleCl9LGZ1bmN0aW9uKCl7by5pbmRleD1lLiRldmFsKGEuZmFJbmRleCksby51cGRhdGVNZXRob2QmJm8udXBkYXRlTWV0aG9kKCl9KX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5jb25maWcoW1wiJHByb3ZpZGVcIixmdW5jdGlvbihlKXtlLmRlY29yYXRvcihcIm5nQ2xpY2tEaXJlY3RpdmVcIixbXCIkZGVsZWdhdGVcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixcIiRwYXJzZVwiLFwiJHJvb3RFbGVtZW50XCIsXCIkZmFtb3VzXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGUsbixyLGEsbyx0KXtmdW5jdGlvbiBpKGUsbixyLGEpe3JldHVybiBNYXRoLmFicyhlLXIpPCQmJk1hdGguYWJzKG4tYSk8JH1mdW5jdGlvbiBzKGUsbixyKXtmb3IodmFyIGE9MDthPGUubGVuZ3RoO2ErPTIpaWYoaShlW2FdLGVbYSsxXSxuLHIpKXJldHVybiBlLnNwbGljZShhLGErMiksITA7cmV0dXJuITF9ZnVuY3Rpb24gdShlKXtpZighKERhdGUubm93KCktbD5oKSl7dmFyIG49ZS50b3VjaGVzJiZlLnRvdWNoZXMubGVuZ3RoP2UudG91Y2hlczpbZV0scj1uWzBdLmNsaWVudFgsYT1uWzBdLmNsaWVudFk7cyhkLHIsYSl8fChlLnN0b3BQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSxlLnRhcmdldCYmZS50YXJnZXQuYmx1cigpKX19ZnVuY3Rpb24gYyhlKXt2YXIgbj1lLnRvdWNoZXMmJmUudG91Y2hlcy5sZW5ndGg/ZS50b3VjaGVzOltlXSxyPW5bMF0uY2xpZW50WCxhPW5bMF0uY2xpZW50WTtkLnB1c2gocixhKSx0KGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKz0yKWlmKGRbZV09PT1yJiZkW2UrMV09PT1hKXJldHVybiB2b2lkIGQuc3BsaWNlKGUsZSsyKX0saCwhMSl9ZnVuY3Rpb24gZihlLG4pe2R8fChhWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHUsITApLGFbMF0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixjLCEwKSxkPVtdKSxsPURhdGUubm93KCkscyhkLGUsbil9e3ZhciBsLGQsbT1lWzBdLHA9bS5jb21waWxlLHY9NzUwLGc9MTIsaD0yNTAwLCQ9MjUseT1cIm5nLWNsaWNrLWFjdGl2ZVwiO29bXCJmYW1vdXMvY29yZS9FbmdpbmVcIl19cmV0dXJuIG0uY29tcGlsZT1mdW5jdGlvbihlLG4sYSl7cmV0dXJuIG8udXRpbC5pc0ZhRWxlbWVudChlKT9vLnV0aWwuaXNBU3VyZmFjZShlKT97cG9zdDpmdW5jdGlvbihlLG4sYSl7ZnVuY3Rpb24gdCgpe2Q9ITEscC5yZW1vdmVDbGFzcyh5KX12YXIgaSxzLHUsYyxsPXIoYS5uZ0NsaWNrKSxkPSExLG09by5nZXRJc29sYXRlKGUpLHA9bS5yZW5kZXJOb2RlO3Aub24oXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oZSl7ZD0hMCxpPWUudGFyZ2V0P2UudGFyZ2V0OmUuc3JjRWxlbWVudCwzPT09aS5ub2RlVHlwZSYmKGk9aS5wYXJlbnROb2RlKSxwLmFkZENsYXNzKHkpLHM9RGF0ZS5ub3coKTt2YXIgbj1lLnRvdWNoZXMmJmUudG91Y2hlcy5sZW5ndGg/ZS50b3VjaGVzOltlXSxyPW5bMF0ub3JpZ2luYWxFdmVudHx8blswXTt1PXIuY2xpZW50WCxjPXIuY2xpZW50WX0pLHAub24oXCJ0b3VjaG1vdmVcIixmdW5jdGlvbigpe3QoKX0pLHAub24oXCJ0b3VjaGNhbmNlbFwiLGZ1bmN0aW9uKCl7dCgpfSkscC5vbihcInRvdWNoZW5kXCIsZnVuY3Rpb24oZSl7dmFyIG49RGF0ZS5ub3coKS1zLHI9ZS5jaGFuZ2VkVG91Y2hlcyYmZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/ZS5jaGFuZ2VkVG91Y2hlczplLnRvdWNoZXMmJmUudG91Y2hlcy5sZW5ndGg/ZS50b3VjaGVzOltlXSxvPXJbMF0ub3JpZ2luYWxFdmVudHx8clswXSxpPW8uY2xpZW50WCxsPW8uY2xpZW50WSxtPU1hdGguc3FydChNYXRoLnBvdyhpLXUsMikrTWF0aC5wb3cobC1jLDIpKTtkJiZ2Pm4mJmc+bSYmKGYoaSxsKSxhbmd1bGFyLmlzRGVmaW5lZChhLmRpc2FibGVkKSYmXCJmYWxzZVwiIT09YS5kaXNhYmxlZHx8cC5lbWl0KFwiY2xpY2tcIixbZV0pKSx0KCl9KSxwLm9uKFwiY2xpY2tcIixmdW5jdGlvbihuLHIpe2UuJGFwcGx5KGZ1bmN0aW9uKCl7bChlLHskZXZlbnQ6cnx8bn0pfSl9KSxwLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oKXtwLmFkZENsYXNzKHkpfSkscC5vbihcIm1vdXNlbW92ZSBtb3VzZXVwXCIsZnVuY3Rpb24oKXtwLnJlbW92ZUNsYXNzKHkpfSl9fTp2b2lkIDA6cChlLG4sYSl9LGV9XSksYW5ndWxhci5mb3JFYWNoKFwiZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihuKXt2YXIgcj13aW5kb3cuJGZhbW91c1V0aWwuZGlyZWN0aXZlTm9ybWFsaXplKFwibmctXCIrbik7ZS5kZWNvcmF0b3IocitcIkRpcmVjdGl2ZVwiLFtcIiRkZWxlZ2F0ZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLFwiJHBhcnNlXCIsXCIkZmFtb3VzXCIsZnVuY3Rpb24oZSxhLG8sdCl7dmFyIGk9ZVswXSxzPWkuY29tcGlsZTtyZXR1cm4gaS5jb21waWxlPWZ1bmN0aW9uKGUsaSx1KXtyZXR1cm4gdC51dGlsLmlzRmFFbGVtZW50KGUpP3twb3N0OmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1hLmVuc3VyZUlzb2xhdGUoZSk7aWYoaVtyXSl7dmFyIHU9cy5yZW5kZXJOb2RlLl9ldmVudElucHV0fHxzLnJlbmRlck5vZGU7dS5vbihuLGZ1bmN0aW9uKG4pe3ZhciBhPW8oaVtyXSk7YShlLHskZXZlbnQ6bn0pLGUuJCRwaGFzZXx8ZS4kYXBwbHkoKX0pfX19OnMoZSxpLHUpfSxlfV0pfSl9XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYU1vZGlmaWVyXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLFwiJHBhcnNlXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oZSxuLHIsYSl7cmV0dXJue3RlbXBsYXRlOlwiPGRpdj48L2Rpdj5cIix0cmFuc2NsdWRlOiEwLHJlc3RyaWN0OlwiRUFcIixwcmlvcml0eToyLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24obyx0LGkpe3JldHVybntwb3N0OmZ1bmN0aW9uKG8sdCxzKXt2YXIgdT1uLmVuc3VyZUlzb2xhdGUobyksYz1lW1wiZmFtb3VzL2NvcmUvUmVuZGVyTm9kZVwiXSxmPWVbXCJmYW1vdXMvY29yZS9Nb2RpZmllclwiXSxsPWVbXCJmYW1vdXMvY29yZS9UcmFuc2Zvcm1cIl0sZD1lW1wiZmFtb3VzL3BoeXNpY3MvYm9kaWVzL1BhcnRpY2xlXCJdLG09ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0UG9zaXRpb24oKX0scD1bXCJhYm91dE9yaWdpblwiLFwicGVyc3BlY3RpdmVcIixcInJvdGF0ZVwiLFwicm90YXRlQXhpc1wiLFwicm90YXRlWFwiLFwicm90YXRlWVwiLFwicm90YXRlWlwiLFwic2NhbGVcIixcInNrZXdcIixcInRyYW5zbGF0ZVwiXTtzLiRvYnNlcnZlKFwiZmFUcmFuc2Zvcm1PcmRlclwiLGZ1bmN0aW9uKCl7dmFyIGU9by4kZXZhbChzLmZhVHJhbnNmb3JtT3JkZXIpO3ZvaWQgMCE9PWUmJihwPWUpfSk7dmFyIHY9e307YW5ndWxhci5mb3JFYWNoKHAsZnVuY3Rpb24obil7dmFyIGE9ZS51dGlsLmRpcmVjdGl2ZU5vcm1hbGl6ZShcImZhLVwiK24pO3MuJG9ic2VydmUoYSxmdW5jdGlvbigpe3Zbbl09cihzW2FdKX0pfSk7dmFyIGc9YW5ndWxhci5ub29wO3MuJG9ic2VydmUoXCJmYVRyYW5zZm9ybVwiLGZ1bmN0aW9uKCl7Zz1yKHMuZmFUcmFuc2Zvcm0pfSksdS5nZXRUcmFuc2Zvcm09ZnVuY3Rpb24oKXt2YXIgZT1nKG8pO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGUgaW5zdGFuY2VvZiBGdW5jdGlvbj9lKCk6ZSBpbnN0YW5jZW9mIE9iamVjdCYmdm9pZCAwIT09ZS5nZXQ/ZS5nZXQoKTplO3ZhciBuPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2gocCxmdW5jdGlvbihlKXt2YXIgcj12W2VdP3ZbZV0obyk6dm9pZCAwO3ZvaWQgMCE9PXImJihyIGluc3RhbmNlb2YgRnVuY3Rpb24mJihyPXIoKSksbi5wdXNoKHIgaW5zdGFuY2VvZiBBcnJheT9sW2VdLmFwcGx5KHRoaXMscik6ciBpbnN0YW5jZW9mIGQ/bFtlXS5hcHBseSh0aGlzLG0ocikpOmxbZV0uY2FsbCh0aGlzLHIpKSl9KSxuLmxlbmd0aD8xPT09bi5sZW5ndGg/blswXTpsLm11bHRpcGx5LmFwcGx5KHRoaXMsbik6dm9pZCAwfTt2YXIgaD1hbmd1bGFyLm5vb3A7cy4kb2JzZXJ2ZShcImZhQWxpZ25cIixmdW5jdGlvbigpe2g9cihzLmZhQWxpZ24pfSksdS5nZXRBbGlnbj1mdW5jdGlvbigpe3ZhciBlPWgobyk7cmV0dXJuIGUgaW5zdGFuY2VvZiBGdW5jdGlvbj9lKCk6ZSBpbnN0YW5jZW9mIE9iamVjdCYmdm9pZCAwIT09ZS5nZXQ/ZS5nZXQoKTplIGluc3RhbmNlb2YgZD9tKGUpOmV9O3ZhciAkPWFuZ3VsYXIubm9vcDtzLiRvYnNlcnZlKFwiZmFPcGFjaXR5XCIsZnVuY3Rpb24oKXskPXIocy5mYU9wYWNpdHkpfSksdS5nZXRPcGFjaXR5PWZ1bmN0aW9uKCl7dmFyIGU9JChvKTtyZXR1cm4gdm9pZCAwPT09ZT8xOmUgaW5zdGFuY2VvZiBGdW5jdGlvbj9lKCk6ZSBpbnN0YW5jZW9mIE9iamVjdCYmdm9pZCAwIT09ZS5nZXQ/ZS5nZXQoKTplIGluc3RhbmNlb2YgZD9tKGUpOmV9O3ZhciB5PWFuZ3VsYXIubm9vcDtzLiRvYnNlcnZlKFwiZmFTaXplXCIsZnVuY3Rpb24oKXt5PXIocy5mYVNpemUpfSksdS5nZXRTaXplPWZ1bmN0aW9uKCl7dmFyIGU9eShvKTtyZXR1cm4gZSBpbnN0YW5jZW9mIEZ1bmN0aW9uP2UoKTplIGluc3RhbmNlb2YgT2JqZWN0JiZ2b2lkIDAhPT1lLmdldD9lLmdldCgpOmUgaW5zdGFuY2VvZiBkP20oZSk6ZX07dmFyIHc9YW5ndWxhci5ub29wO3MuJG9ic2VydmUoXCJmYU9yaWdpblwiLGZ1bmN0aW9uKCl7dz1yKHMuZmFPcmlnaW4pfSksdS5nZXRPcmlnaW49ZnVuY3Rpb24oKXt2YXIgZT13KG8pO3JldHVybiBlIGluc3RhbmNlb2YgRnVuY3Rpb24/ZSgpOmUgaW5zdGFuY2VvZiBPYmplY3QmJnZvaWQgMCE9PWUuZ2V0P2UuZ2V0KCk6ZSBpbnN0YW5jZW9mIGQ/bShlKTplfSx1Lm1vZGlmaWVyPW5ldyBmKHt0cmFuc2Zvcm06dS5nZXRUcmFuc2Zvcm0sc2l6ZTp1LmdldFNpemUsb3BhY2l0eTp1LmdldE9wYWNpdHksb3JpZ2luOnUuZ2V0T3JpZ2luLGFsaWduOnUuZ2V0QWxpZ259KSx1LnJlbmRlck5vZGU9KG5ldyBjKS5hZGQodS5tb2RpZmllciksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHUpLHUuc2hvdygpLG4uc2VxdWVuY2VXaXRoKG8sZnVuY3Rpb24oZSl7dS5yZW5kZXJOb2RlLmFkZChlLnJlbmRlckdhdGUpfSksaShvLGZ1bmN0aW9uKGUpe3QuZmluZChcImRpdlwiKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQobyx0LHUsZnVuY3Rpb24oKXt1Lm1vZGlmaWVyLnNldE9wYWNpdHkoMCl9KSxvLiQkcGhhc2V8fGEuJCRwaGFzZXx8by4kYXBwbHkoKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYU1vdXNlb3ZlclwiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpO2lmKG8uZmFNb3VzZW92ZXIpe3ZhciBpPXQucmVuZGVyTm9kZS5fZXZlbnRJbnB1dHx8dC5yZW5kZXJOb2RlO2kub24oXCJtb3VzZW92ZXJcIixmdW5jdGlvbihuKXt2YXIgYT1lKG8uZmFNb3VzZW92ZXIpO2Eocix7JGV2ZW50Om59KSxyLiQkcGhhc2V8fHIuJGFwcGx5KCl9KX19fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFPcHRpb25zXCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEscHJpb3JpdHk6LTE2LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihlLHIsYSl7dmFyIG89bi5lbnN1cmVJc29sYXRlKGUscik7ZS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZS4kZXZhbChhLmZhT3B0aW9ucyl9LGZ1bmN0aW9uKCl7by5yZW5kZXJOb2RlLnNldE9wdGlvbnMoZS4kZXZhbChhLmZhT3B0aW9ucykpfSwhMCl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFQaXBlRnJvbVwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixcIiRmYW1vdXNQaXBlXCIsZnVuY3Rpb24oZSxuLHIpe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMSxwcmlvcml0eToxNixjb21waWxlOmZ1bmN0aW9uKCl7dmFyIGE9ZVtcImZhbW91cy9jb3JlL0VuZ2luZVwiXTtyZXR1cm57cG9zdDpmdW5jdGlvbihlLG8sdCl7dmFyIGk9bi5lbnN1cmVJc29sYXRlKGUpO2UuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuJGV2YWwodC5mYVBpcGVGcm9tKX0sZnVuY3Rpb24oZSxuKXt2YXIgbztvPWkucmVuZGVyTm9kZSYmaS5yZW5kZXJOb2RlLl9pc01vZGlmaWVyP2kucmVuZGVyTm9kZS5fb2JqZWN0OmkucmVuZGVyTm9kZT9pLnJlbmRlck5vZGUuX2V2ZW50SW5wdXR8fGkucmVuZGVyTm9kZTphLHIudW5waXBlc0Zyb21UYXJnZXRzKG8sbiksci5waXBlc1RvVGFyZ2V0cyhvLGUpfSksZS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ci51bnBpcGVzRnJvbVRhcmdldHMoaS5yZW5kZXJOb2RlfHxhLGUuJGV2YWwodC5mYVBpcGVGcm9tKSl9KX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYVBpcGVUb1wiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixcIiRmYW1vdXNQaXBlXCIsZnVuY3Rpb24oZSxuLHIpe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMSxwcmlvcml0eToxNixjb21waWxlOmZ1bmN0aW9uKCl7dmFyIGE9ZVtcImZhbW91cy9jb3JlL0VuZ2luZVwiXTtyZXR1cm57cG9zdDpmdW5jdGlvbihlLG8sdCl7dmFyIGk9bi5lbnN1cmVJc29sYXRlKGUpO2UuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuJGV2YWwodC5mYVBpcGVUbyl9LGZ1bmN0aW9uKGUsbil7dmFyIG87bz1pLnJlbmRlck5vZGUmJmkucmVuZGVyTm9kZS5faXNNb2RpZmllcj9pLnJlbmRlck5vZGUuX29iamVjdDppLnJlbmRlck5vZGU/aS5yZW5kZXJOb2RlLl9ldmVudE91dHB1dHx8aS5yZW5kZXJOb2RlOmEsci51bnBpcGVzRnJvbVRhcmdldHMobixvKSxyLnBpcGVzVG9UYXJnZXRzKGUsbyl9KSxlLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtyLnVucGlwZXNGcm9tVGFyZ2V0cyhlLiRldmFsKHQuZmFQaXBlVG8pLGkucmVuZGVyTm9kZXx8YSl9KX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYVJlbmRlck5vZGVcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAscmVzdHJpY3Q6XCJFQVwiLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe3t2YXIgdD1uLmVuc3VyZUlzb2xhdGUociksaT1lW1wiZmFtb3VzL2NvcmUvRW5naW5lXCJdO1xuZVtcImZhbW91cy9jb3JlL1JlbmRlck5vZGVcIl19dC5jaGlsZHJlbj1bXSxvLiRvYnNlcnZlKFwiZmFQaXBlVG9cIixmdW5jdGlvbihlKXt2YXIgbj1yLiRldmFsKGUpO24mJmkucGlwZShuKX0pLHQucmVuZGVyTm9kZT1yLiRldmFsKG8uZmFOb2RlKSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIsdCksdC5zaG93KCksbi5zZXF1ZW5jZVdpdGgocixmdW5jdGlvbihlKXt0LnJlbmRlck5vZGUuYWRkKGUucmVuZGVyR2F0ZSksdC5jaGlsZHJlbi5wdXNoKGUpfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSk7byhlLGZ1bmN0aW9uKGUpe3IuZmluZChcImRpdlwiKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEpfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhU2Nyb2xsVmlld1wiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybnt0ZW1wbGF0ZTpcIjxkaXY+PC9kaXY+XCIscmVzdHJpY3Q6XCJFXCIsdHJhbnNjbHVkZTohMCxzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKHIsYSxvKXtyZXR1cm57cHJlOmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUociksaT1lW1wiZmFtb3VzL3ZpZXdzL1Njcm9sbHZpZXdcIl0scz1lW1wiZmFtb3VzL2NvcmUvVmlld1NlcXVlbmNlXCJdLHU9KGVbXCJmYW1vdXMvY29yZS9TdXJmYWNlXCJdLFtdKSxjPXIuJGV2YWwoby5mYU9wdGlvbnMpfHx7fTt0LnJlbmRlck5vZGU9bmV3IGkoYyksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpO3ZhciBmPWZ1bmN0aW9uKGUpe3IuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7dS5zb3J0KGZ1bmN0aW9uKGUsbil7cmV0dXJuIGUuaW5kZXgtbi5pbmRleH0pO3ZhciBuPXthcnJheTpmdW5jdGlvbihlKXt2YXIgbj1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSxyKXtuW3JdPWUucmVuZGVyR2F0ZX0pLG59KHUpfTtlJiYobi5pbmRleD1yLiRldmFsKG8uZmFTdGFydEluZGV4KSk7dmFyIGE9bmV3IHMobik7dC5yZW5kZXJOb2RlLnNlcXVlbmNlRnJvbShhKX0pfTtuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKGUpe3UucHVzaChlKSxmKCEwKX0sZnVuY3Rpb24oZSl7dT1mdW5jdGlvbihuKXt2YXIgcj1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKG4sZnVuY3Rpb24obil7bi5pZCE9PWUmJnIucHVzaChuKX0pLHJ9KHUpLGYoKX0sZil9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSk7byhlLGZ1bmN0aW9uKGUpe3IuZmluZChcImRpdlwiKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEpfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhU2VxdWVudGlhbExheW91dFwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybnt0ZW1wbGF0ZTpcIjxkaXY+PC9kaXY+XCIscmVzdHJpY3Q6XCJFXCIsdHJhbnNjbHVkZTohMCxzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKHIsYSxvKXtyZXR1cm4gd2luZG93LiRmPWUse3ByZTpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy92aWV3cy9TZXF1ZW50aWFsTGF5b3V0XCJdLHM9W10sdT1yLiRldmFsKG8uZmFPcHRpb25zKXx8e307dC5yZW5kZXJOb2RlPW5ldyBpKHUpLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIix0KSx0LnNob3coKTt2YXIgYz1mdW5jdGlvbigpe3Muc29ydChmdW5jdGlvbihlLG4pe3JldHVybiBlLmluZGV4LW4uaW5kZXh9KSx0LnJlbmRlck5vZGUuc2VxdWVuY2VGcm9tKGZ1bmN0aW9uKGUpe3ZhciBuPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2goZSxmdW5jdGlvbihlLHIpe25bcl09ZS5yZW5kZXJHYXRlfSksbn0ocykpfTtuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKGUpe3MucHVzaChlKSxjKCl9LGZ1bmN0aW9uKGUpe3M9ZnVuY3Rpb24obil7dmFyIHI9W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChuLGZ1bmN0aW9uKG4pe24uaWQhPT1lJiZyLnB1c2gobil9KSxyfShzKSxjKCl9KX0scG9zdDpmdW5jdGlvbihlLHIpe3ZhciBhPW4uZW5zdXJlSXNvbGF0ZShlKTtvKGUsZnVuY3Rpb24oZSl7ci5maW5kKFwiZGl2XCIpLmFwcGVuZChlKX0pLG4ucmVnaXN0ZXJDaGlsZChlLHIsYSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFTdXJmYWNlXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLFwiJGludGVycG9sYXRlXCIsXCIkY29udHJvbGxlclwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihlLG4pe3JldHVybntzY29wZTohMCx0cmFuc2NsdWRlOiEwLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwiZmEtc3VyZmFjZVwiPjwvZGl2PicscmVzdHJpY3Q6XCJFQVwiLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe3t2YXIgdD1uLmVuc3VyZUlzb2xhdGUociksaT1lW1wiZmFtb3VzL2NvcmUvU3VyZmFjZVwiXTtlW1wiZmFtb3VzL2NvcmUvVHJhbnNmb3JtXCJdLGVbXCJmYW1vdXMvY29yZS9FdmVudEhhbmRsZXJcIl19ci4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXRQcm9wZXJ0aWVzKCl9LGZ1bmN0aW9uKCl7dC5yZW5kZXJOb2RlJiZ0LnJlbmRlck5vZGUuc2V0UHJvcGVydGllcyh0LmdldFByb3BlcnRpZXMoKSl9LCEwKTt2YXIgcz1mdW5jdGlvbihlKXtyZXR1cm5cImZhXCIrZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnNsaWNlKDEpfTt0LmdldFByb3BlcnRpZXM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9ci4kZXZhbChvLmZhUHJvcGVydGllcyl8fHt9LG49W1wiYmFja2dyb3VuZENvbG9yXCIsXCJtYXJnaW5cIixcInBhZGRpbmdcIixcImNvbG9yXCIsXCJwb2ludGVyRXZlbnRzXCIsXCJ6SW5kZXhcIl0sYT0wO2E8bi5sZW5ndGg7YSsrKXt2YXIgdD1uW2FdLGk9cyh0KTtvW2ldJiYoZVt0XT1yLiRldmFsKG9baV0pKX1yZXR1cm4gZX07dmFyIHU9W107by4kb2JzZXJ2ZShcImZhU2l6ZVwiLGZ1bmN0aW9uKCl7dC5yZW5kZXJOb2RlLnNldFNpemUoci4kZXZhbChvLmZhU2l6ZSkpLHUucHVzaChuZXcgRGF0ZSksdS5sZW5ndGg+NSYmKHVbNF0tdVswXTw9MWUzJiZjb25zb2xlLndhcm4oXCJVc2luZyBmYS1zaXplIG9uIGZhLXN1cmZhY2UgdG8gYW5pbWF0ZSBpcyBzaWduaWZpY2FudGx5IG5vbi1wZXJmb3JtYW50LCBwcmVmZXIgdG8gdXNlIGZhLXNpemUgb24gYW4gZmEtbW9kaWZpZXIgc3Vycm91bmRpbmcgYSBmYS1zdXJmYWNlXCIpLHUuc2hpZnQoKSl9KSx0LnJlbmRlck5vZGU9bmV3IGkoe3NpemU6ci4kZXZhbChvLmZhU2l6ZSkscHJvcGVydGllczp0LmdldFByb3BlcnRpZXMoKX0pLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIix0KSx0LnNob3coKSxvLmNsYXNzJiZ0LnJlbmRlck5vZGUuc2V0Q2xhc3NlcyhvW1wiY2xhc3NcIl0uc3BsaXQoXCIgXCIpKSxuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiU3VyZmFjZXMgYXJlIGxlYWYgbm9kZXMgb2YgdGhlIEZhbW8udXMgcmVuZGVyIHRyZWUgYW5kIGNhbm5vdCBhY2NlcHQgcmVuZGVybm9kZSBjaGlsZHJlbi4gIFRvIGluY2x1ZGUgYWRkaXRpb25hbCBGYW1vLnVzIGNvbnRlbnQgaW5zaWRlIG9mIGEgZmEtc3VyZmFjZSwgdGhhdCBjb250ZW50IG11c3QgYmUgZW5jbG9zZWQgaW4gYW4gYWRkaXRpb25hbCBmYS1hcHAuXCIpfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSksdD1mdW5jdGlvbigpe2EucmVuZGVyTm9kZS5zZXRDb250ZW50KHJbMF0ucXVlcnlTZWxlY3RvcihcImRpdi5mYS1zdXJmYWNlXCIpKX07dCgpLG8oZSxmdW5jdGlvbihlKXthbmd1bGFyLmVsZW1lbnQoclswXS5xdWVyeVNlbGVjdG9yQWxsKFwiZGl2LmZhLXN1cmZhY2VcIikpLmFwcGVuZChlKX0pLG4ucmVnaXN0ZXJDaGlsZChlLHIsYSxmdW5jdGlvbigpe30pfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhVGFwXCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUocik7aWYoby5mYVRhcCl7dmFyIGk9dC5yZW5kZXJOb2RlLl9ldmVudElucHV0fHx0LnJlbmRlck5vZGUscz0hMTtpLm9uKFwidG91Y2htb3ZlXCIsZnVuY3Rpb24oZSl7cmV0dXJuIHM9ITAsZX0pLGkub24oXCJ0YXBcIixmdW5jdGlvbihuKXtpZighcyl7dmFyIGE9ZShvLmZhVGFwKTthKHIseyRldmVudDpufSksci4kJHBoYXNlfHxyLiRhcHBseSgpfXM9ITF9KX19fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFUb3VjaGVuZFwiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpO2lmKG8uZmFUb3VjaGVuZCl7dmFyIGk9dC5yZW5kZXJOb2RlLl9ldmVudElucHV0fHx0LnJlbmRlck5vZGU7aS5vbihcInRvdWNoZW5kXCIsZnVuY3Rpb24obil7dmFyIGE9ZShvLmZhVG91Y2hlbmQpO2Eocix7JGV2ZW50Om59KSxyLiQkcGhhc2V8fHIuJGFwcGx5KCl9KX19fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFUb3VjaG1vdmVcIixbXCIkcGFyc2VcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKTtpZihvLmZhVG91Y2htb3ZlKXt2YXIgaT10LnJlbmRlck5vZGUuX2V2ZW50SW5wdXR8fHQucmVuZGVyTm9kZTtpLm9uKFwidG91Y2htb3ZlXCIsZnVuY3Rpb24obil7dmFyIGE9ZShvLmZhVG91Y2htb3ZlKTthKHIseyRldmVudDpufSksci4kJHBoYXNlfHxyLiRhcHBseSgpfSl9fX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhVG91Y2hzdGFydFwiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpO2lmKG8uZmFUb3VjaHN0YXJ0KXt2YXIgaT10LnJlbmRlck5vZGUuX2V2ZW50SW5wdXR8fHQucmVuZGVyTm9kZTtpLm9uKFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKG4pe3ZhciBhPWUoby5mYVRvdWNoc3RhcnQpO2Eocix7JGV2ZW50Om59KSxyLiQkcGhhc2V8fHIuJGFwcGx5KCl9KX19fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFWaWRlb1N1cmZhY2VcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57c2NvcGU6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cImZhLXZpZGVvLXN1cmZhY2VcIj48L2Rpdj4nLHJlc3RyaWN0OlwiRUFcIixjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy9zdXJmYWNlcy9WaWRlb1N1cmZhY2VcIl07ci4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gci4kZXZhbChvLmZhT3B0aW9ucyl9LGZ1bmN0aW9uKGUsbil7dC5yZW5kZXJOb2RlLnNldE9wdGlvbnMobil9LCEwKSx0LnJlbmRlck5vZGU9bmV3IGkoe1wiY2xhc3NcIjpyLiRldmFsKG8uY2xhc3MpfSksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpLG8uY2xhc3MmJnQucmVuZGVyTm9kZS5zZXRDbGFzc2VzKG9bXCJjbGFzc1wiXS5zcGxpdChcIiBcIikpLG4uc2VxdWVuY2VXaXRoKHIsZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJTdXJmYWNlcyBhcmUgbGVhZiBub2RlcyBvZiB0aGUgRmFtby51cyByZW5kZXIgdHJlZSBhbmQgY2Fubm90IGFjY2VwdCByZW5kZXJub2RlIGNoaWxkcmVuLiAgVG8gaW5jbHVkZSBhZGRpdGlvbmFsIEZhbW8udXMgY29udGVudCBpbnNpZGUgb2YgYSBmYS1zdXJmYWNlLCB0aGF0IGNvbnRlbnQgbXVzdCBiZSBlbmNsb3NlZCBpbiBhbiBhZGRpdGlvbmFsIGZhLWFwcC5cIil9KX0scG9zdDpmdW5jdGlvbihlLHIsYSl7dmFyIG89bi5lbnN1cmVJc29sYXRlKGUpLHQ9ZnVuY3Rpb24oKXtvLnJlbmRlck5vZGUuc2V0Q29udGVudChhLmZhVmlkZW9VcmwpfTt0KCksYS4kb2JzZXJ2ZShcImZhVmlkZW9VcmxcIix0KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLG8pfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhVmlld1wiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybnt0ZW1wbGF0ZTpcIjxkaXY+PC9kaXY+XCIsdHJhbnNjbHVkZTohMCxzY29wZTohMCxyZXN0cmljdDpcIkVBXCIsY29tcGlsZTpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9ZVtcImZhbW91cy9jb3JlL1ZpZXdcIl07cmV0dXJue3ByZTpmdW5jdGlvbihlLHIsYSl7dmFyIG89bi5lbnN1cmVJc29sYXRlKGUpO28uY2hpbGRyZW49W10sby5yZW5kZXJOb2RlPW5ldyB0KHtzaXplOmUuJGV2YWwoYS5mYVNpemUpfHxbdm9pZCAwLHZvaWQgMF19KSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIsbyksby5zaG93KCksbi5zZXF1ZW5jZVdpdGgoZSxmdW5jdGlvbihlKXtvLnJlbmRlck5vZGUuYWRkKGUucmVuZGVyR2F0ZSksby5jaGlsZHJlbi5wdXNoKGUpfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSk7byhlLGZ1bmN0aW9uKGUpe3IuZmluZChcImRpdlwiKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEpfX19fX1dKTtcbn0pLmNhbGwoZ2xvYmFsLCBtb2R1bGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIiwiKGZ1bmN0aW9uIChnbG9iYWwpe1xuO19fYnJvd3NlcmlmeV9zaGltX3JlcXVpcmVfXz1yZXF1aXJlOyhmdW5jdGlvbiBicm93c2VyaWZ5U2hpbShtb2R1bGUsIGV4cG9ydHMsIHJlcXVpcmUsIGRlZmluZSwgYnJvd3NlcmlmeV9zaGltX19kZWZpbmVfX21vZHVsZV9fZXhwb3J0X18pIHtcbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKlxuICogQGNvcHlyaWdodCBGYW1vdXMgSW5kdXN0cmllcywgSW5jLiAyMDE0XG4gKi9cbiFmdW5jdGlvbih0KXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz10KCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLHQpO2Vsc2V7dmFyIGk7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz9pPXdpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2k9Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYoaT1zZWxmKSxpLmZhbW91cz10KCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiB0KGksZSxuKXtmdW5jdGlvbiBvKHIsYSl7aWYoIWVbcl0pe2lmKCFpW3JdKXt2YXIgaD1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFhJiZoKXJldHVybiBoKHIsITApO2lmKHMpcmV0dXJuIHMociwhMCk7dmFyIGM9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIityK1wiJ1wiKTt0aHJvdyBjLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsY312YXIgcD1lW3JdPXtleHBvcnRzOnt9fTtpW3JdWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHQpe3ZhciBlPWlbcl1bMV1bdF07cmV0dXJuIG8oZT9lOnQpfSxwLHAuZXhwb3J0cyx0LGksZSxuKX1yZXR1cm4gZVtyXS5leHBvcnRzfWZvcih2YXIgcz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHI9MDtyPG4ubGVuZ3RoO3IrKylvKG5bcl0pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3JldHVyblt0LmNsaWVudFdpZHRoLHQuY2xpZW50SGVpZ2h0XX1mdW5jdGlvbiBuKHQpe3RoaXMuY29udGFpbmVyPXQsdGhpcy5fYWxsb2NhdG9yPW5ldyByKHQpLHRoaXMuX25vZGU9bmV3IG8sdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IHMsdGhpcy5fc2l6ZT1lKHRoaXMuY29udGFpbmVyKSx0aGlzLl9wZXJzcGVjdGl2ZVN0YXRlPW5ldyBoKDApLHRoaXMuX3BlcnNwZWN0aXZlPXZvaWQgMCx0aGlzLl9ub2RlQ29udGV4dD17YWxsb2NhdG9yOnRoaXMuX2FsbG9jYXRvcix0cmFuc2Zvcm06YS5pZGVudGl0eSxvcGFjaXR5OjEsb3JpZ2luOmMsYWxpZ246YyxzaXplOnRoaXMuX3NpemV9LHRoaXMuX2V2ZW50T3V0cHV0Lm9uKFwicmVzaXplXCIsZnVuY3Rpb24oKXt0aGlzLnNldFNpemUoZSh0aGlzLmNvbnRhaW5lcikpfS5iaW5kKHRoaXMpKX12YXIgbz10KFwiLi9SZW5kZXJOb2RlXCIpLHM9dChcIi4vRXZlbnRIYW5kbGVyXCIpLHI9dChcIi4vRWxlbWVudEFsbG9jYXRvclwiKSxhPXQoXCIuL1RyYW5zZm9ybVwiKSxoPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKSxjPVswLDBdLHA9IShcInBlcnNwZWN0aXZlXCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpLHU9cD9mdW5jdGlvbih0LGkpe3Quc3R5bGUud2Via2l0UGVyc3BlY3RpdmU9aT9pLnRvRml4ZWQoKStcInB4XCI6XCJcIn06ZnVuY3Rpb24odCxpKXt0LnN0eWxlLnBlcnNwZWN0aXZlPWk/aS50b0ZpeGVkKCkrXCJweFwiOlwiXCJ9O24ucHJvdG90eXBlLmdldEFsbG9jYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbGxvY2F0b3J9LG4ucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbm9kZS5hZGQodCl9LG4ucHJvdG90eXBlLm1pZ3JhdGU9ZnVuY3Rpb24odCl7dCE9PXRoaXMuY29udGFpbmVyJiYodGhpcy5jb250YWluZXI9dCx0aGlzLl9hbGxvY2F0b3IubWlncmF0ZSh0KSl9LG4ucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2l6ZX0sbi5wcm90b3R5cGUuc2V0U2l6ZT1mdW5jdGlvbih0KXt0fHwodD1lKHRoaXMuY29udGFpbmVyKSksdGhpcy5fc2l6ZVswXT10WzBdLHRoaXMuX3NpemVbMV09dFsxXX0sbi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3QmJih0LnRyYW5zZm9ybSYmKHRoaXMuX25vZGVDb250ZXh0LnRyYW5zZm9ybT10LnRyYW5zZm9ybSksdC5vcGFjaXR5JiYodGhpcy5fbm9kZUNvbnRleHQub3BhY2l0eT10Lm9wYWNpdHkpLHQub3JpZ2luJiYodGhpcy5fbm9kZUNvbnRleHQub3JpZ2luPXQub3JpZ2luKSx0LmFsaWduJiYodGhpcy5fbm9kZUNvbnRleHQuYWxpZ249dC5hbGlnbiksdC5zaXplJiYodGhpcy5fbm9kZUNvbnRleHQuc2l6ZT10LnNpemUpKTt2YXIgaT10aGlzLl9wZXJzcGVjdGl2ZVN0YXRlLmdldCgpO2khPT10aGlzLl9wZXJzcGVjdGl2ZSYmKHUodGhpcy5jb250YWluZXIsaSksdGhpcy5fcGVyc3BlY3RpdmU9aSksdGhpcy5fbm9kZS5jb21taXQodGhpcy5fbm9kZUNvbnRleHQpfSxuLnByb3RvdHlwZS5nZXRQZXJzcGVjdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wZXJzcGVjdGl2ZVN0YXRlLmdldCgpfSxuLnByb3RvdHlwZS5zZXRQZXJzcGVjdGl2ZT1mdW5jdGlvbih0LGksZSl7cmV0dXJuIHRoaXMuX3BlcnNwZWN0aXZlU3RhdGUuc2V0KHQsaSxlKX0sbi5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLl9ldmVudE91dHB1dC5lbWl0KHQsaSl9LG4ucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHRoaXMuX2V2ZW50T3V0cHV0Lm9uKHQsaSl9LG4ucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHRoaXMuX2V2ZW50T3V0cHV0LnJlbW92ZUxpc3RlbmVyKHQsaSl9LG4ucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50T3V0cHV0LnBpcGUodCl9LG4ucHJvdG90eXBlLnVucGlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnRPdXRwdXQudW5waXBlKHQpfSxpLmV4cG9ydHM9bn0se1wiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjo4OCxcIi4vRWxlbWVudEFsbG9jYXRvclwiOjIsXCIuL0V2ZW50SGFuZGxlclwiOjcsXCIuL1JlbmRlck5vZGVcIjoxMSxcIi4vVHJhbnNmb3JtXCI6MTV9XSwyOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dHx8KHQ9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSx0aGlzLmNvbnRhaW5lcj10LHRoaXMuZGV0YWNoZWROb2Rlcz17fSx0aGlzLm5vZGVDb3VudD0wfWUucHJvdG90eXBlLm1pZ3JhdGU9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5jb250YWluZXI7aWYodCE9PWkpe2lmKGkgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXQuYXBwZW5kQ2hpbGQoaSk7ZWxzZSBmb3IoO2kuaGFzQ2hpbGROb2RlcygpOyl0LmFwcGVuZENoaWxkKGkucmVtb3ZlQ2hpbGQoaS5maXJzdENoaWxkKSk7dGhpcy5jb250YWluZXI9dH19LGUucHJvdG90eXBlLmFsbG9jYXRlPWZ1bmN0aW9uKHQpe3Q9dC50b0xvd2VyQ2FzZSgpLHQgaW4gdGhpcy5kZXRhY2hlZE5vZGVzfHwodGhpcy5kZXRhY2hlZE5vZGVzW3RdPVtdKTt2YXIgaSxlPXRoaXMuZGV0YWNoZWROb2Rlc1t0XTtyZXR1cm4gZS5sZW5ndGg+MD9pPWUucG9wKCk6KGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KSx0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChpKSksdGhpcy5ub2RlQ291bnQrKyxpfSxlLnByb3RvdHlwZS5kZWFsbG9jYXRlPWZ1bmN0aW9uKHQpe3ZhciBpPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxlPXRoaXMuZGV0YWNoZWROb2Rlc1tpXTtlLnB1c2godCksdGhpcy5ub2RlQ291bnQtLX0sZS5wcm90b3R5cGUuZ2V0Tm9kZUNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZUNvdW50fSxpLmV4cG9ydHM9ZX0se31dLDM6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl9tYXRyaXg9bnVsbCx0aGlzLl9vcGFjaXR5PTEsdGhpcy5fb3JpZ2luPW51bGwsdGhpcy5fc2l6ZT1udWxsLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBjLHRoaXMuX2V2ZW50T3V0cHV0LmJpbmRUaGlzKHRoaXMpLHRoaXMuZXZlbnRGb3J3YXJkZXI9ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnRPdXRwdXQuZW1pdCh0LnR5cGUsdCl9LmJpbmQodGhpcyksdGhpcy5pZD1oLnJlZ2lzdGVyKHRoaXMpLHRoaXMuX2VsZW1lbnQ9bnVsbCx0aGlzLl9zaXplRGlydHk9ITEsdGhpcy5fb3JpZ2luRGlydHk9ITEsdGhpcy5fdHJhbnNmb3JtRGlydHk9ITEsdGhpcy5faW52aXNpYmxlPSExLHQmJnRoaXMuYXR0YWNoKHQpfWZ1bmN0aW9uIG4odCl7Zm9yKHZhciBpIGluIHRoaXMuX2V2ZW50T3V0cHV0Lmxpc3RlbmVycyl0LmFkZEV2ZW50TGlzdGVuZXIoaSx0aGlzLmV2ZW50Rm9yd2FyZGVyKX1mdW5jdGlvbiBvKHQpe2Zvcih2YXIgaSBpbiB0aGlzLl9ldmVudE91dHB1dC5saXN0ZW5lcnMpdC5yZW1vdmVFdmVudExpc3RlbmVyKGksdGhpcy5ldmVudEZvcndhcmRlcil9ZnVuY3Rpb24gcyh0KXt0WzEyXT1NYXRoLnJvdW5kKHRbMTJdKmwpL2wsdFsxM109TWF0aC5yb3VuZCh0WzEzXSpsKS9sO2Zvcih2YXIgaT1cIm1hdHJpeDNkKFwiLGU9MDsxNT5lO2UrKylpKz10W2VdPDFlLTYmJnRbZV0+LTFlLTY/XCIwLFwiOnRbZV0rXCIsXCI7cmV0dXJuIGkrPXRbMTVdK1wiKVwifWZ1bmN0aW9uIHIodCl7cmV0dXJuIDEwMCp0WzBdK1wiJSBcIisxMDAqdFsxXStcIiVcIn1mdW5jdGlvbiBhKHQsaSl7cmV0dXJuIHQmJmk/dFswXSE9PWlbMF18fHRbMV0hPT1pWzFdOnQhPT1pfXZhciBoPXQoXCIuL0VudGl0eVwiKSxjPXQoXCIuL0V2ZW50SGFuZGxlclwiKSxwPXQoXCIuL1RyYW5zZm9ybVwiKSx1PSEoXCJ0cmFuc2Zvcm1cImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSksbD13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8MTtlLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGkpe3RoaXMuX2VsZW1lbnQmJnRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0LHRoaXMuZXZlbnRGb3J3YXJkZXIpLHRoaXMuX2V2ZW50T3V0cHV0Lm9uKHQsaSl9LGUucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHQsaSl7dGhpcy5fZXZlbnRPdXRwdXQucmVtb3ZlTGlzdGVuZXIodCxpKX0sZS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0LGkpe2kmJiFpLm9yaWdpbiYmKGkub3JpZ2luPXRoaXMpO3ZhciBlPXRoaXMuX2V2ZW50T3V0cHV0LmVtaXQodCxpKTtyZXR1cm4gZSYmaSYmaS5zdG9wUHJvcGFnYXRpb24mJmkuc3RvcFByb3BhZ2F0aW9uKCksZX0sZS5wcm90b3R5cGUucGlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnRPdXRwdXQucGlwZSh0KX0sZS5wcm90b3R5cGUudW5waXBlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudE91dHB1dC51bnBpcGUodCl9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfTt2YXIgZjtmPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKT4tMT9mdW5jdGlvbih0LGkpe3Quc3R5bGUuekluZGV4PTFlNippWzE0XXwwLHQuc3R5bGUudHJhbnNmb3JtPXMoaSl9OnU/ZnVuY3Rpb24odCxpKXt0LnN0eWxlLndlYmtpdFRyYW5zZm9ybT1zKGkpfTpmdW5jdGlvbih0LGkpe3Quc3R5bGUudHJhbnNmb3JtPXMoaSl9O3ZhciBkPXU/ZnVuY3Rpb24odCxpKXt0LnN0eWxlLndlYmtpdFRyYW5zZm9ybU9yaWdpbj1yKGkpfTpmdW5jdGlvbih0LGkpe3Quc3R5bGUudHJhbnNmb3JtT3JpZ2luPXIoaSl9LF89dT9mdW5jdGlvbih0KXt0LnN0eWxlLndlYmtpdFRyYW5zZm9ybT1cInNjYWxlM2QoMC4wMDAxLDAuMDAwMSwwLjAwMDEpXCIsdC5zdHlsZS5vcGFjaXR5PTB9OmZ1bmN0aW9uKHQpe3Quc3R5bGUudHJhbnNmb3JtPVwic2NhbGUzZCgwLjAwMDEsMC4wMDAxLDAuMDAwMSlcIix0LnN0eWxlLm9wYWNpdHk9MH07ZS5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX2VsZW1lbnQ7aWYoaSl7e3ZhciBlPXQudHJhbnNmb3JtLG49dC5vcGFjaXR5LG89dC5vcmlnaW47dC5zaXplfWlmKCFlJiZ0aGlzLl9tYXRyaXgpcmV0dXJuIHRoaXMuX21hdHJpeD1udWxsLHRoaXMuX29wYWNpdHk9MCx2b2lkIF8oaSk7aWYoYSh0aGlzLl9vcmlnaW4sbykmJih0aGlzLl9vcmlnaW5EaXJ0eT0hMCkscC5ub3RFcXVhbHModGhpcy5fbWF0cml4LGUpJiYodGhpcy5fdHJhbnNmb3JtRGlydHk9ITApLHRoaXMuX2ludmlzaWJsZSYmKHRoaXMuX2ludmlzaWJsZT0hMSx0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJcIiksdGhpcy5fb3BhY2l0eSE9PW4mJih0aGlzLl9vcGFjaXR5PW4saS5zdHlsZS5vcGFjaXR5PW4+PTE/XCIwLjk5OTk5OVwiOm4pLHRoaXMuX3RyYW5zZm9ybURpcnR5fHx0aGlzLl9vcmlnaW5EaXJ0eXx8dGhpcy5fc2l6ZURpcnR5KXt0aGlzLl9zaXplRGlydHkmJih0aGlzLl9zaXplRGlydHk9ITEpLHRoaXMuX29yaWdpbkRpcnR5JiYobz8odGhpcy5fb3JpZ2lufHwodGhpcy5fb3JpZ2luPVswLDBdKSx0aGlzLl9vcmlnaW5bMF09b1swXSx0aGlzLl9vcmlnaW5bMV09b1sxXSk6dGhpcy5fb3JpZ2luPW51bGwsZChpLHRoaXMuX29yaWdpbiksdGhpcy5fb3JpZ2luRGlydHk9ITEpLGV8fChlPXAuaWRlbnRpdHkpLHRoaXMuX21hdHJpeD1lO3ZhciBzPXRoaXMuX3NpemU/cC50aGVuTW92ZShlLFstdGhpcy5fc2l6ZVswXSpvWzBdLC10aGlzLl9zaXplWzFdKm9bMV0sMF0pOmU7ZihpLHMpLHRoaXMuX3RyYW5zZm9ybURpcnR5PSExfX19LGUucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50JiYodGhpcy5faW52aXNpYmxlPSEwLHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIil9LGUucHJvdG90eXBlLmF0dGFjaD1mdW5jdGlvbih0KXt0aGlzLl9lbGVtZW50PXQsbi5jYWxsKHRoaXMsdCl9LGUucHJvdG90eXBlLmRldGFjaD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2VsZW1lbnQ7cmV0dXJuIHQmJihvLmNhbGwodGhpcyx0KSx0aGlzLl9pbnZpc2libGUmJih0aGlzLl9pbnZpc2libGU9ITEsdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwiXCIpKSx0aGlzLl9lbGVtZW50PW51bGwsdH0saS5leHBvcnRzPWV9LHtcIi4vRW50aXR5XCI6NSxcIi4vRXZlbnRIYW5kbGVyXCI6NyxcIi4vVHJhbnNmb3JtXCI6MTV9XSw0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUoKXt2LnJ1bkxvb3A/KHAuc3RlcCgpLHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZSkpOl89ITF9ZnVuY3Rpb24gbigpe2Zvcih2YXIgdD0wO3Q8dS5sZW5ndGg7dCsrKXVbdF0uZW1pdChcInJlc2l6ZVwiKTtnLmVtaXQoXCJyZXNpemVcIil9ZnVuY3Rpb24gbygpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpfSwhMCksZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiZmFtb3VzLXJvb3RcIiksZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmYW1vdXMtcm9vdFwiKX12YXIgcyxyLGE9dChcIi4vQ29udGV4dFwiKSxoPXQoXCIuL0V2ZW50SGFuZGxlclwiKSxjPXQoXCIuL09wdGlvbnNNYW5hZ2VyXCIpLHA9e30sdT1bXSxsPVtdLGY9W10sZD1EYXRlLm5vdygpLF89ITAseT17fSxnPW5ldyBoLHY9e2NvbnRhaW5lclR5cGU6XCJkaXZcIixjb250YWluZXJDbGFzczpcImZhbW91cy1jb250YWluZXJcIixmcHNDYXA6dm9pZCAwLHJ1bkxvb3A6ITAsYXBwTW9kZTohMH0sbT1uZXcgYyh2KSxPPTEwO3Auc3RlcD1mdW5jdGlvbigpe3ZhciB0PURhdGUubm93KCk7aWYoIShyJiZyPnQtZCkpe3ZhciBpPTA7Zm9yKHM9dC1kLGQ9dCxnLmVtaXQoXCJwcmVyZW5kZXJcIiksaT0wO2k8bC5sZW5ndGg7aSsrKWxbaV0uY2FsbCh0aGlzKTtmb3IobC5zcGxpY2UoMCk7Zi5sZW5ndGgmJkRhdGUubm93KCktdDxPOylmLnNoaWZ0KCkuY2FsbCh0aGlzKTtmb3IoaT0wO2k8dS5sZW5ndGg7aSsrKXVbaV0udXBkYXRlKCk7Zy5lbWl0KFwicG9zdHJlbmRlclwiKX19LHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixuLCExKSxuKCk7dmFyIFM9ITE7cC5waXBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnN1YnNjcmliZSBpbnN0YW5jZW9mIEZ1bmN0aW9uP3Quc3Vic2NyaWJlKHApOmcucGlwZSh0KX0scC51bnBpcGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudW5zdWJzY3JpYmUgaW5zdGFuY2VvZiBGdW5jdGlvbj90LnVuc3Vic2NyaWJlKHApOmcudW5waXBlKHQpfSxwLm9uPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQgaW4geXx8KHlbdF09Zy5lbWl0LmJpbmQoZyx0KSxkb2N1bWVudC5ib2R5P2RvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcih0LHlbdF0pOnAubmV4dFRpY2soZnVuY3Rpb24odCxpKXtkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIodCxpKX0uYmluZCh0aGlzLHQseVt0XSkpKSxnLm9uKHQsaSl9LHAuZW1pdD1mdW5jdGlvbih0LGkpe3JldHVybiBnLmVtaXQodCxpKX0scC5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGkpe3JldHVybiBnLnJlbW92ZUxpc3RlbmVyKHQsaSl9LHAuZ2V0RlBTPWZ1bmN0aW9uKCl7cmV0dXJuIDFlMy9zfSxwLnNldEZQU0NhcD1mdW5jdGlvbih0KXtyPU1hdGguZmxvb3IoMWUzL3QpfSxwLmdldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIG0uZ2V0T3B0aW9ucyh0KX0scC5zZXRPcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIG0uc2V0T3B0aW9ucy5hcHBseShtLGFyZ3VtZW50cyl9LHAuY3JlYXRlQ29udGV4dD1mdW5jdGlvbih0KXshUyYmdi5hcHBNb2RlJiZwLm5leHRUaWNrKG8pO3ZhciBpPSExO3R8fCh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodi5jb250YWluZXJUeXBlKSx0LmNsYXNzTGlzdC5hZGQodi5jb250YWluZXJDbGFzcyksaT0hMCk7dmFyIGU9bmV3IGEodCk7cmV0dXJuIHAucmVnaXN0ZXJDb250ZXh0KGUpLGkmJnAubmV4dFRpY2soZnVuY3Rpb24odCxpKXtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGkpLHQuZW1pdChcInJlc2l6ZVwiKX0uYmluZCh0aGlzLGUsdCkpLGV9LHAucmVnaXN0ZXJDb250ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB1LnB1c2godCksdH0scC5nZXRDb250ZXh0cz1mdW5jdGlvbigpe3JldHVybiB1fSxwLmRlcmVnaXN0ZXJDb250ZXh0PWZ1bmN0aW9uKHQpe3ZhciBpPXUuaW5kZXhPZih0KTtpPj0wJiZ1LnNwbGljZShpLDEpfSxwLm5leHRUaWNrPWZ1bmN0aW9uKHQpe2wucHVzaCh0KX0scC5kZWZlcj1mdW5jdGlvbih0KXtmLnB1c2godCl9LG0ub24oXCJjaGFuZ2VcIixmdW5jdGlvbih0KXtcImZwc0NhcFwiPT09dC5pZD9wLnNldEZQU0NhcCh0LnZhbHVlKTpcInJ1bkxvb3BcIj09PXQuaWQmJiFfJiZ0LnZhbHVlJiYoXz0hMCx3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpKX0pLGkuZXhwb3J0cz1wfSx7XCIuL0NvbnRleHRcIjoxLFwiLi9FdmVudEhhbmRsZXJcIjo3LFwiLi9PcHRpb25zTWFuYWdlclwiOjEwfV0sNTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3JldHVybiByW3RdfWZ1bmN0aW9uIG4odCxpKXtyW3RdPWl9ZnVuY3Rpb24gbyh0KXt2YXIgaT1yLmxlbmd0aDtyZXR1cm4gbihpLHQpLGl9ZnVuY3Rpb24gcyh0KXtuKHQsbnVsbCl9dmFyIHI9W107aS5leHBvcnRzPXtyZWdpc3RlcjpvLHVucmVnaXN0ZXI6cyxnZXQ6ZSxzZXQ6bn19LHt9XSw2OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUoKXt0aGlzLmxpc3RlbmVycz17fSx0aGlzLl9vd25lcj10aGlzfWUucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxpKXt2YXIgZT10aGlzLmxpc3RlbmVyc1t0XTtpZihlKWZvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWVbbl0uY2FsbCh0aGlzLl9vd25lcixpKTtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUub249ZnVuY3Rpb24odCxpKXt0IGluIHRoaXMubGlzdGVuZXJzfHwodGhpcy5saXN0ZW5lcnNbdF09W10pO3ZhciBlPXRoaXMubGlzdGVuZXJzW3RdLmluZGV4T2YoaSk7cmV0dXJuIDA+ZSYmdGhpcy5saXN0ZW5lcnNbdF0ucHVzaChpKSx0aGlzfSxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1lLnByb3RvdHlwZS5vbixlLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMubGlzdGVuZXJzW3RdO2lmKHZvaWQgMCE9PWUpe3ZhciBuPWUuaW5kZXhPZihpKTtuPj0wJiZlLnNwbGljZShuLDEpfXJldHVybiB0aGlzfSxlLnByb3RvdHlwZS5iaW5kVGhpcz1mdW5jdGlvbih0KXt0aGlzLl9vd25lcj10fSxpLmV4cG9ydHM9ZX0se31dLDc6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe24uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuZG93bnN0cmVhbT1bXSx0aGlzLmRvd25zdHJlYW1Gbj1bXSx0aGlzLnVwc3RyZWFtPVtdLHRoaXMudXBzdHJlYW1MaXN0ZW5lcnM9e319dmFyIG49dChcIi4vRXZlbnRFbWl0dGVyXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5zZXRJbnB1dEhhbmRsZXI9ZnVuY3Rpb24odCxpKXt0LnRyaWdnZXI9aS50cmlnZ2VyLmJpbmQoaSksaS5zdWJzY3JpYmUmJmkudW5zdWJzY3JpYmUmJih0LnN1YnNjcmliZT1pLnN1YnNjcmliZS5iaW5kKGkpLHQudW5zdWJzY3JpYmU9aS51bnN1YnNjcmliZS5iaW5kKGkpKX0sZS5zZXRPdXRwdXRIYW5kbGVyPWZ1bmN0aW9uKHQsaSl7aSBpbnN0YW5jZW9mIGUmJmkuYmluZFRoaXModCksdC5waXBlPWkucGlwZS5iaW5kKGkpLHQudW5waXBlPWkudW5waXBlLmJpbmQoaSksdC5vbj1pLm9uLmJpbmQoaSksdC5hZGRMaXN0ZW5lcj10Lm9uLHQucmVtb3ZlTGlzdGVuZXI9aS5yZW1vdmVMaXN0ZW5lci5iaW5kKGkpfSxlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsaSl7bi5wcm90b3R5cGUuZW1pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGU9MDtmb3IoZT0wO2U8dGhpcy5kb3duc3RyZWFtLmxlbmd0aDtlKyspdGhpcy5kb3duc3RyZWFtW2VdLnRyaWdnZXImJnRoaXMuZG93bnN0cmVhbVtlXS50cmlnZ2VyKHQsaSk7Zm9yKGU9MDtlPHRoaXMuZG93bnN0cmVhbUZuLmxlbmd0aDtlKyspdGhpcy5kb3duc3RyZWFtRm5bZV0odCxpKTtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUudHJpZ2dlcj1lLnByb3RvdHlwZS5lbWl0LGUucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24odCl7aWYodC5zdWJzY3JpYmUgaW5zdGFuY2VvZiBGdW5jdGlvbilyZXR1cm4gdC5zdWJzY3JpYmUodGhpcyk7dmFyIGk9dCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMuZG93bnN0cmVhbUZuOnRoaXMuZG93bnN0cmVhbSxlPWkuaW5kZXhPZih0KTtyZXR1cm4gMD5lJiZpLnB1c2godCksdCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3QoXCJwaXBlXCIsbnVsbCk6dC50cmlnZ2VyJiZ0LnRyaWdnZXIoXCJwaXBlXCIsbnVsbCksdH0sZS5wcm90b3R5cGUudW5waXBlPWZ1bmN0aW9uKHQpe2lmKHQudW5zdWJzY3JpYmUgaW5zdGFuY2VvZiBGdW5jdGlvbilyZXR1cm4gdC51bnN1YnNjcmliZSh0aGlzKTt2YXIgaT10IGluc3RhbmNlb2YgRnVuY3Rpb24/dGhpcy5kb3duc3RyZWFtRm46dGhpcy5kb3duc3RyZWFtLGU9aS5pbmRleE9mKHQpO3JldHVybiBlPj0wPyhpLnNwbGljZShlLDEpLHQgaW5zdGFuY2VvZiBGdW5jdGlvbj90KFwidW5waXBlXCIsbnVsbCk6dC50cmlnZ2VyJiZ0LnRyaWdnZXIoXCJ1bnBpcGVcIixudWxsKSx0KTohMX0sZS5wcm90b3R5cGUub249ZnVuY3Rpb24odCl7aWYobi5wcm90b3R5cGUub24uYXBwbHkodGhpcyxhcmd1bWVudHMpLCEodCBpbiB0aGlzLnVwc3RyZWFtTGlzdGVuZXJzKSl7dmFyIGk9dGhpcy50cmlnZ2VyLmJpbmQodGhpcyx0KTt0aGlzLnVwc3RyZWFtTGlzdGVuZXJzW3RdPWk7Zm9yKHZhciBlPTA7ZTx0aGlzLnVwc3RyZWFtLmxlbmd0aDtlKyspdGhpcy51cHN0cmVhbVtlXS5vbih0LGkpfXJldHVybiB0aGlzfSxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1lLnByb3RvdHlwZS5vbixlLnByb3RvdHlwZS5zdWJzY3JpYmU9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy51cHN0cmVhbS5pbmRleE9mKHQpO2lmKDA+aSl7dGhpcy51cHN0cmVhbS5wdXNoKHQpO2Zvcih2YXIgZSBpbiB0aGlzLnVwc3RyZWFtTGlzdGVuZXJzKXQub24oZSx0aGlzLnVwc3RyZWFtTGlzdGVuZXJzW2VdKX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy51cHN0cmVhbS5pbmRleE9mKHQpO2lmKGk+PTApe3RoaXMudXBzdHJlYW0uc3BsaWNlKGksMSk7Zm9yKHZhciBlIGluIHRoaXMudXBzdHJlYW1MaXN0ZW5lcnMpdC5yZW1vdmVMaXN0ZW5lcihlLHRoaXMudXBzdHJlYW1MaXN0ZW5lcnNbZV0pfXJldHVybiB0aGlzfSxpLmV4cG9ydHM9ZX0se1wiLi9FdmVudEVtaXR0ZXJcIjo2fV0sODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3MuY2FsbCh0aGlzLHQpLHRoaXMuX3Nob3VsZFJlY2FsY3VsYXRlU2l6ZT0hMSx0aGlzLl9jb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHRoaXMuY29udGV4dD1uZXcgbih0aGlzLl9jb250YWluZXIpLHRoaXMuc2V0Q29udGVudCh0aGlzLl9jb250YWluZXIpLHRoaXMuX2dyb3VwU2l6ZT1bdm9pZCAwLHZvaWQgMF19dmFyIG49dChcIi4vQ29udGV4dFwiKSxvPXQoXCIuL1RyYW5zZm9ybVwiKSxzPXQoXCIuL1N1cmZhY2VcIik7ZS5TSVpFX1pFUk89WzAsMF0sZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzLnByb3RvdHlwZSksZS5wcm90b3R5cGUuZWxlbWVudFR5cGU9XCJkaXZcIixlLnByb3RvdHlwZS5lbGVtZW50Q2xhc3M9XCJmYW1vdXMtZ3JvdXBcIixlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmFkZC5hcHBseSh0aGlzLmNvbnRleHQsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHMucHJvdG90eXBlLnJlbmRlci5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5kZXBsb3k9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0Lm1pZ3JhdGUodCl9LGUucHJvdG90eXBlLnJlY2FsbD1mdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdGhpcy5jb250ZXh0Lm1pZ3JhdGUodGhpcy5fY29udGFpbmVyKX0sZS5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKHQpe3ZhciBpPXQudHJhbnNmb3JtLG49dC5vcmlnaW4scj10Lm9wYWNpdHksYT10LnNpemUsaD1zLnByb3RvdHlwZS5jb21taXQuY2FsbCh0aGlzLHthbGxvY2F0b3I6dC5hbGxvY2F0b3IsdHJhbnNmb3JtOm8udGhlbk1vdmUoaSxbLW5bMF0qYVswXSwtblsxXSphWzFdLDBdKSxvcGFjaXR5OnIsb3JpZ2luOm4sc2l6ZTplLlNJWkVfWkVST30pO3JldHVybihhWzBdIT09dGhpcy5fZ3JvdXBTaXplWzBdfHxhWzFdIT09dGhpcy5fZ3JvdXBTaXplWzFdKSYmKHRoaXMuX2dyb3VwU2l6ZVswXT1hWzBdLHRoaXMuX2dyb3VwU2l6ZVsxXT1hWzFdLHRoaXMuY29udGV4dC5zZXRTaXplKGEpKSx0aGlzLmNvbnRleHQudXBkYXRlKHt0cmFuc2Zvcm06by50cmFuc2xhdGUoLW5bMF0qYVswXSwtblsxXSphWzFdLDApLG9yaWdpbjpuLHNpemU6YX0pLGh9LGkuZXhwb3J0cz1lfSx7XCIuL0NvbnRleHRcIjoxLFwiLi9TdXJmYWNlXCI6MTQsXCIuL1RyYW5zZm9ybVwiOjE1fV0sOTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuX3RyYW5zZm9ybUdldHRlcj1udWxsLHRoaXMuX29wYWNpdHlHZXR0ZXI9bnVsbCx0aGlzLl9vcmlnaW5HZXR0ZXI9bnVsbCx0aGlzLl9hbGlnbkdldHRlcj1udWxsLHRoaXMuX3NpemVHZXR0ZXI9bnVsbCx0aGlzLl9wcm9wb3J0aW9uR2V0dGVyPW51bGwsdGhpcy5fbGVnYWN5U3RhdGVzPXt9LHRoaXMuX291dHB1dD17dHJhbnNmb3JtOm8uaWRlbnRpdHksb3BhY2l0eToxLG9yaWdpbjpudWxsLGFsaWduOm51bGwsc2l6ZTpudWxsLHByb3BvcnRpb25zOm51bGwsdGFyZ2V0Om51bGx9LHQmJih0LnRyYW5zZm9ybSYmdGhpcy50cmFuc2Zvcm1Gcm9tKHQudHJhbnNmb3JtKSx2b2lkIDAhPT10Lm9wYWNpdHkmJnRoaXMub3BhY2l0eUZyb20odC5vcGFjaXR5KSx0Lm9yaWdpbiYmdGhpcy5vcmlnaW5Gcm9tKHQub3JpZ2luKSx0LmFsaWduJiZ0aGlzLmFsaWduRnJvbSh0LmFsaWduKSx0LnNpemUmJnRoaXMuc2l6ZUZyb20odC5zaXplKSx0LnByb3BvcnRpb25zJiZ0aGlzLnByb3BvcnRpb25zRnJvbSh0LnByb3BvcnRpb25zKSl9ZnVuY3Rpb24gbigpe3RoaXMuX3RyYW5zZm9ybUdldHRlciYmKHRoaXMuX291dHB1dC50cmFuc2Zvcm09dGhpcy5fdHJhbnNmb3JtR2V0dGVyKCkpLHRoaXMuX29wYWNpdHlHZXR0ZXImJih0aGlzLl9vdXRwdXQub3BhY2l0eT10aGlzLl9vcGFjaXR5R2V0dGVyKCkpLHRoaXMuX29yaWdpbkdldHRlciYmKHRoaXMuX291dHB1dC5vcmlnaW49dGhpcy5fb3JpZ2luR2V0dGVyKCkpLHRoaXMuX2FsaWduR2V0dGVyJiYodGhpcy5fb3V0cHV0LmFsaWduPXRoaXMuX2FsaWduR2V0dGVyKCkpLHRoaXMuX3NpemVHZXR0ZXImJih0aGlzLl9vdXRwdXQuc2l6ZT10aGlzLl9zaXplR2V0dGVyKCkpLHRoaXMuX3Byb3BvcnRpb25HZXR0ZXImJih0aGlzLl9vdXRwdXQucHJvcG9ydGlvbnM9dGhpcy5fcHJvcG9ydGlvbkdldHRlcigpKX12YXIgbz10KFwiLi9UcmFuc2Zvcm1cIikscz10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIikscj10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIik7ZS5wcm90b3R5cGUudHJhbnNmb3JtRnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMuX3RyYW5zZm9ybUdldHRlcj10OnQgaW5zdGFuY2VvZiBPYmplY3QmJnQuZ2V0P3RoaXMuX3RyYW5zZm9ybUdldHRlcj10LmdldC5iaW5kKHQpOih0aGlzLl90cmFuc2Zvcm1HZXR0ZXI9bnVsbCx0aGlzLl9vdXRwdXQudHJhbnNmb3JtPXQpLHRoaXN9LGUucHJvdG90eXBlLm9wYWNpdHlGcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRnVuY3Rpb24/dGhpcy5fb3BhY2l0eUdldHRlcj10OnQgaW5zdGFuY2VvZiBPYmplY3QmJnQuZ2V0P3RoaXMuX29wYWNpdHlHZXR0ZXI9dC5nZXQuYmluZCh0KToodGhpcy5fb3BhY2l0eUdldHRlcj1udWxsLHRoaXMuX291dHB1dC5vcGFjaXR5PXQpLHRoaXN9LGUucHJvdG90eXBlLm9yaWdpbkZyb209ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl9vcmlnaW5HZXR0ZXI9dDp0IGluc3RhbmNlb2YgT2JqZWN0JiZ0LmdldD90aGlzLl9vcmlnaW5HZXR0ZXI9dC5nZXQuYmluZCh0KToodGhpcy5fb3JpZ2luR2V0dGVyPW51bGwsdGhpcy5fb3V0cHV0Lm9yaWdpbj10KSx0aGlzfSxlLnByb3RvdHlwZS5hbGlnbkZyb209ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl9hbGlnbkdldHRlcj10OnQgaW5zdGFuY2VvZiBPYmplY3QmJnQuZ2V0P3RoaXMuX2FsaWduR2V0dGVyPXQuZ2V0LmJpbmQodCk6KHRoaXMuX2FsaWduR2V0dGVyPW51bGwsdGhpcy5fb3V0cHV0LmFsaWduPXQpLHRoaXN9LGUucHJvdG90eXBlLnNpemVGcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRnVuY3Rpb24/dGhpcy5fc2l6ZUdldHRlcj10OnQgaW5zdGFuY2VvZiBPYmplY3QmJnQuZ2V0P3RoaXMuX3NpemVHZXR0ZXI9dC5nZXQuYmluZCh0KToodGhpcy5fc2l6ZUdldHRlcj1udWxsLHRoaXMuX291dHB1dC5zaXplPXQpLHRoaXN9LGUucHJvdG90eXBlLnByb3BvcnRpb25zRnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMuX3Byb3BvcnRpb25HZXR0ZXI9dDp0IGluc3RhbmNlb2YgT2JqZWN0JiZ0LmdldD90aGlzLl9wcm9wb3J0aW9uR2V0dGVyPXQuZ2V0LmJpbmQodCk6KHRoaXMuX3Byb3BvcnRpb25HZXR0ZXI9bnVsbCx0aGlzLl9vdXRwdXQucHJvcG9ydGlvbnM9dCksdGhpc30sZS5wcm90b3R5cGUuc2V0VHJhbnNmb3JtPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gaXx8dGhpcy5fbGVnYWN5U3RhdGVzLnRyYW5zZm9ybT8odGhpcy5fbGVnYWN5U3RhdGVzLnRyYW5zZm9ybXx8KHRoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm09bmV3IHIodGhpcy5fb3V0cHV0LnRyYW5zZm9ybSkpLHRoaXMuX3RyYW5zZm9ybUdldHRlcnx8dGhpcy50cmFuc2Zvcm1Gcm9tKHRoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm0pLHRoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm0uc2V0KHQsaSxlKSx0aGlzKTp0aGlzLnRyYW5zZm9ybUZyb20odCl9LGUucHJvdG90eXBlLnNldE9wYWNpdHk9ZnVuY3Rpb24odCxpLGUpe3JldHVybiBpfHx0aGlzLl9sZWdhY3lTdGF0ZXMub3BhY2l0eT8odGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHl8fCh0aGlzLl9sZWdhY3lTdGF0ZXMub3BhY2l0eT1uZXcgcyh0aGlzLl9vdXRwdXQub3BhY2l0eSkpLHRoaXMuX29wYWNpdHlHZXR0ZXJ8fHRoaXMub3BhY2l0eUZyb20odGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHkpLHRoaXMuX2xlZ2FjeVN0YXRlcy5vcGFjaXR5LnNldCh0LGksZSkpOnRoaXMub3BhY2l0eUZyb20odCl9LGUucHJvdG90eXBlLnNldE9yaWdpbj1mdW5jdGlvbih0LGksZSl7cmV0dXJuIGl8fHRoaXMuX2xlZ2FjeVN0YXRlcy5vcmlnaW4/KHRoaXMuX2xlZ2FjeVN0YXRlcy5vcmlnaW58fCh0aGlzLl9sZWdhY3lTdGF0ZXMub3JpZ2luPW5ldyBzKHRoaXMuX291dHB1dC5vcmlnaW58fFswLDBdKSksdGhpcy5fb3JpZ2luR2V0dGVyfHx0aGlzLm9yaWdpbkZyb20odGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbiksdGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbi5zZXQodCxpLGUpLHRoaXMpOnRoaXMub3JpZ2luRnJvbSh0KX0sZS5wcm90b3R5cGUuc2V0QWxpZ249ZnVuY3Rpb24odCxpLGUpe3JldHVybiBpfHx0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ24/KHRoaXMuX2xlZ2FjeVN0YXRlcy5hbGlnbnx8KHRoaXMuX2xlZ2FjeVN0YXRlcy5hbGlnbj1uZXcgcyh0aGlzLl9vdXRwdXQuYWxpZ258fFswLDBdKSksdGhpcy5fYWxpZ25HZXR0ZXJ8fHRoaXMuYWxpZ25Gcm9tKHRoaXMuX2xlZ2FjeVN0YXRlcy5hbGlnbiksdGhpcy5fbGVnYWN5U3RhdGVzLmFsaWduLnNldCh0LGksZSksdGhpcyk6dGhpcy5hbGlnbkZyb20odCl9LGUucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB0JiYoaXx8dGhpcy5fbGVnYWN5U3RhdGVzLnNpemUpPyh0aGlzLl9sZWdhY3lTdGF0ZXMuc2l6ZXx8KHRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplPW5ldyBzKHRoaXMuX291dHB1dC5zaXplfHxbMCwwXSkpLHRoaXMuX3NpemVHZXR0ZXJ8fHRoaXMuc2l6ZUZyb20odGhpcy5fbGVnYWN5U3RhdGVzLnNpemUpLHRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplLnNldCh0LGksZSksdGhpcyk6dGhpcy5zaXplRnJvbSh0KX0sZS5wcm90b3R5cGUuc2V0UHJvcG9ydGlvbnM9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB0JiYoaXx8dGhpcy5fbGVnYWN5U3RhdGVzLnByb3BvcnRpb25zKT8odGhpcy5fbGVnYWN5U3RhdGVzLnByb3BvcnRpb25zfHwodGhpcy5fbGVnYWN5U3RhdGVzLnByb3BvcnRpb25zPW5ldyBzKHRoaXMuX291dHB1dC5wcm9wb3J0aW9uc3x8WzAsMF0pKSx0aGlzLl9wcm9wb3J0aW9uR2V0dGVyfHx0aGlzLnByb3BvcnRpb25zRnJvbSh0aGlzLl9sZWdhY3lTdGF0ZXMucHJvcG9ydGlvbnMpLHRoaXMuX2xlZ2FjeVN0YXRlcy5wcm9wb3J0aW9ucy5zZXQodCxpLGUpLHRoaXMpOnRoaXMucHJvcG9ydGlvbnNGcm9tKHQpfSxlLnByb3RvdHlwZS5oYWx0PWZ1bmN0aW9uKCl7dGhpcy5fbGVnYWN5U3RhdGVzLnRyYW5zZm9ybSYmdGhpcy5fbGVnYWN5U3RhdGVzLnRyYW5zZm9ybS5oYWx0KCksdGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHkmJnRoaXMuX2xlZ2FjeVN0YXRlcy5vcGFjaXR5LmhhbHQoKSx0aGlzLl9sZWdhY3lTdGF0ZXMub3JpZ2luJiZ0aGlzLl9sZWdhY3lTdGF0ZXMub3JpZ2luLmhhbHQoKSx0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ24mJnRoaXMuX2xlZ2FjeVN0YXRlcy5hbGlnbi5oYWx0KCksdGhpcy5fbGVnYWN5U3RhdGVzLnNpemUmJnRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplLmhhbHQoKSx0aGlzLl9sZWdhY3lTdGF0ZXMucHJvcG9ydGlvbnMmJnRoaXMuX2xlZ2FjeVN0YXRlcy5wcm9wb3J0aW9ucy5oYWx0KCksdGhpcy5fdHJhbnNmb3JtR2V0dGVyPW51bGwsdGhpcy5fb3BhY2l0eUdldHRlcj1udWxsLHRoaXMuX29yaWdpbkdldHRlcj1udWxsLHRoaXMuX2FsaWduR2V0dGVyPW51bGwsdGhpcy5fc2l6ZUdldHRlcj1udWxsLHRoaXMuX3Byb3BvcnRpb25HZXR0ZXI9bnVsbH0sZS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybUdldHRlcigpfSxlLnByb3RvdHlwZS5nZXRGaW5hbFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtP3RoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm0uZ2V0RmluYWwoKTp0aGlzLl9vdXRwdXQudHJhbnNmb3JtfSxlLnByb3RvdHlwZS5nZXRPcGFjaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wYWNpdHlHZXR0ZXIoKX0sZS5wcm90b3R5cGUuZ2V0T3JpZ2luPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWdpbkdldHRlcigpfSxlLnByb3RvdHlwZS5nZXRBbGlnbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbGlnbkdldHRlcigpfSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpemVHZXR0ZXI/dGhpcy5fc2l6ZUdldHRlcigpOnRoaXMuX291dHB1dC5zaXplfSxlLnByb3RvdHlwZS5nZXRQcm9wb3J0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wb3J0aW9uR2V0dGVyP3RoaXMuX3Byb3BvcnRpb25HZXR0ZXIoKTp0aGlzLl9vdXRwdXQucHJvcG9ydGlvbnN9LGUucHJvdG90eXBlLm1vZGlmeT1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHRoaXMpLHRoaXMuX291dHB1dC50YXJnZXQ9dCx0aGlzLl9vdXRwdXR9LGkuZXhwb3J0cz1lfSx7XCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiOjg4LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIjo4OSxcIi4vVHJhbnNmb3JtXCI6MTV9XSwxMDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuX3ZhbHVlPXQsdGhpcy5ldmVudE91dHB1dD1udWxsfWZ1bmN0aW9uIG4oKXt0aGlzLmV2ZW50T3V0cHV0PW5ldyBvLHRoaXMuZXZlbnRPdXRwdXQuYmluZFRoaXModGhpcyksby5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5ldmVudE91dHB1dCl9dmFyIG89dChcIi4vRXZlbnRIYW5kbGVyXCIpO2UucGF0Y2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPW5ldyBlKHQpLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWkucGF0Y2goYXJndW1lbnRzW25dKTtyZXR1cm4gdH0sZS5wcm90b3R5cGUucGF0Y2g9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fdmFsdWUsaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBlPWFyZ3VtZW50c1tpXTtmb3IodmFyIG4gaW4gZSluIGluIHQmJmVbbl0mJmVbbl0uY29uc3RydWN0b3I9PT1PYmplY3QmJnRbbl0mJnRbbl0uY29uc3RydWN0b3I9PT1PYmplY3Q/KHQuaGFzT3duUHJvcGVydHkobil8fCh0W25dPU9iamVjdC5jcmVhdGUodFtuXSkpLHRoaXMua2V5KG4pLnBhdGNoKGVbbl0pLHRoaXMuZXZlbnRPdXRwdXQmJnRoaXMuZXZlbnRPdXRwdXQuZW1pdChcImNoYW5nZVwiLHtpZDpuLHZhbHVlOnRoaXMua2V5KG4pLnZhbHVlKCl9KSk6dGhpcy5zZXQobixlW25dKX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1lLnByb3RvdHlwZS5wYXRjaCxlLnByb3RvdHlwZS5rZXk9ZnVuY3Rpb24odCl7dmFyIGk9bmV3IGUodGhpcy5fdmFsdWVbdF0pO3JldHVybighKGkuX3ZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KXx8aS5fdmFsdWUgaW5zdGFuY2VvZiBBcnJheSkmJihpLl92YWx1ZT17fSksaX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0P3RoaXMuX3ZhbHVlW3RdOnRoaXMuX3ZhbHVlfSxlLnByb3RvdHlwZS5nZXRPcHRpb25zPWUucHJvdG90eXBlLmdldCxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxpKXt2YXIgZT10aGlzLmdldCh0KTtyZXR1cm4gdGhpcy5fdmFsdWVbdF09aSx0aGlzLmV2ZW50T3V0cHV0JiZpIT09ZSYmdGhpcy5ldmVudE91dHB1dC5lbWl0KFwiY2hhbmdlXCIse2lkOnQsdmFsdWU6aX0pLHRoaXN9LGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbCh0aGlzKSx0aGlzLm9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMpLHRoaXMucmVtb3ZlTGlzdGVuZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbCh0aGlzKSx0aGlzLnBpcGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS51bnBpcGU9ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMpLHRoaXMudW5waXBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5leHBvcnRzPWV9LHtcIi4vRXZlbnRIYW5kbGVyXCI6N31dLDExOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5fb2JqZWN0PW51bGwsdGhpcy5fY2hpbGQ9bnVsbCx0aGlzLl9oYXNNdWx0aXBsZUNoaWxkcmVuPSExLHRoaXMuX2lzUmVuZGVyYWJsZT0hMSx0aGlzLl9pc01vZGlmaWVyPSExLHRoaXMuX3Jlc3VsdENhY2hlPXt9LHRoaXMuX3ByZXZSZXN1bHRzPXt9LHRoaXMuX2NoaWxkUmVzdWx0PW51bGwsdCYmdGhpcy5zZXQodCl9ZnVuY3Rpb24gbih0LGksZSl7Zm9yKHZhciByPXMucGFyc2UodCxpKSxhPU9iamVjdC5rZXlzKHIpLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGM9YVtoXSxwPW8uZ2V0KGMpLHU9cltjXTt1LmFsbG9jYXRvcj1pLmFsbG9jYXRvcjt2YXIgbD1wLmNvbW1pdCh1KTtsP24obCxpLGUpOmVbY109dX19dmFyIG89dChcIi4vRW50aXR5XCIpLHM9dChcIi4vU3BlY1BhcnNlclwiKTtlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dmFyIGk9dCBpbnN0YW5jZW9mIGU/dDpuZXcgZSh0KTtyZXR1cm4gdGhpcy5fY2hpbGQgaW5zdGFuY2VvZiBBcnJheT90aGlzLl9jaGlsZC5wdXNoKGkpOnRoaXMuX2NoaWxkPyh0aGlzLl9jaGlsZD1bdGhpcy5fY2hpbGQsaV0sdGhpcy5faGFzTXVsdGlwbGVDaGlsZHJlbj0hMCx0aGlzLl9jaGlsZFJlc3VsdD1bXSk6dGhpcy5fY2hpbGQ9aSxpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JqZWN0fHwodGhpcy5faGFzTXVsdGlwbGVDaGlsZHJlbj9udWxsOnRoaXMuX2NoaWxkP3RoaXMuX2NoaWxkLmdldCgpOm51bGwpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NoaWxkUmVzdWx0PW51bGwsdGhpcy5faGFzTXVsdGlwbGVDaGlsZHJlbj0hMSx0aGlzLl9pc1JlbmRlcmFibGU9dC5yZW5kZXI/ITA6ITEsdGhpcy5faXNNb2RpZmllcj10Lm1vZGlmeT8hMDohMSx0aGlzLl9vYmplY3Q9dCx0aGlzLl9jaGlsZD1udWxsLHQgaW5zdGFuY2VvZiBlP3Q6dGhpc30sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3ZhciB0PW51bGwsaT10aGlzLmdldCgpO3JldHVybiBpJiZpLmdldFNpemUmJih0PWkuZ2V0U2l6ZSgpKSwhdCYmdGhpcy5fY2hpbGQmJnRoaXMuX2NoaWxkLmdldFNpemUmJih0PXRoaXMuX2NoaWxkLmdldFNpemUoKSksdH0sZS5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgaT1PYmplY3Qua2V5cyh0aGlzLl9wcmV2UmVzdWx0cyksZT0wO2U8aS5sZW5ndGg7ZSsrKXt2YXIgcz1pW2VdO2lmKHZvaWQgMD09PXRoaXMuX3Jlc3VsdENhY2hlW3NdKXt2YXIgcj1vLmdldChzKTtyLmNsZWFudXAmJnIuY2xlYW51cCh0LmFsbG9jYXRvcil9fXRoaXMuX3ByZXZSZXN1bHRzPXRoaXMuX3Jlc3VsdENhY2hlLHRoaXMuX3Jlc3VsdENhY2hlPXt9LG4odGhpcy5yZW5kZXIoKSx0LHRoaXMuX3Jlc3VsdENhY2hlKX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7aWYodGhpcy5faXNSZW5kZXJhYmxlKXJldHVybiB0aGlzLl9vYmplY3QucmVuZGVyKCk7dmFyIHQ9bnVsbDtpZih0aGlzLl9oYXNNdWx0aXBsZUNoaWxkcmVuKXt0PXRoaXMuX2NoaWxkUmVzdWx0O2Zvcih2YXIgaT10aGlzLl9jaGlsZCxlPTA7ZTxpLmxlbmd0aDtlKyspdFtlXT1pW2VdLnJlbmRlcigpfWVsc2UgdGhpcy5fY2hpbGQmJih0PXRoaXMuX2NoaWxkLnJlbmRlcigpKTtyZXR1cm4gdGhpcy5faXNNb2RpZmllcj90aGlzLl9vYmplY3QubW9kaWZ5KHQpOnR9LGkuZXhwb3J0cz1lfSx7XCIuL0VudGl0eVwiOjUsXCIuL1NwZWNQYXJzZXJcIjoxM31dLDEyOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5pZD1udWxsLHRoaXMuX29iamVjdHM9bnVsbCx0aGlzLm5vZGU9bmV3IGMsdGhpcy5fZGVmaW5pdGlvbj1udWxsLHQmJnRoaXMubG9hZCh0KX1mdW5jdGlvbiBuKHQpe2Zvcih2YXIgaSBpbiBwKWlmKGkgaW4gdCl7dmFyIGU9dFtpXTtyZXR1cm4gZSBpbnN0YW5jZW9mIEFycmF5fHwoZT1bZV0pLHBbaV0uYXBwbHkodGhpcyxlKX19ZnVuY3Rpb24gbyh0KXt2YXIgaT10LnRyYW5zZm9ybSxlPXQub3BhY2l0eSxvPXQub3JpZ2luLHM9dC5hbGlnbixyPXQuc2l6ZSxjPWEuaWRlbnRpdHk7aWYoaSBpbnN0YW5jZW9mIEFycmF5KWlmKDE2PT09aS5sZW5ndGgmJlwibnVtYmVyXCI9PXR5cGVvZiBpWzBdKWM9aTtlbHNlIGZvcih2YXIgcD0wO3A8aS5sZW5ndGg7cCsrKWM9YS5tdWx0aXBseShjLG4oaVtwXSkpO2Vsc2UgaSBpbnN0YW5jZW9mIEZ1bmN0aW9uP2M9aTppIGluc3RhbmNlb2YgT2JqZWN0JiYoYz1uKGkpKTt2YXIgdT1uZXcgaCh7dHJhbnNmb3JtOmMsb3BhY2l0eTplLG9yaWdpbjpvLGFsaWduOnMsc2l6ZTpyfSk7cmV0dXJuIHV9ZnVuY3Rpb24gcyh0KXtmb3IodmFyIGk9bmV3IGMsZT0wO2U8dC5sZW5ndGg7ZSsrKXt2YXIgbj1yLmNhbGwodGhpcyx0W2VdKTtuJiZpLmFkZChuKX1yZXR1cm4gaX1mdW5jdGlvbiByKHQpe3ZhciBpLGU7aWYodCBpbnN0YW5jZW9mIEFycmF5KWk9cy5jYWxsKHRoaXMsdCk7ZWxzZSBpZihlPXRoaXMuX29iamVjdHMubGVuZ3RoLHQucmVuZGVyJiZ0LnJlbmRlciBpbnN0YW5jZW9mIEZ1bmN0aW9uKWk9dDtlbHNlIGlmKHQudGFyZ2V0KXt2YXIgbj1yLmNhbGwodGhpcyx0LnRhcmdldCksYT1vLmNhbGwodGhpcyx0KTtpPW5ldyBjKGEpLGkuYWRkKG4pLHQuaWQmJih0aGlzLmlkW3QuaWRdPWEpfWVsc2UgdC5pZCYmKGk9bmV3IGMsdGhpcy5pZFt0LmlkXT1pKTtyZXR1cm4gdGhpcy5fb2JqZWN0c1tlXT1pLGl9dmFyIGE9dChcIi4vVHJhbnNmb3JtXCIpLGg9dChcIi4vTW9kaWZpZXJcIiksYz10KFwiLi9SZW5kZXJOb2RlXCIpLHA9e3RyYW5zbGF0ZTphLnRyYW5zbGF0ZSxyb3RhdGU6YS5yb3RhdGUscm90YXRlWDphLnJvdGF0ZVgscm90YXRlWTphLnJvdGF0ZVkscm90YXRlWjphLnJvdGF0ZVoscm90YXRlQXhpczphLnJvdGF0ZUF4aXMsc2NhbGU6YS5zY2FsZSxza2V3OmEuc2tldyxtYXRyaXgzZDpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9fTtlLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy5fZGVmaW5pdGlvbil9LGUucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24odCl7dGhpcy5fZGVmaW5pdGlvbj10LHRoaXMuaWQ9e30sdGhpcy5fb2JqZWN0cz1bXSx0aGlzLm5vZGUuc2V0KHIuY2FsbCh0aGlzLHQpKX0sZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5hZGQuYXBwbHkodGhpcy5ub2RlLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUucmVuZGVyLmFwcGx5KHRoaXMubm9kZSxhcmd1bWVudHMpfSxpLmV4cG9ydHM9ZX0se1wiLi9Nb2RpZmllclwiOjksXCIuL1JlbmRlck5vZGVcIjoxMSxcIi4vVHJhbnNmb3JtXCI6MTV9XSwxMzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7dGhpcy5yZXN1bHQ9e319ZnVuY3Rpb24gbih0LGkpe3JldHVyblt0WzBdKmlbMF0rdFsxXSppWzRdK3RbMl0qaVs4XSx0WzBdKmlbMV0rdFsxXSppWzVdK3RbMl0qaVs5XSx0WzBdKmlbMl0rdFsxXSppWzZdK3RbMl0qaVsxMF1dfXZhciBvPXQoXCIuL1RyYW5zZm9ybVwiKTtlLl9pbnN0YW5jZT1uZXcgZSxlLnBhcnNlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUuX2luc3RhbmNlLnBhcnNlKHQsaSl9LGUucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHRoaXMucmVzZXQoKSx0aGlzLl9wYXJzZVNwZWModCxpLG8uaWRlbnRpdHkpLHRoaXMucmVzdWx0fSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMucmVzdWx0PXt9fTt2YXIgcz1bMCwwXTtlLnByb3RvdHlwZS5fcGFyc2VTcGVjPWZ1bmN0aW9uKHQsaSxlKXt2YXIgcixhLGgsYyxwLHUsbDtpZihcIm51bWJlclwiPT10eXBlb2YgdCl7aWYocj10LGg9aS50cmFuc2Zvcm0sdT1pLmFsaWdufHxzLGkuc2l6ZSYmdSYmKHVbMF18fHVbMV0pKXt2YXIgZj1bdVswXSppLnNpemVbMF0sdVsxXSppLnNpemVbMV0sMF07aD1vLnRoZW5Nb3ZlKGgsbihmLGUpKX10aGlzLnJlc3VsdFtyXT17dHJhbnNmb3JtOmgsb3BhY2l0eTppLm9wYWNpdHksb3JpZ2luOmkub3JpZ2lufHxzLGFsaWduOmkuYWxpZ258fHMsc2l6ZTppLnNpemV9fWVsc2V7aWYoIXQpcmV0dXJuO2lmKHQgaW5zdGFuY2VvZiBBcnJheSlmb3IodmFyIGQ9MDtkPHQubGVuZ3RoO2QrKyl0aGlzLl9wYXJzZVNwZWModFtkXSxpLGUpO2Vsc2V7YT10LnRhcmdldCxoPWkudHJhbnNmb3JtLGM9aS5vcGFjaXR5LHA9aS5vcmlnaW4sdT1pLmFsaWduLGw9aS5zaXplO3ZhciBfPWU7aWYodm9pZCAwIT09dC5vcGFjaXR5JiYoYz1pLm9wYWNpdHkqdC5vcGFjaXR5KSx0LnRyYW5zZm9ybSYmKGg9by5tdWx0aXBseShpLnRyYW5zZm9ybSx0LnRyYW5zZm9ybSkpLHQub3JpZ2luJiYocD10Lm9yaWdpbixfPWkudHJhbnNmb3JtKSx0LmFsaWduJiYodT10LmFsaWduKSx0LnNpemV8fHQucHJvcG9ydGlvbnMpe3ZhciB5PWw7bD1bbFswXSxsWzFdXSx0LnNpemUmJih2b2lkIDAhPT10LnNpemVbMF0mJihsWzBdPXQuc2l6ZVswXSksdm9pZCAwIT09dC5zaXplWzFdJiYobFsxXT10LnNpemVbMV0pKSx0LnByb3BvcnRpb25zJiYodm9pZCAwIT09dC5wcm9wb3J0aW9uc1swXSYmKGxbMF09bFswXSp0LnByb3BvcnRpb25zWzBdKSx2b2lkIDAhPT10LnByb3BvcnRpb25zWzFdJiYobFsxXT1sWzFdKnQucHJvcG9ydGlvbnNbMV0pKSx5JiYodSYmKHVbMF18fHVbMV0pJiYoaD1vLnRoZW5Nb3ZlKGgsbihbdVswXSp5WzBdLHVbMV0qeVsxXSwwXSxlKSkpLHAmJihwWzBdfHxwWzFdKSYmKGg9by5tb3ZlVGhlbihbLXBbMF0qbFswXSwtcFsxXSpsWzFdLDBdLGgpKSksXz1pLnRyYW5zZm9ybSxwPW51bGwsdT1udWxsfXRoaXMuX3BhcnNlU3BlYyhhLHt0cmFuc2Zvcm06aCxvcGFjaXR5OmMsb3JpZ2luOnAsYWxpZ246dSxzaXplOmx9LF8pfX19LGkuZXhwb3J0cz1lfSx7XCIuL1RyYW5zZm9ybVwiOjE1fV0sMTQ6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtjLmNhbGwodGhpcyksdGhpcy5vcHRpb25zPXt9LHRoaXMucHJvcGVydGllcz17fSx0aGlzLmF0dHJpYnV0ZXM9e30sdGhpcy5jb250ZW50PVwiXCIsdGhpcy5jbGFzc0xpc3Q9W10sdGhpcy5zaXplPW51bGwsdGhpcy5fY2xhc3Nlc0RpcnR5PSEwLHRoaXMuX3N0eWxlc0RpcnR5PSEwLHRoaXMuX2F0dHJpYnV0ZXNEaXJ0eT0hMCx0aGlzLl9zaXplRGlydHk9ITAsdGhpcy5fY29udGVudERpcnR5PSEwLHRoaXMuX3RydWVTaXplQ2hlY2s9ITAsdGhpcy5fZGlydHlDbGFzc2VzPVtdLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLl9jdXJyZW50VGFyZ2V0PW51bGx9ZnVuY3Rpb24gbih0KXtmb3IodmFyIGk9MDtpPHRoaXMuX2RpcnR5Q2xhc3Nlcy5sZW5ndGg7aSsrKXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kaXJ0eUNsYXNzZXNbaV0pO3RoaXMuX2RpcnR5Q2xhc3Nlcz1bXX1mdW5jdGlvbiBvKHQpe2Zvcih2YXIgaSBpbiB0aGlzLnByb3BlcnRpZXMpdC5zdHlsZVtpXT10aGlzLnByb3BlcnRpZXNbaV19ZnVuY3Rpb24gcyh0KXtmb3IodmFyIGkgaW4gdGhpcy5wcm9wZXJ0aWVzKXQuc3R5bGVbaV09XCJcIn1mdW5jdGlvbiByKHQpe2Zvcih2YXIgaSBpbiB0aGlzLmF0dHJpYnV0ZXMpdC5zZXRBdHRyaWJ1dGUoaSx0aGlzLmF0dHJpYnV0ZXNbaV0pfWZ1bmN0aW9uIGEodCl7Zm9yKHZhciBpIGluIHRoaXMuYXR0cmlidXRlcyl0LnJlbW92ZUF0dHJpYnV0ZShpKX1mdW5jdGlvbiBoKHQsaSl7cmV0dXJuIHQmJmk/dFswXSE9PWlbMF18fHRbMV0hPT1pWzFdOnQhPT1pfXZhciBjPXQoXCIuL0VsZW1lbnRPdXRwdXRcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5lbGVtZW50VHlwZT1cImRpdlwiLGUucHJvdG90eXBlLmVsZW1lbnRDbGFzcz1cImZhbW91cy1zdXJmYWNlXCIsZS5wcm90b3R5cGUuc2V0QXR0cmlidXRlcz1mdW5jdGlvbih0KXtmb3IodmFyIGkgaW4gdCl7aWYoXCJzdHlsZVwiPT09aSl0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzZXQgc3R5bGVzIHZpYSBcInNldEF0dHJpYnV0ZXNcIiBhcyBpdCB3aWxsIGJyZWFrIEZhbW8udXMuICBVc2UgXCJzZXRQcm9wZXJ0aWVzXCIgaW5zdGVhZC4nKTt0aGlzLmF0dHJpYnV0ZXNbaV09dFtpXX10aGlzLl9hdHRyaWJ1dGVzRGlydHk9ITB9LGUucHJvdG90eXBlLmdldEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzfSxlLnByb3RvdHlwZS5zZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgaSBpbiB0KXRoaXMucHJvcGVydGllc1tpXT10W2ldO3JldHVybiB0aGlzLl9zdHlsZXNEaXJ0eT0hMCx0aGlzfSxlLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcGVydGllc30sZS5wcm90b3R5cGUuYWRkQ2xhc3M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xhc3NMaXN0LmluZGV4T2YodCk8MCYmKHRoaXMuY2xhc3NMaXN0LnB1c2godCksdGhpcy5fY2xhc3Nlc0RpcnR5PSEwKSx0aGlzfSxlLnByb3RvdHlwZS5yZW1vdmVDbGFzcz1mdW5jdGlvbih0KXt2YXIgaT10aGlzLmNsYXNzTGlzdC5pbmRleE9mKHQpO3JldHVybiBpPj0wJiYodGhpcy5fZGlydHlDbGFzc2VzLnB1c2godGhpcy5jbGFzc0xpc3Quc3BsaWNlKGksMSlbMF0pLHRoaXMuX2NsYXNzZXNEaXJ0eT0hMCksdGhpc30sZS5wcm90b3R5cGUudG9nZ2xlQ2xhc3M9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5jbGFzc0xpc3QuaW5kZXhPZih0KTtyZXR1cm4gaT49MD90aGlzLnJlbW92ZUNsYXNzKHQpOnRoaXMuYWRkQ2xhc3ModCksdGhpc30sZS5wcm90b3R5cGUuc2V0Q2xhc3Nlcz1mdW5jdGlvbih0KXt2YXIgaT0wLGU9W107Zm9yKGk9MDtpPHRoaXMuY2xhc3NMaXN0Lmxlbmd0aDtpKyspdC5pbmRleE9mKHRoaXMuY2xhc3NMaXN0W2ldKTwwJiZlLnB1c2godGhpcy5jbGFzc0xpc3RbaV0pO2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspdGhpcy5yZW1vdmVDbGFzcyhlW2ldKTtmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKXRoaXMuYWRkQ2xhc3ModFtpXSk7cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLmdldENsYXNzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzTGlzdH0sZS5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50IT09dCYmKHRoaXMuY29udGVudD10LHRoaXMuX2NvbnRlbnREaXJ0eT0hMCksdGhpc30sZS5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnR9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2l6ZSYmdGhpcy5zZXRTaXplKHQuc2l6ZSksdC5jbGFzc2VzJiZ0aGlzLnNldENsYXNzZXModC5jbGFzc2VzKSx0LnByb3BlcnRpZXMmJnRoaXMuc2V0UHJvcGVydGllcyh0LnByb3BlcnRpZXMpLHQuYXR0cmlidXRlcyYmdGhpcy5zZXRBdHRyaWJ1dGVzKHQuYXR0cmlidXRlcyksdC5jb250ZW50JiZ0aGlzLnNldENvbnRlbnQodC5jb250ZW50KSx0aGlzfSxlLnByb3RvdHlwZS5zZXR1cD1mdW5jdGlvbih0KXt2YXIgaT10LmFsbG9jYXRlKHRoaXMuZWxlbWVudFR5cGUpO2lmKHRoaXMuZWxlbWVudENsYXNzKWlmKHRoaXMuZWxlbWVudENsYXNzIGluc3RhbmNlb2YgQXJyYXkpZm9yKHZhciBlPTA7ZTx0aGlzLmVsZW1lbnRDbGFzcy5sZW5ndGg7ZSsrKWkuY2xhc3NMaXN0LmFkZCh0aGlzLmVsZW1lbnRDbGFzc1tlXSk7ZWxzZSBpLmNsYXNzTGlzdC5hZGQodGhpcy5lbGVtZW50Q2xhc3MpO2kuc3R5bGUuZGlzcGxheT1cIlwiLHRoaXMuYXR0YWNoKGkpLHRoaXMuX29wYWNpdHk9bnVsbCx0aGlzLl9jdXJyZW50VGFyZ2V0PWksdGhpcy5fc3R5bGVzRGlydHk9ITAsdGhpcy5fY2xhc3Nlc0RpcnR5PSEwLHRoaXMuX2F0dHJpYnV0ZXNEaXJ0eT0hMCx0aGlzLl9zaXplRGlydHk9ITAsdGhpcy5fY29udGVudERpcnR5PSEwLHRoaXMuX29yaWdpbkRpcnR5PSEwLHRoaXMuX3RyYW5zZm9ybURpcnR5PSEwfSxlLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24odCl7dGhpcy5fY3VycmVudFRhcmdldHx8dGhpcy5zZXR1cCh0LmFsbG9jYXRvcik7dmFyIGk9dGhpcy5fY3VycmVudFRhcmdldCxlPXQuc2l6ZTtpZih0aGlzLl9jbGFzc2VzRGlydHkpe24uY2FsbCh0aGlzLGkpO2Zvcih2YXIgcz10aGlzLmdldENsYXNzTGlzdCgpLGE9MDthPHMubGVuZ3RoO2ErKylpLmNsYXNzTGlzdC5hZGQoc1thXSk7dGhpcy5fY2xhc3Nlc0RpcnR5PSExLHRoaXMuX3RydWVTaXplQ2hlY2s9ITB9aWYodGhpcy5fc3R5bGVzRGlydHkmJihvLmNhbGwodGhpcyxpKSx0aGlzLl9zdHlsZXNEaXJ0eT0hMSx0aGlzLl90cnVlU2l6ZUNoZWNrPSEwKSx0aGlzLl9hdHRyaWJ1dGVzRGlydHkmJihyLmNhbGwodGhpcyxpKSx0aGlzLl9hdHRyaWJ1dGVzRGlydHk9ITEsdGhpcy5fdHJ1ZVNpemVDaGVjaz0hMCksdGhpcy5zaXplKXt2YXIgcD10LnNpemU7aWYoZT1bdGhpcy5zaXplWzBdLHRoaXMuc2l6ZVsxXV0sdm9pZCAwPT09ZVswXSYmKGVbMF09cFswXSksdm9pZCAwPT09ZVsxXSYmKGVbMV09cFsxXSksZVswXT09PSEwfHxlWzFdPT09ITApe2lmKGVbMF0hPT0hMHx8IXRoaXMuX3RydWVTaXplQ2hlY2smJjAhPT10aGlzLl9zaXplWzBdKXRoaXMuX3NpemUmJihlWzBdPXRoaXMuX3NpemVbMF0pO2Vsc2V7dmFyIHU9aS5vZmZzZXRXaWR0aDt0aGlzLl9zaXplJiZ0aGlzLl9zaXplWzBdIT09dSYmKHRoaXMuX3NpemVbMF09dSx0aGlzLl9zaXplRGlydHk9ITApLGVbMF09dX1pZihlWzFdIT09ITB8fCF0aGlzLl90cnVlU2l6ZUNoZWNrJiYwIT09dGhpcy5fc2l6ZVsxXSl0aGlzLl9zaXplJiYoZVsxXT10aGlzLl9zaXplWzFdKTtlbHNle3ZhciBsPWkub2Zmc2V0SGVpZ2h0O3RoaXMuX3NpemUmJnRoaXMuX3NpemVbMV0hPT1sJiYodGhpcy5fc2l6ZVsxXT1sLHRoaXMuX3NpemVEaXJ0eT0hMCksZVsxXT1sfXRoaXMuX3RydWVTaXplQ2hlY2s9ITF9fWgodGhpcy5fc2l6ZSxlKSYmKHRoaXMuX3NpemV8fCh0aGlzLl9zaXplPVswLDBdKSx0aGlzLl9zaXplWzBdPWVbMF0sdGhpcy5fc2l6ZVsxXT1lWzFdLHRoaXMuX3NpemVEaXJ0eT0hMCksdGhpcy5fc2l6ZURpcnR5JiYodGhpcy5fc2l6ZSYmKGkuc3R5bGUud2lkdGg9dGhpcy5zaXplJiZ0aGlzLnNpemVbMF09PT0hMD9cIlwiOnRoaXMuX3NpemVbMF0rXCJweFwiLGkuc3R5bGUuaGVpZ2h0PXRoaXMuc2l6ZSYmdGhpcy5zaXplWzFdPT09ITA/XCJcIjp0aGlzLl9zaXplWzFdK1wicHhcIiksdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInJlc2l6ZVwiKSksdGhpcy5fY29udGVudERpcnR5JiYodGhpcy5kZXBsb3koaSksdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImRlcGxveVwiKSx0aGlzLl9jb250ZW50RGlydHk9ITEsdGhpcy5fdHJ1ZVNpemVDaGVjaz0hMCksYy5wcm90b3R5cGUuY29tbWl0LmNhbGwodGhpcyx0KX0sZS5wcm90b3R5cGUuY2xlYW51cD1mdW5jdGlvbih0KXt2YXIgaT0wLGU9dGhpcy5fY3VycmVudFRhcmdldDt0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwicmVjYWxsXCIpLHRoaXMucmVjYWxsKGUpLGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixlLnN0eWxlLm9wYWNpdHk9XCJcIixlLnN0eWxlLndpZHRoPVwiXCIsZS5zdHlsZS5oZWlnaHQ9XCJcIixzLmNhbGwodGhpcyxlKSxhLmNhbGwodGhpcyxlKTt2YXIgbz10aGlzLmdldENsYXNzTGlzdCgpO2ZvcihuLmNhbGwodGhpcyxlKSxpPTA7aTxvLmxlbmd0aDtpKyspZS5jbGFzc0xpc3QucmVtb3ZlKG9baV0pO2lmKHRoaXMuZWxlbWVudENsYXNzKWlmKHRoaXMuZWxlbWVudENsYXNzIGluc3RhbmNlb2YgQXJyYXkpZm9yKGk9MDtpPHRoaXMuZWxlbWVudENsYXNzLmxlbmd0aDtpKyspZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZWxlbWVudENsYXNzW2ldKTtlbHNlIGUuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmVsZW1lbnRDbGFzcyk7dGhpcy5kZXRhY2goZSksdGhpcy5fY3VycmVudFRhcmdldD1udWxsLHQuZGVhbGxvY2F0ZShlKX0sZS5wcm90b3R5cGUuZGVwbG95PWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0Q29udGVudCgpO2lmKGkgaW5zdGFuY2VvZiBOb2RlKXtmb3IoO3QuaGFzQ2hpbGROb2RlcygpOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7dC5hcHBlbmRDaGlsZChpKX1lbHNlIHQuaW5uZXJIVE1MPWl9LGUucHJvdG90eXBlLnJlY2FsbD1mdW5jdGlvbih0KXtmb3IodmFyIGk9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3QuaGFzQ2hpbGROb2RlcygpOylpLmFwcGVuZENoaWxkKHQuZmlyc3RDaGlsZCk7dGhpcy5zZXRDb250ZW50KGkpfSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpemU/dGhpcy5fc2l6ZTp0aGlzLnNpemV9LGUucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2l6ZT10P1t0WzBdLHRbMV1dOm51bGwsdGhpcy5fc2l6ZURpcnR5PSEwLHRoaXN9LGkuZXhwb3J0cz1lfSx7XCIuL0VsZW1lbnRPdXRwdXRcIjozfV0sMTU6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gMj09PXQubGVuZ3RoP3RbMF0qdFswXSt0WzFdKnRbMV06dFswXSp0WzBdK3RbMV0qdFsxXSt0WzJdKnRbMl19ZnVuY3Rpb24gbih0KXtyZXR1cm4gTWF0aC5zcXJ0KGUodCkpfWZ1bmN0aW9uIG8odCl7cmV0dXJuIDA+dD8tMToxfXZhciBzPXt9O3MucHJlY2lzaW9uPTFlLTYscy5pZGVudGl0eT1bMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV0scy5tdWx0aXBseTR4ND1mdW5jdGlvbih0LGkpe3JldHVyblt0WzBdKmlbMF0rdFs0XSppWzFdK3RbOF0qaVsyXSt0WzEyXSppWzNdLHRbMV0qaVswXSt0WzVdKmlbMV0rdFs5XSppWzJdK3RbMTNdKmlbM10sdFsyXSppWzBdK3RbNl0qaVsxXSt0WzEwXSppWzJdK3RbMTRdKmlbM10sdFszXSppWzBdK3RbN10qaVsxXSt0WzExXSppWzJdK3RbMTVdKmlbM10sdFswXSppWzRdK3RbNF0qaVs1XSt0WzhdKmlbNl0rdFsxMl0qaVs3XSx0WzFdKmlbNF0rdFs1XSppWzVdK3RbOV0qaVs2XSt0WzEzXSppWzddLHRbMl0qaVs0XSt0WzZdKmlbNV0rdFsxMF0qaVs2XSt0WzE0XSppWzddLHRbM10qaVs0XSt0WzddKmlbNV0rdFsxMV0qaVs2XSt0WzE1XSppWzddLHRbMF0qaVs4XSt0WzRdKmlbOV0rdFs4XSppWzEwXSt0WzEyXSppWzExXSx0WzFdKmlbOF0rdFs1XSppWzldK3RbOV0qaVsxMF0rdFsxM10qaVsxMV0sdFsyXSppWzhdK3RbNl0qaVs5XSt0WzEwXSppWzEwXSt0WzE0XSppWzExXSx0WzNdKmlbOF0rdFs3XSppWzldK3RbMTFdKmlbMTBdK3RbMTVdKmlbMTFdLHRbMF0qaVsxMl0rdFs0XSppWzEzXSt0WzhdKmlbMTRdK3RbMTJdKmlbMTVdLHRbMV0qaVsxMl0rdFs1XSppWzEzXSt0WzldKmlbMTRdK3RbMTNdKmlbMTVdLHRbMl0qaVsxMl0rdFs2XSppWzEzXSt0WzEwXSppWzE0XSt0WzE0XSppWzE1XSx0WzNdKmlbMTJdK3RbN10qaVsxM10rdFsxMV0qaVsxNF0rdFsxNV0qaVsxNV1dfSxzLm11bHRpcGx5PWZ1bmN0aW9uKHQsaSl7cmV0dXJuW3RbMF0qaVswXSt0WzRdKmlbMV0rdFs4XSppWzJdLHRbMV0qaVswXSt0WzVdKmlbMV0rdFs5XSppWzJdLHRbMl0qaVswXSt0WzZdKmlbMV0rdFsxMF0qaVsyXSwwLHRbMF0qaVs0XSt0WzRdKmlbNV0rdFs4XSppWzZdLHRbMV0qaVs0XSt0WzVdKmlbNV0rdFs5XSppWzZdLHRbMl0qaVs0XSt0WzZdKmlbNV0rdFsxMF0qaVs2XSwwLHRbMF0qaVs4XSt0WzRdKmlbOV0rdFs4XSppWzEwXSx0WzFdKmlbOF0rdFs1XSppWzldK3RbOV0qaVsxMF0sdFsyXSppWzhdK3RbNl0qaVs5XSt0WzEwXSppWzEwXSwwLHRbMF0qaVsxMl0rdFs0XSppWzEzXSt0WzhdKmlbMTRdK3RbMTJdLHRbMV0qaVsxMl0rdFs1XSppWzEzXSt0WzldKmlbMTRdK3RbMTNdLHRbMl0qaVsxMl0rdFs2XSppWzEzXSt0WzEwXSppWzE0XSt0WzE0XSwxXVxufSxzLnRoZW5Nb3ZlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGlbMl18fChpWzJdPTApLFt0WzBdLHRbMV0sdFsyXSwwLHRbNF0sdFs1XSx0WzZdLDAsdFs4XSx0WzldLHRbMTBdLDAsdFsxMl0raVswXSx0WzEzXStpWzFdLHRbMTRdK2lbMl0sMV19LHMubW92ZVRoZW49ZnVuY3Rpb24odCxpKXt0WzJdfHwodFsyXT0wKTt2YXIgZT10WzBdKmlbMF0rdFsxXSppWzRdK3RbMl0qaVs4XSxuPXRbMF0qaVsxXSt0WzFdKmlbNV0rdFsyXSppWzldLG89dFswXSppWzJdK3RbMV0qaVs2XSt0WzJdKmlbMTBdO3JldHVybiBzLnRoZW5Nb3ZlKGksW2UsbixvXSl9LHMudHJhbnNsYXRlPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksWzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLHQsaSxlLDFdfSxzLnRoZW5TY2FsZT1mdW5jdGlvbih0LGkpe3JldHVybltpWzBdKnRbMF0saVsxXSp0WzFdLGlbMl0qdFsyXSwwLGlbMF0qdFs0XSxpWzFdKnRbNV0saVsyXSp0WzZdLDAsaVswXSp0WzhdLGlbMV0qdFs5XSxpWzJdKnRbMTBdLDAsaVswXSp0WzEyXSxpWzFdKnRbMTNdLGlbMl0qdFsxNF0sMV19LHMuc2NhbGU9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx2b2lkIDA9PT1pJiYoaT10KSxbdCwwLDAsMCwwLGksMCwwLDAsMCxlLDAsMCwwLDAsMV19LHMucm90YXRlWD1mdW5jdGlvbih0KXt2YXIgaT1NYXRoLmNvcyh0KSxlPU1hdGguc2luKHQpO3JldHVyblsxLDAsMCwwLDAsaSxlLDAsMCwtZSxpLDAsMCwwLDAsMV19LHMucm90YXRlWT1mdW5jdGlvbih0KXt2YXIgaT1NYXRoLmNvcyh0KSxlPU1hdGguc2luKHQpO3JldHVybltpLDAsLWUsMCwwLDEsMCwwLGUsMCxpLDAsMCwwLDAsMV19LHMucm90YXRlWj1mdW5jdGlvbih0KXt2YXIgaT1NYXRoLmNvcyh0KSxlPU1hdGguc2luKHQpO3JldHVybltpLGUsMCwwLC1lLGksMCwwLDAsMCwxLDAsMCwwLDAsMV19LHMucm90YXRlPWZ1bmN0aW9uKHQsaSxlKXt2YXIgbj1NYXRoLmNvcyh0KSxvPU1hdGguc2luKHQpLHM9TWF0aC5jb3MoaSkscj1NYXRoLnNpbihpKSxhPU1hdGguY29zKGUpLGg9TWF0aC5zaW4oZSksYz1bcyphLG4qaCtvKnIqYSxvKmgtbipyKmEsMCwtcypoLG4qYS1vKnIqaCxvKmErbipyKmgsMCxyLC1vKnMsbipzLDAsMCwwLDAsMV07cmV0dXJuIGN9LHMucm90YXRlQXhpcz1mdW5jdGlvbih0LGkpe3ZhciBlPU1hdGguc2luKGkpLG49TWF0aC5jb3MoaSksbz0xLW4scz10WzBdKnRbMF0qbyxyPXRbMF0qdFsxXSpvLGE9dFswXSp0WzJdKm8saD10WzFdKnRbMV0qbyxjPXRbMV0qdFsyXSpvLHA9dFsyXSp0WzJdKm8sdT10WzBdKmUsbD10WzFdKmUsZj10WzJdKmUsZD1bcytuLHIrZixhLWwsMCxyLWYsaCtuLGMrdSwwLGErbCxjLXUscCtuLDAsMCwwLDAsMV07cmV0dXJuIGR9LHMuYWJvdXRPcmlnaW49ZnVuY3Rpb24odCxpKXt2YXIgZT10WzBdLSh0WzBdKmlbMF0rdFsxXSppWzRdK3RbMl0qaVs4XSksbj10WzFdLSh0WzBdKmlbMV0rdFsxXSppWzVdK3RbMl0qaVs5XSksbz10WzJdLSh0WzBdKmlbMl0rdFsxXSppWzZdK3RbMl0qaVsxMF0pO3JldHVybiBzLnRoZW5Nb3ZlKGksW2UsbixvXSl9LHMuc2tldz1mdW5jdGlvbih0LGksZSl7cmV0dXJuWzEsTWF0aC50YW4oaSksMCwwLE1hdGgudGFuKGUpLDEsMCwwLDAsTWF0aC50YW4odCksMSwwLDAsMCwwLDFdfSxzLnNrZXdYPWZ1bmN0aW9uKHQpe3JldHVyblsxLDAsMCwwLE1hdGgudGFuKHQpLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV19LHMuc2tld1k9ZnVuY3Rpb24odCl7cmV0dXJuWzEsTWF0aC50YW4odCksMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXX0scy5wZXJzcGVjdGl2ZT1mdW5jdGlvbih0KXtyZXR1cm5bMSwwLDAsMCwwLDEsMCwwLDAsMCwxLC0xL3QsMCwwLDAsMV19LHMuZ2V0VHJhbnNsYXRlPWZ1bmN0aW9uKHQpe3JldHVyblt0WzEyXSx0WzEzXSx0WzE0XV19LHMuaW52ZXJzZT1mdW5jdGlvbih0KXt2YXIgaT10WzVdKnRbMTBdLXRbNl0qdFs5XSxlPXRbNF0qdFsxMF0tdFs2XSp0WzhdLG49dFs0XSp0WzldLXRbNV0qdFs4XSxvPXRbMV0qdFsxMF0tdFsyXSp0WzldLHM9dFswXSp0WzEwXS10WzJdKnRbOF0scj10WzBdKnRbOV0tdFsxXSp0WzhdLGE9dFsxXSp0WzZdLXRbMl0qdFs1XSxoPXRbMF0qdFs2XS10WzJdKnRbNF0sYz10WzBdKnRbNV0tdFsxXSp0WzRdLHA9dFswXSppLXRbMV0qZSt0WzJdKm4sdT0xL3AsbD1bdSppLC11Km8sdSphLDAsLXUqZSx1KnMsLXUqaCwwLHUqbiwtdSpyLHUqYywwLDAsMCwwLDFdO3JldHVybiBsWzEyXT0tdFsxMl0qbFswXS10WzEzXSpsWzRdLXRbMTRdKmxbOF0sbFsxM109LXRbMTJdKmxbMV0tdFsxM10qbFs1XS10WzE0XSpsWzldLGxbMTRdPS10WzEyXSpsWzJdLXRbMTNdKmxbNl0tdFsxNF0qbFsxMF0sbH0scy50cmFuc3Bvc2U9ZnVuY3Rpb24odCl7cmV0dXJuW3RbMF0sdFs0XSx0WzhdLHRbMTJdLHRbMV0sdFs1XSx0WzldLHRbMTNdLHRbMl0sdFs2XSx0WzEwXSx0WzE0XSx0WzNdLHRbN10sdFsxMV0sdFsxNV1dfSxzLmludGVycHJldD1mdW5jdGlvbih0KXt2YXIgaT1bdFswXSx0WzFdLHRbMl1dLHI9byhpWzBdKSxhPW4oaSksaD1baVswXStyKmEsaVsxXSxpWzJdXSxjPTIvZShoKTtpZihjPj0xLzApcmV0dXJue3RyYW5zbGF0ZTpzLmdldFRyYW5zbGF0ZSh0KSxyb3RhdGU6WzAsMCwwXSxzY2FsZTpbMCwwLDBdLHNrZXc6WzAsMCwwXX07dmFyIHA9WzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDFdO3BbMF09MS1jKmhbMF0qaFswXSxwWzVdPTEtYypoWzFdKmhbMV0scFsxMF09MS1jKmhbMl0qaFsyXSxwWzFdPS1jKmhbMF0qaFsxXSxwWzJdPS1jKmhbMF0qaFsyXSxwWzZdPS1jKmhbMV0qaFsyXSxwWzRdPXBbMV0scFs4XT1wWzJdLHBbOV09cFs2XTt2YXIgdT1zLm11bHRpcGx5KHAsdCksbD1bdVs1XSx1WzZdXSxmPW8obFswXSksZD1uKGwpLF89W2xbMF0rZipkLGxbMV1dLHk9Mi9lKF8pLGc9WzEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDFdO2dbNV09MS15Kl9bMF0qX1swXSxnWzEwXT0xLXkqX1sxXSpfWzFdLGdbNl09LXkqX1swXSpfWzFdLGdbOV09Z1s2XTt2YXIgdj1zLm11bHRpcGx5KGcscCksbT1zLm11bHRpcGx5KHYsdCksTz1zLnNjYWxlKG1bMF08MD8tMToxLG1bNV08MD8tMToxLG1bMTBdPDA/LTE6MSk7bT1zLm11bHRpcGx5KG0sTyksdj1zLm11bHRpcGx5KE8sdik7dmFyIFM9e307cmV0dXJuIFMudHJhbnNsYXRlPXMuZ2V0VHJhbnNsYXRlKHQpLFMucm90YXRlPVtNYXRoLmF0YW4yKC12WzZdLHZbMTBdKSxNYXRoLmFzaW4odlsyXSksTWF0aC5hdGFuMigtdlsxXSx2WzBdKV0sUy5yb3RhdGVbMF18fChTLnJvdGF0ZVswXT0wLFMucm90YXRlWzJdPU1hdGguYXRhbjIodls0XSx2WzVdKSksUy5zY2FsZT1bbVswXSxtWzVdLG1bMTBdXSxTLnNrZXc9W01hdGguYXRhbjIobVs5XSxTLnNjYWxlWzJdKSxNYXRoLmF0YW4yKG1bOF0sUy5zY2FsZVsyXSksTWF0aC5hdGFuMihtWzRdLFMuc2NhbGVbMF0pXSxNYXRoLmFicyhTLnJvdGF0ZVswXSkrTWF0aC5hYnMoUy5yb3RhdGVbMl0pPjEuNSpNYXRoLlBJJiYoUy5yb3RhdGVbMV09TWF0aC5QSS1TLnJvdGF0ZVsxXSxTLnJvdGF0ZVsxXT5NYXRoLlBJJiYoUy5yb3RhdGVbMV0tPTIqTWF0aC5QSSksUy5yb3RhdGVbMV08LU1hdGguUEkmJihTLnJvdGF0ZVsxXSs9MipNYXRoLlBJKSxTLnJvdGF0ZVswXTwwP1Mucm90YXRlWzBdKz1NYXRoLlBJOlMucm90YXRlWzBdLT1NYXRoLlBJLFMucm90YXRlWzJdPDA/Uy5yb3RhdGVbMl0rPU1hdGguUEk6Uy5yb3RhdGVbMl0tPU1hdGguUEkpLFN9LHMuYXZlcmFnZT1mdW5jdGlvbih0LGksZSl7ZT12b2lkIDA9PT1lPy41OmU7Zm9yKHZhciBuPXMuaW50ZXJwcmV0KHQpLG89cy5pbnRlcnByZXQoaSkscj17dHJhbnNsYXRlOlswLDAsMF0scm90YXRlOlswLDAsMF0sc2NhbGU6WzAsMCwwXSxza2V3OlswLDAsMF19LGE9MDszPmE7YSsrKXIudHJhbnNsYXRlW2FdPSgxLWUpKm4udHJhbnNsYXRlW2FdK2Uqby50cmFuc2xhdGVbYV0sci5yb3RhdGVbYV09KDEtZSkqbi5yb3RhdGVbYV0rZSpvLnJvdGF0ZVthXSxyLnNjYWxlW2FdPSgxLWUpKm4uc2NhbGVbYV0rZSpvLnNjYWxlW2FdLHIuc2tld1thXT0oMS1lKSpuLnNrZXdbYV0rZSpvLnNrZXdbYV07cmV0dXJuIHMuYnVpbGQocil9LHMuYnVpbGQ9ZnVuY3Rpb24odCl7dmFyIGk9cy5zY2FsZSh0LnNjYWxlWzBdLHQuc2NhbGVbMV0sdC5zY2FsZVsyXSksZT1zLnNrZXcodC5za2V3WzBdLHQuc2tld1sxXSx0LnNrZXdbMl0pLG49cy5yb3RhdGUodC5yb3RhdGVbMF0sdC5yb3RhdGVbMV0sdC5yb3RhdGVbMl0pO3JldHVybiBzLnRoZW5Nb3ZlKHMubXVsdGlwbHkocy5tdWx0aXBseShuLGUpLGkpLHQudHJhbnNsYXRlKX0scy5lcXVhbHM9ZnVuY3Rpb24odCxpKXtyZXR1cm4hcy5ub3RFcXVhbHModCxpKX0scy5ub3RFcXVhbHM9ZnVuY3Rpb24odCxpKXtyZXR1cm4gdD09PWk/ITE6ISh0JiZpKXx8dFsxMl0hPT1pWzEyXXx8dFsxM10hPT1pWzEzXXx8dFsxNF0hPT1pWzE0XXx8dFswXSE9PWlbMF18fHRbMV0hPT1pWzFdfHx0WzJdIT09aVsyXXx8dFs0XSE9PWlbNF18fHRbNV0hPT1pWzVdfHx0WzZdIT09aVs2XXx8dFs4XSE9PWlbOF18fHRbOV0hPT1pWzldfHx0WzEwXSE9PWlbMTBdfSxzLm5vcm1hbGl6ZVJvdGF0aW9uPWZ1bmN0aW9uKHQpe3ZhciBpPXQuc2xpY2UoMCk7Zm9yKChpWzBdPT09LjUqTWF0aC5QSXx8aVswXT09PS41Ki1NYXRoLlBJKSYmKGlbMF09LWlbMF0saVsxXT1NYXRoLlBJLWlbMV0saVsyXS09TWF0aC5QSSksaVswXT4uNSpNYXRoLlBJJiYoaVswXT1pWzBdLU1hdGguUEksaVsxXT1NYXRoLlBJLWlbMV0saVsyXS09TWF0aC5QSSksaVswXTwuNSotTWF0aC5QSSYmKGlbMF09aVswXStNYXRoLlBJLGlbMV09LU1hdGguUEktaVsxXSxpWzJdLT1NYXRoLlBJKTtpWzFdPC1NYXRoLlBJOylpWzFdKz0yKk1hdGguUEk7Zm9yKDtpWzFdPj1NYXRoLlBJOylpWzFdLT0yKk1hdGguUEk7Zm9yKDtpWzJdPC1NYXRoLlBJOylpWzJdKz0yKk1hdGguUEk7Zm9yKDtpWzJdPj1NYXRoLlBJOylpWzJdLT0yKk1hdGguUEk7cmV0dXJuIGl9LHMuaW5Gcm9udD1bMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLC4wMDEsMV0scy5iZWhpbmQ9WzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwtLjAwMSwxXSxpLmV4cG9ydHM9c30se31dLDE2OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5fbm9kZT1uZXcgcyx0aGlzLl9ldmVudElucHV0PW5ldyBuLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBuLG4uc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRJbnB1dCksbi5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpLHRoaXMub3B0aW9ucz1yLmNsb25lKHRoaXMuY29uc3RydWN0b3IuREVGQVVMVF9PUFRJT05TfHxlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IG8odGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCl9dmFyIG49dChcIi4vRXZlbnRIYW5kbGVyXCIpLG89dChcIi4vT3B0aW9uc01hbmFnZXJcIikscz10KFwiLi9SZW5kZXJOb2RlXCIpLHI9dChcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCIpO2UuREVGQVVMVF9PUFRJT05TPXt9LGUucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnModCl9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dGhpcy5fb3B0aW9uc01hbmFnZXIucGF0Y2godCl9LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlLmFkZC5hcHBseSh0aGlzLl9ub2RlLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLl9hZGQ9ZS5wcm90b3R5cGUuYWRkLGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlLnJlbmRlcigpfSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGUmJnRoaXMuX25vZGUuZ2V0U2l6ZT90aGlzLl9ub2RlLmdldFNpemUuYXBwbHkodGhpcy5fbm9kZSxhcmd1bWVudHMpfHx0aGlzLm9wdGlvbnMuc2l6ZTp0aGlzLm9wdGlvbnMuc2l6ZX0saS5leHBvcnRzPWV9LHtcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTUsXCIuL0V2ZW50SGFuZGxlclwiOjcsXCIuL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuL1JlbmRlck5vZGVcIjoxMX1dLDE3OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dHx8KHQ9W10pLHQgaW5zdGFuY2VvZiBBcnJheSYmKHQ9e2FycmF5OnR9KSx0aGlzLl89bnVsbCx0aGlzLmluZGV4PXQuaW5kZXh8fDAsdC5hcnJheT90aGlzLl89bmV3IHRoaXMuY29uc3RydWN0b3IuQmFja2luZyh0LmFycmF5KTp0Ll8mJih0aGlzLl89dC5fKSx0aGlzLmluZGV4PT09dGhpcy5fLmZpcnN0SW5kZXgmJih0aGlzLl8uZmlyc3ROb2RlPXRoaXMpLHRoaXMuaW5kZXg9PT10aGlzLl8uZmlyc3RJbmRleCt0aGlzLl8uYXJyYXkubGVuZ3RoLTEmJih0aGlzLl8ubGFzdE5vZGU9dGhpcyksdm9pZCAwIT09dC5sb29wJiYodGhpcy5fLmxvb3A9dC5sb29wKSx2b2lkIDAhPT10LnRyYWNrU2l6ZSYmKHRoaXMuXy50cmFja1NpemU9dC50cmFja1NpemUpLHRoaXMuX3ByZXZpb3VzTm9kZT1udWxsLHRoaXMuX25leHROb2RlPW51bGx9ZS5CYWNraW5nPWZ1bmN0aW9uKHQpe3RoaXMuYXJyYXk9dCx0aGlzLmZpcnN0SW5kZXg9MCx0aGlzLmxvb3A9ITEsdGhpcy5maXJzdE5vZGU9bnVsbCx0aGlzLmxhc3ROb2RlPW51bGwsdGhpcy5jdW11bGF0aXZlU2l6ZXM9W1swLDBdXSx0aGlzLnNpemVEaXJ0eT0hMCx0aGlzLnRyYWNrU2l6ZT0hMX0sZS5CYWNraW5nLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbih0KXt2YXIgaT10LXRoaXMuZmlyc3RJbmRleDtyZXR1cm4gMD5pfHxpPj10aGlzLmFycmF5Lmxlbmd0aD9udWxsOnRoaXMuYXJyYXlbaV19LGUuQmFja2luZy5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCxpKXt0aGlzLmFycmF5W3QtdGhpcy5maXJzdEluZGV4XT1pfSxlLkJhY2tpbmcucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3VtdWxhdGl2ZVNpemVzW3RdfSxlLkJhY2tpbmcucHJvdG90eXBlLmNhbGN1bGF0ZVNpemU9ZnVuY3Rpb24odCl7dD10fHx0aGlzLmFycmF5Lmxlbmd0aDtmb3IodmFyIGk9WzAsMF0sZT0wO3Q+ZTtlKyspe3ZhciBuPXRoaXMuYXJyYXlbZV0uZ2V0U2l6ZSgpO2lmKCFuKXJldHVybiB2b2lkIDA7dm9pZCAwIT09aVswXSYmKHZvaWQgMD09PW5bMF0/aVswXT12b2lkIDA6aVswXSs9blswXSksdm9pZCAwIT09aVsxXSYmKHZvaWQgMD09PW5bMV0/aVsxXT12b2lkIDA6aVsxXSs9blsxXSksdGhpcy5jdW11bGF0aXZlU2l6ZXNbZSsxXT1pLnNsaWNlKCl9cmV0dXJuIHRoaXMuc2l6ZURpcnR5PSExLGl9LGUuQmFja2luZy5wcm90b3R5cGUucmVpbmRleD1mdW5jdGlvbih0LGksZSl7aWYodGhpcy5hcnJheVswXSl7Zm9yKHZhciBuPTAsbz10aGlzLmZpcnN0SW5kZXgscz1lLWkscj10aGlzLmZpcnN0Tm9kZTt0LTE+bzspcj1yLmdldE5leHQoKSxvKys7dmFyIGE9cjtmb3Iobj0wO2k+bjtuKyspcj1yLmdldE5leHQoKSxyJiYoci5fcHJldmlvdXNOb2RlPWEpO3ZhciBoPXI/ci5nZXROZXh0KCk6bnVsbDtmb3IoYS5fbmV4dE5vZGU9bnVsbCxyPWEsbj0wO2U+bjtuKyspcj1yLmdldE5leHQoKTtpZihvKz1lLHIhPT1oJiYoci5fbmV4dE5vZGU9aCxoJiYoaC5fcHJldmlvdXNOb2RlPXIpKSxoKWZvcihyPWgsbysrO3ImJm88dGhpcy5hcnJheS5sZW5ndGgrdGhpcy5maXJzdEluZGV4OylyLl9uZXh0Tm9kZT9yLmluZGV4Kz1zOnIuaW5kZXg9byxyPXIuZ2V0TmV4dCgpLG8rKzt0aGlzLnRyYWNrU2l6ZSYmKHRoaXMuc2l6ZURpcnR5PSEwKX19LGUucHJvdG90eXBlLmdldFByZXZpb3VzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fLmFycmF5Lmxlbmd0aDtyZXR1cm4gdD90aGlzLmluZGV4PT09dGhpcy5fLmZpcnN0SW5kZXg/dGhpcy5fLmxvb3A/KHRoaXMuX3ByZXZpb3VzTm9kZT10aGlzLl8ubGFzdE5vZGV8fG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtfOnRoaXMuXyxpbmRleDp0aGlzLl8uZmlyc3RJbmRleCt0LTF9KSx0aGlzLl9wcmV2aW91c05vZGUuX25leHROb2RlPXRoaXMpOnRoaXMuX3ByZXZpb3VzTm9kZT1udWxsOnRoaXMuX3ByZXZpb3VzTm9kZXx8KHRoaXMuX3ByZXZpb3VzTm9kZT1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih7Xzp0aGlzLl8saW5kZXg6dGhpcy5pbmRleC0xfSksdGhpcy5fcHJldmlvdXNOb2RlLl9uZXh0Tm9kZT10aGlzKTp0aGlzLl9wcmV2aW91c05vZGU9bnVsbCx0aGlzLl9wcmV2aW91c05vZGV9LGUucHJvdG90eXBlLmdldE5leHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl8uYXJyYXkubGVuZ3RoO3JldHVybiB0P3RoaXMuaW5kZXg9PT10aGlzLl8uZmlyc3RJbmRleCt0LTE/dGhpcy5fLmxvb3A/KHRoaXMuX25leHROb2RlPXRoaXMuXy5maXJzdE5vZGV8fG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtfOnRoaXMuXyxpbmRleDp0aGlzLl8uZmlyc3RJbmRleH0pLHRoaXMuX25leHROb2RlLl9wcmV2aW91c05vZGU9dGhpcyk6dGhpcy5fbmV4dE5vZGU9bnVsbDp0aGlzLl9uZXh0Tm9kZXx8KHRoaXMuX25leHROb2RlPW5ldyB0aGlzLmNvbnN0cnVjdG9yKHtfOnRoaXMuXyxpbmRleDp0aGlzLmluZGV4KzF9KSx0aGlzLl9uZXh0Tm9kZS5fcHJldmlvdXNOb2RlPXRoaXMpOnRoaXMuX25leHROb2RlPW51bGwsdGhpcy5fbmV4dE5vZGV9LGUucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuXy5hcnJheS5pbmRleE9mKHQpfSxlLnByb3RvdHlwZS5nZXRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4fSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiXCIrdGhpcy5pbmRleH0sZS5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbigpe3RoaXMuXy5hcnJheS51bnNoaWZ0LmFwcGx5KHRoaXMuXy5hcnJheSxhcmd1bWVudHMpLHRoaXMuXy5maXJzdEluZGV4LT1hcmd1bWVudHMubGVuZ3RoLHRoaXMuXy50cmFja1NpemUmJih0aGlzLl8uc2l6ZURpcnR5PSEwKX0sZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbigpe3RoaXMuXy5hcnJheS5wdXNoLmFwcGx5KHRoaXMuXy5hcnJheSxhcmd1bWVudHMpLHRoaXMuXy50cmFja1NpemUmJih0aGlzLl8uc2l6ZURpcnR5PSEwKX0sZS5wcm90b3R5cGUuc3BsaWNlPWZ1bmN0aW9uKHQsaSl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3RoaXMuXy5hcnJheS5zcGxpY2UuYXBwbHkodGhpcy5fLmFycmF5LFt0LXRoaXMuXy5maXJzdEluZGV4LGldLmNvbmNhdChlKSksdGhpcy5fLnJlaW5kZXgodCxpLGUubGVuZ3RoKX0sZS5wcm90b3R5cGUuc3dhcD1mdW5jdGlvbih0KXt2YXIgaT10LmdldCgpLGU9dGhpcy5nZXQoKTt0aGlzLl8uc2V0VmFsdWUodGhpcy5pbmRleCxpKSx0aGlzLl8uc2V0VmFsdWUodC5pbmRleCxlKTt2YXIgbj10aGlzLl9wcmV2aW91c05vZGUsbz10aGlzLl9uZXh0Tm9kZSxzPXRoaXMuaW5kZXgscj10Ll9wcmV2aW91c05vZGUsYT10Ll9uZXh0Tm9kZSxoPXQuaW5kZXg7dGhpcy5pbmRleD1oLHRoaXMuX3ByZXZpb3VzTm9kZT1yPT09dGhpcz90OnIsdGhpcy5fcHJldmlvdXNOb2RlJiYodGhpcy5fcHJldmlvdXNOb2RlLl9uZXh0Tm9kZT10aGlzKSx0aGlzLl9uZXh0Tm9kZT1hPT09dGhpcz90OmEsdGhpcy5fbmV4dE5vZGUmJih0aGlzLl9uZXh0Tm9kZS5fcHJldmlvdXNOb2RlPXRoaXMpLHQuaW5kZXg9cyx0Ll9wcmV2aW91c05vZGU9bj09PXQ/dGhpczpuLHQuX3ByZXZpb3VzTm9kZSYmKHQuX3ByZXZpb3VzTm9kZS5fbmV4dE5vZGU9dCksdC5fbmV4dE5vZGU9bz09PXQ/dGhpczpvLHQuX25leHROb2RlJiYodC5fbmV4dE5vZGUuX3ByZXZpb3VzTm9kZT10KSx0aGlzLmluZGV4PT09dGhpcy5fLmZpcnN0SW5kZXg/dGhpcy5fLmZpcnN0Tm9kZT10aGlzOnRoaXMuaW5kZXg9PT10aGlzLl8uZmlyc3RJbmRleCt0aGlzLl8uYXJyYXkubGVuZ3RoLTEmJih0aGlzLl8ubGFzdE5vZGU9dGhpcyksdC5pbmRleD09PXRoaXMuXy5maXJzdEluZGV4P3RoaXMuXy5maXJzdE5vZGU9dDp0LmluZGV4PT09dGhpcy5fLmZpcnN0SW5kZXgrdGhpcy5fLmFycmF5Lmxlbmd0aC0xJiYodGhpcy5fLmxhc3ROb2RlPXQpLHRoaXMuXy50cmFja1NpemUmJih0aGlzLl8uc2l6ZURpcnR5PSEwKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRWYWx1ZSh0aGlzLmluZGV4KX0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0KCk7cmV0dXJuIHQ/dC5nZXRTaXplKCk6bnVsbH0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dGhpcy5fLnRyYWNrU2l6ZSYmdGhpcy5fLnNpemVEaXJ0eSYmdGhpcy5fLmNhbGN1bGF0ZVNpemUoKTt2YXIgdD10aGlzLmdldCgpO3JldHVybiB0P3QucmVuZGVyLmFwcGx5KHQsYXJndW1lbnRzKTpudWxsfSxpLmV4cG9ydHM9ZX0se31dLDE4OltmdW5jdGlvbih0LGkpe2kuZXhwb3J0cz17Q29udGV4dDp0KFwiLi9Db250ZXh0XCIpLEVsZW1lbnRBbGxvY2F0b3I6dChcIi4vRWxlbWVudEFsbG9jYXRvclwiKSxFbGVtZW50T3V0cHV0OnQoXCIuL0VsZW1lbnRPdXRwdXRcIiksRW5naW5lOnQoXCIuL0VuZ2luZVwiKSxFbnRpdHk6dChcIi4vRW50aXR5XCIpLEV2ZW50RW1pdHRlcjp0KFwiLi9FdmVudEVtaXR0ZXJcIiksRXZlbnRIYW5kbGVyOnQoXCIuL0V2ZW50SGFuZGxlclwiKSxHcm91cDp0KFwiLi9Hcm91cFwiKSxNb2RpZmllcjp0KFwiLi9Nb2RpZmllclwiKSxPcHRpb25zTWFuYWdlcjp0KFwiLi9PcHRpb25zTWFuYWdlclwiKSxSZW5kZXJOb2RlOnQoXCIuL1JlbmRlck5vZGVcIiksU2NlbmU6dChcIi4vU2NlbmVcIiksU3BlY1BhcnNlcjp0KFwiLi9TcGVjUGFyc2VyXCIpLFN1cmZhY2U6dChcIi4vU3VyZmFjZVwiKSxUcmFuc2Zvcm06dChcIi4vVHJhbnNmb3JtXCIpLFZpZXc6dChcIi4vVmlld1wiKSxWaWV3U2VxdWVuY2U6dChcIi4vVmlld1NlcXVlbmNlXCIpfX0se1wiLi9Db250ZXh0XCI6MSxcIi4vRWxlbWVudEFsbG9jYXRvclwiOjIsXCIuL0VsZW1lbnRPdXRwdXRcIjozLFwiLi9FbmdpbmVcIjo0LFwiLi9FbnRpdHlcIjo1LFwiLi9FdmVudEVtaXR0ZXJcIjo2LFwiLi9FdmVudEhhbmRsZXJcIjo3LFwiLi9Hcm91cFwiOjgsXCIuL01vZGlmaWVyXCI6OSxcIi4vT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4vUmVuZGVyTm9kZVwiOjExLFwiLi9TY2VuZVwiOjEyLFwiLi9TcGVjUGFyc2VyXCI6MTMsXCIuL1N1cmZhY2VcIjoxNCxcIi4vVHJhbnNmb3JtXCI6MTUsXCIuL1ZpZXdcIjoxNixcIi4vVmlld1NlcXVlbmNlXCI6MTd9XSwxOTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuZGlzcGF0Y2hlcnM9e30sdGhpcy5jdXJyTW9kZT12b2lkIDAsdGhpcy5zZXRNb2RlKHQpfXZhciBuPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKTtlLnByb3RvdHlwZS5zZXRNb2RlPWZ1bmN0aW9uKHQpe2lmKHQhPT10aGlzLmN1cnJNb2RlKXt2YXIgaT10aGlzLmN1cnJNb2RlO3RoaXMuZGlzcGF0Y2hlcnNbdGhpcy5jdXJyTW9kZV0mJnRoaXMuZGlzcGF0Y2hlcnNbdGhpcy5jdXJyTW9kZV0udHJpZ2dlcihcInVucGlwZVwiKSx0aGlzLmN1cnJNb2RlPXQsdGhpcy5kaXNwYXRjaGVyc1t0XSYmdGhpcy5kaXNwYXRjaGVyc1t0XS5lbWl0KFwicGlwZVwiKSx0aGlzLmVtaXQoXCJjaGFuZ2VcIix7ZnJvbTppLHRvOnR9KX19LGUucHJvdG90eXBlLmZvck1vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlzcGF0Y2hlcnNbdF18fCh0aGlzLmRpc3BhdGNoZXJzW3RdPW5ldyBuKSx0aGlzLmRpc3BhdGNoZXJzW3RdfSxlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsaSl7aWYodm9pZCAwPT09dGhpcy5jdXJyTW9kZSlyZXR1cm4hMTtpfHwoaT17fSk7dmFyIGU9dGhpcy5kaXNwYXRjaGVyc1t0aGlzLmN1cnJNb2RlXTtyZXR1cm4gZT9lLnRyaWdnZXIodCxpKTp2b2lkIDB9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjd9XSwyMDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe24uY2FsbCh0aGlzKSx0aGlzLl9jb25kaXRpb249dH12YXIgbj10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHRoaXMuX2NvbmRpdGlvbih0LGkpP24ucHJvdG90eXBlLmVtaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH0sZS5wcm90b3R5cGUudHJpZ2dlcj1lLnByb3RvdHlwZS5lbWl0LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjd9XSwyMTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe24uY2FsbCh0aGlzKSx0aGlzLl9tYXBwaW5nRnVuY3Rpb249dH12YXIgbj10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5zdWJzY3JpYmU9bnVsbCxlLnByb3RvdHlwZS51bnN1YnNjcmliZT1udWxsLGUucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxpKXt2YXIgZT10aGlzLl9tYXBwaW5nRnVuY3Rpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO2UmJmUuZW1pdCBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZlLmVtaXQodCxpKX0sZS5wcm90b3R5cGUudHJpZ2dlcj1lLnByb3RvdHlwZS5lbWl0LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjd9XSwyMjpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0V2ZW50QXJiaXRlcjp0KFwiLi9FdmVudEFyYml0ZXJcIiksRXZlbnRGaWx0ZXI6dChcIi4vRXZlbnRGaWx0ZXJcIiksRXZlbnRNYXBwZXI6dChcIi4vRXZlbnRNYXBwZXJcIil9fSx7XCIuL0V2ZW50QXJiaXRlclwiOjE5LFwiLi9FdmVudEZpbHRlclwiOjIwLFwiLi9FdmVudE1hcHBlclwiOjIxfV0sMjM6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtldmVudHM6dChcIi4vZXZlbnRzXCIpLGNvcmU6dChcIi4vY29yZVwiKSxtYXRoOnQoXCIuL21hdGhcIiksaW5wdXRzOnQoXCIuL2lucHV0c1wiKSxwaHlzaWNzOnQoXCIuL3BoeXNpY3NcIiksbW9kaWZpZXJzOnQoXCIuL21vZGlmaWVyc1wiKSxzdXJmYWNlczp0KFwiLi9zdXJmYWNlc1wiKSx0cmFuc2l0aW9uczp0KFwiLi90cmFuc2l0aW9uc1wiKSx1dGlsaXRpZXM6dChcIi4vdXRpbGl0aWVzXCIpLHZpZXdzOnQoXCIuL3ZpZXdzXCIpLHdpZGdldHM6dChcIi4vd2lkZ2V0c1wiKX19LHtcIi4vY29yZVwiOjE4LFwiLi9ldmVudHNcIjoyMixcIi4vaW5wdXRzXCI6MzYsXCIuL21hdGhcIjo0MixcIi4vbW9kaWZpZXJzXCI6NDcsXCIuL3BoeXNpY3NcIjo3MSxcIi4vc3VyZmFjZXNcIjo4MixcIi4vdHJhbnNpdGlvbnNcIjo5MixcIi4vdXRpbGl0aWVzXCI6OTYsXCIuL3ZpZXdzXCI6MTExLFwiLi93aWRnZXRzXCI6MTE2fV0sMjQ6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0LGkpe3ZvaWQgMD09PWkmJihpPVwidXBkYXRlXCIpLHRoaXMuX3N0YXRlPXQmJnQuZ2V0JiZ0LnNldD90Om5ldyBzKHR8fDApLHRoaXMuX2V2ZW50SW5wdXQ9bmV3IG8sby5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudElucHV0KSx0aGlzLl9ldmVudElucHV0Lm9uKGksbi5iaW5kKHRoaXMpKX1mdW5jdGlvbiBuKHQpe3ZhciBpPXQuZGVsdGEsZT10aGlzLmdldCgpO2lmKGkuY29uc3RydWN0b3I9PT1lLmNvbnN0cnVjdG9yKXt2YXIgbj1pIGluc3RhbmNlb2YgQXJyYXk/W2VbMF0raVswXSxlWzFdK2lbMV1dOmUraTt0aGlzLnNldChuKX19dmFyIG89dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLHM9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCIpO2UucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXQoKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0YXRlLnNldCh0KX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODh9XSwyNTpbZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RvcFByb3BhZ2F0aW9uKCksITF9LCEwKX12YXIgaT1cIm9udG91Y2hzdGFydFwiaW4gd2luZG93O2kmJih0KFwibW91c2Vkb3duXCIpLHQoXCJtb3VzZW1vdmVcIiksdChcIm1vdXNldXBcIiksdChcIm1vdXNlbGVhdmVcIikpfSx7fV0sMjY6W2Z1bmN0aW9uKCl7IWZ1bmN0aW9uKCl7aWYod2luZG93LkN1c3RvbUV2ZW50KXt2YXIgdD0zMDAsaT01MDAsZT17fSxuPXt9LG89RGF0ZS5ub3c7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24odCl7Zm9yKHZhciBpPW8oKSxuPTA7bjx0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtuKyspe3ZhciBzPXQuY2hhbmdlZFRvdWNoZXNbbl07ZVtzLmlkZW50aWZpZXJdPWl9fSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixmdW5jdGlvbih0KXtmb3IodmFyIGk9MDtpPHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoO2krKyl7dmFyIG49dC5jaGFuZ2VkVG91Y2hlc1tpXTtkZWxldGUgZVtuLmlkZW50aWZpZXJdfX0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixmdW5jdGlvbihpKXtmb3IodmFyIHM9bygpLHI9MDtyPGkuY2hhbmdlZFRvdWNoZXMubGVuZ3RoO3IrKyl7dmFyIGE9aS5jaGFuZ2VkVG91Y2hlc1tyXSxoPWVbYS5pZGVudGlmaWVyXTtpZihoJiZ0PnMtaCl7dmFyIGM9bmV3IHdpbmRvdy5DdXN0b21FdmVudChcImNsaWNrXCIse2J1YmJsZXM6ITAsZGV0YWlsOmF9KTtuW3NdPWksaS50YXJnZXQuZGlzcGF0Y2hFdmVudChjKX1kZWxldGUgZVthLmlkZW50aWZpZXJdfX0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbih0KXt2YXIgZT1vKCk7Zm9yKHZhciBzIGluIG4pe3ZhciByPW5bc107aT5lLXM/dCBpbnN0YW5jZW9mIHdpbmRvdy5Nb3VzZUV2ZW50JiZ0LnRhcmdldD09PXIudGFyZ2V0JiZ0LnN0b3BQcm9wYWdhdGlvbigpOmRlbGV0ZSBuW3NdfX0sITApfX0oKX0se31dLDI3OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCxpKXt0aGlzLl9ldmVudElucHV0PW5ldyBvLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBvLG8uc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRJbnB1dCksby5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpLHRoaXMuX3N5bmNzPXt9LHQmJnRoaXMuYWRkU3luYyh0KSxpJiZ0aGlzLnNldE9wdGlvbnMoaSl9ZnVuY3Rpb24gbih0LGkpe3NbdF0mJih0aGlzLl9zeW5jc1t0XT1uZXcgc1t0XShpKSx0aGlzLnBpcGVTeW5jKHQpKX12YXIgbz10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIik7ZS5ESVJFQ1RJT05fWD0wLGUuRElSRUNUSU9OX1k9MSxlLkRJUkVDVElPTl9aPTI7dmFyIHM9e307ZS5yZWdpc3Rlcj1mdW5jdGlvbih0KXtmb3IodmFyIGkgaW4gdCl7aWYoc1tpXSl7aWYoc1tpXT09PXRbaV0pcmV0dXJuO3Rocm93IG5ldyBFcnJvcihcInRoaXMga2V5IGlzIHJlZ2lzdGVyZWQgdG8gYSBkaWZmZXJlbnQgc3luYyBjbGFzc1wiKX1zW2ldPXRbaV19fSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgaSBpbiB0aGlzLl9zeW5jcyl0aGlzLl9zeW5jc1tpXS5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5waXBlU3luYz1mdW5jdGlvbih0KXt2YXIgaT10aGlzLl9zeW5jc1t0XTt0aGlzLl9ldmVudElucHV0LnBpcGUoaSksaS5waXBlKHRoaXMuX2V2ZW50T3V0cHV0KX0sZS5wcm90b3R5cGUudW5waXBlU3luYz1mdW5jdGlvbih0KXt2YXIgaT10aGlzLl9zeW5jc1t0XTt0aGlzLl9ldmVudElucHV0LnVucGlwZShpKSxpLnVucGlwZSh0aGlzLl9ldmVudE91dHB1dCl9LGUucHJvdG90eXBlLmFkZFN5bmM9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEFycmF5KWZvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKW4uY2FsbCh0aGlzLHRbaV0pO2Vsc2UgaWYodCBpbnN0YW5jZW9mIE9iamVjdClmb3IodmFyIGUgaW4gdCluLmNhbGwodGhpcyxlLHRbZV0pfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3fV0sMjg6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IGgodGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fZXZlbnRJbnB1dD1uZXcgYSx0aGlzLl9ldmVudE91dHB1dD1uZXcgYSxhLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLGEuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLl9ldmVudElucHV0Lm9uKFwibW91c2Vkb3duXCIsbi5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudElucHV0Lm9uKFwibW91c2Vtb3ZlXCIsby5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudElucHV0Lm9uKFwibW91c2V1cFwiLHMuYmluZCh0aGlzKSksdGhpcy5vcHRpb25zLnByb3BvZ2F0ZT90aGlzLl9ldmVudElucHV0Lm9uKFwibW91c2VsZWF2ZVwiLHIuYmluZCh0aGlzKSk6dGhpcy5fZXZlbnRJbnB1dC5vbihcIm1vdXNlbGVhdmVcIixzLmJpbmQodGhpcykpLHRoaXMuX3BheWxvYWQ9e2RlbHRhOm51bGwscG9zaXRpb246bnVsbCx2ZWxvY2l0eTpudWxsLGNsaWVudFg6MCxjbGllbnRZOjAsb2Zmc2V0WDowLG9mZnNldFk6MH0sdGhpcy5fcG9zaXRpb25IaXN0b3J5PVtdLHRoaXMuX3Bvc2l0aW9uPW51bGwsdGhpcy5fcHJldkNvb3JkPXZvaWQgMCx0aGlzLl9wcmV2VGltZT12b2lkIDAsdGhpcy5fZG93bj0hMSx0aGlzLl9tb3ZlZD0hMSx0aGlzLl9kb2N1bWVudEFjdGl2ZT0hMX1mdW5jdGlvbiBuKHQpe3ZhciBpLGU7dGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0JiZ0LnByZXZlbnREZWZhdWx0KCk7dmFyIG49dC5jbGllbnRYLG89dC5jbGllbnRZO3RoaXMuX3ByZXZDb29yZD1bbixvXSx0aGlzLl9wcmV2VGltZT1EYXRlLm5vdygpLHRoaXMuX2Rvd249ITAsdGhpcy5fbW92ZT0hMSx2b2lkIDAhPT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uPyh0aGlzLl9wb3NpdGlvbj0wLGk9MCxlPTApOih0aGlzLl9wb3NpdGlvbj1bMCwwXSxpPVswLDBdLGU9WzAsMF0pO3ZhciBzPXRoaXMuX3BheWxvYWQ7cy5kZWx0YT1pLHMucG9zaXRpb249dGhpcy5fcG9zaXRpb24scy52ZWxvY2l0eT1lLHMuY2xpZW50WD1uLHMuY2xpZW50WT1vLHMub2Zmc2V0WD10Lm9mZnNldFgscy5vZmZzZXRZPXQub2Zmc2V0WSx0aGlzLl9wb3NpdGlvbkhpc3RvcnkucHVzaCh7cG9zaXRpb246cy5wb3NpdGlvbi5zbGljZT9zLnBvc2l0aW9uLnNsaWNlKDApOnMucG9zaXRpb24sdGltZTp0aGlzLl9wcmV2VGltZX0pLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJzdGFydFwiLHMpLHRoaXMuX2RvY3VtZW50QWN0aXZlPSExfWZ1bmN0aW9uIG8odCl7aWYodGhpcy5fcHJldkNvb3JkKXt2YXIgaT10aGlzLl9wcmV2Q29vcmQsbj0odGhpcy5fcHJldlRpbWUsdC5jbGllbnRYKSxvPXQuY2xpZW50WSxzPURhdGUubm93KCkscj1uLWlbMF0sYT1vLWlbMV07dGhpcy5vcHRpb25zLnJhaWxzJiYoTWF0aC5hYnMocik+TWF0aC5hYnMoYSk/YT0wOnI9MCk7dmFyIGgscCx1PU1hdGgubWF4KHMtdGhpcy5fcG9zaXRpb25IaXN0b3J5WzBdLnRpbWUsYyksbD10aGlzLm9wdGlvbnMuc2NhbGU7dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWUuRElSRUNUSU9OX1g/KHA9bCpyLHRoaXMuX3Bvc2l0aW9uKz1wLGg9bCoodGhpcy5fcG9zaXRpb24tdGhpcy5fcG9zaXRpb25IaXN0b3J5WzBdLnBvc2l0aW9uKS91KTp0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPT09ZS5ESVJFQ1RJT05fWT8ocD1sKmEsdGhpcy5fcG9zaXRpb24rPXAsaD1sKih0aGlzLl9wb3NpdGlvbi10aGlzLl9wb3NpdGlvbkhpc3RvcnlbMF0ucG9zaXRpb24pL3UpOihwPVtsKnIsbCphXSxoPVtsKih0aGlzLl9wb3NpdGlvblswXS10aGlzLl9wb3NpdGlvbkhpc3RvcnlbMF0ucG9zaXRpb25bMF0pL3UsbCoodGhpcy5fcG9zaXRpb25bMV0tdGhpcy5fcG9zaXRpb25IaXN0b3J5WzBdLnBvc2l0aW9uWzFdKS91XSx0aGlzLl9wb3NpdGlvblswXSs9cFswXSx0aGlzLl9wb3NpdGlvblsxXSs9cFsxXSk7dmFyIGY9dGhpcy5fcGF5bG9hZDtmLmRlbHRhPXAsZi5wb3NpdGlvbj10aGlzLl9wb3NpdGlvbixmLnZlbG9jaXR5PWgsZi5jbGllbnRYPW4sZi5jbGllbnRZPW8sZi5vZmZzZXRYPXQub2Zmc2V0WCxmLm9mZnNldFk9dC5vZmZzZXRZLHRoaXMuX3Bvc2l0aW9uSGlzdG9yeS5sZW5ndGg9PT10aGlzLm9wdGlvbnMudmVsb2NpdHlTYW1wbGVMZW5ndGgmJnRoaXMuX3Bvc2l0aW9uSGlzdG9yeS5zaGlmdCgpLHRoaXMuX3Bvc2l0aW9uSGlzdG9yeS5wdXNoKHtwb3NpdGlvbjpmLnBvc2l0aW9uLnNsaWNlP2YucG9zaXRpb24uc2xpY2UoMCk6Zi5wb3NpdGlvbix0aW1lOnN9KSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwidXBkYXRlXCIsZiksdGhpcy5fcHJldkNvb3JkPVtuLG9dLHRoaXMuX3ByZXZUaW1lPXMsdGhpcy5fbW92ZT0hMH19ZnVuY3Rpb24gcygpe3RoaXMuX2Rvd24mJih0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwiZW5kXCIsdGhpcy5fcGF5bG9hZCksdGhpcy5fcHJldkNvb3JkPXZvaWQgMCx0aGlzLl9wcmV2VGltZT12b2lkIDAsdGhpcy5fZG93bj0hMSx0aGlzLl9tb3ZlPSExLHRoaXMuX3Bvc2l0aW9uSGlzdG9yeT1bXSl9ZnVuY3Rpb24gcih0KXtpZih0aGlzLl9kb3duJiZ0aGlzLl9tb3ZlJiYhdGhpcy5fZG9jdW1lbnRBY3RpdmUpe3ZhciBpPW8uYmluZCh0aGlzKSxlPWZ1bmN0aW9uKHQpe3MuY2FsbCh0aGlzLHQpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixpKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLGUpfS5iaW5kKHRoaXMsdCk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGkpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsZSksdGhpcy5fZG9jdW1lbnRBY3RpdmU9ITB9fXZhciBhPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxoPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpO2UuREVGQVVMVF9PUFRJT05TPXtkaXJlY3Rpb246dm9pZCAwLHJhaWxzOiExLHNjYWxlOjEscHJvcG9nYXRlOiEwLHZlbG9jaXR5U2FtcGxlTGVuZ3RoOjEwLHByZXZlbnREZWZhdWx0OiEwfSxlLkRJUkVDVElPTl9YPTAsZS5ESVJFQ1RJT05fWT0xO3ZhciBjPTg7ZS5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnN9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTB9XSwyOTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe24uY2FsbCh0aGlzKSx0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IG8odGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fZGlzcGxhY2VtZW50PTAsdGhpcy5fcHJldmlvdXNEaXN0YW5jZT0wfXZhciBuPXQoXCIuL1R3b0ZpbmdlclN5bmNcIiksbz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXtzY2FsZToxfSxlLnByb3RvdHlwZS5fc3RhcnRVcGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5fcHJldmlvdXNEaXN0YW5jZT1uLmNhbGN1bGF0ZURpc3RhbmNlKHRoaXMucG9zQSx0aGlzLnBvc0IpLHRoaXMuX2Rpc3BsYWNlbWVudD0wLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJzdGFydFwiLHtjb3VudDp0LnRvdWNoZXMubGVuZ3RoLHRvdWNoZXM6W3RoaXMudG91Y2hBSWQsdGhpcy50b3VjaEJJZF0sZGlzdGFuY2U6dGhpcy5fZGlzdCxjZW50ZXI6bi5jYWxjdWxhdGVDZW50ZXIodGhpcy5wb3NBLHRoaXMucG9zQil9KX0sZS5wcm90b3R5cGUuX21vdmVVcGRhdGU9ZnVuY3Rpb24odCl7dmFyIGk9bi5jYWxjdWxhdGVEaXN0YW5jZSh0aGlzLnBvc0EsdGhpcy5wb3NCKSxlPW4uY2FsY3VsYXRlQ2VudGVyKHRoaXMucG9zQSx0aGlzLnBvc0IpLG89dGhpcy5vcHRpb25zLnNjYWxlLHM9byooaS10aGlzLl9wcmV2aW91c0Rpc3RhbmNlKSxyPXMvdDt0aGlzLl9wcmV2aW91c0Rpc3RhbmNlPWksdGhpcy5fZGlzcGxhY2VtZW50Kz1zLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJ1cGRhdGVcIix7ZGVsdGE6cyx2ZWxvY2l0eTpyLGRpc3RhbmNlOmksZGlzcGxhY2VtZW50OnRoaXMuX2Rpc3BsYWNlbWVudCxjZW50ZXI6ZSx0b3VjaGVzOlt0aGlzLnRvdWNoQUlkLHRoaXMudG91Y2hCSWRdfSl9LGUucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi9Ud29GaW5nZXJTeW5jXCI6MzV9XSwzMDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe24uY2FsbCh0aGlzKSx0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IG8odGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fYW5nbGU9MCx0aGlzLl9wcmV2aW91c0FuZ2xlPTB9dmFyIG49dChcIi4vVHdvRmluZ2VyU3luY1wiKSxvPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e3NjYWxlOjF9LGUucHJvdG90eXBlLl9zdGFydFVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9hbmdsZT0wLHRoaXMuX3ByZXZpb3VzQW5nbGU9bi5jYWxjdWxhdGVBbmdsZSh0aGlzLnBvc0EsdGhpcy5wb3NCKTt2YXIgaT1uLmNhbGN1bGF0ZUNlbnRlcih0aGlzLnBvc0EsdGhpcy5wb3NCKTt0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwic3RhcnRcIix7Y291bnQ6dC50b3VjaGVzLmxlbmd0aCxhbmdsZTp0aGlzLl9hbmdsZSxjZW50ZXI6aSx0b3VjaGVzOlt0aGlzLnRvdWNoQUlkLHRoaXMudG91Y2hCSWRdfSl9LGUucHJvdG90eXBlLl9tb3ZlVXBkYXRlPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucy5zY2FsZSxlPW4uY2FsY3VsYXRlQW5nbGUodGhpcy5wb3NBLHRoaXMucG9zQiksbz1uLmNhbGN1bGF0ZUNlbnRlcih0aGlzLnBvc0EsdGhpcy5wb3NCKSxzPWkqKGUtdGhpcy5fcHJldmlvdXNBbmdsZSkscj1zL3Q7dGhpcy5fYW5nbGUrPXMsdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInVwZGF0ZVwiLHtkZWx0YTpzLHZlbG9jaXR5OnIsYW5nbGU6dGhpcy5fYW5nbGUsY2VudGVyOm8sdG91Y2hlczpbdGhpcy50b3VjaEFJZCx0aGlzLnRvdWNoQklkXX0pLHRoaXMuX3ByZXZpb3VzQW5nbGU9ZX0sZS5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnN9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuL1R3b0ZpbmdlclN5bmNcIjozNX1dLDMxOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7by5jYWxsKHRoaXMpLHRoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgcyh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLl9zY2FsZUZhY3Rvcj0xLHRoaXMuX3N0YXJ0RGlzdD0wLHRoaXMuX2V2ZW50SW5wdXQub24oXCJwaXBlXCIsbi5iaW5kKHRoaXMpKX1mdW5jdGlvbiBuKCl7dGhpcy50b3VjaEFJZD12b2lkIDAsdGhpcy50b3VjaEJJZD12b2lkIDB9dmFyIG89dChcIi4vVHdvRmluZ2VyU3luY1wiKSxzPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e3NjYWxlOjF9LGUucHJvdG90eXBlLl9zdGFydFVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9zY2FsZUZhY3Rvcj0xLHRoaXMuX3N0YXJ0RGlzdD1vLmNhbGN1bGF0ZURpc3RhbmNlKHRoaXMucG9zQSx0aGlzLnBvc0IpLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJzdGFydFwiLHtjb3VudDp0LnRvdWNoZXMubGVuZ3RoLHRvdWNoZXM6W3RoaXMudG91Y2hBSWQsdGhpcy50b3VjaEJJZF0sZGlzdGFuY2U6dGhpcy5fc3RhcnREaXN0LGNlbnRlcjpvLmNhbGN1bGF0ZUNlbnRlcih0aGlzLnBvc0EsdGhpcy5wb3NCKX0pfSxlLnByb3RvdHlwZS5fbW92ZVVwZGF0ZT1mdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMuc2NhbGUsZT1vLmNhbGN1bGF0ZURpc3RhbmNlKHRoaXMucG9zQSx0aGlzLnBvc0IpLG49by5jYWxjdWxhdGVDZW50ZXIodGhpcy5wb3NBLHRoaXMucG9zQikscz0oZS10aGlzLl9zdGFydERpc3QpL3RoaXMuX3N0YXJ0RGlzdCxyPU1hdGgubWF4KDEraSpzLDApLGE9KHItdGhpcy5fc2NhbGVGYWN0b3IpL3Q7dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInVwZGF0ZVwiLHtkZWx0YTpzLHNjYWxlOnIsdmVsb2NpdHk6YSxkaXN0YW5jZTplLGNlbnRlcjpuLHRvdWNoZXM6W3RoaXMudG91Y2hBSWQsdGhpcy50b3VjaEJJZF19KSx0aGlzLl9zY2FsZUZhY3Rvcj1yfSxlLnByb3RvdHlwZS5nZXRPcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc30sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4vVHdvRmluZ2VyU3luY1wiOjM1fV0sMzI6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IGEodGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fcGF5bG9hZD17ZGVsdGE6bnVsbCxwb3NpdGlvbjpudWxsLHZlbG9jaXR5Om51bGwsc2xpcDohMH0sdGhpcy5fZXZlbnRJbnB1dD1uZXcgcyx0aGlzLl9ldmVudE91dHB1dD1uZXcgcyxzLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLHMuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLl9wb3NpdGlvbj12b2lkIDA9PT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uP1swLDBdOjAsdGhpcy5fcHJldlRpbWU9dm9pZCAwLHRoaXMuX3ByZXZWZWw9dm9pZCAwLHRoaXMuX2V2ZW50SW5wdXQub24oXCJtb3VzZXdoZWVsXCIsby5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudElucHV0Lm9uKFwid2hlZWxcIixvLmJpbmQodGhpcykpLHRoaXMuX2luUHJvZ3Jlc3M9ITEsdGhpcy5fbG9vcEJvdW5kPSExfWZ1bmN0aW9uIG4oKXtpZih0aGlzLl9pblByb2dyZXNzJiZjKCktdGhpcy5fcHJldlRpbWU+dGhpcy5vcHRpb25zLnN0YWxsVGltZSl7dGhpcy5faW5Qcm9ncmVzcz0hMTt2YXIgdD1NYXRoLmFicyh0aGlzLl9wcmV2VmVsKT49dGhpcy5vcHRpb25zLm1pbmltdW1FbmRTcGVlZD90aGlzLl9wcmV2VmVsOjAsaT10aGlzLl9wYXlsb2FkO2kucG9zaXRpb249dGhpcy5fcG9zaXRpb24saS52ZWxvY2l0eT10LGkuc2xpcD0hMCx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwiZW5kXCIsaSl9fWZ1bmN0aW9uIG8odCl7dGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0JiZ0LnByZXZlbnREZWZhdWx0KCksdGhpcy5faW5Qcm9ncmVzc3x8KHRoaXMuX2luUHJvZ3Jlc3M9ITAsdGhpcy5fcG9zaXRpb249dm9pZCAwPT09dGhpcy5vcHRpb25zLmRpcmVjdGlvbj9bMCwwXTowLHk9dGhpcy5fcGF5bG9hZCx5LnNsaXA9ITAseS5wb3NpdGlvbj10aGlzLl9wb3NpdGlvbix5LmNsaWVudFg9dC5jbGllbnRYLHkuY2xpZW50WT10LmNsaWVudFkseS5vZmZzZXRYPXQub2Zmc2V0WCx5Lm9mZnNldFk9dC5vZmZzZXRZLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJzdGFydFwiLHkpLHRoaXMuX2xvb3BCb3VuZHx8KHIub24oXCJwcmVyZW5kZXJcIixuLmJpbmQodGhpcykpLHRoaXMuX2xvb3BCb3VuZD0hMCkpO3ZhciBpPWMoKSxvPXRoaXMuX3ByZXZUaW1lfHxpLHM9dm9pZCAwIT09dC53aGVlbERlbHRhWD90LndoZWVsRGVsdGFYOi10LmRlbHRhWCxhPXZvaWQgMCE9PXQud2hlZWxEZWx0YVk/dC53aGVlbERlbHRhWTotdC5kZWx0YVk7MT09PXQuZGVsdGFNb2RlJiYocyo9dGhpcy5vcHRpb25zLmxpbmVIZWlnaHQsYSo9dGhpcy5vcHRpb25zLmxpbmVIZWlnaHQpLHRoaXMub3B0aW9ucy5yYWlscyYmKE1hdGguYWJzKHMpPk1hdGguYWJzKGEpP2E9MDpzPTApO3ZhciBwLHUsbD1NYXRoLm1heChpLW8saCksZj1zL2wsZD1hL2wsXz10aGlzLm9wdGlvbnMuc2NhbGU7dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWUuRElSRUNUSU9OX1g/KHU9XypzLHA9XypmLHRoaXMuX3Bvc2l0aW9uKz11KTp0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPT09ZS5ESVJFQ1RJT05fWT8odT1fKmEscD1fKmQsdGhpcy5fcG9zaXRpb24rPXUpOih1PVtfKnMsXyphXSxwPVtfKmYsXypkXSx0aGlzLl9wb3NpdGlvblswXSs9dVswXSx0aGlzLl9wb3NpdGlvblsxXSs9dVsxXSk7dmFyIHk9dGhpcy5fcGF5bG9hZDt5LmRlbHRhPXUseS52ZWxvY2l0eT1wLHkucG9zaXRpb249dGhpcy5fcG9zaXRpb24seS5zbGlwPSEwLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJ1cGRhdGVcIix5KSx0aGlzLl9wcmV2VGltZT1pLHRoaXMuX3ByZXZWZWw9cH12YXIgcz10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIikscj10KFwiLi4vY29yZS9FbmdpbmVcIiksYT10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLkRFRkFVTFRfT1BUSU9OUz17ZGlyZWN0aW9uOnZvaWQgMCxtaW5pbXVtRW5kU3BlZWQ6MS8wLHJhaWxzOiExLHNjYWxlOjEsc3RhbGxUaW1lOjUwLGxpbmVIZWlnaHQ6NDAscHJldmVudERlZmF1bHQ6ITB9LGUuRElSRUNUSU9OX1g9MCxlLkRJUkVDVElPTl9ZPTE7dmFyIGg9OCxjPURhdGUubm93O2UucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FbmdpbmVcIjo0LFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwfV0sMzM6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IGgodGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IGEsdGhpcy5fdG91Y2hUcmFja2VyPW5ldyByKHt0b3VjaExpbWl0OnRoaXMub3B0aW9ucy50b3VjaExpbWl0fSksYS5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpLGEuc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fdG91Y2hUcmFja2VyKSx0aGlzLl90b3VjaFRyYWNrZXIub24oXCJ0cmFja3N0YXJ0XCIsbi5iaW5kKHRoaXMpKSx0aGlzLl90b3VjaFRyYWNrZXIub24oXCJ0cmFja21vdmVcIixvLmJpbmQodGhpcykpLHRoaXMuX3RvdWNoVHJhY2tlci5vbihcInRyYWNrZW5kXCIscy5iaW5kKHRoaXMpKSx0aGlzLl9wYXlsb2FkPXtkZWx0YTpudWxsLHBvc2l0aW9uOm51bGwsdmVsb2NpdHk6bnVsbCxjbGllbnRYOnZvaWQgMCxjbGllbnRZOnZvaWQgMCxjb3VudDowLHRvdWNoOnZvaWQgMH0sdGhpcy5fcG9zaXRpb249bnVsbH1mdW5jdGlvbiBuKHQpe3ZhciBpLGU7dm9pZCAwIT09dGhpcy5vcHRpb25zLmRpcmVjdGlvbj8odGhpcy5fcG9zaXRpb249MCxpPTAsZT0wKToodGhpcy5fcG9zaXRpb249WzAsMF0saT1bMCwwXSxlPVswLDBdKTt2YXIgbj10aGlzLl9wYXlsb2FkO24uZGVsdGE9ZSxuLnBvc2l0aW9uPXRoaXMuX3Bvc2l0aW9uLG4udmVsb2NpdHk9aSxuLmNsaWVudFg9dC54LG4uY2xpZW50WT10Lnksbi5jb3VudD10LmNvdW50LG4udG91Y2g9dC5pZGVudGlmaWVyLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJzdGFydFwiLG4pfWZ1bmN0aW9uIG8odCl7dmFyIGk9dC5oaXN0b3J5LG49aVtpLmxlbmd0aC0xXSxvPWlbaS5sZW5ndGgtMl0scz1pW2kubGVuZ3RoLXRoaXMub3B0aW9ucy52ZWxvY2l0eVNhbXBsZUxlbmd0aF0/aVtpLmxlbmd0aC10aGlzLm9wdGlvbnMudmVsb2NpdHlTYW1wbGVMZW5ndGhdOmlbaS5sZW5ndGgtMl0scj1zLnRpbWVzdGFtcCxhPW4udGltZXN0YW1wLGg9bi54LW8ueCxwPW4ueS1vLnksdT1uLngtcy54LGw9bi55LXMueTt0aGlzLm9wdGlvbnMucmFpbHMmJihNYXRoLmFicyhoKT5NYXRoLmFicyhwKT9wPTA6aD0wLE1hdGguYWJzKHUpPk1hdGguYWJzKGwpP2w9MDp1PTApO3ZhciBmLGQsXz1NYXRoLm1heChhLXIsYykseT11L18sZz1sL18sdj10aGlzLm9wdGlvbnMuc2NhbGU7dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWUuRElSRUNUSU9OX1g/KGQ9dipoLGY9dip5LHRoaXMuX3Bvc2l0aW9uKz1kKTp0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPT09ZS5ESVJFQ1RJT05fWT8oZD12KnAsZj12KmcsdGhpcy5fcG9zaXRpb24rPWQpOihkPVt2KmgsdipwXSxmPVt2KnksdipnXSx0aGlzLl9wb3NpdGlvblswXSs9ZFswXSx0aGlzLl9wb3NpdGlvblsxXSs9ZFsxXSk7dmFyIG09dGhpcy5fcGF5bG9hZDttLmRlbHRhPWQsbS52ZWxvY2l0eT1mLG0ucG9zaXRpb249dGhpcy5fcG9zaXRpb24sbS5jbGllbnRYPXQueCxtLmNsaWVudFk9dC55LG0uY291bnQ9dC5jb3VudCxtLnRvdWNoPXQuaWRlbnRpZmllcix0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwidXBkYXRlXCIsbSl9ZnVuY3Rpb24gcyh0KXt0aGlzLl9wYXlsb2FkLmNvdW50PXQuY291bnQsdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImVuZFwiLHRoaXMuX3BheWxvYWQpfXZhciByPXQoXCIuL1RvdWNoVHJhY2tlclwiKSxhPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxoPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpO2UuREVGQVVMVF9PUFRJT05TPXtkaXJlY3Rpb246dm9pZCAwLHJhaWxzOiExLHRvdWNoTGltaXQ6MSx2ZWxvY2l0eVNhbXBsZUxlbmd0aDoxMCxzY2FsZToxfSxlLkRJUkVDVElPTl9YPTAsZS5ESVJFQ1RJT05fWT0xO3ZhciBjPTg7ZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0sZS5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnN9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuL1RvdWNoVHJhY2tlclwiOjM0fV0sMzQ6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0LGksZSl7cmV0dXJue3g6dC5jbGllbnRYLHk6dC5jbGllbnRZLGlkZW50aWZpZXI6dC5pZGVudGlmaWVyLG9yaWdpbjppLm9yaWdpbix0aW1lc3RhbXA6YygpLGNvdW50OmkudG91Y2hlcy5sZW5ndGgsaGlzdG9yeTplfX1mdW5jdGlvbiBuKHQpe2lmKCEodC50b3VjaGVzLmxlbmd0aD50aGlzLnRvdWNoTGltaXQpKXt0aGlzLmlzVG91Y2hlZD0hMDtmb3IodmFyIGk9MDtpPHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoO2krKyl7dmFyIG49dC5jaGFuZ2VkVG91Y2hlc1tpXSxvPWUobix0LG51bGwpO3RoaXMuZXZlbnRPdXRwdXQuZW1pdChcInRyYWNrc3RhcnRcIixvKSx0aGlzLnNlbGVjdGl2ZXx8dGhpcy50b3VjaEhpc3Rvcnlbbi5pZGVudGlmaWVyXXx8dGhpcy50cmFjayhvKX19fWZ1bmN0aW9uIG8odCl7aWYoISh0LnRvdWNoZXMubGVuZ3RoPnRoaXMudG91Y2hMaW1pdCkpZm9yKHZhciBpPTA7aTx0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtpKyspe3ZhciBuPXQuY2hhbmdlZFRvdWNoZXNbaV0sbz10aGlzLnRvdWNoSGlzdG9yeVtuLmlkZW50aWZpZXJdO2lmKG8pe3ZhciBzPWUobix0LG8pO3RoaXMudG91Y2hIaXN0b3J5W24uaWRlbnRpZmllcl0ucHVzaChzKSx0aGlzLmV2ZW50T3V0cHV0LmVtaXQoXCJ0cmFja21vdmVcIixzKX19fWZ1bmN0aW9uIHModCl7aWYodGhpcy5pc1RvdWNoZWQpe2Zvcih2YXIgaT0wO2k8dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7aSsrKXt2YXIgbj10LmNoYW5nZWRUb3VjaGVzW2ldLG89dGhpcy50b3VjaEhpc3Rvcnlbbi5pZGVudGlmaWVyXTtpZihvKXt2YXIgcz1lKG4sdCxvKTt0aGlzLmV2ZW50T3V0cHV0LmVtaXQoXCJ0cmFja2VuZFwiLHMpLGRlbGV0ZSB0aGlzLnRvdWNoSGlzdG9yeVtuLmlkZW50aWZpZXJdfX10aGlzLmlzVG91Y2hlZD0hMX19ZnVuY3Rpb24gcigpe2Zvcih2YXIgdCBpbiB0aGlzLnRvdWNoSGlzdG9yeSl7dmFyIGk9dGhpcy50b3VjaEhpc3RvcnlbdF07dGhpcy5ldmVudE91dHB1dC5lbWl0KFwidHJhY2tlbmRcIix7dG91Y2g6aVtpLmxlbmd0aC0xXS50b3VjaCx0aW1lc3RhbXA6RGF0ZS5ub3coKSxjb3VudDowLGhpc3Rvcnk6aX0pLGRlbGV0ZSB0aGlzLnRvdWNoSGlzdG9yeVt0XX19ZnVuY3Rpb24gYSh0KXt0aGlzLnNlbGVjdGl2ZT10LnNlbGVjdGl2ZSx0aGlzLnRvdWNoTGltaXQ9dC50b3VjaExpbWl0fHwxLHRoaXMudG91Y2hIaXN0b3J5PXt9LHRoaXMuZXZlbnRJbnB1dD1uZXcgaCx0aGlzLmV2ZW50T3V0cHV0PW5ldyBoLGguc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5ldmVudElucHV0KSxoLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLmV2ZW50T3V0cHV0KSx0aGlzLmV2ZW50SW5wdXQub24oXCJ0b3VjaHN0YXJ0XCIsbi5iaW5kKHRoaXMpKSx0aGlzLmV2ZW50SW5wdXQub24oXCJ0b3VjaG1vdmVcIixvLmJpbmQodGhpcykpLHRoaXMuZXZlbnRJbnB1dC5vbihcInRvdWNoZW5kXCIscy5iaW5kKHRoaXMpKSx0aGlzLmV2ZW50SW5wdXQub24oXCJ0b3VjaGNhbmNlbFwiLHMuYmluZCh0aGlzKSksdGhpcy5ldmVudElucHV0Lm9uKFwidW5waXBlXCIsci5iaW5kKHRoaXMpKSx0aGlzLmlzVG91Y2hlZD0hMX12YXIgaD10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksYz1EYXRlLm5vdzthLnByb3RvdHlwZS50cmFjaz1mdW5jdGlvbih0KXt0aGlzLnRvdWNoSGlzdG9yeVt0LmlkZW50aWZpZXJdPVt0XX0saS5leHBvcnRzPWF9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6N31dLDM1OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUoKXt0aGlzLl9ldmVudElucHV0PW5ldyBuLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBuLG4uc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRJbnB1dCksbi5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpLHRoaXMudG91Y2hBRW5hYmxlZD0hMSx0aGlzLnRvdWNoQUlkPTAsdGhpcy5wb3NBPW51bGwsdGhpcy50aW1lc3RhbXBBPTAsdGhpcy50b3VjaEJFbmFibGVkPSExLHRoaXMudG91Y2hCSWQ9MCx0aGlzLnBvc0I9bnVsbCx0aGlzLnRpbWVzdGFtcEI9MCx0aGlzLl9ldmVudElucHV0Lm9uKFwidG91Y2hzdGFydFwiLHRoaXMuaGFuZGxlU3RhcnQuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRJbnB1dC5vbihcInRvdWNobW92ZVwiLHRoaXMuaGFuZGxlTW92ZS5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudElucHV0Lm9uKFwidG91Y2hlbmRcIix0aGlzLmhhbmRsZUVuZC5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudElucHV0Lm9uKFwidG91Y2hjYW5jZWxcIix0aGlzLmhhbmRsZUVuZC5iaW5kKHRoaXMpKX12YXIgbj10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIik7ZS5jYWxjdWxhdGVBbmdsZT1mdW5jdGlvbih0LGkpe3ZhciBlPWlbMF0tdFswXSxuPWlbMV0tdFsxXTtyZXR1cm4gTWF0aC5hdGFuMihuLGUpfSxlLmNhbGN1bGF0ZURpc3RhbmNlPWZ1bmN0aW9uKHQsaSl7dmFyIGU9aVswXS10WzBdLG49aVsxXS10WzFdO3JldHVybiBNYXRoLnNxcnQoZSplK24qbil9LGUuY2FsY3VsYXRlQ2VudGVyPWZ1bmN0aW9uKHQsaSl7cmV0dXJuWyh0WzBdK2lbMF0pLzIsKHRbMV0raVsxXSkvMl19O3ZhciBvPURhdGUubm93O2UucHJvdG90eXBlLmhhbmRsZVN0YXJ0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgaT0wO2k8dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7aSsrKXt2YXIgZT10LmNoYW5nZWRUb3VjaGVzW2ldO3RoaXMudG91Y2hBRW5hYmxlZD90aGlzLnRvdWNoQkVuYWJsZWR8fCh0aGlzLnRvdWNoQklkPWUuaWRlbnRpZmllcix0aGlzLnRvdWNoQkVuYWJsZWQ9ITAsdGhpcy5wb3NCPVtlLnBhZ2VYLGUucGFnZVldLHRoaXMudGltZXN0YW1wQj1vKCksdGhpcy5fc3RhcnRVcGRhdGUodCkpOih0aGlzLnRvdWNoQUlkPWUuaWRlbnRpZmllcix0aGlzLnRvdWNoQUVuYWJsZWQ9ITAsdGhpcy5wb3NBPVtlLnBhZ2VYLGUucGFnZVldLHRoaXMudGltZXN0YW1wQT1vKCkpfX0sZS5wcm90b3R5cGUuaGFuZGxlTW92ZT1mdW5jdGlvbih0KXtpZih0aGlzLnRvdWNoQUVuYWJsZWQmJnRoaXMudG91Y2hCRW5hYmxlZCl7Zm9yKHZhciBpLGU9dGhpcy50aW1lc3RhbXBBLG49dGhpcy50aW1lc3RhbXBCLHM9MDtzPHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoO3MrKyl7dmFyIHI9dC5jaGFuZ2VkVG91Y2hlc1tzXTtyLmlkZW50aWZpZXI9PT10aGlzLnRvdWNoQUlkPyh0aGlzLnBvc0E9W3IucGFnZVgsci5wYWdlWV0sdGhpcy50aW1lc3RhbXBBPW8oKSxpPXRoaXMudGltZXN0YW1wQS1lKTpyLmlkZW50aWZpZXI9PT10aGlzLnRvdWNoQklkJiYodGhpcy5wb3NCPVtyLnBhZ2VYLHIucGFnZVldLHRoaXMudGltZXN0YW1wQj1vKCksaT10aGlzLnRpbWVzdGFtcEItbil9aSYmdGhpcy5fbW92ZVVwZGF0ZShpKX19LGUucHJvdG90eXBlLmhhbmRsZUVuZD1mdW5jdGlvbih0KXtmb3IodmFyIGk9MDtpPHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoO2krKyl7dmFyIGU9dC5jaGFuZ2VkVG91Y2hlc1tpXTsoZS5pZGVudGlmaWVyPT09dGhpcy50b3VjaEFJZHx8ZS5pZGVudGlmaWVyPT09dGhpcy50b3VjaEJJZCkmJih0aGlzLnRvdWNoQUVuYWJsZWQmJnRoaXMudG91Y2hCRW5hYmxlZCYmdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImVuZFwiLHt0b3VjaGVzOlt0aGlzLnRvdWNoQUlkLHRoaXMudG91Y2hCSWRdLGFuZ2xlOnRoaXMuX2FuZ2xlfSksdGhpcy50b3VjaEFFbmFibGVkPSExLHRoaXMudG91Y2hBSWQ9MCx0aGlzLnRvdWNoQkVuYWJsZWQ9ITEsdGhpcy50b3VjaEJJZD0wKX19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjd9XSwzNjpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0FjY3VtdWxhdG9yOnQoXCIuL0FjY3VtdWxhdG9yXCIpLERlc2t0b3BFbXVsYXRpb25Nb2RlOnQoXCIuL0Rlc2t0b3BFbXVsYXRpb25Nb2RlXCIpLEZhc3RDbGljazp0KFwiLi9GYXN0Q2xpY2tcIiksR2VuZXJpY1N5bmM6dChcIi4vR2VuZXJpY1N5bmNcIiksTW91c2VTeW5jOnQoXCIuL01vdXNlU3luY1wiKSxQaW5jaFN5bmM6dChcIi4vUGluY2hTeW5jXCIpLFJvdGF0ZVN5bmM6dChcIi4vUm90YXRlU3luY1wiKSxTY2FsZVN5bmM6dChcIi4vU2NhbGVTeW5jXCIpLFNjcm9sbFN5bmM6dChcIi4vU2Nyb2xsU3luY1wiKSxUb3VjaFN5bmM6dChcIi4vVG91Y2hTeW5jXCIpLFRvdWNoVHJhY2tlcjp0KFwiLi9Ub3VjaFRyYWNrZXJcIiksVHdvRmluZ2VyU3luYzp0KFwiLi9Ud29GaW5nZXJTeW5jXCIpfX0se1wiLi9BY2N1bXVsYXRvclwiOjI0LFwiLi9EZXNrdG9wRW11bGF0aW9uTW9kZVwiOjI1LFwiLi9GYXN0Q2xpY2tcIjoyNixcIi4vR2VuZXJpY1N5bmNcIjoyNyxcIi4vTW91c2VTeW5jXCI6MjgsXCIuL1BpbmNoU3luY1wiOjI5LFwiLi9Sb3RhdGVTeW5jXCI6MzAsXCIuL1NjYWxlU3luY1wiOjMxLFwiLi9TY3JvbGxTeW5jXCI6MzIsXCIuL1RvdWNoU3luY1wiOjMzLFwiLi9Ub3VjaFRyYWNrZXJcIjozNCxcIi4vVHdvRmluZ2VyU3luY1wiOjM1fV0sMzc6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdGhpcy52YWx1ZXM9dHx8W1sxLDAsMF0sWzAsMSwwXSxbMCwwLDFdXSx0aGlzfXZhciBuPXQoXCIuL1ZlY3RvclwiKSxvPW5ldyBlLHM9bmV3IG47XG5lLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXN9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLnZhbHVlcz10fSxlLnByb3RvdHlwZS52ZWN0b3JNdWx0aXBseT1mdW5jdGlvbih0KXt2YXIgaT10aGlzLmdldCgpLGU9dC54LG49dC55LG89dC56LHI9aVswXSxhPWlbMV0saD1pWzJdLGM9clswXSxwPXJbMV0sdT1yWzJdLGw9YVswXSxmPWFbMV0sZD1hWzJdLF89aFswXSx5PWhbMV0sZz1oWzJdO3JldHVybiBzLnNldFhZWihjKmUrcCpuK3UqbyxsKmUrZipuK2QqbyxfKmUreSpuK2cqbyl9LGUucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgaT10aGlzLmdldCgpLGU9W1tdXSxuPTA7Mz5uO24rKyl7ZVtuXT1bXTtmb3IodmFyIHM9MDszPnM7cysrKXtmb3IodmFyIHI9MCxhPTA7Mz5hO2ErKylyKz1pW25dW2FdKnRbYV1bc107ZVtuXVtzXT1yfX1yZXR1cm4gby5zZXQoZSl9LGUucHJvdG90eXBlLnRyYW5zcG9zZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxpPXRoaXMuZ2V0KCksZT0wOzM+ZTtlKyspZm9yKHZhciBuPTA7Mz5uO24rKyl0W2VdW25dPWlbbl1bZV07cmV0dXJuIG8uc2V0KHQpfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdldCgpLGk9W10sbj0wOzM+bjtuKyspaVtuXT10W25dLnNsaWNlKCk7cmV0dXJuIG5ldyBlKGkpfSxpLmV4cG9ydHM9ZX0se1wiLi9WZWN0b3JcIjo0MX1dLDM4OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCxpLGUsbil7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuc2V0KHQpOih0aGlzLnc9dm9pZCAwIT09dD90OjEsdGhpcy54PXZvaWQgMCE9PWk/aTowLHRoaXMueT12b2lkIDAhPT1lP2U6MCx0aGlzLno9dm9pZCAwIT09bj9uOjApLHRoaXN9dmFyIG49dChcIi4vTWF0cml4XCIpLG89bmV3IGUoMSwwLDAsMCk7ZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3JldHVybiBvLnNldFdYWVoodGhpcy53K3Qudyx0aGlzLngrdC54LHRoaXMueSt0LnksdGhpcy56K3Queil9LGUucHJvdG90eXBlLnN1Yj1mdW5jdGlvbih0KXtyZXR1cm4gby5zZXRXWFlaKHRoaXMudy10LncsdGhpcy54LXQueCx0aGlzLnktdC55LHRoaXMuei10LnopfSxlLnByb3RvdHlwZS5zY2FsYXJEaXZpZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2NhbGFyTXVsdGlwbHkoMS90KX0sZS5wcm90b3R5cGUuc2NhbGFyTXVsdGlwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIG8uc2V0V1hZWih0aGlzLncqdCx0aGlzLngqdCx0aGlzLnkqdCx0aGlzLnoqdCl9LGUucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMueCxlPXRoaXMueSxuPXRoaXMueixzPXRoaXMudyxyPXQueCxhPXQueSxoPXQueixjPXQud3x8MDtyZXR1cm4gby5zZXRXWFlaKHMqYy1pKnItZSphLW4qaCxpKmMrcipzK2Eqbi1lKmgsZSpjK2EqcytpKmgtcipuLG4qYytoKnMrciplLWkqYSl9O3ZhciBzPW5ldyBlKDEsMCwwLDApO2UucHJvdG90eXBlLnJvdGF0ZVZlY3Rvcj1mdW5jdGlvbih0KXtyZXR1cm4gcy5zZXQodGhpcy5jb25qKCkpLG8uc2V0KHRoaXMubXVsdGlwbHkodCkubXVsdGlwbHkocykpfSxlLnByb3RvdHlwZS5pbnZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIG8uc2V0KHRoaXMuY29uaigpLnNjYWxhckRpdmlkZSh0aGlzLm5vcm1TcXVhcmVkKCkpKX0sZS5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2NhbGFyTXVsdGlwbHkoLTEpfSxlLnByb3RvdHlwZS5jb25qPWZ1bmN0aW9uKCl7cmV0dXJuIG8uc2V0V1hZWih0aGlzLncsLXRoaXMueCwtdGhpcy55LC10aGlzLnopfSxlLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dm9pZCAwPT09dD8xOnQsdGhpcy5zY2FsYXJEaXZpZGUodCp0aGlzLm5vcm0oKSl9LGUucHJvdG90eXBlLm1ha2VGcm9tQW5nbGVBbmRBeGlzPWZ1bmN0aW9uKHQsaSl7dmFyIGU9aS5ub3JtYWxpemUoKSxuPS41KnQsbz0tTWF0aC5zaW4obik7cmV0dXJuIHRoaXMueD1vKmUueCx0aGlzLnk9byplLnksdGhpcy56PW8qZS56LHRoaXMudz1NYXRoLmNvcyhuKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRXWFlaPWZ1bmN0aW9uKHQsaSxlLG4pe3JldHVybiBvLmNsZWFyKCksdGhpcy53PXQsdGhpcy54PWksdGhpcy55PWUsdGhpcy56PW4sdGhpc30sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQXJyYXk/KHRoaXMudz0wLHRoaXMueD10WzBdLHRoaXMueT10WzFdLHRoaXMuej10WzJdKToodGhpcy53PXQudyx0aGlzLng9dC54LHRoaXMueT10LnksdGhpcy56PXQueiksdGhpcyE9PW8mJm8uY2xlYXIoKSx0aGlzfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24odCl7dC5zZXQobyl9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnc9MSx0aGlzLng9MCx0aGlzLnk9MCx0aGlzLno9MCx0aGlzfSxlLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0Lnc9PT10aGlzLncmJnQueD09PXRoaXMueCYmdC55PT09dGhpcy55JiZ0Lno9PT10aGlzLnp9LGUucHJvdG90eXBlLmRvdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy53KnQudyt0aGlzLngqdC54K3RoaXMueSp0LnkrdGhpcy56KnQuen0sZS5wcm90b3R5cGUubm9ybVNxdWFyZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb3QodGhpcyl9LGUucHJvdG90eXBlLm5vcm09ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMubm9ybVNxdWFyZWQoKSl9LGUucHJvdG90eXBlLmlzWmVybz1mdW5jdGlvbigpe3JldHVybiEodGhpcy54fHx0aGlzLnl8fHRoaXMueil9LGUucHJvdG90eXBlLmdldFRyYW5zZm9ybT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubm9ybWFsaXplKDEpLGk9dC54LGU9dC55LG49dC56LG89dC53O3JldHVyblsxLTIqZSplLTIqbipuLDIqaSplLTIqbipvLDIqaSpuKzIqZSpvLDAsMippKmUrMipuKm8sMS0yKmkqaS0yKm4qbiwyKmUqbi0yKmkqbywwLDIqaSpuLTIqZSpvLDIqZSpuKzIqaSpvLDEtMippKmktMiplKmUsMCwwLDAsMCwxXX07dmFyIHI9bmV3IG47ZS5wcm90b3R5cGUuZ2V0TWF0cml4PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ub3JtYWxpemUoMSksaT10LngsZT10Lnksbj10Lnosbz10Lnc7cmV0dXJuIHIuc2V0KFtbMS0yKmUqZS0yKm4qbiwyKmkqZSsyKm4qbywyKmkqbi0yKmUqb10sWzIqaSplLTIqbipvLDEtMippKmktMipuKm4sMiplKm4rMippKm9dLFsyKmkqbisyKmUqbywyKmUqbi0yKmkqbywxLTIqaSppLTIqZSplXV0pfTt2YXIgYT0xZS01O2UucHJvdG90eXBlLnNsZXJwPWZ1bmN0aW9uKHQsaSl7dmFyIGUsbixzLHIsaDtyZXR1cm4gbj10aGlzLmRvdCh0KSwxLW4+YT8oZT1NYXRoLmFjb3Mobikscz1NYXRoLnNpbihlKSxyPU1hdGguc2luKCgxLWkpKmUpL3MsaD1NYXRoLnNpbihpKmUpL3MpOihyPTEtaSxoPWkpLG8uc2V0KHRoaXMuc2NhbGFyTXVsdGlwbHkoci9oKS5hZGQodCkubXVsdGlwbHkoaCkpfSxpLmV4cG9ydHM9ZX0se1wiLi9NYXRyaXhcIjozN31dLDM5OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCxpKXtyZXR1cm4gdCtvKCkqKGktdCl9ZnVuY3Rpb24gbih0LGkpe3JldHVybiB0K28oKSooaS10KzEpPj4wfXZhciBvPU1hdGgucmFuZG9tLHM9e307cy5pbnRlZ2VyPWZ1bmN0aW9uKHQsaSxlKXtpZih0PXZvaWQgMCE9PXQ/dDowLGk9dm9pZCAwIT09aT9pOjEsdm9pZCAwIT09ZSl7Zm9yKHZhciBvPVtdLHM9MDtlPnM7cysrKW8ucHVzaChuKHQsaSkpO3JldHVybiBvfXJldHVybiBuKHQsaSl9LHMucmFuZ2U9ZnVuY3Rpb24odCxpLG4pe2lmKHQ9dm9pZCAwIT09dD90OjAsaT12b2lkIDAhPT1pP2k6MSx2b2lkIDAhPT1uKXtmb3IodmFyIG89W10scz0wO24+cztzKyspby5wdXNoKGUodCxpKSk7cmV0dXJuIG99cmV0dXJuIGUodCxpKX0scy5zaWduPWZ1bmN0aW9uKHQpe3JldHVybiB0PXZvaWQgMCE9PXQ/dDouNSxvKCk8dD8xOi0xfSxzLmJvb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dm9pZCAwIT09dD90Oi41LG8oKTx0fSxpLmV4cG9ydHM9c30se31dLDQwOltmdW5jdGlvbih0LGkpe3ZhciBlPXt9O2UuY2xhbXA9ZnVuY3Rpb24odCxpKXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odCxpWzFdKSxpWzBdKX0sZS5sZW5ndGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPTAsZT0wO2U8dC5sZW5ndGg7ZSsrKWkrPXRbZV0qdFtlXTtyZXR1cm4gTWF0aC5zcXJ0KGkpfSxpLmV4cG9ydHM9ZX0se31dLDQxOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCxpLGUpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90aGlzLnNldCh0KToodGhpcy54PXR8fDAsdGhpcy55PWl8fDAsdGhpcy56PWV8fDApLHRoaXN9ZnVuY3Rpb24gbih0LGksZSl7cmV0dXJuIHRoaXMueD10LHRoaXMueT1pLHRoaXMuej1lLHRoaXN9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gbi5jYWxsKHRoaXMsdFswXSx0WzFdLHRbMl18fDApfWZ1bmN0aW9uIHModCl7cmV0dXJuIG4uY2FsbCh0aGlzLHQueCx0LnksdC56KX1mdW5jdGlvbiByKHQpe3JldHVybiBuLmNhbGwodGhpcyx0LDAsMCl9dmFyIGE9bmV3IGUoMCwwLDApO2UucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKGEsdGhpcy54K3QueCx0aGlzLnkrdC55LHRoaXMueit0LnopfSxlLnByb3RvdHlwZS5zdWI9ZnVuY3Rpb24odCl7cmV0dXJuIG4uY2FsbChhLHRoaXMueC10LngsdGhpcy55LXQueSx0aGlzLnotdC56KX0sZS5wcm90b3R5cGUubXVsdD1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKGEsdCp0aGlzLngsdCp0aGlzLnksdCp0aGlzLnopfSxlLnByb3RvdHlwZS5kaXY9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubXVsdCgxL3QpfSxlLnByb3RvdHlwZS5jcm9zcz1mdW5jdGlvbih0KXt2YXIgaT10aGlzLngsZT10aGlzLnksbz10aGlzLnoscz10Lngscj10LnksaD10Lno7cmV0dXJuIG4uY2FsbChhLG8qci1lKmgsaSpoLW8qcyxlKnMtaSpyKX0sZS5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0Lng9PT10aGlzLngmJnQueT09PXRoaXMueSYmdC56PT09dGhpcy56fSxlLnByb3RvdHlwZS5yb3RhdGVYPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMueCxlPXRoaXMueSxvPXRoaXMueixzPU1hdGguY29zKHQpLHI9TWF0aC5zaW4odCk7cmV0dXJuIG4uY2FsbChhLGksZSpzLW8qcixlKnIrbypzKX0sZS5wcm90b3R5cGUucm90YXRlWT1mdW5jdGlvbih0KXt2YXIgaT10aGlzLngsZT10aGlzLnksbz10aGlzLnoscz1NYXRoLmNvcyh0KSxyPU1hdGguc2luKHQpO3JldHVybiBuLmNhbGwoYSxvKnIraSpzLGUsbypzLWkqcil9LGUucHJvdG90eXBlLnJvdGF0ZVo9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy54LGU9dGhpcy55LG89dGhpcy56LHM9TWF0aC5jb3ModCkscj1NYXRoLnNpbih0KTtyZXR1cm4gbi5jYWxsKGEsaSpzLWUqcixpKnIrZSpzLG8pfSxlLnByb3RvdHlwZS5kb3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCp0LngrdGhpcy55KnQueSt0aGlzLnoqdC56fSxlLnByb3RvdHlwZS5ub3JtU3F1YXJlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRvdCh0aGlzKX0sZS5wcm90b3R5cGUubm9ybT1mdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy5ub3JtU3F1YXJlZCgpKX0sZS5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKHQpezA9PT1hcmd1bWVudHMubGVuZ3RoJiYodD0xKTt2YXIgaT10aGlzLm5vcm0oKTtyZXR1cm4gaT4xZS03P3MuY2FsbChhLHRoaXMubXVsdCh0L2kpKTpuLmNhbGwoYSx0LDAsMCl9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMpfSxlLnByb3RvdHlwZS5pc1plcm89ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMueHx8dGhpcy55fHx0aGlzLnopfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBBcnJheT9vLmNhbGwodGhpcyx0KTpcIm51bWJlclwiPT10eXBlb2YgdD9yLmNhbGwodGhpcyx0KTpzLmNhbGwodGhpcyx0KX0sZS5wcm90b3R5cGUuc2V0WFlaPWZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5zZXQxRD1mdW5jdGlvbih0KXtyZXR1cm4gci5jYWxsKHRoaXMsdCl9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0KXt0aGlzPT09YT9zLmNhbGwodCxhKTpzLmNhbGwodCx0aGlzKX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMsMCwwLDApfSxlLnByb3RvdHlwZS5jYXA9ZnVuY3Rpb24gaChoKXtpZigxLzA9PT1oKXJldHVybiBzLmNhbGwoYSx0aGlzKTt2YXIgdD10aGlzLm5vcm0oKTtyZXR1cm4gdD5oP3MuY2FsbChhLHRoaXMubXVsdChoL3QpKTpzLmNhbGwoYSx0aGlzKX0sZS5wcm90b3R5cGUucHJvamVjdD1mdW5jdGlvbih0KXtyZXR1cm4gdC5tdWx0KHRoaXMuZG90KHQpKX0sZS5wcm90b3R5cGUucmVmbGVjdEFjcm9zcz1mdW5jdGlvbih0KXtyZXR1cm4gdC5ub3JtYWxpemUoKS5wdXQodCkscyhhLHRoaXMuc3ViKHRoaXMucHJvamVjdCh0KS5tdWx0KDIpKSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVyblt0aGlzLngsdGhpcy55LHRoaXMuel19LGUucHJvdG90eXBlLmdldDFEPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueH0saS5leHBvcnRzPWV9LHt9XSw0MjpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e01hdHJpeDp0KFwiLi9NYXRyaXhcIiksUXVhdGVybmlvbjp0KFwiLi9RdWF0ZXJuaW9uXCIpLFJhbmRvbTp0KFwiLi9SYW5kb21cIiksVXRpbGl0aWVzOnQoXCIuL1V0aWxpdGllc1wiKSxWZWN0b3I6dChcIi4vVmVjdG9yXCIpfX0se1wiLi9NYXRyaXhcIjozNyxcIi4vUXVhdGVybmlvblwiOjM4LFwiLi9SYW5kb21cIjozOSxcIi4vVXRpbGl0aWVzXCI6NDAsXCIuL1ZlY3RvclwiOjQxfV0sNDM6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX3Bvc2l0aW9uU3RhdGU9bmV3IGMoWzAsMF0pLHRoaXMuX2RpZmZlcmVudGlhbD1bMCwwXSx0aGlzLl9hY3RpdmU9ITAsdGhpcy5zeW5jPW5ldyBsKFtcIm1vdXNlXCIsXCJ0b3VjaFwiXSx7c2NhbGU6dGhpcy5vcHRpb25zLnNjYWxlfSksdGhpcy5ldmVudE91dHB1dD1uZXcgcCxwLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuc3luYykscC5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5ldmVudE91dHB1dCksYS5jYWxsKHRoaXMpfWZ1bmN0aW9uIG4odCl7dmFyIGk9dGhpcy5vcHRpb25zLGU9aS5wcm9qZWN0aW9uLG49aS5zbmFwWCxvPWkuc25hcFkscz1lJl8ueD90WzBdOjAscj1lJl8ueT90WzFdOjA7cmV0dXJuIG4+MCYmKHMtPXMlbiksbz4wJiYoci09ciVvKSxbcyxyXX1mdW5jdGlvbiBvKCl7dGhpcy5fYWN0aXZlJiYodGhpcy5fcG9zaXRpb25TdGF0ZS5pc0FjdGl2ZSgpJiZ0aGlzLl9wb3NpdGlvblN0YXRlLmhhbHQoKSx0aGlzLmV2ZW50T3V0cHV0LmVtaXQoXCJzdGFydFwiLHtwb3NpdGlvbjp0aGlzLmdldFBvc2l0aW9uKCl9KSl9ZnVuY3Rpb24gcyh0KXtpZih0aGlzLl9hY3RpdmUpe3ZhciBpPXRoaXMub3B0aW9uczt0aGlzLl9kaWZmZXJlbnRpYWw9dC5wb3NpdGlvbjt2YXIgZT1uLmNhbGwodGhpcyx0aGlzLl9kaWZmZXJlbnRpYWwpO3RoaXMuX2RpZmZlcmVudGlhbFswXS09ZVswXSx0aGlzLl9kaWZmZXJlbnRpYWxbMV0tPWVbMV07dmFyIG89dGhpcy5nZXRQb3NpdGlvbigpO2lmKG9bMF0rPWVbMF0sb1sxXSs9ZVsxXSxpLnhSYW5nZSl7dmFyIHM9W2kueFJhbmdlWzBdKy41Kmkuc25hcFgsaS54UmFuZ2VbMV0tLjUqaS5zbmFwWF07b1swXT15KG9bMF0scyl9aWYoaS55UmFuZ2Upe3ZhciByPVtpLnlSYW5nZVswXSsuNSppLnNuYXBZLGkueVJhbmdlWzFdLS41Kmkuc25hcFldO29bMV09eShvWzFdLHIpfXRoaXMuZXZlbnRPdXRwdXQuZW1pdChcInVwZGF0ZVwiLHtwb3NpdGlvbjpvfSl9fWZ1bmN0aW9uIHIoKXt0aGlzLl9hY3RpdmUmJnRoaXMuZXZlbnRPdXRwdXQuZW1pdChcImVuZFwiLHtwb3NpdGlvbjp0aGlzLmdldFBvc2l0aW9uKCl9KX1mdW5jdGlvbiBhKCl7dGhpcy5zeW5jLm9uKFwic3RhcnRcIixvLmJpbmQodGhpcykpLHRoaXMuc3luYy5vbihcInVwZGF0ZVwiLHMuYmluZCh0aGlzKSksdGhpcy5zeW5jLm9uKFwiZW5kXCIsci5iaW5kKHRoaXMpKX12YXIgaD10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIiksYz10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIikscD10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksdT10KFwiLi4vbWF0aC9VdGlsaXRpZXNcIiksbD10KFwiLi4vaW5wdXRzL0dlbmVyaWNTeW5jXCIpLGY9dChcIi4uL2lucHV0cy9Nb3VzZVN5bmNcIiksZD10KFwiLi4vaW5wdXRzL1RvdWNoU3luY1wiKTtsLnJlZ2lzdGVyKHttb3VzZTpmLHRvdWNoOmR9KTt2YXIgXz17eDoxLHk6Mn07ZS5ESVJFQ1RJT05fWD1fLngsZS5ESVJFQ1RJT05fWT1fLnk7dmFyIHk9dS5jbGFtcDtlLkRFRkFVTFRfT1BUSU9OUz17cHJvamVjdGlvbjpfLnh8Xy55LHNjYWxlOjEseFJhbmdlOm51bGwseVJhbmdlOm51bGwsc25hcFg6MCxzbmFwWTowLHRyYW5zaXRpb246e2R1cmF0aW9uOjB9fSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucztpZih2b2lkIDAhPT10LnByb2plY3Rpb24pe3ZhciBlPXQucHJvamVjdGlvbjt0aGlzLm9wdGlvbnMucHJvamVjdGlvbj0wLFtcInhcIixcInlcIl0uZm9yRWFjaChmdW5jdGlvbih0KXstMSE9PWUuaW5kZXhPZih0KSYmKGkucHJvamVjdGlvbnw9X1t0XSl9KX12b2lkIDAhPT10LnNjYWxlJiYoaS5zY2FsZT10LnNjYWxlLHRoaXMuc3luYy5zZXRPcHRpb25zKHtzY2FsZTp0LnNjYWxlfSkpLHZvaWQgMCE9PXQueFJhbmdlJiYoaS54UmFuZ2U9dC54UmFuZ2UpLHZvaWQgMCE9PXQueVJhbmdlJiYoaS55UmFuZ2U9dC55UmFuZ2UpLHZvaWQgMCE9PXQuc25hcFgmJihpLnNuYXBYPXQuc25hcFgpLHZvaWQgMCE9PXQuc25hcFkmJihpLnNuYXBZPXQuc25hcFkpfSxlLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvblN0YXRlLmdldCgpfSxlLnByb3RvdHlwZS5zZXRSZWxhdGl2ZVBvc2l0aW9uPWZ1bmN0aW9uKHQsaSxlKXt2YXIgbj10aGlzLmdldFBvc2l0aW9uKCksbz1bblswXSt0WzBdLG5bMV0rdFsxXV07dGhpcy5zZXRQb3NpdGlvbihvLGksZSl9LGUucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKHQsaSxlKXt0aGlzLl9wb3NpdGlvblN0YXRlLmlzQWN0aXZlKCkmJnRoaXMuX3Bvc2l0aW9uU3RhdGUuaGFsdCgpLHRoaXMuX3Bvc2l0aW9uU3RhdGUuc2V0KHQsaSxlKX0sZS5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9hY3RpdmU9ITB9LGUucHJvdG90eXBlLmRlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9hY3RpdmU9ITF9LGUucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbigpe3RoaXMuX2FjdGl2ZT0hdGhpcy5fYWN0aXZlfSxlLnByb3RvdHlwZS5tb2RpZnk9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5nZXRQb3NpdGlvbigpO3JldHVybnt0cmFuc2Zvcm06aC50cmFuc2xhdGUoaVswXSxpWzFdKSx0YXJnZXQ6dH19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vaW5wdXRzL0dlbmVyaWNTeW5jXCI6MjcsXCIuLi9pbnB1dHMvTW91c2VTeW5jXCI6MjgsXCIuLi9pbnB1dHMvVG91Y2hTeW5jXCI6MzMsXCIuLi9tYXRoL1V0aWxpdGllc1wiOjQwLFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjo4OH1dLDQ0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCxpKXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IG8odGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksaXx8KGk9MCksdGhpcy50cmFuc2l0aW9uSGVscGVyPW5ldyBuKGkpfXZhciBuPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKSxvPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpO2UuREVGQVVMVF9PUFRJT05TPXtjdWxsOiExLHRyYW5zaXRpb246ITAscHVsc2VJblRyYW5zaXRpb246ITAscHVsc2VPdXRUcmFuc2l0aW9uOiEwfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKHQsaSl7dD10fHx0aGlzLm9wdGlvbnMudHJhbnNpdGlvbix0aGlzLnNldCgxLHQsaSl9LGUucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24odCxpKXt0PXR8fHRoaXMub3B0aW9ucy50cmFuc2l0aW9uLHRoaXMuc2V0KDAsdCxpKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxlKXt0aGlzLmhhbHQoKSx0aGlzLnRyYW5zaXRpb25IZWxwZXIuc2V0KHQsaSxlKX0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3RoaXMudHJhbnNpdGlvbkhlbHBlci5oYWx0KCl9LGUucHJvdG90eXBlLmlzVmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zaXRpb25IZWxwZXIuZ2V0KCk+MH0sZS5wcm90b3R5cGUubW9kaWZ5PWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMudHJhbnNpdGlvbkhlbHBlci5nZXQoKTtyZXR1cm4gdGhpcy5vcHRpb25zLmN1bGwmJiFpP3ZvaWQgMDp7b3BhY2l0eTppLHRhcmdldDp0fX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODh9XSw0NTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7dGhpcy5fY2hhaW49W10sYXJndW1lbnRzLmxlbmd0aCYmdGhpcy5hZGRNb2RpZmllci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZS5wcm90b3R5cGUuYWRkTW9kaWZpZXI9ZnVuY3Rpb24oKXtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLl9jaGFpbixhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5yZW1vdmVNb2RpZmllcj1mdW5jdGlvbih0KXt2YXIgaT10aGlzLl9jaGFpbi5pbmRleE9mKHQpOzA+aXx8dGhpcy5fY2hhaW4uc3BsaWNlKGksMSl9LGUucHJvdG90eXBlLm1vZGlmeT1mdW5jdGlvbih0KXtmb3IodmFyIGk9dGhpcy5fY2hhaW4sZT10LG49MDtuPGkubGVuZ3RoO24rKyllPWlbbl0ubW9kaWZ5KGUpO3JldHVybiBlfSxpLmV4cG9ydHM9ZX0se31dLDQ2OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5fdHJhbnNmb3JtU3RhdGU9bmV3IHIoby5pZGVudGl0eSksdGhpcy5fb3BhY2l0eVN0YXRlPW5ldyBzKDEpLHRoaXMuX29yaWdpblN0YXRlPW5ldyBzKFswLDBdKSx0aGlzLl9hbGlnblN0YXRlPW5ldyBzKFswLDBdKSx0aGlzLl9zaXplU3RhdGU9bmV3IHMoWzAsMF0pLHRoaXMuX3Byb3BvcnRpb25zU3RhdGU9bmV3IHMoWzAsMF0pLHRoaXMuX21vZGlmaWVyPW5ldyBuKHt0cmFuc2Zvcm06dGhpcy5fdHJhbnNmb3JtU3RhdGUsb3BhY2l0eTp0aGlzLl9vcGFjaXR5U3RhdGUsb3JpZ2luOm51bGwsYWxpZ246bnVsbCxzaXplOm51bGwscHJvcG9ydGlvbnM6bnVsbH0pLHRoaXMuX2hhc09yaWdpbj0hMSx0aGlzLl9oYXNBbGlnbj0hMSx0aGlzLl9oYXNTaXplPSExLHRoaXMuX2hhc1Byb3BvcnRpb25zPSExLHQmJih0LnRyYW5zZm9ybSYmdGhpcy5zZXRUcmFuc2Zvcm0odC50cmFuc2Zvcm0pLHZvaWQgMCE9PXQub3BhY2l0eSYmdGhpcy5zZXRPcGFjaXR5KHQub3BhY2l0eSksdC5vcmlnaW4mJnRoaXMuc2V0T3JpZ2luKHQub3JpZ2luKSx0LmFsaWduJiZ0aGlzLnNldEFsaWduKHQuYWxpZ24pLHQuc2l6ZSYmdGhpcy5zZXRTaXplKHQuc2l6ZSksdC5wcm9wb3J0aW9ucyYmdGhpcy5zZXRQcm9wb3J0aW9ucyh0LnByb3BvcnRpb25zKSl9dmFyIG49dChcIi4uL2NvcmUvTW9kaWZpZXJcIiksbz10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIikscz10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIikscj10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIik7ZS5wcm90b3R5cGUuc2V0VHJhbnNmb3JtPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RhdGUuc2V0KHQsaSxlKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRPcGFjaXR5PWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdGhpcy5fb3BhY2l0eVN0YXRlLnNldCh0LGksZSksdGhpc30sZS5wcm90b3R5cGUuc2V0T3JpZ2luPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gbnVsbD09PXQ/KHRoaXMuX2hhc09yaWdpbiYmKHRoaXMuX21vZGlmaWVyLm9yaWdpbkZyb20obnVsbCksdGhpcy5faGFzT3JpZ2luPSExKSx0aGlzKToodGhpcy5faGFzT3JpZ2lufHwodGhpcy5faGFzT3JpZ2luPSEwLHRoaXMuX21vZGlmaWVyLm9yaWdpbkZyb20odGhpcy5fb3JpZ2luU3RhdGUpKSx0aGlzLl9vcmlnaW5TdGF0ZS5zZXQodCxpLGUpLHRoaXMpfSxlLnByb3RvdHlwZS5zZXRBbGlnbj1mdW5jdGlvbih0LGksZSl7cmV0dXJuIG51bGw9PT10Pyh0aGlzLl9oYXNBbGlnbiYmKHRoaXMuX21vZGlmaWVyLmFsaWduRnJvbShudWxsKSx0aGlzLl9oYXNBbGlnbj0hMSksdGhpcyk6KHRoaXMuX2hhc0FsaWdufHwodGhpcy5faGFzQWxpZ249ITAsdGhpcy5fbW9kaWZpZXIuYWxpZ25Gcm9tKHRoaXMuX2FsaWduU3RhdGUpKSx0aGlzLl9hbGlnblN0YXRlLnNldCh0LGksZSksdGhpcyl9LGUucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24odCxpLGUpe3JldHVybiBudWxsPT09dD8odGhpcy5faGFzU2l6ZSYmKHRoaXMuX21vZGlmaWVyLnNpemVGcm9tKG51bGwpLHRoaXMuX2hhc1NpemU9ITEpLHRoaXMpOih0aGlzLl9oYXNTaXplfHwodGhpcy5faGFzU2l6ZT0hMCx0aGlzLl9tb2RpZmllci5zaXplRnJvbSh0aGlzLl9zaXplU3RhdGUpKSx0aGlzLl9zaXplU3RhdGUuc2V0KHQsaSxlKSx0aGlzKX0sZS5wcm90b3R5cGUuc2V0UHJvcG9ydGlvbnM9ZnVuY3Rpb24odCxpLGUpe3JldHVybiBudWxsPT09dD8odGhpcy5faGFzUHJvcG9ydGlvbnMmJih0aGlzLl9tb2RpZmllci5wcm9wb3J0aW9uc0Zyb20obnVsbCksdGhpcy5faGFzUHJvcG9ydGlvbnM9ITEpLHRoaXMpOih0aGlzLl9oYXNQcm9wb3J0aW9uc3x8KHRoaXMuX2hhc1Byb3BvcnRpb25zPSEwLHRoaXMuX21vZGlmaWVyLnByb3BvcnRpb25zRnJvbSh0aGlzLl9wcm9wb3J0aW9uc1N0YXRlKSksdGhpcy5fcHJvcG9ydGlvbnNTdGF0ZS5zZXQodCxpLGUpLHRoaXMpfSxlLnByb3RvdHlwZS5oYWx0PWZ1bmN0aW9uKCl7dGhpcy5fdHJhbnNmb3JtU3RhdGUuaGFsdCgpLHRoaXMuX29wYWNpdHlTdGF0ZS5oYWx0KCksdGhpcy5fb3JpZ2luU3RhdGUuaGFsdCgpLHRoaXMuX2FsaWduU3RhdGUuaGFsdCgpLHRoaXMuX3NpemVTdGF0ZS5oYWx0KCksdGhpcy5fcHJvcG9ydGlvbnNTdGF0ZS5oYWx0KCl9LGUucHJvdG90eXBlLmdldFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5nZXQoKX0sZS5wcm90b3R5cGUuZ2V0RmluYWxUcmFuc2Zvcm09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RhdGUuZ2V0RmluYWwoKX0sZS5wcm90b3R5cGUuZ2V0T3BhY2l0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcGFjaXR5U3RhdGUuZ2V0KCl9LGUucHJvdG90eXBlLmdldE9yaWdpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNPcmlnaW4/dGhpcy5fb3JpZ2luU3RhdGUuZ2V0KCk6bnVsbH0sZS5wcm90b3R5cGUuZ2V0QWxpZ249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzQWxpZ24/dGhpcy5fYWxpZ25TdGF0ZS5nZXQoKTpudWxsfSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc1NpemU/dGhpcy5fc2l6ZVN0YXRlLmdldCgpOm51bGx9LGUucHJvdG90eXBlLmdldFByb3BvcnRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc1Byb3BvcnRpb25zP3RoaXMuX3Byb3BvcnRpb25zU3RhdGUuZ2V0KCk6bnVsbH0sZS5wcm90b3R5cGUubW9kaWZ5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tb2RpZmllci5tb2RpZnkodCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL01vZGlmaWVyXCI6OSxcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTUsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiOjg4LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIjo4OX1dLDQ3OltmdW5jdGlvbih0LGkpe2kuZXhwb3J0cz17RHJhZ2dhYmxlOnQoXCIuL0RyYWdnYWJsZVwiKSxGYWRlcjp0KFwiLi9GYWRlclwiKSxNb2RpZmllckNoYWluOnQoXCIuL01vZGlmaWVyQ2hhaW5cIiksU3RhdGVNb2RpZmllcjp0KFwiLi9TdGF0ZU1vZGlmaWVyXCIpfX0se1wiLi9EcmFnZ2FibGVcIjo0MyxcIi4vRmFkZXJcIjo0NCxcIi4vTW9kaWZpZXJDaGFpblwiOjQ1LFwiLi9TdGF0ZU1vZGlmaWVyXCI6NDZ9XSw0ODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fcGFydGljbGVzPVtdLHRoaXMuX2JvZGllcz1bXSx0aGlzLl9hZ2VudERhdGE9e30sdGhpcy5fZm9yY2VzPVtdLHRoaXMuX2NvbnN0cmFpbnRzPVtdLHRoaXMuX2J1ZmZlcj0wLHRoaXMuX3ByZXZUaW1lPVMoKSx0aGlzLl9pc1NsZWVwaW5nPSExLHRoaXMuX2V2ZW50SGFuZGxlcj1udWxsLHRoaXMuX2N1cnJBZ2VudElkPTAsdGhpcy5faGFzQm9kaWVzPSExLHRoaXMuX2V2ZW50SGFuZGxlcj1udWxsfWZ1bmN0aW9uIG4odCl7cmV0dXJuIHQuYXBwbHlGb3JjZT90aGlzLl9mb3JjZXM6dC5hcHBseUNvbnN0cmFpbnQ/dGhpcy5fY29uc3RyYWludHM6dm9pZCAwfWZ1bmN0aW9uIG8odCxpLGUpe3JldHVybiB2b2lkIDA9PT1pJiYoaT10aGlzLmdldFBhcnRpY2xlc0FuZEJvZGllcygpKSxpIGluc3RhbmNlb2YgQXJyYXl8fChpPVtpXSksdC5vbihcImNoYW5nZVwiLHRoaXMud2FrZS5iaW5kKHRoaXMpKSx0aGlzLl9hZ2VudERhdGFbdGhpcy5fY3VyckFnZW50SWRdPXthZ2VudDp0LGlkOnRoaXMuX2N1cnJBZ2VudElkLHRhcmdldHM6aSxzb3VyY2U6ZX0sbi5jYWxsKHRoaXMsdCkucHVzaCh0aGlzLl9jdXJyQWdlbnRJZCksdGhpcy5fY3VyckFnZW50SWQrK31mdW5jdGlvbiBzKHQpe3JldHVybiB0aGlzLl9hZ2VudERhdGFbdF19ZnVuY3Rpb24gcih0KXt2YXIgaT1zLmNhbGwodGhpcyx0aGlzLl9mb3JjZXNbdF0pO2kuYWdlbnQuYXBwbHlGb3JjZShpLnRhcmdldHMsaS5zb3VyY2UpfWZ1bmN0aW9uIGEoKXtmb3IodmFyIHQ9dGhpcy5fZm9yY2VzLmxlbmd0aC0xO3Q+LTE7dC0tKXIuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIGgodCxpKXt2YXIgZT10aGlzLl9hZ2VudERhdGFbdGhpcy5fY29uc3RyYWludHNbdF1dO3JldHVybiBlLmFnZW50LmFwcGx5Q29uc3RyYWludChlLnRhcmdldHMsZS5zb3VyY2UsaSl9ZnVuY3Rpb24gYyh0KXtmb3IodmFyIGk9MDtpPHRoaXMub3B0aW9ucy5jb25zdHJhaW50U3RlcHM7KXtmb3IodmFyIGU9dGhpcy5fY29uc3RyYWludHMubGVuZ3RoLTE7ZT4tMTtlLS0paC5jYWxsKHRoaXMsZSx0KTtpKyt9fWZ1bmN0aW9uIHAodCxpKXt0LmludGVncmF0ZVZlbG9jaXR5KGkpLHRoaXMub3B0aW9ucy52ZWxvY2l0eUNhcCYmdC52ZWxvY2l0eS5jYXAodGhpcy5vcHRpb25zLnZlbG9jaXR5Q2FwKS5wdXQodC52ZWxvY2l0eSl9ZnVuY3Rpb24gdSh0LGkpe3QuaW50ZWdyYXRlQW5ndWxhck1vbWVudHVtKGkpLHQudXBkYXRlQW5ndWxhclZlbG9jaXR5KCksdGhpcy5vcHRpb25zLmFuZ3VsYXJWZWxvY2l0eUNhcCYmdC5hbmd1bGFyVmVsb2NpdHkuY2FwKHRoaXMub3B0aW9ucy5hbmd1bGFyVmVsb2NpdHlDYXApLnB1dCh0LmFuZ3VsYXJWZWxvY2l0eSl9ZnVuY3Rpb24gbCh0LGkpe3QuaW50ZWdyYXRlT3JpZW50YXRpb24oaSl9ZnVuY3Rpb24gZih0LGkpe3QuaW50ZWdyYXRlUG9zaXRpb24oaSksdC5lbWl0KFQudXBkYXRlLHQpfWZ1bmN0aW9uIGQodCl7YS5jYWxsKHRoaXMsdCksdGhpcy5mb3JFYWNoKHAsdCksdGhpcy5mb3JFYWNoQm9keSh1LHQpLGMuY2FsbCh0aGlzLHQpLHRoaXMuZm9yRWFjaEJvZHkobCx0KSx0aGlzLmZvckVhY2goZix0KX1mdW5jdGlvbiBfKCl7dmFyIHQ9MCxpPTA7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihlKXtpPWUuZ2V0RW5lcmd5KCksdCs9aX0pLHR9ZnVuY3Rpb24geSgpe3ZhciB0PTA7Zm9yKHZhciBpIGluIHRoaXMuX2FnZW50RGF0YSl0Kz10aGlzLmdldEFnZW50RW5lcmd5KGkpO3JldHVybiB0fXZhciBnPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSx2PTE3LG09MWUzLzEyMCxPPTE3LFM9RGF0ZS5ub3csVD17c3RhcnQ6XCJzdGFydFwiLHVwZGF0ZTpcInVwZGF0ZVwiLGVuZDpcImVuZFwifTtlLkRFRkFVTFRfT1BUSU9OUz17Y29uc3RyYWludFN0ZXBzOjEsc2xlZXBUb2xlcmFuY2U6MWUtNyx2ZWxvY2l0eUNhcDp2b2lkIDAsYW5ndWxhclZlbG9jaXR5Q2FwOnZvaWQgMH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtmb3IodmFyIGkgaW4gdCl0aGlzLm9wdGlvbnNbaV0mJih0aGlzLm9wdGlvbnNbaV09dFtpXSl9LGUucHJvdG90eXBlLmFkZEJvZHk9ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2VuZ2luZT10aGlzLHQuaXNCb2R5Pyh0aGlzLl9ib2RpZXMucHVzaCh0KSx0aGlzLl9oYXNCb2RpZXM9ITApOnRoaXMuX3BhcnRpY2xlcy5wdXNoKHQpLHQub24oXCJzdGFydFwiLHRoaXMud2FrZS5iaW5kKHRoaXMpKSx0fSxlLnByb3RvdHlwZS5yZW1vdmVCb2R5PWZ1bmN0aW9uKHQpe3ZhciBpPXQuaXNCb2R5P3RoaXMuX2JvZGllczp0aGlzLl9wYXJ0aWNsZXMsZT1pLmluZGV4T2YodCk7aWYoZT4tMSl7Zm9yKHZhciBuIGluIHRoaXMuX2FnZW50RGF0YSl0aGlzLmRldGFjaEZyb20obi5pZCx0KTtpLnNwbGljZShlLDEpfTA9PT10aGlzLmdldEJvZGllcygpLmxlbmd0aCYmKHRoaXMuX2hhc0JvZGllcz0hMSl9LGUucHJvdG90eXBlLmF0dGFjaD1mdW5jdGlvbih0LGksZSl7aWYodGhpcy53YWtlKCksdCBpbnN0YW5jZW9mIEFycmF5KXtmb3IodmFyIG49W10scz0wO3M8dC5sZW5ndGg7cysrKW5bc109by5jYWxsKHRoaXMsdFtzXSxpLGUpO3JldHVybiBufXJldHVybiBvLmNhbGwodGhpcyx0LGksZSl9LGUucHJvdG90eXBlLmF0dGFjaFRvPWZ1bmN0aW9uKHQsaSl7cy5jYWxsKHRoaXMsdCkudGFyZ2V0cy5wdXNoKGkpfSxlLnByb3RvdHlwZS5kZXRhY2g9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5nZXRBZ2VudCh0KSxlPW4uY2FsbCh0aGlzLGkpLG89ZS5pbmRleE9mKHQpO2Uuc3BsaWNlKG8sMSksZGVsZXRlIHRoaXMuX2FnZW50RGF0YVt0XX0sZS5wcm90b3R5cGUuZGV0YWNoRnJvbT1mdW5jdGlvbih0LGkpe3ZhciBlPXMuY2FsbCh0aGlzLHQpO2lmKGUuc291cmNlPT09aSl0aGlzLmRldGFjaCh0KTtlbHNle3ZhciBuPWUudGFyZ2V0cyxvPW4uaW5kZXhPZihpKTtvPi0xJiZuLnNwbGljZShvLDEpfX0sZS5wcm90b3R5cGUuZGV0YWNoQWxsPWZ1bmN0aW9uKCl7dGhpcy5fYWdlbnREYXRhPXt9LHRoaXMuX2ZvcmNlcz1bXSx0aGlzLl9jb25zdHJhaW50cz1bXSx0aGlzLl9jdXJyQWdlbnRJZD0wfSxlLnByb3RvdHlwZS5nZXRBZ2VudD1mdW5jdGlvbih0KXtyZXR1cm4gcy5jYWxsKHRoaXMsdCkuYWdlbnR9LGUucHJvdG90eXBlLmdldFBhcnRpY2xlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWNsZXN9LGUucHJvdG90eXBlLmdldEJvZGllcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ib2RpZXN9LGUucHJvdG90eXBlLmdldFBhcnRpY2xlc0FuZEJvZGllcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBhcnRpY2xlcygpLmNvbmNhdCh0aGlzLmdldEJvZGllcygpKX0sZS5wcm90b3R5cGUuZm9yRWFjaFBhcnRpY2xlPWZ1bmN0aW9uKHQsaSl7Zm9yKHZhciBlPXRoaXMuZ2V0UGFydGljbGVzKCksbj0wLG89ZS5sZW5ndGg7bz5uO24rKyl0LmNhbGwodGhpcyxlW25dLGkpfSxlLnByb3RvdHlwZS5mb3JFYWNoQm9keT1mdW5jdGlvbih0LGkpe2lmKHRoaXMuX2hhc0JvZGllcylmb3IodmFyIGU9dGhpcy5nZXRCb2RpZXMoKSxuPTAsbz1lLmxlbmd0aDtvPm47bisrKXQuY2FsbCh0aGlzLGVbbl0saSl9LGUucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCxpKXt0aGlzLmZvckVhY2hQYXJ0aWNsZSh0LGkpLHRoaXMuZm9yRWFjaEJvZHkodCxpKX0sZS5wcm90b3R5cGUuZ2V0QWdlbnRFbmVyZ3k9ZnVuY3Rpb24odCl7dmFyIGk9cy5jYWxsKHRoaXMsdCk7cmV0dXJuIGkuYWdlbnQuZ2V0RW5lcmd5KGkudGFyZ2V0cyxpLnNvdXJjZSl9LGUucHJvdG90eXBlLmdldEVuZXJneT1mdW5jdGlvbigpe3JldHVybiBfLmNhbGwodGhpcykreS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zdGVwPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNTbGVlcGluZygpKXt2YXIgdD1TKCksaT10LXRoaXMuX3ByZXZUaW1lO3RoaXMuX3ByZXZUaW1lPXQsbT5pfHwoaT5PJiYoaT1PKSxkLmNhbGwodGhpcyx2KSx0aGlzLmVtaXQoVC51cGRhdGUsdGhpcyksdGhpcy5nZXRFbmVyZ3koKTx0aGlzLm9wdGlvbnMuc2xlZXBUb2xlcmFuY2UmJnRoaXMuc2xlZXAoKSl9fSxlLnByb3RvdHlwZS5pc1NsZWVwaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzU2xlZXBpbmd9LGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2lzU2xlZXBpbmd9LGUucHJvdG90eXBlLnNsZWVwPWZ1bmN0aW9uKCl7dGhpcy5faXNTbGVlcGluZ3x8KHRoaXMuZm9yRWFjaChmdW5jdGlvbih0KXt0LnNsZWVwKCl9KSx0aGlzLmVtaXQoVC5lbmQsdGhpcyksdGhpcy5faXNTbGVlcGluZz0hMCl9LGUucHJvdG90eXBlLndha2U9ZnVuY3Rpb24oKXt0aGlzLl9pc1NsZWVwaW5nJiYodGhpcy5fcHJldlRpbWU9UygpLHRoaXMuZW1pdChULnN0YXJ0LHRoaXMpLHRoaXMuX2lzU2xlZXBpbmc9ITEpfSxlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsaSl7bnVsbCE9PXRoaXMuX2V2ZW50SGFuZGxlciYmdGhpcy5fZXZlbnRIYW5kbGVyLmVtaXQodCxpKX0sZS5wcm90b3R5cGUub249ZnVuY3Rpb24odCxpKXtudWxsPT09dGhpcy5fZXZlbnRIYW5kbGVyJiYodGhpcy5fZXZlbnRIYW5kbGVyPW5ldyBnKSx0aGlzLl9ldmVudEhhbmRsZXIub24odCxpKX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6N31dLDQ5OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7bi5jYWxsKHRoaXMsdCksdD10fHx7fSx0aGlzLm9yaWVudGF0aW9uPW5ldyByLHRoaXMuYW5ndWxhclZlbG9jaXR5PW5ldyBzLHRoaXMuYW5ndWxhck1vbWVudHVtPW5ldyBzLHRoaXMudG9ycXVlPW5ldyBzLHQub3JpZW50YXRpb24mJnRoaXMub3JpZW50YXRpb24uc2V0KHQub3JpZW50YXRpb24pLHQuYW5ndWxhclZlbG9jaXR5JiZ0aGlzLmFuZ3VsYXJWZWxvY2l0eS5zZXQodC5hbmd1bGFyVmVsb2NpdHkpLHQuYW5ndWxhck1vbWVudHVtJiZ0aGlzLmFuZ3VsYXJNb21lbnR1bS5zZXQodC5hbmd1bGFyTW9tZW50dW0pLHQudG9ycXVlJiZ0aGlzLnRvcnF1ZS5zZXQodC50b3JxdWUpLHRoaXMuYW5ndWxhclZlbG9jaXR5Lnc9MCx0aGlzLnNldE1vbWVudHNPZkluZXJ0aWEoKSx0aGlzLnBXb3JsZD1uZXcgc312YXIgbj10KFwiLi9QYXJ0aWNsZVwiKSxvPXQoXCIuLi8uLi9jb3JlL1RyYW5zZm9ybVwiKSxzPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKSxyPXQoXCIuLi8uLi9tYXRoL1F1YXRlcm5pb25cIiksYT10KFwiLi4vLi4vbWF0aC9NYXRyaXhcIiksaD10KFwiLi4vaW50ZWdyYXRvcnMvU3ltcGxlY3RpY0V1bGVyXCIpO2UuREVGQVVMVF9PUFRJT05TPW4uREVGQVVMVF9PUFRJT05TLGUuREVGQVVMVF9PUFRJT05TLm9yaWVudGF0aW9uPVswLDAsMCwxXSxlLkRFRkFVTFRfT1BUSU9OUy5hbmd1bGFyVmVsb2NpdHk9WzAsMCwwXSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmlzQm9keT0hMCxlLnByb3RvdHlwZS5zZXRNYXNzPWZ1bmN0aW9uKCl7bi5wcm90b3R5cGUuc2V0TWFzcy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zZXRNb21lbnRzT2ZJbmVydGlhKCl9LGUucHJvdG90eXBlLnNldE1vbWVudHNPZkluZXJ0aWE9ZnVuY3Rpb24oKXt0aGlzLmluZXJ0aWE9bmV3IGEsdGhpcy5pbnZlcnNlSW5lcnRpYT1uZXcgYX0sZS5wcm90b3R5cGUudXBkYXRlQW5ndWxhclZlbG9jaXR5PWZ1bmN0aW9uKCl7dGhpcy5hbmd1bGFyVmVsb2NpdHkuc2V0KHRoaXMuaW52ZXJzZUluZXJ0aWEudmVjdG9yTXVsdGlwbHkodGhpcy5hbmd1bGFyTW9tZW50dW0pKX0sZS5wcm90b3R5cGUudG9Xb3JsZENvb3JkaW5hdGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBXb3JsZC5zZXQodGhpcy5vcmllbnRhdGlvbi5yb3RhdGVWZWN0b3IodCkpfSxlLnByb3RvdHlwZS5nZXRFbmVyZ3k9ZnVuY3Rpb24oKXtyZXR1cm4gbi5wcm90b3R5cGUuZ2V0RW5lcmd5LmNhbGwodGhpcykrLjUqdGhpcy5pbmVydGlhLnZlY3Rvck11bHRpcGx5KHRoaXMuYW5ndWxhclZlbG9jaXR5KS5kb3QodGhpcy5hbmd1bGFyVmVsb2NpdHkpfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbih0LGksZSxvKXtuLnByb3RvdHlwZS5yZXNldC5jYWxsKHRoaXMsdCxpKSx0aGlzLmFuZ3VsYXJWZWxvY2l0eS5jbGVhcigpLHRoaXMuc2V0T3JpZW50YXRpb24oZXx8WzEsMCwwLDBdKSx0aGlzLnNldEFuZ3VsYXJNb21lbnR1bShvfHxbMCwwLDBdKX0sZS5wcm90b3R5cGUuc2V0T3JpZW50YXRpb249ZnVuY3Rpb24odCl7dGhpcy5vcmllbnRhdGlvbi5zZXQodCl9LGUucHJvdG90eXBlLnNldEFuZ3VsYXJWZWxvY2l0eT1mdW5jdGlvbih0KXt0aGlzLndha2UoKSx0aGlzLmFuZ3VsYXJWZWxvY2l0eS5zZXQodCl9LGUucHJvdG90eXBlLnNldEFuZ3VsYXJNb21lbnR1bT1mdW5jdGlvbih0KXt0aGlzLndha2UoKSx0aGlzLmFuZ3VsYXJNb21lbnR1bS5zZXQodCl9LGUucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCxpKXtuLnByb3RvdHlwZS5hcHBseUZvcmNlLmNhbGwodGhpcyx0KSx2b2lkIDAhPT1pJiZ0aGlzLmFwcGx5VG9ycXVlKGkuY3Jvc3ModCkpfSxlLnByb3RvdHlwZS5hcHBseVRvcnF1ZT1mdW5jdGlvbih0KXt0aGlzLndha2UoKSx0aGlzLnRvcnF1ZS5zZXQodGhpcy50b3JxdWUuYWRkKHQpKX0sZS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtPWZ1bmN0aW9uKCl7cmV0dXJuIG8udGhlbk1vdmUodGhpcy5vcmllbnRhdGlvbi5nZXRUcmFuc2Zvcm0oKSxvLmdldFRyYW5zbGF0ZShuLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm0uY2FsbCh0aGlzKSkpfSxlLnByb3RvdHlwZS5faW50ZWdyYXRlPWZ1bmN0aW9uKHQpe24ucHJvdG90eXBlLl9pbnRlZ3JhdGUuY2FsbCh0aGlzLHQpLHRoaXMuaW50ZWdyYXRlQW5ndWxhck1vbWVudHVtKHQpLHRoaXMudXBkYXRlQW5ndWxhclZlbG9jaXR5KHQpLHRoaXMuaW50ZWdyYXRlT3JpZW50YXRpb24odCl9LGUucHJvdG90eXBlLmludGVncmF0ZUFuZ3VsYXJNb21lbnR1bT1mdW5jdGlvbih0KXtoLmludGVncmF0ZUFuZ3VsYXJNb21lbnR1bSh0aGlzLHQpfSxlLnByb3RvdHlwZS5pbnRlZ3JhdGVPcmllbnRhdGlvbj1mdW5jdGlvbih0KXtoLmludGVncmF0ZU9yaWVudGF0aW9uKHRoaXMsdCl9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vLi4vbWF0aC9NYXRyaXhcIjozNyxcIi4uLy4uL21hdGgvUXVhdGVybmlvblwiOjM4LFwiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4uL2ludGVncmF0b3JzL1N5bXBsZWN0aWNFdWxlclwiOjcyLFwiLi9QYXJ0aWNsZVwiOjUxfV0sNTA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0PXR8fHt9LHRoaXMuc2V0UmFkaXVzKHQucmFkaXVzfHwwKSxuLmNhbGwodGhpcyx0KX12YXIgbj10KFwiLi9Cb2R5XCIpLG89dChcIi4uLy4uL21hdGgvTWF0cml4XCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuc2V0UmFkaXVzPWZ1bmN0aW9uKHQpe3RoaXMucmFkaXVzPXQsdGhpcy5zaXplPVsyKnRoaXMucmFkaXVzLDIqdGhpcy5yYWRpdXNdLHRoaXMuc2V0TW9tZW50c09mSW5lcnRpYSgpfSxlLnByb3RvdHlwZS5zZXRNb21lbnRzT2ZJbmVydGlhPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5tYXNzLGk9dGhpcy5yYWRpdXM7dGhpcy5pbmVydGlhPW5ldyBvKFtbLjI1KnQqaSppLDAsMF0sWzAsLjI1KnQqaSppLDBdLFswLDAsLjUqdCppKmldXSksdGhpcy5pbnZlcnNlSW5lcnRpYT1uZXcgbyhbWzQvKHQqaSppKSwwLDBdLFswLDQvKHQqaSppKSwwXSxbMCwwLDIvKHQqaSppKV1dKX0saS5leHBvcnRzPWV9LHtcIi4uLy4uL21hdGgvTWF0cml4XCI6MzcsXCIuL0JvZHlcIjo0OX1dLDUxOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dD10fHx7fTt2YXIgaT1lLkRFRkFVTFRfT1BUSU9OUzt0aGlzLnBvc2l0aW9uPW5ldyBvLHRoaXMudmVsb2NpdHk9bmV3IG8sdGhpcy5mb3JjZT1uZXcgbyx0aGlzLl9lbmdpbmU9bnVsbCx0aGlzLl9pc1NsZWVwaW5nPSEwLHRoaXMuX2V2ZW50T3V0cHV0PW51bGwsdGhpcy5tYXNzPXZvaWQgMCE9PXQubWFzcz90Lm1hc3M6aS5tYXNzLHRoaXMuaW52ZXJzZU1hc3M9MS90aGlzLm1hc3MsdGhpcy5zZXRQb3NpdGlvbih0LnBvc2l0aW9ufHxpLnBvc2l0aW9uKSx0aGlzLnNldFZlbG9jaXR5KHQudmVsb2NpdHl8fGkudmVsb2NpdHkpLHRoaXMuZm9yY2Uuc2V0KHQuZm9yY2V8fFswLDAsMF0pLHRoaXMudHJhbnNmb3JtPXMuaWRlbnRpdHkuc2xpY2UoKSx0aGlzLl9zcGVjPXtzaXplOlshMCwhMF0sdGFyZ2V0Ont0cmFuc2Zvcm06dGhpcy50cmFuc2Zvcm0sb3JpZ2luOlsuNSwuNV0sdGFyZ2V0Om51bGx9fX1mdW5jdGlvbiBuKCl7dGhpcy5fZXZlbnRPdXRwdXQ9bmV3IHIsdGhpcy5fZXZlbnRPdXRwdXQuYmluZFRoaXModGhpcyksci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpfXZhciBvPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKSxzPXQoXCIuLi8uLi9jb3JlL1RyYW5zZm9ybVwiKSxyPXQoXCIuLi8uLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxhPXQoXCIuLi9pbnRlZ3JhdG9ycy9TeW1wbGVjdGljRXVsZXJcIik7ZS5ERUZBVUxUX09QVElPTlM9e3Bvc2l0aW9uOlswLDAsMF0sdmVsb2NpdHk6WzAsMCwwXSxtYXNzOjF9O3ZhciBoPXtzdGFydDpcInN0YXJ0XCIsdXBkYXRlOlwidXBkYXRlXCIsZW5kOlwiZW5kXCJ9LGM9RGF0ZS5ub3c7ZS5wcm90b3R5cGUuaXNCb2R5PSExLGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2lzU2xlZXBpbmd9LGUucHJvdG90eXBlLnNsZWVwPWZ1bmN0aW9uKCl7dGhpcy5faXNTbGVlcGluZ3x8KHRoaXMuZW1pdChoLmVuZCx0aGlzKSx0aGlzLl9pc1NsZWVwaW5nPSEwKX0sZS5wcm90b3R5cGUud2FrZT1mdW5jdGlvbigpe3RoaXMuX2lzU2xlZXBpbmcmJih0aGlzLmVtaXQoaC5zdGFydCx0aGlzKSx0aGlzLl9pc1NsZWVwaW5nPSExLHRoaXMuX3ByZXZUaW1lPWMoKSx0aGlzLl9lbmdpbmUmJnRoaXMuX2VuZ2luZS53YWtlKCkpfSxlLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbih0KXt0aGlzLnBvc2l0aW9uLnNldCh0KX0sZS5wcm90b3R5cGUuc2V0UG9zaXRpb24xRD1mdW5jdGlvbih0KXt0aGlzLnBvc2l0aW9uLng9dH0sZS5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLnN0ZXAoKSx0aGlzLnBvc2l0aW9uLmdldCgpfSxlLnByb3RvdHlwZS5nZXRQb3NpdGlvbjFEPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5zdGVwKCksdGhpcy5wb3NpdGlvbi54fSxlLnByb3RvdHlwZS5zZXRWZWxvY2l0eT1mdW5jdGlvbih0KXt0aGlzLnZlbG9jaXR5LnNldCh0KSwoMCE9PXRbMF18fDAhPT10WzFdfHwwIT09dFsyXSkmJnRoaXMud2FrZSgpfSxlLnByb3RvdHlwZS5zZXRWZWxvY2l0eTFEPWZ1bmN0aW9uKHQpe3RoaXMudmVsb2NpdHkueD10LDAhPT10JiZ0aGlzLndha2UoKX0sZS5wcm90b3R5cGUuZ2V0VmVsb2NpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZWxvY2l0eS5nZXQoKX0sZS5wcm90b3R5cGUuc2V0Rm9yY2U9ZnVuY3Rpb24odCl7dGhpcy5mb3JjZS5zZXQodCksdGhpcy53YWtlKCl9LGUucHJvdG90eXBlLmdldFZlbG9jaXR5MUQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZWxvY2l0eS54fSxlLnByb3RvdHlwZS5zZXRNYXNzPWZ1bmN0aW9uKHQpe3RoaXMubWFzcz10LHRoaXMuaW52ZXJzZU1hc3M9MS90fSxlLnByb3RvdHlwZS5nZXRNYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFzc30sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCxpKXt0aGlzLnNldFBvc2l0aW9uKHR8fFswLDAsMF0pLHRoaXMuc2V0VmVsb2NpdHkoaXx8WzAsMCwwXSl9LGUucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCl7dC5pc1plcm8oKXx8KHRoaXMuZm9yY2UuYWRkKHQpLnB1dCh0aGlzLmZvcmNlKSx0aGlzLndha2UoKSl9LGUucHJvdG90eXBlLmFwcGx5SW1wdWxzZT1mdW5jdGlvbih0KXtpZighdC5pc1plcm8oKSl7dmFyIGk9dGhpcy52ZWxvY2l0eTtpLmFkZCh0Lm11bHQodGhpcy5pbnZlcnNlTWFzcykpLnB1dChpKX19LGUucHJvdG90eXBlLmludGVncmF0ZVZlbG9jaXR5PWZ1bmN0aW9uKHQpe2EuaW50ZWdyYXRlVmVsb2NpdHkodGhpcyx0KX0sZS5wcm90b3R5cGUuaW50ZWdyYXRlUG9zaXRpb249ZnVuY3Rpb24odCl7YS5pbnRlZ3JhdGVQb3NpdGlvbih0aGlzLHQpfSxlLnByb3RvdHlwZS5faW50ZWdyYXRlPWZ1bmN0aW9uKHQpe3RoaXMuaW50ZWdyYXRlVmVsb2NpdHkodCksdGhpcy5pbnRlZ3JhdGVQb3NpdGlvbih0KX0sZS5wcm90b3R5cGUuZ2V0RW5lcmd5PWZ1bmN0aW9uKCl7cmV0dXJuLjUqdGhpcy5tYXNzKnRoaXMudmVsb2NpdHkubm9ybVNxdWFyZWQoKX0sZS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtPWZ1bmN0aW9uKCl7dGhpcy5fZW5naW5lLnN0ZXAoKTt2YXIgdD10aGlzLnBvc2l0aW9uLGk9dGhpcy50cmFuc2Zvcm07cmV0dXJuIGlbMTJdPXQueCxpWzEzXT10LnksaVsxNF09dC56LGl9LGUucHJvdG90eXBlLm1vZGlmeT1mdW5jdGlvbih0KXt2YXIgaT10aGlzLl9zcGVjLnRhcmdldDtyZXR1cm4gaS50cmFuc2Zvcm09dGhpcy5nZXRUcmFuc2Zvcm0oKSxpLnRhcmdldD10LHRoaXMuX3NwZWN9LGUucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxpKXt0aGlzLl9ldmVudE91dHB1dCYmdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCh0LGkpfSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbigpe3JldHVybiBuLmNhbGwodGhpcyksdGhpcy5vbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbCh0aGlzKSx0aGlzLnJlbW92ZUxpc3RlbmVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUucGlwZT1mdW5jdGlvbigpe3JldHVybiBuLmNhbGwodGhpcyksdGhpcy5waXBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUudW5waXBlPWZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbCh0aGlzKSx0aGlzLnVucGlwZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi8uLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4uL2ludGVncmF0b3JzL1N5bXBsZWN0aWNFdWxlclwiOjcyfV0sNTI6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0PXR8fHt9LHRoaXMuc2l6ZT10LnNpemV8fFswLDBdLG4uY2FsbCh0aGlzLHQpfXZhciBuPXQoXCIuL0JvZHlcIiksbz10KFwiLi4vLi4vbWF0aC9NYXRyaXhcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKHQpe3RoaXMuc2l6ZT10LHRoaXMuc2V0TW9tZW50c09mSW5lcnRpYSgpfSxlLnByb3RvdHlwZS5zZXRNb21lbnRzT2ZJbmVydGlhPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5tYXNzLGk9dGhpcy5zaXplWzBdLGU9dGhpcy5zaXplWzFdO3RoaXMuaW5lcnRpYT1uZXcgbyhbW3QqZSplLzEyLDAsMF0sWzAsdCppKmkvMTIsMF0sWzAsMCx0KihpKmkrZSplKS8xMl1dKSx0aGlzLmludmVyc2VJbmVydGlhPW5ldyBvKFtbMTIvKHQqZSplKSwwLDBdLFswLDEyLyh0KmkqaSksMF0sWzAsMCwxMi8odCooaSppK2UqZSkpXV0pfSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9NYXRyaXhcIjozNyxcIi4vQm9keVwiOjQ5fV0sNTM6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtCb2R5OnQoXCIuL0JvZHlcIiksQ2lyY2xlOnQoXCIuL0NpcmNsZVwiKSxQYXJ0aWNsZTp0KFwiLi9QYXJ0aWNsZVwiKSxSZWN0YW5nbGU6dChcIi4vUmVjdGFuZ2xlXCIpfX0se1wiLi9Cb2R5XCI6NDksXCIuL0NpcmNsZVwiOjUwLFwiLi9QYXJ0aWNsZVwiOjUxLFwiLi9SZWN0YW5nbGVcIjo1Mn1dLDU0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLm5vcm1hbD1uZXcgbyx0aGlzLnBEaWZmPW5ldyBvLHRoaXMudkRpZmY9bmV3IG8sdGhpcy5pbXB1bHNlMT1uZXcgbyx0aGlzLmltcHVsc2UyPW5ldyBvLG4uY2FsbCh0aGlzKX12YXIgbj10KFwiLi9Db25zdHJhaW50XCIpLG89dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e3Jlc3RpdHV0aW9uOi41LGRyaWZ0Oi41LHNsb3A6MH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtmb3IodmFyIGkgaW4gdCl0aGlzLm9wdGlvbnNbaV09dFtpXX0sZS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50PWZ1bmN0aW9uKHQsaSxlKXtpZih2b2lkIDAhPT1pKWZvcih2YXIgbj1pLnZlbG9jaXR5LG89aS5wb3NpdGlvbixzPWkuaW52ZXJzZU1hc3Mscj1pLnJhZGl1cyxhPXRoaXMub3B0aW9ucyxoPWEuZHJpZnQsYz0tYS5zbG9wLHA9YS5yZXN0aXR1dGlvbix1PXRoaXMubm9ybWFsLGw9dGhpcy5wRGlmZixmPXRoaXMudkRpZmYsZD10aGlzLmltcHVsc2UxLF89dGhpcy5pbXB1bHNlMix5PTA7eTx0Lmxlbmd0aDt5Kyspe3ZhciBnPXRbeV07aWYoZyE9PWkpe3ZhciB2PWcudmVsb2NpdHksbT1nLnBvc2l0aW9uLE89Zy5pbnZlcnNlTWFzcyxTPWcucmFkaXVzO2wuc2V0KG0uc3ViKG8pKSxmLnNldCh2LnN1YihuKSk7dmFyIFQ9bC5ub3JtKCksdz1ULShyK1MpLGI9MS8ocytPKSxFPTA7aWYoMD53KXtpZih1LnNldChsLm5vcm1hbGl6ZSgpKSx0aGlzLl9ldmVudE91dHB1dCl7dmFyIEk9e3RhcmdldDpnLHNvdXJjZTppLG92ZXJsYXA6dyxub3JtYWw6dX07dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInByZUNvbGxpc2lvblwiLEkpLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJjb2xsaXNpb25cIixJKX12YXIgeD1jPj13PygoMStwKSp1LmRvdChmKStoL2UqKHctYykpLyhFK2UvYik6KDErcCkqdS5kb3QoZikvKEUrZS9iKTt1Lm11bHQoZSp4KS5wdXQoZCksZC5tdWx0KC0xKS5wdXQoXyksaS5hcHBseUltcHVsc2UoZCksZy5hcHBseUltcHVsc2UoXyksdGhpcy5fZXZlbnRPdXRwdXQmJnRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJwb3N0Q29sbGlzaW9uXCIsSSl9fX19LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi9Db25zdHJhaW50XCI6NTV9XSw1NTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7dGhpcy5vcHRpb25zPXRoaXMub3B0aW9uc3x8e30sdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IG4sbi5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpfXZhciBuPXQoXCIuLi8uLi9jb3JlL0V2ZW50SGFuZGxlclwiKTtlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJjaGFuZ2VcIix0KX0sZS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50PWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5nZXRFbmVyZ3k9ZnVuY3Rpb24oKXtyZXR1cm4gMH0saS5leHBvcnRzPWV9LHtcIi4uLy4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6N31dLDU2OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLko9bmV3IG8sdGhpcy5pbXB1bHNlPW5ldyBvLG4uY2FsbCh0aGlzKX12YXIgbj10KFwiLi9Db25zdHJhaW50XCIpLG89dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIHM9MWUtNyxyPU1hdGguUEk7ZS5ERUZBVUxUX09QVElPTlM9e2VxdWF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LHBsYW5lOmZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gZX0scGVyaW9kOjAsZGFtcGluZ1JhdGlvOjB9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHQpdGhpcy5vcHRpb25zW2ldPXRbaV19LGUucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludD1mdW5jdGlvbih0LGksZSl7Zm9yKHZhciBuPXRoaXMub3B0aW9ucyxvPXRoaXMuaW1wdWxzZSxhPXRoaXMuSixoPW4uZXF1YXRpb24sYz1uLnBsYW5lLHA9bi5kYW1waW5nUmF0aW8sdT1uLnBlcmlvZCxsPTA7bDx0Lmxlbmd0aDtsKyspe3ZhciBmLGQsXz10W2xdLHk9Xy52ZWxvY2l0eSxnPV8ucG9zaXRpb24sdj1fLm1hc3M7aWYoMD09PXUpZj0wLGQ9MTtlbHNle3ZhciBtPTQqdipyKnAvdSxPPTQqdipyKnIvKHUqdSk7Zj0xLyhtK2UqTyksZD1lKk8vKG0rZSpPKX12YXIgUz1nLngsVD1nLnksdz1nLnosYj1oKFMsVCx3KSxFPShoKFMrcyxnLGcpLWIpL3MsST0oaChTLFQrcyxnKS1iKS9zLHg9KGgoUyxULGcrcyktYikvcyxNPWMoUyxULHcpLHo9KGMoUytzLFQsdyktTSkvcyxDPShjKFMsVCtzLHcpLU0pL3MsUD0oYyhTLFQsdytzKS1NKS9zO2Euc2V0WFlaKEUreixJK0MseCtQKTt2YXIgRj1kL2UqKGIrTSksRD0tKGEuZG90KHkpK0YpLyhmK2UqYS5ub3JtU3F1YXJlZCgpL3YpO28uc2V0KGEubXVsdChlKkQpKSxfLmFwcGx5SW1wdWxzZShvKX19LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi9Db25zdHJhaW50XCI6NTV9XSw1NzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKHRoaXMuY29uc3RydWN0b3IuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5pbXB1bHNlPW5ldyBvLHRoaXMubm9ybWFsPW5ldyBvLHRoaXMuZGlmZlA9bmV3IG8sdGhpcy5kaWZmVj1uZXcgbyxuLmNhbGwodGhpcyl9dmFyIG49dChcIi4vQ29uc3RyYWludFwiKSxvPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXthbmNob3I6bnVsbCxsZW5ndGg6MCxtaW5MZW5ndGg6MCxwZXJpb2Q6MCxkYW1waW5nUmF0aW86MH07dmFyIHM9TWF0aC5QSTtlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3QuYW5jaG9yJiYodC5hbmNob3IucG9zaXRpb24gaW5zdGFuY2VvZiBvJiYodGhpcy5vcHRpb25zLmFuY2hvcj10LmFuY2hvci5wb3NpdGlvbiksdC5hbmNob3IgaW5zdGFuY2VvZiBvJiYodGhpcy5vcHRpb25zLmFuY2hvcj10LmFuY2hvciksdC5hbmNob3IgaW5zdGFuY2VvZiBBcnJheSYmKHRoaXMub3B0aW9ucy5hbmNob3I9bmV3IG8odC5hbmNob3IpKSksdm9pZCAwIT09dC5sZW5ndGgmJih0aGlzLm9wdGlvbnMubGVuZ3RoPXQubGVuZ3RoKSx2b2lkIDAhPT10LmRhbXBpbmdSYXRpbyYmKHRoaXMub3B0aW9ucy5kYW1waW5nUmF0aW89dC5kYW1waW5nUmF0aW8pLHZvaWQgMCE9PXQucGVyaW9kJiYodGhpcy5vcHRpb25zLnBlcmlvZD10LnBlcmlvZCksdm9pZCAwIT09dC5taW5MZW5ndGgmJih0aGlzLm9wdGlvbnMubWluTGVuZ3RoPXQubWluTGVuZ3RoKX0sZS5wcm90b3R5cGUuc2V0QW5jaG9yPWZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucy5hbmNob3J8fCh0aGlzLm9wdGlvbnMuYW5jaG9yPW5ldyBvKSx0aGlzLm9wdGlvbnMuYW5jaG9yLnNldCh0KX0sZS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50PWZ1bmN0aW9uKHQsaSxlKXt2YXIgbixvLHI9dGhpcy5ub3JtYWwsYT10aGlzLmRpZmZQLGg9dGhpcy5kaWZmVixjPXRoaXMuaW1wdWxzZSxwPXRoaXMub3B0aW9ucyx1PXAuZGFtcGluZ1JhdGlvLGw9cC5wZXJpb2QsZj1wLm1pbkxlbmd0aDtpZihpKXt2YXIgZD1pLnZlbG9jaXR5O249aS5wb3NpdGlvbixvPWkuaW52ZXJzZU1hc3N9ZWxzZSBuPXRoaXMub3B0aW9ucy5hbmNob3Isbz0wO2Zvcih2YXIgXz10aGlzLm9wdGlvbnMubGVuZ3RoLHk9MDt5PHQubGVuZ3RoO3krKyl7dmFyIGc9dFt5XSx2PWcudmVsb2NpdHksbT1nLnBvc2l0aW9uLE89Zy5pbnZlcnNlTWFzczthLnNldChtLnN1YihuKSksci5zZXQoYS5ub3JtYWxpemUoKSk7dmFyIFM9YS5ub3JtKCktXztpZihNYXRoLmFicyhTKTxmKXJldHVybjtoLnNldChpP3Yuc3ViKGQpOnYpO3ZhciBULHcsYj0xLyhPK28pO2lmKDA9PT1sKVQ9MCx3PTE7ZWxzZXt2YXIgRT00KmIqcyp1L2wsST00KmIqcypzLyhsKmwpO1Q9MS8oRStlKkkpLHc9ZSpJLyhFK2UqSSl9dmFyIHg9dy9lKlMsTT0tKHIuZG90KGgpK3gpLyhUK2UvYik7Yy5zZXQoci5tdWx0KGUqTSkpLGcuYXBwbHlJbXB1bHNlKGMpLGkmJmkuYXBwbHlJbXB1bHNlKGMubXVsdCgtMSkpfX0saS5leHBvcnRzPWV9LHtcIi4uLy4uL21hdGgvVmVjdG9yXCI6NDEsXCIuL0NvbnN0cmFpbnRcIjo1NX1dLDU4OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7bi5jYWxsKHRoaXMpLHRoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKHRoaXMuY29uc3RydWN0b3IuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5wRGlmZj1uZXcgbyx0aGlzLnZEaWZmPW5ldyBvLHRoaXMuaW1wdWxzZTE9bmV3IG8sdGhpcy5pbXB1bHNlMj1uZXcgb312YXIgbj10KFwiLi9Db25zdHJhaW50XCIpLG89dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e3BlcmlvZDozMDAsZGFtcGluZ1JhdGlvOi4xLGxlbmd0aDowLGFuY2hvcjp2b2lkIDB9O3ZhciBzPU1hdGguUEk7ZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2b2lkIDAhPT10LmFuY2hvciYmKHQuYW5jaG9yIGluc3RhbmNlb2YgbyYmKHRoaXMub3B0aW9ucy5hbmNob3I9dC5hbmNob3IpLHQuYW5jaG9yLnBvc2l0aW9uIGluc3RhbmNlb2YgbyYmKHRoaXMub3B0aW9ucy5hbmNob3I9dC5hbmNob3IucG9zaXRpb24pLHQuYW5jaG9yIGluc3RhbmNlb2YgQXJyYXkmJih0aGlzLm9wdGlvbnMuYW5jaG9yPW5ldyBvKHQuYW5jaG9yKSkpLHZvaWQgMCE9PXQubGVuZ3RoJiYodGhpcy5vcHRpb25zLmxlbmd0aD10Lmxlbmd0aCksdm9pZCAwIT09dC5kYW1waW5nUmF0aW8mJih0aGlzLm9wdGlvbnMuZGFtcGluZ1JhdGlvPXQuZGFtcGluZ1JhdGlvKSx2b2lkIDAhPT10LnBlcmlvZCYmKHRoaXMub3B0aW9ucy5wZXJpb2Q9dC5wZXJpb2QpLG4ucHJvdG90eXBlLnNldE9wdGlvbnMuY2FsbCh0aGlzLHQpfSxlLnByb3RvdHlwZS5nZXRFbmVyZ3k9ZnVuY3Rpb24odCxpKXtmb3IodmFyIGU9dGhpcy5vcHRpb25zLG49ZS5sZW5ndGgsbz1lLmFuY2hvcnx8aS5wb3NpdGlvbixyPU1hdGgucG93KDIqcy9lLnBlcmlvZCwyKSxhPTAsaD0wO2g8dC5sZW5ndGg7aCsrKXt2YXIgYz10W2hdLHA9by5zdWIoYy5wb3NpdGlvbikubm9ybSgpLW47YSs9LjUqcipwKnB9cmV0dXJuIGF9LGUucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludD1mdW5jdGlvbih0LGksZSl7Zm9yKHZhciBuPXRoaXMub3B0aW9ucyxvPXRoaXMucERpZmYscj10aGlzLnZEaWZmLGE9dGhpcy5pbXB1bHNlMSxoPXRoaXMuaW1wdWxzZTIsYz1uLmxlbmd0aCxwPW4uYW5jaG9yfHxpLnBvc2l0aW9uLHU9bi5wZXJpb2QsbD1uLmRhbXBpbmdSYXRpbyxmPTA7Zjx0Lmxlbmd0aDtmKyspe3ZhciBkPXRbZl0sXz1kLnBvc2l0aW9uLHk9ZC52ZWxvY2l0eSxnPWQubWFzcyx2PWQuaW52ZXJzZU1hc3M7XG5vLnNldChfLnN1YihwKSk7dmFyIG0sTz1vLm5vcm0oKS1jO2lmKGkpe3ZhciBTPWkuaW52ZXJzZU1hc3MsVD1pLnZlbG9jaXR5O3Iuc2V0KHkuc3ViKFQpKSxtPTEvKHYrUyl9ZWxzZSByLnNldCh5KSxtPWc7dmFyIHcsYjtpZigwPT09dGhpcy5vcHRpb25zLnBlcmlvZCl3PTAsYj0xO2Vsc2V7dmFyIEU9NCptKnMqcy8odSp1KSxJPTQqbSpzKmwvdTtiPWUqRS8oSStlKkUpLHc9MS8oSStlKkUpfXZhciB4PWIvZSpPO28ubm9ybWFsaXplKC14KS5zdWIocikubXVsdChlLyh3K2UvbSkpLnB1dChhKSxkLmFwcGx5SW1wdWxzZShhKSxpJiYoYS5tdWx0KC0xKS5wdXQoaCksaS5hcHBseUltcHVsc2UoaCkpfX0saS5leHBvcnRzPWV9LHtcIi4uLy4uL21hdGgvVmVjdG9yXCI6NDEsXCIuL0NvbnN0cmFpbnRcIjo1NX1dLDU5OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLko9bmV3IG8sdGhpcy5pbXB1bHNlPW5ldyBvLG4uY2FsbCh0aGlzKX12YXIgbj10KFwiLi9Db25zdHJhaW50XCIpLG89dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e2VxdWF0aW9uOnZvaWQgMCxwZXJpb2Q6MCxkYW1waW5nUmF0aW86MH07dmFyIHM9MWUtNyxyPU1hdGguUEk7ZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtmb3IodmFyIGkgaW4gdCl0aGlzLm9wdGlvbnNbaV09dFtpXX0sZS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50PWZ1bmN0aW9uKHQsaSxlKXtmb3IodmFyIG49dGhpcy5pbXB1bHNlLG89dGhpcy5KLGE9dGhpcy5vcHRpb25zLGg9YS5lcXVhdGlvbixjPWEuZGFtcGluZ1JhdGlvLHA9YS5wZXJpb2QsdT0wO3U8dC5sZW5ndGg7dSsrKXt2YXIgbCxmLGQ9dFt1XSxfPWQudmVsb2NpdHkseT1kLnBvc2l0aW9uLGc9ZC5tYXNzO2lmKDA9PT1wKWw9MCxmPTE7ZWxzZXt2YXIgdj00KmcqcipjL3AsbT00KmcqcipyLyhwKnApO2w9MS8oditlKm0pLGY9ZSptLyh2K2UqbSl9dmFyIE89eS54LFM9eS55LFQ9eS56LHc9aChPLFMsVCksYj0oaChPK3MseSx5KS13KS9zLEU9KGgoTyxTK3MseSktdykvcyxJPShoKE8sUyx5K3MpLXcpL3M7by5zZXRYWVooYixFLEkpO3ZhciB4PWYvZSp3LE09LShvLmRvdChfKSt4KS8obCtlKm8ubm9ybVNxdWFyZWQoKS9nKTtuLnNldChvLm11bHQoZSpNKSksZC5hcHBseUltcHVsc2Uobil9fSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4vQ29uc3RyYWludFwiOjU1fV0sNjA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuZGlmZj1uZXcgaCx0aGlzLmltcHVsc2U9bmV3IGgsYS5jYWxsKHRoaXMpfWZ1bmN0aW9uIG4odCxpKXtyZXR1cm4gaS5kb3QodCl9ZnVuY3Rpb24gbyh0KXt2YXIgaT10aGlzLm9wdGlvbnMubm9ybWFsLGU9dGhpcy5vcHRpb25zLmRpc3RhbmNlO3JldHVybiB0LmRvdChpKStlfWZ1bmN0aW9uIHModCxpLG4pe3ZhciBvPXQucG9zaXRpb24scz10LnZlbG9jaXR5LHI9dC5tYXNzLGE9dGhpcy5vcHRpb25zLm5vcm1hbCxoPXRoaXMub3B0aW9ucy5vbkNvbnRhY3QsYz10aGlzLm9wdGlvbnMucmVzdGl0dXRpb24scD10aGlzLmltcHVsc2UsdT10aGlzLm9wdGlvbnMuZHJpZnQsbD0tdGhpcy5vcHRpb25zLnNsb3AsZj0wO2lmKHRoaXMuX2V2ZW50T3V0cHV0KXt2YXIgZD17cGFydGljbGU6dCx3YWxsOnRoaXMsb3ZlcmxhcDppLG5vcm1hbDphfTt0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwicHJlQ29sbGlzaW9uXCIsZCksdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImNvbGxpc2lvblwiLGQpfXN3aXRjaChoKXtjYXNlIGUuT05fQ09OVEFDVC5SRUZMRUNUOnZhciBfPWw+aT8tKCgxK2MpKmEuZG90KHMpK3UvbiooaS1sKSkvKHIqbitmKTotKCgxK2MpKmEuZG90KHMpKS8ocipuK2YpO3Auc2V0KGEubXVsdChuKl8pKSx0LmFwcGx5SW1wdWxzZShwKSx0LnNldFBvc2l0aW9uKG8uYWRkKGEubXVsdCgtaSkpKX10aGlzLl9ldmVudE91dHB1dCYmdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInBvc3RDb2xsaXNpb25cIixkKX1mdW5jdGlvbiByKHQsaSl7dmFyIG49dGhpcy5vcHRpb25zLm9uQ29udGFjdCxvPXQucG9zaXRpb24scz10aGlzLm9wdGlvbnMubm9ybWFsO249PT1lLk9OX0NPTlRBQ1QuUkVGTEVDVCYmdC5zZXRQb3NpdGlvbihvLmFkZChzLm11bHQoLWkpKSl9dmFyIGE9dChcIi4vQ29uc3RyYWludFwiKSxoPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuT05fQ09OVEFDVD17UkVGTEVDVDowLFNJTEVOVDoxfSxlLkRFRkFVTFRfT1BUSU9OUz17cmVzdGl0dXRpb246LjUsZHJpZnQ6LjUsc2xvcDowLG5vcm1hbDpbMSwwLDBdLGRpc3RhbmNlOjAsb25Db250YWN0OmUuT05fQ09OVEFDVC5SRUZMRUNUfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQubm9ybWFsJiYodC5ub3JtYWwgaW5zdGFuY2VvZiBoJiYodGhpcy5vcHRpb25zLm5vcm1hbD10Lm5vcm1hbC5jbG9uZSgpKSx0Lm5vcm1hbCBpbnN0YW5jZW9mIEFycmF5JiYodGhpcy5vcHRpb25zLm5vcm1hbD1uZXcgaCh0Lm5vcm1hbCkpKSx2b2lkIDAhPT10LnJlc3RpdHV0aW9uJiYodGhpcy5vcHRpb25zLnJlc3RpdHV0aW9uPXQucmVzdGl0dXRpb24pLHZvaWQgMCE9PXQuZHJpZnQmJih0aGlzLm9wdGlvbnMuZHJpZnQ9dC5kcmlmdCksdm9pZCAwIT09dC5zbG9wJiYodGhpcy5vcHRpb25zLnNsb3A9dC5zbG9wKSx2b2lkIDAhPT10LmRpc3RhbmNlJiYodGhpcy5vcHRpb25zLmRpc3RhbmNlPXQuZGlzdGFuY2UpLHZvaWQgMCE9PXQub25Db250YWN0JiYodGhpcy5vcHRpb25zLm9uQ29udGFjdD10Lm9uQ29udGFjdCl9LGUucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludD1mdW5jdGlvbih0LGksZSl7Zm9yKHZhciBhPXRoaXMub3B0aW9ucy5ub3JtYWwsaD0wO2g8dC5sZW5ndGg7aCsrKXt2YXIgYz10W2hdLHA9Yy5wb3NpdGlvbix1PWMudmVsb2NpdHksbD1jLnJhZGl1c3x8MCxmPW8uY2FsbCh0aGlzLHAuYWRkKGEubXVsdCgtbCkpKSxkPW4uY2FsbCh0aGlzLGEsdSk7MD49ZiYmKDA+ZD9zLmNhbGwodGhpcyxjLGYsZSk6ci5jYWxsKHRoaXMsYyxmLGUpKX19LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi9Db25zdHJhaW50XCI6NTV9XSw2MTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksby5jYWxsKHRoaXMsdC5zaWRlc3x8dGhpcy5vcHRpb25zLnNpZGVzKSxyLmNhbGwodGhpcyl9ZnVuY3Rpb24gbih0LGksbil7dmFyIG8scz1lLlNJREVTO3N3aXRjaChwYXJzZUludCh0KSl7Y2FzZSBzLkxFRlQ6bz1pWzBdKm5bMF07YnJlYWs7Y2FzZSBzLlRPUDpvPWlbMV0qblsxXTticmVhaztjYXNlIHMuRlJPTlQ6bz1pWzJdKm5bMl07YnJlYWs7Y2FzZSBzLlJJR0hUOm89aVswXSooMS1uWzBdKTticmVhaztjYXNlIHMuQk9UVE9NOm89aVsxXSooMS1uWzFdKTticmVhaztjYXNlIHMuQkFDSzpvPWlbMl0qKDEtblsyXSl9cmV0dXJuIG99ZnVuY3Rpb24gbyh0KXt0aGlzLmNvbXBvbmVudHM9e307Zm9yKHZhciBpPXRoaXMuY29tcG9uZW50cyxlPTA7ZTx0Lmxlbmd0aDtlKyspe3ZhciBvPXRbZV07aVtlXT1uZXcgYSh7bm9ybWFsOmNbb10uY2xvbmUoKSxkaXN0YW5jZTpuKG8sdGhpcy5vcHRpb25zLnNpemUsdGhpcy5vcHRpb25zLm9yaWdpbil9KX19ZnVuY3Rpb24gcyh0KXt0aGlzLmZvckVhY2goZnVuY3Rpb24oaSl7aS5zZXRPcHRpb25zKHQpfSk7Zm9yKHZhciBpIGluIHQpdGhpcy5vcHRpb25zW2ldPXRbaV19dmFyIHI9dChcIi4vQ29uc3RyYWludFwiKSxhPXQoXCIuL1dhbGxcIiksaD10KFwiLi4vLi4vbWF0aC9WZWN0b3JcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLk9OX0NPTlRBQ1Q9YS5PTl9DT05UQUNULGUuU0lERVM9e0xFRlQ6MCxSSUdIVDoxLFRPUDoyLEJPVFRPTTozLEZST05UOjQsQkFDSzo1LFRXT19ESU1FTlNJT05BTDpbMCwxLDIsM10sVEhSRUVfRElNRU5TSU9OQUw6WzAsMSwyLDMsNCw1XX0sZS5ERUZBVUxUX09QVElPTlM9e3NpZGVzOmUuU0lERVMuVFdPX0RJTUVOU0lPTkFMLHNpemU6W3dpbmRvdy5pbm5lcldpZHRoLHdpbmRvdy5pbm5lckhlaWdodCwwXSxvcmlnaW46Wy41LC41LC41XSxkcmlmdDouNSxzbG9wOjAscmVzdGl0dXRpb246LjUsb25Db250YWN0OmUuT05fQ09OVEFDVC5SRUZMRUNUfTt2YXIgYz17MDpuZXcgaCgxLDAsMCksMTpuZXcgaCgtMSwwLDApLDI6bmV3IGgoMCwxLDApLDM6bmV3IGgoMCwtMSwwKSw0Om5ldyBoKDAsMCwxKSw1Om5ldyBoKDAsMCwtMSl9O2UucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dmFyIGk9ITE7dm9pZCAwIT09dC5yZXN0aXR1dGlvbiYmcy5jYWxsKHRoaXMse3Jlc3RpdHV0aW9uOnQucmVzdGl0dXRpb259KSx2b2lkIDAhPT10LmRyaWZ0JiZzLmNhbGwodGhpcyx7ZHJpZnQ6dC5kcmlmdH0pLHZvaWQgMCE9PXQuc2xvcCYmcy5jYWxsKHRoaXMse3Nsb3A6dC5zbG9wfSksdm9pZCAwIT09dC5vbkNvbnRhY3QmJnMuY2FsbCh0aGlzLHtvbkNvbnRhY3Q6dC5vbkNvbnRhY3R9KSx2b2lkIDAhPT10LnNpemUmJihpPSEwKSx2b2lkIDAhPT10LnNpZGVzJiYodGhpcy5vcHRpb25zLnNpZGVzPXQuc2lkZXMpLHZvaWQgMCE9PXQub3JpZ2luJiYoaT0hMCksaSYmdGhpcy5zZXRTaXplKHQuc2l6ZSx0Lm9yaWdpbil9LGUucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24odCxpKXtpPWl8fHRoaXMub3B0aW9ucy5vcmlnaW4saS5sZW5ndGg8MyYmKGlbMl09LjUpLHRoaXMuZm9yRWFjaChmdW5jdGlvbihlLG8pe3ZhciBzPW4obyx0LGkpO2Uuc2V0T3B0aW9ucyh7ZGlzdGFuY2U6c30pfSksdGhpcy5vcHRpb25zLnNpemU9dCx0aGlzLm9wdGlvbnMub3JpZ2luPWl9LGUucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludD1mdW5jdGlvbih0LGksZSl7dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uYXBwbHlDb25zdHJhaW50KHQsaSxlKX0pfSxlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucy5zaWRlcztmb3IodmFyIGUgaW4gdGhpcy5zaWRlcyl0KGlbZV0sZSl9LGUucHJvdG90eXBlLnJvdGF0ZVo9ZnVuY3Rpb24odCl7dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGkpe3ZhciBlPWkub3B0aW9ucy5ub3JtYWw7ZS5yb3RhdGVaKHQpLnB1dChlKX0pfSxlLnByb3RvdHlwZS5yb3RhdGVYPWZ1bmN0aW9uKHQpe3RoaXMuZm9yRWFjaChmdW5jdGlvbihpKXt2YXIgZT1pLm9wdGlvbnMubm9ybWFsO2Uucm90YXRlWCh0KS5wdXQoZSl9KX0sZS5wcm90b3R5cGUucm90YXRlWT1mdW5jdGlvbih0KXt0aGlzLmZvckVhY2goZnVuY3Rpb24oaSl7dmFyIGU9aS5vcHRpb25zLm5vcm1hbDtlLnJvdGF0ZVkodCkucHV0KGUpfSl9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi9Db25zdHJhaW50XCI6NTUsXCIuL1dhbGxcIjo2MH1dLDYyOltmdW5jdGlvbih0LGkpe2kuZXhwb3J0cz17Q29sbGlzaW9uOnQoXCIuL0NvbGxpc2lvblwiKSxDb25zdHJhaW50OnQoXCIuL0NvbnN0cmFpbnRcIiksQ3VydmU6dChcIi4vQ3VydmVcIiksRGlzdGFuY2U6dChcIi4vRGlzdGFuY2VcIiksU25hcDp0KFwiLi9TbmFwXCIpLFN1cmZhY2U6dChcIi4vU3VyZmFjZVwiKSxXYWxsOnQoXCIuL1dhbGxcIiksV2FsbHM6dChcIi4vV2FsbHNcIil9fSx7XCIuL0NvbGxpc2lvblwiOjU0LFwiLi9Db25zdHJhaW50XCI6NTUsXCIuL0N1cnZlXCI6NTYsXCIuL0Rpc3RhbmNlXCI6NTcsXCIuL1NuYXBcIjo1OCxcIi4vU3VyZmFjZVwiOjU5LFwiLi9XYWxsXCI6NjAsXCIuL1dhbGxzXCI6NjF9XSw2MzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKHRoaXMuY29uc3RydWN0b3IuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksbi5jYWxsKHRoaXMpfXZhciBuPXQoXCIuL0ZvcmNlXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5GT1JDRV9GVU5DVElPTlM9e0xJTkVBUjpmdW5jdGlvbih0KXtyZXR1cm4gdH0sUVVBRFJBVElDOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm11bHQodC5ub3JtKCkpfX0sZS5ERUZBVUxUX09QVElPTlM9e3N0cmVuZ3RoOi4wMSxmb3JjZUZ1bmN0aW9uOmUuRk9SQ0VfRlVOQ1RJT05TLkxJTkVBUn0sZS5wcm90b3R5cGUuYXBwbHlGb3JjZT1mdW5jdGlvbih0KXt2YXIgaSxlLG49dGhpcy5vcHRpb25zLnN0cmVuZ3RoLG89dGhpcy5vcHRpb25zLmZvcmNlRnVuY3Rpb24scz10aGlzLmZvcmNlO2ZvcihpPTA7aTx0Lmxlbmd0aDtpKyspZT10W2ldLG8oZS52ZWxvY2l0eSkubXVsdCgtbikucHV0KHMpLGUuYXBwbHlGb3JjZShzKX0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtmb3IodmFyIGkgaW4gdCl0aGlzLm9wdGlvbnNbaV09dFtpXX0saS5leHBvcnRzPWV9LHtcIi4vRm9yY2VcIjo2NH1dLDY0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5mb3JjZT1uZXcgbih0KSx0aGlzLl9ldmVudE91dHB1dD1uZXcgbyxvLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudE91dHB1dCl9dmFyIG49dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpLG89dChcIi4uLy4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpO2UucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImNoYW5nZVwiLHQpfSxlLnByb3RvdHlwZS5hcHBseUZvcmNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgaT10Lmxlbmd0aDtpLS07KXRbaV0uYXBwbHlGb3JjZSh0aGlzLmZvcmNlKX0sZS5wcm90b3R5cGUuZ2V0RW5lcmd5PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxfV0sNjU6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuZGlzcD1uZXcgbyxuLmNhbGwodGhpcyl9dmFyIG49dChcIi4vRm9yY2VcIiksbz10KFwiLi4vLi4vbWF0aC9WZWN0b3JcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLkRFQ0FZX0ZVTkNUSU9OUz17TElORUFSOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIE1hdGgubWF4KDEtMS9pKnQsMCl9LE1PUlNFOmZ1bmN0aW9uKHQsaSl7dmFyIGU9MD09PWk/MTAwOmksbj10K2UqKDEtTWF0aC5sb2coMikpO3JldHVybiBNYXRoLm1heCgxLU1hdGgucG93KDEtTWF0aC5leHAobi9lLTEpLDIpLDApfSxJTlZFUlNFOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIDEvKDEtaSt0KX0sR1JBVklUWTpmdW5jdGlvbih0LGkpe3JldHVybiAxLygxLWkrdCp0KX19LGUuREVGQVVMVF9PUFRJT05TPXtzdHJlbmd0aDoxLGFuY2hvcjp2b2lkIDAscmFuZ2U6WzAsMS8wXSxjdXRvZmY6MCxjYXA6MS8wLGRlY2F5RnVuY3Rpb246ZS5ERUNBWV9GVU5DVElPTlMuR1JBVklUWX0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2b2lkIDAhPT10LmFuY2hvciYmKHQuYW5jaG9yLnBvc2l0aW9uIGluc3RhbmNlb2YgbyYmKHRoaXMub3B0aW9ucy5hbmNob3I9dC5hbmNob3IucG9zaXRpb24pLHQuYW5jaG9yIGluc3RhbmNlb2YgQXJyYXkmJih0aGlzLm9wdGlvbnMuYW5jaG9yPW5ldyBvKHQuYW5jaG9yKSksZGVsZXRlIHQuYW5jaG9yKTtmb3IodmFyIGkgaW4gdCl0aGlzLm9wdGlvbnNbaV09dFtpXX0sZS5wcm90b3R5cGUuYXBwbHlGb3JjZT1mdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMub3B0aW9ucyxuPXRoaXMuZm9yY2Usbz10aGlzLmRpc3Ascz1lLnN0cmVuZ3RoLHI9ZS5hbmNob3J8fGkucG9zaXRpb24sYT1lLmNhcCxoPWUuY3V0b2ZmLGM9ZS5yYW5nZVswXSxwPWUucmFuZ2VbMV0sdT1lLmRlY2F5RnVuY3Rpb247aWYoMCE9PXMpZm9yKHZhciBsLGYsZCxfLHk9dC5sZW5ndGg7eS0tOylsPXRbeV0sbCE9PWkmJihmPWwubWFzcyxkPWwucG9zaXRpb24sby5zZXQoZC5zdWIocikpLF89by5ub3JtKCkscD5fJiZfPmMmJihuLnNldChvLm5vcm1hbGl6ZShzKmYqdShfLGgpKS5jYXAoYSkpLGwuYXBwbHlGb3JjZShuKSkpfSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4vRm9yY2VcIjo2NH1dLDY2OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7bi5jYWxsKHRoaXMsdCl9dmFyIG49dChcIi4vRHJhZ1wiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPW4uREVGQVVMVF9PUFRJT05TLGUuRk9SQ0VfRlVOQ1RJT05TPW4uRk9SQ0VfRlVOQ1RJT05TLGUuRk9SQ0VfRlVOQ1RJT05TPXtMSU5FQVI6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LFFVQURSQVRJQzpmdW5jdGlvbih0KXtyZXR1cm4gdC5tdWx0KHQubm9ybSgpKX19LGUucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCl7dmFyIGksZSxuPXRoaXMub3B0aW9ucy5zdHJlbmd0aCxvPXRoaXMub3B0aW9ucy5mb3JjZUZ1bmN0aW9uLHM9dGhpcy5mb3JjZTtmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKWU9dFtpXSxvKGUuYW5ndWxhclZlbG9jaXR5KS5tdWx0KC0xMDAqbikucHV0KHMpLGUuYXBwbHlUb3JxdWUocyl9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHQpdGhpcy5vcHRpb25zW2ldPXRbaV19LGkuZXhwb3J0cz1lfSx7XCIuL0RyYWdcIjo2M31dLDY3OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7YS5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gbigpe3ZhciB0PXRoaXMub3B0aW9uczt0LnN0aWZmbmVzcz1NYXRoLnBvdygyKmMvdC5wZXJpb2QsMil9ZnVuY3Rpb24gbygpe3ZhciB0PXRoaXMub3B0aW9uczt0LmRhbXBpbmc9NCpjKnQuZGFtcGluZ1JhdGlvL3QucGVyaW9kfWZ1bmN0aW9uIHMoKXtuLmNhbGwodGhpcyksby5jYWxsKHRoaXMpfXZhciByPXQoXCIuL0ZvcmNlXCIpLGE9dChcIi4vU3ByaW5nXCIpLGg9dChcIi4uLy4uL21hdGgvUXVhdGVybmlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPWEuREVGQVVMVF9PUFRJT05TLGUuRk9SQ0VfRlVOQ1RJT05TPWEuRk9SQ0VfRlVOQ1RJT05TO3ZhciBjPU1hdGguUEk7ZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2b2lkIDAhPT10LmFuY2hvciYmKHQuYW5jaG9yIGluc3RhbmNlb2YgaCYmKHRoaXMub3B0aW9ucy5hbmNob3I9dC5hbmNob3IpLHQuYW5jaG9yIGluc3RhbmNlb2YgQXJyYXkmJih0aGlzLm9wdGlvbnMuYW5jaG9yPW5ldyBoKHQuYW5jaG9yKSkpLHZvaWQgMCE9PXQucGVyaW9kJiYodGhpcy5vcHRpb25zLnBlcmlvZD10LnBlcmlvZCksdm9pZCAwIT09dC5kYW1waW5nUmF0aW8mJih0aGlzLm9wdGlvbnMuZGFtcGluZ1JhdGlvPXQuZGFtcGluZ1JhdGlvKSx2b2lkIDAhPT10Lmxlbmd0aCYmKHRoaXMub3B0aW9ucy5sZW5ndGg9dC5sZW5ndGgpLHZvaWQgMCE9PXQuZm9yY2VGdW5jdGlvbiYmKHRoaXMub3B0aW9ucy5mb3JjZUZ1bmN0aW9uPXQuZm9yY2VGdW5jdGlvbiksdm9pZCAwIT09dC5tYXhMZW5ndGgmJih0aGlzLm9wdGlvbnMubWF4TGVuZ3RoPXQubWF4TGVuZ3RoKSxzLmNhbGwodGhpcyksci5wcm90b3R5cGUuc2V0T3B0aW9ucy5jYWxsKHRoaXMsdCl9LGUucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCl7dmFyIGksZSxuLG8scz10aGlzLmZvcmNlLHI9dGhpcy5vcHRpb25zLGE9dGhpcy5kaXNwLGg9ci5zdGlmZm5lc3MsYz1yLmRhbXBpbmcscD1yLmxlbmd0aCx1PXIuYW5jaG9yLGw9ci5mb3JjZUZ1bmN0aW9uLGY9ci5tYXhMZW5ndGg7Zm9yKGk9MDtpPHQubGVuZ3RoO2krKyl7aWYoZT10W2ldLGEuc2V0KHUuc3ViKGUub3JpZW50YXRpb24pKSxuPWEubm9ybSgpLXAsMD09PW4pcmV0dXJuO289ZS5tYXNzLGgqPW8sYyo9byxzLnNldChhLm5vcm1hbGl6ZShoKmwobixmKSkpLGMmJnMuYWRkKGUuYW5ndWxhclZlbG9jaXR5Lm11bHQoLWMpKS5wdXQocyksZS5hcHBseVRvcnF1ZShzKX19LGUucHJvdG90eXBlLmdldEVuZXJneT1mdW5jdGlvbih0KXtmb3IodmFyIGk9dGhpcy5vcHRpb25zLGU9aS5sZW5ndGgsbj1pLmFuY2hvcixvPWkuc3RpZmZuZXNzLHM9MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBhPXRbcl0saD1uLnN1YihhLm9yaWVudGF0aW9uKS5ub3JtKCktZTtzKz0uNSpvKmgqaH1yZXR1cm4gc30saS5leHBvcnRzPWV9LHtcIi4uLy4uL21hdGgvUXVhdGVybmlvblwiOjM4LFwiLi9Gb3JjZVwiOjY0LFwiLi9TcHJpbmdcIjo2OH1dLDY4OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7ci5jYWxsKHRoaXMpLHRoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKHRoaXMuY29uc3RydWN0b3IuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5kaXNwPW5ldyBhKDAsMCwwKSxzLmNhbGwodGhpcyl9ZnVuY3Rpb24gbigpe3ZhciB0PXRoaXMub3B0aW9uczt0LnN0aWZmbmVzcz1NYXRoLnBvdygyKmgvdC5wZXJpb2QsMil9ZnVuY3Rpb24gbygpe3ZhciB0PXRoaXMub3B0aW9uczt0LmRhbXBpbmc9NCpoKnQuZGFtcGluZ1JhdGlvL3QucGVyaW9kfWZ1bmN0aW9uIHMoKXtuLmNhbGwodGhpcyksby5jYWxsKHRoaXMpfXZhciByPXQoXCIuL0ZvcmNlXCIpLGE9dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIGg9TWF0aC5QSSxjPTE1MDtlLkZPUkNFX0ZVTkNUSU9OUz17RkVORTpmdW5jdGlvbih0LGkpe3ZhciBlPS45OSppLG49TWF0aC5tYXgoTWF0aC5taW4odCxlKSwtZSk7cmV0dXJuIG4vKDEtbipuLyhpKmkpKX0sSE9PSzpmdW5jdGlvbih0KXtyZXR1cm4gdH19LGUuREVGQVVMVF9PUFRJT05TPXtwZXJpb2Q6MzAwLGRhbXBpbmdSYXRpbzouMSxsZW5ndGg6MCxtYXhMZW5ndGg6MS8wLGFuY2hvcjp2b2lkIDAsZm9yY2VGdW5jdGlvbjplLkZPUkNFX0ZVTkNUSU9OUy5IT09LfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQuYW5jaG9yJiYodC5hbmNob3IucG9zaXRpb24gaW5zdGFuY2VvZiBhJiYodGhpcy5vcHRpb25zLmFuY2hvcj10LmFuY2hvci5wb3NpdGlvbiksdC5hbmNob3IgaW5zdGFuY2VvZiBhJiYodGhpcy5vcHRpb25zLmFuY2hvcj10LmFuY2hvciksdC5hbmNob3IgaW5zdGFuY2VvZiBBcnJheSYmKHRoaXMub3B0aW9ucy5hbmNob3I9bmV3IGEodC5hbmNob3IpKSksdm9pZCAwIT09dC5wZXJpb2QmJih0LnBlcmlvZDxjJiYodC5wZXJpb2Q9Yyxjb25zb2xlLndhcm4oXCJUaGUgcGVyaW9kIG9mIGEgU3ByaW5nVHJhbnNpdGlvbiBpcyBjYXBwZWQgYXQgXCIrYytcIiBtcy4gVXNlIGEgU25hcFRyYW5zaXRpb24gZm9yIGZhc3RlciB0cmFuc2l0aW9uc1wiKSksdGhpcy5vcHRpb25zLnBlcmlvZD10LnBlcmlvZCksdm9pZCAwIT09dC5kYW1waW5nUmF0aW8mJih0aGlzLm9wdGlvbnMuZGFtcGluZ1JhdGlvPXQuZGFtcGluZ1JhdGlvKSx2b2lkIDAhPT10Lmxlbmd0aCYmKHRoaXMub3B0aW9ucy5sZW5ndGg9dC5sZW5ndGgpLHZvaWQgMCE9PXQuZm9yY2VGdW5jdGlvbiYmKHRoaXMub3B0aW9ucy5mb3JjZUZ1bmN0aW9uPXQuZm9yY2VGdW5jdGlvbiksdm9pZCAwIT09dC5tYXhMZW5ndGgmJih0aGlzLm9wdGlvbnMubWF4TGVuZ3RoPXQubWF4TGVuZ3RoKSxzLmNhbGwodGhpcyksci5wcm90b3R5cGUuc2V0T3B0aW9ucy5jYWxsKHRoaXMsdCl9LGUucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCxpKXt2YXIgZSxuLG8scyxyLGEsaD10aGlzLmZvcmNlLGM9dGhpcy5kaXNwLHA9dGhpcy5vcHRpb25zLHU9cC5zdGlmZm5lc3MsbD1wLmRhbXBpbmcsZj1wLmxlbmd0aCxkPXAubWF4TGVuZ3RoLF89cC5hbmNob3J8fGkucG9zaXRpb24seT1wLmZvcmNlRnVuY3Rpb247Zm9yKGU9MDtlPHQubGVuZ3RoO2UrKyl7aWYobj10W2VdLG89bi5wb3NpdGlvbixzPW4udmVsb2NpdHksXy5zdWIobykucHV0KGMpLHI9Yy5ub3JtKCktZiwwPT09cilyZXR1cm47YT1uLm1hc3MsdSo9YSxsKj1hLGMubm9ybWFsaXplKHUqeShyLGQpKS5wdXQoaCksbCYmKGk/aC5hZGQocy5zdWIoaS52ZWxvY2l0eSkubXVsdCgtbCkpLnB1dChoKTpoLmFkZChzLm11bHQoLWwpKS5wdXQoaCkpLG4uYXBwbHlGb3JjZShoKSxpJiZpLmFwcGx5Rm9yY2UoaC5tdWx0KC0xKSl9fSxlLnByb3RvdHlwZS5nZXRFbmVyZ3k9ZnVuY3Rpb24odCxpKXtmb3IodmFyIGU9dGhpcy5vcHRpb25zLG49ZS5sZW5ndGgsbz1pP2kucG9zaXRpb246ZS5hbmNob3Iscz1lLnN0aWZmbmVzcyxyPTAsYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgaD10W2FdLGM9by5zdWIoaC5wb3NpdGlvbikubm9ybSgpLW47cis9LjUqcypjKmN9cmV0dXJuIHJ9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi9Gb3JjZVwiOjY0fV0sNjk6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtvLmNhbGwodGhpcyksdGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLmV2YWx1YXRpb249bmV3IHN9ZnVuY3Rpb24gbih0KXt2YXIgaT1lLkZJRUxEUztzd2l0Y2godCl7Y2FzZSBpLkNPTlNUQU5UOnRoaXMub3B0aW9ucy5kaXJlY3Rpb24/dGhpcy5vcHRpb25zLmRpcmVjdGlvbiBpbnN0YW5jZW9mIEFycmF5JiYodGhpcy5vcHRpb25zLmRpcmVjdGlvbj1uZXcgcyh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uKSk6dGhpcy5vcHRpb25zLmRpcmVjdGlvbj1uZXcgcygwLDEsMCk7YnJlYWs7Y2FzZSBpLlBPSU5UX0FUVFJBQ1RPUjp0aGlzLm9wdGlvbnMucG9zaXRpb24/dGhpcy5vcHRpb25zLnBvc2l0aW9uIGluc3RhbmNlb2YgQXJyYXkmJih0aGlzLm9wdGlvbnMucG9zaXRpb249bmV3IHModGhpcy5vcHRpb25zLnBvc2l0aW9uKSk6dGhpcy5vcHRpb25zLnBvc2l0aW9uPW5ldyBzKDAsMCwwKX19dmFyIG89dChcIi4vRm9yY2VcIikscz10KFwiLi4vLi4vbWF0aC9WZWN0b3JcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLkZJRUxEUz17Q09OU1RBTlQ6ZnVuY3Rpb24odCxpKXtpLmRpcmVjdGlvbi5wdXQodGhpcy5ldmFsdWF0aW9uKX0sTElORUFSOmZ1bmN0aW9uKHQpe3QucHV0KHRoaXMuZXZhbHVhdGlvbil9LFJBRElBTDpmdW5jdGlvbih0KXt0Lm11bHQoLTEpLnB1dCh0aGlzLmV2YWx1YXRpb24pfSxQT0lOVF9BVFRSQUNUT1I6ZnVuY3Rpb24odCxpKXtpLnBvc2l0aW9uLnN1Yih0KS5wdXQodGhpcy5ldmFsdWF0aW9uKX19LGUuREVGQVVMVF9PUFRJT05TPXtzdHJlbmd0aDouMDEsZmllbGQ6ZS5GSUVMRFMuQ09OU1RBTlR9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dm9pZCAwIT09dC5zdHJlbmd0aCYmKHRoaXMub3B0aW9ucy5zdHJlbmd0aD10LnN0cmVuZ3RoKSx2b2lkIDAhPT10LmZpZWxkJiYodGhpcy5vcHRpb25zLmZpZWxkPXQuZmllbGQsbi5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZpZWxkKSl9LGUucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCl7dmFyIGksZSxuPXRoaXMuZm9yY2Usbz10aGlzLm9wdGlvbnMuc3RyZW5ndGgscz10aGlzLm9wdGlvbnMuZmllbGQ7Zm9yKGk9MDtpPHQubGVuZ3RoO2krKyllPXRbaV0scy5jYWxsKHRoaXMsZS5wb3NpdGlvbix0aGlzLm9wdGlvbnMpLHRoaXMuZXZhbHVhdGlvbi5tdWx0KGUubWFzcypvKS5wdXQobiksZS5hcHBseUZvcmNlKG4pfSxlLnByb3RvdHlwZS5nZXRFbmVyZ3k9ZnVuY3Rpb24odCl7dmFyIGksbixvPXRoaXMub3B0aW9ucy5maWVsZCxzPWUuRklFTERTLHI9MDtzd2l0Y2gobyl7Y2FzZSBzLkNPTlNUQU5UOnI9dC5sZW5ndGgqdGhpcy5vcHRpb25zLmRpcmVjdGlvbi5ub3JtKCk7YnJlYWs7Y2FzZSBzLlJBRElBTDpmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKW49dFtpXSxyKz1uLnBvc2l0aW9uLm5vcm0oKTticmVhaztjYXNlIHMuUE9JTlRfQVRUUkFDVE9SOmZvcihpPTA7aTx0Lmxlbmd0aDtpKyspbj10W2ldLHIrPW4ucG9zaXRpb24uc3ViKHRoaXMub3B0aW9ucy5wb3NpdGlvbikubm9ybSgpfXJldHVybiByKj10aGlzLm9wdGlvbnMuc3RyZW5ndGh9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi9Gb3JjZVwiOjY0fV0sNzA6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtEcmFnOnQoXCIuL0RyYWdcIiksRm9yY2U6dChcIi4vRm9yY2VcIiksUmVwdWxzaW9uOnQoXCIuL1JlcHVsc2lvblwiKSxSb3RhdGlvbmFsRHJhZzp0KFwiLi9Sb3RhdGlvbmFsRHJhZ1wiKSxSb3RhdGlvbmFsU3ByaW5nOnQoXCIuL1JvdGF0aW9uYWxTcHJpbmdcIiksU3ByaW5nOnQoXCIuL1NwcmluZ1wiKSxWZWN0b3JGaWVsZDp0KFwiLi9WZWN0b3JGaWVsZFwiKX19LHtcIi4vRHJhZ1wiOjYzLFwiLi9Gb3JjZVwiOjY0LFwiLi9SZXB1bHNpb25cIjo2NSxcIi4vUm90YXRpb25hbERyYWdcIjo2NixcIi4vUm90YXRpb25hbFNwcmluZ1wiOjY3LFwiLi9TcHJpbmdcIjo2OCxcIi4vVmVjdG9yRmllbGRcIjo2OX1dLDcxOltmdW5jdGlvbih0LGkpe2kuZXhwb3J0cz17UGh5c2ljc0VuZ2luZTp0KFwiLi9QaHlzaWNzRW5naW5lXCIpLGJvZGllczp0KFwiLi9ib2RpZXNcIiksY29uc3RyYWludHM6dChcIi4vY29uc3RyYWludHNcIiksZm9yY2VzOnQoXCIuL2ZvcmNlc1wiKSxpbnRlZ3JhdG9yczp0KFwiLi9pbnRlZ3JhdG9yc1wiKX19LHtcIi4vUGh5c2ljc0VuZ2luZVwiOjQ4LFwiLi9ib2RpZXNcIjo1MyxcIi4vY29uc3RyYWludHNcIjo2MixcIi4vZm9yY2VzXCI6NzAsXCIuL2ludGVncmF0b3JzXCI6NzN9XSw3MjpbZnVuY3Rpb24odCxpKXt2YXIgZT17fTtlLmludGVncmF0ZVZlbG9jaXR5PWZ1bmN0aW9uKHQsaSl7dmFyIGU9dC52ZWxvY2l0eSxuPXQuaW52ZXJzZU1hc3Msbz10LmZvcmNlO28uaXNaZXJvKCl8fChlLmFkZChvLm11bHQoaSpuKSkucHV0KGUpLG8uY2xlYXIoKSl9LGUuaW50ZWdyYXRlUG9zaXRpb249ZnVuY3Rpb24odCxpKXt2YXIgZT10LnBvc2l0aW9uLG49dC52ZWxvY2l0eTtlLmFkZChuLm11bHQoaSkpLnB1dChlKX0sZS5pbnRlZ3JhdGVBbmd1bGFyTW9tZW50dW09ZnVuY3Rpb24odCxpKXt2YXIgZT10LmFuZ3VsYXJNb21lbnR1bSxuPXQudG9ycXVlO24uaXNaZXJvKCl8fChlLmFkZChuLm11bHQoaSkpLnB1dChlKSxuLmNsZWFyKCkpfSxlLmludGVncmF0ZU9yaWVudGF0aW9uPWZ1bmN0aW9uKHQsaSl7dmFyIGU9dC5vcmllbnRhdGlvbixuPXQuYW5ndWxhclZlbG9jaXR5O24uaXNaZXJvKCl8fGUuYWRkKGUubXVsdGlwbHkobikuc2NhbGFyTXVsdGlwbHkoLjUqaSkpLnB1dChlKX0saS5leHBvcnRzPWV9LHt9XSw3MzpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e1N5bXBsZWN0aWNFdWxlcjp0KFwiLi9TeW1wbGVjdGljRXVsZXJcIil9fSx7XCIuL1N5bXBsZWN0aWNFdWxlclwiOjcyfV0sNzQ6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0JiZ0LmNhbnZhc1NpemUmJih0aGlzLl9jYW52YXNTaXplPXQuY2FudmFzU2l6ZSksbi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2FudmFzU2l6ZXx8KHRoaXMuX2NhbnZhc1NpemU9dGhpcy5nZXRTaXplKCkpLHRoaXMuX2JhY2tCdWZmZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSx0aGlzLl9jYW52YXNTaXplJiYodGhpcy5fYmFja0J1ZmZlci53aWR0aD10aGlzLl9jYW52YXNTaXplWzBdLHRoaXMuX2JhY2tCdWZmZXIuaGVpZ2h0PXRoaXMuX2NhbnZhc1NpemVbMV0pLHRoaXMuX2NvbnRleHRJZD12b2lkIDB9dmFyIG49dChcIi4uL2NvcmUvU3VyZmFjZVwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmVsZW1lbnRUeXBlPVwiY2FudmFzXCIsZS5wcm90b3R5cGUuZWxlbWVudENsYXNzPVwiZmFtb3VzLXN1cmZhY2VcIixlLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5kZXBsb3k9ZnVuY3Rpb24odCl7dGhpcy5fY2FudmFzU2l6ZSYmKHQud2lkdGg9dGhpcy5fY2FudmFzU2l6ZVswXSx0LmhlaWdodD10aGlzLl9jYW52YXNTaXplWzFdKSxcIjJkXCI9PT10aGlzLl9jb250ZXh0SWQmJih0LmdldENvbnRleHQodGhpcy5fY29udGV4dElkKS5kcmF3SW1hZ2UodGhpcy5fYmFja0J1ZmZlciwwLDApLHRoaXMuX2JhY2tCdWZmZXIud2lkdGg9MCx0aGlzLl9iYWNrQnVmZmVyLmhlaWdodD0wKX0sZS5wcm90b3R5cGUucmVjYWxsPWZ1bmN0aW9uKHQpe3RoaXMuZ2V0U2l6ZSgpO3RoaXMuX2JhY2tCdWZmZXIud2lkdGg9dC53aWR0aCx0aGlzLl9iYWNrQnVmZmVyLmhlaWdodD10LmhlaWdodCxcIjJkXCI9PT10aGlzLl9jb250ZXh0SWQmJih0aGlzLl9iYWNrQnVmZmVyLmdldENvbnRleHQodGhpcy5fY29udGV4dElkKS5kcmF3SW1hZ2UodCwwLDApLHQud2lkdGg9MCx0LmhlaWdodD0wKX0sZS5wcm90b3R5cGUuZ2V0Q29udGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY29udGV4dElkPXQsdGhpcy5fY3VycmVudFRhcmdldD90aGlzLl9jdXJyZW50VGFyZ2V0LmdldENvbnRleHQodCk6dGhpcy5fYmFja0J1ZmZlci5nZXRDb250ZXh0KHQpfSxlLnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKHQsaSl7bi5wcm90b3R5cGUuc2V0U2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksaSYmKHRoaXMuX2NhbnZhc1NpemU9W2lbMF0saVsxXV0pLHRoaXMuX2N1cnJlbnRUYXJnZXQmJih0aGlzLl9jdXJyZW50VGFyZ2V0LndpZHRoPXRoaXMuX2NhbnZhc1NpemVbMF0sdGhpcy5fY3VycmVudFRhcmdldC5oZWlnaHQ9dGhpcy5fY2FudmFzU2l6ZVsxXSl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL1N1cmZhY2VcIjoxNH1dLDc1OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7bi5jYWxsKHRoaXMsdCksdGhpcy5fY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJmYW1vdXMtZ3JvdXBcIiksdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJmYW1vdXMtY29udGFpbmVyLWdyb3VwXCIpLHRoaXMuX3Nob3VsZFJlY2FsY3VsYXRlU2l6ZT0hMSx0aGlzLmNvbnRleHQ9bmV3IG8odGhpcy5fY29udGFpbmVyKSx0aGlzLnNldENvbnRlbnQodGhpcy5fY29udGFpbmVyKX12YXIgbj10KFwiLi4vY29yZS9TdXJmYWNlXCIpLG89dChcIi4uL2NvcmUvQ29udGV4dFwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmVsZW1lbnRUeXBlPVwiZGl2XCIsZS5wcm90b3R5cGUuZWxlbWVudENsYXNzPVwiZmFtb3VzLXN1cmZhY2VcIixlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmFkZC5hcHBseSh0aGlzLmNvbnRleHQsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpemVEaXJ0eSYmKHRoaXMuX3Nob3VsZFJlY2FsY3VsYXRlU2l6ZT0hMCksbi5wcm90b3R5cGUucmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUuZGVwbG95PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nob3VsZFJlY2FsY3VsYXRlU2l6ZT0hMCxuLnByb3RvdHlwZS5kZXBsb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9zaXplP1t0aGlzLl9zaXplWzBdLHRoaXMuX3NpemVbMV1dOm51bGwsaT1uLnByb3RvdHlwZS5jb21taXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybih0aGlzLl9zaG91bGRSZWNhbGN1bGF0ZVNpemV8fHQmJih0aGlzLl9zaXplWzBdIT09dFswXXx8dGhpcy5fc2l6ZVsxXSE9PXRbMV0pKSYmKHRoaXMuY29udGV4dC5zZXRTaXplKCksdGhpcy5fc2hvdWxkUmVjYWxjdWxhdGVTaXplPSExKSx0aGlzLmNvbnRleHQudXBkYXRlKCksaX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvQ29udGV4dFwiOjEsXCIuLi9jb3JlL1N1cmZhY2VcIjoxNH1dLDc2OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dCYmKHRoaXMuX21ldGhvZD10Lm1ldGhvZHx8XCJcIiksbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIG49dChcIi4vQ29udGFpbmVyU3VyZmFjZVwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmVsZW1lbnRUeXBlPVwiZm9ybVwiLGUucHJvdG90eXBlLmRlcGxveT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbWV0aG9kJiYodC5tZXRob2Q9dGhpcy5fbWV0aG9kKSxuLnByb3RvdHlwZS5kZXBsb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLmV4cG9ydHM9ZX0se1wiLi9Db250YWluZXJTdXJmYWNlXCI6NzV9XSw3NzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7dGhpcy5faW1hZ2VVcmw9dm9pZCAwLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBuPXQoXCIuLi9jb3JlL1N1cmZhY2VcIiksbz1bXSxzPVtdLHI9W10sYT0hMDtlLmVuYWJsZUNhY2hlPWZ1bmN0aW9uKCl7YT0hMH0sZS5kaXNhYmxlQ2FjaGU9ZnVuY3Rpb24oKXthPSExfSxlLmNsZWFyQ2FjaGU9ZnVuY3Rpb24oKXtvPVtdLHM9W10scj1bXX0sZS5nZXRDYWNoZT1mdW5jdGlvbigpe3JldHVybnt1cmxDYWNoZTpvLGNvdW50Q2FjaGU6cyxub2RlQ2FjaGU6c319LGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuZWxlbWVudFR5cGU9XCJpbWdcIixlLnByb3RvdHlwZS5lbGVtZW50Q2xhc3M9XCJmYW1vdXMtc3VyZmFjZVwiLGUucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGk9by5pbmRleE9mKHRoaXMuX2ltYWdlVXJsKTstMSE9PWkmJigxPT09c1tpXT8oby5zcGxpY2UoaSwxKSxzLnNwbGljZShpLDEpLHIuc3BsaWNlKGksMSkpOnNbaV0tLSksaT1vLmluZGV4T2YodCksLTE9PT1pPyhvLnB1c2godCkscy5wdXNoKDEpKTpzW2ldKyssdGhpcy5faW1hZ2VVcmw9dCx0aGlzLl9jb250ZW50RGlydHk9ITB9LGUucHJvdG90eXBlLmRlcGxveT1mdW5jdGlvbih0KXt2YXIgaT1vLmluZGV4T2YodGhpcy5faW1hZ2VVcmwpO2lmKHZvaWQgMD09PXJbaV0mJmEpe3ZhciBlPW5ldyBJbWFnZTtlLnNyYz10aGlzLl9pbWFnZVVybHx8XCJcIixyW2ldPWV9dC5zcmM9dGhpcy5faW1hZ2VVcmx8fFwiXCJ9LGUucHJvdG90eXBlLnJlY2FsbD1mdW5jdGlvbih0KXt0LnNyYz1cIlwifSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9TdXJmYWNlXCI6MTR9XSw3ODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuX3BsYWNlaG9sZGVyPXQucGxhY2Vob2xkZXJ8fFwiXCIsdGhpcy5fdmFsdWU9dC52YWx1ZXx8XCJcIix0aGlzLl90eXBlPXQudHlwZXx8XCJ0ZXh0XCIsdGhpcy5fbmFtZT10Lm5hbWV8fFwiXCIsbi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5vbihcImNsaWNrXCIsdGhpcy5mb2N1cy5iaW5kKHRoaXMpKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24odCl7dC50YXJnZXQhPT10aGlzLl9jdXJyZW50VGFyZ2V0JiZ0aGlzLmJsdXIoKX0uYmluZCh0aGlzKSl9dmFyIG49dChcIi4uL2NvcmUvU3VyZmFjZVwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmVsZW1lbnRUeXBlPVwiaW5wdXRcIixlLnByb3RvdHlwZS5lbGVtZW50Q2xhc3M9XCJmYW1vdXMtc3VyZmFjZVwiLGUucHJvdG90eXBlLnNldFBsYWNlaG9sZGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wbGFjZWhvbGRlcj10LHRoaXMuX2NvbnRlbnREaXJ0eT0hMCx0aGlzfSxlLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50VGFyZ2V0JiZ0aGlzLl9jdXJyZW50VGFyZ2V0LmZvY3VzKCksdGhpc30sZS5wcm90b3R5cGUuYmx1cj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50VGFyZ2V0JiZ0aGlzLl9jdXJyZW50VGFyZ2V0LmJsdXIoKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdmFsdWU9dCx0aGlzLl9jb250ZW50RGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuc2V0VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdHlwZT10LHRoaXMuX2NvbnRlbnREaXJ0eT0hMCx0aGlzfSxlLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50VGFyZ2V0P3RoaXMuX2N1cnJlbnRUYXJnZXQudmFsdWU6dGhpcy5fdmFsdWV9LGUucHJvdG90eXBlLnNldE5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX25hbWU9dCx0aGlzLl9jb250ZW50RGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9uYW1lfSxlLnByb3RvdHlwZS5kZXBsb3k9ZnVuY3Rpb24odCl7XCJcIiE9PXRoaXMuX3BsYWNlaG9sZGVyJiYodC5wbGFjZWhvbGRlcj10aGlzLl9wbGFjZWhvbGRlciksdC52YWx1ZT10aGlzLl92YWx1ZSx0LnR5cGU9dGhpcy5fdHlwZSx0Lm5hbWU9dGhpcy5fbmFtZX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvU3VyZmFjZVwiOjE0fV0sNzk6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl90eXBlPVwic3VibWl0XCIsdCYmdC5vbkNsaWNrJiZ0aGlzLnNldE9uQ2xpY2sodC5vbkNsaWNrKX12YXIgbj10KFwiLi9JbnB1dFN1cmZhY2VcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5zZXRPbkNsaWNrPWZ1bmN0aW9uKHQpe3RoaXMub25DbGljaz10fSxlLnByb3RvdHlwZS5kZXBsb3k9ZnVuY3Rpb24odCl7dGhpcy5vbmNsaWNrJiYodC5vbkNsaWNrPXRoaXMub25DbGljayksbi5wcm90b3R5cGUuZGVwbG95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5leHBvcnRzPWV9LHtcIi4vSW5wdXRTdXJmYWNlXCI6Nzh9XSw4MDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuX3BsYWNlaG9sZGVyPXQucGxhY2Vob2xkZXJ8fFwiXCIsdGhpcy5fdmFsdWU9dC52YWx1ZXx8XCJcIix0aGlzLl9uYW1lPXQubmFtZXx8XCJcIix0aGlzLl93cmFwPXQud3JhcHx8XCJcIix0aGlzLl9jb2xzPXQuY29sc3x8XCJcIix0aGlzLl9yb3dzPXQucm93c3x8XCJcIixuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLm9uKFwiY2xpY2tcIix0aGlzLmZvY3VzLmJpbmQodGhpcykpfXZhciBuPXQoXCIuLi9jb3JlL1N1cmZhY2VcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5lbGVtZW50VHlwZT1cInRleHRhcmVhXCIsZS5wcm90b3R5cGUuZWxlbWVudENsYXNzPVwiZmFtb3VzLXN1cmZhY2VcIixlLnByb3RvdHlwZS5zZXRQbGFjZWhvbGRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXI9dCx0aGlzLl9jb250ZW50RGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRhcmdldCYmdGhpcy5fY3VycmVudFRhcmdldC5mb2N1cygpLHRoaXN9LGUucHJvdG90eXBlLmJsdXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRhcmdldCYmdGhpcy5fY3VycmVudFRhcmdldC5ibHVyKCksdGhpc30sZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3ZhbHVlPXQsdGhpcy5fY29udGVudERpcnR5PSEwLHRoaXN9LGUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRUYXJnZXQ/dGhpcy5fY3VycmVudFRhcmdldC52YWx1ZTp0aGlzLl92YWx1ZX0sZS5wcm90b3R5cGUuc2V0TmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbmFtZT10LHRoaXMuX2NvbnRlbnREaXJ0eT0hMCx0aGlzfSxlLnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25hbWV9LGUucHJvdG90eXBlLnNldFdyYXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3dyYXA9dCx0aGlzLl9jb250ZW50RGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuc2V0Q29sdW1ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY29scz10LHRoaXMuX2NvbnRlbnREaXJ0eT0hMCx0aGlzfSxlLnByb3RvdHlwZS5zZXRSb3dzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yb3dzPXQsdGhpcy5fY29udGVudERpcnR5PSEwLHRoaXN9LGUucHJvdG90eXBlLmRlcGxveT1mdW5jdGlvbih0KXtcIlwiIT09dGhpcy5fcGxhY2Vob2xkZXImJih0LnBsYWNlaG9sZGVyPXRoaXMuX3BsYWNlaG9sZGVyKSxcIlwiIT09dGhpcy5fdmFsdWUmJih0LnZhbHVlPXRoaXMuX3ZhbHVlKSxcIlwiIT09dGhpcy5fbmFtZSYmKHQubmFtZT10aGlzLl9uYW1lKSxcIlwiIT09dGhpcy5fd3JhcCYmKHQud3JhcD10aGlzLl93cmFwKSxcIlwiIT09dGhpcy5fY29scyYmKHQuY29scz10aGlzLl9jb2xzKSxcIlwiIT09dGhpcy5fcm93cyYmKHQucm93cz10aGlzLl9yb3dzKX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvU3VyZmFjZVwiOjE0fV0sODE6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl92aWRlb1VybD12b2lkIDAsdGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KX12YXIgbj10KFwiLi4vY29yZS9TdXJmYWNlXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e2F1dG9wbGF5OiExfSxlLnByb3RvdHlwZS5lbGVtZW50VHlwZT1cInZpZGVvXCIsZS5wcm90b3R5cGUuZWxlbWVudENsYXNzPVwiZmFtb3VzLXN1cmZhY2VcIixlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3Quc2l6ZSYmdGhpcy5zZXRTaXplKHQuc2l6ZSksdC5jbGFzc2VzJiZ0aGlzLnNldENsYXNzZXModC5jbGFzc2VzKSx0LnByb3BlcnRpZXMmJnRoaXMuc2V0UHJvcGVydGllcyh0LnByb3BlcnRpZXMpLHQuYXV0b3BsYXkmJih0aGlzLm9wdGlvbnMuYXV0b3BsYXk9dC5hdXRvcGxheSksdC5zcmMmJih0aGlzLl92aWRlb1VybD10LnNyYyx0aGlzLl9jb250ZW50RGlydHk9ITApfSxlLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKHQpe3RoaXMuX3ZpZGVvVXJsPXQsdGhpcy5fY29udGVudERpcnR5PSEwfSxlLnByb3RvdHlwZS5kZXBsb3k9ZnVuY3Rpb24odCl7dC5zcmM9dGhpcy5fdmlkZW9VcmwsdC5hdXRvcGxheT10aGlzLm9wdGlvbnMuYXV0b3BsYXl9LGUucHJvdG90eXBlLnJlY2FsbD1mdW5jdGlvbih0KXt0LnNyYz1cIlwifSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9TdXJmYWNlXCI6MTR9XSw4MjpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0NhbnZhc1N1cmZhY2U6dChcIi4vQ2FudmFzU3VyZmFjZVwiKSxDb250YWluZXJTdXJmYWNlOnQoXCIuL0NvbnRhaW5lclN1cmZhY2VcIiksRm9ybUNvbnRhaW5lclN1cmZhY2U6dChcIi4vRm9ybUNvbnRhaW5lclN1cmZhY2VcIiksSW1hZ2VTdXJmYWNlOnQoXCIuL0ltYWdlU3VyZmFjZVwiKSxJbnB1dFN1cmZhY2U6dChcIi4vSW5wdXRTdXJmYWNlXCIpLFN1Ym1pdElucHV0U3VyZmFjZTp0KFwiLi9TdWJtaXRJbnB1dFN1cmZhY2VcIiksVGV4dGFyZWFTdXJmYWNlOnQoXCIuL1RleHRhcmVhU3VyZmFjZVwiKSxWaWRlb1N1cmZhY2U6dChcIi4vVmlkZW9TdXJmYWNlXCIpfX0se1wiLi9DYW52YXNTdXJmYWNlXCI6NzQsXCIuL0NvbnRhaW5lclN1cmZhY2VcIjo3NSxcIi4vRm9ybUNvbnRhaW5lclN1cmZhY2VcIjo3NixcIi4vSW1hZ2VTdXJmYWNlXCI6NzcsXCIuL0lucHV0U3VyZmFjZVwiOjc4LFwiLi9TdWJtaXRJbnB1dFN1cmZhY2VcIjo3OSxcIi4vVGV4dGFyZWFTdXJmYWNlXCI6ODAsXCIuL1ZpZGVvU3VyZmFjZVwiOjgxfV0sODM6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl9tYXA9dHx8bnVsbCx0aGlzLl9jYWNoZWRPdXRwdXQ9bnVsbCx0aGlzLl9jYWNoZWRJbnB1dD1OdW1iZXIuTmFOfWUuY3JlYXRlPWZ1bmN0aW9uKHQpe3ZhciBpPW5ldyBlKHQpO3JldHVybiBpLmdldC5iaW5kKGkpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQhPT10aGlzLl9jYWNoZWRJbnB1dCYmKHRoaXMuX2NhY2hlZElucHV0PXQsdGhpcy5fY2FjaGVkT3V0cHV0PXRoaXMuX21hcCh0KSksdGhpcy5fY2FjaGVkT3V0cHV0fSxpLmV4cG9ydHM9ZX0se31dLDg0OltmdW5jdGlvbih0LGkpe3ZhciBlPXtpblF1YWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdH0sb3V0UXVhZDpmdW5jdGlvbih0KXtyZXR1cm4tKHQtPTEpKnQrMX0saW5PdXRRdWFkOmZ1bmN0aW9uKHQpe3JldHVybih0Lz0uNSk8MT8uNSp0KnQ6LS41KigtLXQqKHQtMiktMSl9LGluQ3ViaWM6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdCp0fSxvdXRDdWJpYzpmdW5jdGlvbih0KXtyZXR1cm4tLXQqdCp0KzF9LGluT3V0Q3ViaWM6ZnVuY3Rpb24odCl7cmV0dXJuKHQvPS41KTwxPy41KnQqdCp0Oi41KigodC09MikqdCp0KzIpfSxpblF1YXJ0OmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqdCp0fSxvdXRRdWFydDpmdW5jdGlvbih0KXtyZXR1cm4tKC0tdCp0KnQqdC0xKX0saW5PdXRRdWFydDpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LjUqdCp0KnQqdDotLjUqKCh0LT0yKSp0KnQqdC0yKX0saW5RdWludDpmdW5jdGlvbih0KXtyZXR1cm4gdCp0KnQqdCp0fSxvdXRRdWludDpmdW5jdGlvbih0KXtyZXR1cm4tLXQqdCp0KnQqdCsxfSxpbk91dFF1aW50OmZ1bmN0aW9uKHQpe3JldHVybih0Lz0uNSk8MT8uNSp0KnQqdCp0KnQ6LjUqKCh0LT0yKSp0KnQqdCp0KzIpfSxpblNpbmU6ZnVuY3Rpb24odCl7cmV0dXJuLTEqTWF0aC5jb3ModCooTWF0aC5QSS8yKSkrMX0sb3V0U2luZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zaW4odCooTWF0aC5QSS8yKSl9LGluT3V0U2luZTpmdW5jdGlvbih0KXtyZXR1cm4tLjUqKE1hdGguY29zKE1hdGguUEkqdCktMSl9LGluRXhwbzpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/MDpNYXRoLnBvdygyLDEwKih0LTEpKX0sb3V0RXhwbzpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQ/MTotTWF0aC5wb3coMiwtMTAqdCkrMX0saW5PdXRFeHBvOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8wOjE9PT10PzE6KHQvPS41KTwxPy41Kk1hdGgucG93KDIsMTAqKHQtMSkpOi41KigtTWF0aC5wb3coMiwtMTAqLS10KSsyKX0saW5DaXJjOmZ1bmN0aW9uKHQpe3JldHVybi0oTWF0aC5zcXJ0KDEtdCp0KS0xKX0sb3V0Q2lyYzpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zcXJ0KDEtIC0tdCp0KX0saW5PdXRDaXJjOmZ1bmN0aW9uKHQpe3JldHVybih0Lz0uNSk8MT8tLjUqKE1hdGguc3FydCgxLXQqdCktMSk6LjUqKE1hdGguc3FydCgxLSh0LT0yKSp0KSsxKX0saW5FbGFzdGljOmZ1bmN0aW9uKHQpe3ZhciBpPTEuNzAxNTgsZT0wLG49MTtyZXR1cm4gMD09PXQ/MDoxPT09dD8xOihlfHwoZT0uMyksaT1lLygyKk1hdGguUEkpKk1hdGguYXNpbigxL24pLC0obipNYXRoLnBvdygyLDEwKih0LT0xKSkqTWF0aC5zaW4oMioodC1pKSpNYXRoLlBJL2UpKSl9LG91dEVsYXN0aWM6ZnVuY3Rpb24odCl7dmFyIGk9MS43MDE1OCxlPTAsbj0xO3JldHVybiAwPT09dD8wOjE9PT10PzE6KGV8fChlPS4zKSxpPWUvKDIqTWF0aC5QSSkqTWF0aC5hc2luKDEvbiksbipNYXRoLnBvdygyLC0xMCp0KSpNYXRoLnNpbigyKih0LWkpKk1hdGguUEkvZSkrMSl9LGluT3V0RWxhc3RpYzpmdW5jdGlvbih0KXt2YXIgaT0xLjcwMTU4LGU9MCxuPTE7cmV0dXJuIDA9PT10PzA6Mj09PSh0Lz0uNSk/MTooZXx8KGU9LjMqMS41KSxpPWUvKDIqTWF0aC5QSSkqTWF0aC5hc2luKDEvbiksMT50Py0uNSpuKk1hdGgucG93KDIsMTAqKHQtPTEpKSpNYXRoLnNpbigyKih0LWkpKk1hdGguUEkvZSk6bipNYXRoLnBvdygyLC0xMCoodC09MSkpKk1hdGguc2luKDIqKHQtaSkqTWF0aC5QSS9lKSouNSsxKX0saW5CYWNrOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIHZvaWQgMD09PWkmJihpPTEuNzAxNTgpLHQqdCooKGkrMSkqdC1pKX0sb3V0QmFjazpmdW5jdGlvbih0LGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT0xLjcwMTU4KSwtLXQqdCooKGkrMSkqdCtpKSsxfSxpbk91dEJhY2s6ZnVuY3Rpb24odCxpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9MS43MDE1OCksKHQvPS41KTwxPy41KnQqdCooKChpKj0xLjUyNSkrMSkqdC1pKTouNSooKHQtPTIpKnQqKCgoaSo9MS41MjUpKzEpKnQraSkrMil9LGluQm91bmNlOmZ1bmN0aW9uKHQpe3JldHVybiAxLWUub3V0Qm91bmNlKDEtdCl9LG91dEJvdW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gMS8yLjc1PnQ/Ny41NjI1KnQqdDoyLzIuNzU+dD83LjU2MjUqKHQtPTEuNS8yLjc1KSp0Ky43NToyLjUvMi43NT50PzcuNTYyNSoodC09Mi4yNS8yLjc1KSp0Ky45Mzc1OjcuNTYyNSoodC09Mi42MjUvMi43NSkqdCsuOTg0Mzc1fSxpbk91dEJvdW5jZTpmdW5jdGlvbih0KXtyZXR1cm4uNT50Py41KmUuaW5Cb3VuY2UoMip0KTouNSplLm91dEJvdW5jZSgyKnQtMSkrLjV9fTtpLmV4cG9ydHM9ZX0se31dLDg1OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5tZXRob2Q9dCx0aGlzLl9pbnN0YW5jZXM9W10sdGhpcy5zdGF0ZT1bXX12YXIgbj10KFwiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIik7ZS5TVVBQT1JUU19NVUxUSVBMRT0hMCxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2luc3RhbmNlcy5sZW5ndGg7dCsrKXRoaXMuc3RhdGVbdF09dGhpcy5faW5zdGFuY2VzW3RdLmdldCgpO3JldHVybiB0aGlzLnN0YXRlfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxpLGUpe2Zvcih2YXIgbz1uLmFmdGVyKHQubGVuZ3RoLGUpLHM9MDtzPHQubGVuZ3RoO3MrKyl0aGlzLl9pbnN0YW5jZXNbc118fCh0aGlzLl9pbnN0YW5jZXNbc109bmV3IHRoaXMubWV0aG9kKSx0aGlzLl9pbnN0YW5jZXNbc10uc2V0KHRbc10saSxvKX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspdGhpcy5faW5zdGFuY2VzW2ldfHwodGhpcy5faW5zdGFuY2VzW2ldPW5ldyB0aGlzLm1ldGhvZCksdGhpcy5faW5zdGFuY2VzW2ldLnJlc2V0KHRbaV0pfSxpLmV4cG9ydHM9ZX0se1wiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIjo5NX1dLDg2OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dD10fHwwLHRoaXMuZW5kU3RhdGU9bmV3IHYodCksdGhpcy5pbml0U3RhdGU9bmV3IHYsdGhpcy5fZGltZW5zaW9ucz0xLHRoaXMuX3Jlc3RUb2xlcmFuY2U9MWUtMTAsdGhpcy5fYWJzUmVzdFRvbGVyYW5jZT10aGlzLl9yZXN0VG9sZXJhbmNlLHRoaXMuX2NhbGxiYWNrPXZvaWQgMCx0aGlzLlBFPW5ldyBfLHRoaXMucGFydGljbGU9bmV3IHksdGhpcy5zcHJpbmc9bmV3IGcoe2FuY2hvcjp0aGlzLmVuZFN0YXRlfSksdGhpcy5QRS5hZGRCb2R5KHRoaXMucGFydGljbGUpLHRoaXMuUEUuYXR0YWNoKHRoaXMuc3ByaW5nLHRoaXMucGFydGljbGUpfWZ1bmN0aW9uIG4oKXtyZXR1cm4gdGhpcy5wYXJ0aWNsZS5nZXRFbmVyZ3koKSt0aGlzLnNwcmluZy5nZXRFbmVyZ3koW3RoaXMucGFydGljbGVdKX1mdW5jdGlvbiBvKCl7dmFyIHQ9dGhpcy5lbmRTdGF0ZS5zdWIodGhpcy5pbml0U3RhdGUpLm5vcm1TcXVhcmVkKCk7dGhpcy5fYWJzUmVzdFRvbGVyYW5jZT0wPT09dD90aGlzLl9yZXN0VG9sZXJhbmNlOnRoaXMuX3Jlc3RUb2xlcmFuY2UqdH1mdW5jdGlvbiBzKHQpe3RoaXMuZW5kU3RhdGUuc2V0KHQpLG8uY2FsbCh0aGlzKX1mdW5jdGlvbiByKCl7dGhpcy5QRS53YWtlKCl9ZnVuY3Rpb24gYSgpe3RoaXMuUEUuc2xlZXAoKX1mdW5jdGlvbiBoKHQpe3RoaXMucGFydGljbGUucG9zaXRpb24uc2V0KHQpfWZ1bmN0aW9uIGModCl7dGhpcy5wYXJ0aWNsZS52ZWxvY2l0eS5zZXQodCl9ZnVuY3Rpb24gcCgpe3JldHVybiAwPT09dGhpcy5fZGltZW5zaW9ucz90aGlzLnBhcnRpY2xlLmdldFBvc2l0aW9uMUQoKTp0aGlzLnBhcnRpY2xlLmdldFBvc2l0aW9uKCl9ZnVuY3Rpb24gdSgpe3JldHVybiAwPT09dGhpcy5fZGltZW5zaW9ucz90aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5MUQoKTp0aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5KCl9ZnVuY3Rpb24gbCh0KXt0aGlzLl9jYWxsYmFjaz10fWZ1bmN0aW9uIGYodCl7dmFyIGk9ZS5ERUZBVUxUX09QVElPTlM7dm9pZCAwPT09dC5wZXJpb2QmJih0LnBlcmlvZD1pLnBlcmlvZCksdm9pZCAwPT09dC5kYW1waW5nUmF0aW8mJih0LmRhbXBpbmdSYXRpbz1pLmRhbXBpbmdSYXRpbyksdm9pZCAwPT09dC52ZWxvY2l0eSYmKHQudmVsb2NpdHk9aS52ZWxvY2l0eSksdGhpcy5zcHJpbmcuc2V0T3B0aW9ucyh7cGVyaW9kOnQucGVyaW9kLGRhbXBpbmdSYXRpbzp0LmRhbXBpbmdSYXRpb30pLGMuY2FsbCh0aGlzLHQudmVsb2NpdHkpfWZ1bmN0aW9uIGQoKXtpZih0aGlzLlBFLmlzU2xlZXBpbmcoKSl7aWYodGhpcy5fY2FsbGJhY2spe3ZhciB0PXRoaXMuX2NhbGxiYWNrO3RoaXMuX2NhbGxiYWNrPXZvaWQgMCx0KCl9fWVsc2Ugbi5jYWxsKHRoaXMpPHRoaXMuX2Fic1Jlc3RUb2xlcmFuY2UmJihoLmNhbGwodGhpcyx0aGlzLmVuZFN0YXRlKSxjLmNhbGwodGhpcyxbMCwwLDBdKSxhLmNhbGwodGhpcykpfXZhciBfPXQoXCIuLi9waHlzaWNzL1BoeXNpY3NFbmdpbmVcIikseT10KFwiLi4vcGh5c2ljcy9ib2RpZXMvUGFydGljbGVcIiksZz10KFwiLi4vcGh5c2ljcy9jb25zdHJhaW50cy9TbmFwXCIpLHY9dChcIi4uL21hdGgvVmVjdG9yXCIpO2UuU1VQUE9SVFNfTVVMVElQTEU9MyxlLkRFRkFVTFRfT1BUSU9OUz17cGVyaW9kOjEwMCxkYW1waW5nUmF0aW86LjIsdmVsb2NpdHk6MH0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCxpKXt0aGlzLl9kaW1lbnNpb25zPXQgaW5zdGFuY2VvZiBBcnJheT90Lmxlbmd0aDowLHRoaXMuaW5pdFN0YXRlLnNldCh0KSxoLmNhbGwodGhpcyx0KSxzLmNhbGwodGhpcyx0KSxpJiZjLmNhbGwodGhpcyxpKSxsLmNhbGwodGhpcyx2b2lkIDApfSxlLnByb3RvdHlwZS5nZXRWZWxvY2l0eT1mdW5jdGlvbigpe3JldHVybiB1LmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnNldFZlbG9jaXR5PWZ1bmN0aW9uKHQpe3RoaXMuY2FsbCh0aGlzLGModCkpfSxlLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLlBFLmlzU2xlZXBpbmcoKX0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3RoaXMuc2V0KHRoaXMuZ2V0KCkpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpLHAuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gaT8odGhpcy5fZGltZW5zaW9ucz10IGluc3RhbmNlb2YgQXJyYXk/dC5sZW5ndGg6MCxyLmNhbGwodGhpcyksZi5jYWxsKHRoaXMsaSkscy5jYWxsKHRoaXMsdCksdm9pZCBsLmNhbGwodGhpcyxlKSk6KHRoaXMucmVzZXQodCksdm9pZChlJiZlKCkpKX0saS5leHBvcnRzPWV9LHtcIi4uL21hdGgvVmVjdG9yXCI6NDEsXCIuLi9waHlzaWNzL1BoeXNpY3NFbmdpbmVcIjo0OCxcIi4uL3BoeXNpY3MvYm9kaWVzL1BhcnRpY2xlXCI6NTEsXCIuLi9waHlzaWNzL2NvbnN0cmFpbnRzL1NuYXBcIjo1OH1dLDg3OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dD10fHwwLHRoaXMuZW5kU3RhdGU9bmV3IHYodCksdGhpcy5pbml0U3RhdGU9bmV3IHYsdGhpcy5fZGltZW5zaW9ucz12b2lkIDAsdGhpcy5fcmVzdFRvbGVyYW5jZT0xZS0xMCx0aGlzLl9hYnNSZXN0VG9sZXJhbmNlPXRoaXMuX3Jlc3RUb2xlcmFuY2UsdGhpcy5fY2FsbGJhY2s9dm9pZCAwLHRoaXMuUEU9bmV3IF8sdGhpcy5zcHJpbmc9bmV3IGcoe2FuY2hvcjp0aGlzLmVuZFN0YXRlfSksdGhpcy5wYXJ0aWNsZT1uZXcgeSx0aGlzLlBFLmFkZEJvZHkodGhpcy5wYXJ0aWNsZSksdGhpcy5QRS5hdHRhY2godGhpcy5zcHJpbmcsdGhpcy5wYXJ0aWNsZSl9ZnVuY3Rpb24gbigpe3JldHVybiB0aGlzLnBhcnRpY2xlLmdldEVuZXJneSgpK3RoaXMuc3ByaW5nLmdldEVuZXJneShbdGhpcy5wYXJ0aWNsZV0pfWZ1bmN0aW9uIG8odCl7dGhpcy5wYXJ0aWNsZS5zZXRQb3NpdGlvbih0KX1mdW5jdGlvbiBzKHQpe3RoaXMucGFydGljbGUuc2V0VmVsb2NpdHkodCl9ZnVuY3Rpb24gcigpe3JldHVybiAwPT09dGhpcy5fZGltZW5zaW9ucz90aGlzLnBhcnRpY2xlLmdldFBvc2l0aW9uMUQoKTp0aGlzLnBhcnRpY2xlLmdldFBvc2l0aW9uKCl9ZnVuY3Rpb24gYSgpe3JldHVybiAwPT09dGhpcy5fZGltZW5zaW9ucz90aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5MUQoKTp0aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5KCl9ZnVuY3Rpb24gaCh0KXt0aGlzLl9jYWxsYmFjaz10fWZ1bmN0aW9uIGMoKXt0aGlzLlBFLndha2UoKX1mdW5jdGlvbiBwKCl7dGhpcy5QRS5zbGVlcCgpfWZ1bmN0aW9uIHUoKXtpZih0aGlzLlBFLmlzU2xlZXBpbmcoKSl7aWYodGhpcy5fY2FsbGJhY2spe3ZhciB0PXRoaXMuX2NhbGxiYWNrO3RoaXMuX2NhbGxiYWNrPXZvaWQgMCx0KCl9fWVsc2Ugbi5jYWxsKHRoaXMpPHRoaXMuX2Fic1Jlc3RUb2xlcmFuY2UmJihvLmNhbGwodGhpcyx0aGlzLmVuZFN0YXRlKSxzLmNhbGwodGhpcyxbMCwwLDBdKSxwLmNhbGwodGhpcykpfWZ1bmN0aW9uIGwodCl7dmFyIGk9ZS5ERUZBVUxUX09QVElPTlM7dm9pZCAwPT09dC5wZXJpb2QmJih0LnBlcmlvZD1pLnBlcmlvZCksdm9pZCAwPT09dC5kYW1waW5nUmF0aW8mJih0LmRhbXBpbmdSYXRpbz1pLmRhbXBpbmdSYXRpbyksdm9pZCAwPT09dC52ZWxvY2l0eSYmKHQudmVsb2NpdHk9aS52ZWxvY2l0eSksdC5wZXJpb2Q8MTUwJiYodC5wZXJpb2Q9MTUwLGNvbnNvbGUud2FybihcIlRoZSBwZXJpb2Qgb2YgYSBTcHJpbmdUcmFuc2l0aW9uIGlzIGNhcHBlZCBhdCAxNTAgbXMuIFVzZSBhIFNuYXBUcmFuc2l0aW9uIGZvciBmYXN0ZXIgdHJhbnNpdGlvbnNcIikpLHRoaXMuc3ByaW5nLnNldE9wdGlvbnMoe3BlcmlvZDp0LnBlcmlvZCxkYW1waW5nUmF0aW86dC5kYW1waW5nUmF0aW99KSxzLmNhbGwodGhpcyx0LnZlbG9jaXR5KX1mdW5jdGlvbiBmKCl7dmFyIHQ9dGhpcy5lbmRTdGF0ZS5zdWIodGhpcy5pbml0U3RhdGUpLm5vcm1TcXVhcmVkKCk7dGhpcy5fYWJzUmVzdFRvbGVyYW5jZT0wPT09dD90aGlzLl9yZXN0VG9sZXJhbmNlOnRoaXMuX3Jlc3RUb2xlcmFuY2UqdH1mdW5jdGlvbiBkKHQpe3RoaXMuZW5kU3RhdGUuc2V0KHQpLGYuY2FsbCh0aGlzKX12YXIgXz10KFwiLi4vcGh5c2ljcy9QaHlzaWNzRW5naW5lXCIpLHk9dChcIi4uL3BoeXNpY3MvYm9kaWVzL1BhcnRpY2xlXCIpLGc9dChcIi4uL3BoeXNpY3MvZm9yY2VzL1NwcmluZ1wiKSx2PXQoXCIuLi9tYXRoL1ZlY3RvclwiKTtlLlNVUFBPUlRTX01VTFRJUExFPTMsZS5ERUZBVUxUX09QVElPTlM9e3BlcmlvZDozMDAsZGFtcGluZ1JhdGlvOi41LHZlbG9jaXR5OjB9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQsaSl7dGhpcy5fZGltZW5zaW9ucz10IGluc3RhbmNlb2YgQXJyYXk/dC5sZW5ndGg6MCx0aGlzLmluaXRTdGF0ZS5zZXQodCksby5jYWxsKHRoaXMsdCksZC5jYWxsKHRoaXMsdCksaSYmcy5jYWxsKHRoaXMsaSksaC5jYWxsKHRoaXMsdm9pZCAwKX0sZS5wcm90b3R5cGUuZ2V0VmVsb2NpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gYS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zZXRWZWxvY2l0eT1mdW5jdGlvbih0KXt0aGlzLmNhbGwodGhpcyxzKHQpKX0sZS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5QRS5pc1NsZWVwaW5nKClcbn0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3RoaXMuc2V0KHRoaXMuZ2V0KCkpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdS5jYWxsKHRoaXMpLHIuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gaT8odGhpcy5fZGltZW5zaW9ucz10IGluc3RhbmNlb2YgQXJyYXk/dC5sZW5ndGg6MCxjLmNhbGwodGhpcyksbC5jYWxsKHRoaXMsaSksZC5jYWxsKHRoaXMsdCksdm9pZCBoLmNhbGwodGhpcyxlKSk6KHRoaXMucmVzZXQodCksdm9pZChlJiZlKCkpKX0saS5leHBvcnRzPWV9LHtcIi4uL21hdGgvVmVjdG9yXCI6NDEsXCIuLi9waHlzaWNzL1BoeXNpY3NFbmdpbmVcIjo0OCxcIi4uL3BoeXNpY3MvYm9kaWVzL1BhcnRpY2xlXCI6NTEsXCIuLi9waHlzaWNzL2ZvcmNlcy9TcHJpbmdcIjo2OH1dLDg4OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5jdXJyZW50QWN0aW9uPW51bGwsdGhpcy5hY3Rpb25RdWV1ZT1bXSx0aGlzLmNhbGxiYWNrUXVldWU9W10sdGhpcy5zdGF0ZT0wLHRoaXMudmVsb2NpdHk9dm9pZCAwLHRoaXMuX2NhbGxiYWNrPXZvaWQgMCx0aGlzLl9lbmdpbmVJbnN0YW5jZT1udWxsLHRoaXMuX2N1cnJlbnRNZXRob2Q9bnVsbCx0aGlzLnNldCh0KX1mdW5jdGlvbiBuKCl7aWYodGhpcy5fY2FsbGJhY2spe3ZhciB0PXRoaXMuX2NhbGxiYWNrO3RoaXMuX2NhbGxiYWNrPXZvaWQgMCx0KCl9aWYodGhpcy5hY3Rpb25RdWV1ZS5sZW5ndGg8PTApcmV0dXJuIHZvaWQgdGhpcy5zZXQodGhpcy5nZXQoKSk7dGhpcy5jdXJyZW50QWN0aW9uPXRoaXMuYWN0aW9uUXVldWUuc2hpZnQoKSx0aGlzLl9jYWxsYmFjaz10aGlzLmNhbGxiYWNrUXVldWUuc2hpZnQoKTt2YXIgaT1udWxsLGU9dGhpcy5jdXJyZW50QWN0aW9uWzBdLGE9dGhpcy5jdXJyZW50QWN0aW9uWzFdO2EgaW5zdGFuY2VvZiBPYmplY3QmJmEubWV0aG9kPyhpPWEubWV0aG9kLFwic3RyaW5nXCI9PXR5cGVvZiBpJiYoaT1yW2ldKSk6aT1zLHRoaXMuX2N1cnJlbnRNZXRob2QhPT1pJiYodGhpcy5fZW5naW5lSW5zdGFuY2U9IShlIGluc3RhbmNlb2YgT2JqZWN0KXx8aS5TVVBQT1JUU19NVUxUSVBMRT09PSEwfHxlLmxlbmd0aDw9aS5TVVBQT1JUU19NVUxUSVBMRT9uZXcgaTpuZXcgbyhpKSx0aGlzLl9jdXJyZW50TWV0aG9kPWkpLHRoaXMuX2VuZ2luZUluc3RhbmNlLnJlc2V0KHRoaXMuc3RhdGUsdGhpcy52ZWxvY2l0eSksdm9pZCAwIT09dGhpcy52ZWxvY2l0eSYmKGEudmVsb2NpdHk9dGhpcy52ZWxvY2l0eSksdGhpcy5fZW5naW5lSW5zdGFuY2Uuc2V0KGUsYSxuLmJpbmQodGhpcykpfXZhciBvPXQoXCIuL011bHRpcGxlVHJhbnNpdGlvblwiKSxzPXQoXCIuL1R3ZWVuVHJhbnNpdGlvblwiKSxyPXt9O2UucmVnaXN0ZXI9ZnVuY3Rpb24odCl7dmFyIGk9ITA7Zm9yKHZhciBuIGluIHQpZS5yZWdpc3Rlck1ldGhvZChuLHRbbl0pfHwoaT0hMSk7cmV0dXJuIGl9LGUucmVnaXN0ZXJNZXRob2Q9ZnVuY3Rpb24odCxpKXtyZXR1cm4gdCBpbiByPyExOihyW3RdPWksITApfSxlLnVucmVnaXN0ZXJNZXRob2Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW4gcj8oZGVsZXRlIHJbdF0sITApOiExfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxpLGUpe2lmKCFpKXJldHVybiB0aGlzLnJlc2V0KHQpLGUmJmUoKSx0aGlzO3ZhciBvPVt0LGldO3JldHVybiB0aGlzLmFjdGlvblF1ZXVlLnB1c2gobyksdGhpcy5jYWxsYmFja1F1ZXVlLnB1c2goZSksdGhpcy5jdXJyZW50QWN0aW9ufHxuLmNhbGwodGhpcyksdGhpc30sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCxpKXt0aGlzLl9jdXJyZW50TWV0aG9kPW51bGwsdGhpcy5fZW5naW5lSW5zdGFuY2U9bnVsbCx0aGlzLl9jYWxsYmFjaz12b2lkIDAsdGhpcy5zdGF0ZT10LHRoaXMudmVsb2NpdHk9aSx0aGlzLmN1cnJlbnRBY3Rpb249bnVsbCx0aGlzLmFjdGlvblF1ZXVlPVtdLHRoaXMuY2FsbGJhY2tRdWV1ZT1bXX0sZS5wcm90b3R5cGUuZGVsYXk9ZnVuY3Rpb24odCxpKXt0aGlzLnNldCh0aGlzLmdldCgpLHtkdXJhdGlvbjp0LGN1cnZlOmZ1bmN0aW9uKCl7cmV0dXJuIDB9fSxpKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9lbmdpbmVJbnN0YW5jZSYmKHRoaXMuX2VuZ2luZUluc3RhbmNlLmdldFZlbG9jaXR5JiYodGhpcy52ZWxvY2l0eT10aGlzLl9lbmdpbmVJbnN0YW5jZS5nZXRWZWxvY2l0eSgpKSx0aGlzLnN0YXRlPXRoaXMuX2VuZ2luZUluc3RhbmNlLmdldCh0KSksdGhpcy5zdGF0ZX0sZS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuY3VycmVudEFjdGlvbn0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldCh0aGlzLmdldCgpKX0saS5leHBvcnRzPWV9LHtcIi4vTXVsdGlwbGVUcmFuc2l0aW9uXCI6ODUsXCIuL1R3ZWVuVHJhbnNpdGlvblwiOjkwfV0sODk6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl9maW5hbD1yLmlkZW50aXR5LnNsaWNlKCksdGhpcy5fZmluYWxUcmFuc2xhdGU9WzAsMCwwXSx0aGlzLl9maW5hbFJvdGF0ZT1bMCwwLDBdLHRoaXMuX2ZpbmFsU2tldz1bMCwwLDBdLHRoaXMuX2ZpbmFsU2NhbGU9WzEsMSwxXSx0aGlzLnRyYW5zbGF0ZT1uZXcgcyh0aGlzLl9maW5hbFRyYW5zbGF0ZSksdGhpcy5yb3RhdGU9bmV3IHModGhpcy5fZmluYWxSb3RhdGUpLHRoaXMuc2tldz1uZXcgcyh0aGlzLl9maW5hbFNrZXcpLHRoaXMuc2NhbGU9bmV3IHModGhpcy5fZmluYWxTY2FsZSksdCYmdGhpcy5zZXQodCl9ZnVuY3Rpb24gbigpe3JldHVybiByLmJ1aWxkKHt0cmFuc2xhdGU6dGhpcy50cmFuc2xhdGUuZ2V0KCkscm90YXRlOnRoaXMucm90YXRlLmdldCgpLHNrZXc6dGhpcy5za2V3LmdldCgpLHNjYWxlOnRoaXMuc2NhbGUuZ2V0KCl9KX1mdW5jdGlvbiBvKCl7cmV0dXJuIHIuYnVpbGQoe3RyYW5zbGF0ZTp0aGlzLl9maW5hbFRyYW5zbGF0ZSxyb3RhdGU6dGhpcy5fZmluYWxSb3RhdGUsc2tldzp0aGlzLl9maW5hbFNrZXcsc2NhbGU6dGhpcy5fZmluYWxTY2FsZX0pfXZhciBzPXQoXCIuL1RyYW5zaXRpb25hYmxlXCIpLHI9dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLGE9dChcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCIpO2UucHJvdG90eXBlLnNldFRyYW5zbGF0ZT1mdW5jdGlvbih0LGksZSl7cmV0dXJuIHRoaXMuX2ZpbmFsVHJhbnNsYXRlPXQsdGhpcy5fZmluYWw9by5jYWxsKHRoaXMpLHRoaXMudHJhbnNsYXRlLnNldCh0LGksZSksdGhpc30sZS5wcm90b3R5cGUuc2V0U2NhbGU9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB0aGlzLl9maW5hbFNjYWxlPXQsdGhpcy5fZmluYWw9by5jYWxsKHRoaXMpLHRoaXMuc2NhbGUuc2V0KHQsaSxlKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRSb3RhdGU9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB0aGlzLl9maW5hbFJvdGF0ZT10LHRoaXMuX2ZpbmFsPW8uY2FsbCh0aGlzKSx0aGlzLnJvdGF0ZS5zZXQodCxpLGUpLHRoaXN9LGUucHJvdG90eXBlLnNldFNrZXc9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB0aGlzLl9maW5hbFNrZXc9dCx0aGlzLl9maW5hbD1vLmNhbGwodGhpcyksdGhpcy5za2V3LnNldCh0LGksZSksdGhpc30sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxlKXt2YXIgbj1yLmludGVycHJldCh0KTt0aGlzLl9maW5hbFRyYW5zbGF0ZT1uLnRyYW5zbGF0ZSx0aGlzLl9maW5hbFJvdGF0ZT1uLnJvdGF0ZSx0aGlzLl9maW5hbFNrZXc9bi5za2V3LHRoaXMuX2ZpbmFsU2NhbGU9bi5zY2FsZSx0aGlzLl9maW5hbD10O3ZhciBvPWU/YS5hZnRlcig0LGUpOm51bGw7cmV0dXJuIHRoaXMudHJhbnNsYXRlLnNldChuLnRyYW5zbGF0ZSxpLG8pLHRoaXMucm90YXRlLnNldChuLnJvdGF0ZSxpLG8pLHRoaXMuc2tldy5zZXQobi5za2V3LGksbyksdGhpcy5zY2FsZS5zZXQobi5zY2FsZSxpLG8pLHRoaXN9LGUucHJvdG90eXBlLnNldERlZmF1bHRUcmFuc2l0aW9uPWZ1bmN0aW9uKHQpe3RoaXMudHJhbnNsYXRlLnNldERlZmF1bHQodCksdGhpcy5yb3RhdGUuc2V0RGVmYXVsdCh0KSx0aGlzLnNrZXcuc2V0RGVmYXVsdCh0KSx0aGlzLnNjYWxlLnNldERlZmF1bHQodCl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQWN0aXZlKCk/bi5jYWxsKHRoaXMpOnRoaXMuX2ZpbmFsfSxlLnByb3RvdHlwZS5nZXRGaW5hbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9maW5hbH0sZS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2xhdGUuaXNBY3RpdmUoKXx8dGhpcy5yb3RhdGUuaXNBY3RpdmUoKXx8dGhpcy5zY2FsZS5pc0FjdGl2ZSgpfHx0aGlzLnNrZXcuaXNBY3RpdmUoKX0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zbGF0ZS5oYWx0KCksdGhpcy5yb3RhdGUuaGFsdCgpLHRoaXMuc2tldy5oYWx0KCksdGhpcy5zY2FsZS5oYWx0KCksdGhpcy5fZmluYWw9dGhpcy5nZXQoKSx0aGlzLl9maW5hbFRyYW5zbGF0ZT10aGlzLnRyYW5zbGF0ZS5nZXQoKSx0aGlzLl9maW5hbFJvdGF0ZT10aGlzLnJvdGF0ZS5nZXQoKSx0aGlzLl9maW5hbFNrZXc9dGhpcy5za2V3LmdldCgpLHRoaXMuX2ZpbmFsU2NhbGU9dGhpcy5zY2FsZS5nZXQoKSx0aGlzfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTUsXCIuL1RyYW5zaXRpb25hYmxlXCI6ODh9XSw5MDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fc3RhcnRUaW1lPTAsdGhpcy5fc3RhcnRWYWx1ZT0wLHRoaXMuX3VwZGF0ZVRpbWU9MCx0aGlzLl9lbmRWYWx1ZT0wLHRoaXMuX2N1cnZlPXZvaWQgMCx0aGlzLl9kdXJhdGlvbj0wLHRoaXMuX2FjdGl2ZT0hMSx0aGlzLl9jYWxsYmFjaz12b2lkIDAsdGhpcy5zdGF0ZT0wLHRoaXMudmVsb2NpdHk9dm9pZCAwfWZ1bmN0aW9uIG4odCxpLGUpe3JldHVybigxLWUpKnQrZSppfWZ1bmN0aW9uIG8odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBPYmplY3Q/dCBpbnN0YW5jZW9mIEFycmF5P3Quc2xpY2UoMCk6T2JqZWN0LmNyZWF0ZSh0KTp0fWZ1bmN0aW9uIHModCxpKXt2YXIgbj17Y3VydmU6aS5jdXJ2ZX07cmV0dXJuIGkuZHVyYXRpb24mJihuLmR1cmF0aW9uPWkuZHVyYXRpb24pLGkuc3BlZWQmJihuLnNwZWVkPWkuc3BlZWQpLHQgaW5zdGFuY2VvZiBPYmplY3QmJih2b2lkIDAhPT10LmR1cmF0aW9uJiYobi5kdXJhdGlvbj10LmR1cmF0aW9uKSx0LmN1cnZlJiYobi5jdXJ2ZT10LmN1cnZlKSx0LnNwZWVkJiYobi5zcGVlZD10LnNwZWVkKSksXCJzdHJpbmdcIj09dHlwZW9mIG4uY3VydmUmJihuLmN1cnZlPWUuZ2V0Q3VydmUobi5jdXJ2ZSkpLG59ZnVuY3Rpb24gcih0LGksZSxuLG8pe3ZhciBzLHI9MWUtNyxhPShlKG8pLWUoby1yKSkvcjtpZih0IGluc3RhbmNlb2YgQXJyYXkpe3M9W107Zm9yKHZhciBoPTA7aDx0Lmxlbmd0aDtoKyspc1toXT1cIm51bWJlclwiPT10eXBlb2YgdFtoXT9hKih0W2hdLWlbaF0pL246MH1lbHNlIHM9YSoodC1pKS9uO3JldHVybiBzfWZ1bmN0aW9uIGEodCxpLGUpe3ZhciBvO2lmKHQgaW5zdGFuY2VvZiBBcnJheSl7bz1bXTtmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKylvW3NdPVwibnVtYmVyXCI9PXR5cGVvZiB0W3NdP24odFtzXSxpW3NdLGUpOnRbc119ZWxzZSBvPW4odCxpLGUpO3JldHVybiBvfWUuQ3VydmVzPXtsaW5lYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGVhc2VJbjpmdW5jdGlvbih0KXtyZXR1cm4gdCp0fSxlYXNlT3V0OmZ1bmN0aW9uKHQpe3JldHVybiB0KigyLXQpfSxlYXNlSW5PdXQ6ZnVuY3Rpb24odCl7cmV0dXJuLjU+PXQ/Mip0KnQ6LTIqdCp0KzQqdC0xfSxlYXNlT3V0Qm91bmNlOmZ1bmN0aW9uKHQpe3JldHVybiB0KigzLTIqdCl9LHNwcmluZzpmdW5jdGlvbih0KXtyZXR1cm4oMS10KSpNYXRoLnNpbig2Kk1hdGguUEkqdCkrdH19LGUuU1VQUE9SVFNfTVVMVElQTEU9ITAsZS5ERUZBVUxUX09QVElPTlM9e2N1cnZlOmUuQ3VydmVzLmxpbmVhcixkdXJhdGlvbjo1MDAsc3BlZWQ6MH07dmFyIGg9e307ZS5yZWdpc3RlckN1cnZlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGhbdF0/ITE6KGhbdF09aSwhMCl9LGUudW5yZWdpc3RlckN1cnZlPWZ1bmN0aW9uKHQpe3JldHVybiBoW3RdPyhkZWxldGUgaFt0XSwhMCk6ITF9LGUuZ2V0Q3VydmU9ZnVuY3Rpb24odCl7dmFyIGk9aFt0XTtpZih2b2lkIDAhPT1pKXJldHVybiBpO3Rocm93IG5ldyBFcnJvcihcImN1cnZlIG5vdCByZWdpc3RlcmVkXCIpfSxlLmdldEN1cnZlcz1mdW5jdGlvbigpe3JldHVybiBofSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQuY3VydmUmJih0aGlzLm9wdGlvbnMuY3VydmU9dC5jdXJ2ZSksdm9pZCAwIT09dC5kdXJhdGlvbiYmKHRoaXMub3B0aW9ucy5kdXJhdGlvbj10LmR1cmF0aW9uKSx2b2lkIDAhPT10LnNwZWVkJiYodGhpcy5vcHRpb25zLnNwZWVkPXQuc3BlZWQpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxpLGUpe2lmKCFpKXJldHVybiB0aGlzLnJlc2V0KHQpLHZvaWQoZSYmZSgpKTtpZih0aGlzLl9zdGFydFZhbHVlPW8odGhpcy5nZXQoKSksaT1zKGksdGhpcy5vcHRpb25zKSxpLnNwZWVkKXt2YXIgbj10aGlzLl9zdGFydFZhbHVlO2lmKG4gaW5zdGFuY2VvZiBPYmplY3Qpe3ZhciByPTA7Zm9yKHZhciBhIGluIG4pcis9KHRbYV0tblthXSkqKHRbYV0tblthXSk7aS5kdXJhdGlvbj1NYXRoLnNxcnQocikvaS5zcGVlZH1lbHNlIGkuZHVyYXRpb249TWF0aC5hYnModC1uKS9pLnNwZWVkfXRoaXMuX3N0YXJ0VGltZT1EYXRlLm5vdygpLHRoaXMuX2VuZFZhbHVlPW8odCksdGhpcy5fc3RhcnRWZWxvY2l0eT1vKGkudmVsb2NpdHkpLHRoaXMuX2R1cmF0aW9uPWkuZHVyYXRpb24sdGhpcy5fY3VydmU9aS5jdXJ2ZSx0aGlzLl9hY3RpdmU9ITAsdGhpcy5fY2FsbGJhY2s9ZX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCxpKXtpZih0aGlzLl9jYWxsYmFjayl7dmFyIGU9dGhpcy5fY2FsbGJhY2s7dGhpcy5fY2FsbGJhY2s9dm9pZCAwLGUoKX10aGlzLnN0YXRlPW8odCksdGhpcy52ZWxvY2l0eT1vKGkpLHRoaXMuX3N0YXJ0VGltZT0wLHRoaXMuX2R1cmF0aW9uPTAsdGhpcy5fdXBkYXRlVGltZT0wLHRoaXMuX3N0YXJ0VmFsdWU9dGhpcy5zdGF0ZSx0aGlzLl9zdGFydFZlbG9jaXR5PXRoaXMudmVsb2NpdHksdGhpcy5fZW5kVmFsdWU9dGhpcy5zdGF0ZSx0aGlzLl9hY3RpdmU9ITF9LGUucHJvdG90eXBlLmdldFZlbG9jaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVsb2NpdHl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51cGRhdGUodCksdGhpcy5zdGF0ZX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2FjdGl2ZSl7aWYodHx8KHQ9RGF0ZS5ub3coKSksISh0aGlzLl91cGRhdGVUaW1lPj10KSl7dGhpcy5fdXBkYXRlVGltZT10O3ZhciBpPXQtdGhpcy5fc3RhcnRUaW1lO2lmKGk+PXRoaXMuX2R1cmF0aW9uKXRoaXMuc3RhdGU9dGhpcy5fZW5kVmFsdWUsdGhpcy52ZWxvY2l0eT1yKHRoaXMuc3RhdGUsdGhpcy5fc3RhcnRWYWx1ZSx0aGlzLl9jdXJ2ZSx0aGlzLl9kdXJhdGlvbiwxKSx0aGlzLl9hY3RpdmU9ITE7ZWxzZSBpZigwPmkpdGhpcy5zdGF0ZT10aGlzLl9zdGFydFZhbHVlLHRoaXMudmVsb2NpdHk9dGhpcy5fc3RhcnRWZWxvY2l0eTtlbHNle3ZhciBlPWkvdGhpcy5fZHVyYXRpb247dGhpcy5zdGF0ZT1hKHRoaXMuX3N0YXJ0VmFsdWUsdGhpcy5fZW5kVmFsdWUsdGhpcy5fY3VydmUoZSkpLHRoaXMudmVsb2NpdHk9cih0aGlzLnN0YXRlLHRoaXMuX3N0YXJ0VmFsdWUsdGhpcy5fY3VydmUsdGhpcy5fZHVyYXRpb24sZSl9fX1lbHNlIGlmKHRoaXMuX2NhbGxiYWNrKXt2YXIgbj10aGlzLl9jYWxsYmFjazt0aGlzLl9jYWxsYmFjaz12b2lkIDAsbigpfX0sZS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlfSxlLnByb3RvdHlwZS5oYWx0PWZ1bmN0aW9uKCl7dGhpcy5yZXNldCh0aGlzLmdldCgpKX0sZS5yZWdpc3RlckN1cnZlKFwibGluZWFyXCIsZS5DdXJ2ZXMubGluZWFyKSxlLnJlZ2lzdGVyQ3VydmUoXCJlYXNlSW5cIixlLkN1cnZlcy5lYXNlSW4pLGUucmVnaXN0ZXJDdXJ2ZShcImVhc2VPdXRcIixlLkN1cnZlcy5lYXNlT3V0KSxlLnJlZ2lzdGVyQ3VydmUoXCJlYXNlSW5PdXRcIixlLkN1cnZlcy5lYXNlSW5PdXQpLGUucmVnaXN0ZXJDdXJ2ZShcImVhc2VPdXRCb3VuY2VcIixlLkN1cnZlcy5lYXNlT3V0Qm91bmNlKSxlLnJlZ2lzdGVyQ3VydmUoXCJzcHJpbmdcIixlLkN1cnZlcy5zcHJpbmcpLGUuY3VzdG9tQ3VydmU9ZnVuY3Rpb24odCxpKXtyZXR1cm4gdD10fHwwLGk9aXx8MCxmdW5jdGlvbihlKXtyZXR1cm4gdCplKygtMip0LWkrMykqZSplKyh0K2ktMikqZSplKmV9fSxpLmV4cG9ydHM9ZX0se31dLDkxOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dD10fHwwLHRoaXMuZW5kU3RhdGU9bmV3IG0odCksdGhpcy5pbml0U3RhdGU9bmV3IG0sdGhpcy5zcHJpbmc9bmV3IGcoe2FuY2hvcjp0aGlzLmVuZFN0YXRlfSksdGhpcy53YWxsPW5ldyB2LHRoaXMuX3Jlc3RUb2xlcmFuY2U9MWUtMTAsdGhpcy5fZGltZW5zaW9ucz0xLHRoaXMuX2Fic1Jlc3RUb2xlcmFuY2U9dGhpcy5fcmVzdFRvbGVyYW5jZSx0aGlzLl9jYWxsYmFjaz12b2lkIDAsdGhpcy5QRT1uZXcgXyx0aGlzLnBhcnRpY2xlPW5ldyB5LHRoaXMuUEUuYWRkQm9keSh0aGlzLnBhcnRpY2xlKSx0aGlzLlBFLmF0dGFjaChbdGhpcy53YWxsLHRoaXMuc3ByaW5nXSx0aGlzLnBhcnRpY2xlKX1mdW5jdGlvbiBuKCl7cmV0dXJuIHRoaXMucGFydGljbGUuZ2V0RW5lcmd5KCkrdGhpcy5zcHJpbmcuZ2V0RW5lcmd5KFt0aGlzLnBhcnRpY2xlXSl9ZnVuY3Rpb24gbygpe3ZhciB0PXRoaXMuZW5kU3RhdGUuc3ViKHRoaXMuaW5pdFN0YXRlKS5ub3JtU3F1YXJlZCgpO3RoaXMuX2Fic1Jlc3RUb2xlcmFuY2U9MD09PXQ/dGhpcy5fcmVzdFRvbGVyYW5jZTp0aGlzLl9yZXN0VG9sZXJhbmNlKnR9ZnVuY3Rpb24gcygpe3RoaXMuUEUud2FrZSgpfWZ1bmN0aW9uIHIoKXt0aGlzLlBFLnNsZWVwKCl9ZnVuY3Rpb24gYSh0KXt0aGlzLmVuZFN0YXRlLnNldCh0KTt2YXIgaT10aGlzLmVuZFN0YXRlLnN1Yih0aGlzLmluaXRTdGF0ZSkubm9ybSgpO3RoaXMud2FsbC5zZXRPcHRpb25zKHtkaXN0YW5jZTp0aGlzLmVuZFN0YXRlLm5vcm0oKSxub3JtYWw6MD09PWk/dGhpcy5wYXJ0aWNsZS52ZWxvY2l0eS5ub3JtYWxpemUoLTEpOnRoaXMuZW5kU3RhdGUuc3ViKHRoaXMuaW5pdFN0YXRlKS5ub3JtYWxpemUoLTEpfSksby5jYWxsKHRoaXMpfWZ1bmN0aW9uIGgodCl7dGhpcy5wYXJ0aWNsZS5wb3NpdGlvbi5zZXQodCl9ZnVuY3Rpb24gYyh0KXt0aGlzLnBhcnRpY2xlLnZlbG9jaXR5LnNldCh0KX1mdW5jdGlvbiBwKCl7cmV0dXJuIDA9PT10aGlzLl9kaW1lbnNpb25zP3RoaXMucGFydGljbGUuZ2V0UG9zaXRpb24xRCgpOnRoaXMucGFydGljbGUuZ2V0UG9zaXRpb24oKX1mdW5jdGlvbiB1KCl7cmV0dXJuIDA9PT10aGlzLl9kaW1lbnNpb25zP3RoaXMucGFydGljbGUuZ2V0VmVsb2NpdHkxRCgpOnRoaXMucGFydGljbGUuZ2V0VmVsb2NpdHkoKX1mdW5jdGlvbiBsKHQpe3RoaXMuX2NhbGxiYWNrPXR9ZnVuY3Rpb24gZigpe2lmKHRoaXMuUEUuaXNTbGVlcGluZygpKXtpZih0aGlzLl9jYWxsYmFjayl7dmFyIHQ9dGhpcy5fY2FsbGJhY2s7dGhpcy5fY2FsbGJhY2s9dm9pZCAwLHQoKX19ZWxzZXt2YXIgaT1uLmNhbGwodGhpcyk7aTx0aGlzLl9hYnNSZXN0VG9sZXJhbmNlJiYoci5jYWxsKHRoaXMpLGguY2FsbCh0aGlzLHRoaXMuZW5kU3RhdGUpLGMuY2FsbCh0aGlzLFswLDAsMF0pKX19ZnVuY3Rpb24gZCh0KXt2YXIgaT1lLkRFRkFVTFRfT1BUSU9OUzt2b2lkIDA9PT10LnBlcmlvZCYmKHQucGVyaW9kPWkucGVyaW9kKSx2b2lkIDA9PT10LmRhbXBpbmdSYXRpbyYmKHQuZGFtcGluZ1JhdGlvPWkuZGFtcGluZ1JhdGlvKSx2b2lkIDA9PT10LnZlbG9jaXR5JiYodC52ZWxvY2l0eT1pLnZlbG9jaXR5KSx2b2lkIDA9PT10LnJlc3RpdHV0aW9uJiYodC5yZXN0aXR1dGlvbj1pLnJlc3RpdHV0aW9uKSx0aGlzLnNwcmluZy5zZXRPcHRpb25zKHtwZXJpb2Q6dC5wZXJpb2QsZGFtcGluZ1JhdGlvOnQuZGFtcGluZ1JhdGlvfSksdGhpcy53YWxsLnNldE9wdGlvbnMoe3Jlc3RpdHV0aW9uOnQucmVzdGl0dXRpb259KSxjLmNhbGwodGhpcyx0LnZlbG9jaXR5KX12YXIgXz10KFwiLi4vcGh5c2ljcy9QaHlzaWNzRW5naW5lXCIpLHk9dChcIi4uL3BoeXNpY3MvYm9kaWVzL1BhcnRpY2xlXCIpLGc9dChcIi4uL3BoeXNpY3MvZm9yY2VzL1NwcmluZ1wiKSx2PXQoXCIuLi9waHlzaWNzL2NvbnN0cmFpbnRzL1dhbGxcIiksbT10KFwiLi4vbWF0aC9WZWN0b3JcIik7ZS5TVVBQT1JUU19NVUxUSVBMRT0zLGUuREVGQVVMVF9PUFRJT05TPXtwZXJpb2Q6MzAwLGRhbXBpbmdSYXRpbzouNSx2ZWxvY2l0eTowLHJlc3RpdHV0aW9uOi41fSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbih0LGkpe3RoaXMuX2RpbWVuc2lvbnM9dCBpbnN0YW5jZW9mIEFycmF5P3QubGVuZ3RoOjAsdGhpcy5pbml0U3RhdGUuc2V0KHQpLGguY2FsbCh0aGlzLHQpLGkmJmMuY2FsbCh0aGlzLGkpLGEuY2FsbCh0aGlzLHQpLGwuY2FsbCh0aGlzLHZvaWQgMCl9LGUucHJvdG90eXBlLmdldFZlbG9jaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHUuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc2V0VmVsb2NpdHk9ZnVuY3Rpb24odCl7dGhpcy5jYWxsKHRoaXMsYyh0KSl9LGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuUEUuaXNTbGVlcGluZygpfSxlLnByb3RvdHlwZS5oYWx0PWZ1bmN0aW9uKCl7dGhpcy5zZXQodGhpcy5nZXQoKSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiBmLmNhbGwodGhpcykscC5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxpLGUpe3JldHVybiBpPyh0aGlzLl9kaW1lbnNpb25zPXQgaW5zdGFuY2VvZiBBcnJheT90Lmxlbmd0aDowLHMuY2FsbCh0aGlzKSxkLmNhbGwodGhpcyxpKSxhLmNhbGwodGhpcyx0KSx2b2lkIGwuY2FsbCh0aGlzLGUpKToodGhpcy5yZXNldCh0KSx2b2lkKGUmJmUoKSkpfSxpLmV4cG9ydHM9ZX0se1wiLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4uL3BoeXNpY3MvUGh5c2ljc0VuZ2luZVwiOjQ4LFwiLi4vcGh5c2ljcy9ib2RpZXMvUGFydGljbGVcIjo1MSxcIi4uL3BoeXNpY3MvY29uc3RyYWludHMvV2FsbFwiOjYwLFwiLi4vcGh5c2ljcy9mb3JjZXMvU3ByaW5nXCI6Njh9XSw5MjpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0NhY2hlZE1hcDp0KFwiLi9DYWNoZWRNYXBcIiksRWFzaW5nOnQoXCIuL0Vhc2luZ1wiKSxNdWx0aXBsZVRyYW5zaXRpb246dChcIi4vTXVsdGlwbGVUcmFuc2l0aW9uXCIpLFNuYXBUcmFuc2l0aW9uOnQoXCIuL1NuYXBUcmFuc2l0aW9uXCIpLFNwcmluZ1RyYW5zaXRpb246dChcIi4vU3ByaW5nVHJhbnNpdGlvblwiKSxUcmFuc2l0aW9uYWJsZTp0KFwiLi9UcmFuc2l0aW9uYWJsZVwiKSxUcmFuc2l0aW9uYWJsZVRyYW5zZm9ybTp0KFwiLi9UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybVwiKSxUd2VlblRyYW5zaXRpb246dChcIi4vVHdlZW5UcmFuc2l0aW9uXCIpLFdhbGxUcmFuc2l0aW9uOnQoXCIuL1dhbGxUcmFuc2l0aW9uXCIpfX0se1wiLi9DYWNoZWRNYXBcIjo4MyxcIi4vRWFzaW5nXCI6ODQsXCIuL011bHRpcGxlVHJhbnNpdGlvblwiOjg1LFwiLi9TbmFwVHJhbnNpdGlvblwiOjg2LFwiLi9TcHJpbmdUcmFuc2l0aW9uXCI6ODcsXCIuL1RyYW5zaXRpb25hYmxlXCI6ODgsXCIuL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtXCI6ODksXCIuL1R3ZWVuVHJhbnNpdGlvblwiOjkwLFwiLi9XYWxsVHJhbnNpdGlvblwiOjkxfV0sOTM6W2Z1bmN0aW9uKHQsaSl7dmFyIGU9ezA6NDgsMTo0OSwyOjUwLDM6NTEsNDo1Miw1OjUzLDY6NTQsNzo1NSw4OjU2LDk6NTcsYTo5NyxiOjk4LGM6OTksZDoxMDAsZToxMDEsZjoxMDIsZzoxMDMsaDoxMDQsaToxMDUsajoxMDYsazoxMDcsbDoxMDgsbToxMDksbjoxMTAsbzoxMTEscDoxMTIscToxMTMscjoxMTQsczoxMTUsdDoxMTYsdToxMTcsdjoxMTgsdzoxMTkseDoxMjAseToxMjEsejoxMjIsQTo2NSxCOjY2LEM6NjcsRDo2OCxFOjY5LEY6NzAsRzo3MSxIOjcyLEk6NzMsSjo3NCxLOjc1LEw6NzYsTTo3NyxOOjc4LE86NzksUDo4MCxROjgxLFI6ODIsUzo4MyxUOjg0LFU6ODUsVjo4NixXOjg3LFg6ODgsWTo4OSxaOjkwLEVOVEVSOjEzLExFRlRfQVJST1c6MzcsUklHSFRfQVJST1c6MzksVVBfQVJST1c6MzgsRE9XTl9BUlJPVzo0MCxTUEFDRTozMixTSElGVDoxNixUQUI6OX07aS5leHBvcnRzPWV9LHt9XSw5NDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3JldHVybiBjLm9uKHAsdCksdH1mdW5jdGlvbiBuKHQsaSl7dmFyIG49dSgpLG89ZnVuY3Rpb24oKXt2YXIgZT11KCk7ZS1uPj1pJiYodC5hcHBseSh0aGlzLGFyZ3VtZW50cyksYy5yZW1vdmVMaXN0ZW5lcihwLG8pKX07cmV0dXJuIGUobyl9ZnVuY3Rpb24gbyh0LGkpe3ZhciBuPXUoKSxvPWZ1bmN0aW9uKCl7dmFyIGU9dSgpO2Utbj49aSYmKHQuYXBwbHkodGhpcyxhcmd1bWVudHMpLG49dSgpKX07cmV0dXJuIGUobyl9ZnVuY3Rpb24gcyh0LGkpe2lmKHZvaWQgMD09PWkpcmV0dXJuIHZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2ktLSwwPj1pJiYodC5hcHBseSh0aGlzLGFyZ3VtZW50cyksYShuKSl9O3JldHVybiBlKG4pfWZ1bmN0aW9uIHIodCxpKXtpPWl8fDE7dmFyIG49aSxvPWZ1bmN0aW9uKCl7aS0tLDA+PWkmJih0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxpPW4pfTtyZXR1cm4gZShvKX1mdW5jdGlvbiBhKHQpe2MucmVtb3ZlTGlzdGVuZXIocCx0KX1mdW5jdGlvbiBoKHQsaSl7dmFyIGUsbyxzLHIsaDtyZXR1cm4gZnVuY3Rpb24oKXtvPXRoaXMsaD1hcmd1bWVudHMscz11KCk7dmFyIGM9ZnVuY3Rpb24oKXt2YXIgYT11LXM7aT5hP2U9bihjLGktYSk6KGU9bnVsbCxyPXQuYXBwbHkobyxoKSl9O3JldHVybiBhKGUpLGU9bihjLGkpLHJ9fXZhciBjPXQoXCIuLi9jb3JlL0VuZ2luZVwiKSxwPVwicHJlcmVuZGVyXCIsdT13aW5kb3cucGVyZm9ybWFuY2UmJndpbmRvdy5wZXJmb3JtYW5jZS5ub3c/ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpfTpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpfTtpLmV4cG9ydHM9e3NldFRpbWVvdXQ6bixzZXRJbnRlcnZhbDpvLGRlYm91bmNlOmgsYWZ0ZXI6cyxldmVyeTpyLGNsZWFyOmF9fSx7XCIuLi9jb3JlL0VuZ2luZVwiOjR9XSw5NTpbZnVuY3Rpb24odCxpKXt2YXIgZT17fTtlLkRpcmVjdGlvbj17WDowLFk6MSxaOjJ9LGUuYWZ0ZXI9ZnVuY3Rpb24odCxpKXt2YXIgZT10O3JldHVybiBmdW5jdGlvbigpe2UtLSwwPT09ZSYmaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxlLmxvYWRVUkw9ZnVuY3Rpb24odCxpKXt2YXIgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09dGhpcy5yZWFkeVN0YXRlJiZpJiZpKHRoaXMucmVzcG9uc2VUZXh0KX0sZS5vcGVuKFwiR0VUXCIsdCksZS5zZW5kKCl9LGUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudEZyb21IVE1MPWZ1bmN0aW9uKHQpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5pbm5lckhUTUw9dDtmb3IodmFyIGU9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2kuaGFzQ2hpbGROb2RlcygpOyllLmFwcGVuZENoaWxkKGkuZmlyc3RDaGlsZCk7cmV0dXJuIGV9LGUuY2xvbmU9ZnVuY3Rpb24odCl7dmFyIGk7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpe2k9dCBpbnN0YW5jZW9mIEFycmF5P1tdOnt9O2Zvcih2YXIgbiBpbiB0KWlmKFwib2JqZWN0XCI9PXR5cGVvZiB0W25dJiZudWxsIT09dFtuXSlpZih0W25daW5zdGFuY2VvZiBBcnJheSl7aVtuXT1uZXcgQXJyYXkodFtuXS5sZW5ndGgpO2Zvcih2YXIgbz0wO288dFtuXS5sZW5ndGg7bysrKWlbbl1bb109ZS5jbG9uZSh0W25dW29dKX1lbHNlIGlbbl09ZS5jbG9uZSh0W25dKTtlbHNlIGlbbl09dFtuXX1lbHNlIGk9dDtyZXR1cm4gaX0saS5leHBvcnRzPWV9LHt9XSw5NjpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0tleUNvZGVzOnQoXCIuL0tleUNvZGVzXCIpLFRpbWVyOnQoXCIuL1RpbWVyXCIpLFV0aWxpdHk6dChcIi4vVXRpbGl0eVwiKX19LHtcIi4vS2V5Q29kZXNcIjo5MyxcIi4vVGltZXJcIjo5NCxcIi4vVXRpbGl0eVwiOjk1fV0sOTc6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OU3x8ZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBzKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX2V2ZW50SW5wdXQ9bmV3IG8sdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IG8sby5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudElucHV0KSxvLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudE91dHB1dCksdGhpcy5faWQ9bi5yZWdpc3Rlcih0aGlzKX12YXIgbj10KFwiLi4vY29yZS9FbnRpdHlcIiksbz0odChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLHQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSkscz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLkRFRkFVTFRfT1BUSU9OUz17fSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5nZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbigpe30saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRW50aXR5XCI6NSxcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTV9XSw5ODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zdGF0ZT1uZXcgYSgwKSx0aGlzLl9pc09wZW49ITEsdGhpcy5zZXRPdXRwdXRGdW5jdGlvbihmdW5jdGlvbih0LGksZSl7dmFyIG89bi5jYWxsKHRoaXMpLHI9dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWguRGlyZWN0aW9uLlg/cy50cmFuc2xhdGUobyppLDAsLjAwMSooby0xKSppKTpzLnRyYW5zbGF0ZSgwLG8qaSwuMDAxKihvLTEpKmkpLGE9dC5yZW5kZXIoKTtpZih0aGlzLm9wdGlvbnMuc3RhY2tSb3RhdGlvbil7dmFyIGM9dGhpcy5vcHRpb25zLnN0YWNrUm90YXRpb24qZSooMS1vKTthPXt0cmFuc2Zvcm06cy5yb3RhdGVaKGMpLG9yaWdpbjpbLjUsLjVdLHRhcmdldDphfX1yZXR1cm57dHJhbnNmb3JtOnIsc2l6ZTp0LmdldFNpemUoKSx0YXJnZXQ6YX19KX1mdW5jdGlvbiBuKHQpe3JldHVybiB0P3RoaXMuX2lzT3Blbj8xOjA6dGhpcy5zdGF0ZS5nZXQoKX1mdW5jdGlvbiBvKHQsaSxlKXt0aGlzLnN0YXRlLmhhbHQoKSx0aGlzLnN0YXRlLnNldCh0LGksZSl9dmFyIHM9dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLHI9dChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIiksYT10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIiksaD10KFwiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIiksYz10KFwiLi9TZXF1ZW50aWFsTGF5b3V0XCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9ci5wYXRjaChjLkRFRkFVTFRfT1BUSU9OUyx7dHJhbnNpdGlvbjp7Y3VydmU6XCJlYXNlT3V0Qm91bmNlXCIsZHVyYXRpb246NTAwfSxzdGFja1JvdGF0aW9uOjB9KSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dmFyIHQ9Yy5wcm90b3R5cGUuZ2V0U2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT10aGlzLl9pdGVtcz90aGlzLl9pdGVtcy5nZXQoKS5nZXRTaXplKCk6WzAsMF07aXx8KGk9WzAsMF0pO3ZhciBlPW4uY2FsbCh0aGlzKSxvPTEtZTtyZXR1cm5baVswXSpvK3RbMF0qZSxpWzFdKm8rdFsxXSplXX0sZS5wcm90b3R5cGUuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzT3Blbn0sZS5wcm90b3R5cGUub3Blbj1mdW5jdGlvbih0KXt0aGlzLl9pc09wZW49ITAsby5jYWxsKHRoaXMsMSx0aGlzLm9wdGlvbnMudHJhbnNpdGlvbix0KX0sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24odCl7dGhpcy5faXNPcGVuPSExLG8uY2FsbCh0aGlzLDAsdGhpcy5vcHRpb25zLnRyYW5zaXRpb24sdCl9LGUucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbih0KXt0aGlzLl9pc09wZW4/dGhpcy5jbG9zZSh0KTp0aGlzLm9wZW4odCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjo4OCxcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTUsXCIuL1NlcXVlbnRpYWxMYXlvdXRcIjoxMTB9XSw5OTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgcCh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLl9wb3NpdGlvbj1uZXcgdSgwKSx0aGlzLl9kaXJlY3Rpb249bih0aGlzLm9wdGlvbnMuc2lkZSksdGhpcy5fb3JpZW50YXRpb249byh0aGlzLm9wdGlvbnMuc2lkZSksdGhpcy5faXNPcGVuPSExLHRoaXMuX2NhY2hlZExlbmd0aD0wLHRoaXMuZHJhd2VyPW5ldyBoLHRoaXMuY29udGVudD1uZXcgaCx0aGlzLl9ldmVudElucHV0PW5ldyBsLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBsLGwuc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRJbnB1dCksbC5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpLHRoaXMuX2V2ZW50SW5wdXQub24oXCJ1cGRhdGVcIixyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SW5wdXQub24oXCJlbmRcIixhLmJpbmQodGhpcykpfWZ1bmN0aW9uIG4odCl7dmFyIGk9ZS5TSURFUztyZXR1cm4gdD09PWkuTEVGVHx8dD09PWkuUklHSFQ/ZjpkfWZ1bmN0aW9uIG8odCl7dmFyIGk9ZS5TSURFUztyZXR1cm4gdD09PWkuTEVGVHx8dD09PWkuVE9QPzE6LTF9ZnVuY3Rpb24gcyh0KXt2YXIgaSxlPXRoaXMub3B0aW9ucztpZihlLmRyYXdlckxlbmd0aClpPWUuZHJhd2VyTGVuZ3RoO2Vsc2V7dmFyIG49dC5nZXRTaXplKCk7aT1uP25bdGhpcy5fZGlyZWN0aW9uXTplLmRyYXdlckxlbmd0aH1yZXR1cm4gdGhpcy5fb3JpZW50YXRpb24qaX1mdW5jdGlvbiByKHQpe3ZhciBpLGUsbj10aGlzLmdldFBvc2l0aW9uKCkrdC5kZWx0YTt0aGlzLl9jYWNoZWRMZW5ndGg9cy5jYWxsKHRoaXMsdGhpcy5kcmF3ZXIpLDE9PT10aGlzLl9vcmllbnRhdGlvbj8oaT0wLGU9dGhpcy5fY2FjaGVkTGVuZ3RoKTooaT10aGlzLl9jYWNoZWRMZW5ndGgsZT0wKSxuPmU/bj1lOmk+biYmKG49aSksdGhpcy5zZXRQb3NpdGlvbihuKX1mdW5jdGlvbiBhKHQpe3ZhciBpPXQudmVsb2NpdHksZT10aGlzLl9vcmllbnRhdGlvbip0aGlzLmdldFBvc2l0aW9uKCksbj10aGlzLm9wdGlvbnMsbz10aGlzLl9vcmllbnRhdGlvbip0aGlzLl9jYWNoZWRMZW5ndGgscz1uLnBvc2l0aW9uVGhyZXNob2xkfHxvLzIscj1uLnZlbG9jaXR5VGhyZXNob2xkO2lmKG4udHJhbnNpdGlvbiBpbnN0YW5jZW9mIE9iamVjdCYmKG4udHJhbnNpdGlvbi52ZWxvY2l0eT10LnZlbG9jaXR5KSwwPT09ZSlyZXR1cm4gdm9pZCh0aGlzLl9pc09wZW49ITEpO2lmKGU9PT1vKXJldHVybiB2b2lkKHRoaXMuX2lzT3Blbj0hMCk7dmFyIGE9TWF0aC5hYnMoaSk+cnx8IXRoaXMuX2lzT3BlbiYmZT5zfHx0aGlzLl9pc09wZW4mJnM+ZTthP3RoaXMudG9nZ2xlKCk6dGhpcy5yZXNldCgpfXZhciBoPXQoXCIuLi9jb3JlL1JlbmRlck5vZGVcIiksYz10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIikscD10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSx1PXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKSxsPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxmPTAsZD0xO2UuU0lERVM9e0xFRlQ6MCxUT1A6MSxSSUdIVDoyLEJPVFRPTTozfSxlLkRFRkFVTFRfT1BUSU9OUz17c2lkZTplLlNJREVTLkxFRlQsZHJhd2VyTGVuZ3RoOjAsdmVsb2NpdHlUaHJlc2hvbGQ6MCxwb3NpdGlvblRocmVzaG9sZDowLHRyYW5zaXRpb246ITB9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KSx2b2lkIDAhPT10LnNpZGUmJih0aGlzLl9kaXJlY3Rpb249bih0LnNpZGUpLHRoaXMuX29yaWVudGF0aW9uPW8odC5zaWRlKSl9LGUucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCxpKXt0IGluc3RhbmNlb2YgRnVuY3Rpb24mJihpPXQpLHZvaWQgMD09PXQmJih0PXRoaXMub3B0aW9ucy50cmFuc2l0aW9uKSx0aGlzLl9jYWNoZWRMZW5ndGg9cy5jYWxsKHRoaXMsdGhpcy5kcmF3ZXIpLHRoaXMuc2V0UG9zaXRpb24odGhpcy5fY2FjaGVkTGVuZ3RoLHQsaSksdGhpcy5faXNPcGVufHwodGhpcy5faXNPcGVuPSEwLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJvcGVuXCIpKX0sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24odCxpKXt0IGluc3RhbmNlb2YgRnVuY3Rpb24mJihpPXQpLHZvaWQgMD09PXQmJih0PXRoaXMub3B0aW9ucy50cmFuc2l0aW9uKSx0aGlzLnNldFBvc2l0aW9uKDAsdCxpKSx0aGlzLl9pc09wZW4mJih0aGlzLl9pc09wZW49ITEsdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImNsb3NlXCIpKX0sZS5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24odCxpLGUpe3RoaXMuX3Bvc2l0aW9uLmlzQWN0aXZlKCkmJnRoaXMuX3Bvc2l0aW9uLmhhbHQoKSx0aGlzLl9wb3NpdGlvbi5zZXQodCxpLGUpfSxlLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvbi5nZXQoKX0sZS5wcm90b3R5cGUuc2V0UHJvZ3Jlc3M9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB0aGlzLl9wb3NpdGlvbi5zZXQodCp0aGlzLl9jYWNoZWRMZW5ndGgsaSxlKX0sZS5wcm90b3R5cGUuZ2V0UHJvZ3Jlc3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb24uZ2V0KCkvdGhpcy5fY2FjaGVkTGVuZ3RofSxlLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24odCl7dGhpcy5faXNPcGVuP3RoaXMuY2xvc2UodCk6dGhpcy5vcGVuKHQpfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbih0KXt0aGlzLl9pc09wZW4/dGhpcy5vcGVuKHQpOnRoaXMuY2xvc2UodCl9LGUucHJvdG90eXBlLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc09wZW59LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0UG9zaXRpb24oKTsoIXRoaXMuX2lzT3BlbiYmMD50JiYxPT09dGhpcy5fb3JpZW50YXRpb258fHQ+MCYmLTE9PT10aGlzLl9vcmllbnRhdGlvbikmJih0PTAsdGhpcy5zZXRQb3NpdGlvbih0KSk7dmFyIGk9dGhpcy5fZGlyZWN0aW9uPT09Zj9jLnRyYW5zbGF0ZSh0LDAsMCk6Yy50cmFuc2xhdGUoMCx0LDApO3JldHVyblt7dHJhbnNmb3JtOmMuYmVoaW5kLHRhcmdldDp0aGlzLmRyYXdlci5yZW5kZXIoKX0se3RyYW5zZm9ybTppLHRhcmdldDp0aGlzLmNvbnRlbnQucmVuZGVyKCl9XX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvUmVuZGVyTm9kZVwiOjExLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODh9XSwxMDA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl9jdXJyZW50VGFyZ2V0PW51bGwsdGhpcy5fc2l6ZT1bdm9pZCAwLHZvaWQgMF0sdGhpcy5fY29udHJvbGxlcj1uZXcgaCh0KSx0aGlzLl9jb250cm9sbGVyLmluVHJhbnNmb3JtRnJvbShvLmNyZWF0ZShuLmJpbmQodGhpcywxZS00KSkpLHRoaXMuX2NvbnRyb2xsZXIub3V0VHJhbnNmb3JtRnJvbShvLmNyZWF0ZShuLmJpbmQodGhpcywtMWUtNCkpKSx0aGlzLl9ldmVudElucHV0PW5ldyByLHIuc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRJbnB1dCksdGhpcy5fZW50aXR5SWQ9cy5yZWdpc3Rlcih0aGlzKSx0JiZ0aGlzLnNldE9wdGlvbnModCl9ZnVuY3Rpb24gbih0LGkpe3JldHVybiBhLnRyYW5zbGF0ZSh0aGlzLl9zaXplWzBdKigxLWkpLDAsdCooMS1pKSl9dmFyIG89dChcIi4uL3RyYW5zaXRpb25zL0NhY2hlZE1hcFwiKSxzPXQoXCIuLi9jb3JlL0VudGl0eVwiKSxyPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxhPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSxoPXQoXCIuL1JlbmRlckNvbnRyb2xsZXJcIik7ZS5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbih0KXt0aGlzLl9jdXJyZW50VGFyZ2V0JiZ0aGlzLl9ldmVudElucHV0LnVucGlwZSh0aGlzLl9jdXJyZW50VGFyZ2V0KSx0aGlzLl9jdXJyZW50VGFyZ2V0PXQsdGhpcy5fY3VycmVudFRhcmdldCYmdGhpcy5fY3VycmVudFRhcmdldC50cmlnZ2VyJiZ0aGlzLl9ldmVudElucHV0LnBpcGUodGhpcy5fY3VycmVudFRhcmdldCksdGhpcy5fY29udHJvbGxlci5zaG93LmFwcGx5KHRoaXMuX2NvbnRyb2xsZXIsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt0aGlzLl9jb250cm9sbGVyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbnRpdHlJZH0sZS5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zaXplWzBdPXQuc2l6ZVswXSx0aGlzLl9zaXplWzFdPXQuc2l6ZVsxXSx7dHJhbnNmb3JtOnQudHJhbnNmb3JtLG9wYWNpdHk6dC5vcGFjaXR5LG9yaWdpbjp0Lm9yaWdpbixzaXplOnQuc2l6ZSx0YXJnZXQ6dGhpcy5fY29udHJvbGxlci5yZW5kZXIoKX19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0VudGl0eVwiOjUsXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vdHJhbnNpdGlvbnMvQ2FjaGVkTWFwXCI6ODMsXCIuL1JlbmRlckNvbnRyb2xsZXJcIjoxMDZ9XSwxMDE6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5vcHRpb25zTWFuYWdlcj1uZXcgYSh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLmlkPXMucmVnaXN0ZXIodGhpcyksdGhpcy5fcmF0aW9zPW5ldyBjKHRoaXMub3B0aW9ucy5yYXRpb3MpLHRoaXMuX25vZGVzPVtdLHRoaXMuX3NpemU9WzAsMF0sdGhpcy5fY2FjaGVkRGlyZWN0aW9uPW51bGwsdGhpcy5fY2FjaGVkTGVuZ3Rocz1bXSx0aGlzLl9jYWNoZWRUcmFuc2Zvcm1zPW51bGwsdGhpcy5fcmF0aW9zRGlydHk9ITEsdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IGgsaC5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpfWZ1bmN0aW9uIG4odCxpLG4pe3ZhciBvLHMsYSxoLGM9MCxwPWksdT0wO2Zvcih0aGlzLl9jYWNoZWRMZW5ndGhzPVtdLHRoaXMuX2NhY2hlZFRyYW5zZm9ybXM9W10saD0wO2g8dC5sZW5ndGg7aCsrKXM9dFtoXSxhPXRoaXMuX25vZGVzW2hdLFwibnVtYmVyXCIhPXR5cGVvZiBzP3AtPWEuZ2V0U2l6ZSgpW25dfHwwOnUrPXM7Zm9yKGg9MDtoPHQubGVuZ3RoO2grKylhPXRoaXMuX25vZGVzW2hdLHM9dFtoXSxpPVwibnVtYmVyXCI9PXR5cGVvZiBzP3Aqcy91OmEuZ2V0U2l6ZSgpW25dLG89bj09PWUuRElSRUNUSU9OX1g/ci50cmFuc2xhdGUoYywwLDApOnIudHJhbnNsYXRlKDAsYywwKSx0aGlzLl9jYWNoZWRUcmFuc2Zvcm1zLnB1c2gobyksdGhpcy5fY2FjaGVkTGVuZ3Rocy5wdXNoKGkpLGMrPWl9ZnVuY3Rpb24gbyh0LGkpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKFwibnVtYmVyXCIhPXR5cGVvZiB0W2VdJiZ0aGlzLl9ub2Rlc1tlXS5nZXRTaXplKClbaV0hPT10aGlzLl9jYWNoZWRMZW5ndGhzW2VdKXJldHVybiEwO3JldHVybiExfXZhciBzPXQoXCIuLi9jb3JlL0VudGl0eVwiKSxyPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSxhPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpLGg9dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLGM9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCIpO2UuRElSRUNUSU9OX1g9MCxlLkRJUkVDVElPTl9ZPTEsZS5ERUZBVUxUX09QVElPTlM9e2RpcmVjdGlvbjplLkRJUkVDVElPTl9YLHRyYW5zaXRpb246ITEscmF0aW9zOltdfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt0aGlzLm9wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLnNlcXVlbmNlRnJvbT1mdW5jdGlvbih0KXtpZih0aGlzLl9ub2Rlcz10LDA9PT10aGlzLl9yYXRpb3MuZ2V0KCkubGVuZ3RoKXtmb3IodmFyIGk9W10sZT0wO2U8dGhpcy5fbm9kZXMubGVuZ3RoO2UrKylpLnB1c2goMSk7dGhpcy5zZXRSYXRpb3MoaSl9fSxlLnByb3RvdHlwZS5zZXRSYXRpb3M9ZnVuY3Rpb24odCxpLGUpe3ZvaWQgMD09PWkmJihpPXRoaXMub3B0aW9ucy50cmFuc2l0aW9uKTt2YXIgbj10aGlzLl9yYXRpb3M7MD09PW4uZ2V0KCkubGVuZ3RoJiYoaT12b2lkIDApLG4uaXNBY3RpdmUoKSYmbi5oYWx0KCksbi5zZXQodCxpLGUpLHRoaXMuX3JhdGlvc0RpcnR5PSEwfSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpemV9LGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0KXt2YXIgaSxlPXQuc2l6ZSxzPXQudHJhbnNmb3JtLGE9dC5vcmlnaW4saD10Lm9wYWNpdHksYz10aGlzLl9yYXRpb3MuZ2V0KCkscD10aGlzLm9wdGlvbnMuZGlyZWN0aW9uLHU9ZVtwXTsodSE9PXRoaXMuX3NpemVbcF18fHRoaXMuX3JhdGlvc0RpcnR5fHx0aGlzLl9yYXRpb3MuaXNBY3RpdmUoKXx8cCE9PXRoaXMuX2NhY2hlZERpcmVjdGlvbnx8by5jYWxsKHRoaXMsYyxwKSkmJihuLmNhbGwodGhpcyxjLHUscCksdSE9PXRoaXMuX3NpemVbcF0mJih0aGlzLl9zaXplWzBdPWVbMF0sdGhpcy5fc2l6ZVsxXT1lWzFdKSxwIT09dGhpcy5fY2FjaGVkRGlyZWN0aW9uJiYodGhpcy5fY2FjaGVkRGlyZWN0aW9uPXApLHRoaXMuX3JhdGlvc0RpcnR5JiYodGhpcy5fcmF0aW9zRGlydHk9ITEpKTtmb3IodmFyIGw9W10sZj0wO2Y8Yy5sZW5ndGg7ZisrKWk9W3ZvaWQgMCx2b2lkIDBdLHU9dGhpcy5fY2FjaGVkTGVuZ3Roc1tmXSxpW3BdPXUsbC5wdXNoKHt0cmFuc2Zvcm06dGhpcy5fY2FjaGVkVHJhbnNmb3Jtc1tmXSxzaXplOmksdGFyZ2V0OnRoaXMuX25vZGVzW2ZdLnJlbmRlcigpfSk7cmV0dXJuIGUmJjAhPT1hWzBdJiYwIT09YVsxXSYmKHM9ci5tb3ZlVGhlbihbLWVbMF0qYVswXSwtZVsxXSphWzFdLDBdLHMpKSx7dHJhbnNmb3JtOnMsc2l6ZTplLG9wYWNpdHk6aCx0YXJnZXQ6bH19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0VudGl0eVwiOjUsXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjo4OH1dLDEwMjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgcyh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLmFuZ2xlPW5ldyBvKDApLHRoaXMuZnJvbnROb2RlPXZvaWQgMCx0aGlzLmJhY2tOb2RlPXZvaWQgMCx0aGlzLmZsaXBwZWQ9ITF9dmFyIG49dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLG89dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCIpLHM9KHQoXCIuLi9jb3JlL1JlbmRlck5vZGVcIiksdChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIikpO2UuRElSRUNUSU9OX1g9MCxlLkRJUkVDVElPTl9ZPTE7dmFyIHI9MTtlLkRFRkFVTFRfT1BUSU9OUz17dHJhbnNpdGlvbjohMCxkaXJlY3Rpb246ZS5ESVJFQ1RJT05fWH0sZS5wcm90b3R5cGUuZmxpcD1mdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMuZmxpcHBlZD8wOk1hdGguUEk7dGhpcy5zZXRBbmdsZShlLHQsaSksdGhpcy5mbGlwcGVkPSF0aGlzLmZsaXBwZWR9LGUucHJvdG90eXBlLnNldEFuZ2xlPWZ1bmN0aW9uKHQsaSxlKXt2b2lkIDA9PT1pJiYoaT10aGlzLm9wdGlvbnMudHJhbnNpdGlvbiksdGhpcy5hbmdsZS5pc0FjdGl2ZSgpJiZ0aGlzLmFuZ2xlLmhhbHQoKSx0aGlzLmFuZ2xlLnNldCh0LGksZSl9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLnNldEZyb250PWZ1bmN0aW9uKHQpe3RoaXMuZnJvbnROb2RlPXR9LGUucHJvdG90eXBlLnNldEJhY2s9ZnVuY3Rpb24odCl7dGhpcy5iYWNrTm9kZT10fSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdCxpLG89dGhpcy5hbmdsZS5nZXQoKTt0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPT09ZS5ESVJFQ1RJT05fWD8odD1uLnJvdGF0ZVkobyksaT1uLnJvdGF0ZVkobytNYXRoLlBJKSk6KHQ9bi5yb3RhdGVYKG8pLGk9bi5yb3RhdGVYKG8rTWF0aC5QSSkpO3ZhciBzPVtdO3JldHVybiB0aGlzLmZyb250Tm9kZSYmcy5wdXNoKHt0cmFuc2Zvcm06dCx0YXJnZXQ6dGhpcy5mcm9udE5vZGUucmVuZGVyKCl9KSx0aGlzLmJhY2tOb2RlJiZzLnB1c2goe3RyYW5zZm9ybTpuLm1vdmVUaGVuKFswLDAscl0saSksdGFyZ2V0OnRoaXMuYmFja05vZGUucmVuZGVyKCl9KSxzfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi4vY29yZS9SZW5kZXJOb2RlXCI6MTEsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjo4OH1dLDEwMzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLm9wdGlvbnNNYW5hZ2VyPW5ldyB1KHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuaWQ9ci5yZWdpc3Rlcih0aGlzKSx0aGlzLl9tb2RpZmllcnM9W10sdGhpcy5fc3RhdGVzPVtdLHRoaXMuX2NvbnRleHRTaXplQ2FjaGU9WzAsMF0sdGhpcy5fZGltZW5zaW9uc0NhY2hlPVswLDBdLHRoaXMuX2FjdGl2ZUNvdW50PTAsdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IGMsYy5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpfWZ1bmN0aW9uIG4odCxpLGUpe3ZhciBuPVt0WzBdLHRbMV1dO25bMF0tPXRoaXMub3B0aW9ucy5ndXR0ZXJTaXplWzBdKihpLTEpLG5bMV0tPXRoaXMub3B0aW9ucy5ndXR0ZXJTaXplWzFdKihlLTEpO2Zvcih2YXIgcixhPU1hdGgucm91bmQoblsxXS9lKSxoPU1hdGgucm91bmQoblswXS9pKSxjPTAscD0wLHU9MDtlPnU7dSsrKXtyPTA7Zm9yKHZhciBsPTA7aT5sO2wrKyl2b2lkIDA9PT10aGlzLl9tb2RpZmllcnNbcF0/by5jYWxsKHRoaXMscCxbaCxhXSxbcixjLDBdLDEpOnMuY2FsbCh0aGlzLHAsW2gsYV0sW3IsYywwXSwxKSxwKysscis9aCt0aGlzLm9wdGlvbnMuZ3V0dGVyU2l6ZVswXTtjKz1hK3RoaXMub3B0aW9ucy5ndXR0ZXJTaXplWzFdfWZvcih0aGlzLl9kaW1lbnNpb25zQ2FjaGU9W3RoaXMub3B0aW9ucy5kaW1lbnNpb25zWzBdLHRoaXMub3B0aW9ucy5kaW1lbnNpb25zWzFdXSx0aGlzLl9jb250ZXh0U2l6ZUNhY2hlPVt0WzBdLHRbMV1dLHRoaXMuX2FjdGl2ZUNvdW50PWUqaSx1PXRoaXMuX2FjdGl2ZUNvdW50O3U8dGhpcy5fbW9kaWZpZXJzLmxlbmd0aDt1Kyspcy5jYWxsKHRoaXMsdSxbTWF0aC5yb3VuZChoKSxNYXRoLnJvdW5kKGEpXSxbMCwwXSwwKTt0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwicmVmbG93XCIpfWZ1bmN0aW9uIG8odCxpLGUsbil7dmFyIG89e3RyYW5zZm9ybTpuZXcgZihhLnRyYW5zbGF0ZS5hcHBseShudWxsLGUpKSxvcGFjaXR5Om5ldyBsKG4pLHNpemU6bmV3IGwoaSl9LHM9bmV3IHAoe3RyYW5zZm9ybTpvLnRyYW5zZm9ybSxvcGFjaXR5Om8ub3BhY2l0eSxzaXplOm8uc2l6ZX0pO3RoaXMuX3N0YXRlc1t0XT1vLHRoaXMuX21vZGlmaWVyc1t0XT1zfWZ1bmN0aW9uIHModCxpLGUsbil7dmFyIG89dGhpcy5fc3RhdGVzW3RdLHM9by5zaXplLHI9by5vcGFjaXR5LGE9by50cmFuc2Zvcm0saD10aGlzLm9wdGlvbnMudHJhbnNpdGlvbjthLmhhbHQoKSxyLmhhbHQoKSxzLmhhbHQoKSxhLnNldFRyYW5zbGF0ZShlLGgpLHMuc2V0KGksaCksci5zZXQobixoKX12YXIgcj10KFwiLi4vY29yZS9FbnRpdHlcIiksYT0odChcIi4uL2NvcmUvUmVuZGVyTm9kZVwiKSx0KFwiLi4vY29yZS9UcmFuc2Zvcm1cIikpLGg9dChcIi4uL2NvcmUvVmlld1NlcXVlbmNlXCIpLGM9dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLHA9dChcIi4uL2NvcmUvTW9kaWZpZXJcIiksdT10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSxsPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKSxmPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybVwiKTtlLkRFRkFVTFRfT1BUSU9OUz17ZGltZW5zaW9uczpbMSwxXSx0cmFuc2l0aW9uOiExLGd1dHRlclNpemU6WzAsMF19LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLnNlcXVlbmNlRnJvbT1mdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgQXJyYXkmJih0PW5ldyBoKHQpKSx0aGlzLnNlcXVlbmNlPXR9LGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0KXt2YXIgaT10LnRyYW5zZm9ybSxlPXQub3BhY2l0eSxvPXQub3JpZ2luLHM9dC5zaXplLHI9dGhpcy5vcHRpb25zLmRpbWVuc2lvbnNbMF0saD10aGlzLm9wdGlvbnMuZGltZW5zaW9uc1sxXTsoc1swXSE9PXRoaXMuX2NvbnRleHRTaXplQ2FjaGVbMF18fHNbMV0hPT10aGlzLl9jb250ZXh0U2l6ZUNhY2hlWzFdfHxyIT09dGhpcy5fZGltZW5zaW9uc0NhY2hlWzBdfHxoIT09dGhpcy5fZGltZW5zaW9uc0NhY2hlWzFdKSYmbi5jYWxsKHRoaXMscyxyLGgpO2Zvcih2YXIgYz10aGlzLnNlcXVlbmNlLHA9W10sdT0wO2MmJnU8dGhpcy5fbW9kaWZpZXJzLmxlbmd0aDspe3ZhciBsPWMuZ2V0KCksZj10aGlzLl9tb2RpZmllcnNbdV07dT49dGhpcy5fYWN0aXZlQ291bnQmJnRoaXMuX3N0YXRlc1t1XS5vcGFjaXR5LmlzQWN0aXZlKCkmJih0aGlzLl9tb2RpZmllcnMuc3BsaWNlKHUsMSksdGhpcy5fc3RhdGVzLnNwbGljZSh1LDEpKSxsJiZwLnB1c2goZi5tb2RpZnkoe29yaWdpbjpvLHRhcmdldDpsLnJlbmRlcigpfSkpLGM9Yy5nZXROZXh0KCksdSsrfXJldHVybiBzJiYoaT1hLm1vdmVUaGVuKFstc1swXSpvWzBdLC1zWzFdKm9bMV0sMF0saSkpLHt0cmFuc2Zvcm06aSxvcGFjaXR5OmUsc2l6ZTpzLHRhcmdldDpwfX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRW50aXR5XCI6NSxcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL2NvcmUvTW9kaWZpZXJcIjo5LFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi4vY29yZS9SZW5kZXJOb2RlXCI6MTEsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vY29yZS9WaWV3U2VxdWVuY2VcIjoxNyxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODgsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybVwiOjg5fV0sMTA0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBjKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX2VudGl0eUlkPXIucmVnaXN0ZXIodGhpcyksdGhpcy5oZWFkZXI9bmV3IGEsdGhpcy5mb290ZXI9bmV3IGEsdGhpcy5jb250ZW50PW5ldyBhfWZ1bmN0aW9uIG4odCxpKXt2YXIgZT10LmdldFNpemUoKTtyZXR1cm4gZT9lW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dOml9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWUuRElSRUNUSU9OX1g/aC50cmFuc2xhdGUodCwwLDApOmgudHJhbnNsYXRlKDAsdCwwKX1mdW5jdGlvbiBzKHQsaSl7cmV0dXJuIHRoaXMub3B0aW9ucy5kaXJlY3Rpb249PT1lLkRJUkVDVElPTl9YP1t0LGlbMV1dOltpWzBdLHRdfXZhciByPXQoXCIuLi9jb3JlL0VudGl0eVwiKSxhPXQoXCIuLi9jb3JlL1JlbmRlck5vZGVcIiksaD10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIiksYz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLkRJUkVDVElPTl9YPTAsZS5ESVJFQ1RJT05fWT0xLGUuREVGQVVMVF9PUFRJT05TPXtkaXJlY3Rpb246ZS5ESVJFQ1RJT05fWSxoZWFkZXJTaXplOnZvaWQgMCxmb290ZXJTaXplOnZvaWQgMCxkZWZhdWx0SGVhZGVyU2l6ZTowLGRlZmF1bHRGb290ZXJTaXplOjB9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbnRpdHlJZH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0sZS5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKHQpe3ZhciBpPXQudHJhbnNmb3JtLGU9dC5vcmlnaW4scj10LnNpemUsYT10Lm9wYWNpdHksYz12b2lkIDAhPT10aGlzLm9wdGlvbnMuaGVhZGVyU2l6ZT90aGlzLm9wdGlvbnMuaGVhZGVyU2l6ZTpuLmNhbGwodGhpcyx0aGlzLmhlYWRlcix0aGlzLm9wdGlvbnMuZGVmYXVsdEhlYWRlclNpemUpLHA9dm9pZCAwIT09dGhpcy5vcHRpb25zLmZvb3RlclNpemU/dGhpcy5vcHRpb25zLmZvb3RlclNpemU6bi5jYWxsKHRoaXMsdGhpcy5mb290ZXIsdGhpcy5vcHRpb25zLmRlZmF1bHRGb290ZXJTaXplKSx1PXJbdGhpcy5vcHRpb25zLmRpcmVjdGlvbl0tYy1wO3ImJihpPWgubW92ZVRoZW4oWy1yWzBdKmVbMF0sLXJbMV0qZVsxXSwwXSxpKSk7dmFyIGw9W3tzaXplOnMuY2FsbCh0aGlzLGMsciksdGFyZ2V0OnRoaXMuaGVhZGVyLnJlbmRlcigpfSx7dHJhbnNmb3JtOm8uY2FsbCh0aGlzLGMpLHNpemU6cy5jYWxsKHRoaXMsdSxyKSx0YXJnZXQ6dGhpcy5jb250ZW50LnJlbmRlcigpfSx7dHJhbnNmb3JtOm8uY2FsbCh0aGlzLGMrdSksc2l6ZTpzLmNhbGwodGhpcyxwLHIpLHRhcmdldDp0aGlzLmZvb3Rlci5yZW5kZXIoKX1dO3JldHVybnt0cmFuc2Zvcm06aSxvcGFjaXR5OmEsc2l6ZTpyLHRhcmdldDpsfX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRW50aXR5XCI6NSxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvUmVuZGVyTm9kZVwiOjExLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNX1dLDEwNTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgYSh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLl9zaG93aW5nPSExLHRoaXMubm9kZXM9W10sdGhpcy50cmFuc2Zvcm1zPVtdLHRoaXMuc3RhdGVzPVtdfXZhciBuPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSxvPXQoXCIuLi9jb3JlL01vZGlmaWVyXCIpLHM9dChcIi4uL2NvcmUvUmVuZGVyTm9kZVwiKSxyPXQoXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiKSxhPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpLGg9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCIpLGM9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtXCIpO2UuREVGQVVMVF9PUFRJT05TPXtpblRyYW5zZm9ybTpuLnNjYWxlKC4wMDEsLjAwMSwuMDAxKSxpbk9wYWNpdHk6MCxpbk9yaWdpbjpbLjUsLjVdLGluQWxpZ246Wy41LC41XSxvdXRUcmFuc2Zvcm06bi5zY2FsZSguMDAxLC4wMDEsLjAwMSksb3V0T3BhY2l0eTowLG91dE9yaWdpbjpbLjUsLjVdLG91dEFsaWduOlsuNSwuNV0sc2hvd1RyYW5zZm9ybTpuLmlkZW50aXR5LHNob3dPcGFjaXR5OjEsc2hvd09yaWdpbjpbLjUsLjVdLHNob3dBbGlnbjpbLjUsLjVdLGluVHJhbnNpdGlvbjohMCxvdXRUcmFuc2l0aW9uOiEwLG92ZXJsYXA6ITF9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24odCxpLGUpe2lmKCF0KXJldHVybiB0aGlzLmhpZGUoZSk7aWYoaSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYoZT1pLGk9dm9pZCAwKSx0aGlzLl9zaG93aW5nKXtpZighdGhpcy5vcHRpb25zLm92ZXJsYXApcmV0dXJuIHRoaXMuaGlkZSh0aGlzLnNob3cuYmluZCh0aGlzLHQsaSxlKSk7dGhpcy5oaWRlKCl9dGhpcy5fc2hvd2luZz0hMDt2YXIgbj17dHJhbnNmb3JtOm5ldyBjKHRoaXMub3B0aW9ucy5pblRyYW5zZm9ybSksb3JpZ2luOm5ldyBoKHRoaXMub3B0aW9ucy5pbk9yaWdpbiksYWxpZ246bmV3IGgodGhpcy5vcHRpb25zLmluQWxpZ24pLG9wYWNpdHk6bmV3IGgodGhpcy5vcHRpb25zLmluT3BhY2l0eSl9LGE9bmV3IG8oe3RyYW5zZm9ybTpuLnRyYW5zZm9ybSxvcGFjaXR5Om4ub3BhY2l0eSxvcmlnaW46bi5vcmlnaW4sYWxpZ246bi5hbGlnbn0pLHA9bmV3IHM7cC5hZGQoYSkuYWRkKHQpLHRoaXMubm9kZXMucHVzaChwKSx0aGlzLnN0YXRlcy5wdXNoKG4pLHRoaXMudHJhbnNmb3Jtcy5wdXNoKGEpO3ZhciB1PWU/ci5hZnRlcigzLGUpOnZvaWQgMDtpfHwoaT10aGlzLm9wdGlvbnMuaW5UcmFuc2l0aW9uKSxuLnRyYW5zZm9ybS5zZXQodGhpcy5vcHRpb25zLnNob3dUcmFuc2Zvcm0saSx1KSxuLm9wYWNpdHkuc2V0KHRoaXMub3B0aW9ucy5zaG93T3BhY2l0eSxpLHUpLG4ub3JpZ2luLnNldCh0aGlzLm9wdGlvbnMuc2hvd09yaWdpbixpLHUpLG4uYWxpZ24uc2V0KHRoaXMub3B0aW9ucy5zaG93QWxpZ24saSx1KX0sZS5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbih0LGkpe2lmKHRoaXMuX3Nob3dpbmcpe3RoaXMuX3Nob3dpbmc9ITEsdCBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYoaT10LHQ9dm9pZCAwKTt2YXIgZT10aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoLTFdLG49dGhpcy50cmFuc2Zvcm1zW3RoaXMudHJhbnNmb3Jtcy5sZW5ndGgtMV0sbz10aGlzLnN0YXRlc1t0aGlzLnN0YXRlcy5sZW5ndGgtMV0scz1yLmFmdGVyKDMsZnVuY3Rpb24oKXt0aGlzLm5vZGVzLnNwbGljZSh0aGlzLm5vZGVzLmluZGV4T2YoZSksMSksdGhpcy5zdGF0ZXMuc3BsaWNlKHRoaXMuc3RhdGVzLmluZGV4T2YobyksMSksdGhpcy50cmFuc2Zvcm1zLnNwbGljZSh0aGlzLnRyYW5zZm9ybXMuaW5kZXhPZihuKSwxKSxpJiZpLmNhbGwodGhpcyl9LmJpbmQodGhpcykpO3R8fCh0PXRoaXMub3B0aW9ucy5vdXRUcmFuc2l0aW9uKSxvLnRyYW5zZm9ybS5zZXQodGhpcy5vcHRpb25zLm91dFRyYW5zZm9ybSx0LHMpLG8ub3BhY2l0eS5zZXQodGhpcy5vcHRpb25zLm91dE9wYWNpdHksdCxzKSxvLm9yaWdpbi5zZXQodGhpcy5vcHRpb25zLm91dE9yaWdpbix0LHMpLG8uYWxpZ24uc2V0KHRoaXMub3B0aW9ucy5vdXRBbGlnbix0LHMpfX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGk9MDtpPHRoaXMubm9kZXMubGVuZ3RoO2krKyl0LnB1c2godGhpcy5ub2Rlc1tpXS5yZW5kZXIoKSk7cmV0dXJuIHR9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL01vZGlmaWVyXCI6OSxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvUmVuZGVyTm9kZVwiOjExLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODgsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybVwiOjg5LFwiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIjo5NX1dLDEwNjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7aC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fc2hvd2luZz0tMSx0aGlzLl9vdXRnb2luZ1JlbmRlcmFibGVzPVtdLHRoaXMuX25leHRSZW5kZXJhYmxlPW51bGwsdGhpcy5fcmVuZGVyYWJsZXM9W10sdGhpcy5fbm9kZXM9W10sdGhpcy5fbW9kaWZpZXJzPVtdLHRoaXMuX3N0YXRlcz1bXSx0aGlzLmluVHJhbnNmb3JtTWFwPWUuRGVmYXVsdE1hcC50cmFuc2Zvcm0sdGhpcy5pbk9wYWNpdHlNYXA9ZS5EZWZhdWx0TWFwLm9wYWNpdHksdGhpcy5pbk9yaWdpbk1hcD1lLkRlZmF1bHRNYXAub3JpZ2luLHRoaXMub3V0VHJhbnNmb3JtTWFwPWUuRGVmYXVsdE1hcC50cmFuc2Zvcm0sdGhpcy5vdXRPcGFjaXR5TWFwPWUuRGVmYXVsdE1hcC5vcGFjaXR5LHRoaXMub3V0T3JpZ2luTWFwPWUuRGVmYXVsdE1hcC5vcmlnaW4sdGhpcy5fb3V0cHV0PVtdXG59ZnVuY3Rpb24gbih0LGkpe3JldHVybiB0KGkuZ2V0KCkpfXZhciBvPXQoXCIuLi9jb3JlL01vZGlmaWVyXCIpLHM9dChcIi4uL2NvcmUvUmVuZGVyTm9kZVwiKSxyPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSxhPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKSxoPXQoXCIuLi9jb3JlL1ZpZXdcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLkRFRkFVTFRfT1BUSU9OUz17aW5UcmFuc2l0aW9uOiEwLG91dFRyYW5zaXRpb246ITAsb3ZlcmxhcDohMH0sZS5EZWZhdWx0TWFwPXt0cmFuc2Zvcm06ZnVuY3Rpb24oKXtyZXR1cm4gci5pZGVudGl0eX0sb3BhY2l0eTpmdW5jdGlvbih0KXtyZXR1cm4gdH0sb3JpZ2luOm51bGx9LGUucHJvdG90eXBlLmluVHJhbnNmb3JtRnJvbT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgRnVuY3Rpb24pdGhpcy5pblRyYW5zZm9ybU1hcD10O2Vsc2V7aWYoIXR8fCF0LmdldCl0aHJvdyBuZXcgRXJyb3IoXCJpblRyYW5zZm9ybUZyb20gdGFrZXMgb25seSBmdW5jdGlvbiBvciBnZXR0ZXIgb2JqZWN0XCIpO3RoaXMuaW5UcmFuc2Zvcm1NYXA9dC5nZXQuYmluZCh0KX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuaW5PcGFjaXR5RnJvbT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgRnVuY3Rpb24pdGhpcy5pbk9wYWNpdHlNYXA9dDtlbHNle2lmKCF0fHwhdC5nZXQpdGhyb3cgbmV3IEVycm9yKFwiaW5PcGFjaXR5RnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3RcIik7dGhpcy5pbk9wYWNpdHlNYXA9dC5nZXQuYmluZCh0KX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuaW5PcmlnaW5Gcm9tPWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBGdW5jdGlvbil0aGlzLmluT3JpZ2luTWFwPXQ7ZWxzZXtpZighdHx8IXQuZ2V0KXRocm93IG5ldyBFcnJvcihcImluT3JpZ2luRnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3RcIik7dGhpcy5pbk9yaWdpbk1hcD10LmdldC5iaW5kKHQpfXJldHVybiB0aGlzfSxlLnByb3RvdHlwZS5vdXRUcmFuc2Zvcm1Gcm9tPWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBGdW5jdGlvbil0aGlzLm91dFRyYW5zZm9ybU1hcD10O2Vsc2V7aWYoIXR8fCF0LmdldCl0aHJvdyBuZXcgRXJyb3IoXCJvdXRUcmFuc2Zvcm1Gcm9tIHRha2VzIG9ubHkgZnVuY3Rpb24gb3IgZ2V0dGVyIG9iamVjdFwiKTt0aGlzLm91dFRyYW5zZm9ybU1hcD10LmdldC5iaW5kKHQpfXJldHVybiB0aGlzfSxlLnByb3RvdHlwZS5vdXRPcGFjaXR5RnJvbT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgRnVuY3Rpb24pdGhpcy5vdXRPcGFjaXR5TWFwPXQ7ZWxzZXtpZighdHx8IXQuZ2V0KXRocm93IG5ldyBFcnJvcihcIm91dE9wYWNpdHlGcm9tIHRha2VzIG9ubHkgZnVuY3Rpb24gb3IgZ2V0dGVyIG9iamVjdFwiKTt0aGlzLm91dE9wYWNpdHlNYXA9dC5nZXQuYmluZCh0KX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUub3V0T3JpZ2luRnJvbT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgRnVuY3Rpb24pdGhpcy5vdXRPcmlnaW5NYXA9dDtlbHNle2lmKCF0fHwhdC5nZXQpdGhyb3cgbmV3IEVycm9yKFwib3V0T3JpZ2luRnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3RcIik7dGhpcy5vdXRPcmlnaW5NYXA9dC5nZXQuYmluZCh0KX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbih0LGksZSl7aWYoIXQpcmV0dXJuIHRoaXMuaGlkZShlKTtpZihpIGluc3RhbmNlb2YgRnVuY3Rpb24mJihlPWksaT1udWxsKSx0aGlzLl9zaG93aW5nPj0wKXtpZighdGhpcy5vcHRpb25zLm92ZXJsYXApcmV0dXJuIHZvaWQodGhpcy5fbmV4dFJlbmRlcmFibGU/dGhpcy5fbmV4dFJlbmRlcmFibGU9dDoodGhpcy5fbmV4dFJlbmRlcmFibGU9dCx0aGlzLmhpZGUoZnVuY3Rpb24oKXt0aGlzLl9uZXh0UmVuZGVyYWJsZT09PXQmJnRoaXMuc2hvdyh0aGlzLl9uZXh0UmVuZGVyYWJsZSxlKSx0aGlzLl9uZXh0UmVuZGVyYWJsZT1udWxsfSkpKTt0aGlzLmhpZGUoKX12YXIgcj1udWxsLGg9dGhpcy5fcmVuZGVyYWJsZXMuaW5kZXhPZih0KTtpZihoPj0wKXt0aGlzLl9zaG93aW5nPWgscj10aGlzLl9zdGF0ZXNbaF0sci5oYWx0KCk7dmFyIGM9dGhpcy5fb3V0Z29pbmdSZW5kZXJhYmxlcy5pbmRleE9mKHQpO2M+PTAmJnRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMuc3BsaWNlKGMsMSl9ZWxzZXtyPW5ldyBhKDApO3ZhciBwPW5ldyBvKHt0cmFuc2Zvcm06dGhpcy5pblRyYW5zZm9ybU1hcD9uLmJpbmQodGhpcyx0aGlzLmluVHJhbnNmb3JtTWFwLHIpOm51bGwsb3BhY2l0eTp0aGlzLmluT3BhY2l0eU1hcD9uLmJpbmQodGhpcyx0aGlzLmluT3BhY2l0eU1hcCxyKTpudWxsLG9yaWdpbjp0aGlzLmluT3JpZ2luTWFwP24uYmluZCh0aGlzLHRoaXMuaW5PcmlnaW5NYXAscik6bnVsbH0pLHU9bmV3IHM7dS5hZGQocCkuYWRkKHQpLHRoaXMuX3Nob3dpbmc9dGhpcy5fbm9kZXMubGVuZ3RoLHRoaXMuX25vZGVzLnB1c2godSksdGhpcy5fbW9kaWZpZXJzLnB1c2gocCksdGhpcy5fc3RhdGVzLnB1c2gociksdGhpcy5fcmVuZGVyYWJsZXMucHVzaCh0KX1pfHwoaT10aGlzLm9wdGlvbnMuaW5UcmFuc2l0aW9uKSxyLnNldCgxLGksZSl9LGUucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24odCxpKXtpZighKHRoaXMuX3Nob3dpbmc8MCkpe3ZhciBlPXRoaXMuX3Nob3dpbmc7dGhpcy5fc2hvd2luZz0tMSx0IGluc3RhbmNlb2YgRnVuY3Rpb24mJihpPXQsdD12b2lkIDApO3ZhciBvPXRoaXMuX25vZGVzW2VdLHM9dGhpcy5fbW9kaWZpZXJzW2VdLHI9dGhpcy5fc3RhdGVzW2VdLGE9dGhpcy5fcmVuZGVyYWJsZXNbZV07cy50cmFuc2Zvcm1Gcm9tKHRoaXMub3V0VHJhbnNmb3JtTWFwP24uYmluZCh0aGlzLHRoaXMub3V0VHJhbnNmb3JtTWFwLHIpOm51bGwpLHMub3BhY2l0eUZyb20odGhpcy5vdXRPcGFjaXR5TWFwP24uYmluZCh0aGlzLHRoaXMub3V0T3BhY2l0eU1hcCxyKTpudWxsKSxzLm9yaWdpbkZyb20odGhpcy5vdXRPcmlnaW5NYXA/bi5iaW5kKHRoaXMsdGhpcy5vdXRPcmlnaW5NYXAscik6bnVsbCksdGhpcy5fb3V0Z29pbmdSZW5kZXJhYmxlcy5pbmRleE9mKGEpPDAmJnRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMucHVzaChhKSx0fHwodD10aGlzLm9wdGlvbnMub3V0VHJhbnNpdGlvbiksci5oYWx0KCksci5zZXQoMCx0LGZ1bmN0aW9uKHQsZSxuLG8pe2lmKHRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMuaW5kZXhPZihvKT49MCl7dmFyIHM9dGhpcy5fbm9kZXMuaW5kZXhPZih0KTt0aGlzLl9ub2Rlcy5zcGxpY2UocywxKSx0aGlzLl9tb2RpZmllcnMuc3BsaWNlKHMsMSksdGhpcy5fc3RhdGVzLnNwbGljZShzLDEpLHRoaXMuX3JlbmRlcmFibGVzLnNwbGljZShzLDEpLHRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMuc3BsaWNlKHRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMuaW5kZXhPZihvKSwxKSx0aGlzLl9zaG93aW5nPj1zJiZ0aGlzLl9zaG93aW5nLS19aSYmaS5jYWxsKHRoaXMpfS5iaW5kKHRoaXMsbyxzLHIsYSkpfX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fb3V0cHV0O3QubGVuZ3RoPnRoaXMuX25vZGVzLmxlbmd0aCYmdC5zcGxpY2UodGhpcy5fbm9kZXMubGVuZ3RoKTtmb3IodmFyIGk9MDtpPHRoaXMuX25vZGVzLmxlbmd0aDtpKyspdFtpXT10aGlzLl9ub2Rlc1tpXS5yZW5kZXIoKTtyZXR1cm4gdH0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvTW9kaWZpZXJcIjo5LFwiLi4vY29yZS9SZW5kZXJOb2RlXCI6MTEsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vY29yZS9WaWV3XCI6MTYsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiOjg4fV0sMTA3OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyByKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuY29udGFpbmVyPW5ldyBuKHRoaXMub3B0aW9ucy5jb250YWluZXIpLHRoaXMuc2Nyb2xsdmlldz1uZXcgcyh0aGlzLm9wdGlvbnMuc2Nyb2xsdmlldyksdGhpcy5jb250YWluZXIuYWRkKHRoaXMuc2Nyb2xsdmlldyksdGhpcy5fZXZlbnRJbnB1dD1uZXcgbyxvLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLHRoaXMuX2V2ZW50SW5wdXQucGlwZSh0aGlzLnNjcm9sbHZpZXcpLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBvLG8uc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLmNvbnRhaW5lci5waXBlKHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLnNjcm9sbHZpZXcucGlwZSh0aGlzLl9ldmVudE91dHB1dCl9dmFyIG49dChcIi4uL3N1cmZhY2VzL0NvbnRhaW5lclN1cmZhY2VcIiksbz10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIikscz10KFwiLi9TY3JvbGx2aWV3XCIpLHI9KHQoXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiKSx0KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSk7ZS5ERUZBVUxUX09QVElPTlM9e2NvbnRhaW5lcjp7cHJvcGVydGllczp7b3ZlcmZsb3c6XCJoaWRkZW5cIn19LHNjcm9sbHZpZXc6e319LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLnNlcXVlbmNlRnJvbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbHZpZXcuc2VxdWVuY2VGcm9tLmFwcGx5KHRoaXMuc2Nyb2xsdmlldyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyLmdldFNpemUuYXBwbHkodGhpcy5jb250YWluZXIsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyLnJlbmRlcigpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi4vc3VyZmFjZXMvQ29udGFpbmVyU3VyZmFjZVwiOjc1LFwiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIjo5NSxcIi4vU2Nyb2xsdmlld1wiOjEwOX1dLDEwODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKHRoaXMuY29uc3RydWN0b3IuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgYyh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCksdGhpcy5fbm9kZT1udWxsLHRoaXMuX3Bvc2l0aW9uPTAsdGhpcy5fcG9zaXRpb25PZmZzZXQ9MCx0aGlzLl9wb3NpdGlvbkdldHRlcj1udWxsLHRoaXMuX291dHB1dEZ1bmN0aW9uPW51bGwsdGhpcy5fbWFzdGVyT3V0cHV0RnVuY3Rpb249bnVsbCx0aGlzLm91dHB1dEZyb20oKSx0aGlzLl9vbkVkZ2U9MCx0aGlzLmdyb3VwPW5ldyBoLHRoaXMuZ3JvdXAuYWRkKHtyZW5kZXI6ci5iaW5kKHRoaXMpfSksdGhpcy5fZW50aXR5SWQ9YS5yZWdpc3Rlcih0aGlzKSx0aGlzLl9zaXplPVt2b2lkIDAsdm9pZCAwXSx0aGlzLl9jb250ZXh0U2l6ZT1bdm9pZCAwLHZvaWQgMF0sdGhpcy5fZXZlbnRJbnB1dD1uZXcgZix0aGlzLl9ldmVudE91dHB1dD1uZXcgZixmLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLGYuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KX1mdW5jdGlvbiBuKHQpe3R8fCh0PXRoaXMuX2NvbnRleHRTaXplKTt2YXIgaT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uO3JldHVybiB2b2lkIDA9PT10W2ldP3RoaXMuX2NvbnRleHRTaXplW2ldOnRbaV19ZnVuY3Rpb24gbyh0LGksZSl7dmFyIG89dC5nZXRTaXplP3QuZ2V0U2l6ZSgpOnRoaXMuX2NvbnRleHRTaXplLHM9dGhpcy5fb3V0cHV0RnVuY3Rpb24oaSk7cmV0dXJuIGUucHVzaCh7dHJhbnNmb3JtOnMsdGFyZ2V0OnQucmVuZGVyKCl9KSxuLmNhbGwodGhpcyxvKX1mdW5jdGlvbiBzKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMub3B0aW9ucy5jbGlwU2l6ZT90aGlzLm9wdGlvbnMuY2xpcFNpemU6dGhpcy5fY29udGV4dFNpemVbdGhpcy5vcHRpb25zLmRpcmVjdGlvbl0+dGhpcy5nZXRDdW11bGF0aXZlU2l6ZSgpW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dP24uY2FsbCh0aGlzLHRoaXMuZ2V0Q3VtdWxhdGl2ZVNpemUoKSk6bi5jYWxsKHRoaXMsdGhpcy5fY29udGV4dFNpemUpfWZ1bmN0aW9uIHIoKXtmb3IodmFyIHQ9bnVsbCxpPXRoaXMuX3Bvc2l0aW9uLGU9W10scj0tdGhpcy5fcG9zaXRpb25PZmZzZXQsYT1zLmNhbGwodGhpcyksaD10aGlzLl9ub2RlO2gmJnItaTxhK3RoaXMub3B0aW9ucy5tYXJnaW47KXIrPW8uY2FsbCh0aGlzLGgscixlKSxoPWguZ2V0TmV4dD9oLmdldE5leHQoKTpudWxsO3ZhciBjPXRoaXMuX25vZGUscD1uLmNhbGwodGhpcyxjLmdldFNpemUoKSk7aWYoYT5yKXtmb3IoO2MmJmE+cDspYz1jLmdldFByZXZpb3VzKCksYyYmKHArPW4uY2FsbCh0aGlzLGMuZ2V0U2l6ZSgpKSk7Zm9yKGM9dGhpcy5fbm9kZTtjJiZhPnA7KWM9Yy5nZXROZXh0KCksYyYmKHArPW4uY2FsbCh0aGlzLGMuZ2V0U2l6ZSgpKSl9Zm9yKCFoJiZhLWQ+ci1pPzEhPT10aGlzLl9vbkVkZ2UmJih0aGlzLl9vbkVkZ2U9MSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwib25FZGdlXCIse3Bvc2l0aW9uOnItYX0pKTohdGhpcy5fbm9kZS5nZXRQcmV2aW91cygpJiYtZD5pPy0xIT09dGhpcy5fb25FZGdlJiYodGhpcy5fb25FZGdlPS0xLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJvbkVkZ2VcIix7cG9zaXRpb246MH0pKTowIT09dGhpcy5fb25FZGdlJiYodGhpcy5fb25FZGdlPTAsdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcIm9mZkVkZ2VcIikpLGg9dGhpcy5fbm9kZSYmdGhpcy5fbm9kZS5nZXRQcmV2aW91cz90aGlzLl9ub2RlLmdldFByZXZpb3VzKCk6bnVsbCxyPS10aGlzLl9wb3NpdGlvbk9mZnNldCxoJiYodD1oLmdldFNpemU/aC5nZXRTaXplKCk6dGhpcy5fY29udGV4dFNpemUsci09bi5jYWxsKHRoaXMsdCkpO2gmJnItaT4tKGErdGhpcy5vcHRpb25zLm1hcmdpbik7KW8uY2FsbCh0aGlzLGgscixlKSxoPWguZ2V0UHJldmlvdXM/aC5nZXRQcmV2aW91cygpOm51bGwsaCYmKHQ9aC5nZXRTaXplP2guZ2V0U2l6ZSgpOnRoaXMuX2NvbnRleHRTaXplLHItPW4uY2FsbCh0aGlzLHQpKTtyZXR1cm4gZX12YXIgYT10KFwiLi4vY29yZS9FbnRpdHlcIiksaD10KFwiLi4vY29yZS9Hcm91cFwiKSxjPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpLHA9dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLHU9dChcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCIpLGw9dChcIi4uL2NvcmUvVmlld1NlcXVlbmNlXCIpLGY9dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpO2UuREVGQVVMVF9PUFRJT05TPXtkaXJlY3Rpb246dS5EaXJlY3Rpb24uWSxtYXJnaW46MCxjbGlwU2l6ZTp2b2lkIDAsZ3JvdXBTY3JvbGw6ITF9O3ZhciBkPTA7ZS5wcm90b3R5cGUuZ2V0Q3VtdWxhdGl2ZVNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXRoaXMuX25vZGUuXy5jdW11bGF0aXZlU2l6ZXMubGVuZ3RoLTEpLHRoaXMuX25vZGUuXy5nZXRTaXplKHQpfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3QuZ3JvdXBTY3JvbGwhPT10aGlzLm9wdGlvbnMuZ3JvdXBTY3JvbGwmJih0Lmdyb3VwU2Nyb2xsP3RoaXMuZ3JvdXAucGlwZSh0aGlzLl9ldmVudE91dHB1dCk6dGhpcy5ncm91cC51bnBpcGUodGhpcy5fZXZlbnRPdXRwdXQpKSx0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5vbkVkZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25FZGdlfSxlLnByb3RvdHlwZS5vdXRwdXRGcm9tPWZ1bmN0aW9uKHQsaSl7dHx8KHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5kaXJlY3Rpb249PT11LkRpcmVjdGlvbi5YP3AudHJhbnNsYXRlKHQsMCk6cC50cmFuc2xhdGUoMCx0KX0uYmluZCh0aGlzKSxpfHwoaT10KSksdGhpcy5fb3V0cHV0RnVuY3Rpb249dCx0aGlzLl9tYXN0ZXJPdXRwdXRGdW5jdGlvbj1pP2k6ZnVuY3Rpb24oaSl7cmV0dXJuIHAuaW52ZXJzZSh0KC1pKSl9fSxlLnByb3RvdHlwZS5wb3NpdGlvbkZyb209ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMuX3Bvc2l0aW9uR2V0dGVyPXQ6dCYmdC5nZXQ/dGhpcy5fcG9zaXRpb25HZXR0ZXI9dC5nZXQuYmluZCh0KToodGhpcy5fcG9zaXRpb25HZXR0ZXI9bnVsbCx0aGlzLl9wb3NpdGlvbj10KSx0aGlzLl9wb3NpdGlvbkdldHRlciYmKHRoaXMuX3Bvc2l0aW9uPXRoaXMuX3Bvc2l0aW9uR2V0dGVyLmNhbGwodGhpcykpfSxlLnByb3RvdHlwZS5zZXF1ZW5jZUZyb209ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEFycmF5JiYodD1uZXcgbCh7YXJyYXk6dH0pKSx0aGlzLl9ub2RlPXQsdGhpcy5fcG9zaXRpb25PZmZzZXQ9MH0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdD90aGlzLl9jb250ZXh0U2l6ZTp0aGlzLl9zaXplfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZT8odGhpcy5fcG9zaXRpb25HZXR0ZXImJih0aGlzLl9wb3NpdGlvbj10aGlzLl9wb3NpdGlvbkdldHRlci5jYWxsKHRoaXMpKSx0aGlzLl9lbnRpdHlJZCk6bnVsbH0sZS5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKHQpe3ZhciBpPXQudHJhbnNmb3JtLGU9dC5vcGFjaXR5LG49dC5vcmlnaW4sbz10LnNpemU7dGhpcy5vcHRpb25zLmNsaXBTaXplfHxvWzBdPT09dGhpcy5fY29udGV4dFNpemVbMF0mJm9bMV09PT10aGlzLl9jb250ZXh0U2l6ZVsxXXx8KHRoaXMuX29uRWRnZT0wLHRoaXMuX2NvbnRleHRTaXplWzBdPW9bMF0sdGhpcy5fY29udGV4dFNpemVbMV09b1sxXSx0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPT09dS5EaXJlY3Rpb24uWD8odGhpcy5fc2l6ZVswXT1zLmNhbGwodGhpcyksdGhpcy5fc2l6ZVsxXT12b2lkIDApOih0aGlzLl9zaXplWzBdPXZvaWQgMCx0aGlzLl9zaXplWzFdPXMuY2FsbCh0aGlzKSkpO3ZhciByPXRoaXMuX21hc3Rlck91dHB1dEZ1bmN0aW9uKC10aGlzLl9wb3NpdGlvbik7cmV0dXJue3RyYW5zZm9ybTpwLm11bHRpcGx5KGksciksc2l6ZTpvLG9wYWNpdHk6ZSxvcmlnaW46bix0YXJnZXQ6dGhpcy5ncm91cC5yZW5kZXIoKX19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0VudGl0eVwiOjUsXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL0dyb3VwXCI6OCxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTUsXCIuLi9jb3JlL1ZpZXdTZXF1ZW5jZVwiOjE3LFwiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIjo5NX1dLDEwOTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgTyh0aGlzLm9wdGlvbnMpLHRoaXMuX3Njcm9sbGVyPW5ldyBUKHRoaXMub3B0aW9ucyksdGhpcy5zeW5jPW5ldyBiKFtcInNjcm9sbFwiLFwidG91Y2hcIl0se2RpcmVjdGlvbjp0aGlzLm9wdGlvbnMuZGlyZWN0aW9uLHNjYWxlOnRoaXMub3B0aW9ucy5zeW5jU2NhbGUscmFpbHM6dGhpcy5vcHRpb25zLnJhaWxzLHByZXZlbnREZWZhdWx0OnZvaWQgMCE9PXRoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdD90aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQ6dGhpcy5vcHRpb25zLmRpcmVjdGlvbiE9PXcuRGlyZWN0aW9uLll9KSx0aGlzLl9waHlzaWNzRW5naW5lPW5ldyBfLHRoaXMuX3BhcnRpY2xlPW5ldyB5LHRoaXMuX3BoeXNpY3NFbmdpbmUuYWRkQm9keSh0aGlzLl9wYXJ0aWNsZSksdGhpcy5zcHJpbmc9bmV3IHYoe2FuY2hvcjpbMCwwLDBdLHBlcmlvZDp0aGlzLm9wdGlvbnMuZWRnZVBlcmlvZCxkYW1waW5nUmF0aW86dGhpcy5vcHRpb25zLmVkZ2VEYW1wfSksdGhpcy5kcmFnPW5ldyBnKHtmb3JjZUZ1bmN0aW9uOmcuRk9SQ0VfRlVOQ1RJT05TLlFVQURSQVRJQyxzdHJlbmd0aDp0aGlzLm9wdGlvbnMuZHJhZ30pLHRoaXMuZnJpY3Rpb249bmV3IGcoe2ZvcmNlRnVuY3Rpb246Zy5GT1JDRV9GVU5DVElPTlMuTElORUFSLHN0cmVuZ3RoOnRoaXMub3B0aW9ucy5mcmljdGlvbn0pLHRoaXMuX25vZGU9bnVsbCx0aGlzLl90b3VjaENvdW50PTAsdGhpcy5fc3ByaW5nU3RhdGU9eC5OT05FLHRoaXMuX29uRWRnZT1NLk5PTkUsdGhpcy5fcGFnZVNwcmluZ1Bvc2l0aW9uPTAsdGhpcy5fZWRnZVNwcmluZ1Bvc2l0aW9uPTAsdGhpcy5fdG91Y2hWZWxvY2l0eT0wLHRoaXMuX2Vhcmx5RW5kPSExLHRoaXMuX25lZWRzUGFnaW5hdGlvbkNoZWNrPSExLHRoaXMuX2Rpc3BsYWNlbWVudD0wLHRoaXMuX3RvdGFsU2hpZnQ9MCx0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuX3Njcm9sbGVyLnBvc2l0aW9uRnJvbSh0aGlzLmdldFBvc2l0aW9uLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SW5wdXQ9bmV3IG0sdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IG0sdGhpcy5fZXZlbnRJbnB1dC5waXBlKHRoaXMuc3luYyksdGhpcy5zeW5jLnBpcGUodGhpcy5fZXZlbnRJbnB1dCksbS5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudElucHV0KSxtLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudE91dHB1dCksci5jYWxsKHRoaXMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KX1mdW5jdGlvbiBuKHQpe3RoaXMuX3RvdWNoQ291bnQ9dC5jb3VudCx2b2lkIDA9PT10LmNvdW50JiYodGhpcy5fdG91Y2hDb3VudD0xKSxoLmNhbGwodGhpcyksdGhpcy5zZXRWZWxvY2l0eSgwKSx0aGlzLl90b3VjaFZlbG9jaXR5PTAsdGhpcy5fZWFybHlFbmQ9ITF9ZnVuY3Rpb24gbyh0KXt2YXIgaT0tdC52ZWxvY2l0eSxlPS10LmRlbHRhO2lmKHRoaXMuX29uRWRnZSE9PU0uTk9ORSYmdC5zbGlwJiYoMD5pJiZ0aGlzLl9vbkVkZ2U9PT1NLlRPUHx8aT4wJiZ0aGlzLl9vbkVkZ2U9PT1NLkJPVFRPTT90aGlzLl9lYXJseUVuZHx8KHMuY2FsbCh0aGlzLHQpLHRoaXMuX2Vhcmx5RW5kPSEwKTp0aGlzLl9lYXJseUVuZCYmTWF0aC5hYnMoaSk+TWF0aC5hYnModGhpcy5nZXRWZWxvY2l0eSgpKSYmbi5jYWxsKHRoaXMsdCkpLCF0aGlzLl9lYXJseUVuZCl7aWYodGhpcy5fdG91Y2hWZWxvY2l0eT1pLHQuc2xpcCl7dmFyIG89dGhpcy5vcHRpb25zLnNwZWVkTGltaXQ7LW8+aT9pPS1vOmk+byYmKGk9byksdGhpcy5zZXRWZWxvY2l0eShpKTt2YXIgcj0xNipvO2U+cj9lPXI6LXI+ZSYmKGU9LXIpfXRoaXMuc2V0UG9zaXRpb24odGhpcy5nZXRQb3NpdGlvbigpK2UpLHRoaXMuX2Rpc3BsYWNlbWVudCs9ZSx0aGlzLl9zcHJpbmdTdGF0ZT09PXguTk9ORSYmZi5jYWxsKHRoaXMpfX1mdW5jdGlvbiBzKHQpe2lmKHRoaXMuX3RvdWNoQ291bnQ9dC5jb3VudHx8MCwhdGhpcy5fdG91Y2hDb3VudCl7aC5jYWxsKHRoaXMpLHRoaXMuX29uRWRnZSE9PU0uTk9ORSYmbC5jYWxsKHRoaXMsdGhpcy5fZWRnZVNwcmluZ1Bvc2l0aW9uLHguRURHRSksYS5jYWxsKHRoaXMpO3ZhciBpPS10LnZlbG9jaXR5LGU9dGhpcy5vcHRpb25zLnNwZWVkTGltaXQ7dC5zbGlwJiYoZSo9dGhpcy5vcHRpb25zLmVkZ2VHcmlwKSwtZT5pP2k9LWU6aT5lJiYoaT1lKSx0aGlzLnNldFZlbG9jaXR5KGkpLHRoaXMuX3RvdWNoVmVsb2NpdHk9MCx0aGlzLl9uZWVkc1BhZ2luYXRpb25DaGVjaz0hMH19ZnVuY3Rpb24gcigpe3RoaXMuX2V2ZW50SW5wdXQuYmluZFRoaXModGhpcyksdGhpcy5fZXZlbnRJbnB1dC5vbihcInN0YXJ0XCIsbiksdGhpcy5fZXZlbnRJbnB1dC5vbihcInVwZGF0ZVwiLG8pLHRoaXMuX2V2ZW50SW5wdXQub24oXCJlbmRcIixzKSx0aGlzLl9ldmVudElucHV0Lm9uKFwicmVzaXplXCIsZnVuY3Rpb24oKXt0aGlzLl9ub2RlLl8uY2FsY3VsYXRlU2l6ZSgpfS5iaW5kKHRoaXMpKSx0aGlzLl9zY3JvbGxlci5vbihcIm9uRWRnZVwiLGZ1bmN0aW9uKHQpe3RoaXMuX2VkZ2VTcHJpbmdQb3NpdGlvbj10LnBvc2l0aW9uLHAuY2FsbCh0aGlzLHRoaXMuX3Njcm9sbGVyLm9uRWRnZSgpKSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwib25FZGdlXCIpfS5iaW5kKHRoaXMpKSx0aGlzLl9zY3JvbGxlci5vbihcIm9mZkVkZ2VcIixmdW5jdGlvbigpe3RoaXMuc3luYy5zZXRPcHRpb25zKHtzY2FsZTp0aGlzLm9wdGlvbnMuc3luY1NjYWxlfSksdGhpcy5fb25FZGdlPXRoaXMuX3Njcm9sbGVyLm9uRWRnZSgpLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJvZmZFZGdlXCIpfS5iaW5kKHRoaXMpKSx0aGlzLl9wYXJ0aWNsZS5vbihcInVwZGF0ZVwiLGZ1bmN0aW9uKHQpe3RoaXMuX3NwcmluZ1N0YXRlPT09eC5OT05FJiZmLmNhbGwodGhpcyksdGhpcy5fZGlzcGxhY2VtZW50PXQucG9zaXRpb24ueC10aGlzLl90b3RhbFNoaWZ0fS5iaW5kKHRoaXMpKSx0aGlzLl9wYXJ0aWNsZS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7KCF0aGlzLm9wdGlvbnMucGFnaW5hdGVkfHx0aGlzLm9wdGlvbnMucGFnaW5hdGVkJiZ0aGlzLl9zcHJpbmdTdGF0ZSE9PXguTk9ORSkmJnRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJzZXR0bGVcIil9LmJpbmQodGhpcykpfWZ1bmN0aW9uIGEoKXt0aGlzLl9zcHJpbmdTdGF0ZT90aGlzLl9waHlzaWNzRW5naW5lLmF0dGFjaChbdGhpcy5zcHJpbmddLHRoaXMuX3BhcnRpY2xlKTp0aGlzLl9waHlzaWNzRW5naW5lLmF0dGFjaChbdGhpcy5kcmFnLHRoaXMuZnJpY3Rpb25dLHRoaXMuX3BhcnRpY2xlKX1mdW5jdGlvbiBoKCl7dGhpcy5fc3ByaW5nU3RhdGU9eC5OT05FLHRoaXMuX3BoeXNpY3NFbmdpbmUuZGV0YWNoQWxsKCl9ZnVuY3Rpb24gYyh0KXt2YXIgaT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uLGU9dC5nZXRTaXplKCk7cmV0dXJuIGU/ZVtpXTp0aGlzLl9zY3JvbGxlci5nZXRTaXplKClbaV19ZnVuY3Rpb24gcCh0KXt0aGlzLnN5bmMuc2V0T3B0aW9ucyh7c2NhbGU6dGhpcy5vcHRpb25zLmVkZ2VHcmlwfSksdGhpcy5fb25FZGdlPXQsdGhpcy5fdG91Y2hDb3VudHx8dGhpcy5fc3ByaW5nU3RhdGU9PT14LkVER0V8fGwuY2FsbCh0aGlzLHRoaXMuX2VkZ2VTcHJpbmdQb3NpdGlvbix4LkVER0UpLHRoaXMuX3NwcmluZ1N0YXRlJiZNYXRoLmFicyh0aGlzLmdldFZlbG9jaXR5KCkpPC4wMDEmJihoLmNhbGwodGhpcyksYS5jYWxsKHRoaXMpKX1mdW5jdGlvbiB1KCl7aWYoIXRoaXMuX3RvdWNoQ291bnQmJnRoaXMuX3NwcmluZ1N0YXRlIT09eC5FREdFKXt2YXIgdD10aGlzLmdldFZlbG9jaXR5KCk7aWYoIShNYXRoLmFicyh0KT49dGhpcy5vcHRpb25zLnBhZ2VTdG9wU3BlZWQpKXt2YXIgaT10aGlzLmdldFBvc2l0aW9uKCksZT1NYXRoLmFicyh0KT50aGlzLm9wdGlvbnMucGFnZVN3aXRjaFNwZWVkLG49Yy5jYWxsKHRoaXMsdGhpcy5fbm9kZSksbz1pPi41Km4scz10PjAscj0wPnQ7dGhpcy5fbmVlZHNQYWdpbmF0aW9uQ2hlY2s9ITEsbyYmIWV8fGUmJnM/dGhpcy5nb1RvTmV4dFBhZ2UoKTplJiZyP3RoaXMuZ29Ub1ByZXZpb3VzUGFnZSgpOmwuY2FsbCh0aGlzLDAseC5QQUdFKX19fWZ1bmN0aW9uIGwodCxpKXt2YXIgZTtpPT09eC5FREdFPyh0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb249dCxlPXthbmNob3I6W3RoaXMuX2VkZ2VTcHJpbmdQb3NpdGlvbiwwLDBdLHBlcmlvZDp0aGlzLm9wdGlvbnMuZWRnZVBlcmlvZCxkYW1waW5nUmF0aW86dGhpcy5vcHRpb25zLmVkZ2VEYW1wfSk6aT09PXguUEFHRSYmKHRoaXMuX3BhZ2VTcHJpbmdQb3NpdGlvbj10LGU9e2FuY2hvcjpbdGhpcy5fcGFnZVNwcmluZ1Bvc2l0aW9uLDAsMF0scGVyaW9kOnRoaXMub3B0aW9ucy5wYWdlUGVyaW9kLGRhbXBpbmdSYXRpbzp0aGlzLm9wdGlvbnMucGFnZURhbXB9KSx0aGlzLnNwcmluZy5zZXRPcHRpb25zKGUpLGkmJiF0aGlzLl9zcHJpbmdTdGF0ZSYmKGguY2FsbCh0aGlzKSx0aGlzLl9zcHJpbmdTdGF0ZT1pLGEuY2FsbCh0aGlzKSksdGhpcy5fc3ByaW5nU3RhdGU9aX1mdW5jdGlvbiBmKCl7dmFyIHQ9MCxpPXRoaXMuZ2V0UG9zaXRpb24oKTtpKz0oMD5pPy0uNTouNSk+PjA7Zm9yKHZhciBlPWMuY2FsbCh0aGlzLHRoaXMuX25vZGUpLG49dGhpcy5fbm9kZS5nZXROZXh0KCk7dCtpPj1lJiZuOyl0LT1lLHRoaXMuX3Njcm9sbGVyLnNlcXVlbmNlRnJvbShuKSx0aGlzLl9ub2RlPW4sbj10aGlzLl9ub2RlLmdldE5leHQoKSxlPWMuY2FsbCh0aGlzLHRoaXMuX25vZGUpO2Zvcih2YXIgbyxzPXRoaXMuX25vZGUuZ2V0UHJldmlvdXMoKTswPj10K2kmJnM7KW89Yy5jYWxsKHRoaXMscyksdGhpcy5fc2Nyb2xsZXIuc2VxdWVuY2VGcm9tKHMpLHRoaXMuX25vZGU9cyx0Kz1vLHM9dGhpcy5fbm9kZS5nZXRQcmV2aW91cygpO3QmJmQuY2FsbCh0aGlzLHQpLHRoaXMuX25vZGUmJih0aGlzLl9ub2RlLmluZGV4IT09dGhpcy5fY2FjaGVkSW5kZXg/dGhpcy5nZXRQb3NpdGlvbigpPC41KmUmJih0aGlzLl9jYWNoZWRJbmRleD10aGlzLl9ub2RlLmluZGV4LHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJwYWdlQ2hhbmdlXCIse2RpcmVjdGlvbjotMSxpbmRleDp0aGlzLl9jYWNoZWRJbmRleH0pKTp0aGlzLmdldFBvc2l0aW9uKCk+LjUqZSYmKHRoaXMuX2NhY2hlZEluZGV4PXRoaXMuX25vZGUuaW5kZXgrMSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwicGFnZUNoYW5nZVwiLHtkaXJlY3Rpb246MSxpbmRleDp0aGlzLl9jYWNoZWRJbmRleH0pKSl9ZnVuY3Rpb24gZCh0KXt0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb24rPXQsdGhpcy5fcGFnZVNwcmluZ1Bvc2l0aW9uKz10LHRoaXMuc2V0UG9zaXRpb24odGhpcy5nZXRQb3NpdGlvbigpK3QpLHRoaXMuX3RvdGFsU2hpZnQrPXQsdGhpcy5fc3ByaW5nU3RhdGU9PT14LkVER0U/dGhpcy5zcHJpbmcuc2V0T3B0aW9ucyh7YW5jaG9yOlt0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb24sMCwwXX0pOnRoaXMuX3NwcmluZ1N0YXRlPT09eC5QQUdFJiZ0aGlzLnNwcmluZy5zZXRPcHRpb25zKHthbmNob3I6W3RoaXMuX3BhZ2VTcHJpbmdQb3NpdGlvbiwwLDBdfSl9dmFyIF89dChcIi4uL3BoeXNpY3MvUGh5c2ljc0VuZ2luZVwiKSx5PXQoXCIuLi9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZVwiKSxnPXQoXCIuLi9waHlzaWNzL2ZvcmNlcy9EcmFnXCIpLHY9dChcIi4uL3BoeXNpY3MvZm9yY2VzL1NwcmluZ1wiKSxtPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxPPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpLFM9dChcIi4uL2NvcmUvVmlld1NlcXVlbmNlXCIpLFQ9dChcIi4uL3ZpZXdzL1Njcm9sbGVyXCIpLHc9dChcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCIpLGI9dChcIi4uL2lucHV0cy9HZW5lcmljU3luY1wiKSxFPXQoXCIuLi9pbnB1dHMvU2Nyb2xsU3luY1wiKSxJPXQoXCIuLi9pbnB1dHMvVG91Y2hTeW5jXCIpO2IucmVnaXN0ZXIoe3Njcm9sbDpFLHRvdWNoOkl9KTt2YXIgeD17Tk9ORTowLEVER0U6MSxQQUdFOjJ9LE09e1RPUDotMSxOT05FOjAsQk9UVE9NOjF9O2UuREVGQVVMVF9PUFRJT05TPXtkaXJlY3Rpb246dy5EaXJlY3Rpb24uWSxyYWlsczohMCxmcmljdGlvbjouMDA1LGRyYWc6MWUtNCxlZGdlR3JpcDouMixlZGdlUGVyaW9kOjMwMCxlZGdlRGFtcDoxLG1hcmdpbjoxZTMscGFnaW5hdGVkOiExLHBhZ2VQZXJpb2Q6NTAwLHBhZ2VEYW1wOi44LHBhZ2VTdG9wU3BlZWQ6MTAscGFnZVN3aXRjaFNwZWVkOi41LHNwZWVkTGltaXQ6NSxncm91cFNjcm9sbDohMSxzeW5jU2NhbGU6MX0sZS5wcm90b3R5cGUuZ2V0Q3VycmVudEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGUuaW5kZXh9LGUucHJvdG90eXBlLmdvVG9QcmV2aW91c1BhZ2U9ZnVuY3Rpb24oKXtpZighdGhpcy5fbm9kZXx8dGhpcy5fb25FZGdlPT09TS5UT1ApcmV0dXJuIG51bGw7aWYodGhpcy5nZXRQb3NpdGlvbigpPjEmJnRoaXMuX3NwcmluZ1N0YXRlPT09eC5OT05FKXJldHVybiBsLmNhbGwodGhpcywwLHguUEFHRSksdGhpcy5fbm9kZTt2YXIgdD10aGlzLl9ub2RlLmdldFByZXZpb3VzKCk7aWYodCl7dmFyIGk9Yy5jYWxsKHRoaXMsdCk7dGhpcy5fc2Nyb2xsZXIuc2VxdWVuY2VGcm9tKHQpLHRoaXMuX25vZGU9dCxkLmNhbGwodGhpcyxpKSxsLmNhbGwodGhpcywwLHguUEFHRSl9cmV0dXJuIHR9LGUucHJvdG90eXBlLmdvVG9OZXh0UGFnZT1mdW5jdGlvbigpe2lmKCF0aGlzLl9ub2RlfHx0aGlzLl9vbkVkZ2U9PT1NLkJPVFRPTSlyZXR1cm4gbnVsbDt2YXIgdD10aGlzLl9ub2RlLmdldE5leHQoKTtpZih0KXt2YXIgaT1jLmNhbGwodGhpcyx0aGlzLl9ub2RlKTt0aGlzLl9zY3JvbGxlci5zZXF1ZW5jZUZyb20odCksdGhpcy5fbm9kZT10LGQuY2FsbCh0aGlzLC1pKSxsLmNhbGwodGhpcywwLHguUEFHRSl9cmV0dXJuIHR9LGUucHJvdG90eXBlLmdvVG9QYWdlPWZ1bmN0aW9uKHQpe3ZhciBpLGU9dGhpcy5nZXRDdXJyZW50SW5kZXgoKTtpZihlPnQpZm9yKGk9MDtlLXQ+aTtpKyspdGhpcy5nb1RvUHJldmlvdXNQYWdlKCk7aWYodD5lKWZvcihpPTA7dC1lPmk7aSsrKXRoaXMuZ29Ub05leHRQYWdlKCl9LGUucHJvdG90eXBlLm91dHB1dEZyb209ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsZXIub3V0cHV0RnJvbS5hcHBseSh0aGlzLl9zY3JvbGxlcixhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWNsZS5nZXRQb3NpdGlvbjFEKCl9LGUucHJvdG90eXBlLmdldEFic29sdXRlUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsZXIuZ2V0Q3VtdWxhdGl2ZVNpemUodGhpcy5nZXRDdXJyZW50SW5kZXgoKSlbdGhpcy5vcHRpb25zLmRpcmVjdGlvbl0rdGhpcy5nZXRQb3NpdGlvbigpfSxlLnByb3RvdHlwZS5nZXRPZmZzZXQ9ZS5wcm90b3R5cGUuZ2V0UG9zaXRpb24sZS5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24odCl7dGhpcy5fcGFydGljbGUuc2V0UG9zaXRpb24xRCh0KX0sZS5wcm90b3R5cGUuc2V0T2Zmc2V0PWUucHJvdG90eXBlLnNldFBvc2l0aW9uLGUucHJvdG90eXBlLmdldFZlbG9jaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvdWNoQ291bnQ/dGhpcy5fdG91Y2hWZWxvY2l0eTp0aGlzLl9wYXJ0aWNsZS5nZXRWZWxvY2l0eTFEKCl9LGUucHJvdG90eXBlLnNldFZlbG9jaXR5PWZ1bmN0aW9uKHQpe3RoaXMuX3BhcnRpY2xlLnNldFZlbG9jaXR5MUQodCl9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dm9pZCAwIT09dC5kaXJlY3Rpb24mJihcInhcIj09PXQuZGlyZWN0aW9uP3QuZGlyZWN0aW9uPXcuRGlyZWN0aW9uLlg6XCJ5XCI9PT10LmRpcmVjdGlvbiYmKHQuZGlyZWN0aW9uPXcuRGlyZWN0aW9uLlkpKSx0Lmdyb3VwU2Nyb2xsIT09dGhpcy5vcHRpb25zLmdyb3VwU2Nyb2xsJiYodC5ncm91cFNjcm9sbD90aGlzLnN1YnNjcmliZSh0aGlzLl9zY3JvbGxlcik6dGhpcy51bnN1YnNjcmliZSh0aGlzLl9zY3JvbGxlcikpLHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCksdGhpcy5fc2Nyb2xsZXIuc2V0T3B0aW9ucyh0KSx2b2lkIDAhPT10LmRyYWcmJnRoaXMuZHJhZy5zZXRPcHRpb25zKHtzdHJlbmd0aDp0aGlzLm9wdGlvbnMuZHJhZ30pLHZvaWQgMCE9PXQuZnJpY3Rpb24mJnRoaXMuZnJpY3Rpb24uc2V0T3B0aW9ucyh7c3RyZW5ndGg6dGhpcy5vcHRpb25zLmZyaWN0aW9ufSksKHZvaWQgMCE9PXQuZWRnZVBlcmlvZHx8dm9pZCAwIT09dC5lZGdlRGFtcCkmJnRoaXMuc3ByaW5nLnNldE9wdGlvbnMoe3BlcmlvZDp0aGlzLm9wdGlvbnMuZWRnZVBlcmlvZCxkYW1waW5nUmF0aW86dGhpcy5vcHRpb25zLmVkZ2VEYW1wfSksKHQucmFpbHN8fHZvaWQgMCE9PXQuZGlyZWN0aW9ufHx2b2lkIDAhPT10LnN5bmNTY2FsZXx8dC5wcmV2ZW50RGVmYXVsdCkmJnRoaXMuc3luYy5zZXRPcHRpb25zKHtyYWlsczp0aGlzLm9wdGlvbnMucmFpbHMsZGlyZWN0aW9uOnRoaXMub3B0aW9ucy5kaXJlY3Rpb249PT13LkRpcmVjdGlvbi5YP2IuRElSRUNUSU9OX1g6Yi5ESVJFQ1RJT05fWSxzY2FsZTp0aGlzLm9wdGlvbnMuc3luY1NjYWxlLHByZXZlbnREZWZhdWx0OnRoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdH0pfSxlLnByb3RvdHlwZS5zZXF1ZW5jZUZyb209ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBBcnJheSYmKHQ9bmV3IFMoe2FycmF5OnQsdHJhY2tTaXplOiEwfSkpLHRoaXMuX25vZGU9dCx0aGlzLl9zY3JvbGxlci5zZXF1ZW5jZUZyb20odCl9LGUucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsZXIuZ2V0U2l6ZS5hcHBseSh0aGlzLl9zY3JvbGxlcixhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnBhZ2luYXRlZCYmdGhpcy5fbmVlZHNQYWdpbmF0aW9uQ2hlY2smJnUuY2FsbCh0aGlzKSx0aGlzLl9zY3JvbGxlci5yZW5kZXIoKX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvVmlld1NlcXVlbmNlXCI6MTcsXCIuLi9pbnB1dHMvR2VuZXJpY1N5bmNcIjoyNyxcIi4uL2lucHV0cy9TY3JvbGxTeW5jXCI6MzIsXCIuLi9pbnB1dHMvVG91Y2hTeW5jXCI6MzMsXCIuLi9waHlzaWNzL1BoeXNpY3NFbmdpbmVcIjo0OCxcIi4uL3BoeXNpY3MvYm9kaWVzL1BhcnRpY2xlXCI6NTEsXCIuLi9waHlzaWNzL2ZvcmNlcy9EcmFnXCI6NjMsXCIuLi9waHlzaWNzL2ZvcmNlcy9TcHJpbmdcIjo2OCxcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTUsXCIuLi92aWV3cy9TY3JvbGxlclwiOjEwOH1dLDExMDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuX2l0ZW1zPW51bGwsdGhpcy5fc2l6ZT1udWxsLHRoaXMuX291dHB1dEZ1bmN0aW9uPWUuREVGQVVMVF9PVVRQVVRfRlVOQ1RJT04sdGhpcy5vcHRpb25zPXIuY2xvbmUodGhpcy5jb25zdHJ1Y3Rvci5ERUZBVUxUX09QVElPTlN8fGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLm9wdGlvbnNNYW5hZ2VyPW5ldyBuKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpfXZhciBuPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpLG89dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLHM9dChcIi4uL2NvcmUvVmlld1NlcXVlbmNlXCIpLHI9dChcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCIpO2UuREVGQVVMVF9PUFRJT05TPXtkaXJlY3Rpb246ci5EaXJlY3Rpb24uWSxpdGVtU3BhY2luZzowfSxlLkRFRkFVTFRfT1VUUFVUX0ZVTkNUSU9OPWZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PXIuRGlyZWN0aW9uLlg/by50cmFuc2xhdGUoaSwwKTpvLnRyYW5zbGF0ZSgwLGkpO3JldHVybnt0cmFuc2Zvcm06ZSx0YXJnZXQ6dC5yZW5kZXIoKX19LGUucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2l6ZXx8dGhpcy5yZW5kZXIoKSx0aGlzLl9zaXplfSxlLnByb3RvdHlwZS5zZXF1ZW5jZUZyb209ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBBcnJheSYmKHQ9bmV3IHModCkpLHRoaXMuX2l0ZW1zPXQsdGhpc30sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnMuYXBwbHkodGhpcy5vcHRpb25zTWFuYWdlcixhcmd1bWVudHMpLHRoaXN9LGUucHJvdG90eXBlLnNldE91dHB1dEZ1bmN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vdXRwdXRGdW5jdGlvbj10LHRoaXN9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciB0PTAsaT0xXnRoaXMub3B0aW9ucy5kaXJlY3Rpb24sZT10aGlzLl9pdGVtcyxuPW51bGwsbz1bXSxzPXt9LHI9W10sYT0wO2Zvcih0aGlzLl9zaXplPVswLDBdO2UmJihuPWUuZ2V0KCkpOyluLmdldFNpemUmJihvPW4uZ2V0U2l6ZSgpKSxzPXRoaXMuX291dHB1dEZ1bmN0aW9uLmNhbGwodGhpcyxuLHQsYSsrKSxyLnB1c2gocyksbyYmKG9bdGhpcy5vcHRpb25zLmRpcmVjdGlvbl0mJih0Kz1vW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dKSxvW2ldPnRoaXMuX3NpemVbaV0mJih0aGlzLl9zaXplW2ldPW9baV0pKSxlPWUuZ2V0TmV4dCgpLHRoaXMub3B0aW9ucy5pdGVtU3BhY2luZyYmZSYmKHQrPXRoaXMub3B0aW9ucy5pdGVtU3BhY2luZyk7cmV0dXJuIHRoaXMuX3NpemVbdGhpcy5vcHRpb25zLmRpcmVjdGlvbl09dCxyfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL2NvcmUvVmlld1NlcXVlbmNlXCI6MTcsXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiOjk1fV0sMTExOltmdW5jdGlvbih0LGkpe2kuZXhwb3J0cz17Q29udGV4dHVhbFZpZXc6dChcIi4vQ29udGV4dHVhbFZpZXdcIiksRGVjazp0KFwiLi9EZWNrXCIpLEVkZ2VTd2FwcGVyOnQoXCIuL0VkZ2VTd2FwcGVyXCIpLERyYXdlckxheW91dDp0KFwiLi9EcmF3ZXJMYXlvdXRcIiksRmxleGlibGVMYXlvdXQ6dChcIi4vRmxleGlibGVMYXlvdXRcIiksRmxpcHBlcjp0KFwiLi9GbGlwcGVyXCIpLEdyaWRMYXlvdXQ6dChcIi4vR3JpZExheW91dFwiKSxIZWFkZXJGb290ZXJMYXlvdXQ6dChcIi4vSGVhZGVyRm9vdGVyTGF5b3V0XCIpLExpZ2h0Ym94OnQoXCIuL0xpZ2h0Ym94XCIpLFJlbmRlckNvbnRyb2xsZXI6dChcIi4vUmVuZGVyQ29udHJvbGxlclwiKSxTY3JvbGxDb250YWluZXI6dChcIi4vU2Nyb2xsQ29udGFpbmVyXCIpLFNjcm9sbGVyOnQoXCIuL1Njcm9sbGVyXCIpLFNjcm9sbHZpZXc6dChcIi4vU2Nyb2xsdmlld1wiKSxTZXF1ZW50aWFsTGF5b3V0OnQoXCIuL1NlcXVlbnRpYWxMYXlvdXRcIil9fSx7XCIuL0NvbnRleHR1YWxWaWV3XCI6OTcsXCIuL0RlY2tcIjo5OCxcIi4vRHJhd2VyTGF5b3V0XCI6OTksXCIuL0VkZ2VTd2FwcGVyXCI6MTAwLFwiLi9GbGV4aWJsZUxheW91dFwiOjEwMSxcIi4vRmxpcHBlclwiOjEwMixcIi4vR3JpZExheW91dFwiOjEwMyxcIi4vSGVhZGVyRm9vdGVyTGF5b3V0XCI6MTA0LFwiLi9MaWdodGJveFwiOjEwNSxcIi4vUmVuZGVyQ29udHJvbGxlclwiOjEwNixcIi4vU2Nyb2xsQ29udGFpbmVyXCI6MTA3LFwiLi9TY3JvbGxlclwiOjEwOCxcIi4vU2Nyb2xsdmlld1wiOjEwOSxcIi4vU2VxdWVudGlhbExheW91dFwiOjExMH1dLDExMjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7ci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy50aXRsZT1uZXcgbyh7Y2xhc3Nlczp0aGlzLm9wdGlvbnMuY2xhc3Nlcyxjb250ZW50OnRoaXMub3B0aW9ucy5jb250ZW50fSksdGhpcy5iYWNrPW5ldyBvKHtzaXplOlt0aGlzLm9wdGlvbnMuc2l6ZVsxXSx0aGlzLm9wdGlvbnMuc2l6ZVsxXV0sY2xhc3Nlczp0aGlzLm9wdGlvbnMuY2xhc3Nlcyxjb250ZW50OnRoaXMub3B0aW9ucy5iYWNrQ29udGVudH0pLHRoaXMuYmFjay5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXt0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwiYmFja1wiLHt9KX0uYmluZCh0aGlzKSksdGhpcy5tb3JlPW5ldyBvKHtzaXplOlt0aGlzLm9wdGlvbnMuc2l6ZVsxXSx0aGlzLm9wdGlvbnMuc2l6ZVsxXV0sY2xhc3Nlczp0aGlzLm9wdGlvbnMuY2xhc3Nlcyxjb250ZW50OnRoaXMub3B0aW9ucy5tb3JlQ29udGVudH0pLHRoaXMubW9yZS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXt0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwibW9yZVwiLHt9KX0uYmluZCh0aGlzKSksdGhpcy5sYXlvdXQ9bmV3IG4oe2lkOlwibWFzdGVyXCIsc2l6ZTp0aGlzLm9wdGlvbnMuc2l6ZSx0YXJnZXQ6W3t0cmFuc2Zvcm06cy5pbkZyb250LG9yaWdpbjpbMCwuNV0sdGFyZ2V0OnRoaXMuYmFja30se29yaWdpbjpbLjUsLjVdLHRhcmdldDp0aGlzLnRpdGxlfSx7dHJhbnNmb3JtOnMuaW5Gcm9udCxvcmlnaW46WzEsLjVdLHRhcmdldDp0aGlzLm1vcmV9XX0pLHRoaXMuX2FkZCh0aGlzLmxheW91dCksdGhpcy5fb3B0aW9uc01hbmFnZXIub24oXCJjaGFuZ2VcIixmdW5jdGlvbih0KXt2YXIgaT10LmlkLGU9dC52YWx1ZTtcInNpemVcIj09PWk/KHRoaXMubGF5b3V0LmlkLm1hc3Rlci5zZXRTaXplKGUpLHRoaXMudGl0bGUuc2V0U2l6ZShlKSx0aGlzLmJhY2suc2V0U2l6ZShbZVsxXSxlWzFdXSksdGhpcy5tb3JlLnNldFNpemUoW2VbMV0sZVsxXV0pKTpcImJhY2tDbGFzc2VzXCI9PT1pP3RoaXMuYmFjay5zZXRPcHRpb25zKHtjbGFzc2VzOnRoaXMub3B0aW9ucy5jbGFzc2VzLmNvbmNhdCh0aGlzLm9wdGlvbnMuYmFja0NsYXNzZXMpfSk6XCJiYWNrQ29udGVudFwiPT09aT90aGlzLmJhY2suc2V0Q29udGVudCh0aGlzLm9wdGlvbnMuYmFja0NvbnRlbnQpOlwiY2xhc3Nlc1wiPT09aT8odGhpcy50aXRsZS5zZXRPcHRpb25zKHtjbGFzc2VzOnRoaXMub3B0aW9ucy5jbGFzc2VzfSksdGhpcy5iYWNrLnNldE9wdGlvbnMoe2NsYXNzZXM6dGhpcy5vcHRpb25zLmNsYXNzZXMuY29uY2F0KHRoaXMub3B0aW9ucy5iYWNrQ2xhc3Nlcyl9KSx0aGlzLm1vcmUuc2V0T3B0aW9ucyh7Y2xhc3Nlczp0aGlzLm9wdGlvbnMuY2xhc3Nlcy5jb25jYXQodGhpcy5vcHRpb25zLm1vcmVDbGFzc2VzKX0pKTpcImNvbnRlbnRcIj09PWk/dGhpcy5zZXRDb250ZW50KHRoaXMub3B0aW9ucy5jb250ZW50KTpcIm1vcmVDbGFzc2VzXCI9PT1pP3RoaXMubW9yZS5zZXRPcHRpb25zKHtjbGFzc2VzOnRoaXMub3B0aW9ucy5jbGFzc2VzLmNvbmNhdCh0aGlzLm9wdGlvbnMubW9yZUNsYXNzZXMpfSk6XCJtb3JlQ29udGVudFwiPT09aSYmdGhpcy5tb3JlLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmNvbnRlbnQpfS5iaW5kKHRoaXMpKX12YXIgbj10KFwiLi4vY29yZS9TY2VuZVwiKSxvPXQoXCIuLi9jb3JlL1N1cmZhY2VcIikscz10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIikscj10KFwiLi4vY29yZS9WaWV3XCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e3NpemU6W3ZvaWQgMCw1MF0sYmFja0NsYXNzZXM6W1wiYmFja1wiXSxiYWNrQ29udGVudDpcIiYjeDI1YzA7XCIsY2xhc3NlczpbXCJuYXZpZ2F0aW9uXCJdLGNvbnRlbnQ6XCJcIixtb3JlQ2xhc3NlczpbXCJtb3JlXCJdLG1vcmVDb250ZW50OlwiJiN4MjcxYTtcIn0sZS5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aXRsZS5zZXRDb250ZW50KHQpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9TY2VuZVwiOjEyLFwiLi4vY29yZS9TdXJmYWNlXCI6MTQsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vY29yZS9WaWV3XCI6MTZ9XSwxMTM6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5vcHRpb25zTWFuYWdlcj1uZXcgYyh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLmluZGljYXRvcj1uZXcgcyh7c2l6ZTp0aGlzLm9wdGlvbnMuaW5kaWNhdG9yU2l6ZSxjbGFzc2VzOltcInNsaWRlci1iYWNrXCJdfSksdGhpcy5sYWJlbD1uZXcgbyh7c2l6ZTp0aGlzLm9wdGlvbnMubGFiZWxTaXplLGNvbnRlbnQ6dGhpcy5vcHRpb25zLmxhYmVsLHByb3BlcnRpZXM6e3BvaW50ZXJFdmVudHM6XCJub25lXCJ9LGNsYXNzZXM6W1wic2xpZGVyLWxhYmVsXCJdfSksdGhpcy5ldmVudE91dHB1dD1uZXcgYSx0aGlzLmV2ZW50SW5wdXQ9bmV3IGEsYS5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLmV2ZW50SW5wdXQpLGEuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuZXZlbnRPdXRwdXQpO3ZhciBpPSh0aGlzLm9wdGlvbnMucmFuZ2VbMV0tdGhpcy5vcHRpb25zLnJhbmdlWzBdKS90aGlzLm9wdGlvbnMuaW5kaWNhdG9yU2l6ZVswXTt0aGlzLnN5bmM9bmV3IGwoW1wibW91c2VcIixcInRvdWNoXCJdLHtzY2FsZTppLGRpcmVjdGlvbjpsLkRJUkVDVElPTl9YfSksdGhpcy5pbmRpY2F0b3IucGlwZSh0aGlzLnN5bmMpLHRoaXMuc3luYy5waXBlKHRoaXMpLHRoaXMuZXZlbnRJbnB1dC5vbihcInVwZGF0ZVwiLGZ1bmN0aW9uKHQpe3RoaXMuc2V0KHQucG9zaXRpb24pfS5iaW5kKHRoaXMpKSx0aGlzLl9kcmF3UG9zPTAsbi5jYWxsKHRoaXMpfWZ1bmN0aW9uIG4oKXt0aGlzLmxhYmVsLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmxhYmVsKyc8c3BhbiBzdHlsZT1cImZsb2F0OiByaWdodFwiPicrdGhpcy5nZXQoKS50b0ZpeGVkKHRoaXMub3B0aW9ucy5wcmVjaXNpb24pK1wiPC9zcGFuPlwiKX12YXIgbz10KFwiLi4vY29yZS9TdXJmYWNlXCIpLHM9dChcIi4uL3N1cmZhY2VzL0NhbnZhc1N1cmZhY2VcIikscj10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIiksYT10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksaD10KFwiLi4vbWF0aC9VdGlsaXRpZXNcIiksYz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSxwPXQoXCIuLi9pbnB1dHMvTW91c2VTeW5jXCIpLHU9dChcIi4uL2lucHV0cy9Ub3VjaFN5bmNcIiksbD10KFwiLi4vaW5wdXRzL0dlbmVyaWNTeW5jXCIpO2wucmVnaXN0ZXIoe21vdXNlOnAsdG91Y2g6dX0pLGUuREVGQVVMVF9PUFRJT05TPXtzaXplOlsyMDAsNjBdLGluZGljYXRvclNpemU6WzIwMCwzMF0sbGFiZWxTaXplOlsyMDAsMzBdLHJhbmdlOlswLDFdLHByZWNpc2lvbjoyLHZhbHVlOjAsbGFiZWw6XCJcIixmaWxsQ29sb3I6XCJyZ2JhKDE3MCwgMTcwLCAxNzAsIDEpXCJ9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy52YWx1ZX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe3QhPT10aGlzLm9wdGlvbnMudmFsdWUmJih0aGlzLm9wdGlvbnMudmFsdWU9aC5jbGFtcCh0LHRoaXMub3B0aW9ucy5yYW5nZSksbi5jYWxsKHRoaXMpLHRoaXMuZXZlbnRPdXRwdXQuZW1pdChcImNoYW5nZVwiLHt2YWx1ZTp0fSkpfSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5zaXplfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMucmFuZ2UsaT1NYXRoLmZsb29yKCh0aGlzLmdldCgpLXRbMF0pLyh0WzFdLXRbMF0pKnRoaXMub3B0aW9ucy5pbmRpY2F0b3JTaXplWzBdKTtpZihpPHRoaXMuX2RyYXdQb3MpdGhpcy5pbmRpY2F0b3IuZ2V0Q29udGV4dChcIjJkXCIpLmNsZWFyUmVjdChpLDAsdGhpcy5fZHJhd1Bvcy1pKzEsdGhpcy5vcHRpb25zLmluZGljYXRvclNpemVbMV0pO2Vsc2UgaWYoaT50aGlzLl9kcmF3UG9zKXt2YXIgZT10aGlzLmluZGljYXRvci5nZXRDb250ZXh0KFwiMmRcIik7ZS5maWxsU3R5bGU9dGhpcy5vcHRpb25zLmZpbGxDb2xvcixlLmZpbGxSZWN0KHRoaXMuX2RyYXdQb3MtMSwwLGktdGhpcy5fZHJhd1BvcysxLHRoaXMub3B0aW9ucy5pbmRpY2F0b3JTaXplWzFdKX1yZXR1cm4gdGhpcy5fZHJhd1Bvcz1pLHtzaXplOnRoaXMub3B0aW9ucy5zaXplLHRhcmdldDpbe29yaWdpbjpbMCwwXSx0YXJnZXQ6dGhpcy5pbmRpY2F0b3IucmVuZGVyKCl9LHt0cmFuc2Zvcm06ci50cmFuc2xhdGUoMCwwLDEpLG9yaWdpbjpbMCwwXSx0YXJnZXQ6dGhpcy5sYWJlbC5yZW5kZXIoKX1dfX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvU3VyZmFjZVwiOjE0LFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL2lucHV0cy9HZW5lcmljU3luY1wiOjI3LFwiLi4vaW5wdXRzL01vdXNlU3luY1wiOjI4LFwiLi4vaW5wdXRzL1RvdWNoU3luY1wiOjMzLFwiLi4vbWF0aC9VdGlsaXRpZXNcIjo0MCxcIi4uL3N1cmZhY2VzL0NhbnZhc1N1cmZhY2VcIjo3NH1dLDExNDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7ci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5sYXlvdXQ9bmV3IGEsdGhpcy5idXR0b25zPVtdLHRoaXMuX2J1dHRvbklkcz17fSx0aGlzLl9idXR0b25DYWxsYmFja3M9e30sdGhpcy5sYXlvdXQuc2VxdWVuY2VGcm9tKHRoaXMuYnV0dG9ucyksdGhpcy5fYWRkKHRoaXMubGF5b3V0KSx0aGlzLl9vcHRpb25zTWFuYWdlci5vbihcImNoYW5nZVwiLG4uYmluZCh0aGlzKSl9ZnVuY3Rpb24gbih0KXt2YXIgaT10LmlkLGU9dC52YWx1ZTtpZihcImRpcmVjdGlvblwiPT09aSl0aGlzLmxheW91dC5zZXRPcHRpb25zKHtkaW1lbnNpb25zOm8uY2FsbCh0aGlzLmJ1dHRvbnMubGVuZ3RoLHRoaXMub3B0aW9ucy5kaXJlY3Rpb24pfSk7ZWxzZSBpZihcImJ1dHRvbnNcIj09PWkpZm9yKHZhciBuIGluIHRoaXMuYnV0dG9ucyl0aGlzLmJ1dHRvbnNbbl0uc2V0T3B0aW9ucyhlKTtlbHNlIGlmKFwic2VjdGlvbnNcIj09PWkpZm9yKHZhciBzIGluIHRoaXMub3B0aW9ucy5zZWN0aW9ucyl0aGlzLmRlZmluZVNlY3Rpb24ocyx0aGlzLm9wdGlvbnMuc2VjdGlvbnNbc10pfWZ1bmN0aW9uIG8odCxpKXtyZXR1cm4gaT09PXMuRGlyZWN0aW9uLlg/W3QsMV06WzEsdF19dmFyIHM9dChcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCIpLHI9dChcIi4uL2NvcmUvVmlld1wiKSxhPXQoXCIuLi92aWV3cy9HcmlkTGF5b3V0XCIpLGg9dChcIi4vVG9nZ2xlQnV0dG9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e3NlY3Rpb25zOltdLHdpZGdldDpoLHNpemU6W3ZvaWQgMCw1MF0sZGlyZWN0aW9uOnMuRGlyZWN0aW9uLlgsYnV0dG9uczp7dG9nZ2xlTW9kZTpoLk9OfX0sZS5wcm90b3R5cGUuZGVmaW5lU2VjdGlvbj1mdW5jdGlvbih0LGkpe3ZhciBlLG49dGhpcy5fYnV0dG9uSWRzW3RdO2lmKHZvaWQgMD09PW4pe249dGhpcy5idXR0b25zLmxlbmd0aCx0aGlzLl9idXR0b25JZHNbdF09bjt2YXIgcz10aGlzLm9wdGlvbnMud2lkZ2V0O2U9bmV3IHMsdGhpcy5idXR0b25zW25dPWUsdGhpcy5sYXlvdXQuc2V0T3B0aW9ucyh7ZGltZW5zaW9uczpvKHRoaXMuYnV0dG9ucy5sZW5ndGgsdGhpcy5vcHRpb25zLmRpcmVjdGlvbil9KX1lbHNlIGU9dGhpcy5idXR0b25zW25dLGUudW5iaW5kKFwic2VsZWN0XCIsdGhpcy5fYnV0dG9uQ2FsbGJhY2tzW3RdKTt0aGlzLm9wdGlvbnMuYnV0dG9ucyYmZS5zZXRPcHRpb25zKHRoaXMub3B0aW9ucy5idXR0b25zKSxlLnNldE9wdGlvbnMoaSksdGhpcy5fYnV0dG9uQ2FsbGJhY2tzW3RdPXRoaXMuc2VsZWN0LmJpbmQodGhpcyx0KSxlLm9uKFwic2VsZWN0XCIsdGhpcy5fYnV0dG9uQ2FsbGJhY2tzW3RdKX0sZS5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX2J1dHRvbklkc1t0XTt0aGlzLmJ1dHRvbnNbaV0mJnRoaXMuYnV0dG9uc1tpXS5pc1NlbGVjdGVkKCk/dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInNlbGVjdFwiLHtpZDp0fSk6dGhpcy5idXR0b25zW2ldJiZ0aGlzLmJ1dHRvbnNbaV0uc2VsZWN0KCk7Zm9yKHZhciBlPTA7ZTx0aGlzLmJ1dHRvbnMubGVuZ3RoO2UrKyllIT09aSYmdGhpcy5idXR0b25zW2VdLmRlc2VsZWN0KCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL1ZpZXdcIjoxNixcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTUsXCIuLi92aWV3cy9HcmlkTGF5b3V0XCI6MTAzLFwiLi9Ub2dnbGVCdXR0b25cIjoxMTV9XSwxMTU6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9e2NvbnRlbnQ6XCJcIixvZmZDbGFzc2VzOltcIm9mZlwiXSxvbkNsYXNzZXM6W1wib25cIl0sc2l6ZTp2b2lkIDAsb3V0VHJhbnNpdGlvbjp7Y3VydmU6XCJlYXNlSW5PdXRcIixkdXJhdGlvbjozMDB9LGluVHJhbnNpdGlvbjp7Y3VydmU6XCJlYXNlSW5PdXRcIixkdXJhdGlvbjozMDB9LHRvZ2dsZU1vZGU6ZS5UT0dHTEUsY3Jvc3NmYWRlOiEwfSx0aGlzLl9ldmVudE91dHB1dD1uZXcgbyxvLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudE91dHB1dCksdGhpcy5vZmZTdXJmYWNlPW5ldyBuLHRoaXMub2ZmU3VyZmFjZS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMudG9nZ2xlTW9kZSE9PWUuT0ZGJiZ0aGlzLnNlbGVjdCgpfS5iaW5kKHRoaXMpKSx0aGlzLm9mZlN1cmZhY2UucGlwZSh0aGlzLl9ldmVudE91dHB1dCksdGhpcy5vblN1cmZhY2U9bmV3IG4sdGhpcy5vblN1cmZhY2Uub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnRvZ2dsZU1vZGUhPT1lLk9OJiZ0aGlzLmRlc2VsZWN0KCl9LmJpbmQodGhpcykpLHRoaXMub25TdXJmYWNlLnBpcGUodGhpcy5fZXZlbnRPdXRwdXQpLHRoaXMuYXJiaXRlcj1uZXcgcyh7b3ZlcmxhcDp0aGlzLm9wdGlvbnMuY3Jvc3NmYWRlfSksdGhpcy5kZXNlbGVjdCgpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KX12YXIgbj10KFwiLi4vY29yZS9TdXJmYWNlXCIpLG89dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLHM9dChcIi4uL3ZpZXdzL1JlbmRlckNvbnRyb2xsZXJcIik7ZS5PRkY9MCxlLk9OPTEsZS5UT0dHTEU9MixlLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkPSEwLHRoaXMuYXJiaXRlci5zaG93KHRoaXMub25TdXJmYWNlLHRoaXMub3B0aW9ucy5pblRyYW5zaXRpb24pLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJzZWxlY3RcIil9LGUucHJvdG90eXBlLmRlc2VsZWN0PWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZD0hMSx0aGlzLmFyYml0ZXIuc2hvdyh0aGlzLm9mZlN1cmZhY2UsdGhpcy5vcHRpb25zLm91dFRyYW5zaXRpb24pLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJkZXNlbGVjdFwiKX0sZS5wcm90b3R5cGUuaXNTZWxlY3RlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQuY29udGVudCYmKHRoaXMub3B0aW9ucy5jb250ZW50PXQuY29udGVudCx0aGlzLm9mZlN1cmZhY2Uuc2V0Q29udGVudCh0aGlzLm9wdGlvbnMuY29udGVudCksdGhpcy5vblN1cmZhY2Uuc2V0Q29udGVudCh0aGlzLm9wdGlvbnMuY29udGVudCkpLHQub2ZmQ2xhc3NlcyYmKHRoaXMub3B0aW9ucy5vZmZDbGFzc2VzPXQub2ZmQ2xhc3Nlcyx0aGlzLm9mZlN1cmZhY2Uuc2V0Q2xhc3Nlcyh0aGlzLm9wdGlvbnMub2ZmQ2xhc3NlcykpLHQub25DbGFzc2VzJiYodGhpcy5vcHRpb25zLm9uQ2xhc3Nlcz10Lm9uQ2xhc3Nlcyx0aGlzLm9uU3VyZmFjZS5zZXRDbGFzc2VzKHRoaXMub3B0aW9ucy5vbkNsYXNzZXMpKSx2b2lkIDAhPT10LnNpemUmJih0aGlzLm9wdGlvbnMuc2l6ZT10LnNpemUsdGhpcy5vblN1cmZhY2Uuc2V0U2l6ZSh0aGlzLm9wdGlvbnMuc2l6ZSksdGhpcy5vZmZTdXJmYWNlLnNldFNpemUodGhpcy5vcHRpb25zLnNpemUpKSx2b2lkIDAhPT10LnRvZ2dsZU1vZGUmJih0aGlzLm9wdGlvbnMudG9nZ2xlTW9kZT10LnRvZ2dsZU1vZGUpLHZvaWQgMCE9PXQub3V0VHJhbnNpdGlvbiYmKHRoaXMub3B0aW9ucy5vdXRUcmFuc2l0aW9uPXQub3V0VHJhbnNpdGlvbiksdm9pZCAwIT09dC5pblRyYW5zaXRpb24mJih0aGlzLm9wdGlvbnMuaW5UcmFuc2l0aW9uPXQuaW5UcmFuc2l0aW9uKSx2b2lkIDAhPT10LmNyb3NzZmFkZSYmKHRoaXMub3B0aW9ucy5jcm9zc2ZhZGU9dC5jcm9zc2ZhZGUsdGhpcy5hcmJpdGVyLnNldE9wdGlvbnMoe292ZXJsYXA6dGhpcy5vcHRpb25zLmNyb3NzZmFkZX0pKX0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuc2l6ZX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJiaXRlci5yZW5kZXIoKX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL2NvcmUvU3VyZmFjZVwiOjE0LFwiLi4vdmlld3MvUmVuZGVyQ29udHJvbGxlclwiOjEwNn1dLDExNjpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e05hdmlnYXRpb25CYXI6dChcIi4vTmF2aWdhdGlvbkJhclwiKSxTbGlkZXI6dChcIi4vU2xpZGVyXCIpLFRhYkJhcjp0KFwiLi9UYWJCYXJcIiksVG9nZ2xlQnV0dG9uOnQoXCIuL1RvZ2dsZUJ1dHRvblwiKX19LHtcIi4vTmF2aWdhdGlvbkJhclwiOjExMixcIi4vU2xpZGVyXCI6MTEzLFwiLi9UYWJCYXJcIjoxMTQsXCIuL1RvZ2dsZUJ1dHRvblwiOjExNX1dfSx7fSxbMjNdKSgyMyl9KTtcbjsgYnJvd3NlcmlmeV9zaGltX19kZWZpbmVfX21vZHVsZV9fZXhwb3J0X18odHlwZW9mIGZhbW91cyAhPSBcInVuZGVmaW5lZFwiID8gZmFtb3VzIDogd2luZG93LmZhbW91cyk7XG5cbn0pLmNhbGwoZ2xvYmFsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uIGRlZmluZUV4cG9ydChleCkgeyBtb2R1bGUuZXhwb3J0cyA9IGV4OyB9KTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNvbnRyb2xsZXJuYW1lID0gJ2hvbWUnO1xudmFyIFByb2dyZXNzQmFyID0gcmVxdWlyZSgncHJvZ3Jlc3NiYXIuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcHApIHtcbiAgICAvKmpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblxuICAgIHZhciBkZXBzID0gWyckd2luZG93JywgJyRmYW1vdXMnLCBhcHAubmFtZSArICcucGhvdG9zJywgYXBwLm5hbWUgKyAnLmZhbW91c0hlbHBlciddO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkd2luZG93LCAkZmFtb3VzLCBwaG90b3MsIGZhbW91c0hlbHBlcikge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS52aWV3U2l6ZSA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAkd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6ICR3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICAgICAgfTtcbiAgICAgICAgdm0uaGVhZGVySGVpZ2h0ID0gMjAwO1xuICAgICAgICB2bS51c2VyTmFtZSA9ICdKb2huIERvZSc7XG5cbiAgICAgICAgdm0ucGhvdG9zID0gcGhvdG9zLmdlbmVyYXRlKDIgKiB2bS52aWV3U2l6ZS53aWR0aCAvIDMsIDIgKiB2bS52aWV3U2l6ZS53aWR0aCAvIDMsIDMwLCAzKTtcbiAgICAgICAgdm0ucGhvdG9NYWluID0gJ2ltYWdlcy9iYWNrZ3JvdW5kX2ltYWdlLmpwZyc7IC8vcGhvdG9zLmdlbmVyYXRlKHZtLnZpZXdTaXplLndpZHRoICogMiwgdm0uaGVhZGVySGVpZ2h0ICogMilbMF1bMF07XG4gICAgICAgIHZtLnBob3RvTWFpbkJsdXJyZWQgPSAnaW1hZ2VzL2JhY2tncm91bmRfaW1hZ2VfYmx1cnJlZC5qcGcnO1xuICAgICAgICB2bS5waG90b1Byb2ZpbGUgPSBwaG90b3MuZ2VuZXJhdGUoMTAwLCAxMDApWzBdWzBdO1xuXG4gICAgICAgIHZtLmdldFBob3RvU3R5bGUgPSBwaG90b3MuZ2V0U3R5bGU7XG5cbiAgICAgICAgdmFyIEV2ZW50SGFuZGxlciA9ICRmYW1vdXNbJ2ZhbW91cy9jb3JlL0V2ZW50SGFuZGxlciddO1xuICAgICAgICB2bS5ldmVudEhhbmRsZXIgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG5cbiAgICAgICAgdmFyIGdldFNjcm9sbFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZtLnNjcm9sbHZpZXcgPSBmYW1vdXNIZWxwZXIuZ2V0UmVuZGVyTm9kZSh2bS5zY3JvbGx2aWV3LCAnI3Njcm9sbFZpZXcnKTtcbiAgICAgICAgICAgIHJldHVybiB2bS5zY3JvbGx2aWV3O1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXRNYWluUGhvdG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZtLm1haW5QaG90byA9IGZhbW91c0hlbHBlci5nZXRSZW5kZXJOb2RlKHZtLm1haW5QaG90bywgJyNtYWluUGhvdG8nKTtcbiAgICAgICAgICAgIHJldHVybiB2bS5tYWluUGhvdG87XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uZ2V0T3ZlcnB1bGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAtTWF0aC5taW4oMCwgZ2V0U2Nyb2xsVmlldygpLmdldEFic29sdXRlUG9zaXRpb24oKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uZ2V0VG9vbGJhclRyYW5zbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHBvcyA9IGdldFNjcm9sbFZpZXcoKS5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gcG9zID4gKHZtLmhlYWRlckhlaWdodCAtIDYwKSA/IHBvcyAtICh2bS5oZWFkZXJIZWlnaHQgLSA2MCkgOiAwO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBUaW1lciA9ICRmYW1vdXNbJ2ZhbW91cy91dGlsaXRpZXMvVGltZXInXTtcbiAgICAgICAgVGltZXIuZXZlcnkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcG9zID0gdm0uZ2V0T3ZlcnB1bGwoKTtcbiAgICAgICAgICAgIC8vIHJldmVyIHRoZSBjb21tZW50cyB0byBibHVyIHdpdGggY3NzXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBpZihnZXRNYWluUGhvdG8oKSkge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHZtLm1haW5QaG90by5zZXRQcm9wZXJ0aWVzKHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgd2Via2l0RmlsdGVyOiAnYmx1cignICsgZ2V0Qmx1cihwb3MpICsgJ3B4KSdcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbGxDaXJjbGUoTWF0aC5taW4oMSwgcG9zIC8gMjUwKSk7XG4gICAgICAgIH0sIDIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEJsdXIocG9zKSB7XG4gICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSA1MDtcbiAgICAgICAgICAgIHZhciBibHVyID0gcG9zID4gZGlzdGFuY2UgPyBNYXRoLm1pbihNYXRoLnJvdW5kKChwb3MgLSBkaXN0YW5jZSkgLyAxNSksIDEwKSA6IDA7XG4gICAgICAgICAgICByZXR1cm4gYmx1cjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLmdldE9wYWNpdHlCbHVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcG9zID0gdm0uZ2V0T3ZlcnB1bGwoKTtcblxuICAgICAgICAgICAgdmFyIGJsdXIgPSBnZXRCbHVyKHBvcyk7XG4gICAgICAgICAgICB2YXIgb3BhY2l0eSA9IE1hdGgubWluKGJsdXIgLyAxMCwgMSk7XG5cbiAgICAgICAgICAgIHJldHVybiBvcGFjaXR5O1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBmaWxsQ2lyY2xlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmKHZtLmNpcmNsZSkge1xuICAgICAgICAgICAgICAgIHZtLmNpcmNsZS5zZXQodmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZtLmNpcmNsZSA9IG5ldyBQcm9ncmVzc0Jhci5DaXJjbGUoJHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2lyY2xlU3ZnQ29udGFpbmVyJyksIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJyMzNDk4REInLFxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiA0LFxuICAgICAgICAgICAgICAgIGZpbGw6ICcjRkZGRkZGJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29udHJvbGxlci4kaW5qZWN0ID0gZGVwcztcbiAgICBhcHAuY29udHJvbGxlcihhcHAubmFtZSArICcuJyArIGNvbnRyb2xsZXJuYW1lLCBjb250cm9sbGVyKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFwcCkge1xuICAgIC8vIGluamVjdDpzdGFydFxuICAgIHJlcXVpcmUoJy4vaG9tZScpKGFwcCk7XG4gICAgLy8gaW5qZWN0OmVuZFxufTsiLCIndXNlIHN0cmljdCc7XG5yZXF1aXJlKCdhbmd1bGFyLXVpLXJvdXRlcicpO1xuXG5yZXF1aXJlKCdmYW1vdXMtYW5ndWxhcicpO1xuXG52YXIgbW9kdWxlbmFtZSA9ICdjb21tb24nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWVzcGFjZSkge1xuXG4gICAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlICsgJy4nICsgbW9kdWxlbmFtZTtcblxuICAgIHZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShmdWxsbmFtZSwgWyd1aS5yb3V0ZXInLCAnZmFtb3VzLmFuZ3VsYXInXSk7XG4gICAgLy8gaW5qZWN0OmZvbGRlcnMgc3RhcnRcbiAgICByZXF1aXJlKCcuL2NvbnRyb2xsZXJzJykoYXBwKTtcbiAgICByZXF1aXJlKCcuL3NlcnZpY2VzJykoYXBwKTtcblxuICAgIC8vIGluamVjdDpmb2xkZXJzIGVuZFxuICAgIGFwcC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLFxuICAgICAgICBmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG4gICAgICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi92aWV3cy9ob21lLmh0bWwnKSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBmdWxsbmFtZSArICcuaG9tZScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIF0pO1xuICAgIHJldHVybiBhcHA7XG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciBzZXJ2aWNlbmFtZSA9ICdmYW1vdXNIZWxwZXInO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFwcCkge1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFsnJGZhbW91cyddO1xuXG4gICAgZnVuY3Rpb24gc2VydmljZSgkZmFtb3VzKSB7XG4gICAgICAgIHZhciBnZXRSZW5kZXJOb2RlID0gZnVuY3Rpb24oY2FjaGVFbCwgZmluZFNlbGVjdG9yKSB7XG4gICAgICAgICAgICBpZighY2FjaGVFbCkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9ICRmYW1vdXMuZmluZChmaW5kU2VsZWN0b3IpWzBdO1xuICAgICAgICAgICAgICAgIGlmKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlRWwgPSBlbC5yZW5kZXJOb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjYWNoZUVsO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRSZW5kZXJOb2RlOiBnZXRSZW5kZXJOb2RlXG4gICAgICAgIH07XG5cbiAgICB9XG4gICAgc2VydmljZS4kaW5qZWN0ID0gZGVwZW5kZW5jaWVzO1xuICAgIGFwcC5mYWN0b3J5KGFwcC5uYW1lICsgJy4nICsgc2VydmljZW5hbWUsIHNlcnZpY2UpO1xufTsiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XG4gICAgLy8gaW5qZWN0OnN0YXJ0XG4gICAgcmVxdWlyZSgnLi9mYW1vdXNIZWxwZXInKShhcHApO1xuICAgIHJlcXVpcmUoJy4vcGhvdG9zJykoYXBwKTtcbiAgICAvLyBpbmplY3Q6ZW5kXG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciBzZXJ2aWNlbmFtZSA9ICdwaG90b3MnO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciByYW5kb21zdHJpbmcgPSByZXF1aXJlKCdyYW5kb21zdHJpbmcnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW107XG5cbiAgICBmdW5jdGlvbiBzZXJ2aWNlKCkge1xuICAgICAgICB2YXIgZ2VuZXJhdGUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCBudW1iZXIsIGdyb3VwT2YpIHtcbiAgICAgICAgICAgIG51bWJlciA9IG51bWJlciB8fCAxO1xuICAgICAgICAgICAgZ3JvdXBPZiA9IGdyb3VwT2YgfHwgMTtcbiAgICAgICAgICAgIHZhciBwaG90b3MgPSBfLmNoYWluKF8ucmFuZ2UobnVtYmVyKSlcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL2xvcmVtcGl4ZWwuY29tLycgKyBNYXRoLnJvdW5kKHdpZHRoKSArICcvJyArIE1hdGgucm91bmQoaGVpZ2h0KSArICcvP2k9JyArIHJhbmRvbXN0cmluZy5nZW5lcmF0ZSg3KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5ncm91cEJ5KGZ1bmN0aW9uKHZhbHVlLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKGkgLyBncm91cE9mKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC52YWx1ZSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gcGhvdG9zO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXRTdHlsZSA9IGZ1bmN0aW9uKHBob3RvVXJsKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWltYWdlJzogJ3VybChcXCcnICsgcGhvdG9VcmwgKyAnXFwnKScsXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtc2l6ZSc6ICdjb3ZlcicsXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtcmVwZWF0JzogJ25vLXJlcGVhdCcsXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtcG9zaXRpb24nOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2VuZXJhdGU6IGdlbmVyYXRlLFxuICAgICAgICAgICAgZ2V0U3R5bGU6IGdldFN0eWxlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNlcnZpY2UuJGluamVjdCA9IGRlcGVuZGVuY2llcztcbiAgICBhcHAuZmFjdG9yeShhcHAubmFtZSArICcuJyArIHNlcnZpY2VuYW1lLCBzZXJ2aWNlKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSAnPGZhLXZpZXc+XFxuJyArXG4gICAgJyAgICA8IS0tIFNDUk9MTCBWSUVXLS0+XFxuJyArXG4gICAgJyAgICA8ZmEtc2Nyb2xsLXZpZXcgaWQ9XCJzY3JvbGxWaWV3XCIgZmEtb3B0aW9ucz1cIntkaXJlY3Rpb246IDEsIGVkZ2VHcmlwOjF9XCIgZmEtcGlwZS1mcm9tPVwidm0uZXZlbnRIYW5kbGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgPCEtLSBIRUFERVIgLS0+XFxuJyArXG4gICAgJyAgICAgICAgPGZhLXZpZXc+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxmYS1tb2RpZmllciBmYS1zaXplPVwiW3VuZGVmaW5lZCwgdm0uaGVhZGVySGVpZ2h0XVwiIGZhLXRyYW5zbGF0ZT1cIlswLCB2bS5nZXRUb29sYmFyVHJhbnNsYXRlKCldXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8ZmEtc3VyZmFjZT48L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8IS0tIE1BSU4gUEhPVE8gLS0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8ZmEtbW9kaWZpZXIgZmEtYWxpZ249XCJbMC41LDBdXCIgZmEtb3JpZ2luPVwiWzAuNSwwXVwiIGZhLXNpemU9XCJbdm0udmlld1NpemUud2lkdGgrdm0uZ2V0T3ZlcnB1bGwoKSwgdm0uaGVhZGVySGVpZ2h0KzE1K3ZtLmdldE92ZXJwdWxsKCldXCIgZmEtdHJhbnNsYXRlPVwiWzAsIC0xNS12bS5nZXRPdmVycHVsbCgpXVwiIGZhLW9wYWNpdHk9XCIxXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGZhLW1vZGlmaWVyID5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGZhLXN1cmZhY2UgY2xhc3M9XCJmdWxsLWhlaWdodFwiIGZhLXotaW5kZXg9XCIyXCIgZmEtcGlwZS10bz1cInZtLmV2ZW50SGFuZGxlclwiID5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJtYWluUGhvdG9cIiBjbGFzcz1cImZ1bGwtaGVpZ2h0XCIgbmctc3R5bGU9XCJ2bS5nZXRQaG90b1N0eWxlKHZtLnBob3RvTWFpbilcIj48L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGZhLW1vZGlmaWVyIGZhLW9wYWNpdHk9XCJ2bS5nZXRPcGFjaXR5Qmx1cigpXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1zdXJmYWNlIGNsYXNzPVwiZnVsbC1oZWlnaHRcIiBmYS16LWluZGV4PVwiM1wiIGZhLXBpcGUtdG89XCJ2bS5ldmVudEhhbmRsZXJcIiA+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwibWFpblBob3RvXCIgY2xhc3M9XCJmdWxsLWhlaWdodFwiIG5nLXN0eWxlPVwidm0uZ2V0UGhvdG9TdHlsZSh2bS5waG90b01haW5CbHVycmVkKVwiPjwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9mYS1tb2RpZmllcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8IS0tIFBST0ZJTEUgUElDVFVSRSBBTkQgVEVYVCAgLS0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8ZmEtbW9kaWZpZXIgZmEtYWxpZ249XCJbMC41LDAuNV1cIiBmYS1vcmlnaW49XCJbMC41LDAuNV1cIiBmYS1zaXplPVwiWzIwMCwxMTBdXCIgZmEtdHJhbnNsYXRlPVwiWzAsLTIwLXZtLmdldE92ZXJwdWxsKCkvMl1cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8IS0tIFBST0ZJTEUgQ0lSQ0xFIC0tPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxmYS1tb2RpZmllciBmYS1zaXplPVwiWzg4LDg4XVwiIGZhLWFsaWduPVwiWzAuNSwwXVwiIGZhLW9yaWdpbj1cIlswLjUsMF1cIiBmYS10cmFuc2xhdGU9XCJbMCwgLTRdXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1zdXJmYWNlIGNsYXNzPVwiY2lyY2xlIGZ1bGwtaGVpZ2h0XCIgZmEtei1pbmRleD1cIjRcIiBmYS1waXBlLXRvPVwidm0uZXZlbnRIYW5kbGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiY2lyY2xlU3ZnQ29udGFpbmVyXCI+PC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxmYS1tb2RpZmllciBmYS1zaXplPVwiWzgwLDgwXVwiIGZhLWFsaWduPVwiWzAuNSwwXVwiIGZhLW9yaWdpbj1cIlswLjUsMF1cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGZhLXN1cmZhY2UgY2xhc3M9XCJmdWxsLWhlaWdodFwiIGZhLXotaW5kZXg9XCI0XCIgZmEtcGlwZS10bz1cInZtLmV2ZW50SGFuZGxlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNpcmNsZSBmdWxsLWhlaWdodFwiIG5nLXN0eWxlPVwidm0uZ2V0UGhvdG9TdHlsZSh2bS5waG90b1Byb2ZpbGUpXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGZhLW1vZGlmaWVyIGZhLXNpemU9XCJbdW5kZWZpbmVkLDIwXVwiIGZhLWFsaWduPVwiWzAuNSwxXVwiIGZhLW9yaWdpbj1cIlswLjUsMV1cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGZhLXN1cmZhY2UgY2xhc3M9XCJ3aGl0ZSB0ZXh0LWNlbnRlciB0ZXh0LXNtYWxsIGZ1bGwtaGVpZ2h0XCIgZmEtei1pbmRleD1cIjRcIiBmYS1waXBlLXRvPVwidm0uZXZlbnRIYW5kbGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pnt7dm0udXNlck5hbWV9fTwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9mYS1tb2RpZmllcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8IS0tIEhFQURFUiBUT09MQkFSIC0tPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGZhLW1vZGlmaWVyIGZhLXNpemU9XCJbdW5kZWZpbmVkLCA0MF1cIiBmYS1hbGlnbj1cIlswLDFdXCIgZmEtb3JpZ2luPVwiWzAsMV1cIiBmYS10cmFuc2xhdGU9WzAsMCwxMF0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGZhLW1vZGlmaWVyIGZhLW9wYWNpdHk9XCIwLjZcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGZhLXN1cmZhY2UgZmEtYmFja2dyb3VuZC1jb2xvcj1cIlxcJ2JsYWNrXFwnXCI+PC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGZhLWdyaWQtbGF5b3V0IGZhLW9wdGlvbnM9XCJ7ZGltZW5zaW9uczogWzMsMV19XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyLTQwXCI+UGhvdG88L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8ZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlci00MCBib3JkZXItYm90dG9tXCI+QWxidW1zPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXItNDBcIj5Hcm91cHM8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvZmEtZ3JpZC1sYXlvdXQ+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgIDwvZmEtdmlldz5cXG4nICtcbiAgICAnICAgICAgICA8IS0tIElNQUdFUyBHUklELS0+XFxuJyArXG4gICAgJyAgICAgICAgPGZhLXZpZXcgbmctcmVwZWF0PVwicm93IGluIHZtLnBob3RvcyB0cmFjayBieSAkaW5kZXhcIiBmYS1zaXplPVwiW3VuZGVmaW5lZCwgdm0udmlld1NpemUud2lkdGgvM11cIiBmYS1pbmRleD1cIiRpbmRleFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8ZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8ZmEtZ3JpZC1sYXlvdXQgZmEtb3B0aW9ucz1cIntkaW1lbnNpb25zIDpbMywxXX1cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8ZmEtbW9kaWZpZXIgbmctcmVwZWF0PVwicGhvdG8gaW4gcm93XCIgZmEtc2l6ZT1cIlt2bS52aWV3U2l6ZS53aWR0aC8zLCB2bS52aWV3U2l6ZS53aWR0aC8zXVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8ZmEtc3VyZmFjZSBmYS1waXBlLXRvPVwidm0uZXZlbnRIYW5kbGVyXCIgZmEtYmFja2dyb3VuZC1jb2xvcj1cIlxcJ2JsYWNrXFwnXCIgY2xhc3M9XCJmdWxsLWhlaWdodFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZ1bGwtaGVpZ2h0IHBob3Rve3skaW5kZXh9fVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmdWxsLWhlaWdodFwiIG5nLXN0eWxlPVwidm0uZ2V0UGhvdG9TdHlsZShwaG90bylcIj48L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9mYS1tb2RpZmllcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvZmEtZ3JpZC1sYXlvdXQ+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgPC9mYS12aWV3PlxcbicgK1xuICAgICcgICAgPC9mYS1zY3JvbGwtdmlldz5cXG4nICtcbiAgICAnICAgIDwhLS0gRk9PVEVSIEJBUi0tPlxcbicgK1xuICAgICcgICAgPGZhLW1vZGlmaWVyIGZhLXNpemU9XCJbdW5kZWZpbmVkLCA0MF1cIiBmYS1hbGlnbj1cIlswLDFdXCIgZmEtb3JpZ2luPVwiWzAsMV1cIj5cXG4nICtcbiAgICAnICAgICAgICA8ZmEtbW9kaWZpZXIgZmEtb3BhY2l0eT1cIjAuNlwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8ZmEtc3VyZmFjZSBmYS1iYWNrZ3JvdW5kLWNvbG9yPVwiXFwnYmxhY2tcXCdcIj48L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgPC9mYS1tb2RpZmllcj5cXG4nICtcbiAgICAnICAgICAgICA8IS0tIEZPT1RFUiBCQVIgQlVUVE9OUyAtLT5cXG4nICtcbiAgICAnICAgICAgICA8ZmEtZ3JpZC1sYXlvdXQgZmEtb3B0aW9ucz1cIntkaW1lbnNpb25zOiBbMywxXX1cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXItNDBcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBob3RvXCI+PC9pPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXItNTBcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNhbWVyYSBmYS0yeFwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxmYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyLTQwXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS11c2VyXCI+PC9pPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICA8L2ZhLWdyaWQtbGF5b3V0PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJzwvZmEtdmlldz4nOyIsIlxuLypcbiAqIGNsYXNzTGlzdC5qczogQ3Jvc3MtYnJvd3NlciBmdWxsIGVsZW1lbnQuY2xhc3NMaXN0IGltcGxlbWVudGF0aW9uLlxuICogMjAxMS0wNi0xNVxuICpcbiAqIEJ5IEVsaSBHcmV5LCBodHRwOi8vZWxpZ3JleS5jb21cbiAqIFB1YmxpYyBEb21haW4uXG4gKiBOTyBXQVJSQU5UWSBFWFBSRVNTRUQgT1IgSU1QTElFRC4gVVNFIEFUIFlPVVIgT1dOIFJJU0suXG4gKi9cblxuLypnbG9iYWwgc2VsZiwgZG9jdW1lbnQsIERPTUV4Y2VwdGlvbiAqL1xuXG4vKiEgQHNvdXJjZSBodHRwOi8vcHVybC5lbGlncmV5LmNvbS9naXRodWIvY2xhc3NMaXN0LmpzL2Jsb2IvbWFzdGVyL2NsYXNzTGlzdC5qcyovXG5cbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgIShcImNsYXNzTGlzdFwiIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpKSkge1xuXG4oZnVuY3Rpb24gKHZpZXcpIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhclxuICAgICAgY2xhc3NMaXN0UHJvcCA9IFwiY2xhc3NMaXN0XCJcbiAgICAsIHByb3RvUHJvcCA9IFwicHJvdG90eXBlXCJcbiAgICAsIGVsZW1DdHJQcm90byA9ICh2aWV3LkhUTUxFbGVtZW50IHx8IHZpZXcuRWxlbWVudClbcHJvdG9Qcm9wXVxuICAgICwgb2JqQ3RyID0gT2JqZWN0XG4gICAgLCBzdHJUcmltID0gU3RyaW5nW3Byb3RvUHJvcF0udHJpbSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpO1xuICAgIH1cbiAgICAsIGFyckluZGV4T2YgPSBBcnJheVtwcm90b1Byb3BdLmluZGV4T2YgfHwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGkgPSAwXG4gICAgICAgICAgICAsIGxlbiA9IHRoaXMubGVuZ3RoXG4gICAgICAgIDtcbiAgICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICAvLyBWZW5kb3JzOiBwbGVhc2UgYWxsb3cgY29udGVudCBjb2RlIHRvIGluc3RhbnRpYXRlIERPTUV4Y2VwdGlvbnNcbiAgICAsIERPTUV4ID0gZnVuY3Rpb24gKHR5cGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdHlwZTtcbiAgICAgICAgdGhpcy5jb2RlID0gRE9NRXhjZXB0aW9uW3R5cGVdO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cbiAgICAsIGNoZWNrVG9rZW5BbmRHZXRJbmRleCA9IGZ1bmN0aW9uIChjbGFzc0xpc3QsIHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gXCJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4KFxuICAgICAgICAgICAgICAgICAgXCJTWU5UQVhfRVJSXCJcbiAgICAgICAgICAgICAgICAsIFwiQW4gaW52YWxpZCBvciBpbGxlZ2FsIHN0cmluZyB3YXMgc3BlY2lmaWVkXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKC9cXHMvLnRlc3QodG9rZW4pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXgoXG4gICAgICAgICAgICAgICAgICBcIklOVkFMSURfQ0hBUkFDVEVSX0VSUlwiXG4gICAgICAgICAgICAgICAgLCBcIlN0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3RlclwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJJbmRleE9mLmNhbGwoY2xhc3NMaXN0LCB0b2tlbik7XG4gICAgfVxuICAgICwgQ2xhc3NMaXN0ID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHRyaW1tZWRDbGFzc2VzID0gc3RyVHJpbS5jYWxsKGVsZW0uY2xhc3NOYW1lKVxuICAgICAgICAgICAgLCBjbGFzc2VzID0gdHJpbW1lZENsYXNzZXMgPyB0cmltbWVkQ2xhc3Nlcy5zcGxpdCgvXFxzKy8pIDogW11cbiAgICAgICAgICAgICwgaSA9IDBcbiAgICAgICAgICAgICwgbGVuID0gY2xhc3Nlcy5sZW5ndGhcbiAgICAgICAgO1xuICAgICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2goY2xhc3Nlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgICwgY2xhc3NMaXN0UHJvdG8gPSBDbGFzc0xpc3RbcHJvdG9Qcm9wXSA9IFtdXG4gICAgLCBjbGFzc0xpc3RHZXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2xhc3NMaXN0KHRoaXMpO1xuICAgIH1cbjtcbi8vIE1vc3QgRE9NRXhjZXB0aW9uIGltcGxlbWVudGF0aW9ucyBkb24ndCBhbGxvdyBjYWxsaW5nIERPTUV4Y2VwdGlvbidzIHRvU3RyaW5nKClcbi8vIG9uIG5vbi1ET01FeGNlcHRpb25zLiBFcnJvcidzIHRvU3RyaW5nKCkgaXMgc3VmZmljaWVudCBoZXJlLlxuRE9NRXhbcHJvdG9Qcm9wXSA9IEVycm9yW3Byb3RvUHJvcF07XG5jbGFzc0xpc3RQcm90by5pdGVtID0gZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gdGhpc1tpXSB8fCBudWxsO1xufTtcbmNsYXNzTGlzdFByb3RvLmNvbnRhaW5zID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgdG9rZW4gKz0gXCJcIjtcbiAgICByZXR1cm4gY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKSAhPT0gLTE7XG59O1xuY2xhc3NMaXN0UHJvdG8uYWRkID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgdG9rZW4gKz0gXCJcIjtcbiAgICBpZiAoY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5wdXNoKHRva2VuKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCk7XG4gICAgfVxufTtcbmNsYXNzTGlzdFByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIHRva2VuICs9IFwiXCI7XG4gICAgdmFyIGluZGV4ID0gY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCk7XG4gICAgfVxufTtcbmNsYXNzTGlzdFByb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIHRva2VuICs9IFwiXCI7XG4gICAgaWYgKGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbikgPT09IC0xKSB7XG4gICAgICAgIHRoaXMuYWRkKHRva2VuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZSh0b2tlbik7XG4gICAgfVxufTtcbmNsYXNzTGlzdFByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmpvaW4oXCIgXCIpO1xufTtcblxuaWYgKG9iakN0ci5kZWZpbmVQcm9wZXJ0eSkge1xuICAgIHZhciBjbGFzc0xpc3RQcm9wRGVzYyA9IHtcbiAgICAgICAgICBnZXQ6IGNsYXNzTGlzdEdldHRlclxuICAgICAgICAsIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgLCBjb25maWd1cmFibGU6IHRydWVcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICAgIG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcbiAgICB9IGNhdGNoIChleCkgeyAvLyBJRSA4IGRvZXNuJ3Qgc3VwcG9ydCBlbnVtZXJhYmxlOnRydWVcbiAgICAgICAgaWYgKGV4Lm51bWJlciA9PT0gLTB4N0ZGNUVDNTQpIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdFByb3BEZXNjLmVudW1lcmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcbiAgICAgICAgfVxuICAgIH1cbn0gZWxzZSBpZiAob2JqQ3RyW3Byb3RvUHJvcF0uX19kZWZpbmVHZXR0ZXJfXykge1xuICAgIGVsZW1DdHJQcm90by5fX2RlZmluZUdldHRlcl9fKGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdEdldHRlcik7XG59XG5cbn0oc2VsZikpO1xuXG59XG4iLCJpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kKSB7XG4gICAgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAob1RoaXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIC8vIGNsb3Nlc3QgdGhpbmcgcG9zc2libGUgdG8gdGhlIEVDTUFTY3JpcHQgNSBpbnRlcm5hbCBJc0NhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgLSB3aGF0IGlzIHRyeWluZyB0byBiZSBib3VuZCBpcyBub3QgY2FsbGFibGVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYUFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgICBmVG9CaW5kID0gdGhpcyxcbiAgICAgICAgZk5PUCA9IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgICBmQm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZlRvQmluZC5hcHBseSh0aGlzIGluc3RhbmNlb2YgZk5PUCAmJiBvVGhpc1xuICAgICAgICAgICAgICAgID8gdGhpc1xuICAgICAgICAgICAgICAgIDogb1RoaXMsXG4gICAgICAgICAgICAgICAgYUFyZ3MuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmTk9QLnByb3RvdHlwZSA9IHRoaXMucHJvdG90eXBlO1xuICAgICAgICBmQm91bmQucHJvdG90eXBlID0gbmV3IGZOT1AoKTtcblxuICAgICAgICByZXR1cm4gZkJvdW5kO1xuICAgIH07XG59XG4iLCJyZXF1aXJlKCcuL2NsYXNzTGlzdC5qcycpO1xucmVxdWlyZSgnLi9mdW5jdGlvblByb3RvdHlwZUJpbmQuanMnKTtcbnJlcXVpcmUoJy4vcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzJyk7IiwiLy8gYWRkcyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgZnVuY3Rpb25hbGl0eVxuLy8gU291cmNlOiBodHRwOi8vc3RyZDYuY29tLzIwMTEvMDUvYmV0dGVyLXdpbmRvdy1yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtc2hpbS9cblxud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCAod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9XG4gIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSAgICB8fFxuICB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgIHx8XG4gIHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgfHxcbiAgZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBjYWxsYmFjaygrbmV3IERhdGUoKSk7XG4gIH0sIDEwMDAgLyA2MCk7XG59KTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcbi8qKlxuICogQGxpY2Vuc2VcbiAqIExvLURhc2ggMi40LjEgKEN1c3RvbSBCdWlsZCkgPGh0dHA6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiAtbyAuL2Rpc3QvbG9kYXNoLmpzYFxuICogQ29weXJpZ2h0IDIwMTItMjAxMyBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS41LjIgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDEzIEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHA6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbjsoZnVuY3Rpb24oKSB7XG5cbiAgLyoqIFVzZWQgYXMgYSBzYWZlIHJlZmVyZW5jZSBmb3IgYHVuZGVmaW5lZGAgaW4gcHJlIEVTNSBlbnZpcm9ubWVudHMgKi9cbiAgdmFyIHVuZGVmaW5lZDtcblxuICAvKiogVXNlZCB0byBwb29sIGFycmF5cyBhbmQgb2JqZWN0cyB1c2VkIGludGVybmFsbHkgKi9cbiAgdmFyIGFycmF5UG9vbCA9IFtdLFxuICAgICAgb2JqZWN0UG9vbCA9IFtdO1xuXG4gIC8qKiBVc2VkIHRvIGdlbmVyYXRlIHVuaXF1ZSBJRHMgKi9cbiAgdmFyIGlkQ291bnRlciA9IDA7XG5cbiAgLyoqIFVzZWQgdG8gcHJlZml4IGtleXMgdG8gYXZvaWQgaXNzdWVzIHdpdGggYF9fcHJvdG9fX2AgYW5kIHByb3BlcnRpZXMgb24gYE9iamVjdC5wcm90b3R5cGVgICovXG4gIHZhciBrZXlQcmVmaXggPSArbmV3IERhdGUgKyAnJztcblxuICAvKiogVXNlZCBhcyB0aGUgc2l6ZSB3aGVuIG9wdGltaXphdGlvbnMgYXJlIGVuYWJsZWQgZm9yIGxhcmdlIGFycmF5cyAqL1xuICB2YXIgbGFyZ2VBcnJheVNpemUgPSA3NTtcblxuICAvKiogVXNlZCBhcyB0aGUgbWF4IHNpemUgb2YgdGhlIGBhcnJheVBvb2xgIGFuZCBgb2JqZWN0UG9vbGAgKi9cbiAgdmFyIG1heFBvb2xTaXplID0gNDA7XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IGFuZCB0ZXN0IHdoaXRlc3BhY2UgKi9cbiAgdmFyIHdoaXRlc3BhY2UgPSAoXG4gICAgLy8gd2hpdGVzcGFjZVxuICAgICcgXFx0XFx4MEJcXGZcXHhBMFxcdWZlZmYnICtcblxuICAgIC8vIGxpbmUgdGVybWluYXRvcnNcbiAgICAnXFxuXFxyXFx1MjAyOFxcdTIwMjknICtcblxuICAgIC8vIHVuaWNvZGUgY2F0ZWdvcnkgXCJac1wiIHNwYWNlIHNlcGFyYXRvcnNcbiAgICAnXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMCdcbiAgKTtcblxuICAvKiogVXNlZCB0byBtYXRjaCBlbXB0eSBzdHJpbmcgbGl0ZXJhbHMgaW4gY29tcGlsZWQgdGVtcGxhdGUgc291cmNlICovXG4gIHZhciByZUVtcHR5U3RyaW5nTGVhZGluZyA9IC9cXGJfX3AgXFwrPSAnJzsvZyxcbiAgICAgIHJlRW1wdHlTdHJpbmdNaWRkbGUgPSAvXFxiKF9fcCBcXCs9KSAnJyBcXCsvZyxcbiAgICAgIHJlRW1wdHlTdHJpbmdUcmFpbGluZyA9IC8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSkgXFwrXFxuJyc7L2c7XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gbWF0Y2ggRVM2IHRlbXBsYXRlIGRlbGltaXRlcnNcbiAgICogaHR0cDovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbGl0ZXJhbHMtc3RyaW5nLWxpdGVyYWxzXG4gICAqL1xuICB2YXIgcmVFc1RlbXBsYXRlID0gL1xcJFxceyhbXlxcXFx9XSooPzpcXFxcLlteXFxcXH1dKikqKVxcfS9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIHJlZ2V4cCBmbGFncyBmcm9tIHRoZWlyIGNvZXJjZWQgc3RyaW5nIHZhbHVlcyAqL1xuICB2YXIgcmVGbGFncyA9IC9cXHcqJC87XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0ZWQgbmFtZWQgZnVuY3Rpb25zICovXG4gIHZhciByZUZ1bmNOYW1lID0gL15cXHMqZnVuY3Rpb25bIFxcblxcclxcdF0rXFx3LztcblxuICAvKiogVXNlZCB0byBtYXRjaCBcImludGVycG9sYXRlXCIgdGVtcGxhdGUgZGVsaW1pdGVycyAqL1xuICB2YXIgcmVJbnRlcnBvbGF0ZSA9IC88JT0oW1xcc1xcU10rPyklPi9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgd2hpdGVzcGFjZSBhbmQgemVyb3MgdG8gYmUgcmVtb3ZlZCAqL1xuICB2YXIgcmVMZWFkaW5nU3BhY2VzQW5kWmVyb3MgPSBSZWdFeHAoJ15bJyArIHdoaXRlc3BhY2UgKyAnXSowKyg/PS4kKScpO1xuXG4gIC8qKiBVc2VkIHRvIGVuc3VyZSBjYXB0dXJpbmcgb3JkZXIgb2YgdGVtcGxhdGUgZGVsaW1pdGVycyAqL1xuICB2YXIgcmVOb01hdGNoID0gLygkXikvO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBmdW5jdGlvbnMgY29udGFpbmluZyBhIGB0aGlzYCByZWZlcmVuY2UgKi9cbiAgdmFyIHJlVGhpcyA9IC9cXGJ0aGlzXFxiLztcblxuICAvKiogVXNlZCB0byBtYXRjaCB1bmVzY2FwZWQgY2hhcmFjdGVycyBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMgKi9cbiAgdmFyIHJlVW5lc2NhcGVkU3RyaW5nID0gL1snXFxuXFxyXFx0XFx1MjAyOFxcdTIwMjlcXFxcXS9nO1xuXG4gIC8qKiBVc2VkIHRvIGFzc2lnbiBkZWZhdWx0IGBjb250ZXh0YCBvYmplY3QgcHJvcGVydGllcyAqL1xuICB2YXIgY29udGV4dFByb3BzID0gW1xuICAgICdBcnJheScsICdCb29sZWFuJywgJ0RhdGUnLCAnRnVuY3Rpb24nLCAnTWF0aCcsICdOdW1iZXInLCAnT2JqZWN0JyxcbiAgICAnUmVnRXhwJywgJ1N0cmluZycsICdfJywgJ2F0dGFjaEV2ZW50JywgJ2NsZWFyVGltZW91dCcsICdpc0Zpbml0ZScsICdpc05hTicsXG4gICAgJ3BhcnNlSW50JywgJ3NldFRpbWVvdXQnXG4gIF07XG5cbiAgLyoqIFVzZWQgdG8gbWFrZSB0ZW1wbGF0ZSBzb3VyY2VVUkxzIGVhc2llciB0byBpZGVudGlmeSAqL1xuICB2YXIgdGVtcGxhdGVDb3VudGVyID0gMDtcblxuICAvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHNob3J0Y3V0cyAqL1xuICB2YXIgYXJnc0NsYXNzID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgICBhcnJheUNsYXNzID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICAgIGJvb2xDbGFzcyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICAgIGRhdGVDbGFzcyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICAgIGZ1bmNDbGFzcyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgICBudW1iZXJDbGFzcyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgICAgb2JqZWN0Q2xhc3MgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICAgIHJlZ2V4cENsYXNzID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgICBzdHJpbmdDbGFzcyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXG4gIC8qKiBVc2VkIHRvIGlkZW50aWZ5IG9iamVjdCBjbGFzc2lmaWNhdGlvbnMgdGhhdCBgXy5jbG9uZWAgc3VwcG9ydHMgKi9cbiAgdmFyIGNsb25lYWJsZUNsYXNzZXMgPSB7fTtcbiAgY2xvbmVhYmxlQ2xhc3Nlc1tmdW5jQ2xhc3NdID0gZmFsc2U7XG4gIGNsb25lYWJsZUNsYXNzZXNbYXJnc0NsYXNzXSA9IGNsb25lYWJsZUNsYXNzZXNbYXJyYXlDbGFzc10gPVxuICBjbG9uZWFibGVDbGFzc2VzW2Jvb2xDbGFzc10gPSBjbG9uZWFibGVDbGFzc2VzW2RhdGVDbGFzc10gPVxuICBjbG9uZWFibGVDbGFzc2VzW251bWJlckNsYXNzXSA9IGNsb25lYWJsZUNsYXNzZXNbb2JqZWN0Q2xhc3NdID1cbiAgY2xvbmVhYmxlQ2xhc3Nlc1tyZWdleHBDbGFzc10gPSBjbG9uZWFibGVDbGFzc2VzW3N0cmluZ0NsYXNzXSA9IHRydWU7XG5cbiAgLyoqIFVzZWQgYXMgYW4gaW50ZXJuYWwgYF8uZGVib3VuY2VgIG9wdGlvbnMgb2JqZWN0ICovXG4gIHZhciBkZWJvdW5jZU9wdGlvbnMgPSB7XG4gICAgJ2xlYWRpbmcnOiBmYWxzZSxcbiAgICAnbWF4V2FpdCc6IDAsXG4gICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAgfTtcblxuICAvKiogVXNlZCBhcyB0aGUgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgYF9fYmluZERhdGFfX2AgKi9cbiAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgJ2NvbmZpZ3VyYWJsZSc6IGZhbHNlLFxuICAgICdlbnVtZXJhYmxlJzogZmFsc2UsXG4gICAgJ3ZhbHVlJzogbnVsbCxcbiAgICAnd3JpdGFibGUnOiBmYWxzZVxuICB9O1xuXG4gIC8qKiBVc2VkIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgYXJlIG9mIHRoZSBsYW5ndWFnZSB0eXBlIE9iamVjdCAqL1xuICB2YXIgb2JqZWN0VHlwZXMgPSB7XG4gICAgJ2Jvb2xlYW4nOiBmYWxzZSxcbiAgICAnZnVuY3Rpb24nOiB0cnVlLFxuICAgICdvYmplY3QnOiB0cnVlLFxuICAgICdudW1iZXInOiBmYWxzZSxcbiAgICAnc3RyaW5nJzogZmFsc2UsXG4gICAgJ3VuZGVmaW5lZCc6IGZhbHNlXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMgKi9cbiAgdmFyIHN0cmluZ0VzY2FwZXMgPSB7XG4gICAgJ1xcXFwnOiAnXFxcXCcsXG4gICAgXCInXCI6IFwiJ1wiLFxuICAgICdcXG4nOiAnbicsXG4gICAgJ1xccic6ICdyJyxcbiAgICAnXFx0JzogJ3QnLFxuICAgICdcXHUyMDI4JzogJ3UyMDI4JyxcbiAgICAnXFx1MjAyOSc6ICd1MjAyOSdcbiAgfTtcblxuICAvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdCAqL1xuICB2YXIgcm9vdCA9IChvYmplY3RUeXBlc1t0eXBlb2Ygd2luZG93XSAmJiB3aW5kb3cpIHx8IHRoaXM7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYCAqL1xuICB2YXIgZnJlZUV4cG9ydHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0c10gJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYCAqL1xuICB2YXIgZnJlZU1vZHVsZSA9IG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblxuICAvKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgICovXG4gIHZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzICYmIGZyZWVFeHBvcnRzO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMgb3IgQnJvd3NlcmlmaWVkIGNvZGUgYW5kIHVzZSBpdCBhcyBgcm9vdGAgKi9cbiAgdmFyIGZyZWVHbG9iYWwgPSBvYmplY3RUeXBlc1t0eXBlb2YgZ2xvYmFsXSAmJiBnbG9iYWw7XG4gIGlmIChmcmVlR2xvYmFsICYmIChmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCkpIHtcbiAgICByb290ID0gZnJlZUdsb2JhbDtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pbmRleE9mYCB3aXRob3V0IHN1cHBvcnQgZm9yIGJpbmFyeSBzZWFyY2hlc1xuICAgKiBvciBgZnJvbUluZGV4YCBjb25zdHJhaW50cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSBvciBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcbiAgICB2YXIgaW5kZXggPSAoZnJvbUluZGV4IHx8IDApIC0gMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIGlmIChhcnJheVtpbmRleF0gPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBfLmNvbnRhaW5zYCBmb3IgY2FjaGUgb2JqZWN0cyB0aGF0IG1pbWljcyB0aGUgcmV0dXJuXG4gICAqIHNpZ25hdHVyZSBvZiBgXy5pbmRleE9mYCBieSByZXR1cm5pbmcgYDBgIGlmIHRoZSB2YWx1ZSBpcyBmb3VuZCwgZWxzZSBgLTFgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2FjaGUgVGhlIGNhY2hlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGAwYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGAtMWAuXG4gICAqL1xuICBmdW5jdGlvbiBjYWNoZUluZGV4T2YoY2FjaGUsIHZhbHVlKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgY2FjaGUgPSBjYWNoZS5jYWNoZTtcblxuICAgIGlmICh0eXBlID09ICdib29sZWFuJyB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gY2FjaGVbdmFsdWVdID8gMCA6IC0xO1xuICAgIH1cbiAgICBpZiAodHlwZSAhPSAnbnVtYmVyJyAmJiB0eXBlICE9ICdzdHJpbmcnKSB7XG4gICAgICB0eXBlID0gJ29iamVjdCc7XG4gICAgfVxuICAgIHZhciBrZXkgPSB0eXBlID09ICdudW1iZXInID8gdmFsdWUgOiBrZXlQcmVmaXggKyB2YWx1ZTtcbiAgICBjYWNoZSA9IChjYWNoZSA9IGNhY2hlW3R5cGVdKSAmJiBjYWNoZVtrZXldO1xuXG4gICAgcmV0dXJuIHR5cGUgPT0gJ29iamVjdCdcbiAgICAgID8gKGNhY2hlICYmIGJhc2VJbmRleE9mKGNhY2hlLCB2YWx1ZSkgPiAtMSA/IDAgOiAtMSlcbiAgICAgIDogKGNhY2hlID8gMCA6IC0xKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgZ2l2ZW4gdmFsdWUgdG8gdGhlIGNvcnJlc3BvbmRpbmcgY2FjaGUgb2JqZWN0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhZGQgdG8gdGhlIGNhY2hlLlxuICAgKi9cbiAgZnVuY3Rpb24gY2FjaGVQdXNoKHZhbHVlKSB7XG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSxcbiAgICAgICAgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuICAgIGlmICh0eXBlID09ICdib29sZWFuJyB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICBjYWNoZVt2YWx1ZV0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZSAhPSAnbnVtYmVyJyAmJiB0eXBlICE9ICdzdHJpbmcnKSB7XG4gICAgICAgIHR5cGUgPSAnb2JqZWN0JztcbiAgICAgIH1cbiAgICAgIHZhciBrZXkgPSB0eXBlID09ICdudW1iZXInID8gdmFsdWUgOiBrZXlQcmVmaXggKyB2YWx1ZSxcbiAgICAgICAgICB0eXBlQ2FjaGUgPSBjYWNoZVt0eXBlXSB8fCAoY2FjaGVbdHlwZV0gPSB7fSk7XG5cbiAgICAgIGlmICh0eXBlID09ICdvYmplY3QnKSB7XG4gICAgICAgICh0eXBlQ2FjaGVba2V5XSB8fCAodHlwZUNhY2hlW2tleV0gPSBbXSkpLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHlwZUNhY2hlW2tleV0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLm1heGAgYW5kIGBfLm1pbmAgYXMgdGhlIGRlZmF1bHQgY2FsbGJhY2sgd2hlbiBhIGdpdmVuXG4gICAqIGNvbGxlY3Rpb24gaXMgYSBzdHJpbmcgdmFsdWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgY2hhcmFjdGVyIHRvIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvZGUgdW5pdCBvZiBnaXZlbiBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiBjaGFyQXRDYWxsYmFjayh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYHNvcnRCeWAgdG8gY29tcGFyZSB0cmFuc2Zvcm1lZCBgY29sbGVjdGlvbmAgZWxlbWVudHMsIHN0YWJsZSBzb3J0aW5nXG4gICAqIHRoZW0gaW4gYXNjZW5kaW5nIG9yZGVyLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGNvbXBhcmUgdG8gYGJgLlxuICAgKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvbXBhcmUgdG8gYGFgLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzb3J0IG9yZGVyIGluZGljYXRvciBvZiBgMWAgb3IgYC0xYC5cbiAgICovXG4gIGZ1bmN0aW9uIGNvbXBhcmVBc2NlbmRpbmcoYSwgYikge1xuICAgIHZhciBhYyA9IGEuY3JpdGVyaWEsXG4gICAgICAgIGJjID0gYi5jcml0ZXJpYSxcbiAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYWMubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFjW2luZGV4XSxcbiAgICAgICAgICBvdGhlciA9IGJjW2luZGV4XTtcblxuICAgICAgaWYgKHZhbHVlICE9PSBvdGhlcikge1xuICAgICAgICBpZiAodmFsdWUgPiBvdGhlciB8fCB0eXBlb2YgdmFsdWUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPCBvdGhlciB8fCB0eXBlb2Ygb3RoZXIgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRml4ZXMgYW4gYEFycmF5I3NvcnRgIGJ1ZyBpbiB0aGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIGFwcGxpY2F0aW9uc1xuICAgIC8vIHRoYXQgY2F1c2VzIGl0LCB1bmRlciBjZXJ0YWluIGNpcmN1bXN0YW5jZXMsIHRvIHJldHVybiB0aGUgc2FtZSB2YWx1ZSBmb3JcbiAgICAvLyBgYWAgYW5kIGBiYC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9wdWxsLzEyNDdcbiAgICAvL1xuICAgIC8vIFRoaXMgYWxzbyBlbnN1cmVzIGEgc3RhYmxlIHNvcnQgaW4gVjggYW5kIG90aGVyIGVuZ2luZXMuXG4gICAgLy8gU2VlIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTkwXG4gICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjYWNoZSBvYmplY3QgdG8gb3B0aW1pemUgbGluZWFyIHNlYXJjaGVzIG9mIGxhcmdlIGFycmF5cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5PVtdXSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgKiBAcmV0dXJucyB7bnVsbHxPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIG9iamVjdCBvciBgbnVsbGAgaWYgY2FjaGluZyBzaG91bGQgbm90IGJlIHVzZWQuXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVDYWNoZShhcnJheSkge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIGZpcnN0ID0gYXJyYXlbMF0sXG4gICAgICAgIG1pZCA9IGFycmF5WyhsZW5ndGggLyAyKSB8IDBdLFxuICAgICAgICBsYXN0ID0gYXJyYXlbbGVuZ3RoIC0gMV07XG5cbiAgICBpZiAoZmlyc3QgJiYgdHlwZW9mIGZpcnN0ID09ICdvYmplY3QnICYmXG4gICAgICAgIG1pZCAmJiB0eXBlb2YgbWlkID09ICdvYmplY3QnICYmIGxhc3QgJiYgdHlwZW9mIGxhc3QgPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGNhY2hlID0gZ2V0T2JqZWN0KCk7XG4gICAgY2FjaGVbJ2ZhbHNlJ10gPSBjYWNoZVsnbnVsbCddID0gY2FjaGVbJ3RydWUnXSA9IGNhY2hlWyd1bmRlZmluZWQnXSA9IGZhbHNlO1xuXG4gICAgdmFyIHJlc3VsdCA9IGdldE9iamVjdCgpO1xuICAgIHJlc3VsdC5hcnJheSA9IGFycmF5O1xuICAgIHJlc3VsdC5jYWNoZSA9IGNhY2hlO1xuICAgIHJlc3VsdC5wdXNoID0gY2FjaGVQdXNoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGFycmF5W2luZGV4XSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgdGVtcGxhdGVgIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWRcbiAgICogc3RyaW5nIGxpdGVyYWxzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWF0Y2ggVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiBlc2NhcGVTdHJpbmdDaGFyKG1hdGNoKSB7XG4gICAgcmV0dXJuICdcXFxcJyArIHN0cmluZ0VzY2FwZXNbbWF0Y2hdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYW4gYXJyYXkgZnJvbSB0aGUgYXJyYXkgcG9vbCBvciBjcmVhdGVzIGEgbmV3IG9uZSBpZiB0aGUgcG9vbCBpcyBlbXB0eS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge0FycmF5fSBUaGUgYXJyYXkgZnJvbSB0aGUgcG9vbC5cbiAgICovXG4gIGZ1bmN0aW9uIGdldEFycmF5KCkge1xuICAgIHJldHVybiBhcnJheVBvb2wucG9wKCkgfHwgW107XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbiBvYmplY3QgZnJvbSB0aGUgb2JqZWN0IHBvb2wgb3IgY3JlYXRlcyBhIG5ldyBvbmUgaWYgdGhlIHBvb2wgaXMgZW1wdHkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBvYmplY3QgZnJvbSB0aGUgcG9vbC5cbiAgICovXG4gIGZ1bmN0aW9uIGdldE9iamVjdCgpIHtcbiAgICByZXR1cm4gb2JqZWN0UG9vbC5wb3AoKSB8fCB7XG4gICAgICAnYXJyYXknOiBudWxsLFxuICAgICAgJ2NhY2hlJzogbnVsbCxcbiAgICAgICdjcml0ZXJpYSc6IG51bGwsXG4gICAgICAnZmFsc2UnOiBmYWxzZSxcbiAgICAgICdpbmRleCc6IDAsXG4gICAgICAnbnVsbCc6IGZhbHNlLFxuICAgICAgJ251bWJlcic6IG51bGwsXG4gICAgICAnb2JqZWN0JzogbnVsbCxcbiAgICAgICdwdXNoJzogbnVsbCxcbiAgICAgICdzdHJpbmcnOiBudWxsLFxuICAgICAgJ3RydWUnOiBmYWxzZSxcbiAgICAgICd1bmRlZmluZWQnOiBmYWxzZSxcbiAgICAgICd2YWx1ZSc6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIHRoZSBnaXZlbiBhcnJheSBiYWNrIHRvIHRoZSBhcnJheSBwb29sLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byByZWxlYXNlLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVsZWFzZUFycmF5KGFycmF5KSB7XG4gICAgYXJyYXkubGVuZ3RoID0gMDtcbiAgICBpZiAoYXJyYXlQb29sLmxlbmd0aCA8IG1heFBvb2xTaXplKSB7XG4gICAgICBhcnJheVBvb2wucHVzaChhcnJheSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIHRoZSBnaXZlbiBvYmplY3QgYmFjayB0byB0aGUgb2JqZWN0IHBvb2wuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHJlbGVhc2UuXG4gICAqL1xuICBmdW5jdGlvbiByZWxlYXNlT2JqZWN0KG9iamVjdCkge1xuICAgIHZhciBjYWNoZSA9IG9iamVjdC5jYWNoZTtcbiAgICBpZiAoY2FjaGUpIHtcbiAgICAgIHJlbGVhc2VPYmplY3QoY2FjaGUpO1xuICAgIH1cbiAgICBvYmplY3QuYXJyYXkgPSBvYmplY3QuY2FjaGUgPSBvYmplY3QuY3JpdGVyaWEgPSBvYmplY3Qub2JqZWN0ID0gb2JqZWN0Lm51bWJlciA9IG9iamVjdC5zdHJpbmcgPSBvYmplY3QudmFsdWUgPSBudWxsO1xuICAgIGlmIChvYmplY3RQb29sLmxlbmd0aCA8IG1heFBvb2xTaXplKSB7XG4gICAgICBvYmplY3RQb29sLnB1c2gob2JqZWN0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2xpY2VzIHRoZSBgY29sbGVjdGlvbmAgZnJvbSB0aGUgYHN0YXJ0YCBpbmRleCB1cCB0bywgYnV0IG5vdCBpbmNsdWRpbmcsXG4gICAqIHRoZSBgZW5kYCBpbmRleC5cbiAgICpcbiAgICogTm90ZTogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGluc3RlYWQgb2YgYEFycmF5I3NsaWNlYCB0byBzdXBwb3J0IG5vZGUgbGlzdHNcbiAgICogaW4gSUUgPCA5IGFuZCB0byBlbnN1cmUgZGVuc2UgYXJyYXlzIGFyZSByZXR1cm5lZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNsaWNlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHN0YXJ0IGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgaW5kZXguXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5LlxuICAgKi9cbiAgZnVuY3Rpb24gc2xpY2UoYXJyYXksIHN0YXJ0LCBlbmQpIHtcbiAgICBzdGFydCB8fCAoc3RhcnQgPSAwKTtcbiAgICBpZiAodHlwZW9mIGVuZCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgZW5kID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgIH1cbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gZW5kIC0gc3RhcnQgfHwgMCxcbiAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoIDwgMCA/IDAgOiBsZW5ndGgpO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheVtzdGFydCArIGluZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYGxvZGFzaGAgZnVuY3Rpb24gdXNpbmcgdGhlIGdpdmVuIGNvbnRleHQgb2JqZWN0LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0PXJvb3RdIFRoZSBjb250ZXh0IG9iamVjdC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIHJ1bkluQ29udGV4dChjb250ZXh0KSB7XG4gICAgLy8gQXZvaWQgaXNzdWVzIHdpdGggc29tZSBFUzMgZW52aXJvbm1lbnRzIHRoYXQgYXR0ZW1wdCB0byB1c2UgdmFsdWVzLCBuYW1lZFxuICAgIC8vIGFmdGVyIGJ1aWx0LWluIGNvbnN0cnVjdG9ycyBsaWtlIGBPYmplY3RgLCBmb3IgdGhlIGNyZWF0aW9uIG9mIGxpdGVyYWxzLlxuICAgIC8vIEVTNSBjbGVhcnMgdGhpcyB1cCBieSBzdGF0aW5nIHRoYXQgbGl0ZXJhbHMgbXVzdCB1c2UgYnVpbHQtaW4gY29uc3RydWN0b3JzLlxuICAgIC8vIFNlZSBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDExLjEuNS5cbiAgICBjb250ZXh0ID0gY29udGV4dCA/IF8uZGVmYXVsdHMocm9vdC5PYmplY3QoKSwgY29udGV4dCwgXy5waWNrKHJvb3QsIGNvbnRleHRQcm9wcykpIDogcm9vdDtcblxuICAgIC8qKiBOYXRpdmUgY29uc3RydWN0b3IgcmVmZXJlbmNlcyAqL1xuICAgIHZhciBBcnJheSA9IGNvbnRleHQuQXJyYXksXG4gICAgICAgIEJvb2xlYW4gPSBjb250ZXh0LkJvb2xlYW4sXG4gICAgICAgIERhdGUgPSBjb250ZXh0LkRhdGUsXG4gICAgICAgIEZ1bmN0aW9uID0gY29udGV4dC5GdW5jdGlvbixcbiAgICAgICAgTWF0aCA9IGNvbnRleHQuTWF0aCxcbiAgICAgICAgTnVtYmVyID0gY29udGV4dC5OdW1iZXIsXG4gICAgICAgIE9iamVjdCA9IGNvbnRleHQuT2JqZWN0LFxuICAgICAgICBSZWdFeHAgPSBjb250ZXh0LlJlZ0V4cCxcbiAgICAgICAgU3RyaW5nID0gY29udGV4dC5TdHJpbmcsXG4gICAgICAgIFR5cGVFcnJvciA9IGNvbnRleHQuVHlwZUVycm9yO1xuXG4gICAgLyoqXG4gICAgICogVXNlZCBmb3IgYEFycmF5YCBtZXRob2QgcmVmZXJlbmNlcy5cbiAgICAgKlxuICAgICAqIE5vcm1hbGx5IGBBcnJheS5wcm90b3R5cGVgIHdvdWxkIHN1ZmZpY2UsIGhvd2V2ZXIsIHVzaW5nIGFuIGFycmF5IGxpdGVyYWxcbiAgICAgKiBhdm9pZHMgaXNzdWVzIGluIE5hcndoYWwuXG4gICAgICovXG4gICAgdmFyIGFycmF5UmVmID0gW107XG5cbiAgICAvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzICovXG4gICAgdmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuICAgIC8qKiBVc2VkIHRvIHJlc3RvcmUgdGhlIG9yaWdpbmFsIGBfYCByZWZlcmVuY2UgaW4gYG5vQ29uZmxpY3RgICovXG4gICAgdmFyIG9sZERhc2ggPSBjb250ZXh0Ll87XG5cbiAgICAvKiogVXNlZCB0byByZXNvbHZlIHRoZSBpbnRlcm5hbCBbW0NsYXNzXV0gb2YgdmFsdWVzICovXG4gICAgdmFyIHRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbiAgICAvKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlICovXG4gICAgdmFyIHJlTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gICAgICBTdHJpbmcodG9TdHJpbmcpXG4gICAgICAgIC5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpXG4gICAgICAgIC5yZXBsYWNlKC90b1N0cmluZ3wgZm9yIFteXFxdXSsvZywgJy4qPycpICsgJyQnXG4gICAgKTtcblxuICAgIC8qKiBOYXRpdmUgbWV0aG9kIHNob3J0Y3V0cyAqL1xuICAgIHZhciBjZWlsID0gTWF0aC5jZWlsLFxuICAgICAgICBjbGVhclRpbWVvdXQgPSBjb250ZXh0LmNsZWFyVGltZW91dCxcbiAgICAgICAgZmxvb3IgPSBNYXRoLmZsb29yLFxuICAgICAgICBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLFxuICAgICAgICBnZXRQcm90b3R5cGVPZiA9IGlzTmF0aXZlKGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKSAmJiBnZXRQcm90b3R5cGVPZixcbiAgICAgICAgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgICAgcHVzaCA9IGFycmF5UmVmLnB1c2gsXG4gICAgICAgIHNldFRpbWVvdXQgPSBjb250ZXh0LnNldFRpbWVvdXQsXG4gICAgICAgIHNwbGljZSA9IGFycmF5UmVmLnNwbGljZSxcbiAgICAgICAgdW5zaGlmdCA9IGFycmF5UmVmLnVuc2hpZnQ7XG5cbiAgICAvKiogVXNlZCB0byBzZXQgbWV0YSBkYXRhIG9uIGZ1bmN0aW9ucyAqL1xuICAgIHZhciBkZWZpbmVQcm9wZXJ0eSA9IChmdW5jdGlvbigpIHtcbiAgICAgIC8vIElFIDggb25seSBhY2NlcHRzIERPTSBlbGVtZW50c1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG8gPSB7fSxcbiAgICAgICAgICAgIGZ1bmMgPSBpc05hdGl2ZShmdW5jID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KSAmJiBmdW5jLFxuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYyhvLCBvLCBvKSAmJiBmdW5jO1xuICAgICAgfSBjYXRjaChlKSB7IH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSgpKTtcblxuICAgIC8qIE5hdGl2ZSBtZXRob2Qgc2hvcnRjdXRzIGZvciBtZXRob2RzIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzICovXG4gICAgdmFyIG5hdGl2ZUNyZWF0ZSA9IGlzTmF0aXZlKG5hdGl2ZUNyZWF0ZSA9IE9iamVjdC5jcmVhdGUpICYmIG5hdGl2ZUNyZWF0ZSxcbiAgICAgICAgbmF0aXZlSXNBcnJheSA9IGlzTmF0aXZlKG5hdGl2ZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KSAmJiBuYXRpdmVJc0FycmF5LFxuICAgICAgICBuYXRpdmVJc0Zpbml0ZSA9IGNvbnRleHQuaXNGaW5pdGUsXG4gICAgICAgIG5hdGl2ZUlzTmFOID0gY29udGV4dC5pc05hTixcbiAgICAgICAgbmF0aXZlS2V5cyA9IGlzTmF0aXZlKG5hdGl2ZUtleXMgPSBPYmplY3Qua2V5cykgJiYgbmF0aXZlS2V5cyxcbiAgICAgICAgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluLFxuICAgICAgICBuYXRpdmVQYXJzZUludCA9IGNvbnRleHQucGFyc2VJbnQsXG4gICAgICAgIG5hdGl2ZVJhbmRvbSA9IE1hdGgucmFuZG9tO1xuXG4gICAgLyoqIFVzZWQgdG8gbG9va3VwIGEgYnVpbHQtaW4gY29uc3RydWN0b3IgYnkgW1tDbGFzc11dICovXG4gICAgdmFyIGN0b3JCeUNsYXNzID0ge307XG4gICAgY3RvckJ5Q2xhc3NbYXJyYXlDbGFzc10gPSBBcnJheTtcbiAgICBjdG9yQnlDbGFzc1tib29sQ2xhc3NdID0gQm9vbGVhbjtcbiAgICBjdG9yQnlDbGFzc1tkYXRlQ2xhc3NdID0gRGF0ZTtcbiAgICBjdG9yQnlDbGFzc1tmdW5jQ2xhc3NdID0gRnVuY3Rpb247XG4gICAgY3RvckJ5Q2xhc3Nbb2JqZWN0Q2xhc3NdID0gT2JqZWN0O1xuICAgIGN0b3JCeUNsYXNzW251bWJlckNsYXNzXSA9IE51bWJlcjtcbiAgICBjdG9yQnlDbGFzc1tyZWdleHBDbGFzc10gPSBSZWdFeHA7XG4gICAgY3RvckJ5Q2xhc3Nbc3RyaW5nQ2xhc3NdID0gU3RyaW5nO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYGxvZGFzaGAgb2JqZWN0IHdoaWNoIHdyYXBzIHRoZSBnaXZlbiB2YWx1ZSB0byBlbmFibGUgaW50dWl0aXZlXG4gICAgICogbWV0aG9kIGNoYWluaW5nLlxuICAgICAqXG4gICAgICogSW4gYWRkaXRpb24gdG8gTG8tRGFzaCBtZXRob2RzLCB3cmFwcGVycyBhbHNvIGhhdmUgdGhlIGZvbGxvd2luZyBgQXJyYXlgIG1ldGhvZHM6XG4gICAgICogYGNvbmNhdGAsIGBqb2luYCwgYHBvcGAsIGBwdXNoYCwgYHJldmVyc2VgLCBgc2hpZnRgLCBgc2xpY2VgLCBgc29ydGAsIGBzcGxpY2VgLFxuICAgICAqIGFuZCBgdW5zaGlmdGBcbiAgICAgKlxuICAgICAqIENoYWluaW5nIGlzIHN1cHBvcnRlZCBpbiBjdXN0b20gYnVpbGRzIGFzIGxvbmcgYXMgdGhlIGB2YWx1ZWAgbWV0aG9kIGlzXG4gICAgICogaW1wbGljaXRseSBvciBleHBsaWNpdGx5IGluY2x1ZGVkIGluIHRoZSBidWlsZC5cbiAgICAgKlxuICAgICAqIFRoZSBjaGFpbmFibGUgd3JhcHBlciBmdW5jdGlvbnMgYXJlOlxuICAgICAqIGBhZnRlcmAsIGBhc3NpZ25gLCBgYmluZGAsIGBiaW5kQWxsYCwgYGJpbmRLZXlgLCBgY2hhaW5gLCBgY29tcGFjdGAsXG4gICAgICogYGNvbXBvc2VgLCBgY29uY2F0YCwgYGNvdW50QnlgLCBgY3JlYXRlYCwgYGNyZWF0ZUNhbGxiYWNrYCwgYGN1cnJ5YCxcbiAgICAgKiBgZGVib3VuY2VgLCBgZGVmYXVsdHNgLCBgZGVmZXJgLCBgZGVsYXlgLCBgZGlmZmVyZW5jZWAsIGBmaWx0ZXJgLCBgZmxhdHRlbmAsXG4gICAgICogYGZvckVhY2hgLCBgZm9yRWFjaFJpZ2h0YCwgYGZvckluYCwgYGZvckluUmlnaHRgLCBgZm9yT3duYCwgYGZvck93blJpZ2h0YCxcbiAgICAgKiBgZnVuY3Rpb25zYCwgYGdyb3VwQnlgLCBgaW5kZXhCeWAsIGBpbml0aWFsYCwgYGludGVyc2VjdGlvbmAsIGBpbnZlcnRgLFxuICAgICAqIGBpbnZva2VgLCBga2V5c2AsIGBtYXBgLCBgbWF4YCwgYG1lbW9pemVgLCBgbWVyZ2VgLCBgbWluYCwgYG9iamVjdGAsIGBvbWl0YCxcbiAgICAgKiBgb25jZWAsIGBwYWlyc2AsIGBwYXJ0aWFsYCwgYHBhcnRpYWxSaWdodGAsIGBwaWNrYCwgYHBsdWNrYCwgYHB1bGxgLCBgcHVzaGAsXG4gICAgICogYHJhbmdlYCwgYHJlamVjdGAsIGByZW1vdmVgLCBgcmVzdGAsIGByZXZlcnNlYCwgYHNodWZmbGVgLCBgc2xpY2VgLCBgc29ydGAsXG4gICAgICogYHNvcnRCeWAsIGBzcGxpY2VgLCBgdGFwYCwgYHRocm90dGxlYCwgYHRpbWVzYCwgYHRvQXJyYXlgLCBgdHJhbnNmb3JtYCxcbiAgICAgKiBgdW5pb25gLCBgdW5pcWAsIGB1bnNoaWZ0YCwgYHVuemlwYCwgYHZhbHVlc2AsIGB3aGVyZWAsIGB3aXRob3V0YCwgYHdyYXBgLFxuICAgICAqIGFuZCBgemlwYFxuICAgICAqXG4gICAgICogVGhlIG5vbi1jaGFpbmFibGUgd3JhcHBlciBmdW5jdGlvbnMgYXJlOlxuICAgICAqIGBjbG9uZWAsIGBjbG9uZURlZXBgLCBgY29udGFpbnNgLCBgZXNjYXBlYCwgYGV2ZXJ5YCwgYGZpbmRgLCBgZmluZEluZGV4YCxcbiAgICAgKiBgZmluZEtleWAsIGBmaW5kTGFzdGAsIGBmaW5kTGFzdEluZGV4YCwgYGZpbmRMYXN0S2V5YCwgYGhhc2AsIGBpZGVudGl0eWAsXG4gICAgICogYGluZGV4T2ZgLCBgaXNBcmd1bWVudHNgLCBgaXNBcnJheWAsIGBpc0Jvb2xlYW5gLCBgaXNEYXRlYCwgYGlzRWxlbWVudGAsXG4gICAgICogYGlzRW1wdHlgLCBgaXNFcXVhbGAsIGBpc0Zpbml0ZWAsIGBpc0Z1bmN0aW9uYCwgYGlzTmFOYCwgYGlzTnVsbGAsIGBpc051bWJlcmAsXG4gICAgICogYGlzT2JqZWN0YCwgYGlzUGxhaW5PYmplY3RgLCBgaXNSZWdFeHBgLCBgaXNTdHJpbmdgLCBgaXNVbmRlZmluZWRgLCBgam9pbmAsXG4gICAgICogYGxhc3RJbmRleE9mYCwgYG1peGluYCwgYG5vQ29uZmxpY3RgLCBgcGFyc2VJbnRgLCBgcG9wYCwgYHJhbmRvbWAsIGByZWR1Y2VgLFxuICAgICAqIGByZWR1Y2VSaWdodGAsIGByZXN1bHRgLCBgc2hpZnRgLCBgc2l6ZWAsIGBzb21lYCwgYHNvcnRlZEluZGV4YCwgYHJ1bkluQ29udGV4dGAsXG4gICAgICogYHRlbXBsYXRlYCwgYHVuZXNjYXBlYCwgYHVuaXF1ZUlkYCwgYW5kIGB2YWx1ZWBcbiAgICAgKlxuICAgICAqIFRoZSB3cmFwcGVyIGZ1bmN0aW9ucyBgZmlyc3RgIGFuZCBgbGFzdGAgcmV0dXJuIHdyYXBwZWQgdmFsdWVzIHdoZW4gYG5gIGlzXG4gICAgICogcHJvdmlkZWQsIG90aGVyd2lzZSB0aGV5IHJldHVybiB1bndyYXBwZWQgdmFsdWVzLlxuICAgICAqXG4gICAgICogRXhwbGljaXQgY2hhaW5pbmcgY2FuIGJlIGVuYWJsZWQgYnkgdXNpbmcgdGhlIGBfLmNoYWluYCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbmFtZSBfXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQGNhdGVnb3J5IENoYWluaW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcCBpbiBhIGBsb2Rhc2hgIGluc3RhbmNlLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYSBgbG9kYXNoYCBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHdyYXBwZWQgPSBfKFsxLCAyLCAzXSk7XG4gICAgICpcbiAgICAgKiAvLyByZXR1cm5zIGFuIHVud3JhcHBlZCB2YWx1ZVxuICAgICAqIHdyYXBwZWQucmVkdWNlKGZ1bmN0aW9uKHN1bSwgbnVtKSB7XG4gICAgICogICByZXR1cm4gc3VtICsgbnVtO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDZcbiAgICAgKlxuICAgICAqIC8vIHJldHVybnMgYSB3cmFwcGVkIHZhbHVlXG4gICAgICogdmFyIHNxdWFyZXMgPSB3cmFwcGVkLm1hcChmdW5jdGlvbihudW0pIHtcbiAgICAgKiAgIHJldHVybiBudW0gKiBudW07XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoc3F1YXJlcyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShzcXVhcmVzLnZhbHVlKCkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2Rhc2godmFsdWUpIHtcbiAgICAgIC8vIGRvbid0IHdyYXAgaWYgYWxyZWFkeSB3cmFwcGVkLCBldmVuIGlmIHdyYXBwZWQgYnkgYSBkaWZmZXJlbnQgYGxvZGFzaGAgY29uc3RydWN0b3JcbiAgICAgIHJldHVybiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmICFpc0FycmF5KHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnX193cmFwcGVkX18nKSlcbiAgICAgICA/IHZhbHVlXG4gICAgICAgOiBuZXcgbG9kYXNoV3JhcHBlcih2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmYXN0IHBhdGggZm9yIGNyZWF0aW5nIGBsb2Rhc2hgIHdyYXBwZXIgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcCBpbiBhIGBsb2Rhc2hgIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2hhaW5BbGwgQSBmbGFnIHRvIGVuYWJsZSBjaGFpbmluZyBmb3IgYWxsIG1ldGhvZHNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGEgYGxvZGFzaGAgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbG9kYXNoV3JhcHBlcih2YWx1ZSwgY2hhaW5BbGwpIHtcbiAgICAgIHRoaXMuX19jaGFpbl9fID0gISFjaGFpbkFsbDtcbiAgICAgIHRoaXMuX193cmFwcGVkX18gPSB2YWx1ZTtcbiAgICB9XG4gICAgLy8gZW5zdXJlIGBuZXcgbG9kYXNoV3JhcHBlcmAgaXMgYW4gaW5zdGFuY2Ugb2YgYGxvZGFzaGBcbiAgICBsb2Rhc2hXcmFwcGVyLnByb3RvdHlwZSA9IGxvZGFzaC5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgdXNlZCB0byBmbGFnIGVudmlyb25tZW50cyBmZWF0dXJlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqL1xuICAgIHZhciBzdXBwb3J0ID0gbG9kYXNoLnN1cHBvcnQgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBmdW5jdGlvbnMgY2FuIGJlIGRlY29tcGlsZWQgYnkgYEZ1bmN0aW9uI3RvU3RyaW5nYFxuICAgICAqIChhbGwgYnV0IFBTMyBhbmQgb2xkZXIgT3BlcmEgbW9iaWxlIGJyb3dzZXJzICYgYXZvaWRlZCBpbiBXaW5kb3dzIDggYXBwcykuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgXy5zdXBwb3J0XG4gICAgICogQHR5cGUgYm9vbGVhblxuICAgICAqL1xuICAgIHN1cHBvcnQuZnVuY0RlY29tcCA9ICFpc05hdGl2ZShjb250ZXh0LldpblJURXJyb3IpICYmIHJlVGhpcy50ZXN0KHJ1bkluQ29udGV4dCk7XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgaWYgYEZ1bmN0aW9uI25hbWVgIGlzIHN1cHBvcnRlZCAoYWxsIGJ1dCBJRSkuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgXy5zdXBwb3J0XG4gICAgICogQHR5cGUgYm9vbGVhblxuICAgICAqL1xuICAgIHN1cHBvcnQuZnVuY05hbWVzID0gdHlwZW9mIEZ1bmN0aW9uLm5hbWUgPT0gJ3N0cmluZyc7XG5cbiAgICAvKipcbiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgdGVtcGxhdGUgZGVsaW1pdGVycyB1c2VkIGJ5IExvLURhc2ggYXJlIHNpbWlsYXIgdG8gdGhvc2UgaW5cbiAgICAgKiBlbWJlZGRlZCBSdWJ5IChFUkIpLiBDaGFuZ2UgdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmVcbiAgICAgKiBkZWxpbWl0ZXJzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICovXG4gICAgbG9kYXNoLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBkZXRlY3QgYGRhdGFgIHByb3BlcnR5IHZhbHVlcyB0byBiZSBIVE1MLWVzY2FwZWQuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgUmVnRXhwXG4gICAgICAgKi9cbiAgICAgICdlc2NhcGUnOiAvPCUtKFtcXHNcXFNdKz8pJT4vZyxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIGRldGVjdCBjb2RlIHRvIGJlIGV2YWx1YXRlZC5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBSZWdFeHBcbiAgICAgICAqL1xuICAgICAgJ2V2YWx1YXRlJzogLzwlKFtcXHNcXFNdKz8pJT4vZyxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIGRldGVjdCBgZGF0YWAgcHJvcGVydHkgdmFsdWVzIHRvIGluamVjdC5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBSZWdFeHBcbiAgICAgICAqL1xuICAgICAgJ2ludGVycG9sYXRlJzogcmVJbnRlcnBvbGF0ZSxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIHJlZmVyZW5jZSB0aGUgZGF0YSBvYmplY3QgaW4gdGhlIHRlbXBsYXRlIHRleHQuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgKi9cbiAgICAgICd2YXJpYWJsZSc6ICcnLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gaW1wb3J0IHZhcmlhYmxlcyBpbnRvIHRoZSBjb21waWxlZCB0ZW1wbGF0ZS5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgICAqL1xuICAgICAgJ2ltcG9ydHMnOiB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5ncy5pbXBvcnRzXG4gICAgICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICAnXyc6IGxvZGFzaFxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmJpbmRgIHRoYXQgY3JlYXRlcyB0aGUgYm91bmQgZnVuY3Rpb24gYW5kXG4gICAgICogc2V0cyBpdHMgbWV0YSBkYXRhLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBiaW5kRGF0YSBUaGUgYmluZCBkYXRhIGFycmF5LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VCaW5kKGJpbmREYXRhKSB7XG4gICAgICB2YXIgZnVuYyA9IGJpbmREYXRhWzBdLFxuICAgICAgICAgIHBhcnRpYWxBcmdzID0gYmluZERhdGFbMl0sXG4gICAgICAgICAgdGhpc0FyZyA9IGJpbmREYXRhWzRdO1xuXG4gICAgICBmdW5jdGlvbiBib3VuZCgpIHtcbiAgICAgICAgLy8gYEZ1bmN0aW9uI2JpbmRgIHNwZWNcbiAgICAgICAgLy8gaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4zLjQuNVxuICAgICAgICBpZiAocGFydGlhbEFyZ3MpIHtcbiAgICAgICAgICAvLyBhdm9pZCBgYXJndW1lbnRzYCBvYmplY3QgZGVvcHRpbWl6YXRpb25zIGJ5IHVzaW5nIGBzbGljZWAgaW5zdGVhZFxuICAgICAgICAgIC8vIG9mIGBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbGAgYW5kIG5vdCBhc3NpZ25pbmcgYGFyZ3VtZW50c2AgdG8gYVxuICAgICAgICAgIC8vIHZhcmlhYmxlIGFzIGEgdGVybmFyeSBleHByZXNzaW9uXG4gICAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShwYXJ0aWFsQXJncyk7XG4gICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1pbWljIHRoZSBjb25zdHJ1Y3RvcidzIGByZXR1cm5gIGJlaGF2aW9yXG4gICAgICAgIC8vIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTMuMi4yXG4gICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHtcbiAgICAgICAgICAvLyBlbnN1cmUgYG5ldyBib3VuZGAgaXMgYW4gaW5zdGFuY2Ugb2YgYGZ1bmNgXG4gICAgICAgICAgdmFyIHRoaXNCaW5kaW5nID0gYmFzZUNyZWF0ZShmdW5jLnByb3RvdHlwZSksXG4gICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MgfHwgYXJndW1lbnRzKTtcbiAgICAgICAgICByZXR1cm4gaXNPYmplY3QocmVzdWx0KSA/IHJlc3VsdCA6IHRoaXNCaW5kaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MgfHwgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIHNldEJpbmREYXRhKGJvdW5kLCBiaW5kRGF0YSk7XG4gICAgICByZXR1cm4gYm91bmQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY2xvbmVgIHdpdGhvdXQgYXJndW1lbnQganVnZ2xpbmcgb3Igc3VwcG9ydFxuICAgICAqIGZvciBgdGhpc0FyZ2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2xvbmUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwPWZhbHNlXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIGNsb25lcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ2xvbmUodmFsdWUsIGlzRGVlcCwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBpbnNwZWN0IFtbQ2xhc3NdXVxuICAgICAgdmFyIGlzT2JqID0gaXNPYmplY3QodmFsdWUpO1xuICAgICAgaWYgKGlzT2JqKSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgICAgICAgaWYgKCFjbG9uZWFibGVDbGFzc2VzW2NsYXNzTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN0b3IgPSBjdG9yQnlDbGFzc1tjbGFzc05hbWVdO1xuICAgICAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xuICAgICAgICAgIGNhc2UgYm9vbENsYXNzOlxuICAgICAgICAgIGNhc2UgZGF0ZUNsYXNzOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjdG9yKCt2YWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIG51bWJlckNsYXNzOlxuICAgICAgICAgIGNhc2Ugc3RyaW5nQ2xhc3M6XG4gICAgICAgICAgICByZXR1cm4gbmV3IGN0b3IodmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSByZWdleHBDbGFzczpcbiAgICAgICAgICAgIHJlc3VsdCA9IGN0b3IodmFsdWUuc291cmNlLCByZUZsYWdzLmV4ZWModmFsdWUpKTtcbiAgICAgICAgICAgIHJlc3VsdC5sYXN0SW5kZXggPSB2YWx1ZS5sYXN0SW5kZXg7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICB2YXIgaXNBcnIgPSBpc0FycmF5KHZhbHVlKTtcbiAgICAgIGlmIChpc0RlZXApIHtcbiAgICAgICAgLy8gY2hlY2sgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXMgYW5kIHJldHVybiBjb3JyZXNwb25kaW5nIGNsb25lXG4gICAgICAgIHZhciBpbml0ZWRTdGFjayA9ICFzdGFja0E7XG4gICAgICAgIHN0YWNrQSB8fCAoc3RhY2tBID0gZ2V0QXJyYXkoKSk7XG4gICAgICAgIHN0YWNrQiB8fCAoc3RhY2tCID0gZ2V0QXJyYXkoKSk7XG5cbiAgICAgICAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBpc0FyciA/IGN0b3IodmFsdWUubGVuZ3RoKSA6IHt9O1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IGlzQXJyID8gc2xpY2UodmFsdWUpIDogYXNzaWduKHt9LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICAvLyBhZGQgYXJyYXkgcHJvcGVydGllcyBhc3NpZ25lZCBieSBgUmVnRXhwI2V4ZWNgXG4gICAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdpbmRleCcpKSB7XG4gICAgICAgICAgcmVzdWx0LmluZGV4ID0gdmFsdWUuaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdpbnB1dCcpKSB7XG4gICAgICAgICAgcmVzdWx0LmlucHV0ID0gdmFsdWUuaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGV4aXQgZm9yIHNoYWxsb3cgY2xvbmVcbiAgICAgIGlmICghaXNEZWVwKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICAvLyBhZGQgdGhlIHNvdXJjZSB2YWx1ZSB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHNcbiAgICAgIC8vIGFuZCBhc3NvY2lhdGUgaXQgd2l0aCBpdHMgY2xvbmVcbiAgICAgIHN0YWNrQS5wdXNoKHZhbHVlKTtcbiAgICAgIHN0YWNrQi5wdXNoKHJlc3VsdCk7XG5cbiAgICAgIC8vIHJlY3Vyc2l2ZWx5IHBvcHVsYXRlIGNsb25lIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cylcbiAgICAgIChpc0FyciA/IGZvckVhY2ggOiBmb3JPd24pKHZhbHVlLCBmdW5jdGlvbihvYmpWYWx1ZSwga2V5KSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gYmFzZUNsb25lKG9ialZhbHVlLCBpc0RlZXAsIGNhbGxiYWNrLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGluaXRlZFN0YWNrKSB7XG4gICAgICAgIHJlbGVhc2VBcnJheShzdGFja0EpO1xuICAgICAgICByZWxlYXNlQXJyYXkoc3RhY2tCKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFzc2lnbmluZ1xuICAgICAqIHByb3BlcnRpZXMgdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNyZWF0ZShwcm90b3R5cGUsIHByb3BlcnRpZXMpIHtcbiAgICAgIHJldHVybiBpc09iamVjdChwcm90b3R5cGUpID8gbmF0aXZlQ3JlYXRlKHByb3RvdHlwZSkgOiB7fTtcbiAgICB9XG4gICAgLy8gZmFsbGJhY2sgZm9yIGJyb3dzZXJzIHdpdGhvdXQgYE9iamVjdC5jcmVhdGVgXG4gICAgaWYgKCFuYXRpdmVDcmVhdGUpIHtcbiAgICAgIGJhc2VDcmVhdGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGZ1bmN0aW9uIE9iamVjdCgpIHt9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICAgICAgICBpZiAoaXNPYmplY3QocHJvdG90eXBlKSkge1xuICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgT2JqZWN0O1xuICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHQgfHwgY29udGV4dC5PYmplY3QoKTtcbiAgICAgICAgfTtcbiAgICAgIH0oKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlQ2FsbGJhY2tgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY3JlYXRpbmdcbiAgICAgKiBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gW2Z1bmM9aWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGEgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRoZSBjYWxsYmFjayBhY2NlcHRzLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBhIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VDcmVhdGVDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGlkZW50aXR5O1xuICAgICAgfVxuICAgICAgLy8gZXhpdCBlYXJseSBmb3Igbm8gYHRoaXNBcmdgIG9yIGFscmVhZHkgYm91bmQgYnkgYEZ1bmN0aW9uI2JpbmRgXG4gICAgICBpZiAodHlwZW9mIHRoaXNBcmcgPT0gJ3VuZGVmaW5lZCcgfHwgISgncHJvdG90eXBlJyBpbiBmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuYztcbiAgICAgIH1cbiAgICAgIHZhciBiaW5kRGF0YSA9IGZ1bmMuX19iaW5kRGF0YV9fO1xuICAgICAgaWYgKHR5cGVvZiBiaW5kRGF0YSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoc3VwcG9ydC5mdW5jTmFtZXMpIHtcbiAgICAgICAgICBiaW5kRGF0YSA9ICFmdW5jLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgYmluZERhdGEgPSBiaW5kRGF0YSB8fCAhc3VwcG9ydC5mdW5jRGVjb21wO1xuICAgICAgICBpZiAoIWJpbmREYXRhKSB7XG4gICAgICAgICAgdmFyIHNvdXJjZSA9IGZuVG9TdHJpbmcuY2FsbChmdW5jKTtcbiAgICAgICAgICBpZiAoIXN1cHBvcnQuZnVuY05hbWVzKSB7XG4gICAgICAgICAgICBiaW5kRGF0YSA9ICFyZUZ1bmNOYW1lLnRlc3Qoc291cmNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFiaW5kRGF0YSkge1xuICAgICAgICAgICAgLy8gY2hlY2tzIGlmIGBmdW5jYCByZWZlcmVuY2VzIHRoZSBgdGhpc2Aga2V5d29yZCBhbmQgc3RvcmVzIHRoZSByZXN1bHRcbiAgICAgICAgICAgIGJpbmREYXRhID0gcmVUaGlzLnRlc3Qoc291cmNlKTtcbiAgICAgICAgICAgIHNldEJpbmREYXRhKGZ1bmMsIGJpbmREYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGV4aXQgZWFybHkgaWYgdGhlcmUgYXJlIG5vIGB0aGlzYCByZWZlcmVuY2VzIG9yIGBmdW5jYCBpcyBib3VuZFxuICAgICAgaWYgKGJpbmREYXRhID09PSBmYWxzZSB8fCAoYmluZERhdGEgIT09IHRydWUgJiYgYmluZERhdGFbMV0gJiAxKSkge1xuICAgICAgICByZXR1cm4gZnVuYztcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoYXJnQ291bnQpIHtcbiAgICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYSwgYik7XG4gICAgICAgIH07XG4gICAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gYmluZChmdW5jLCB0aGlzQXJnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgY3JlYXRlV3JhcHBlcmAgdGhhdCBjcmVhdGVzIHRoZSB3cmFwcGVyIGFuZFxuICAgICAqIHNldHMgaXRzIG1ldGEgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYmluZERhdGEgVGhlIGJpbmQgZGF0YSBhcnJheS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ3JlYXRlV3JhcHBlcihiaW5kRGF0YSkge1xuICAgICAgdmFyIGZ1bmMgPSBiaW5kRGF0YVswXSxcbiAgICAgICAgICBiaXRtYXNrID0gYmluZERhdGFbMV0sXG4gICAgICAgICAgcGFydGlhbEFyZ3MgPSBiaW5kRGF0YVsyXSxcbiAgICAgICAgICBwYXJ0aWFsUmlnaHRBcmdzID0gYmluZERhdGFbM10sXG4gICAgICAgICAgdGhpc0FyZyA9IGJpbmREYXRhWzRdLFxuICAgICAgICAgIGFyaXR5ID0gYmluZERhdGFbNV07XG5cbiAgICAgIHZhciBpc0JpbmQgPSBiaXRtYXNrICYgMSxcbiAgICAgICAgICBpc0JpbmRLZXkgPSBiaXRtYXNrICYgMixcbiAgICAgICAgICBpc0N1cnJ5ID0gYml0bWFzayAmIDQsXG4gICAgICAgICAgaXNDdXJyeUJvdW5kID0gYml0bWFzayAmIDgsXG4gICAgICAgICAga2V5ID0gZnVuYztcblxuICAgICAgZnVuY3Rpb24gYm91bmQoKSB7XG4gICAgICAgIHZhciB0aGlzQmluZGluZyA9IGlzQmluZCA/IHRoaXNBcmcgOiB0aGlzO1xuICAgICAgICBpZiAocGFydGlhbEFyZ3MpIHtcbiAgICAgICAgICB2YXIgYXJncyA9IHNsaWNlKHBhcnRpYWxBcmdzKTtcbiAgICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRpYWxSaWdodEFyZ3MgfHwgaXNDdXJyeSkge1xuICAgICAgICAgIGFyZ3MgfHwgKGFyZ3MgPSBzbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgICBpZiAocGFydGlhbFJpZ2h0QXJncykge1xuICAgICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBwYXJ0aWFsUmlnaHRBcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzQ3VycnkgJiYgYXJncy5sZW5ndGggPCBhcml0eSkge1xuICAgICAgICAgICAgYml0bWFzayB8PSAxNiAmIH4zMjtcbiAgICAgICAgICAgIHJldHVybiBiYXNlQ3JlYXRlV3JhcHBlcihbZnVuYywgKGlzQ3VycnlCb3VuZCA/IGJpdG1hc2sgOiBiaXRtYXNrICYgfjMpLCBhcmdzLCBudWxsLCB0aGlzQXJnLCBhcml0eV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhcmdzIHx8IChhcmdzID0gYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKGlzQmluZEtleSkge1xuICAgICAgICAgIGZ1bmMgPSB0aGlzQmluZGluZ1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHtcbiAgICAgICAgICB0aGlzQmluZGluZyA9IGJhc2VDcmVhdGUoZnVuYy5wcm90b3R5cGUpO1xuICAgICAgICAgIHZhciByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzKTtcbiAgICAgICAgICByZXR1cm4gaXNPYmplY3QocmVzdWx0KSA/IHJlc3VsdCA6IHRoaXNCaW5kaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIHNldEJpbmREYXRhKGJvdW5kLCBiaW5kRGF0YSk7XG4gICAgICByZXR1cm4gYm91bmQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZGlmZmVyZW5jZWAgdGhhdCBhY2NlcHRzIGEgc2luZ2xlIGFycmF5XG4gICAgICogb2YgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSBhcnJheSBvZiB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VEaWZmZXJlbmNlKGFycmF5LCB2YWx1ZXMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIGlzTGFyZ2UgPSBsZW5ndGggPj0gbGFyZ2VBcnJheVNpemUgJiYgaW5kZXhPZiA9PT0gYmFzZUluZGV4T2YsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIGlmIChpc0xhcmdlKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IGNyZWF0ZUNhY2hlKHZhbHVlcyk7XG4gICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgIGluZGV4T2YgPSBjYWNoZUluZGV4T2Y7XG4gICAgICAgICAgdmFsdWVzID0gY2FjaGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNMYXJnZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmIChpbmRleE9mKHZhbHVlcywgdmFsdWUpIDwgMCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGlzTGFyZ2UpIHtcbiAgICAgICAgcmVsZWFzZU9iamVjdCh2YWx1ZXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mbGF0dGVuYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBvciBgdGhpc0FyZ2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZsYXR0ZW4uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTaGFsbG93PWZhbHNlXSBBIGZsYWcgdG8gcmVzdHJpY3QgZmxhdHRlbmluZyB0byBhIHNpbmdsZSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1N0cmljdD1mYWxzZV0gQSBmbGFnIHRvIHJlc3RyaWN0IGZsYXR0ZW5pbmcgdG8gYXJyYXlzIGFuZCBgYXJndW1lbnRzYCBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzdGFydCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZsYXR0ZW4oYXJyYXksIGlzU2hhbGxvdywgaXNTdHJpY3QsIGZyb21JbmRleCkge1xuICAgICAgdmFyIGluZGV4ID0gKGZyb21JbmRleCB8fCAwKSAtIDEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG5cbiAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUubGVuZ3RoID09ICdudW1iZXInXG4gICAgICAgICAgICAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNBcmd1bWVudHModmFsdWUpKSkge1xuICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGZsYXR0ZW4gYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cylcbiAgICAgICAgICBpZiAoIWlzU2hhbGxvdykge1xuICAgICAgICAgICAgdmFsdWUgPSBiYXNlRmxhdHRlbih2YWx1ZSwgaXNTaGFsbG93LCBpc1N0cmljdCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciB2YWxJbmRleCA9IC0xLFxuICAgICAgICAgICAgICB2YWxMZW5ndGggPSB2YWx1ZS5sZW5ndGgsXG4gICAgICAgICAgICAgIHJlc0luZGV4ID0gcmVzdWx0Lmxlbmd0aDtcblxuICAgICAgICAgIHJlc3VsdC5sZW5ndGggKz0gdmFsTGVuZ3RoO1xuICAgICAgICAgIHdoaWxlICgrK3ZhbEluZGV4IDwgdmFsTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXN1bHRbcmVzSW5kZXgrK10gPSB2YWx1ZVt2YWxJbmRleF07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCFpc1N0cmljdCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCwgd2l0aG91dCBzdXBwb3J0IGZvciBgdGhpc0FyZ2AgYmluZGluZyxcbiAgICAgKiB0aGF0IGFsbG93cyBwYXJ0aWFsIFwiXy53aGVyZVwiIHN0eWxlIGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IGEgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBiIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpc1doZXJlPWZhbHNlXSBBIGZsYWcgdG8gaW5kaWNhdGUgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYGFgIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgYmAgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJc0VxdWFsKGEsIGIsIGNhbGxiYWNrLCBpc1doZXJlLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgLy8gdXNlZCB0byBpbmRpY2F0ZSB0aGF0IHdoZW4gY29tcGFyaW5nIG9iamVjdHMsIGBhYCBoYXMgYXQgbGVhc3QgdGhlIHByb3BlcnRpZXMgb2YgYGJgXG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKGEsIGIpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gZXhpdCBlYXJseSBmb3IgaWRlbnRpY2FsIHZhbHVlc1xuICAgICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgLy8gdHJlYXQgYCswYCB2cy4gYC0wYCBhcyBub3QgZXF1YWxcbiAgICAgICAgcmV0dXJuIGEgIT09IDAgfHwgKDEgLyBhID09IDEgLyBiKTtcbiAgICAgIH1cbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIGEsXG4gICAgICAgICAgb3RoZXJUeXBlID0gdHlwZW9mIGI7XG5cbiAgICAgIC8vIGV4aXQgZWFybHkgZm9yIHVubGlrZSBwcmltaXRpdmUgdmFsdWVzXG4gICAgICBpZiAoYSA9PT0gYSAmJlxuICAgICAgICAgICEoYSAmJiBvYmplY3RUeXBlc1t0eXBlXSkgJiZcbiAgICAgICAgICAhKGIgJiYgb2JqZWN0VHlwZXNbb3RoZXJUeXBlXSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gZXhpdCBlYXJseSBmb3IgYG51bGxgIGFuZCBgdW5kZWZpbmVkYCBhdm9pZGluZyBFUzMncyBGdW5jdGlvbiNjYWxsIGJlaGF2aW9yXG4gICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjMuNC40XG4gICAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICAgIH1cbiAgICAgIC8vIGNvbXBhcmUgW1tDbGFzc11dIG5hbWVzXG4gICAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKSxcbiAgICAgICAgICBvdGhlckNsYXNzID0gdG9TdHJpbmcuY2FsbChiKTtcblxuICAgICAgaWYgKGNsYXNzTmFtZSA9PSBhcmdzQ2xhc3MpIHtcbiAgICAgICAgY2xhc3NOYW1lID0gb2JqZWN0Q2xhc3M7XG4gICAgICB9XG4gICAgICBpZiAob3RoZXJDbGFzcyA9PSBhcmdzQ2xhc3MpIHtcbiAgICAgICAgb3RoZXJDbGFzcyA9IG9iamVjdENsYXNzO1xuICAgICAgfVxuICAgICAgaWYgKGNsYXNzTmFtZSAhPSBvdGhlckNsYXNzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG4gICAgICAgIGNhc2UgYm9vbENsYXNzOlxuICAgICAgICBjYXNlIGRhdGVDbGFzczpcbiAgICAgICAgICAvLyBjb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWJlcnMsIGRhdGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgYm9vbGVhbnNcbiAgICAgICAgICAvLyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhcyBub3QgZXF1YWxcbiAgICAgICAgICByZXR1cm4gK2EgPT0gK2I7XG5cbiAgICAgICAgY2FzZSBudW1iZXJDbGFzczpcbiAgICAgICAgICAvLyB0cmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWxcbiAgICAgICAgICByZXR1cm4gKGEgIT0gK2EpXG4gICAgICAgICAgICA/IGIgIT0gK2JcbiAgICAgICAgICAgIC8vIGJ1dCB0cmVhdCBgKzBgIHZzLiBgLTBgIGFzIG5vdCBlcXVhbFxuICAgICAgICAgICAgOiAoYSA9PSAwID8gKDEgLyBhID09IDEgLyBiKSA6IGEgPT0gK2IpO1xuXG4gICAgICAgIGNhc2UgcmVnZXhwQ2xhc3M6XG4gICAgICAgIGNhc2Ugc3RyaW5nQ2xhc3M6XG4gICAgICAgICAgLy8gY29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyAoaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4xMC42LjQpXG4gICAgICAgICAgLy8gdHJlYXQgc3RyaW5nIHByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IGluc3RhbmNlcyBhcyBlcXVhbFxuICAgICAgICAgIHJldHVybiBhID09IFN0cmluZyhiKTtcbiAgICAgIH1cbiAgICAgIHZhciBpc0FyciA9IGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzO1xuICAgICAgaWYgKCFpc0Fycikge1xuICAgICAgICAvLyB1bndyYXAgYW55IGBsb2Rhc2hgIHdyYXBwZWQgdmFsdWVzXG4gICAgICAgIHZhciBhV3JhcHBlZCA9IGhhc093blByb3BlcnR5LmNhbGwoYSwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgICAgICBiV3JhcHBlZCA9IGhhc093blByb3BlcnR5LmNhbGwoYiwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICAgICAgaWYgKGFXcmFwcGVkIHx8IGJXcmFwcGVkKSB7XG4gICAgICAgICAgcmV0dXJuIGJhc2VJc0VxdWFsKGFXcmFwcGVkID8gYS5fX3dyYXBwZWRfXyA6IGEsIGJXcmFwcGVkID8gYi5fX3dyYXBwZWRfXyA6IGIsIGNhbGxiYWNrLCBpc1doZXJlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXhpdCBmb3IgZnVuY3Rpb25zIGFuZCBET00gbm9kZXNcbiAgICAgICAgaWYgKGNsYXNzTmFtZSAhPSBvYmplY3RDbGFzcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbiBvbGRlciB2ZXJzaW9ucyBvZiBPcGVyYSwgYGFyZ3VtZW50c2Agb2JqZWN0cyBoYXZlIGBBcnJheWAgY29uc3RydWN0b3JzXG4gICAgICAgIHZhciBjdG9yQSA9IGEuY29uc3RydWN0b3IsXG4gICAgICAgICAgICBjdG9yQiA9IGIuY29uc3RydWN0b3I7XG5cbiAgICAgICAgLy8gbm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWxcbiAgICAgICAgaWYgKGN0b3JBICE9IGN0b3JCICYmXG4gICAgICAgICAgICAgICEoaXNGdW5jdGlvbihjdG9yQSkgJiYgY3RvckEgaW5zdGFuY2VvZiBjdG9yQSAmJiBpc0Z1bmN0aW9uKGN0b3JCKSAmJiBjdG9yQiBpbnN0YW5jZW9mIGN0b3JCKSAmJlxuICAgICAgICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBhICYmICdjb25zdHJ1Y3RvcicgaW4gYilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gYXNzdW1lIGN5Y2xpYyBzdHJ1Y3R1cmVzIGFyZSBlcXVhbFxuICAgICAgLy8gdGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpYyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjFcbiAgICAgIC8vIHNlY3Rpb24gMTUuMTIuMywgYWJzdHJhY3Qgb3BlcmF0aW9uIGBKT2AgKGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMTIuMylcbiAgICAgIHZhciBpbml0ZWRTdGFjayA9ICFzdGFja0E7XG4gICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IGdldEFycmF5KCkpO1xuICAgICAgc3RhY2tCIHx8IChzdGFja0IgPSBnZXRBcnJheSgpKTtcblxuICAgICAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IGEpIHtcbiAgICAgICAgICByZXR1cm4gc3RhY2tCW2xlbmd0aF0gPT0gYjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHNpemUgPSAwO1xuICAgICAgcmVzdWx0ID0gdHJ1ZTtcblxuICAgICAgLy8gYWRkIGBhYCBhbmQgYGJgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0c1xuICAgICAgc3RhY2tBLnB1c2goYSk7XG4gICAgICBzdGFja0IucHVzaChiKTtcblxuICAgICAgLy8gcmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKVxuICAgICAgaWYgKGlzQXJyKSB7XG4gICAgICAgIC8vIGNvbXBhcmUgbGVuZ3RocyB0byBkZXRlcm1pbmUgaWYgYSBkZWVwIGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5XG4gICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgICBzaXplID0gYi5sZW5ndGg7XG4gICAgICAgIHJlc3VsdCA9IHNpemUgPT0gbGVuZ3RoO1xuXG4gICAgICAgIGlmIChyZXN1bHQgfHwgaXNXaGVyZSkge1xuICAgICAgICAgIC8vIGRlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXNcbiAgICAgICAgICB3aGlsZSAoc2l6ZS0tKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBsZW5ndGgsXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBiW3NpemVdO1xuXG4gICAgICAgICAgICBpZiAoaXNXaGVyZSkge1xuICAgICAgICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgICAgICAgIGlmICgocmVzdWx0ID0gYmFzZUlzRXF1YWwoYVtpbmRleF0sIHZhbHVlLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpKSkge1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCEocmVzdWx0ID0gYmFzZUlzRXF1YWwoYVtzaXplXSwgdmFsdWUsIGNhbGxiYWNrLCBpc1doZXJlLCBzdGFja0EsIHN0YWNrQikpKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIGRlZXAgY29tcGFyZSBvYmplY3RzIHVzaW5nIGBmb3JJbmAsIGluc3RlYWQgb2YgYGZvck93bmAsIHRvIGF2b2lkIGBPYmplY3Qua2V5c2BcbiAgICAgICAgLy8gd2hpY2gsIGluIHRoaXMgY2FzZSwgaXMgbW9yZSBjb3N0bHlcbiAgICAgICAgZm9ySW4oYiwgZnVuY3Rpb24odmFsdWUsIGtleSwgYikge1xuICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIGtleSkpIHtcbiAgICAgICAgICAgIC8vIGNvdW50IHRoZSBudW1iZXIgb2YgcHJvcGVydGllcy5cbiAgICAgICAgICAgIHNpemUrKztcbiAgICAgICAgICAgIC8vIGRlZXAgY29tcGFyZSBlYWNoIHByb3BlcnR5IHZhbHVlLlxuICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKGEsIGtleSkgJiYgYmFzZUlzRXF1YWwoYVtrZXldLCB2YWx1ZSwgY2FsbGJhY2ssIGlzV2hlcmUsIHN0YWNrQSwgc3RhY2tCKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVzdWx0ICYmICFpc1doZXJlKSB7XG4gICAgICAgICAgLy8gZW5zdXJlIGJvdGggb2JqZWN0cyBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBwcm9wZXJ0aWVzXG4gICAgICAgICAgZm9ySW4oYSwgZnVuY3Rpb24odmFsdWUsIGtleSwgYSkge1xuICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoYSwga2V5KSkge1xuICAgICAgICAgICAgICAvLyBgc2l6ZWAgd2lsbCBiZSBgLTFgIGlmIGBhYCBoYXMgbW9yZSBwcm9wZXJ0aWVzIHRoYW4gYGJgXG4gICAgICAgICAgICAgIHJldHVybiAocmVzdWx0ID0gLS1zaXplID4gLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdGFja0EucG9wKCk7XG4gICAgICBzdGFja0IucG9wKCk7XG5cbiAgICAgIGlmIChpbml0ZWRTdGFjaykge1xuICAgICAgICByZWxlYXNlQXJyYXkoc3RhY2tBKTtcbiAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1lcmdlYCB3aXRob3V0IGFyZ3VtZW50IGp1Z2dsaW5nIG9yIHN1cHBvcnRcbiAgICAgKiBmb3IgYHRoaXNBcmdgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnaW5nIHByb3BlcnRpZXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIHZhbHVlcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZU1lcmdlKG9iamVjdCwgc291cmNlLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIChpc0FycmF5KHNvdXJjZSkgPyBmb3JFYWNoIDogZm9yT3duKShzb3VyY2UsIGZ1bmN0aW9uKHNvdXJjZSwga2V5KSB7XG4gICAgICAgIHZhciBmb3VuZCxcbiAgICAgICAgICAgIGlzQXJyLFxuICAgICAgICAgICAgcmVzdWx0ID0gc291cmNlLFxuICAgICAgICAgICAgdmFsdWUgPSBvYmplY3Rba2V5XTtcblxuICAgICAgICBpZiAoc291cmNlICYmICgoaXNBcnIgPSBpc0FycmF5KHNvdXJjZSkpIHx8IGlzUGxhaW5PYmplY3Qoc291cmNlKSkpIHtcbiAgICAgICAgICAvLyBhdm9pZCBtZXJnaW5nIHByZXZpb3VzbHkgbWVyZ2VkIGN5Y2xpYyBzb3VyY2VzXG4gICAgICAgICAgdmFyIHN0YWNrTGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgICAgICAgICB3aGlsZSAoc3RhY2tMZW5ndGgtLSkge1xuICAgICAgICAgICAgaWYgKChmb3VuZCA9IHN0YWNrQVtzdGFja0xlbmd0aF0gPT0gc291cmNlKSkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IHN0YWNrQltzdGFja0xlbmd0aF07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICB2YXIgaXNTaGFsbG93O1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrKHZhbHVlLCBzb3VyY2UpO1xuICAgICAgICAgICAgICBpZiAoKGlzU2hhbGxvdyA9IHR5cGVvZiByZXN1bHQgIT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSByZXN1bHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNTaGFsbG93KSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gaXNBcnJcbiAgICAgICAgICAgICAgICA/IChpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW10pXG4gICAgICAgICAgICAgICAgOiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFkZCBgc291cmNlYCBhbmQgYXNzb2NpYXRlZCBgdmFsdWVgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0c1xuICAgICAgICAgICAgc3RhY2tBLnB1c2goc291cmNlKTtcbiAgICAgICAgICAgIHN0YWNrQi5wdXNoKHZhbHVlKTtcblxuICAgICAgICAgICAgLy8gcmVjdXJzaXZlbHkgbWVyZ2Ugb2JqZWN0cyBhbmQgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cylcbiAgICAgICAgICAgIGlmICghaXNTaGFsbG93KSB7XG4gICAgICAgICAgICAgIGJhc2VNZXJnZSh2YWx1ZSwgc291cmNlLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrKHZhbHVlLCBzb3VyY2UpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gc291cmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdmFsdWUgPSByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5yYW5kb21gIHdpdGhvdXQgYXJndW1lbnQganVnZ2xpbmcgb3Igc3VwcG9ydFxuICAgICAqIGZvciByZXR1cm5pbmcgZmxvYXRpbmctcG9pbnQgbnVtYmVycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pbiBUaGUgbWluaW11bSBwb3NzaWJsZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSBtYXhpbXVtIHBvc3NpYmxlIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYSByYW5kb20gbnVtYmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VSYW5kb20obWluLCBtYXgpIHtcbiAgICAgIHJldHVybiBtaW4gKyBmbG9vcihuYXRpdmVSYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udW5pcWAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICogb3IgYHRoaXNBcmdgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU29ydGVkPWZhbHNlXSBBIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCBgYXJyYXlgIGlzIHNvcnRlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBkdXBsaWNhdGUtdmFsdWUtZnJlZSBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlVW5pcShhcnJheSwgaXNTb3J0ZWQsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgdmFyIGlzTGFyZ2UgPSAhaXNTb3J0ZWQgJiYgbGVuZ3RoID49IGxhcmdlQXJyYXlTaXplICYmIGluZGV4T2YgPT09IGJhc2VJbmRleE9mLFxuICAgICAgICAgIHNlZW4gPSAoY2FsbGJhY2sgfHwgaXNMYXJnZSkgPyBnZXRBcnJheSgpIDogcmVzdWx0O1xuXG4gICAgICBpZiAoaXNMYXJnZSkge1xuICAgICAgICB2YXIgY2FjaGUgPSBjcmVhdGVDYWNoZShzZWVuKTtcbiAgICAgICAgaW5kZXhPZiA9IGNhY2hlSW5kZXhPZjtcbiAgICAgICAgc2VlbiA9IGNhY2hlO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICAgICAgY29tcHV0ZWQgPSBjYWxsYmFjayA/IGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgYXJyYXkpIDogdmFsdWU7XG5cbiAgICAgICAgaWYgKGlzU29ydGVkXG4gICAgICAgICAgICAgID8gIWluZGV4IHx8IHNlZW5bc2Vlbi5sZW5ndGggLSAxXSAhPT0gY29tcHV0ZWRcbiAgICAgICAgICAgICAgOiBpbmRleE9mKHNlZW4sIGNvbXB1dGVkKSA8IDBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgIGlmIChjYWxsYmFjayB8fCBpc0xhcmdlKSB7XG4gICAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0xhcmdlKSB7XG4gICAgICAgIHJlbGVhc2VBcnJheShzZWVuLmFycmF5KTtcbiAgICAgICAgcmVsZWFzZU9iamVjdChzZWVuKTtcbiAgICAgIH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgcmVsZWFzZUFycmF5KHNlZW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGEgY29sbGVjdGlvbiwgY3JlYXRpbmcgYW4gb2JqZWN0IGNvbXBvc2VkXG4gICAgICogb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nIGVhY2ggZWxlbWVudCBvZiB0aGUgY29sbGVjdGlvblxuICAgICAqIHRocm91Z2ggYSBjYWxsYmFjay4gVGhlIGdpdmVuIGBzZXR0ZXJgIGZ1bmN0aW9uIHNldHMgdGhlIGtleXMgYW5kIHZhbHVlc1xuICAgICAqIG9mIHRoZSBjb21wb3NlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlciBUaGUgc2V0dGVyIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFnZ3JlZ2F0b3IgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQWdncmVnYXRvcihzZXR0ZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcblxuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XG4gICAgICAgICAgICBzZXR0ZXIocmVzdWx0LCB2YWx1ZSwgY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSwgY29sbGVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICBzZXR0ZXIocmVzdWx0LCB2YWx1ZSwgY2FsbGJhY2sodmFsdWUsIGtleSwgY29sbGVjdGlvbiksIGNvbGxlY3Rpb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgZWl0aGVyIGN1cnJpZXMgb3IgaW52b2tlcyBgZnVuY2BcbiAgICAgKiB3aXRoIGFuIG9wdGlvbmFsIGB0aGlzYCBiaW5kaW5nIGFuZCBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBmdW5jIFRoZSBmdW5jdGlvbiBvciBtZXRob2QgbmFtZSB0byByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgbWV0aG9kIGZsYWdzIHRvIGNvbXBvc2UuXG4gICAgICogIFRoZSBiaXRtYXNrIG1heSBiZSBjb21wb3NlZCBvZiB0aGUgZm9sbG93aW5nIGZsYWdzOlxuICAgICAqICAxIC0gYF8uYmluZGBcbiAgICAgKiAgMiAtIGBfLmJpbmRLZXlgXG4gICAgICogIDQgLSBgXy5jdXJyeWBcbiAgICAgKiAgOCAtIGBfLmN1cnJ5YCAoYm91bmQpXG4gICAgICogIDE2IC0gYF8ucGFydGlhbGBcbiAgICAgKiAgMzIgLSBgXy5wYXJ0aWFsUmlnaHRgXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3BhcnRpYWxBcmdzXSBBbiBhcnJheSBvZiBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZVxuICAgICAqICBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsUmlnaHRBcmdzXSBBbiBhcnJheSBvZiBhcmd1bWVudHMgdG8gYXBwZW5kIHRvIHRob3NlXG4gICAgICogIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5XSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZnVuYywgYml0bWFzaywgcGFydGlhbEFyZ3MsIHBhcnRpYWxSaWdodEFyZ3MsIHRoaXNBcmcsIGFyaXR5KSB7XG4gICAgICB2YXIgaXNCaW5kID0gYml0bWFzayAmIDEsXG4gICAgICAgICAgaXNCaW5kS2V5ID0gYml0bWFzayAmIDIsXG4gICAgICAgICAgaXNDdXJyeSA9IGJpdG1hc2sgJiA0LFxuICAgICAgICAgIGlzQ3VycnlCb3VuZCA9IGJpdG1hc2sgJiA4LFxuICAgICAgICAgIGlzUGFydGlhbCA9IGJpdG1hc2sgJiAxNixcbiAgICAgICAgICBpc1BhcnRpYWxSaWdodCA9IGJpdG1hc2sgJiAzMjtcblxuICAgICAgaWYgKCFpc0JpbmRLZXkgJiYgIWlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgIH1cbiAgICAgIGlmIChpc1BhcnRpYWwgJiYgIXBhcnRpYWxBcmdzLmxlbmd0aCkge1xuICAgICAgICBiaXRtYXNrICY9IH4xNjtcbiAgICAgICAgaXNQYXJ0aWFsID0gcGFydGlhbEFyZ3MgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1BhcnRpYWxSaWdodCAmJiAhcGFydGlhbFJpZ2h0QXJncy5sZW5ndGgpIHtcbiAgICAgICAgYml0bWFzayAmPSB+MzI7XG4gICAgICAgIGlzUGFydGlhbFJpZ2h0ID0gcGFydGlhbFJpZ2h0QXJncyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIGJpbmREYXRhID0gZnVuYyAmJiBmdW5jLl9fYmluZERhdGFfXztcbiAgICAgIGlmIChiaW5kRGF0YSAmJiBiaW5kRGF0YSAhPT0gdHJ1ZSkge1xuICAgICAgICAvLyBjbG9uZSBgYmluZERhdGFgXG4gICAgICAgIGJpbmREYXRhID0gc2xpY2UoYmluZERhdGEpO1xuICAgICAgICBpZiAoYmluZERhdGFbMl0pIHtcbiAgICAgICAgICBiaW5kRGF0YVsyXSA9IHNsaWNlKGJpbmREYXRhWzJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmluZERhdGFbM10pIHtcbiAgICAgICAgICBiaW5kRGF0YVszXSA9IHNsaWNlKGJpbmREYXRhWzNdKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgYHRoaXNCaW5kaW5nYCBpcyBub3QgcHJldmlvdXNseSBib3VuZFxuICAgICAgICBpZiAoaXNCaW5kICYmICEoYmluZERhdGFbMV0gJiAxKSkge1xuICAgICAgICAgIGJpbmREYXRhWzRdID0gdGhpc0FyZztcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgaWYgcHJldmlvdXNseSBib3VuZCBidXQgbm90IGN1cnJlbnRseSAoc3Vic2VxdWVudCBjdXJyaWVkIGZ1bmN0aW9ucylcbiAgICAgICAgaWYgKCFpc0JpbmQgJiYgYmluZERhdGFbMV0gJiAxKSB7XG4gICAgICAgICAgYml0bWFzayB8PSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBjdXJyaWVkIGFyaXR5IGlmIG5vdCB5ZXQgc2V0XG4gICAgICAgIGlmIChpc0N1cnJ5ICYmICEoYmluZERhdGFbMV0gJiA0KSkge1xuICAgICAgICAgIGJpbmREYXRhWzVdID0gYXJpdHk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXBwZW5kIHBhcnRpYWwgbGVmdCBhcmd1bWVudHNcbiAgICAgICAgaWYgKGlzUGFydGlhbCkge1xuICAgICAgICAgIHB1c2guYXBwbHkoYmluZERhdGFbMl0gfHwgKGJpbmREYXRhWzJdID0gW10pLCBwYXJ0aWFsQXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXBwZW5kIHBhcnRpYWwgcmlnaHQgYXJndW1lbnRzXG4gICAgICAgIGlmIChpc1BhcnRpYWxSaWdodCkge1xuICAgICAgICAgIHVuc2hpZnQuYXBwbHkoYmluZERhdGFbM10gfHwgKGJpbmREYXRhWzNdID0gW10pLCBwYXJ0aWFsUmlnaHRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtZXJnZSBmbGFnc1xuICAgICAgICBiaW5kRGF0YVsxXSB8PSBiaXRtYXNrO1xuICAgICAgICByZXR1cm4gY3JlYXRlV3JhcHBlci5hcHBseShudWxsLCBiaW5kRGF0YSk7XG4gICAgICB9XG4gICAgICAvLyBmYXN0IHBhdGggZm9yIGBfLmJpbmRgXG4gICAgICB2YXIgY3JlYXRlciA9IChiaXRtYXNrID09IDEgfHwgYml0bWFzayA9PT0gMTcpID8gYmFzZUJpbmQgOiBiYXNlQ3JlYXRlV3JhcHBlcjtcbiAgICAgIHJldHVybiBjcmVhdGVyKFtmdW5jLCBiaXRtYXNrLCBwYXJ0aWFsQXJncywgcGFydGlhbFJpZ2h0QXJncywgdGhpc0FyZywgYXJpdHldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGJ5IGBlc2NhcGVgIHRvIGNvbnZlcnQgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWF0Y2ggVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlc2NhcGVIdG1sQ2hhcihtYXRjaCkge1xuICAgICAgcmV0dXJuIGh0bWxFc2NhcGVzW21hdGNoXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhcHByb3ByaWF0ZSBcImluZGV4T2ZcIiBmdW5jdGlvbi4gSWYgdGhlIGBfLmluZGV4T2ZgIG1ldGhvZCBpc1xuICAgICAqIGN1c3RvbWl6ZWQsIHRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGN1c3RvbSBtZXRob2QsIG90aGVyd2lzZSBpdCByZXR1cm5zXG4gICAgICogdGhlIGBiYXNlSW5kZXhPZmAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgXCJpbmRleE9mXCIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0SW5kZXhPZigpIHtcbiAgICAgIHZhciByZXN1bHQgPSAocmVzdWx0ID0gbG9kYXNoLmluZGV4T2YpID09PSBpbmRleE9mID8gYmFzZUluZGV4T2YgOiByZXN1bHQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc05hdGl2ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nICYmIHJlTmF0aXZlLnRlc3QodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYHRoaXNgIGJpbmRpbmcgZGF0YSBvbiBhIGdpdmVuIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBzZXQgZGF0YSBvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZSBUaGUgZGF0YSBhcnJheSB0byBzZXQuXG4gICAgICovXG4gICAgdmFyIHNldEJpbmREYXRhID0gIWRlZmluZVByb3BlcnR5ID8gbm9vcCA6IGZ1bmN0aW9uKGZ1bmMsIHZhbHVlKSB7XG4gICAgICBkZXNjcmlwdG9yLnZhbHVlID0gdmFsdWU7XG4gICAgICBkZWZpbmVQcm9wZXJ0eShmdW5jLCAnX19iaW5kRGF0YV9fJywgZGVzY3JpcHRvcik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEEgZmFsbGJhY2sgaW1wbGVtZW50YXRpb24gb2YgYGlzUGxhaW5PYmplY3RgIHdoaWNoIGNoZWNrcyBpZiBhIGdpdmVuIHZhbHVlXG4gICAgICogaXMgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLCBhc3N1bWluZyBvYmplY3RzIGNyZWF0ZWRcbiAgICAgKiBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IgaGF2ZSBubyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGFuZCB0aGF0XG4gICAgICogdGhlcmUgYXJlIG5vIGBPYmplY3QucHJvdG90eXBlYCBleHRlbnNpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNoaW1Jc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gICAgICB2YXIgY3RvcixcbiAgICAgICAgICByZXN1bHQ7XG5cbiAgICAgIC8vIGF2b2lkIG5vbiBPYmplY3Qgb2JqZWN0cywgYGFyZ3VtZW50c2Agb2JqZWN0cywgYW5kIERPTSBlbGVtZW50c1xuICAgICAgaWYgKCEodmFsdWUgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gb2JqZWN0Q2xhc3MpIHx8XG4gICAgICAgICAgKGN0b3IgPSB2YWx1ZS5jb25zdHJ1Y3RvciwgaXNGdW5jdGlvbihjdG9yKSAmJiAhKGN0b3IgaW5zdGFuY2VvZiBjdG9yKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gSW4gbW9zdCBlbnZpcm9ubWVudHMgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMgYXJlIGl0ZXJhdGVkIGJlZm9yZVxuICAgICAgLy8gaXRzIGluaGVyaXRlZCBwcm9wZXJ0aWVzLiBJZiB0aGUgbGFzdCBpdGVyYXRlZCBwcm9wZXJ0eSBpcyBhbiBvYmplY3Qnc1xuICAgICAgLy8gb3duIHByb3BlcnR5IHRoZW4gdGhlcmUgYXJlIG5vIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gICAgICBmb3JJbih2YWx1ZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICByZXN1bHQgPSBrZXk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0eXBlb2YgcmVzdWx0ID09ICd1bmRlZmluZWQnIHx8IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHJlc3VsdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCBieSBgdW5lc2NhcGVgIHRvIGNvbnZlcnQgSFRNTCBlbnRpdGllcyB0byBjaGFyYWN0ZXJzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWF0Y2ggVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIHVuZXNjYXBlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5lc2NhcGVIdG1sQ2hhcihtYXRjaCkge1xuICAgICAgcmV0dXJuIGh0bWxVbmVzY2FwZXNbbWF0Y2hdO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIChmdW5jdGlvbigpIHsgcmV0dXJuIF8uaXNBcmd1bWVudHMoYXJndW1lbnRzKTsgfSkoMSwgMiwgMyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmxlbmd0aCA9PSAnbnVtYmVyJyAmJlxuICAgICAgICB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzQ2xhc3MgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIChmdW5jdGlvbigpIHsgcmV0dXJuIF8uaXNBcnJheShhcmd1bWVudHMpOyB9KSgpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5sZW5ndGggPT0gJ251bWJlcicgJiZcbiAgICAgICAgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJyYXlDbGFzcyB8fCBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQSBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBvZiBgT2JqZWN0LmtleXNgIHdoaWNoIHByb2R1Y2VzIGFuIGFycmF5IG9mIHRoZVxuICAgICAqIGdpdmVuIG9iamVjdCdzIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKi9cbiAgICB2YXIgc2hpbUtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIHZhciBpbmRleCwgaXRlcmFibGUgPSBvYmplY3QsIHJlc3VsdCA9IFtdO1xuICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIGlmICghKG9iamVjdFR5cGVzW3R5cGVvZiBvYmplY3RdKSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgZm9yIChpbmRleCBpbiBpdGVyYWJsZSkge1xuICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZXJhYmxlLCBpbmRleCkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGluZGV4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBjb21wb3NlZCBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ua2V5cyh7ICdvbmUnOiAxLCAndHdvJzogMiwgJ3RocmVlJzogMyB9KTtcbiAgICAgKiAvLyA9PiBbJ29uZScsICd0d28nLCAndGhyZWUnXSAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICAgKi9cbiAgICB2YXIga2V5cyA9ICFuYXRpdmVLZXlzID8gc2hpbUtleXMgOiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlS2V5cyhvYmplY3QpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGNvbnZlcnQgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzOlxuICAgICAqXG4gICAgICogVGhvdWdoIHRoZSBgPmAgY2hhcmFjdGVyIGlzIGVzY2FwZWQgZm9yIHN5bW1ldHJ5LCBjaGFyYWN0ZXJzIGxpa2UgYD5gIGFuZCBgL2BcbiAgICAgKiBkb24ndCByZXF1aXJlIGVzY2FwaW5nIGluIEhUTUwgYW5kIGhhdmUgbm8gc3BlY2lhbCBtZWFuaW5nIHVubGVzcyB0aGV5J3JlIHBhcnRcbiAgICAgKiBvZiBhIHRhZyBvciBhbiB1bnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWUuXG4gICAgICogaHR0cDovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvYW1iaWd1b3VzLWFtcGVyc2FuZHMgKHVuZGVyIFwic2VtaS1yZWxhdGVkIGZ1biBmYWN0XCIpXG4gICAgICovXG4gICAgdmFyIGh0bWxFc2NhcGVzID0ge1xuICAgICAgJyYnOiAnJmFtcDsnLFxuICAgICAgJzwnOiAnJmx0OycsXG4gICAgICAnPic6ICcmZ3Q7JyxcbiAgICAgICdcIic6ICcmcXVvdDsnLFxuICAgICAgXCInXCI6ICcmIzM5OydcbiAgICB9O1xuXG4gICAgLyoqIFVzZWQgdG8gY29udmVydCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMgKi9cbiAgICB2YXIgaHRtbFVuZXNjYXBlcyA9IGludmVydChodG1sRXNjYXBlcyk7XG5cbiAgICAvKiogVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMgKi9cbiAgICB2YXIgcmVFc2NhcGVkSHRtbCA9IFJlZ0V4cCgnKCcgKyBrZXlzKGh0bWxVbmVzY2FwZXMpLmpvaW4oJ3wnKSArICcpJywgJ2cnKSxcbiAgICAgICAgcmVVbmVzY2FwZWRIdG1sID0gUmVnRXhwKCdbJyArIGtleXMoaHRtbEVzY2FwZXMpLmpvaW4oJycpICsgJ10nLCAnZycpO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdChzKSB0byB0aGUgZGVzdGluYXRpb25cbiAgICAgKiBvYmplY3QuIFN1YnNlcXVlbnQgc291cmNlcyB3aWxsIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91c1xuICAgICAqIHNvdXJjZXMuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCB0byBwcm9kdWNlIHRoZVxuICAgICAqIGFzc2lnbmVkIHZhbHVlcy4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHR3b1xuICAgICAqIGFyZ3VtZW50czsgKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAqIEBhbGlhcyBleHRlbmRcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZV0gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25pbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5hc3NpZ24oeyAnbmFtZSc6ICdmcmVkJyB9LCB7ICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XG4gICAgICpcbiAgICAgKiB2YXIgZGVmYXVsdHMgPSBfLnBhcnRpYWxSaWdodChfLmFzc2lnbiwgZnVuY3Rpb24oYSwgYikge1xuICAgICAqICAgcmV0dXJuIHR5cGVvZiBhID09ICd1bmRlZmluZWQnID8gYiA6IGE7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdiYXJuZXknIH07XG4gICAgICogZGVmYXVsdHMob2JqZWN0LCB7ICduYW1lJzogJ2ZyZWQnLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XG4gICAgICovXG4gICAgdmFyIGFzc2lnbiA9IGZ1bmN0aW9uKG9iamVjdCwgc291cmNlLCBndWFyZCkge1xuICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IG9iamVjdCwgcmVzdWx0ID0gaXRlcmFibGU7XG4gICAgICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgYXJnc0luZGV4ID0gMCxcbiAgICAgICAgICBhcmdzTGVuZ3RoID0gdHlwZW9mIGd1YXJkID09ICdudW1iZXInID8gMiA6IGFyZ3MubGVuZ3RoO1xuICAgICAgaWYgKGFyZ3NMZW5ndGggPiAzICYmIHR5cGVvZiBhcmdzW2FyZ3NMZW5ndGggLSAyXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhhcmdzWy0tYXJnc0xlbmd0aCAtIDFdLCBhcmdzW2FyZ3NMZW5ndGgtLV0sIDIpO1xuICAgICAgfSBlbHNlIGlmIChhcmdzTGVuZ3RoID4gMiAmJiB0eXBlb2YgYXJnc1thcmdzTGVuZ3RoIC0gMV0gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjayA9IGFyZ3NbLS1hcmdzTGVuZ3RoXTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcbiAgICAgICAgaXRlcmFibGUgPSBhcmdzW2FyZ3NJbmRleF07XG4gICAgICAgIGlmIChpdGVyYWJsZSAmJiBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdKSB7XG4gICAgICAgIHZhciBvd25JbmRleCA9IC0xLFxuICAgICAgICAgICAgb3duUHJvcHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdICYmIGtleXMoaXRlcmFibGUpLFxuICAgICAgICAgICAgbGVuZ3RoID0gb3duUHJvcHMgPyBvd25Qcm9wcy5sZW5ndGggOiAwO1xuXG4gICAgICAgIHdoaWxlICgrK293bkluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgaW5kZXggPSBvd25Qcm9wc1tvd25JbmRleF07XG4gICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGNhbGxiYWNrID8gY2FsbGJhY2socmVzdWx0W2luZGV4XSwgaXRlcmFibGVbaW5kZXhdKSA6IGl0ZXJhYmxlW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiBgdmFsdWVgLiBJZiBgaXNEZWVwYCBpcyBgdHJ1ZWAgbmVzdGVkIG9iamVjdHMgd2lsbCBhbHNvXG4gICAgICogYmUgY2xvbmVkLCBvdGhlcndpc2UgdGhleSB3aWxsIGJlIGFzc2lnbmVkIGJ5IHJlZmVyZW5jZS4gSWYgYSBjYWxsYmFja1xuICAgICAqIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGUgY2xvbmVkIHZhbHVlcy4gSWYgdGhlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdW5kZWZpbmVkYCBjbG9uaW5nIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuXG4gICAgICogVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2xvbmUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwPWZhbHNlXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiB2YXIgc2hhbGxvdyA9IF8uY2xvbmUoY2hhcmFjdGVycyk7XG4gICAgICogc2hhbGxvd1swXSA9PT0gY2hhcmFjdGVyc1swXTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiB2YXIgZGVlcCA9IF8uY2xvbmUoY2hhcmFjdGVycywgdHJ1ZSk7XG4gICAgICogZGVlcFswXSA9PT0gY2hhcmFjdGVyc1swXTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5taXhpbih7XG4gICAgICogICAnY2xvbmUnOiBfLnBhcnRpYWxSaWdodChfLmNsb25lLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgICByZXR1cm4gXy5pc0VsZW1lbnQodmFsdWUpID8gdmFsdWUuY2xvbmVOb2RlKGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgKiAgIH0pXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiB2YXIgY2xvbmUgPSBfLmNsb25lKGRvY3VtZW50LmJvZHkpO1xuICAgICAqIGNsb25lLmNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAqIC8vID0+IDBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbG9uZSh2YWx1ZSwgaXNEZWVwLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgLy8gYWxsb3dzIHdvcmtpbmcgd2l0aCBcIkNvbGxlY3Rpb25zXCIgbWV0aG9kcyB3aXRob3V0IHVzaW5nIHRoZWlyIGBpbmRleGBcbiAgICAgIC8vIGFuZCBgY29sbGVjdGlvbmAgYXJndW1lbnRzIGZvciBgaXNEZWVwYCBhbmQgYGNhbGxiYWNrYFxuICAgICAgaWYgKHR5cGVvZiBpc0RlZXAgIT0gJ2Jvb2xlYW4nICYmIGlzRGVlcCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXNBcmcgPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2sgPSBpc0RlZXA7XG4gICAgICAgIGlzRGVlcCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VDbG9uZSh2YWx1ZSwgaXNEZWVwLCB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJyAmJiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZGVlcCBjbG9uZSBvZiBgdmFsdWVgLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmVcbiAgICAgKiBleGVjdXRlZCB0byBwcm9kdWNlIHRoZSBjbG9uZWQgdmFsdWVzLiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgdW5kZWZpbmVkYFxuICAgICAqIGNsb25pbmcgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvXG4gICAgICogYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLlxuICAgICAqXG4gICAgICogTm90ZTogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvbiB0aGUgc3RydWN0dXJlZCBjbG9uZSBhbGdvcml0aG0uIEZ1bmN0aW9uc1xuICAgICAqIGFuZCBET00gbm9kZXMgYXJlICoqbm90KiogY2xvbmVkLiBUaGUgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGBhcmd1bWVudHNgIG9iamVjdHMgYW5kXG4gICAgICogb2JqZWN0cyBjcmVhdGVkIGJ5IGNvbnN0cnVjdG9ycyBvdGhlciB0aGFuIGBPYmplY3RgIGFyZSBjbG9uZWQgdG8gcGxhaW4gYE9iamVjdGAgb2JqZWN0cy5cbiAgICAgKiBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5mcmFzdHJ1Y3R1cmUuaHRtbCNpbnRlcm5hbC1zdHJ1Y3R1cmVkLWNsb25pbmctYWxnb3JpdGhtLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBkZWVwIGNsb25lLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZGVlcCBjbG9uZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogdmFyIGRlZXAgPSBfLmNsb25lRGVlcChjaGFyYWN0ZXJzKTtcbiAgICAgKiBkZWVwWzBdID09PSBjaGFyYWN0ZXJzWzBdO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiB2YXIgdmlldyA9IHtcbiAgICAgKiAgICdsYWJlbCc6ICdkb2NzJyxcbiAgICAgKiAgICdub2RlJzogZWxlbWVudFxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgY2xvbmUgPSBfLmNsb25lRGVlcCh2aWV3LCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgcmV0dXJuIF8uaXNFbGVtZW50KHZhbHVlKSA/IHZhbHVlLmNsb25lTm9kZSh0cnVlKSA6IHVuZGVmaW5lZDtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGNsb25lLm5vZGUgPT0gdmlldy5ub2RlO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xvbmVEZWVwKHZhbHVlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIGJhc2VDbG9uZSh2YWx1ZSwgdHJ1ZSwgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicgJiYgYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBnaXZlbiBgcHJvdG90eXBlYCBvYmplY3QuIElmIGFcbiAgICAgKiBgcHJvcGVydGllc2Agb2JqZWN0IGlzIHByb3ZpZGVkIGl0cyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGFyZSBhc3NpZ25lZFxuICAgICAqIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvdHlwZSBUaGUgb2JqZWN0IHRvIGluaGVyaXQgZnJvbS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXNdIFRoZSBwcm9wZXJ0aWVzIHRvIGFzc2lnbiB0byB0aGUgb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIFNoYXBlKCkge1xuICAgICAqICAgdGhpcy54ID0gMDtcbiAgICAgKiAgIHRoaXMueSA9IDA7XG4gICAgICogfVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gQ2lyY2xlKCkge1xuICAgICAqICAgU2hhcGUuY2FsbCh0aGlzKTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBDaXJjbGUucHJvdG90eXBlID0gXy5jcmVhdGUoU2hhcGUucHJvdG90eXBlLCB7ICdjb25zdHJ1Y3Rvcic6IENpcmNsZSB9KTtcbiAgICAgKlxuICAgICAqIHZhciBjaXJjbGUgPSBuZXcgQ2lyY2xlO1xuICAgICAqIGNpcmNsZSBpbnN0YW5jZW9mIENpcmNsZTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBjaXJjbGUgaW5zdGFuY2VvZiBTaGFwZTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKHByb3RvdHlwZSwgcHJvcGVydGllcykge1xuICAgICAgdmFyIHJlc3VsdCA9IGJhc2VDcmVhdGUocHJvdG90eXBlKTtcbiAgICAgIHJldHVybiBwcm9wZXJ0aWVzID8gYXNzaWduKHJlc3VsdCwgcHJvcGVydGllcykgOiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXNzaWducyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3QocykgdG8gdGhlIGRlc3RpbmF0aW9uXG4gICAgICogb2JqZWN0IGZvciBhbGwgZGVzdGluYXRpb24gcHJvcGVydGllcyB0aGF0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAuIE9uY2UgYVxuICAgICAqIHByb3BlcnR5IGlzIHNldCwgYWRkaXRpb25hbCBkZWZhdWx0cyBvZiB0aGUgc2FtZSBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEFsbG93cyB3b3JraW5nIHdpdGggYF8ucmVkdWNlYCB3aXRob3V0IHVzaW5nIGl0c1xuICAgICAqICBga2V5YCBhbmQgYG9iamVjdGAgYXJndW1lbnRzIGFzIHNvdXJjZXMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdiYXJuZXknIH07XG4gICAgICogXy5kZWZhdWx0cyhvYmplY3QsIHsgJ25hbWUnOiAnZnJlZCcsICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1cbiAgICAgKi9cbiAgICB2YXIgZGVmYXVsdHMgPSBmdW5jdGlvbihvYmplY3QsIHNvdXJjZSwgZ3VhcmQpIHtcbiAgICAgIHZhciBpbmRleCwgaXRlcmFibGUgPSBvYmplY3QsIHJlc3VsdCA9IGl0ZXJhYmxlO1xuICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgIGFyZ3NJbmRleCA9IDAsXG4gICAgICAgICAgYXJnc0xlbmd0aCA9IHR5cGVvZiBndWFyZCA9PSAnbnVtYmVyJyA/IDIgOiBhcmdzLmxlbmd0aDtcbiAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcbiAgICAgICAgaXRlcmFibGUgPSBhcmdzW2FyZ3NJbmRleF07XG4gICAgICAgIGlmIChpdGVyYWJsZSAmJiBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdKSB7XG4gICAgICAgIHZhciBvd25JbmRleCA9IC0xLFxuICAgICAgICAgICAgb3duUHJvcHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdICYmIGtleXMoaXRlcmFibGUpLFxuICAgICAgICAgICAgbGVuZ3RoID0gb3duUHJvcHMgPyBvd25Qcm9wcy5sZW5ndGggOiAwO1xuXG4gICAgICAgIHdoaWxlICgrK293bkluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgaW5kZXggPSBvd25Qcm9wc1tvd25JbmRleF07XG4gICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHRbaW5kZXhdID09ICd1bmRlZmluZWQnKSByZXN1bHRbaW5kZXhdID0gaXRlcmFibGVbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kSW5kZXhgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGtleSBvZiB0aGVcbiAgICAgKiBmaXJzdCBlbGVtZW50IHRoYXQgcGFzc2VzIHRoZSBjYWxsYmFjayBjaGVjaywgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXJcbiAgICAgKiAgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0b1xuICAgICAqICBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBSZXR1cm5zIHRoZSBrZXkgb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0ge1xuICAgICAqICAgJ2Jhcm5leSc6IHsgICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxuICAgICAqICAgJ2ZyZWQnOiB7ICAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH0sXG4gICAgICogICAncGViYmxlcyc6IHsgJ2FnZSc6IDEsICAnYmxvY2tlZCc6IGZhbHNlIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5maW5kS2V5KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCA0MDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAnYmFybmV5JyAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEtleShjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAxIH0pO1xuICAgICAqIC8vID0+ICdwZWJibGVzJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kS2V5KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gJ2ZyZWQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZEtleShvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgZm9yT3duKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwga2V5LCBvYmplY3QpKSB7XG4gICAgICAgICAgcmVzdWx0ID0ga2V5O1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZEtleWAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xuICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlclxuICAgICAqICBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvXG4gICAgICogIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IFJldHVybnMgdGhlIGtleSBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSB7XG4gICAgICogICAnYmFybmV5JzogeyAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IHRydWUgfSxcbiAgICAgKiAgICdmcmVkJzogeyAgICAnYWdlJzogNDAsICdibG9ja2VkJzogZmFsc2UgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAnYWdlJzogMSwgICdibG9ja2VkJzogdHJ1ZSB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uZmluZExhc3RLZXkoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZSA8IDQwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHJldHVybnMgYHBlYmJsZXNgLCBhc3N1bWluZyBgXy5maW5kS2V5YCByZXR1cm5zIGBiYXJuZXlgXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0S2V5KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDQwIH0pO1xuICAgICAqIC8vID0+ICdmcmVkJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEtleShjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+ICdwZWJibGVzJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRMYXN0S2V5KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICBmb3JPd25SaWdodChvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGtleSwgb2JqZWN0KSkge1xuICAgICAgICAgIHJlc3VsdCA9IGtleTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QsXG4gICAgICogZXhlY3V0aW5nIHRoZSBjYWxsYmFjayBmb3IgZWFjaCBwcm9wZXJ0eS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxuICAgICAqIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGtleSwgb2JqZWN0KS4gQ2FsbGJhY2tzIG1heSBleGl0XG4gICAgICogaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBTaGFwZSgpIHtcbiAgICAgKiAgIHRoaXMueCA9IDA7XG4gICAgICogICB0aGlzLnkgPSAwO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIFNoYXBlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAqICAgdGhpcy54ICs9IHg7XG4gICAgICogICB0aGlzLnkgKz0geTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5mb3JJbihuZXcgU2hhcGUsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAneCcsICd5JywgYW5kICdtb3ZlJyAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICAgKi9cbiAgICB2YXIgZm9ySW4gPSBmdW5jdGlvbihjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IGNvbGxlY3Rpb24sIHJlc3VsdCA9IGl0ZXJhYmxlO1xuICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIGlmICghb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXNBcmcgPT0gJ3VuZGVmaW5lZCcgPyBjYWxsYmFjayA6IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICAgIGZvciAoaW5kZXggaW4gaXRlcmFibGUpIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2soaXRlcmFibGVbaW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbikgPT09IGZhbHNlKSByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9ySW5gIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcbiAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBpbiB0aGUgb3Bwb3NpdGUgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XG4gICAgICogICB0aGlzLnggPSAwO1xuICAgICAqICAgdGhpcy55ID0gMDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBTaGFwZS5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgKiAgIHRoaXMueCArPSB4O1xuICAgICAqICAgdGhpcy55ICs9IHk7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uZm9ySW5SaWdodChuZXcgU2hhcGUsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnbW92ZScsICd5JywgYW5kICd4JyBhc3N1bWluZyBgXy5mb3JJbiBgIGxvZ3MgJ3gnLCAneScsIGFuZCAnbW92ZSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JJblJpZ2h0KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBwYWlycyA9IFtdO1xuXG4gICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgcGFpcnMucHVzaChrZXksIHZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgbGVuZ3RoID0gcGFpcnMubGVuZ3RoO1xuICAgICAgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayhwYWlyc1tsZW5ndGgtLV0sIHBhaXJzW2xlbmd0aF0sIG9iamVjdCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCwgZXhlY3V0aW5nIHRoZSBjYWxsYmFja1xuICAgICAqIGZvciBlYWNoIHByb3BlcnR5LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwga2V5LCBvYmplY3QpLiBDYWxsYmFja3MgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5XG4gICAgICogZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZm9yT3duKHsgJzAnOiAnemVybycsICcxJzogJ29uZScsICdsZW5ndGgnOiAyIH0sIGZ1bmN0aW9uKG51bSwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJzAnLCAnMScsIGFuZCAnbGVuZ3RoJyAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICAgKi9cbiAgICB2YXIgZm9yT3duID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpbmRleCwgaXRlcmFibGUgPSBjb2xsZWN0aW9uLCByZXN1bHQgPSBpdGVyYWJsZTtcbiAgICAgIGlmICghaXRlcmFibGUpIHJldHVybiByZXN1bHQ7XG4gICAgICBpZiAoIW9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHJldHVybiByZXN1bHQ7XG4gICAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgICB2YXIgb3duSW5kZXggPSAtMSxcbiAgICAgICAgICAgIG93blByb3BzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSAmJiBrZXlzKGl0ZXJhYmxlKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IG93blByb3BzID8gb3duUHJvcHMubGVuZ3RoIDogMDtcblxuICAgICAgICB3aGlsZSAoKytvd25JbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGluZGV4ID0gb3duUHJvcHNbb3duSW5kZXhdO1xuICAgICAgICAgIGlmIChjYWxsYmFjayhpdGVyYWJsZVtpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSA9PT0gZmFsc2UpIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JPd25gIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcbiAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBpbiB0aGUgb3Bwb3NpdGUgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mb3JPd25SaWdodCh7ICcwJzogJ3plcm8nLCAnMSc6ICdvbmUnLCAnbGVuZ3RoJzogMiB9LCBmdW5jdGlvbihudW0sIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICdsZW5ndGgnLCAnMScsIGFuZCAnMCcgYXNzdW1pbmcgYF8uZm9yT3duYCBsb2dzICcwJywgJzEnLCBhbmQgJ2xlbmd0aCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JPd25SaWdodChvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgICBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2xlbmd0aF07XG4gICAgICAgIGlmIChjYWxsYmFjayhvYmplY3Rba2V5XSwga2V5LCBvYmplY3QpID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzb3J0ZWQgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgb2YgYWxsIGVudW1lcmFibGUgcHJvcGVydGllcyxcbiAgICAgKiBvd24gYW5kIGluaGVyaXRlZCwgb2YgYG9iamVjdGAgdGhhdCBoYXZlIGZ1bmN0aW9uIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBtZXRob2RzXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgdGhhdCBoYXZlIGZ1bmN0aW9uIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mdW5jdGlvbnMoXyk7XG4gICAgICogLy8gPT4gWydhbGwnLCAnYW55JywgJ2JpbmQnLCAnYmluZEFsbCcsICdjbG9uZScsICdjb21wYWN0JywgJ2NvbXBvc2UnLCAuLi5dXG4gICAgICovXG4gICAgZnVuY3Rpb24gZnVuY3Rpb25zKG9iamVjdCkge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgZm9ySW4ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdC5zb3J0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgbmFtZSBleGlzdHMgYXMgYSBkaXJlY3QgcHJvcGVydHkgb2YgYG9iamVjdGAsXG4gICAgICogaW5zdGVhZCBvZiBhbiBpbmhlcml0ZWQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBrZXkgaXMgYSBkaXJlY3QgcHJvcGVydHksIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5oYXMoeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH0sICdiJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGhhcyhvYmplY3QsIGtleSkge1xuICAgICAgcmV0dXJuIG9iamVjdCA/IGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpIDogZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlIGludmVydGVkIGtleXMgYW5kIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW52ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNyZWF0ZWQgaW52ZXJ0ZWQgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmludmVydCh7ICdmaXJzdCc6ICdmcmVkJywgJ3NlY29uZCc6ICdiYXJuZXknIH0pO1xuICAgICAqIC8vID0+IHsgJ2ZyZWQnOiAnZmlyc3QnLCAnYmFybmV5JzogJ3NlY29uZCcgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludmVydChvYmplY3QpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSB7fTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgcmVzdWx0W29iamVjdFtrZXldXSA9IGtleTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBib29sZWFuIHZhbHVlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBib29sZWFuIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNCb29sZWFuKG51bGwpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09IGZhbHNlIHx8XG4gICAgICAgIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBib29sQ2xhc3MgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBkYXRlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBkYXRlLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNEYXRlKG5ldyBEYXRlKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IGRhdGVDbGFzcyB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRWxlbWVudChkb2N1bWVudC5ib2R5KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFbGVtZW50KHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUubm9kZVR5cGUgPT09IDEgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgZW1wdHkuIEFycmF5cywgc3RyaW5ncywgb3IgYGFyZ3VtZW50c2Agb2JqZWN0cyB3aXRoIGFcbiAgICAgKiBsZW5ndGggb2YgYDBgIGFuZCBvYmplY3RzIHdpdGggbm8gb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBhcmUgY29uc2lkZXJlZFxuICAgICAqIFwiZW1wdHlcIi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgZW1wdHksIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eSh7fSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KCcnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbCh2YWx1ZSksXG4gICAgICAgICAgbGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuXG4gICAgICBpZiAoKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzIHx8IGNsYXNzTmFtZSA9PSBzdHJpbmdDbGFzcyB8fCBjbGFzc05hbWUgPT0gYXJnc0NsYXNzICkgfHxcbiAgICAgICAgICAoY2xhc3NOYW1lID09IG9iamVjdENsYXNzICYmIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgaXNGdW5jdGlvbih2YWx1ZS5zcGxpY2UpKSkge1xuICAgICAgICByZXR1cm4gIWxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGZvck93bih2YWx1ZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAocmVzdWx0ID0gZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmVcbiAgICAgKiBlcXVpdmFsZW50IHRvIGVhY2ggb3RoZXIuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZFxuICAgICAqIHRvIGNvbXBhcmUgdmFsdWVzLiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgdW5kZWZpbmVkYCBjb21wYXJpc29ucyB3aWxsXG4gICAgICogYmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXG4gICAgICogaW52b2tlZCB3aXRoIHR3byBhcmd1bWVudHM7IChhLCBiKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSBhIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gYiBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdmcmVkJyB9O1xuICAgICAqIHZhciBjb3B5ID0geyAnbmFtZSc6ICdmcmVkJyB9O1xuICAgICAqXG4gICAgICogb2JqZWN0ID09IGNvcHk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNFcXVhbChvYmplY3QsIGNvcHkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIHZhciB3b3JkcyA9IFsnaGVsbG8nLCAnZ29vZGJ5ZSddO1xuICAgICAqIHZhciBvdGhlcldvcmRzID0gWydoaScsICdnb29kYnllJ107XG4gICAgICpcbiAgICAgKiBfLmlzRXF1YWwod29yZHMsIG90aGVyV29yZHMsIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgKiAgIHZhciByZUdyZWV0ID0gL14oPzpoZWxsb3xoaSkkL2ksXG4gICAgICogICAgICAgYUdyZWV0ID0gXy5pc1N0cmluZyhhKSAmJiByZUdyZWV0LnRlc3QoYSksXG4gICAgICogICAgICAgYkdyZWV0ID0gXy5pc1N0cmluZyhiKSAmJiByZUdyZWV0LnRlc3QoYik7XG4gICAgICpcbiAgICAgKiAgIHJldHVybiAoYUdyZWV0IHx8IGJHcmVldCkgPyAoYUdyZWV0ID09IGJHcmVldCkgOiB1bmRlZmluZWQ7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRXF1YWwoYSwgYiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiBiYXNlSXNFcXVhbChhLCBiLCB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJyAmJiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcywgb3IgY2FuIGJlIGNvZXJjZWQgdG8sIGEgZmluaXRlIG51bWJlci5cbiAgICAgKlxuICAgICAqIE5vdGU6IFRoaXMgaXMgbm90IHRoZSBzYW1lIGFzIG5hdGl2ZSBgaXNGaW5pdGVgIHdoaWNoIHdpbGwgcmV0dXJuIHRydWUgZm9yXG4gICAgICogYm9vbGVhbnMgYW5kIGVtcHR5IHN0cmluZ3MuIFNlZSBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEuMi41LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgZmluaXRlLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoLTEwMSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZSgnMTAnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKHRydWUpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKCcnKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZShJbmZpbml0eSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Zpbml0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIG5hdGl2ZUlzRmluaXRlKHZhbHVlKSAmJiAhbmF0aXZlSXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNGdW5jdGlvbihfKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBsYW5ndWFnZSB0eXBlIG9mIE9iamVjdC5cbiAgICAgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzT2JqZWN0KHt9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdCgxKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgICAvLyBjaGVjayBpZiB0aGUgdmFsdWUgaXMgdGhlIEVDTUFTY3JpcHQgbGFuZ3VhZ2UgdHlwZSBvZiBPYmplY3RcbiAgICAgIC8vIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4OFxuICAgICAgLy8gYW5kIGF2b2lkIGEgVjggYnVnXG4gICAgICAvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxXG4gICAgICByZXR1cm4gISEodmFsdWUgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIHZhbHVlXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYE5hTmAuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGlzIGlzIG5vdCB0aGUgc2FtZSBhcyBuYXRpdmUgYGlzTmFOYCB3aGljaCB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yXG4gICAgICogYHVuZGVmaW5lZGAgYW5kIG90aGVyIG5vbi1udW1lcmljIHZhbHVlcy4gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMS4yLjQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBgTmFOYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTmFOKE5hTik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc05hTihuZXcgTnVtYmVyKE5hTikpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIGlzTmFOKHVuZGVmaW5lZCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc05hTih1bmRlZmluZWQpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOYU4odmFsdWUpIHtcbiAgICAgIC8vIGBOYU5gIGFzIGEgcHJpbWl0aXZlIGlzIHRoZSBvbmx5IHZhbHVlIHRoYXQgaXMgbm90IGVxdWFsIHRvIGl0c2VsZlxuICAgICAgLy8gKHBlcmZvcm0gdGhlIFtbQ2xhc3NdXSBjaGVjayBmaXJzdCB0byBhdm9pZCBlcnJvcnMgd2l0aCBzb21lIGhvc3Qgb2JqZWN0cyBpbiBJRSlcbiAgICAgIHJldHVybiBpc051bWJlcih2YWx1ZSkgJiYgdmFsdWUgIT0gK3ZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGBudWxsYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGBudWxsYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTnVsbChudWxsKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTnVsbCh1bmRlZmluZWQpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOdWxsKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBudW1iZXIuXG4gICAgICpcbiAgICAgKiBOb3RlOiBgTmFOYCBpcyBjb25zaWRlcmVkIGEgbnVtYmVyLiBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI3g4LjUuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIG51bWJlciwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTnVtYmVyKDguNCAqIDUpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc051bWJlcih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fFxuICAgICAgICB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gbnVtYmVyQ2xhc3MgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBTaGFwZSgpIHtcbiAgICAgKiAgIHRoaXMueCA9IDA7XG4gICAgICogICB0aGlzLnkgPSAwO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIF8uaXNQbGFpbk9iamVjdChuZXcgU2hhcGUpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc1BsYWluT2JqZWN0KHsgJ3gnOiAwLCAneSc6IDAgfSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBpc1BsYWluT2JqZWN0ID0gIWdldFByb3RvdHlwZU9mID8gc2hpbUlzUGxhaW5PYmplY3QgOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCEodmFsdWUgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gb2JqZWN0Q2xhc3MpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciB2YWx1ZU9mID0gdmFsdWUudmFsdWVPZixcbiAgICAgICAgICBvYmpQcm90byA9IGlzTmF0aXZlKHZhbHVlT2YpICYmIChvYmpQcm90byA9IGdldFByb3RvdHlwZU9mKHZhbHVlT2YpKSAmJiBnZXRQcm90b3R5cGVPZihvYmpQcm90byk7XG5cbiAgICAgIHJldHVybiBvYmpQcm90b1xuICAgICAgICA/ICh2YWx1ZSA9PSBvYmpQcm90byB8fCBnZXRQcm90b3R5cGVPZih2YWx1ZSkgPT0gb2JqUHJvdG8pXG4gICAgICAgIDogc2hpbUlzUGxhaW5PYmplY3QodmFsdWUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgcmVndWxhciBleHByZXNzaW9uLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNSZWdFeHAoL2ZyZWQvKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNSZWdFeHAodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gcmVnZXhwQ2xhc3MgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIHN0cmluZywgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzU3RyaW5nKCdmcmVkJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8XG4gICAgICAgIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdDbGFzcyB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGB1bmRlZmluZWRgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNVbmRlZmluZWQodm9pZCAwKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3VuZGVmaW5lZCc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlzIGFzIGBvYmplY3RgIGFuZCB2YWx1ZXMgZ2VuZXJhdGVkIGJ5XG4gICAgICogcnVubmluZyBlYWNoIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG9mIGBvYmplY3RgIHRocm91Z2ggdGhlIGNhbGxiYWNrLlxuICAgICAqIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XG4gICAgICogKHZhbHVlLCBrZXksIG9iamVjdCkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCB2YWx1ZXMgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBgY2FsbGJhY2tgIGV4ZWN1dGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXBWYWx1ZXMoeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzfSAsIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICogMzsgfSk7XG4gICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiwgJ2MnOiA5IH1cbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0ge1xuICAgICAqICAgJ2ZyZWQnOiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1hcFZhbHVlcyhjaGFyYWN0ZXJzLCAnYWdlJyk7XG4gICAgICogLy8gPT4geyAnZnJlZCc6IDQwLCAncGViYmxlcyc6IDEgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcFZhbHVlcyhvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG5cbiAgICAgIGZvck93bihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICByZXN1bHRba2V5XSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlbHkgbWVyZ2VzIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgdGhlIHNvdXJjZSBvYmplY3QocyksIHRoYXRcbiAgICAgKiBkb24ndCByZXNvbHZlIHRvIGB1bmRlZmluZWRgIGludG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC4gU3Vic2VxdWVudCBzb3VyY2VzXG4gICAgICogd2lsbCBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy4gSWYgYSBjYWxsYmFjayBpc1xuICAgICAqIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGUgbWVyZ2VkIHZhbHVlcyBvZiB0aGUgZGVzdGluYXRpb25cbiAgICAgKiBhbmQgc291cmNlIHByb3BlcnRpZXMuIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGB1bmRlZmluZWRgIG1lcmdpbmcgd2lsbFxuICAgICAqIGJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxuICAgICAqIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnRzOyAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIG1lcmdpbmcgcHJvcGVydGllcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBuYW1lcyA9IHtcbiAgICAgKiAgICdjaGFyYWN0ZXJzJzogW1xuICAgICAqICAgICB7ICduYW1lJzogJ2Jhcm5leScgfSxcbiAgICAgKiAgICAgeyAnbmFtZSc6ICdmcmVkJyB9XG4gICAgICogICBdXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBhZ2VzID0ge1xuICAgICAqICAgJ2NoYXJhY3RlcnMnOiBbXG4gICAgICogICAgIHsgJ2FnZSc6IDM2IH0sXG4gICAgICogICAgIHsgJ2FnZSc6IDQwIH1cbiAgICAgKiAgIF1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5tZXJnZShuYW1lcywgYWdlcyk7XG4gICAgICogLy8gPT4geyAnY2hhcmFjdGVycyc6IFt7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LCB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfV0gfVxuICAgICAqXG4gICAgICogdmFyIGZvb2QgPSB7XG4gICAgICogICAnZnJ1aXRzJzogWydhcHBsZSddLFxuICAgICAqICAgJ3ZlZ2V0YWJsZXMnOiBbJ2JlZXQnXVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgb3RoZXJGb29kID0ge1xuICAgICAqICAgJ2ZydWl0cyc6IFsnYmFuYW5hJ10sXG4gICAgICogICAndmVnZXRhYmxlcyc6IFsnY2Fycm90J11cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5tZXJnZShmb29kLCBvdGhlckZvb2QsIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgKiAgIHJldHVybiBfLmlzQXJyYXkoYSkgPyBhLmNvbmNhdChiKSA6IHVuZGVmaW5lZDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICdmcnVpdHMnOiBbJ2FwcGxlJywgJ2JhbmFuYSddLCAndmVnZXRhYmxlcyc6IFsnYmVldCcsICdjYXJyb3RdIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtZXJnZShvYmplY3QpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgIGxlbmd0aCA9IDI7XG5cbiAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfVxuICAgICAgLy8gYWxsb3dzIHdvcmtpbmcgd2l0aCBgXy5yZWR1Y2VgIGFuZCBgXy5yZWR1Y2VSaWdodGAgd2l0aG91dCB1c2luZ1xuICAgICAgLy8gdGhlaXIgYGluZGV4YCBhbmQgYGNvbGxlY3Rpb25gIGFyZ3VtZW50c1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzJdICE9ICdudW1iZXInKSB7XG4gICAgICAgIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuICAgICAgfVxuICAgICAgaWYgKGxlbmd0aCA+IDMgJiYgdHlwZW9mIGFyZ3NbbGVuZ3RoIC0gMl0gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soYXJnc1stLWxlbmd0aCAtIDFdLCBhcmdzW2xlbmd0aC0tXSwgMik7XG4gICAgICB9IGVsc2UgaWYgKGxlbmd0aCA+IDIgJiYgdHlwZW9mIGFyZ3NbbGVuZ3RoIC0gMV0gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjayA9IGFyZ3NbLS1sZW5ndGhdO1xuICAgICAgfVxuICAgICAgdmFyIHNvdXJjZXMgPSBzbGljZShhcmd1bWVudHMsIDEsIGxlbmd0aCksXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBzdGFja0EgPSBnZXRBcnJheSgpLFxuICAgICAgICAgIHN0YWNrQiA9IGdldEFycmF5KCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZXNbaW5kZXhdLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgfVxuICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQSk7XG4gICAgICByZWxlYXNlQXJyYXkoc3RhY2tCKTtcbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNoYWxsb3cgY2xvbmUgb2YgYG9iamVjdGAgZXhjbHVkaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBQcm9wZXJ0eSBuYW1lcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5cyBvZlxuICAgICAqIHByb3BlcnR5IG5hbWVzLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2hcbiAgICAgKiBwcm9wZXJ0eSBvZiBgb2JqZWN0YCBvbWl0dGluZyB0aGUgcHJvcGVydGllcyB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleVxuICAgICAqIGZvci4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcbiAgICAgKiAodmFsdWUsIGtleSwgb2JqZWN0KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufC4uLnN0cmluZ3xzdHJpbmdbXX0gW2NhbGxiYWNrXSBUaGUgcHJvcGVydGllcyB0byBvbWl0IG9yIHRoZVxuICAgICAqICBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCB3aXRob3V0IHRoZSBvbWl0dGVkIHByb3BlcnRpZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ub21pdCh7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSwgJ2FnZScpO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcgfVxuICAgICAqXG4gICAgICogXy5vbWl0KHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9LCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbWl0KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgcHJvcHMgPSBbXTtcbiAgICAgICAgZm9ySW4ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgcHJvcHMucHVzaChrZXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJvcHMgPSBiYXNlRGlmZmVyZW5jZShwcm9wcywgYmFzZUZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCBmYWxzZSwgMSkpO1xuXG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IG9iamVjdFtrZXldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgICAgaWYgKCFjYWxsYmFjayh2YWx1ZSwga2V5LCBvYmplY3QpKSB7XG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0d28gZGltZW5zaW9uYWwgYXJyYXkgb2YgYW4gb2JqZWN0J3Mga2V5LXZhbHVlIHBhaXJzLFxuICAgICAqIGkuZS4gYFtba2V5MSwgdmFsdWUxXSwgW2tleTIsIHZhbHVlMl1dYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIG5ldyBhcnJheSBvZiBrZXktdmFsdWUgcGFpcnMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFpcnMoeyAnYmFybmV5JzogMzYsICdmcmVkJzogNDAgfSk7XG4gICAgICogLy8gPT4gW1snYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCA0MF1dIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhaXJzKG9iamVjdCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBba2V5LCBvYmplY3Rba2V5XV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaGFsbG93IGNsb25lIG9mIGBvYmplY3RgIGNvbXBvc2VkIG9mIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBQcm9wZXJ0eSBuYW1lcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5cyBvZlxuICAgICAqIHByb3BlcnR5IG5hbWVzLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2hcbiAgICAgKiBwcm9wZXJ0eSBvZiBgb2JqZWN0YCBwaWNraW5nIHRoZSBwcm9wZXJ0aWVzIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5XG4gICAgICogZm9yLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xuICAgICAqICh2YWx1ZSwga2V5LCBvYmplY3QpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258Li4uc3RyaW5nfHN0cmluZ1tdfSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyXG4gICAgICogIGl0ZXJhdGlvbiBvciBwcm9wZXJ0eSBuYW1lcyB0byBwaWNrLCBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBwcm9wZXJ0eVxuICAgICAqICBuYW1lcyBvciBhcnJheXMgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlIHBpY2tlZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBpY2soeyAnbmFtZSc6ICdmcmVkJywgJ191c2VyaWQnOiAnZnJlZDEnIH0sICduYW1lJyk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJyB9XG4gICAgICpcbiAgICAgKiBfLnBpY2soeyAnbmFtZSc6ICdmcmVkJywgJ191c2VyaWQnOiAnZnJlZDEnIH0sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIHJldHVybiBrZXkuY2hhckF0KDApICE9ICdfJztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwaWNrKG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIHByb3BzID0gYmFzZUZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCBmYWxzZSwgMSksXG4gICAgICAgICAgICBsZW5ndGggPSBpc09iamVjdChvYmplY3QpID8gcHJvcHMubGVuZ3RoIDogMDtcblxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqZWN0W2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCkpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgdG8gYF8ucmVkdWNlYCB0aGlzIG1ldGhvZCB0cmFuc2Zvcm1zIGBvYmplY3RgIHRvIGEgbmV3XG4gICAgICogYGFjY3VtdWxhdG9yYCBvYmplY3Qgd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGVhY2ggb2YgaXRzIG93blxuICAgICAqIGVudW1lcmFibGUgcHJvcGVydGllcyB0aHJvdWdoIGEgY2FsbGJhY2ssIHdpdGggZWFjaCBjYWxsYmFjayBleGVjdXRpb25cbiAgICAgKiBwb3RlbnRpYWxseSBtdXRhdGluZyB0aGUgYGFjY3VtdWxhdG9yYCBvYmplY3QuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0b1xuICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIGZvdXIgYXJndW1lbnRzOyAoYWNjdW11bGF0b3IsIHZhbHVlLCBrZXksIG9iamVjdCkuXG4gICAgICogQ2FsbGJhY2tzIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgY3VzdG9tIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHNxdWFyZXMgPSBfLnRyYW5zZm9ybShbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdLCBmdW5jdGlvbihyZXN1bHQsIG51bSkge1xuICAgICAqICAgbnVtICo9IG51bTtcbiAgICAgKiAgIGlmIChudW0gJSAyKSB7XG4gICAgICogICAgIHJldHVybiByZXN1bHQucHVzaChudW0pIDwgMztcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMSwgOSwgMjVdXG4gICAgICpcbiAgICAgKiB2YXIgbWFwcGVkID0gXy50cmFuc2Zvcm0oeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH0sIGZ1bmN0aW9uKHJlc3VsdCwgbnVtLCBrZXkpIHtcbiAgICAgKiAgIHJlc3VsdFtrZXldID0gbnVtICogMztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMywgJ2InOiA2LCAnYyc6IDkgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybShvYmplY3QsIGNhbGxiYWNrLCBhY2N1bXVsYXRvciwgdGhpc0FyZykge1xuICAgICAgdmFyIGlzQXJyID0gaXNBcnJheShvYmplY3QpO1xuICAgICAgaWYgKGFjY3VtdWxhdG9yID09IG51bGwpIHtcbiAgICAgICAgaWYgKGlzQXJyKSB7XG4gICAgICAgICAgYWNjdW11bGF0b3IgPSBbXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgY3RvciA9IG9iamVjdCAmJiBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICAgICAgICAgIHByb3RvID0gY3RvciAmJiBjdG9yLnByb3RvdHlwZTtcblxuICAgICAgICAgIGFjY3VtdWxhdG9yID0gYmFzZUNyZWF0ZShwcm90byk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgNCk7XG4gICAgICAgIChpc0FyciA/IGZvckVhY2ggOiBmb3JPd24pKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBvYmplY3QpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgb2JqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBjb21wb3NlZCBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgdmFsdWVzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnZhbHVlcyh7ICdvbmUnOiAxLCAndHdvJzogMiwgJ3RocmVlJzogMyB9KTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM10gKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXG4gICAgICovXG4gICAgZnVuY3Rpb24gdmFsdWVzKG9iamVjdCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBvYmplY3RbcHJvcHNbaW5kZXhdXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzIGZyb20gdGhlIHNwZWNpZmllZCBpbmRleGVzLCBvciBrZXlzLCBvZiB0aGVcbiAgICAgKiBgY29sbGVjdGlvbmAuIEluZGV4ZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXNcbiAgICAgKiBvZiBpbmRleGVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0gey4uLihudW1iZXJ8bnVtYmVyW118c3RyaW5nfHN0cmluZ1tdKX0gW2luZGV4XSBUaGUgaW5kZXhlcyBvZiBgY29sbGVjdGlvbmBcbiAgICAgKiAgIHRvIHJldHJpZXZlLCBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBpbmRleGVzIG9yIGFycmF5cyBvZiBpbmRleGVzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBlbGVtZW50cyBjb3JyZXNwb25kaW5nIHRvIHRoZVxuICAgICAqICBwcm92aWRlZCBpbmRleGVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmF0KFsnYScsICdiJywgJ2MnLCAnZCcsICdlJ10sIFswLCAyLCA0XSk7XG4gICAgICogLy8gPT4gWydhJywgJ2MnLCAnZSddXG4gICAgICpcbiAgICAgKiBfLmF0KFsnZnJlZCcsICdiYXJuZXknLCAncGViYmxlcyddLCAwLCAyKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXQoY29sbGVjdGlvbikge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBwcm9wcyA9IGJhc2VGbGF0dGVuKGFyZ3MsIHRydWUsIGZhbHNlLCAxKSxcbiAgICAgICAgICBsZW5ndGggPSAoYXJnc1syXSAmJiBhcmdzWzJdW2FyZ3NbMV1dID09PSBjb2xsZWN0aW9uKSA/IDEgOiBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgd2hpbGUoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gY29sbGVjdGlvbltwcm9wc1tpbmRleF1dO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBnaXZlbiB2YWx1ZSBpcyBwcmVzZW50IGluIGEgY29sbGVjdGlvbiB1c2luZyBzdHJpY3QgZXF1YWxpdHlcbiAgICAgKiBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuIElmIGBmcm9tSW5kZXhgIGlzIG5lZ2F0aXZlLCBpdCBpcyB1c2VkIGFzIHRoZVxuICAgICAqIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgaW5jbHVkZVxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHsqfSB0YXJnZXQgVGhlIHZhbHVlIHRvIGNoZWNrIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdGFyZ2V0YCBlbGVtZW50IGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY29udGFpbnMoWzEsIDIsIDNdLCAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmNvbnRhaW5zKFsxLCAyLCAzXSwgMSwgMik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uY29udGFpbnMoeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH0sICdmcmVkJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5jb250YWlucygncGViYmxlcycsICdlYicpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb250YWlucyhjb2xsZWN0aW9uLCB0YXJnZXQsIGZyb21JbmRleCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXG4gICAgICBmcm9tSW5kZXggPSAoZnJvbUluZGV4IDwgMCA/IG5hdGl2ZU1heCgwLCBsZW5ndGggKyBmcm9tSW5kZXgpIDogZnJvbUluZGV4KSB8fCAwO1xuICAgICAgaWYgKGlzQXJyYXkoY29sbGVjdGlvbikpIHtcbiAgICAgICAgcmVzdWx0ID0gaW5kZXhPZihjb2xsZWN0aW9uLCB0YXJnZXQsIGZyb21JbmRleCkgPiAtMTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICByZXN1bHQgPSAoaXNTdHJpbmcoY29sbGVjdGlvbikgPyBjb2xsZWN0aW9uLmluZGV4T2YodGFyZ2V0LCBmcm9tSW5kZXgpIDogaW5kZXhPZihjb2xsZWN0aW9uLCB0YXJnZXQsIGZyb21JbmRleCkpID4gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoKytpbmRleCA+PSBmcm9tSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiAhKHJlc3VsdCA9IHZhbHVlID09PSB0YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBvZiBgY29sbGVjdGlvbmAgdGhyb3VnaCB0aGUgY2FsbGJhY2suIFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlXG4gICAgICogb2YgZWFjaCBrZXkgaXMgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUga2V5IHdhcyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2suXG4gICAgICogVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNvdW50QnkoWzQuMywgNi4xLCA2LjRdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIE1hdGguZmxvb3IobnVtKTsgfSk7XG4gICAgICogLy8gPT4geyAnNCc6IDEsICc2JzogMiB9XG4gICAgICpcbiAgICAgKiBfLmNvdW50QnkoWzQuMywgNi4xLCA2LjRdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIHRoaXMuZmxvb3IobnVtKTsgfSwgTWF0aCk7XG4gICAgICogLy8gPT4geyAnNCc6IDEsICc2JzogMiB9XG4gICAgICpcbiAgICAgKiBfLmNvdW50QnkoWydvbmUnLCAndHdvJywgJ3RocmVlJ10sICdsZW5ndGgnKTtcbiAgICAgKiAvLyA9PiB7ICczJzogMiwgJzUnOiAxIH1cbiAgICAgKi9cbiAgICB2YXIgY291bnRCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICAoaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIGtleSkgPyByZXN1bHRba2V5XSsrIDogcmVzdWx0W2tleV0gPSAxKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gY2FsbGJhY2sgcmV0dXJucyB0cnVleSB2YWx1ZSBmb3IgKiphbGwqKiBlbGVtZW50cyBvZlxuICAgICAqIGEgY29sbGVjdGlvbi4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOyAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBhbGxcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBwYXNzZWQgdGhlIGNhbGxiYWNrIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZXZlcnkoW3RydWUsIDEsIG51bGwsICd5ZXMnXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5ldmVyeShjaGFyYWN0ZXJzLCAnYWdlJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5ldmVyeShjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGV2ZXJ5KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcblxuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBpZiAoIShyZXN1bHQgPSAhIWNhbGxiYWNrKGNvbGxlY3Rpb25baW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbikpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9ICEhY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIGFuIGFycmF5IG9mIGFsbCBlbGVtZW50c1xuICAgICAqIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5IGZvci4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcbiAgICAgKiBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBzZWxlY3RcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgcGFzc2VkIHRoZSBjYWxsYmFjayBjaGVjay5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGV2ZW5zID0gXy5maWx0ZXIoWzEsIDIsIDMsIDQsIDUsIDZdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAlIDIgPT0gMDsgfSk7XG4gICAgICogLy8gPT4gWzIsIDQsIDZdXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maWx0ZXIoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmlsdGVyKGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbHRlcihjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xuICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRoZSBmaXJzdCBlbGVtZW50IHRoYXRcbiAgICAgKiB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleSBmb3IuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXG4gICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZGV0ZWN0LCBmaW5kV2hlcmVcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEsICAnYmxvY2tlZCc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5maW5kKGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCA0MDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmQoY2hhcmFjdGVycywgeyAnYWdlJzogMSB9KTtcbiAgICAgKiAvLyA9PiAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEsICdibG9ja2VkJzogZmFsc2UgfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kKGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmQoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcblxuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xuICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5maW5kTGFzdChbMSwgMiwgMywgNF0sIGZ1bmN0aW9uKG51bSkge1xuICAgICAqICAgcmV0dXJuIG51bSAlIDIgPT0gMTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZExhc3QoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICBmb3JFYWNoUmlnaHQoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBhIGNvbGxlY3Rpb24sIGV4ZWN1dGluZyB0aGUgY2FsbGJhY2sgZm9yIGVhY2hcbiAgICAgKiBlbGVtZW50LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS4gQ2FsbGJhY2tzIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieVxuICAgICAqIGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBOb3RlOiBBcyB3aXRoIG90aGVyIFwiQ29sbGVjdGlvbnNcIiBtZXRob2RzLCBvYmplY3RzIHdpdGggYSBgbGVuZ3RoYCBwcm9wZXJ0eVxuICAgICAqIGFyZSBpdGVyYXRlZCBsaWtlIGFycmF5cy4gVG8gYXZvaWQgdGhpcyBiZWhhdmlvciBgXy5mb3JJbmAgb3IgYF8uZm9yT3duYFxuICAgICAqIG1heSBiZSB1c2VkIGZvciBvYmplY3QgaXRlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGVhY2hcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgM10pLmZvckVhY2goZnVuY3Rpb24obnVtKSB7IGNvbnNvbGUubG9nKG51bSk7IH0pLmpvaW4oJywnKTtcbiAgICAgKiAvLyA9PiBsb2dzIGVhY2ggbnVtYmVyIGFuZCByZXR1cm5zICcxLDIsMydcbiAgICAgKlxuICAgICAqIF8uZm9yRWFjaCh7ICdvbmUnOiAxLCAndHdvJzogMiwgJ3RocmVlJzogMyB9LCBmdW5jdGlvbihudW0pIHsgY29uc29sZS5sb2cobnVtKTsgfSk7XG4gICAgICogLy8gPT4gbG9ncyBlYWNoIG51bWJlciBhbmQgcmV0dXJucyB0aGUgb2JqZWN0IChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvckVhY2goY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG5cbiAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXNBcmcgPT0gJ3VuZGVmaW5lZCcgPyBjYWxsYmFjayA6IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGlmIChjYWxsYmFjayhjb2xsZWN0aW9uW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JFYWNoYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYSBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGVhY2hSaWdodFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzXSkuZm9yRWFjaFJpZ2h0KGZ1bmN0aW9uKG51bSkgeyBjb25zb2xlLmxvZyhudW0pOyB9KS5qb2luKCcsJyk7XG4gICAgICogLy8gPT4gbG9ncyBlYWNoIG51bWJlciBmcm9tIHJpZ2h0IHRvIGxlZnQgYW5kIHJldHVybnMgJzMsMiwxJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvckVhY2hSaWdodChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG4gICAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKGNvbGxlY3Rpb25bbGVuZ3RoXSwgbGVuZ3RoLCBjb2xsZWN0aW9uKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb3BzID0ga2V5cyhjb2xsZWN0aW9uKTtcbiAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgICAgIGtleSA9IHByb3BzID8gcHJvcHNbLS1sZW5ndGhdIDogLS1sZW5ndGg7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGNvbGxlY3Rpb25ba2V5XSwga2V5LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgb2YgYSBjb2xsZWN0aW9uIHRocm91Z2ggdGhlIGNhbGxiYWNrLiBUaGUgY29ycmVzcG9uZGluZyB2YWx1ZVxuICAgICAqIG9mIGVhY2gga2V5IGlzIGFuIGFycmF5IG9mIHRoZSBlbGVtZW50cyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGUga2V5LlxuICAgICAqIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWBcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmdyb3VwQnkoWzQuMiwgNi4xLCA2LjRdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIE1hdGguZmxvb3IobnVtKTsgfSk7XG4gICAgICogLy8gPT4geyAnNCc6IFs0LjJdLCAnNic6IFs2LjEsIDYuNF0gfVxuICAgICAqXG4gICAgICogXy5ncm91cEJ5KFs0LjIsIDYuMSwgNi40XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiB0aGlzLmZsb29yKG51bSk7IH0sIE1hdGgpO1xuICAgICAqIC8vID0+IHsgJzQnOiBbNC4yXSwgJzYnOiBbNi4xLCA2LjRdIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZ3JvdXBCeShbJ29uZScsICd0d28nLCAndGhyZWUnXSwgJ2xlbmd0aCcpO1xuICAgICAqIC8vID0+IHsgJzMnOiBbJ29uZScsICd0d28nXSwgJzUnOiBbJ3RocmVlJ10gfVxuICAgICAqL1xuICAgIHZhciBncm91cEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSA/IHJlc3VsdFtrZXldIDogcmVzdWx0W2tleV0gPSBbXSkucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gdGhyb3VnaCB0aGUgZ2l2ZW4gY2FsbGJhY2suIFRoZSBjb3JyZXNwb25kaW5nXG4gICAgICogdmFsdWUgb2YgZWFjaCBrZXkgaXMgdGhlIGxhc3QgZWxlbWVudCByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGUga2V5LlxuICAgICAqIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29tcG9zZWQgYWdncmVnYXRlIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGtleXMgPSBbXG4gICAgICogICB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSxcbiAgICAgKiAgIHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5pbmRleEJ5KGtleXMsICdkaXInKTtcbiAgICAgKiAvLyA9PiB7ICdsZWZ0JzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdyaWdodCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxuICAgICAqXG4gICAgICogXy5pbmRleEJ5KGtleXMsIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShrZXkuY29kZSk7IH0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ2QnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cbiAgICAgKlxuICAgICAqIF8uaW5kZXhCeShjaGFyYWN0ZXJzLCBmdW5jdGlvbihrZXkpIHsgdGhpcy5mcm9tQ2hhckNvZGUoa2V5LmNvZGUpOyB9LCBTdHJpbmcpO1xuICAgICAqIC8vID0+IHsgJ2EnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ2QnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cbiAgICAgKi9cbiAgICB2YXIgaW5kZXhCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgbWV0aG9kIG5hbWVkIGJ5IGBtZXRob2ROYW1lYCBvbiBlYWNoIGVsZW1lbnQgaW4gdGhlIGBjb2xsZWN0aW9uYFxuICAgICAqIHJldHVybmluZyBhbiBhcnJheSBvZiB0aGUgcmVzdWx0cyBvZiBlYWNoIGludm9rZWQgbWV0aG9kLiBBZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgICAqIHdpbGwgYmUgcHJvdmlkZWQgdG8gZWFjaCBpbnZva2VkIG1ldGhvZC4gSWYgYG1ldGhvZE5hbWVgIGlzIGEgZnVuY3Rpb24gaXRcbiAgICAgKiB3aWxsIGJlIGludm9rZWQgZm9yLCBhbmQgYHRoaXNgIGJvdW5kIHRvLCBlYWNoIGVsZW1lbnQgaW4gdGhlIGBjb2xsZWN0aW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IG1ldGhvZE5hbWUgVGhlIG5hbWUgb2YgdGhlIG1ldGhvZCB0byBpbnZva2Ugb3JcbiAgICAgKiAgdGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBpbnZva2UgdGhlIG1ldGhvZCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiB0aGUgcmVzdWx0cyBvZiBlYWNoIGludm9rZWQgbWV0aG9kLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmludm9rZShbWzUsIDEsIDddLCBbMywgMiwgMV1dLCAnc29ydCcpO1xuICAgICAqIC8vID0+IFtbMSwgNSwgN10sIFsxLCAyLCAzXV1cbiAgICAgKlxuICAgICAqIF8uaW52b2tlKFsxMjMsIDQ1Nl0sIFN0cmluZy5wcm90b3R5cGUuc3BsaXQsICcnKTtcbiAgICAgKiAvLyA9PiBbWycxJywgJzInLCAnMyddLCBbJzQnLCAnNScsICc2J11dXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52b2tlKGNvbGxlY3Rpb24sIG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBhcmdzID0gc2xpY2UoYXJndW1lbnRzLCAyKSxcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIGlzRnVuYyA9IHR5cGVvZiBtZXRob2ROYW1lID09ICdmdW5jdGlvbicsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheSh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInID8gbGVuZ3RoIDogMCk7XG5cbiAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmVzdWx0WysraW5kZXhdID0gKGlzRnVuYyA/IG1ldGhvZE5hbWUgOiB2YWx1ZVttZXRob2ROYW1lXSkuYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdmFsdWVzIGJ5IHJ1bm5pbmcgZWFjaCBlbGVtZW50IGluIHRoZSBjb2xsZWN0aW9uXG4gICAgICogdGhyb3VnaCB0aGUgY2FsbGJhY2suIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aFxuICAgICAqIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgY29sbGVjdFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBgY2FsbGJhY2tgIGV4ZWN1dGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXAoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAqIDM7IH0pO1xuICAgICAqIC8vID0+IFszLCA2LCA5XVxuICAgICAqXG4gICAgICogXy5tYXAoeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gKiAzOyB9KTtcbiAgICAgKiAvLyA9PiBbMywgNiwgOV0gKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWFwKGNoYXJhY3RlcnMsICduYW1lJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuXG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICByZXN1bHRbaW5kZXhdID0gY2FsbGJhY2soY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmVzdWx0WysraW5kZXhdID0gY2FsbGJhY2sodmFsdWUsIGtleSwgY29sbGVjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIG1heGltdW0gdmFsdWUgb2YgYSBjb2xsZWN0aW9uLiBJZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eSBvclxuICAgICAqIGZhbHNleSBgLUluZmluaXR5YCBpcyByZXR1cm5lZC4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkXG4gICAgICogZm9yIGVhY2ggdmFsdWUgaW4gdGhlIGNvbGxlY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaCB0aGUgdmFsdWVcbiAgICAgKiBpcyByYW5rZWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF4aW11bSB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXgoWzQsIDIsIDgsIDZdKTtcbiAgICAgKiAvLyA9PiA4XG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ubWF4KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikgeyByZXR1cm4gY2hyLmFnZTsgfSk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1heChjaGFyYWN0ZXJzLCAnYWdlJyk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH07XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWF4KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgY29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgICAgcmVzdWx0ID0gY29tcHV0ZWQ7XG5cbiAgICAgIC8vIGFsbG93cyB3b3JraW5nIHdpdGggZnVuY3Rpb25zIGxpa2UgYF8ubWFwYCB3aXRob3V0IHVzaW5nXG4gICAgICAvLyB0aGVpciBgaW5kZXhgIGFyZ3VtZW50IGFzIGEgY2FsbGJhY2tcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnICYmIHRoaXNBcmdbY2FsbGJhY2tdID09PSBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsICYmIGlzQXJyYXkoY29sbGVjdGlvbikpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xuICAgICAgICAgIGlmICh2YWx1ZSA+IHJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayA9IChjYWxsYmFjayA9PSBudWxsICYmIGlzU3RyaW5nKGNvbGxlY3Rpb24pKVxuICAgICAgICAgID8gY2hhckF0Q2FsbGJhY2tcbiAgICAgICAgICA6IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG5cbiAgICAgICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICB2YXIgY3VycmVudCA9IGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgICAgaWYgKGN1cnJlbnQgPiBjb21wdXRlZCkge1xuICAgICAgICAgICAgY29tcHV0ZWQgPSBjdXJyZW50O1xuICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBtaW5pbXVtIHZhbHVlIG9mIGEgY29sbGVjdGlvbi4gSWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkgb3JcbiAgICAgKiBmYWxzZXkgYEluZmluaXR5YCBpcyByZXR1cm5lZC4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkXG4gICAgICogZm9yIGVhY2ggdmFsdWUgaW4gdGhlIGNvbGxlY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaCB0aGUgdmFsdWVcbiAgICAgKiBpcyByYW5rZWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5taW4oWzQsIDIsIDgsIDZdKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ubWluKGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikgeyByZXR1cm4gY2hyLmFnZTsgfSk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWluKGNoYXJhY3RlcnMsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9O1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1pbihjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGNvbXB1dGVkID0gSW5maW5pdHksXG4gICAgICAgICAgcmVzdWx0ID0gY29tcHV0ZWQ7XG5cbiAgICAgIC8vIGFsbG93cyB3b3JraW5nIHdpdGggZnVuY3Rpb25zIGxpa2UgYF8ubWFwYCB3aXRob3V0IHVzaW5nXG4gICAgICAvLyB0aGVpciBgaW5kZXhgIGFyZ3VtZW50IGFzIGEgY2FsbGJhY2tcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnICYmIHRoaXNBcmdbY2FsbGJhY2tdID09PSBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsICYmIGlzQXJyYXkoY29sbGVjdGlvbikpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xuICAgICAgICAgIGlmICh2YWx1ZSA8IHJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayA9IChjYWxsYmFjayA9PSBudWxsICYmIGlzU3RyaW5nKGNvbGxlY3Rpb24pKVxuICAgICAgICAgID8gY2hhckF0Q2FsbGJhY2tcbiAgICAgICAgICA6IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG5cbiAgICAgICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICB2YXIgY3VycmVudCA9IGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgICAgaWYgKGN1cnJlbnQgPCBjb21wdXRlZCkge1xuICAgICAgICAgICAgY29tcHV0ZWQgPSBjdXJyZW50O1xuICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSB2YWx1ZSBvZiBhIHNwZWNpZmllZCBwcm9wZXJ0eSBmcm9tIGFsbCBlbGVtZW50cyBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHBsdWNrLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5wbHVjayhjaGFyYWN0ZXJzLCAnbmFtZScpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqL1xuICAgIHZhciBwbHVjayA9IG1hcDtcblxuICAgIC8qKlxuICAgICAqIFJlZHVjZXMgYSBjb2xsZWN0aW9uIHRvIGEgdmFsdWUgd2hpY2ggaXMgdGhlIGFjY3VtdWxhdGVkIHJlc3VsdCBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IGluIHRoZSBjb2xsZWN0aW9uIHRocm91Z2ggdGhlIGNhbGxiYWNrLCB3aGVyZSBlYWNoIHN1Y2Nlc3NpdmVcbiAgICAgKiBjYWxsYmFjayBleGVjdXRpb24gY29uc3VtZXMgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJldmlvdXMgZXhlY3V0aW9uLiBJZlxuICAgICAqIGBhY2N1bXVsYXRvcmAgaXMgbm90IHByb3ZpZGVkIHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uIHdpbGwgYmVcbiAgICAgKiB1c2VkIGFzIHRoZSBpbml0aWFsIGBhY2N1bXVsYXRvcmAgdmFsdWUuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgaW52b2tlZCB3aXRoIGZvdXIgYXJndW1lbnRzOyAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGZvbGRsLCBpbmplY3RcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBJbml0aWFsIHZhbHVlIG9mIHRoZSBhY2N1bXVsYXRvci5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzdW0gPSBfLnJlZHVjZShbMSwgMiwgM10sIGZ1bmN0aW9uKHN1bSwgbnVtKSB7XG4gICAgICogICByZXR1cm4gc3VtICsgbnVtO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDZcbiAgICAgKlxuICAgICAqIHZhciBtYXBwZWQgPSBfLnJlZHVjZSh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfSwgZnVuY3Rpb24ocmVzdWx0LCBudW0sIGtleSkge1xuICAgICAqICAgcmVzdWx0W2tleV0gPSBudW0gKiAzO1xuICAgICAqICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgKiB9LCB7fSk7XG4gICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiwgJ2MnOiA5IH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWR1Y2UoY29sbGVjdGlvbiwgY2FsbGJhY2ssIGFjY3VtdWxhdG9yLCB0aGlzQXJnKSB7XG4gICAgICBpZiAoIWNvbGxlY3Rpb24pIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICAgIHZhciBub2FjY3VtID0gYXJndW1lbnRzLmxlbmd0aCA8IDM7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgNCk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAobm9hY2N1bSkge1xuICAgICAgICAgIGFjY3VtdWxhdG9yID0gY29sbGVjdGlvblsrK2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGFjY3VtdWxhdG9yID0gY2FsbGJhY2soYWNjdW11bGF0b3IsIGNvbGxlY3Rpb25baW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICBhY2N1bXVsYXRvciA9IG5vYWNjdW1cbiAgICAgICAgICAgID8gKG5vYWNjdW0gPSBmYWxzZSwgdmFsdWUpXG4gICAgICAgICAgICA6IGNhbGxiYWNrKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ucmVkdWNlYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYSBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGZvbGRyXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gSW5pdGlhbCB2YWx1ZSBvZiB0aGUgYWNjdW11bGF0b3IuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgbGlzdCA9IFtbMCwgMV0sIFsyLCAzXSwgWzQsIDVdXTtcbiAgICAgKiB2YXIgZmxhdCA9IF8ucmVkdWNlUmlnaHQobGlzdCwgZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS5jb25jYXQoYik7IH0sIFtdKTtcbiAgICAgKiAvLyA9PiBbNCwgNSwgMiwgMywgMCwgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWR1Y2VSaWdodChjb2xsZWN0aW9uLCBjYWxsYmFjaywgYWNjdW11bGF0b3IsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBub2FjY3VtID0gYXJndW1lbnRzLmxlbmd0aCA8IDM7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgNCk7XG4gICAgICBmb3JFYWNoUmlnaHQoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGFjY3VtdWxhdG9yID0gbm9hY2N1bVxuICAgICAgICAgID8gKG5vYWNjdW0gPSBmYWxzZSwgdmFsdWUpXG4gICAgICAgICAgOiBjYWxsYmFjayhhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5maWx0ZXJgIHRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIGFcbiAgICAgKiBjb2xsZWN0aW9uIHRoYXQgdGhlIGNhbGxiYWNrIGRvZXMgKipub3QqKiByZXR1cm4gdHJ1ZXkgZm9yLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgZmFpbGVkIHRoZSBjYWxsYmFjayBjaGVjay5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9kZHMgPSBfLnJlamVjdChbMSwgMiwgMywgNCwgNSwgNl0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICUgMiA9PSAwOyB9KTtcbiAgICAgKiAvLyA9PiBbMSwgMywgNV1cbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnJlamVjdChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9XVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5yZWplY3QoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVqZWN0KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICByZXR1cm4gZmlsdGVyKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gIWNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYSByYW5kb20gZWxlbWVudCBvciBgbmAgcmFuZG9tIGVsZW1lbnRzIGZyb20gYSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNhbXBsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gc2FtcGxlLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBBbGxvd3Mgd29ya2luZyB3aXRoIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGBcbiAgICAgKiAgd2l0aG91dCB1c2luZyB0aGVpciBgaW5kZXhgIGFyZ3VtZW50cyBhcyBgbmAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSByYW5kb20gc2FtcGxlKHMpIG9mIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zYW1wbGUoWzEsIDIsIDMsIDRdKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiBfLnNhbXBsZShbMSwgMiwgMywgNF0sIDIpO1xuICAgICAqIC8vID0+IFszLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNhbXBsZShjb2xsZWN0aW9uLCBuLCBndWFyZCkge1xuICAgICAgaWYgKGNvbGxlY3Rpb24gJiYgdHlwZW9mIGNvbGxlY3Rpb24ubGVuZ3RoICE9ICdudW1iZXInKSB7XG4gICAgICAgIGNvbGxlY3Rpb24gPSB2YWx1ZXMoY29sbGVjdGlvbik7XG4gICAgICB9XG4gICAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uID8gY29sbGVjdGlvbltiYXNlUmFuZG9tKDAsIGNvbGxlY3Rpb24ubGVuZ3RoIC0gMSldIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IHNodWZmbGUoY29sbGVjdGlvbik7XG4gICAgICByZXN1bHQubGVuZ3RoID0gbmF0aXZlTWluKG5hdGl2ZU1heCgwLCBuKSwgcmVzdWx0Lmxlbmd0aCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2Ygc2h1ZmZsZWQgdmFsdWVzLCB1c2luZyBhIHZlcnNpb24gb2YgdGhlIEZpc2hlci1ZYXRlc1xuICAgICAqIHNodWZmbGUuIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlci1ZYXRlc19zaHVmZmxlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNodWZmbGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IHNodWZmbGVkIGNvbGxlY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc2h1ZmZsZShbMSwgMiwgMywgNCwgNSwgNl0pO1xuICAgICAqIC8vID0+IFs0LCAxLCA2LCAzLCA1LCAyXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNodWZmbGUoY29sbGVjdGlvbikge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheSh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInID8gbGVuZ3RoIDogMCk7XG5cbiAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIHJhbmQgPSBiYXNlUmFuZG9tKDAsICsraW5kZXgpO1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gcmVzdWx0W3JhbmRdO1xuICAgICAgICByZXN1bHRbcmFuZF0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzaXplIG9mIHRoZSBgY29sbGVjdGlvbmAgYnkgcmV0dXJuaW5nIGBjb2xsZWN0aW9uLmxlbmd0aGAgZm9yIGFycmF5c1xuICAgICAqIGFuZCBhcnJheS1saWtlIG9iamVjdHMgb3IgdGhlIG51bWJlciBvZiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGZvciBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgY29sbGVjdGlvbi5sZW5ndGhgIG9yIG51bWJlciBvZiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNpemUoWzEsIDJdKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiBfLnNpemUoeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogXy5zaXplKCdwZWJibGVzJyk7XG4gICAgICogLy8gPT4gN1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNpemUoY29sbGVjdGlvbikge1xuICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG4gICAgICByZXR1cm4gdHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyA/IGxlbmd0aCA6IGtleXMoY29sbGVjdGlvbikubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIHRydWV5IHZhbHVlIGZvciAqKmFueSoqIGVsZW1lbnQgb2YgYVxuICAgICAqIGNvbGxlY3Rpb24uIFRoZSBmdW5jdGlvbiByZXR1cm5zIGFzIHNvb24gYXMgaXQgZmluZHMgYSBwYXNzaW5nIHZhbHVlIGFuZFxuICAgICAqIGRvZXMgbm90IGl0ZXJhdGUgb3ZlciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0b1xuICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgYW55XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZWQgdGhlIGNhbGxiYWNrIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29tZShbbnVsbCwgMCwgJ3llcycsIGZhbHNlXSwgQm9vbGVhbik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uc29tZShjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uc29tZShjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAxIH0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gc29tZShjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcblxuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBpZiAoKHJlc3VsdCA9IGNhbGxiYWNrKGNvbGxlY3Rpb25baW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbikpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gIShyZXN1bHQgPSBjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cywgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlciBieSB0aGUgcmVzdWx0cyBvZlxuICAgICAqIHJ1bm5pbmcgZWFjaCBlbGVtZW50IGluIGEgY29sbGVjdGlvbiB0aHJvdWdoIHRoZSBjYWxsYmFjay4gVGhpcyBtZXRob2RcbiAgICAgKiBwZXJmb3JtcyBhIHN0YWJsZSBzb3J0LCB0aGF0IGlzLCBpdCB3aWxsIHByZXNlcnZlIHRoZSBvcmlnaW5hbCBzb3J0IG9yZGVyXG4gICAgICogb2YgZXF1YWwgZWxlbWVudHMuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aFxuICAgICAqIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNvbGxlY3Rpb25cbiAgICAgKiB3aWxsIGJlIHNvcnRlZCBieSBlYWNoIHByb3BlcnR5IHZhbHVlLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHNvcnRlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb3J0QnkoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIE1hdGguc2luKG51bSk7IH0pO1xuICAgICAqIC8vID0+IFszLCAxLCAyXVxuICAgICAqXG4gICAgICogXy5zb3J0QnkoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIHRoaXMuc2luKG51bSk7IH0sIE1hdGgpO1xuICAgICAqIC8vID0+IFszLCAxLCAyXVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdhZ2UnOiA0MCB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDI2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogMzAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1hcChfLnNvcnRCeShjaGFyYWN0ZXJzLCAnYWdlJyksIF8udmFsdWVzKTtcbiAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAyNl0sIFsnZnJlZCcsIDMwXSwgWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDQwXV1cbiAgICAgKlxuICAgICAqIC8vIHNvcnRpbmcgYnkgbXVsdGlwbGUgcHJvcGVydGllc1xuICAgICAqIF8ubWFwKF8uc29ydEJ5KGNoYXJhY3RlcnMsIFsnbmFtZScsICdhZ2UnXSksIF8udmFsdWVzKTtcbiAgICAgKiAvLyA9ID4gW1snYmFybmV5JywgMjZdLCBbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgMzBdLCBbJ2ZyZWQnLCA0MF1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gc29ydEJ5KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpc0FyciA9IGlzQXJyYXkoY2FsbGJhY2spLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyA/IGxlbmd0aCA6IDApO1xuXG4gICAgICBpZiAoIWlzQXJyKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIH1cbiAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgICB2YXIgb2JqZWN0ID0gcmVzdWx0WysraW5kZXhdID0gZ2V0T2JqZWN0KCk7XG4gICAgICAgIGlmIChpc0Fycikge1xuICAgICAgICAgIG9iamVjdC5jcml0ZXJpYSA9IG1hcChjYWxsYmFjaywgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAob2JqZWN0LmNyaXRlcmlhID0gZ2V0QXJyYXkoKSlbMF0gPSBjYWxsYmFjayh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBvYmplY3QuaW5kZXggPSBpbmRleDtcbiAgICAgICAgb2JqZWN0LnZhbHVlID0gdmFsdWU7XG4gICAgICB9KTtcblxuICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgIHJlc3VsdC5zb3J0KGNvbXBhcmVBc2NlbmRpbmcpO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSByZXN1bHRbbGVuZ3RoXTtcbiAgICAgICAgcmVzdWx0W2xlbmd0aF0gPSBvYmplY3QudmFsdWU7XG4gICAgICAgIGlmICghaXNBcnIpIHtcbiAgICAgICAgICByZWxlYXNlQXJyYXkob2JqZWN0LmNyaXRlcmlhKTtcbiAgICAgICAgfVxuICAgICAgICByZWxlYXNlT2JqZWN0KG9iamVjdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBgY29sbGVjdGlvbmAgdG8gYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBjb252ZXJ0ZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIChmdW5jdGlvbigpIHsgcmV0dXJuIF8udG9BcnJheShhcmd1bWVudHMpLnNsaWNlKDEpOyB9KSgxLCAyLCAzLCA0KTtcbiAgICAgKiAvLyA9PiBbMiwgMywgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b0FycmF5KGNvbGxlY3Rpb24pIHtcbiAgICAgIGlmIChjb2xsZWN0aW9uICYmIHR5cGVvZiBjb2xsZWN0aW9uLmxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gc2xpY2UoY29sbGVjdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWVzKGNvbGxlY3Rpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIG9mIGVhY2ggZWxlbWVudCBpbiBhIGBjb2xsZWN0aW9uYCB0byB0aGUgZ2l2ZW5cbiAgICAgKiBgcHJvcGVydGllc2Agb2JqZWN0LCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgYWxsIGVsZW1lbnRzIHRoYXQgaGF2ZSBlcXVpdmFsZW50XG4gICAgICogcHJvcGVydHkgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBmaWx0ZXIgYnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgZ2l2ZW4gcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ3BldHMnOiBbJ2hvcHB5J10gfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAncGV0cyc6IFsnYmFieSBwdXNzJywgJ2Rpbm8nXSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ud2hlcmUoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAncGV0cyc6IFsnaG9wcHknXSB9XVxuICAgICAqXG4gICAgICogXy53aGVyZShjaGFyYWN0ZXJzLCB7ICdwZXRzJzogWydkaW5vJ10gfSk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ3BldHMnOiBbJ2JhYnkgcHVzcycsICdkaW5vJ10gfV1cbiAgICAgKi9cbiAgICB2YXIgd2hlcmUgPSBmaWx0ZXI7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgZmFsc2V5IHZhbHVlcyByZW1vdmVkLiBUaGUgdmFsdWVzIGBmYWxzZWAsIGBudWxsYCxcbiAgICAgKiBgMGAsIGBcIlwiYCwgYHVuZGVmaW5lZGAsIGFuZCBgTmFOYCBhcmUgYWxsIGZhbHNleS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNvbXBhY3QoWzAsIDEsIGZhbHNlLCAyLCAnJywgM10pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBhY3QoYXJyYXkpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBleGNsdWRpbmcgYWxsIHZhbHVlcyBvZiB0aGUgcHJvdmlkZWQgYXJyYXlzIHVzaW5nIHN0cmljdFxuICAgICAqIGVxdWFsaXR5IGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbdmFsdWVzXSBUaGUgYXJyYXlzIG9mIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGlmZmVyZW5jZShbMSwgMiwgMywgNCwgNV0sIFs1LCAyLCAxMF0pO1xuICAgICAqIC8vID0+IFsxLCAzLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2UoYXJyYXkpIHtcbiAgICAgIHJldHVybiBiYXNlRGlmZmVyZW5jZShhcnJheSwgYmFzZUZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlLCAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3RcbiAgICAgKiBlbGVtZW50IHRoYXQgcGFzc2VzIHRoZSBjYWxsYmFjayBjaGVjaywgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH0sXG4gICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSwgICdibG9ja2VkJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbmRJbmRleChjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgMjA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kSW5kZXgoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XG4gICAgICogLy8gPT4gMFxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kSW5kZXgoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBpZiAoY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kSW5kZXhgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcbiAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMzYsICdibG9ja2VkJzogdHJ1ZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IGZhbHNlIH0sXG4gICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSwgICdibG9ja2VkJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZExhc3RJbmRleChjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlID4gMzA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEluZGV4KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xuICAgICAqIC8vID0+IDBcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RJbmRleChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+IDJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoY2FsbGJhY2soYXJyYXlbbGVuZ3RoXSwgbGVuZ3RoLCBhcnJheSkpIHtcbiAgICAgICAgICByZXR1cm4gbGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZmlyc3QgZWxlbWVudCBvciBmaXJzdCBgbmAgZWxlbWVudHMgb2YgYW4gYXJyYXkuIElmIGEgY2FsbGJhY2tcbiAgICAgKiBpcyBwcm92aWRlZCBlbGVtZW50cyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheSBhcmUgcmV0dXJuZWQgYXMgbG9uZ1xuICAgICAqIGFzIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxuICAgICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGhlYWQsIHRha2VcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fG51bWJlcnxzdHJpbmd9IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgZWxlbWVudCBvciB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yXG4gICAgICogIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCJcbiAgICAgKiAgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudChzKSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZpcnN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogXy5maXJzdChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogXy5maXJzdChbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkge1xuICAgICAqICAgcmV0dXJuIG51bSA8IDM7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICdzbGF0ZScgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdibG9ja2VkJzogZmFsc2UsICdlbXBsb3llcic6ICdzbGF0ZScgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICduYScgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpcnN0KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2Jsb2NrZWQnOiB0cnVlLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1dXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZmlyc3QoY2hhcmFjdGVycywgeyAnZW1wbG95ZXInOiAnc2xhdGUnIH0pLCAnbmFtZScpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpcnN0KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIG4gPSAwLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnbnVtYmVyJyAmJiBjYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIGNhbGxiYWNrKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIG4rKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbiA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAobiA9PSBudWxsIHx8IHRoaXNBcmcpIHtcbiAgICAgICAgICByZXR1cm4gYXJyYXkgPyBhcnJheVswXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNsaWNlKGFycmF5LCAwLCBuYXRpdmVNaW4obmF0aXZlTWF4KDAsIG4pLCBsZW5ndGgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGbGF0dGVucyBhIG5lc3RlZCBhcnJheSAodGhlIG5lc3RpbmcgY2FuIGJlIHRvIGFueSBkZXB0aCkuIElmIGBpc1NoYWxsb3dgXG4gICAgICogaXMgdHJ1ZXksIHRoZSBhcnJheSB3aWxsIG9ubHkgYmUgZmxhdHRlbmVkIGEgc2luZ2xlIGxldmVsLiBJZiBhIGNhbGxiYWNrXG4gICAgICogaXMgcHJvdmlkZWQgZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBpcyBwYXNzZWQgdGhyb3VnaCB0aGUgY2FsbGJhY2sgYmVmb3JlXG4gICAgICogZmxhdHRlbmluZy4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmxhdHRlbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NoYWxsb3c9ZmFsc2VdIEEgZmxhZyB0byByZXN0cmljdCBmbGF0dGVuaW5nIHRvIGEgc2luZ2xlIGxldmVsLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mbGF0dGVuKFsxLCBbMl0sIFszLCBbWzRdXV1dKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgNF07XG4gICAgICpcbiAgICAgKiBfLmZsYXR0ZW4oWzEsIFsyXSwgWzMsIFtbNF1dXV0sIHRydWUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCBbWzRdXV07XG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDMwLCAncGV0cyc6IFsnaG9wcHknXSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdwZXRzJzogWydiYWJ5IHB1c3MnLCAnZGlubyddIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5mbGF0dGVuKGNoYXJhY3RlcnMsICdwZXRzJyk7XG4gICAgICogLy8gPT4gWydob3BweScsICdiYWJ5IHB1c3MnLCAnZGlubyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmxhdHRlbihhcnJheSwgaXNTaGFsbG93LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgLy8ganVnZ2xlIGFyZ3VtZW50c1xuICAgICAgaWYgKHR5cGVvZiBpc1NoYWxsb3cgIT0gJ2Jvb2xlYW4nICYmIGlzU2hhbGxvdyAhPSBudWxsKSB7XG4gICAgICAgIHRoaXNBcmcgPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2sgPSAodHlwZW9mIGlzU2hhbGxvdyAhPSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgJiYgdGhpc0FyZ1tpc1NoYWxsb3ddID09PSBhcnJheSkgPyBudWxsIDogaXNTaGFsbG93O1xuICAgICAgICBpc1NoYWxsb3cgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIGFycmF5ID0gbWFwKGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUZsYXR0ZW4oYXJyYXksIGlzU2hhbGxvdyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYHZhbHVlYCBpcyBmb3VuZCB1c2luZ1xuICAgICAqIHN0cmljdCBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuIElmIHRoZSBhcnJheSBpcyBhbHJlYWR5IHNvcnRlZFxuICAgICAqIHByb3ZpZGluZyBgdHJ1ZWAgZm9yIGBmcm9tSW5kZXhgIHdpbGwgcnVuIGEgZmFzdGVyIGJpbmFyeSBzZWFyY2guXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tIG9yIGB0cnVlYFxuICAgICAqICB0byBwZXJmb3JtIGEgYmluYXJ5IHNlYXJjaCBvbiBhIHNvcnRlZCBhcnJheS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSBvciBgLTFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmluZGV4T2YoWzEsIDIsIDMsIDEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiBfLmluZGV4T2YoWzEsIDIsIDMsIDEsIDIsIDNdLCAyLCAzKTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLmluZGV4T2YoWzEsIDEsIDIsIDIsIDMsIDNdLCAyLCB0cnVlKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICAgICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggPT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgICAgZnJvbUluZGV4ID0gKGZyb21JbmRleCA8IDAgPyBuYXRpdmVNYXgoMCwgbGVuZ3RoICsgZnJvbUluZGV4KSA6IGZyb21JbmRleCB8fCAwKTtcbiAgICAgIH0gZWxzZSBpZiAoZnJvbUluZGV4KSB7XG4gICAgICAgIHZhciBpbmRleCA9IHNvcnRlZEluZGV4KGFycmF5LCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpbmRleF0gPT09IHZhbHVlID8gaW5kZXggOiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlSW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgYnV0IHRoZSBsYXN0IGVsZW1lbnQgb3IgbGFzdCBgbmAgZWxlbWVudHMgb2YgYW4gYXJyYXkuIElmIGFcbiAgICAgKiBjYWxsYmFjayBpcyBwcm92aWRlZCBlbGVtZW50cyBhdCB0aGUgZW5kIG9mIHRoZSBhcnJheSBhcmUgZXhjbHVkZWQgZnJvbVxuICAgICAqIHRoZSByZXN1bHQgYXMgbG9uZyBhcyB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kXG4gICAgICogdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8bnVtYmVyfHN0cmluZ30gW2NhbGxiYWNrPTFdIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGVsZW1lbnQgb3IgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBleGNsdWRlLiBJZiBhIHByb3BlcnR5IG5hbWUgb3JcbiAgICAgKiAgb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIlxuICAgICAqICBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW5pdGlhbChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogXy5pbml0aWFsKFsxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gWzFdXG4gICAgICpcbiAgICAgKiBfLmluaXRpYWwoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHtcbiAgICAgKiAgIHJldHVybiBudW0gPiAxO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFsxXVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYmxvY2tlZCc6IGZhbHNlLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXG4gICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnbmEnIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5pbml0aWFsKGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogZmFsc2UsICdlbXBsb3llcic6ICdzbGF0ZScgfV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5pbml0aWFsKGNoYXJhY3RlcnMsIHsgJ2VtcGxveWVyJzogJ25hJyB9KSwgJ25hbWUnKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0aWFsKGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIG4gPSAwLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnbnVtYmVyJyAmJiBjYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGxlbmd0aDtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgICB3aGlsZSAoaW5kZXgtLSAmJiBjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICBuKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG4gPSAoY2FsbGJhY2sgPT0gbnVsbCB8fCB0aGlzQXJnKSA/IDEgOiBjYWxsYmFjayB8fCBuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNsaWNlKGFycmF5LCAwLCBuYXRpdmVNaW4obmF0aXZlTWF4KDAsIGxlbmd0aCAtIG4pLCBsZW5ndGgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMgcHJlc2VudCBpbiBhbGwgcHJvdmlkZWQgYXJyYXlzIHVzaW5nXG4gICAgICogc3RyaWN0IGVxdWFsaXR5IGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXldIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2Ygc2hhcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbnRlcnNlY3Rpb24oWzEsIDIsIDNdLCBbNSwgMiwgMSwgNF0sIFsyLCAxXSk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW50ZXJzZWN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBbXSxcbiAgICAgICAgICBhcmdzSW5kZXggPSAtMSxcbiAgICAgICAgICBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICBjYWNoZXMgPSBnZXRBcnJheSgpLFxuICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXG4gICAgICAgICAgdHJ1c3RJbmRleE9mID0gaW5kZXhPZiA9PT0gYmFzZUluZGV4T2YsXG4gICAgICAgICAgc2VlbiA9IGdldEFycmF5KCk7XG5cbiAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJndW1lbnRzW2FyZ3NJbmRleF07XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpIHtcbiAgICAgICAgICBhcmdzLnB1c2godmFsdWUpO1xuICAgICAgICAgIGNhY2hlcy5wdXNoKHRydXN0SW5kZXhPZiAmJiB2YWx1ZS5sZW5ndGggPj0gbGFyZ2VBcnJheVNpemUgJiZcbiAgICAgICAgICAgIGNyZWF0ZUNhY2hlKGFyZ3NJbmRleCA/IGFyZ3NbYXJnc0luZGV4XSA6IHNlZW4pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGFycmF5ID0gYXJnc1swXSxcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgb3V0ZXI6XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgY2FjaGUgPSBjYWNoZXNbMF07XG4gICAgICAgIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuXG4gICAgICAgIGlmICgoY2FjaGUgPyBjYWNoZUluZGV4T2YoY2FjaGUsIHZhbHVlKSA6IGluZGV4T2Yoc2VlbiwgdmFsdWUpKSA8IDApIHtcbiAgICAgICAgICBhcmdzSW5kZXggPSBhcmdzTGVuZ3RoO1xuICAgICAgICAgIChjYWNoZSB8fCBzZWVuKS5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB3aGlsZSAoLS1hcmdzSW5kZXgpIHtcbiAgICAgICAgICAgIGNhY2hlID0gY2FjaGVzW2FyZ3NJbmRleF07XG4gICAgICAgICAgICBpZiAoKGNhY2hlID8gY2FjaGVJbmRleE9mKGNhY2hlLCB2YWx1ZSkgOiBpbmRleE9mKGFyZ3NbYXJnc0luZGV4XSwgdmFsdWUpKSA8IDApIHtcbiAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2hpbGUgKGFyZ3NMZW5ndGgtLSkge1xuICAgICAgICBjYWNoZSA9IGNhY2hlc1thcmdzTGVuZ3RoXTtcbiAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgcmVsZWFzZU9iamVjdChjYWNoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlbGVhc2VBcnJheShjYWNoZXMpO1xuICAgICAgcmVsZWFzZUFycmF5KHNlZW4pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsYXN0IGVsZW1lbnQgb3IgbGFzdCBgbmAgZWxlbWVudHMgb2YgYW4gYXJyYXkuIElmIGEgY2FsbGJhY2sgaXNcbiAgICAgKiBwcm92aWRlZCBlbGVtZW50cyBhdCB0aGUgZW5kIG9mIHRoZSBhcnJheSBhcmUgcmV0dXJuZWQgYXMgbG9uZyBhcyB0aGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIHRydWV5LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXG4gICAgICogd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxudW1iZXJ8c3RyaW5nfSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGVsZW1lbnQgb3IgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0byByZXR1cm4uIElmIGEgcHJvcGVydHkgbmFtZSBvclxuICAgICAqICBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiXG4gICAgICogIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGxhc3QgZWxlbWVudChzKSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmxhc3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLmxhc3QoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKlxuICAgICAqIF8ubGFzdChbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkge1xuICAgICAqICAgcmV0dXJuIG51bSA+IDE7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogZmFsc2UsICdlbXBsb3llcic6ICdzbGF0ZScgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICdzbGF0ZScgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICduYScgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8ubGFzdChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpLCAnbmFtZScpO1xuICAgICAqIC8vID0+IFsnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubGFzdChjaGFyYWN0ZXJzLCB7ICdlbXBsb3llcic6ICduYScgfSk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgJ2VtcGxveWVyJzogJ25hJyB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhc3QoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbiA9IDAsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdudW1iZXInICYmIGNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gbGVuZ3RoO1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICAgIHdoaWxlIChpbmRleC0tICYmIGNhbGxiYWNrKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIG4rKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbiA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAobiA9PSBudWxsIHx8IHRoaXNBcmcpIHtcbiAgICAgICAgICByZXR1cm4gYXJyYXkgPyBhcnJheVtsZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNsaWNlKGFycmF5LCBuYXRpdmVNYXgoMCwgbGVuZ3RoIC0gbikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBsYXN0IG9jY3VycmVuY2Ugb2YgYHZhbHVlYCBpcyBmb3VuZCB1c2luZyBzdHJpY3RcbiAgICAgKiBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuIElmIGBmcm9tSW5kZXhgIGlzIG5lZ2F0aXZlLCBpdCBpcyB1c2VkXG4gICAgICogYXMgdGhlIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9YXJyYXkubGVuZ3RoLTFdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSBvciBgLTFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmxhc3RJbmRleE9mKFsxLCAyLCAzLCAxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gNFxuICAgICAqXG4gICAgICogXy5sYXN0SW5kZXhPZihbMSwgMiwgMywgMSwgMiwgM10sIDIsIDMpO1xuICAgICAqIC8vID0+IDFcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXN0SW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICAgICAgdmFyIGluZGV4ID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaW5kZXggPSAoZnJvbUluZGV4IDwgMCA/IG5hdGl2ZU1heCgwLCBpbmRleCArIGZyb21JbmRleCkgOiBuYXRpdmVNaW4oZnJvbUluZGV4LCBpbmRleCAtIDEpKSArIDE7XG4gICAgICB9XG4gICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHByb3ZpZGVkIHZhbHVlcyBmcm9tIHRoZSBnaXZlbiBhcnJheSB1c2luZyBzdHJpY3QgZXF1YWxpdHkgZm9yXG4gICAgICogY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZV0gVGhlIHZhbHVlcyB0byByZW1vdmUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCAyLCAzLCAxLCAyLCAzXTtcbiAgICAgKiBfLnB1bGwoYXJyYXksIDIsIDMpO1xuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMSwgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwdWxsKGFycmF5KSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICBhcmdzSW5kZXggPSAwLFxuICAgICAgICAgIGFyZ3NMZW5ndGggPSBhcmdzLmxlbmd0aCxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICB2YWx1ZSA9IGFyZ3NbYXJnc0luZGV4XTtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgc3BsaWNlLmNhbGwoYXJyYXksIGluZGV4LS0sIDEpO1xuICAgICAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBudW1iZXJzIChwb3NpdGl2ZSBhbmQvb3IgbmVnYXRpdmUpIHByb2dyZXNzaW5nIGZyb21cbiAgICAgKiBgc3RhcnRgIHVwIHRvIGJ1dCBub3QgaW5jbHVkaW5nIGBlbmRgLiBJZiBgc3RhcnRgIGlzIGxlc3MgdGhhbiBgc3RvcGAgYVxuICAgICAqIHplcm8tbGVuZ3RoIHJhbmdlIGlzIGNyZWF0ZWQgdW5sZXNzIGEgbmVnYXRpdmUgYHN0ZXBgIGlzIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0ZXA9MV0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBvciBkZWNyZW1lbnQgYnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IHJhbmdlIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDQpO1xuICAgICAqIC8vID0+IFswLCAxLCAyLCAzXVxuICAgICAqXG4gICAgICogXy5yYW5nZSgxLCA1KTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgNF1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMCwgMjAsIDUpO1xuICAgICAqIC8vID0+IFswLCA1LCAxMCwgMTVdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDAsIC00LCAtMSk7XG4gICAgICogLy8gPT4gWzAsIC0xLCAtMiwgLTNdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDEsIDQsIDApO1xuICAgICAqIC8vID0+IFsxLCAxLCAxXVxuICAgICAqXG4gICAgICogXy5yYW5nZSgwKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJhbmdlKHN0YXJ0LCBlbmQsIHN0ZXApIHtcbiAgICAgIHN0YXJ0ID0gK3N0YXJ0IHx8IDA7XG4gICAgICBzdGVwID0gdHlwZW9mIHN0ZXAgPT0gJ251bWJlcicgPyBzdGVwIDogKCtzdGVwIHx8IDEpO1xuXG4gICAgICBpZiAoZW5kID09IG51bGwpIHtcbiAgICAgICAgZW5kID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgIH1cbiAgICAgIC8vIHVzZSBgQXJyYXkobGVuZ3RoKWAgc28gZW5naW5lcyBsaWtlIENoYWtyYSBhbmQgVjggYXZvaWQgc2xvd2VyIG1vZGVzXG4gICAgICAvLyBodHRwOi8veW91dHUuYmUvWEFxSXBHVThaWmsjdD0xN20yNXNcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heCgwLCBjZWlsKChlbmQgLSBzdGFydCkgLyAoc3RlcCB8fCAxKSkpLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBzdGFydDtcbiAgICAgICAgc3RhcnQgKz0gc3RlcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgZWxlbWVudHMgZnJvbSBhbiBhcnJheSB0aGF0IHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5IGZvclxuICAgICAqIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHJlbW92ZWQgZWxlbWVudHMuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiByZW1vdmVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgMywgNCwgNSwgNl07XG4gICAgICogdmFyIGV2ZW5zID0gXy5yZW1vdmUoYXJyYXksIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICUgMiA9PSAwOyB9KTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMSwgMywgNV1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGV2ZW5zKTtcbiAgICAgKiAvLyA9PiBbMiwgNCwgNl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmUoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICAgIHNwbGljZS5jYWxsKGFycmF5LCBpbmRleC0tLCAxKTtcbiAgICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8uaW5pdGlhbGAgdGhpcyBtZXRob2QgZ2V0cyBhbGwgYnV0IHRoZSBmaXJzdCBlbGVtZW50IG9yXG4gICAgICogZmlyc3QgYG5gIGVsZW1lbnRzIG9mIGFuIGFycmF5LiBJZiBhIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIGVsZW1lbnRzXG4gICAgICogYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXkgYXJlIGV4Y2x1ZGVkIGZyb20gdGhlIHJlc3VsdCBhcyBsb25nIGFzIHRoZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAgICAgKiB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZHJvcCwgdGFpbFxuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8bnVtYmVyfHN0cmluZ30gW2NhbGxiYWNrPTFdIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGVsZW1lbnQgb3IgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBleGNsdWRlLiBJZiBhIHByb3BlcnR5IG5hbWUgb3JcbiAgICAgKiAgb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIlxuICAgICAqICBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmVzdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqXG4gICAgICogXy5yZXN0KFsxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gWzNdXG4gICAgICpcbiAgICAgKiBfLnJlc3QoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHtcbiAgICAgKiAgIHJldHVybiBudW0gPCAzO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFszXVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYmxvY2tlZCc6IGZhbHNlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAnZW1wbG95ZXInOiAnbmEnIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnJlc3QoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKSwgJ25hbWUnKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnJlc3QoY2hhcmFjdGVycywgeyAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICdlbXBsb3llcic6ICduYScgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXN0KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnbnVtYmVyJyAmJiBjYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHZhciBuID0gMCxcbiAgICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCAmJiBjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICBuKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG4gPSAoY2FsbGJhY2sgPT0gbnVsbCB8fCB0aGlzQXJnKSA/IDEgOiBuYXRpdmVNYXgoMCwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNsaWNlKGFycmF5LCBuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VzIGEgYmluYXJ5IHNlYXJjaCB0byBkZXRlcm1pbmUgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoIGEgdmFsdWVcbiAgICAgKiBzaG91bGQgYmUgaW5zZXJ0ZWQgaW50byBhIGdpdmVuIHNvcnRlZCBhcnJheSBpbiBvcmRlciB0byBtYWludGFpbiB0aGUgc29ydFxuICAgICAqIG9yZGVyIG9mIHRoZSBhcnJheS4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkIGZvclxuICAgICAqIGB2YWx1ZWAgYW5kIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgIHRvIGNvbXB1dGUgdGhlaXIgc29ydCByYW5raW5nLiBUaGVcbiAgICAgKiBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ7ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBldmFsdWF0ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkIGJlIGluc2VydGVkXG4gICAgICogIGludG8gYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb3J0ZWRJbmRleChbMjAsIDMwLCA1MF0sIDQwKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnNvcnRlZEluZGV4KFt7ICd4JzogMjAgfSwgeyAneCc6IDMwIH0sIHsgJ3gnOiA1MCB9XSwgeyAneCc6IDQwIH0sICd4Jyk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogdmFyIGRpY3QgPSB7XG4gICAgICogICAnd29yZFRvTnVtYmVyJzogeyAndHdlbnR5JzogMjAsICd0aGlydHknOiAzMCwgJ2ZvdXJ0eSc6IDQwLCAnZmlmdHknOiA1MCB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uc29ydGVkSW5kZXgoWyd0d2VudHknLCAndGhpcnR5JywgJ2ZpZnR5J10sICdmb3VydHknLCBmdW5jdGlvbih3b3JkKSB7XG4gICAgICogICByZXR1cm4gZGljdC53b3JkVG9OdW1iZXJbd29yZF07XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogXy5zb3J0ZWRJbmRleChbJ3R3ZW50eScsICd0aGlydHknLCAnZmlmdHknXSwgJ2ZvdXJ0eScsIGZ1bmN0aW9uKHdvcmQpIHtcbiAgICAgKiAgIHJldHVybiB0aGlzLndvcmRUb051bWJlclt3b3JkXTtcbiAgICAgKiB9LCBkaWN0KTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICovXG4gICAgZnVuY3Rpb24gc29ydGVkSW5kZXgoYXJyYXksIHZhbHVlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGxvdyA9IDAsXG4gICAgICAgICAgaGlnaCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogbG93O1xuXG4gICAgICAvLyBleHBsaWNpdGx5IHJlZmVyZW5jZSBgaWRlbnRpdHlgIGZvciBiZXR0ZXIgaW5saW5pbmcgaW4gRmlyZWZveFxuICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayA/IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMSkgOiBpZGVudGl0eTtcbiAgICAgIHZhbHVlID0gY2FsbGJhY2sodmFsdWUpO1xuXG4gICAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICB2YXIgbWlkID0gKGxvdyArIGhpZ2gpID4+PiAxO1xuICAgICAgICAoY2FsbGJhY2soYXJyYXlbbWlkXSkgPCB2YWx1ZSlcbiAgICAgICAgICA/IGxvdyA9IG1pZCArIDFcbiAgICAgICAgICA6IGhpZ2ggPSBtaWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbG93O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdW5pcXVlIHZhbHVlcywgaW4gb3JkZXIsIG9mIHRoZSBwcm92aWRlZCBhcnJheXMgdXNpbmdcbiAgICAgKiBzdHJpY3QgZXF1YWxpdHkgZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheV0gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBjb21iaW5lZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pb24oWzEsIDIsIDNdLCBbNSwgMiwgMSwgNF0sIFsyLCAxXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIDUsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5pb24oKSB7XG4gICAgICByZXR1cm4gYmFzZVVuaXEoYmFzZUZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGR1cGxpY2F0ZS12YWx1ZS1mcmVlIHZlcnNpb24gb2YgYW4gYXJyYXkgdXNpbmcgc3RyaWN0IGVxdWFsaXR5XG4gICAgICogZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLiBJZiB0aGUgYXJyYXkgaXMgc29ydGVkLCBwcm92aWRpbmdcbiAgICAgKiBgdHJ1ZWAgZm9yIGBpc1NvcnRlZGAgd2lsbCB1c2UgYSBmYXN0ZXIgYWxnb3JpdGhtLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkXG4gICAgICogZWFjaCBlbGVtZW50IG9mIGBhcnJheWAgaXMgcGFzc2VkIHRocm91Z2ggdGhlIGNhbGxiYWNrIGJlZm9yZSB1bmlxdWVuZXNzXG4gICAgICogaXMgY29tcHV0ZWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgdW5pcXVlXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU29ydGVkPWZhbHNlXSBBIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCBgYXJyYXlgIGlzIHNvcnRlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIGR1cGxpY2F0ZS12YWx1ZS1mcmVlIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuaXEoWzEsIDIsIDEsIDMsIDFdKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIF8udW5pcShbMSwgMSwgMiwgMiwgM10sIHRydWUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogXy51bmlxKFsnQScsICdiJywgJ0MnLCAnYScsICdCJywgJ2MnXSwgZnVuY3Rpb24obGV0dGVyKSB7IHJldHVybiBsZXR0ZXIudG9Mb3dlckNhc2UoKTsgfSk7XG4gICAgICogLy8gPT4gWydBJywgJ2InLCAnQyddXG4gICAgICpcbiAgICAgKiBfLnVuaXEoWzEsIDIuNSwgMywgMS41LCAyLCAzLjVdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIHRoaXMuZmxvb3IobnVtKTsgfSwgTWF0aCk7XG4gICAgICogLy8gPT4gWzEsIDIuNSwgM11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8udW5pcShbeyAneCc6IDEgfSwgeyAneCc6IDIgfSwgeyAneCc6IDEgfV0sICd4Jyk7XG4gICAgICogLy8gPT4gW3sgJ3gnOiAxIH0sIHsgJ3gnOiAyIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5pcShhcnJheSwgaXNTb3J0ZWQsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAvLyBqdWdnbGUgYXJndW1lbnRzXG4gICAgICBpZiAodHlwZW9mIGlzU29ydGVkICE9ICdib29sZWFuJyAmJiBpc1NvcnRlZCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXNBcmcgPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2sgPSAodHlwZW9mIGlzU29ydGVkICE9ICdmdW5jdGlvbicgJiYgdGhpc0FyZyAmJiB0aGlzQXJnW2lzU29ydGVkXSA9PT0gYXJyYXkpID8gbnVsbCA6IGlzU29ydGVkO1xuICAgICAgICBpc1NvcnRlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VVbmlxKGFycmF5LCBpc1NvcnRlZCwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgZXhjbHVkaW5nIGFsbCBwcm92aWRlZCB2YWx1ZXMgdXNpbmcgc3RyaWN0IGVxdWFsaXR5IGZvclxuICAgICAqIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmaWx0ZXIuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbdmFsdWVdIFRoZSB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLndpdGhvdXQoWzEsIDIsIDEsIDAsIDMsIDEsIDRdLCAwLCAxKTtcbiAgICAgKiAvLyA9PiBbMiwgMywgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3aXRob3V0KGFycmF5KSB7XG4gICAgICByZXR1cm4gYmFzZURpZmZlcmVuY2UoYXJyYXksIHNsaWNlKGFyZ3VtZW50cywgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgdGhhdCBpcyB0aGUgc3ltbWV0cmljIGRpZmZlcmVuY2Ugb2YgdGhlIHByb3ZpZGVkIGFycmF5cy5cbiAgICAgKiBTZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TeW1tZXRyaWNfZGlmZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXldIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnhvcihbMSwgMiwgM10sIFs1LCAyLCAxLCA0XSk7XG4gICAgICogLy8gPT4gWzMsIDUsIDRdXG4gICAgICpcbiAgICAgKiBfLnhvcihbMSwgMiwgNV0sIFsyLCAzLCA1XSwgWzMsIDQsIDVdKTtcbiAgICAgKiAvLyA9PiBbMSwgNCwgNV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB4b3IoKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgYXJyYXkgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICBpZiAoaXNBcnJheShhcnJheSkgfHwgaXNBcmd1bWVudHMoYXJyYXkpKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdFxuICAgICAgICAgICAgPyBiYXNlVW5pcShiYXNlRGlmZmVyZW5jZShyZXN1bHQsIGFycmF5KS5jb25jYXQoYmFzZURpZmZlcmVuY2UoYXJyYXksIHJlc3VsdCkpKVxuICAgICAgICAgICAgOiBhcnJheTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdCB8fCBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMsIHRoZSBmaXJzdCBvZiB3aGljaCBjb250YWlucyB0aGUgZmlyc3RcbiAgICAgKiBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gYXJyYXlzLCB0aGUgc2Vjb25kIG9mIHdoaWNoIGNvbnRhaW5zIHRoZSBzZWNvbmRcbiAgICAgKiBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gYXJyYXlzLCBhbmQgc28gb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgdW56aXBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5XSBBcnJheXMgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy56aXAoWydmcmVkJywgJ2Jhcm5leSddLCBbMzAsIDQwXSwgW3RydWUsIGZhbHNlXSk7XG4gICAgICogLy8gPT4gW1snZnJlZCcsIDMwLCB0cnVlXSwgWydiYXJuZXknLCA0MCwgZmFsc2VdXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHppcCgpIHtcbiAgICAgIHZhciBhcnJheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzIDogYXJndW1lbnRzWzBdLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBtYXgocGx1Y2soYXJyYXksICdsZW5ndGgnKSkgOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCA8IDAgPyAwIDogbGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IHBsdWNrKGFycmF5LCBpbmRleCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIGZyb20gYXJyYXlzIG9mIGBrZXlzYCBhbmQgYHZhbHVlc2AuIFByb3ZpZGVcbiAgICAgKiBlaXRoZXIgYSBzaW5nbGUgdHdvIGRpbWVuc2lvbmFsIGFycmF5LCBpLmUuIGBbW2tleTEsIHZhbHVlMV0sIFtrZXkyLCB2YWx1ZTJdXWBcbiAgICAgKiBvciB0d28gYXJyYXlzLCBvbmUgb2YgYGtleXNgIGFuZCBvbmUgb2YgY29ycmVzcG9uZGluZyBgdmFsdWVzYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBvYmplY3RcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0ga2V5cyBUaGUgYXJyYXkgb2Yga2V5cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzPVtdXSBUaGUgYXJyYXkgb2YgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBnaXZlbiBrZXlzIGFuZFxuICAgICAqICBjb3JyZXNwb25kaW5nIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy56aXBPYmplY3QoWydmcmVkJywgJ2Jhcm5leSddLCBbMzAsIDQwXSk7XG4gICAgICogLy8gPT4geyAnZnJlZCc6IDMwLCAnYmFybmV5JzogNDAgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHppcE9iamVjdChrZXlzLCB2YWx1ZXMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGtleXMgPyBrZXlzLmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICAgIGlmICghdmFsdWVzICYmIGxlbmd0aCAmJiAhaXNBcnJheShrZXlzWzBdKSkge1xuICAgICAgICB2YWx1ZXMgPSBbXTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWVzW2luZGV4XTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkpIHtcbiAgICAgICAgICByZXN1bHRba2V5WzBdXSA9IGtleVsxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGV4ZWN1dGVzIGBmdW5jYCwgd2l0aCAgdGhlIGB0aGlzYCBiaW5kaW5nIGFuZFxuICAgICAqIGFyZ3VtZW50cyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbiwgb25seSBhZnRlciBiZWluZyBjYWxsZWQgYG5gIHRpbWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdGhlIGZ1bmN0aW9uIG11c3QgYmUgY2FsbGVkIGJlZm9yZVxuICAgICAqICBgZnVuY2AgaXMgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVzdHJpY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcmVzdHJpY3RlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHNhdmVzID0gWydwcm9maWxlJywgJ3NldHRpbmdzJ107XG4gICAgICpcbiAgICAgKiB2YXIgZG9uZSA9IF8uYWZ0ZXIoc2F2ZXMubGVuZ3RoLCBmdW5jdGlvbigpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKCdEb25lIHNhdmluZyEnKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIF8uZm9yRWFjaChzYXZlcywgZnVuY3Rpb24odHlwZSkge1xuICAgICAqICAgYXN5bmNTYXZlKHsgJ3R5cGUnOiB0eXBlLCAnY29tcGxldGUnOiBkb25lIH0pO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ0RvbmUgc2F2aW5nIScsIGFmdGVyIGFsbCBzYXZlcyBoYXZlIGNvbXBsZXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFmdGVyKG4sIGZ1bmMpIHtcbiAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoLS1uIDwgMSkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2BcbiAgICAgKiBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgcHJlcGVuZHMgYW55IGFkZGl0aW9uYWwgYGJpbmRgIGFyZ3VtZW50cyB0byB0aG9zZVxuICAgICAqIHByb3ZpZGVkIHRvIHRoZSBib3VuZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiaW5kLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBmdW5jID0gZnVuY3Rpb24oZ3JlZXRpbmcpIHtcbiAgICAgKiAgIHJldHVybiBncmVldGluZyArICcgJyArIHRoaXMubmFtZTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogZnVuYyA9IF8uYmluZChmdW5jLCB7ICduYW1lJzogJ2ZyZWQnIH0sICdoaScpO1xuICAgICAqIGZ1bmMoKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiaW5kKGZ1bmMsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMlxuICAgICAgICA/IGNyZWF0ZVdyYXBwZXIoZnVuYywgMTcsIHNsaWNlKGFyZ3VtZW50cywgMiksIG51bGwsIHRoaXNBcmcpXG4gICAgICAgIDogY3JlYXRlV3JhcHBlcihmdW5jLCAxLCBudWxsLCBudWxsLCB0aGlzQXJnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCaW5kcyBtZXRob2RzIG9mIGFuIG9iamVjdCB0byB0aGUgb2JqZWN0IGl0c2VsZiwgb3ZlcndyaXRpbmcgdGhlIGV4aXN0aW5nXG4gICAgICogbWV0aG9kLiBNZXRob2QgbmFtZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXNcbiAgICAgKiBvZiBtZXRob2QgbmFtZXMuIElmIG5vIG1ldGhvZCBuYW1lcyBhcmUgcHJvdmlkZWQgYWxsIHRoZSBmdW5jdGlvbiBwcm9wZXJ0aWVzXG4gICAgICogb2YgYG9iamVjdGAgd2lsbCBiZSBib3VuZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gYmluZCBhbmQgYXNzaWduIHRoZSBib3VuZCBtZXRob2RzIHRvLlxuICAgICAqIEBwYXJhbSB7Li4uc3RyaW5nfSBbbWV0aG9kTmFtZV0gVGhlIG9iamVjdCBtZXRob2QgbmFtZXMgdG9cbiAgICAgKiAgYmluZCwgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgbWV0aG9kIG5hbWVzIG9yIGFycmF5cyBvZiBtZXRob2QgbmFtZXMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHZpZXcgPSB7XG4gICAgICogICAnbGFiZWwnOiAnZG9jcycsXG4gICAgICogICAnb25DbGljayc6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnY2xpY2tlZCAnICsgdGhpcy5sYWJlbCk7IH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5iaW5kQWxsKHZpZXcpO1xuICAgICAqIGpRdWVyeSgnI2RvY3MnKS5vbignY2xpY2snLCB2aWV3Lm9uQ2xpY2spO1xuICAgICAqIC8vID0+IGxvZ3MgJ2NsaWNrZWQgZG9jcycsIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmluZEFsbChvYmplY3QpIHtcbiAgICAgIHZhciBmdW5jcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYmFzZUZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCBmYWxzZSwgMSkgOiBmdW5jdGlvbnMob2JqZWN0KSxcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGZ1bmNzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGZ1bmNzW2luZGV4XTtcbiAgICAgICAgb2JqZWN0W2tleV0gPSBjcmVhdGVXcmFwcGVyKG9iamVjdFtrZXldLCAxLCBudWxsLCBudWxsLCBvYmplY3QpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIGludm9rZXMgdGhlIG1ldGhvZCBhdCBgb2JqZWN0W2tleV1gXG4gICAgICogYW5kIHByZXBlbmRzIGFueSBhZGRpdGlvbmFsIGBiaW5kS2V5YCBhcmd1bWVudHMgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIGJvdW5kXG4gICAgICogZnVuY3Rpb24uIFRoaXMgbWV0aG9kIGRpZmZlcnMgZnJvbSBgXy5iaW5kYCBieSBhbGxvd2luZyBib3VuZCBmdW5jdGlvbnMgdG9cbiAgICAgKiByZWZlcmVuY2UgbWV0aG9kcyB0aGF0IHdpbGwgYmUgcmVkZWZpbmVkIG9yIGRvbid0IHlldCBleGlzdC5cbiAgICAgKiBTZWUgaHR0cDovL21pY2hhdXguY2EvYXJ0aWNsZXMvbGF6eS1mdW5jdGlvbi1kZWZpbml0aW9uLXBhdHRlcm4uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRoZSBtZXRob2QgYmVsb25ncyB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHtcbiAgICAgKiAgICduYW1lJzogJ2ZyZWQnLFxuICAgICAqICAgJ2dyZWV0JzogZnVuY3Rpb24oZ3JlZXRpbmcpIHtcbiAgICAgKiAgICAgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgdGhpcy5uYW1lO1xuICAgICAqICAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgZnVuYyA9IF8uYmluZEtleShvYmplY3QsICdncmVldCcsICdoaScpO1xuICAgICAqIGZ1bmMoKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCdcbiAgICAgKlxuICAgICAqIG9iamVjdC5ncmVldCA9IGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAneWEgJyArIHRoaXMubmFtZSArICchJztcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogZnVuYygpO1xuICAgICAqIC8vID0+ICdoaXlhIGZyZWQhJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJpbmRLZXkob2JqZWN0LCBrZXkpIHtcbiAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMlxuICAgICAgICA/IGNyZWF0ZVdyYXBwZXIoa2V5LCAxOSwgc2xpY2UoYXJndW1lbnRzLCAyKSwgbnVsbCwgb2JqZWN0KVxuICAgICAgICA6IGNyZWF0ZVdyYXBwZXIoa2V5LCAzLCBudWxsLCBudWxsLCBvYmplY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb25zLFxuICAgICAqIHdoZXJlIGVhY2ggZnVuY3Rpb24gY29uc3VtZXMgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gdGhhdCBmb2xsb3dzLlxuICAgICAqIEZvciBleGFtcGxlLCBjb21wb3NpbmcgdGhlIGZ1bmN0aW9ucyBgZigpYCwgYGcoKWAsIGFuZCBgaCgpYCBwcm9kdWNlcyBgZihnKGgoKSkpYC5cbiAgICAgKiBFYWNoIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjb21wb3NlZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBbZnVuY10gRnVuY3Rpb25zIHRvIGNvbXBvc2UuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY29tcG9zZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciByZWFsTmFtZU1hcCA9IHtcbiAgICAgKiAgICdwZWJibGVzJzogJ3BlbmVsb3BlJ1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgZm9ybWF0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAqICAgbmFtZSA9IHJlYWxOYW1lTWFwW25hbWUudG9Mb3dlckNhc2UoKV0gfHwgbmFtZTtcbiAgICAgKiAgIHJldHVybiBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihmb3JtYXR0ZWQpIHtcbiAgICAgKiAgIHJldHVybiAnSGl5YSAnICsgZm9ybWF0dGVkICsgJyEnO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgd2VsY29tZSA9IF8uY29tcG9zZShncmVldCwgZm9ybWF0KTtcbiAgICAgKiB3ZWxjb21lKCdwZWJibGVzJyk7XG4gICAgICogLy8gPT4gJ0hpeWEgUGVuZWxvcGUhJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBvc2UoKSB7XG4gICAgICB2YXIgZnVuY3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgbGVuZ3RoID0gZnVuY3MubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmNzW2xlbmd0aF0pKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgIGxlbmd0aCA9IGZ1bmNzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgICBhcmdzID0gW2Z1bmNzW2xlbmd0aF0uYXBwbHkodGhpcywgYXJncyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmdzWzBdO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gd2hpY2ggYWNjZXB0cyBvbmUgb3IgbW9yZSBhcmd1bWVudHMgb2YgYGZ1bmNgIHRoYXQgd2hlblxuICAgICAqIGludm9rZWQgZWl0aGVyIGV4ZWN1dGVzIGBmdW5jYCByZXR1cm5pbmcgaXRzIHJlc3VsdCwgaWYgYWxsIGBmdW5jYCBhcmd1bWVudHNcbiAgICAgKiBoYXZlIGJlZW4gcHJvdmlkZWQsIG9yIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgb25lIG9yIG1vcmUgb2YgdGhlXG4gICAgICogcmVtYWluaW5nIGBmdW5jYCBhcmd1bWVudHMsIGFuZCBzbyBvbi4gVGhlIGFyaXR5IG9mIGBmdW5jYCBjYW4gYmUgc3BlY2lmaWVkXG4gICAgICogaWYgYGZ1bmMubGVuZ3RoYCBpcyBub3Qgc3VmZmljaWVudC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5PWZ1bmMubGVuZ3RoXSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjdXJyaWVkID0gXy5jdXJyeShmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICogICBjb25zb2xlLmxvZyhhICsgYiArIGMpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogY3VycmllZCgxKSgyKSgzKTtcbiAgICAgKiAvLyA9PiA2XG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDEsIDIpKDMpO1xuICAgICAqIC8vID0+IDZcbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMSwgMiwgMyk7XG4gICAgICogLy8gPT4gNlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGN1cnJ5KGZ1bmMsIGFyaXR5KSB7XG4gICAgICBhcml0eSA9IHR5cGVvZiBhcml0eSA9PSAnbnVtYmVyJyA/IGFyaXR5IDogKCthcml0eSB8fCBmdW5jLmxlbmd0aCk7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCA0LCBudWxsLCBudWxsLCBudWxsLCBhcml0eSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBkZWxheSB0aGUgZXhlY3V0aW9uIG9mIGBmdW5jYCB1bnRpbCBhZnRlclxuICAgICAqIGB3YWl0YCBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgaXQgd2FzIGludm9rZWQuXG4gICAgICogUHJvdmlkZSBhbiBvcHRpb25zIG9iamVjdCB0byBpbmRpY2F0ZSB0aGF0IGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvblxuICAgICAqIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gU3Vic2VxdWVudCBjYWxsc1xuICAgICAqIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgY2FsbC5cbiAgICAgKlxuICAgICAqIE5vdGU6IElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAgYGZ1bmNgIHdpbGwgYmUgY2FsbGVkXG4gICAgICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiBpc1xuICAgICAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdIFNwZWNpZnkgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBjYWxsZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXSBTcGVjaWZ5IGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIC8vIGF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXhcbiAgICAgKiB2YXIgbGF6eUxheW91dCA9IF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApO1xuICAgICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBsYXp5TGF5b3V0KTtcbiAgICAgKlxuICAgICAqIC8vIGV4ZWN1dGUgYHNlbmRNYWlsYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzXG4gICAgICogalF1ZXJ5KCcjcG9zdGJveCcpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICAgICAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICAgICAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIC8vIGVuc3VyZSBgYmF0Y2hMb2dgIGlzIGV4ZWN1dGVkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzXG4gICAgICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICAgICAqIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7XG4gICAgICogICAnbWF4V2FpdCc6IDEwMDBcbiAgICAgKiB9LCBmYWxzZSk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgICAgdmFyIGFyZ3MsXG4gICAgICAgICAgbWF4VGltZW91dElkLFxuICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICBzdGFtcCxcbiAgICAgICAgICB0aGlzQXJnLFxuICAgICAgICAgIHRpbWVvdXRJZCxcbiAgICAgICAgICB0cmFpbGluZ0NhbGwsXG4gICAgICAgICAgbGFzdENhbGxlZCA9IDAsXG4gICAgICAgICAgbWF4V2FpdCA9IGZhbHNlLFxuICAgICAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICB9XG4gICAgICB3YWl0ID0gbmF0aXZlTWF4KDAsIHdhaXQpIHx8IDA7XG4gICAgICBpZiAob3B0aW9ucyA9PT0gdHJ1ZSkge1xuICAgICAgICB2YXIgbGVhZGluZyA9IHRydWU7XG4gICAgICAgIHRyYWlsaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIGxlYWRpbmcgPSBvcHRpb25zLmxlYWRpbmc7XG4gICAgICAgIG1heFdhaXQgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucyAmJiAobmF0aXZlTWF4KHdhaXQsIG9wdGlvbnMubWF4V2FpdCkgfHwgMCk7XG4gICAgICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICAgICAgfVxuICAgICAgdmFyIGRlbGF5ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93KCkgLSBzdGFtcCk7XG4gICAgICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgaXNDYWxsZWQgPSB0cmFpbGluZ0NhbGw7XG4gICAgICAgICAgbWF4VGltZW91dElkID0gdGltZW91dElkID0gdHJhaWxpbmdDYWxsID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChpc0NhbGxlZCkge1xuICAgICAgICAgICAgbGFzdENhbGxlZCA9IG5vdygpO1xuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgICAgIGlmICghdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgYXJncyA9IHRoaXNBcmcgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHJlbWFpbmluZyk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBtYXhEZWxheWVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgfVxuICAgICAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0cmFpbGluZyB8fCAobWF4V2FpdCAhPT0gd2FpdCkpIHtcbiAgICAgICAgICBsYXN0Q2FsbGVkID0gbm93KCk7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgICBpZiAoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICAgICAgICBhcmdzID0gdGhpc0FyZyA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHN0YW1wID0gbm93KCk7XG4gICAgICAgIHRoaXNBcmcgPSB0aGlzO1xuICAgICAgICB0cmFpbGluZ0NhbGwgPSB0cmFpbGluZyAmJiAodGltZW91dElkIHx8ICFsZWFkaW5nKTtcblxuICAgICAgICBpZiAobWF4V2FpdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICB2YXIgbGVhZGluZ0NhbGwgPSBsZWFkaW5nICYmICF0aW1lb3V0SWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFtYXhUaW1lb3V0SWQgJiYgIWxlYWRpbmcpIHtcbiAgICAgICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHJlbWFpbmluZyA9IG1heFdhaXQgLSAoc3RhbXAgLSBsYXN0Q2FsbGVkKSxcbiAgICAgICAgICAgICAgaXNDYWxsZWQgPSByZW1haW5pbmcgPD0gMDtcblxuICAgICAgICAgIGlmIChpc0NhbGxlZCkge1xuICAgICAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgICBtYXhUaW1lb3V0SWQgPSBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKCFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgIG1heFRpbWVvdXRJZCA9IHNldFRpbWVvdXQobWF4RGVsYXllZCwgcmVtYWluaW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2FsbGVkICYmIHRpbWVvdXRJZCkge1xuICAgICAgICAgIHRpbWVvdXRJZCA9IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aW1lb3V0SWQgJiYgd2FpdCAhPT0gbWF4V2FpdCkge1xuICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZGVsYXllZCwgd2FpdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlYWRpbmdDYWxsKSB7XG4gICAgICAgICAgaXNDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2FsbGVkICYmICF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCkge1xuICAgICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWZlcnMgZXhlY3V0aW5nIHRoZSBgZnVuY2AgZnVuY3Rpb24gdW50aWwgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXMgY2xlYXJlZC5cbiAgICAgKiBBZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0IGlzIGludm9rZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVmZXIuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlZmVyKGZ1bmN0aW9uKHRleHQpIHsgY29uc29sZS5sb2codGV4dCk7IH0sICdkZWZlcnJlZCcpO1xuICAgICAqIC8vIGxvZ3MgJ2RlZmVycmVkJyBhZnRlciBvbmUgb3IgbW9yZSBtaWxsaXNlY29uZHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkZWZlcihmdW5jKSB7XG4gICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7IH0sIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBgZnVuY2AgZnVuY3Rpb24gYWZ0ZXIgYHdhaXRgIG1pbGxpc2Vjb25kcy4gQWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICAgKiB3aWxsIGJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0IGlzIGludm9rZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVsYXkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgZXhlY3V0aW9uLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kZWxheShmdW5jdGlvbih0ZXh0KSB7IGNvbnNvbGUubG9nKHRleHQpOyB9LCAxMDAwLCAnbGF0ZXInKTtcbiAgICAgKiAvLyA9PiBsb2dzICdsYXRlcicgYWZ0ZXIgb25lIHNlY29uZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlbGF5KGZ1bmMsIHdhaXQpIHtcbiAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSBzbGljZShhcmd1bWVudHMsIDIpO1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsgfSwgd2FpdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbWVtb2l6ZXMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuIElmIGByZXNvbHZlcmAgaXNcbiAgICAgKiBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBjYWNoZSBrZXkgZm9yIHN0b3JpbmcgdGhlIHJlc3VsdFxuICAgICAqIGJhc2VkIG9uIHRoZSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLiBCeSBkZWZhdWx0LCB0aGVcbiAgICAgKiBmaXJzdCBhcmd1bWVudCBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgY2FjaGUga2V5LlxuICAgICAqIFRoZSBgZnVuY2AgaXMgZXhlY3V0ZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuICAgICAqIFRoZSByZXN1bHQgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgYGNhY2hlYCBwcm9wZXJ0eSBvbiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gQSBmdW5jdGlvbiB1c2VkIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXppbmcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBmaWJvbmFjY2kgPSBfLm1lbW9pemUoZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gPCAyID8gbiA6IGZpYm9uYWNjaShuIC0gMSkgKyBmaWJvbmFjY2kobiAtIDIpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogZmlib25hY2NpKDkpXG4gICAgICogLy8gPT4gMzRcbiAgICAgKlxuICAgICAqIHZhciBkYXRhID0ge1xuICAgICAqICAgJ2ZyZWQnOiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiAvLyBtb2RpZnlpbmcgdGhlIHJlc3VsdCBjYWNoZVxuICAgICAqIHZhciBnZXQgPSBfLm1lbW9pemUoZnVuY3Rpb24obmFtZSkgeyByZXR1cm4gZGF0YVtuYW1lXTsgfSwgXy5pZGVudGl0eSk7XG4gICAgICogZ2V0KCdwZWJibGVzJyk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxuICAgICAqXG4gICAgICogZ2V0LmNhY2hlLnBlYmJsZXMubmFtZSA9ICdwZW5lbG9wZSc7XG4gICAgICogZ2V0KCdwZWJibGVzJyk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdwZW5lbG9wZScsICdhZ2UnOiAxIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtZW1vaXplKGZ1bmMsIHJlc29sdmVyKSB7XG4gICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgIH1cbiAgICAgIHZhciBtZW1vaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2FjaGUgPSBtZW1vaXplZC5jYWNoZSxcbiAgICAgICAgICAgIGtleSA9IHJlc29sdmVyID8gcmVzb2x2ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IGtleVByZWZpeCArIGFyZ3VtZW50c1swXTtcblxuICAgICAgICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChjYWNoZSwga2V5KVxuICAgICAgICAgID8gY2FjaGVba2V5XVxuICAgICAgICAgIDogKGNhY2hlW2tleV0gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgfVxuICAgICAgbWVtb2l6ZWQuY2FjaGUgPSB7fTtcbiAgICAgIHJldHVybiBtZW1vaXplZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpcyByZXN0cmljdGVkIHRvIGV4ZWN1dGUgYGZ1bmNgIG9uY2UuIFJlcGVhdCBjYWxscyB0b1xuICAgICAqIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGNhbGwuIFRoZSBgZnVuY2AgaXMgZXhlY3V0ZWRcbiAgICAgKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgaW5pdGlhbGl6ZSA9IF8ub25jZShjcmVhdGVBcHBsaWNhdGlvbik7XG4gICAgICogaW5pdGlhbGl6ZSgpO1xuICAgICAqIGluaXRpYWxpemUoKTtcbiAgICAgKiAvLyBgaW5pdGlhbGl6ZWAgZXhlY3V0ZXMgYGNyZWF0ZUFwcGxpY2F0aW9uYCBvbmNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25jZShmdW5jKSB7XG4gICAgICB2YXIgcmFuLFxuICAgICAgICAgIHJlc3VsdDtcblxuICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChyYW4pIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJhbiA9IHRydWU7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgICAgICAvLyBjbGVhciB0aGUgYGZ1bmNgIHZhcmlhYmxlIHNvIHRoZSBmdW5jdGlvbiBtYXkgYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAgICAgICAgZnVuYyA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgaW52b2tlcyBgZnVuY2Agd2l0aCBhbnkgYWRkaXRpb25hbFxuICAgICAqIGBwYXJ0aWFsYCBhcmd1bWVudHMgcHJlcGVuZGVkIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uIFRoaXNcbiAgICAgKiBtZXRob2QgaXMgc2ltaWxhciB0byBgXy5iaW5kYCBleGNlcHQgaXQgZG9lcyAqKm5vdCoqIGFsdGVyIHRoZSBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwYXJ0aWFsbHkgYXBwbHkgYXJndW1lbnRzIHRvLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZywgbmFtZSkgeyByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyBuYW1lOyB9O1xuICAgICAqIHZhciBoaSA9IF8ucGFydGlhbChncmVldCwgJ2hpJyk7XG4gICAgICogaGkoJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXJ0aWFsKGZ1bmMpIHtcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIDE2LCBzbGljZShhcmd1bWVudHMsIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnBhcnRpYWxgIGV4Y2VwdCB0aGF0IGBwYXJ0aWFsYCBhcmd1bWVudHMgYXJlXG4gICAgICogYXBwZW5kZWQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwYXJ0aWFsbHkgYXBwbHkgYXJndW1lbnRzIHRvLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZGVmYXVsdHNEZWVwID0gXy5wYXJ0aWFsUmlnaHQoXy5tZXJnZSwgXy5kZWZhdWx0cyk7XG4gICAgICpcbiAgICAgKiB2YXIgb3B0aW9ucyA9IHtcbiAgICAgKiAgICd2YXJpYWJsZSc6ICdkYXRhJyxcbiAgICAgKiAgICdpbXBvcnRzJzogeyAnanEnOiAkIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogZGVmYXVsdHNEZWVwKG9wdGlvbnMsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG4gICAgICpcbiAgICAgKiBvcHRpb25zLnZhcmlhYmxlXG4gICAgICogLy8gPT4gJ2RhdGEnXG4gICAgICpcbiAgICAgKiBvcHRpb25zLmltcG9ydHNcbiAgICAgKiAvLyA9PiB7ICdfJzogXywgJ2pxJzogJCB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFydGlhbFJpZ2h0KGZ1bmMpIHtcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIDMyLCBudWxsLCBzbGljZShhcmd1bWVudHMsIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBleGVjdXRlZCwgd2lsbCBvbmx5IGNhbGwgdGhlIGBmdW5jYCBmdW5jdGlvblxuICAgICAqIGF0IG1vc3Qgb25jZSBwZXIgZXZlcnkgYHdhaXRgIG1pbGxpc2Vjb25kcy4gUHJvdmlkZSBhbiBvcHRpb25zIG9iamVjdCB0b1xuICAgICAqIGluZGljYXRlIHRoYXQgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlXG4gICAgICogb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gd2lsbFxuICAgICAqIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBjYWxsLlxuICAgICAqXG4gICAgICogTm90ZTogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCBgZnVuY2Agd2lsbCBiZSBjYWxsZWRcbiAgICAgKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIGlzXG4gICAgICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHRocm90dGxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRocm90dGxlIGV4ZWN1dGlvbnMgdG8uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPXRydWVdIFNwZWNpZnkgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXSBTcGVjaWZ5IGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB0aHJvdHRsZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIC8vIGF2b2lkIGV4Y2Vzc2l2ZWx5IHVwZGF0aW5nIHRoZSBwb3NpdGlvbiB3aGlsZSBzY3JvbGxpbmdcbiAgICAgKiB2YXIgdGhyb3R0bGVkID0gXy50aHJvdHRsZSh1cGRhdGVQb3NpdGlvbiwgMTAwKTtcbiAgICAgKiBqUXVlcnkod2luZG93KS5vbignc2Nyb2xsJywgdGhyb3R0bGVkKTtcbiAgICAgKlxuICAgICAqIC8vIGV4ZWN1dGUgYHJlbmV3VG9rZW5gIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBidXQgbm90IG1vcmUgdGhhbiBvbmNlIGV2ZXJ5IDUgbWludXRlc1xuICAgICAqIGpRdWVyeSgnLmludGVyYWN0aXZlJykub24oJ2NsaWNrJywgXy50aHJvdHRsZShyZW5ld1Rva2VuLCAzMDAwMDAsIHtcbiAgICAgKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gICAgICogfSkpO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBsZWFkaW5nID0gdHJ1ZSxcbiAgICAgICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgIGxlYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9ICdsZWFkaW5nJyBpbiBvcHRpb25zID8gb3B0aW9ucy5sZWFkaW5nIDogbGVhZGluZztcbiAgICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyBvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICBkZWJvdW5jZU9wdGlvbnMubGVhZGluZyA9IGxlYWRpbmc7XG4gICAgICBkZWJvdW5jZU9wdGlvbnMubWF4V2FpdCA9IHdhaXQ7XG4gICAgICBkZWJvdW5jZU9wdGlvbnMudHJhaWxpbmcgPSB0cmFpbGluZztcblxuICAgICAgcmV0dXJuIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGRlYm91bmNlT3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcHJvdmlkZXMgYHZhbHVlYCB0byB0aGUgd3JhcHBlciBmdW5jdGlvbiBhcyBpdHNcbiAgICAgKiBmaXJzdCBhcmd1bWVudC4gQWRkaXRpb25hbCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGZ1bmN0aW9uIGFyZSBhcHBlbmRlZFxuICAgICAqIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSB3cmFwcGVyIGZ1bmN0aW9uLiBUaGUgd3JhcHBlciBpcyBleGVjdXRlZCB3aXRoXG4gICAgICogdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gd3JhcHBlciBUaGUgd3JhcHBlciBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHAgPSBfLndyYXAoXy5lc2NhcGUsIGZ1bmN0aW9uKGZ1bmMsIHRleHQpIHtcbiAgICAgKiAgIHJldHVybiAnPHA+JyArIGZ1bmModGV4dCkgKyAnPC9wPic7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBwKCdGcmVkLCBXaWxtYSwgJiBQZWJibGVzJyk7XG4gICAgICogLy8gPT4gJzxwPkZyZWQsIFdpbG1hLCAmYW1wOyBQZWJibGVzPC9wPidcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwKHZhbHVlLCB3cmFwcGVyKSB7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcih3cmFwcGVyLCAxNiwgW3ZhbHVlXSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGB2YWx1ZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcmV0dXJuIGZyb20gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcbiAgICAgKiB2YXIgZ2V0dGVyID0gXy5jb25zdGFudChvYmplY3QpO1xuICAgICAqIGdldHRlcigpID09PSBvYmplY3Q7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbnN0YW50KHZhbHVlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvZHVjZXMgYSBjYWxsYmFjayBib3VuZCB0byBhbiBvcHRpb25hbCBgdGhpc0FyZ2AuIElmIGBmdW5jYCBpcyBhIHByb3BlcnR5XG4gICAgICogbmFtZSB0aGUgY3JlYXRlZCBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgZm9yIGEgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKiBJZiBgZnVuY2AgaXMgYW4gb2JqZWN0IHRoZSBjcmVhdGVkIGNhbGxiYWNrIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHNcbiAgICAgKiB0aGF0IGNvbnRhaW4gdGhlIGVxdWl2YWxlbnQgb2JqZWN0IHByb3BlcnRpZXMsIG90aGVyd2lzZSBpdCB3aWxsIHJldHVybiBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7Kn0gW2Z1bmM9aWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGEgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRoZSBjYWxsYmFjayBhY2NlcHRzLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBhIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHdyYXAgdG8gY3JlYXRlIGN1c3RvbSBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICogXy5jcmVhdGVDYWxsYmFjayA9IF8ud3JhcChfLmNyZWF0ZUNhbGxiYWNrLCBmdW5jdGlvbihmdW5jLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAqICAgdmFyIG1hdGNoID0gL14oLis/KV9fKFtnbF10KSguKykkLy5leGVjKGNhbGxiYWNrKTtcbiAgICAgKiAgIHJldHVybiAhbWF0Y2ggPyBmdW5jKGNhbGxiYWNrLCB0aGlzQXJnKSA6IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAqICAgICByZXR1cm4gbWF0Y2hbMl0gPT0gJ2d0JyA/IG9iamVjdFttYXRjaFsxXV0gPiBtYXRjaFszXSA6IG9iamVjdFttYXRjaFsxXV0gPCBtYXRjaFszXTtcbiAgICAgKiAgIH07XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBfLmZpbHRlcihjaGFyYWN0ZXJzLCAnYWdlX19ndDM4Jyk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiBmdW5jO1xuICAgICAgaWYgKGZ1bmMgPT0gbnVsbCB8fCB0eXBlID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VDcmVhdGVDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCk7XG4gICAgICB9XG4gICAgICAvLyBoYW5kbGUgXCJfLnBsdWNrXCIgc3R5bGUgY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAgaWYgKHR5cGUgIT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHByb3BlcnR5KGZ1bmMpO1xuICAgICAgfVxuICAgICAgdmFyIHByb3BzID0ga2V5cyhmdW5jKSxcbiAgICAgICAgICBrZXkgPSBwcm9wc1swXSxcbiAgICAgICAgICBhID0gZnVuY1trZXldO1xuXG4gICAgICAvLyBoYW5kbGUgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAgaWYgKHByb3BzLmxlbmd0aCA9PSAxICYmIGEgPT09IGEgJiYgIWlzT2JqZWN0KGEpKSB7XG4gICAgICAgIC8vIGZhc3QgcGF0aCB0aGUgY29tbW9uIGNhc2Ugb2YgcHJvdmlkaW5nIGFuIG9iamVjdCB3aXRoIGEgc2luZ2xlXG4gICAgICAgIC8vIHByb3BlcnR5IGNvbnRhaW5pbmcgYSBwcmltaXRpdmUgdmFsdWVcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICAgIHZhciBiID0gb2JqZWN0W2tleV07XG4gICAgICAgICAgcmV0dXJuIGEgPT09IGIgJiYgKGEgIT09IDAgfHwgKDEgLyBhID09IDEgLyBiKSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcblxuICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgICBpZiAoIShyZXN1bHQgPSBiYXNlSXNFcXVhbChvYmplY3RbcHJvcHNbbGVuZ3RoXV0sIGZ1bmNbcHJvcHNbbGVuZ3RoXV0sIG51bGwsIHRydWUpKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjaGFyYWN0ZXJzIGAmYCwgYDxgLCBgPmAsIGBcImAsIGFuZCBgJ2AgaW4gYHN0cmluZ2AgdG8gdGhlaXJcbiAgICAgKiBjb3JyZXNwb25kaW5nIEhUTUwgZW50aXRpZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5lc2NhcGUoJ0ZyZWQsIFdpbG1hLCAmIFBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnRnJlZCwgV2lsbWEsICZhbXA7IFBlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZyA9PSBudWxsID8gJycgOiBTdHJpbmcoc3RyaW5nKS5yZXBsYWNlKHJlVW5lc2NhcGVkSHRtbCwgZXNjYXBlSHRtbENoYXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIGl0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2ZyZWQnIH07XG4gICAgICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBmdW5jdGlvbiBwcm9wZXJ0aWVzIG9mIGEgc291cmNlIG9iamVjdCB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIElmIGBvYmplY3RgIGlzIGEgZnVuY3Rpb24gbWV0aG9kcyB3aWxsIGJlIGFkZGVkIHRvIGl0cyBwcm90b3R5cGUgYXMgd2VsbC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdH0gW29iamVjdD1sb2Rhc2hdIG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBmdW5jdGlvbnMgdG8gYWRkLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2hhaW49dHJ1ZV0gU3BlY2lmeSB3aGV0aGVyIHRoZSBmdW5jdGlvbnMgYWRkZWQgYXJlIGNoYWluYWJsZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHJpbmcpIHtcbiAgICAgKiAgIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLm1peGluKHsgJ2NhcGl0YWxpemUnOiBjYXBpdGFsaXplIH0pO1xuICAgICAqIF8uY2FwaXRhbGl6ZSgnZnJlZCcpO1xuICAgICAqIC8vID0+ICdGcmVkJ1xuICAgICAqXG4gICAgICogXygnZnJlZCcpLmNhcGl0YWxpemUoKS52YWx1ZSgpO1xuICAgICAqIC8vID0+ICdGcmVkJ1xuICAgICAqXG4gICAgICogXy5taXhpbih7ICdjYXBpdGFsaXplJzogY2FwaXRhbGl6ZSB9LCB7ICdjaGFpbic6IGZhbHNlIH0pO1xuICAgICAqIF8oJ2ZyZWQnKS5jYXBpdGFsaXplKCk7XG4gICAgICogLy8gPT4gJ0ZyZWQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWl4aW4ob2JqZWN0LCBzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBjaGFpbiA9IHRydWUsXG4gICAgICAgICAgbWV0aG9kTmFtZXMgPSBzb3VyY2UgJiYgZnVuY3Rpb25zKHNvdXJjZSk7XG5cbiAgICAgIGlmICghc291cmNlIHx8ICghb3B0aW9ucyAmJiAhbWV0aG9kTmFtZXMubGVuZ3RoKSkge1xuICAgICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHNvdXJjZTtcbiAgICAgICAgfVxuICAgICAgICBjdG9yID0gbG9kYXNoV3JhcHBlcjtcbiAgICAgICAgc291cmNlID0gb2JqZWN0O1xuICAgICAgICBvYmplY3QgPSBsb2Rhc2g7XG4gICAgICAgIG1ldGhvZE5hbWVzID0gZnVuY3Rpb25zKHNvdXJjZSk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyA9PT0gZmFsc2UpIHtcbiAgICAgICAgY2hhaW4gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykgJiYgJ2NoYWluJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIGNoYWluID0gb3B0aW9ucy5jaGFpbjtcbiAgICAgIH1cbiAgICAgIHZhciBjdG9yID0gb2JqZWN0LFxuICAgICAgICAgIGlzRnVuYyA9IGlzRnVuY3Rpb24oY3Rvcik7XG5cbiAgICAgIGZvckVhY2gobWV0aG9kTmFtZXMsIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICAgICAgdmFyIGZ1bmMgPSBvYmplY3RbbWV0aG9kTmFtZV0gPSBzb3VyY2VbbWV0aG9kTmFtZV07XG4gICAgICAgIGlmIChpc0Z1bmMpIHtcbiAgICAgICAgICBjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX18sXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLl9fd3JhcHBlZF9fLFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBbdmFsdWVdO1xuXG4gICAgICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseShvYmplY3QsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGNoYWluIHx8IGNoYWluQWxsKSB7XG4gICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gcmVzdWx0ICYmIGlzT2JqZWN0KHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgY3RvcihyZXN1bHQpO1xuICAgICAgICAgICAgICByZXN1bHQuX19jaGFpbl9fID0gY2hhaW5BbGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldmVydHMgdGhlICdfJyB2YXJpYWJsZSB0byBpdHMgcHJldmlvdXMgdmFsdWUgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG9cbiAgICAgKiB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGxvZGFzaCA9IF8ubm9Db25mbGljdCgpO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgICBjb250ZXh0Ll8gPSBvbGREYXNoO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBuby1vcGVyYXRpb24gZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2ZyZWQnIH07XG4gICAgICogXy5ub29wKG9iamVjdCkgPT09IHVuZGVmaW5lZDtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gbm9vcCgpIHtcbiAgICAgIC8vIG5vIG9wZXJhdGlvbiBwZXJmb3JtZWRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBVbml4IGVwb2NoXG4gICAgICogKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzdGFtcCA9IF8ubm93KCk7XG4gICAgICogXy5kZWZlcihmdW5jdGlvbigpIHsgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTsgfSk7XG4gICAgICogLy8gPT4gbG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG4gICAgICovXG4gICAgdmFyIG5vdyA9IGlzTmF0aXZlKG5vdyA9IERhdGUubm93KSAmJiBub3cgfHwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBnaXZlbiB2YWx1ZSBpbnRvIGFuIGludGVnZXIgb2YgdGhlIHNwZWNpZmllZCByYWRpeC5cbiAgICAgKiBJZiBgcmFkaXhgIGlzIGB1bmRlZmluZWRgIG9yIGAwYCBhIGByYWRpeGAgb2YgYDEwYCBpcyB1c2VkIHVubGVzcyB0aGVcbiAgICAgKiBgdmFsdWVgIGlzIGEgaGV4YWRlY2ltYWwsIGluIHdoaWNoIGNhc2UgYSBgcmFkaXhgIG9mIGAxNmAgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIE5vdGU6IFRoaXMgbWV0aG9kIGF2b2lkcyBkaWZmZXJlbmNlcyBpbiBuYXRpdmUgRVMzIGFuZCBFUzUgYHBhcnNlSW50YFxuICAgICAqIGltcGxlbWVudGF0aW9ucy4gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyNFLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFyc2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyYWRpeF0gVGhlIHJhZGl4IHVzZWQgdG8gaW50ZXJwcmV0IHRoZSB2YWx1ZSB0byBwYXJzZS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBuZXcgaW50ZWdlciB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYXJzZUludCgnMDgnKTtcbiAgICAgKiAvLyA9PiA4XG4gICAgICovXG4gICAgdmFyIHBhcnNlSW50ID0gbmF0aXZlUGFyc2VJbnQod2hpdGVzcGFjZSArICcwOCcpID09IDggPyBuYXRpdmVQYXJzZUludCA6IGZ1bmN0aW9uKHZhbHVlLCByYWRpeCkge1xuICAgICAgLy8gRmlyZWZveCA8IDIxIGFuZCBPcGVyYSA8IDE1IGZvbGxvdyB0aGUgRVMzIHNwZWNpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiBgcGFyc2VJbnRgXG4gICAgICByZXR1cm4gbmF0aXZlUGFyc2VJbnQoaXNTdHJpbmcodmFsdWUpID8gdmFsdWUucmVwbGFjZShyZUxlYWRpbmdTcGFjZXNBbmRaZXJvcywgJycpIDogdmFsdWUsIHJhZGl4IHx8IDApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgXCJfLnBsdWNrXCIgc3R5bGUgZnVuY3Rpb24sIHdoaWNoIHJldHVybnMgdGhlIGBrZXlgIHZhbHVlIG9mIGFcbiAgICAgKiBnaXZlbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmV0cmlldmUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogdmFyIGdldE5hbWUgPSBfLnByb3BlcnR5KCduYW1lJyk7XG4gICAgICpcbiAgICAgKiBfLm1hcChjaGFyYWN0ZXJzLCBnZXROYW1lKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKlxuICAgICAqIF8uc29ydEJ5KGNoYXJhY3RlcnMsIGdldE5hbWUpO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LCB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByb3BlcnR5KGtleSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gb2JqZWN0W2tleV07XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2R1Y2VzIGEgcmFuZG9tIG51bWJlciBiZXR3ZWVuIGBtaW5gIGFuZCBgbWF4YCAoaW5jbHVzaXZlKS4gSWYgb25seSBvbmVcbiAgICAgKiBhcmd1bWVudCBpcyBwcm92aWRlZCBhIG51bWJlciBiZXR3ZWVuIGAwYCBhbmQgdGhlIGdpdmVuIG51bWJlciB3aWxsIGJlXG4gICAgICogcmV0dXJuZWQuIElmIGBmbG9hdGluZ2AgaXMgdHJ1ZXkgb3IgZWl0aGVyIGBtaW5gIG9yIGBtYXhgIGFyZSBmbG9hdHMgYVxuICAgICAqIGZsb2F0aW5nLXBvaW50IG51bWJlciB3aWxsIGJlIHJldHVybmVkIGluc3RlYWQgb2YgYW4gaW50ZWdlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbj0wXSBUaGUgbWluaW11bSBwb3NzaWJsZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21heD0xXSBUaGUgbWF4aW11bSBwb3NzaWJsZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmbG9hdGluZz1mYWxzZV0gU3BlY2lmeSByZXR1cm5pbmcgYSBmbG9hdGluZy1wb2ludCBudW1iZXIuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBhIHJhbmRvbSBudW1iZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDAsIDUpO1xuICAgICAqIC8vID0+IGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1XG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSg1KTtcbiAgICAgKiAvLyA9PiBhbHNvIGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1XG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSg1LCB0cnVlKTtcbiAgICAgKiAvLyA9PiBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBiZXR3ZWVuIDAgYW5kIDVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDEuMiwgNS4yKTtcbiAgICAgKiAvLyA9PiBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBiZXR3ZWVuIDEuMiBhbmQgNS4yXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmFuZG9tKG1pbiwgbWF4LCBmbG9hdGluZykge1xuICAgICAgdmFyIG5vTWluID0gbWluID09IG51bGwsXG4gICAgICAgICAgbm9NYXggPSBtYXggPT0gbnVsbDtcblxuICAgICAgaWYgKGZsb2F0aW5nID09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtaW4gPT0gJ2Jvb2xlYW4nICYmIG5vTWF4KSB7XG4gICAgICAgICAgZmxvYXRpbmcgPSBtaW47XG4gICAgICAgICAgbWluID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbm9NYXggJiYgdHlwZW9mIG1heCA9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBmbG9hdGluZyA9IG1heDtcbiAgICAgICAgICBub01heCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChub01pbiAmJiBub01heCkge1xuICAgICAgICBtYXggPSAxO1xuICAgICAgfVxuICAgICAgbWluID0gK21pbiB8fCAwO1xuICAgICAgaWYgKG5vTWF4KSB7XG4gICAgICAgIG1heCA9IG1pbjtcbiAgICAgICAgbWluID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1heCA9ICttYXggfHwgMDtcbiAgICAgIH1cbiAgICAgIGlmIChmbG9hdGluZyB8fCBtaW4gJSAxIHx8IG1heCAlIDEpIHtcbiAgICAgICAgdmFyIHJhbmQgPSBuYXRpdmVSYW5kb20oKTtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZU1pbihtaW4gKyAocmFuZCAqIChtYXggLSBtaW4gKyBwYXJzZUZsb2F0KCcxZS0nICsgKChyYW5kICsnJykubGVuZ3RoIC0gMSkpKSksIG1heCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVJhbmRvbShtaW4sIG1heCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzb2x2ZXMgdGhlIHZhbHVlIG9mIHByb3BlcnR5IGBrZXlgIG9uIGBvYmplY3RgLiBJZiBga2V5YCBpcyBhIGZ1bmN0aW9uXG4gICAgICogaXQgd2lsbCBiZSBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBvYmplY3RgIGFuZCBpdHMgcmVzdWx0IHJldHVybmVkLFxuICAgICAqIGVsc2UgdGhlIHByb3BlcnR5IHZhbHVlIGlzIHJldHVybmVkLiBJZiBgb2JqZWN0YCBpcyBmYWxzZXkgdGhlbiBgdW5kZWZpbmVkYFxuICAgICAqIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHJlc29sdmUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0ge1xuICAgICAqICAgJ2NoZWVzZSc6ICdjcnVtcGV0cycsXG4gICAgICogICAnc3R1ZmYnOiBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgcmV0dXJuICdub25zZW5zZSc7XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KG9iamVjdCwgJ2NoZWVzZScpO1xuICAgICAqIC8vID0+ICdjcnVtcGV0cydcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KG9iamVjdCwgJ3N0dWZmJyk7XG4gICAgICogLy8gPT4gJ25vbnNlbnNlJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlc3VsdChvYmplY3QsIGtleSkge1xuICAgICAgaWYgKG9iamVjdCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24odmFsdWUpID8gb2JqZWN0W2tleV0oKSA6IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbWljcm8tdGVtcGxhdGluZyBtZXRob2QgdGhhdCBoYW5kbGVzIGFyYml0cmFyeSBkZWxpbWl0ZXJzLCBwcmVzZXJ2ZXNcbiAgICAgKiB3aGl0ZXNwYWNlLCBhbmQgY29ycmVjdGx5IGVzY2FwZXMgcXVvdGVzIHdpdGhpbiBpbnRlcnBvbGF0ZWQgY29kZS5cbiAgICAgKlxuICAgICAqIE5vdGU6IEluIHRoZSBkZXZlbG9wbWVudCBidWlsZCwgYF8udGVtcGxhdGVgIHV0aWxpemVzIHNvdXJjZVVSTHMgZm9yIGVhc2llclxuICAgICAqIGRlYnVnZ2luZy4gU2VlIGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL2RldmVsb3BlcnRvb2xzL3NvdXJjZW1hcHMvI3RvYy1zb3VyY2V1cmxcbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHByZWNvbXBpbGluZyB0ZW1wbGF0ZXMgc2VlOlxuICAgICAqIGh0dHA6Ly9sb2Rhc2guY29tL2N1c3RvbS1idWlsZHNcbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIENocm9tZSBleHRlbnNpb24gc2FuZGJveGVzIHNlZTpcbiAgICAgKiBodHRwOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vc3RhYmxlL2V4dGVuc2lvbnMvc2FuZGJveGluZ0V2YWwuaHRtbFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZW1wbGF0ZSB0ZXh0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFRoZSBkYXRhIG9iamVjdCB1c2VkIHRvIHBvcHVsYXRlIHRoZSB0ZXh0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5lc2NhcGVdIFRoZSBcImVzY2FwZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXZhbHVhdGVdIFRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5pbXBvcnRzXSBBbiBvYmplY3QgdG8gaW1wb3J0IGludG8gdGhlIHRlbXBsYXRlIGFzIGxvY2FsIHZhcmlhYmxlcy5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuaW50ZXJwb2xhdGVdIFRoZSBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc291cmNlVVJMXSBUaGUgc291cmNlVVJMIG9mIHRoZSB0ZW1wbGF0ZSdzIGNvbXBpbGVkIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZhcmlhYmxlXSBUaGUgZGF0YSBvYmplY3QgdmFyaWFibGUgbmFtZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb258c3RyaW5nfSBSZXR1cm5zIGEgY29tcGlsZWQgZnVuY3Rpb24gd2hlbiBubyBgZGF0YWAgb2JqZWN0XG4gICAgICogIGlzIGdpdmVuLCBlbHNlIGl0IHJldHVybnMgdGhlIGludGVycG9sYXRlZCB0ZXh0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlciB0byBjcmVhdGUgYSBjb21waWxlZCB0ZW1wbGF0ZVxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSBuYW1lICU+Jyk7XG4gICAgICogY29tcGlsZWQoeyAnbmFtZSc6ICdmcmVkJyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBcImVzY2FwZVwiIGRlbGltaXRlciB0byBlc2NhcGUgSFRNTCBpbiBkYXRhIHByb3BlcnR5IHZhbHVlc1xuICAgICAqIF8udGVtcGxhdGUoJzxiPjwlLSB2YWx1ZSAlPjwvYj4nLCB7ICd2YWx1ZSc6ICc8c2NyaXB0PicgfSk7XG4gICAgICogLy8gPT4gJzxiPiZsdDtzY3JpcHQmZ3Q7PC9iPidcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyIHRvIGdlbmVyYXRlIEhUTUxcbiAgICAgKiB2YXIgbGlzdCA9ICc8JSBfLmZvckVhY2gocGVvcGxlLCBmdW5jdGlvbihuYW1lKSB7ICU+PGxpPjwlLSBuYW1lICU+PC9saT48JSB9KTsgJT4nO1xuICAgICAqIF8udGVtcGxhdGUobGlzdCwgeyAncGVvcGxlJzogWydmcmVkJywgJ2Jhcm5leSddIH0pO1xuICAgICAqIC8vID0+ICc8bGk+ZnJlZDwvbGk+PGxpPmJhcm5leTwvbGk+J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIEVTNiBkZWxpbWl0ZXIgYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIGRlZmF1bHQgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlclxuICAgICAqIF8udGVtcGxhdGUoJ2hlbGxvICR7IG5hbWUgfScsIHsgJ25hbWUnOiAncGViYmxlcycgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIHBlYmJsZXMnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgaW50ZXJuYWwgYHByaW50YCBmdW5jdGlvbiBpbiBcImV2YWx1YXRlXCIgZGVsaW1pdGVyc1xuICAgICAqIF8udGVtcGxhdGUoJzwlIHByaW50KFwiaGVsbG8gXCIgKyBuYW1lKTsgJT4hJywgeyAnbmFtZSc6ICdiYXJuZXknIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBiYXJuZXkhJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgYSBjdXN0b20gdGVtcGxhdGUgZGVsaW1pdGVyc1xuICAgICAqIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICAgKiAgICdpbnRlcnBvbGF0ZSc6IC97eyhbXFxzXFxTXSs/KX19L2dcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy50ZW1wbGF0ZSgnaGVsbG8ge3sgbmFtZSB9fSEnLCB7ICduYW1lJzogJ211c3RhY2hlJyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gbXVzdGFjaGUhJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBpbXBvcnRzYCBvcHRpb24gdG8gaW1wb3J0IGpRdWVyeVxuICAgICAqIHZhciBsaXN0ID0gJzwlIGpxLmVhY2gocGVvcGxlLCBmdW5jdGlvbihuYW1lKSB7ICU+PGxpPjwlLSBuYW1lICU+PC9saT48JSB9KTsgJT4nO1xuICAgICAqIF8udGVtcGxhdGUobGlzdCwgeyAncGVvcGxlJzogWydmcmVkJywgJ2Jhcm5leSddIH0sIHsgJ2ltcG9ydHMnOiB7ICdqcSc6IGpRdWVyeSB9IH0pO1xuICAgICAqIC8vID0+ICc8bGk+ZnJlZDwvbGk+PGxpPmJhcm5leTwvbGk+J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBzb3VyY2VVUkxgIG9wdGlvbiB0byBzcGVjaWZ5IGEgY3VzdG9tIHNvdXJjZVVSTCBmb3IgdGhlIHRlbXBsYXRlXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gPCU9IG5hbWUgJT4nLCBudWxsLCB7ICdzb3VyY2VVUkwnOiAnL2Jhc2ljL2dyZWV0aW5nLmpzdCcgfSk7XG4gICAgICogY29tcGlsZWQoZGF0YSk7XG4gICAgICogLy8gPT4gZmluZCB0aGUgc291cmNlIG9mIFwiZ3JlZXRpbmcuanN0XCIgdW5kZXIgdGhlIFNvdXJjZXMgdGFiIG9yIFJlc291cmNlcyBwYW5lbCBvZiB0aGUgd2ViIGluc3BlY3RvclxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGB2YXJpYWJsZWAgb3B0aW9uIHRvIGVuc3VyZSBhIHdpdGgtc3RhdGVtZW50IGlzbid0IHVzZWQgaW4gdGhlIGNvbXBpbGVkIHRlbXBsYXRlXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGkgPCU9IGRhdGEubmFtZSAlPiEnLCBudWxsLCB7ICd2YXJpYWJsZSc6ICdkYXRhJyB9KTtcbiAgICAgKiBjb21waWxlZC5zb3VyY2U7XG4gICAgICogLy8gPT4gZnVuY3Rpb24oZGF0YSkge1xuICAgICAqICAgdmFyIF9fdCwgX19wID0gJycsIF9fZSA9IF8uZXNjYXBlO1xuICAgICAqICAgX19wICs9ICdoaSAnICsgKChfX3QgPSAoIGRhdGEubmFtZSApKSA9PSBudWxsID8gJycgOiBfX3QpICsgJyEnO1xuICAgICAqICAgcmV0dXJuIF9fcDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYHNvdXJjZWAgcHJvcGVydHkgdG8gaW5saW5lIGNvbXBpbGVkIHRlbXBsYXRlcyBmb3IgbWVhbmluZ2Z1bFxuICAgICAqIC8vIGxpbmUgbnVtYmVycyBpbiBlcnJvciBtZXNzYWdlcyBhbmQgYSBzdGFjayB0cmFjZVxuICAgICAqIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKGN3ZCwgJ2pzdC5qcycpLCAnXFxcbiAgICAgKiAgIHZhciBKU1QgPSB7XFxcbiAgICAgKiAgICAgXCJtYWluXCI6ICcgKyBfLnRlbXBsYXRlKG1haW5UZXh0KS5zb3VyY2UgKyAnXFxcbiAgICAgKiAgIH07XFxcbiAgICAgKiAnKTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0ZW1wbGF0ZSh0ZXh0LCBkYXRhLCBvcHRpb25zKSB7XG4gICAgICAvLyBiYXNlZCBvbiBKb2huIFJlc2lnJ3MgYHRtcGxgIGltcGxlbWVudGF0aW9uXG4gICAgICAvLyBodHRwOi8vZWpvaG4ub3JnL2Jsb2cvamF2YXNjcmlwdC1taWNyby10ZW1wbGF0aW5nL1xuICAgICAgLy8gYW5kIExhdXJhIERva3Rvcm92YSdzIGRvVC5qc1xuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL29sYWRvL2RvVFxuICAgICAgdmFyIHNldHRpbmdzID0gbG9kYXNoLnRlbXBsYXRlU2V0dGluZ3M7XG4gICAgICB0ZXh0ID0gU3RyaW5nKHRleHQgfHwgJycpO1xuXG4gICAgICAvLyBhdm9pZCBtaXNzaW5nIGRlcGVuZGVuY2llcyB3aGVuIGBpdGVyYXRvclRlbXBsYXRlYCBpcyBub3QgZGVmaW5lZFxuICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKHt9LCBvcHRpb25zLCBzZXR0aW5ncyk7XG5cbiAgICAgIHZhciBpbXBvcnRzID0gZGVmYXVsdHMoe30sIG9wdGlvbnMuaW1wb3J0cywgc2V0dGluZ3MuaW1wb3J0cyksXG4gICAgICAgICAgaW1wb3J0c0tleXMgPSBrZXlzKGltcG9ydHMpLFxuICAgICAgICAgIGltcG9ydHNWYWx1ZXMgPSB2YWx1ZXMoaW1wb3J0cyk7XG5cbiAgICAgIHZhciBpc0V2YWx1YXRpbmcsXG4gICAgICAgICAgaW5kZXggPSAwLFxuICAgICAgICAgIGludGVycG9sYXRlID0gb3B0aW9ucy5pbnRlcnBvbGF0ZSB8fCByZU5vTWF0Y2gsXG4gICAgICAgICAgc291cmNlID0gXCJfX3AgKz0gJ1wiO1xuXG4gICAgICAvLyBjb21waWxlIHRoZSByZWdleHAgdG8gbWF0Y2ggZWFjaCBkZWxpbWl0ZXJcbiAgICAgIHZhciByZURlbGltaXRlcnMgPSBSZWdFeHAoXG4gICAgICAgIChvcHRpb25zLmVzY2FwZSB8fCByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgICAgIGludGVycG9sYXRlLnNvdXJjZSArICd8JyArXG4gICAgICAgIChpbnRlcnBvbGF0ZSA9PT0gcmVJbnRlcnBvbGF0ZSA/IHJlRXNUZW1wbGF0ZSA6IHJlTm9NYXRjaCkuc291cmNlICsgJ3wnICtcbiAgICAgICAgKG9wdGlvbnMuZXZhbHVhdGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCQnXG4gICAgICAsICdnJyk7XG5cbiAgICAgIHRleHQucmVwbGFjZShyZURlbGltaXRlcnMsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGVWYWx1ZSwgaW50ZXJwb2xhdGVWYWx1ZSwgZXNUZW1wbGF0ZVZhbHVlLCBldmFsdWF0ZVZhbHVlLCBvZmZzZXQpIHtcbiAgICAgICAgaW50ZXJwb2xhdGVWYWx1ZSB8fCAoaW50ZXJwb2xhdGVWYWx1ZSA9IGVzVGVtcGxhdGVWYWx1ZSk7XG5cbiAgICAgICAgLy8gZXNjYXBlIGNoYXJhY3RlcnMgdGhhdCBjYW5ub3QgYmUgaW5jbHVkZWQgaW4gc3RyaW5nIGxpdGVyYWxzXG4gICAgICAgIHNvdXJjZSArPSB0ZXh0LnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UocmVVbmVzY2FwZWRTdHJpbmcsIGVzY2FwZVN0cmluZ0NoYXIpO1xuXG4gICAgICAgIC8vIHJlcGxhY2UgZGVsaW1pdGVycyB3aXRoIHNuaXBwZXRzXG4gICAgICAgIGlmIChlc2NhcGVWYWx1ZSkge1xuICAgICAgICAgIHNvdXJjZSArPSBcIicgK1xcbl9fZShcIiArIGVzY2FwZVZhbHVlICsgXCIpICtcXG4nXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2YWx1YXRlVmFsdWUpIHtcbiAgICAgICAgICBpc0V2YWx1YXRpbmcgPSB0cnVlO1xuICAgICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZVZhbHVlICsgXCI7XFxuX19wICs9ICdcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZXJwb2xhdGVWYWx1ZSkge1xuICAgICAgICAgIHNvdXJjZSArPSBcIicgK1xcbigoX190ID0gKFwiICsgaW50ZXJwb2xhdGVWYWx1ZSArIFwiKSkgPT0gbnVsbCA/ICcnIDogX190KSArXFxuJ1wiO1xuICAgICAgICB9XG4gICAgICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXG4gICAgICAgIC8vIHRoZSBKUyBlbmdpbmUgZW1iZWRkZWQgaW4gQWRvYmUgcHJvZHVjdHMgcmVxdWlyZXMgcmV0dXJuaW5nIHRoZSBgbWF0Y2hgXG4gICAgICAgIC8vIHN0cmluZyBpbiBvcmRlciB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGBvZmZzZXRgIHZhbHVlXG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgIH0pO1xuXG4gICAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xuXG4gICAgICAvLyBpZiBgdmFyaWFibGVgIGlzIG5vdCBzcGVjaWZpZWQsIHdyYXAgYSB3aXRoLXN0YXRlbWVudCBhcm91bmQgdGhlIGdlbmVyYXRlZFxuICAgICAgLy8gY29kZSB0byBhZGQgdGhlIGRhdGEgb2JqZWN0IHRvIHRoZSB0b3Agb2YgdGhlIHNjb3BlIGNoYWluXG4gICAgICB2YXIgdmFyaWFibGUgPSBvcHRpb25zLnZhcmlhYmxlLFxuICAgICAgICAgIGhhc1ZhcmlhYmxlID0gdmFyaWFibGU7XG5cbiAgICAgIGlmICghaGFzVmFyaWFibGUpIHtcbiAgICAgICAgdmFyaWFibGUgPSAnb2JqJztcbiAgICAgICAgc291cmNlID0gJ3dpdGggKCcgKyB2YXJpYWJsZSArICcpIHtcXG4nICsgc291cmNlICsgJ1xcbn1cXG4nO1xuICAgICAgfVxuICAgICAgLy8gY2xlYW51cCBjb2RlIGJ5IHN0cmlwcGluZyBlbXB0eSBzdHJpbmdzXG4gICAgICBzb3VyY2UgPSAoaXNFdmFsdWF0aW5nID8gc291cmNlLnJlcGxhY2UocmVFbXB0eVN0cmluZ0xlYWRpbmcsICcnKSA6IHNvdXJjZSlcbiAgICAgICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ01pZGRsZSwgJyQxJylcbiAgICAgICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ1RyYWlsaW5nLCAnJDE7Jyk7XG5cbiAgICAgIC8vIGZyYW1lIGNvZGUgYXMgdGhlIGZ1bmN0aW9uIGJvZHlcbiAgICAgIHNvdXJjZSA9ICdmdW5jdGlvbignICsgdmFyaWFibGUgKyAnKSB7XFxuJyArXG4gICAgICAgIChoYXNWYXJpYWJsZSA/ICcnIDogdmFyaWFibGUgKyAnIHx8ICgnICsgdmFyaWFibGUgKyAnID0ge30pO1xcbicpICtcbiAgICAgICAgXCJ2YXIgX190LCBfX3AgPSAnJywgX19lID0gXy5lc2NhcGVcIiArXG4gICAgICAgIChpc0V2YWx1YXRpbmdcbiAgICAgICAgICA/ICcsIF9faiA9IEFycmF5LnByb3RvdHlwZS5qb2luO1xcbicgK1xuICAgICAgICAgICAgXCJmdW5jdGlvbiBwcmludCgpIHsgX19wICs9IF9fai5jYWxsKGFyZ3VtZW50cywgJycpIH1cXG5cIlxuICAgICAgICAgIDogJztcXG4nXG4gICAgICAgICkgK1xuICAgICAgICBzb3VyY2UgK1xuICAgICAgICAncmV0dXJuIF9fcFxcbn0nO1xuXG4gICAgICAvLyBVc2UgYSBzb3VyY2VVUkwgZm9yIGVhc2llciBkZWJ1Z2dpbmcuXG4gICAgICAvLyBodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy9kZXZlbG9wZXJ0b29scy9zb3VyY2VtYXBzLyN0b2Mtc291cmNldXJsXG4gICAgICB2YXIgc291cmNlVVJMID0gJ1xcbi8qXFxuLy8jIHNvdXJjZVVSTD0nICsgKG9wdGlvbnMuc291cmNlVVJMIHx8ICcvbG9kYXNoL3RlbXBsYXRlL3NvdXJjZVsnICsgKHRlbXBsYXRlQ291bnRlcisrKSArICddJykgKyAnXFxuKi8nO1xuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gRnVuY3Rpb24oaW1wb3J0c0tleXMsICdyZXR1cm4gJyArIHNvdXJjZSArIHNvdXJjZVVSTCkuYXBwbHkodW5kZWZpbmVkLCBpbXBvcnRzVmFsdWVzKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQoZGF0YSk7XG4gICAgICB9XG4gICAgICAvLyBwcm92aWRlIHRoZSBjb21waWxlZCBmdW5jdGlvbidzIHNvdXJjZSBieSBpdHMgYHRvU3RyaW5nYCBtZXRob2QsIGluXG4gICAgICAvLyBzdXBwb3J0ZWQgZW52aXJvbm1lbnRzLCBvciB0aGUgYHNvdXJjZWAgcHJvcGVydHkgYXMgYSBjb252ZW5pZW5jZSBmb3JcbiAgICAgIC8vIGlubGluaW5nIGNvbXBpbGVkIHRlbXBsYXRlcyBkdXJpbmcgdGhlIGJ1aWxkIHByb2Nlc3NcbiAgICAgIHJlc3VsdC5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBjYWxsYmFjayBgbmAgdGltZXMsIHJldHVybmluZyBhbiBhcnJheSBvZiB0aGUgcmVzdWx0c1xuICAgICAqIG9mIGVhY2ggY2FsbGJhY2sgZXhlY3V0aW9uLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXG4gICAgICogd2l0aCBvbmUgYXJndW1lbnQ7IChpbmRleCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBleGVjdXRlIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggYGNhbGxiYWNrYCBleGVjdXRpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBkaWNlUm9sbHMgPSBfLnRpbWVzKDMsIF8ucGFydGlhbChfLnJhbmRvbSwgMSwgNikpO1xuICAgICAqIC8vID0+IFszLCA2LCA0XVxuICAgICAqXG4gICAgICogXy50aW1lcygzLCBmdW5jdGlvbihuKSB7IG1hZ2UuY2FzdFNwZWxsKG4pOyB9KTtcbiAgICAgKiAvLyA9PiBjYWxscyBgbWFnZS5jYXN0U3BlbGwobilgIHRocmVlIHRpbWVzLCBwYXNzaW5nIGBuYCBvZiBgMGAsIGAxYCwgYW5kIGAyYCByZXNwZWN0aXZlbHlcbiAgICAgKlxuICAgICAqIF8udGltZXMoMywgZnVuY3Rpb24obikgeyB0aGlzLmNhc3Qobik7IH0sIG1hZ2UpO1xuICAgICAqIC8vID0+IGFsc28gY2FsbHMgYG1hZ2UuY2FzdFNwZWxsKG4pYCB0aHJlZSB0aW1lc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRpbWVzKG4sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICBuID0gKG4gPSArbikgPiAtMSA/IG4gOiAwO1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgICAgIGNhbGxiYWNrID0gYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAxKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gY2FsbGJhY2soaW5kZXgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW52ZXJzZSBvZiBgXy5lc2NhcGVgIHRoaXMgbWV0aG9kIGNvbnZlcnRzIHRoZSBIVE1MIGVudGl0aWVzXG4gICAgICogYCZhbXA7YCwgYCZsdDtgLCBgJmd0O2AsIGAmcXVvdDtgLCBhbmQgYCYjMzk7YCBpbiBgc3RyaW5nYCB0byB0aGVpclxuICAgICAqIGNvcnJlc3BvbmRpbmcgY2hhcmFjdGVycy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gdW5lc2NhcGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdW5lc2NhcGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmVzY2FwZSgnRnJlZCwgQmFybmV5ICZhbXA7IFBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnRnJlZCwgQmFybmV5ICYgUGViYmxlcydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmVzY2FwZShzdHJpbmcpIHtcbiAgICAgIHJldHVybiBzdHJpbmcgPT0gbnVsbCA/ICcnIDogU3RyaW5nKHN0cmluZykucmVwbGFjZShyZUVzY2FwZWRIdG1sLCB1bmVzY2FwZUh0bWxDaGFyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSB1bmlxdWUgSUQuIElmIGBwcmVmaXhgIGlzIHByb3ZpZGVkIHRoZSBJRCB3aWxsIGJlIGFwcGVuZGVkIHRvIGl0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJlZml4XSBUaGUgdmFsdWUgdG8gcHJlZml4IHRoZSBJRCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuaXF1ZSBJRC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmlxdWVJZCgnY29udGFjdF8nKTtcbiAgICAgKiAvLyA9PiAnY29udGFjdF8xMDQnXG4gICAgICpcbiAgICAgKiBfLnVuaXF1ZUlkKCk7XG4gICAgICogLy8gPT4gJzEwNSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmlxdWVJZChwcmVmaXgpIHtcbiAgICAgIHZhciBpZCA9ICsraWRDb3VudGVyO1xuICAgICAgcmV0dXJuIFN0cmluZyhwcmVmaXggPT0gbnVsbCA/ICcnIDogcHJlZml4KSArIGlkO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIG9iamVjdCB0aGF0IHdyYXBzIHRoZSBnaXZlbiB2YWx1ZSB3aXRoIGV4cGxpY2l0XG4gICAgICogbWV0aG9kIGNoYWluaW5nIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHdyYXBwZXIgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwIH0sXG4gICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciB5b3VuZ2VzdCA9IF8uY2hhaW4oY2hhcmFjdGVycylcbiAgICAgKiAgICAgLnNvcnRCeSgnYWdlJylcbiAgICAgKiAgICAgLm1hcChmdW5jdGlvbihjaHIpIHsgcmV0dXJuIGNoci5uYW1lICsgJyBpcyAnICsgY2hyLmFnZTsgfSlcbiAgICAgKiAgICAgLmZpcnN0KClcbiAgICAgKiAgICAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4gJ3BlYmJsZXMgaXMgMSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaGFpbih2YWx1ZSkge1xuICAgICAgdmFsdWUgPSBuZXcgbG9kYXNoV3JhcHBlcih2YWx1ZSk7XG4gICAgICB2YWx1ZS5fX2NoYWluX18gPSB0cnVlO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgYGludGVyY2VwdG9yYCB3aXRoIHRoZSBgdmFsdWVgIGFzIHRoZSBmaXJzdCBhcmd1bWVudCBhbmQgdGhlblxuICAgICAqIHJldHVybnMgYHZhbHVlYC4gVGhlIHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gXCJ0YXAgaW50b1wiIGEgbWV0aG9kXG4gICAgICogY2hhaW4gaW4gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpblxuICAgICAqIHRoZSBjaGFpbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb3ZpZGUgdG8gYGludGVyY2VwdG9yYC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbnRlcmNlcHRvciBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDIsIDMsIDRdKVxuICAgICAqICAudGFwKGZ1bmN0aW9uKGFycmF5KSB7IGFycmF5LnBvcCgpOyB9KVxuICAgICAqICAucmV2ZXJzZSgpXG4gICAgICogIC52YWx1ZSgpO1xuICAgICAqIC8vID0+IFszLCAyLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRhcCh2YWx1ZSwgaW50ZXJjZXB0b3IpIHtcbiAgICAgIGludGVyY2VwdG9yKHZhbHVlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIGV4cGxpY2l0IG1ldGhvZCBjaGFpbmluZyBvbiB0aGUgd3JhcHBlciBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbmFtZSBjaGFpblxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluaW5nXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHdyYXBwZXIgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHdpdGhvdXQgZXhwbGljaXQgY2hhaW5pbmdcbiAgICAgKiBfKGNoYXJhY3RlcnMpLmZpcnN0KCk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqXG4gICAgICogLy8gd2l0aCBleHBsaWNpdCBjaGFpbmluZ1xuICAgICAqIF8oY2hhcmFjdGVycykuY2hhaW4oKVxuICAgICAqICAgLmZpcnN0KClcbiAgICAgKiAgIC5waWNrKCdhZ2UnKVxuICAgICAqICAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4geyAnYWdlJzogMzYgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJDaGFpbigpIHtcbiAgICAgIHRoaXMuX19jaGFpbl9fID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2R1Y2VzIHRoZSBgdG9TdHJpbmdgIHJlc3VsdCBvZiB0aGUgd3JhcHBlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBuYW1lIHRvU3RyaW5nXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcgcmVzdWx0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzXSkudG9TdHJpbmcoKTtcbiAgICAgKiAvLyA9PiAnMSwyLDMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlclRvU3RyaW5nKCkge1xuICAgICAgcmV0dXJuIFN0cmluZyh0aGlzLl9fd3JhcHBlZF9fKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB0aGUgd3JhcHBlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBuYW1lIHZhbHVlT2ZcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyB2YWx1ZVxuICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB3cmFwcGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzXSkudmFsdWVPZigpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJWYWx1ZU9mKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX193cmFwcGVkX187XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvLyBhZGQgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHdyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmdcbiAgICBsb2Rhc2guYWZ0ZXIgPSBhZnRlcjtcbiAgICBsb2Rhc2guYXNzaWduID0gYXNzaWduO1xuICAgIGxvZGFzaC5hdCA9IGF0O1xuICAgIGxvZGFzaC5iaW5kID0gYmluZDtcbiAgICBsb2Rhc2guYmluZEFsbCA9IGJpbmRBbGw7XG4gICAgbG9kYXNoLmJpbmRLZXkgPSBiaW5kS2V5O1xuICAgIGxvZGFzaC5jaGFpbiA9IGNoYWluO1xuICAgIGxvZGFzaC5jb21wYWN0ID0gY29tcGFjdDtcbiAgICBsb2Rhc2guY29tcG9zZSA9IGNvbXBvc2U7XG4gICAgbG9kYXNoLmNvbnN0YW50ID0gY29uc3RhbnQ7XG4gICAgbG9kYXNoLmNvdW50QnkgPSBjb3VudEJ5O1xuICAgIGxvZGFzaC5jcmVhdGUgPSBjcmVhdGU7XG4gICAgbG9kYXNoLmNyZWF0ZUNhbGxiYWNrID0gY3JlYXRlQ2FsbGJhY2s7XG4gICAgbG9kYXNoLmN1cnJ5ID0gY3Vycnk7XG4gICAgbG9kYXNoLmRlYm91bmNlID0gZGVib3VuY2U7XG4gICAgbG9kYXNoLmRlZmF1bHRzID0gZGVmYXVsdHM7XG4gICAgbG9kYXNoLmRlZmVyID0gZGVmZXI7XG4gICAgbG9kYXNoLmRlbGF5ID0gZGVsYXk7XG4gICAgbG9kYXNoLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO1xuICAgIGxvZGFzaC5maWx0ZXIgPSBmaWx0ZXI7XG4gICAgbG9kYXNoLmZsYXR0ZW4gPSBmbGF0dGVuO1xuICAgIGxvZGFzaC5mb3JFYWNoID0gZm9yRWFjaDtcbiAgICBsb2Rhc2guZm9yRWFjaFJpZ2h0ID0gZm9yRWFjaFJpZ2h0O1xuICAgIGxvZGFzaC5mb3JJbiA9IGZvckluO1xuICAgIGxvZGFzaC5mb3JJblJpZ2h0ID0gZm9ySW5SaWdodDtcbiAgICBsb2Rhc2guZm9yT3duID0gZm9yT3duO1xuICAgIGxvZGFzaC5mb3JPd25SaWdodCA9IGZvck93blJpZ2h0O1xuICAgIGxvZGFzaC5mdW5jdGlvbnMgPSBmdW5jdGlvbnM7XG4gICAgbG9kYXNoLmdyb3VwQnkgPSBncm91cEJ5O1xuICAgIGxvZGFzaC5pbmRleEJ5ID0gaW5kZXhCeTtcbiAgICBsb2Rhc2guaW5pdGlhbCA9IGluaXRpYWw7XG4gICAgbG9kYXNoLmludGVyc2VjdGlvbiA9IGludGVyc2VjdGlvbjtcbiAgICBsb2Rhc2guaW52ZXJ0ID0gaW52ZXJ0O1xuICAgIGxvZGFzaC5pbnZva2UgPSBpbnZva2U7XG4gICAgbG9kYXNoLmtleXMgPSBrZXlzO1xuICAgIGxvZGFzaC5tYXAgPSBtYXA7XG4gICAgbG9kYXNoLm1hcFZhbHVlcyA9IG1hcFZhbHVlcztcbiAgICBsb2Rhc2gubWF4ID0gbWF4O1xuICAgIGxvZGFzaC5tZW1vaXplID0gbWVtb2l6ZTtcbiAgICBsb2Rhc2gubWVyZ2UgPSBtZXJnZTtcbiAgICBsb2Rhc2gubWluID0gbWluO1xuICAgIGxvZGFzaC5vbWl0ID0gb21pdDtcbiAgICBsb2Rhc2gub25jZSA9IG9uY2U7XG4gICAgbG9kYXNoLnBhaXJzID0gcGFpcnM7XG4gICAgbG9kYXNoLnBhcnRpYWwgPSBwYXJ0aWFsO1xuICAgIGxvZGFzaC5wYXJ0aWFsUmlnaHQgPSBwYXJ0aWFsUmlnaHQ7XG4gICAgbG9kYXNoLnBpY2sgPSBwaWNrO1xuICAgIGxvZGFzaC5wbHVjayA9IHBsdWNrO1xuICAgIGxvZGFzaC5wcm9wZXJ0eSA9IHByb3BlcnR5O1xuICAgIGxvZGFzaC5wdWxsID0gcHVsbDtcbiAgICBsb2Rhc2gucmFuZ2UgPSByYW5nZTtcbiAgICBsb2Rhc2gucmVqZWN0ID0gcmVqZWN0O1xuICAgIGxvZGFzaC5yZW1vdmUgPSByZW1vdmU7XG4gICAgbG9kYXNoLnJlc3QgPSByZXN0O1xuICAgIGxvZGFzaC5zaHVmZmxlID0gc2h1ZmZsZTtcbiAgICBsb2Rhc2guc29ydEJ5ID0gc29ydEJ5O1xuICAgIGxvZGFzaC50YXAgPSB0YXA7XG4gICAgbG9kYXNoLnRocm90dGxlID0gdGhyb3R0bGU7XG4gICAgbG9kYXNoLnRpbWVzID0gdGltZXM7XG4gICAgbG9kYXNoLnRvQXJyYXkgPSB0b0FycmF5O1xuICAgIGxvZGFzaC50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgbG9kYXNoLnVuaW9uID0gdW5pb247XG4gICAgbG9kYXNoLnVuaXEgPSB1bmlxO1xuICAgIGxvZGFzaC52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgbG9kYXNoLndoZXJlID0gd2hlcmU7XG4gICAgbG9kYXNoLndpdGhvdXQgPSB3aXRob3V0O1xuICAgIGxvZGFzaC53cmFwID0gd3JhcDtcbiAgICBsb2Rhc2gueG9yID0geG9yO1xuICAgIGxvZGFzaC56aXAgPSB6aXA7XG4gICAgbG9kYXNoLnppcE9iamVjdCA9IHppcE9iamVjdDtcblxuICAgIC8vIGFkZCBhbGlhc2VzXG4gICAgbG9kYXNoLmNvbGxlY3QgPSBtYXA7XG4gICAgbG9kYXNoLmRyb3AgPSByZXN0O1xuICAgIGxvZGFzaC5lYWNoID0gZm9yRWFjaDtcbiAgICBsb2Rhc2guZWFjaFJpZ2h0ID0gZm9yRWFjaFJpZ2h0O1xuICAgIGxvZGFzaC5leHRlbmQgPSBhc3NpZ247XG4gICAgbG9kYXNoLm1ldGhvZHMgPSBmdW5jdGlvbnM7XG4gICAgbG9kYXNoLm9iamVjdCA9IHppcE9iamVjdDtcbiAgICBsb2Rhc2guc2VsZWN0ID0gZmlsdGVyO1xuICAgIGxvZGFzaC50YWlsID0gcmVzdDtcbiAgICBsb2Rhc2gudW5pcXVlID0gdW5pcTtcbiAgICBsb2Rhc2gudW56aXAgPSB6aXA7XG5cbiAgICAvLyBhZGQgZnVuY3Rpb25zIHRvIGBsb2Rhc2gucHJvdG90eXBlYFxuICAgIG1peGluKGxvZGFzaCk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8vIGFkZCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdW53cmFwcGVkIHZhbHVlcyB3aGVuIGNoYWluaW5nXG4gICAgbG9kYXNoLmNsb25lID0gY2xvbmU7XG4gICAgbG9kYXNoLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcbiAgICBsb2Rhc2guY29udGFpbnMgPSBjb250YWlucztcbiAgICBsb2Rhc2guZXNjYXBlID0gZXNjYXBlO1xuICAgIGxvZGFzaC5ldmVyeSA9IGV2ZXJ5O1xuICAgIGxvZGFzaC5maW5kID0gZmluZDtcbiAgICBsb2Rhc2guZmluZEluZGV4ID0gZmluZEluZGV4O1xuICAgIGxvZGFzaC5maW5kS2V5ID0gZmluZEtleTtcbiAgICBsb2Rhc2guZmluZExhc3QgPSBmaW5kTGFzdDtcbiAgICBsb2Rhc2guZmluZExhc3RJbmRleCA9IGZpbmRMYXN0SW5kZXg7XG4gICAgbG9kYXNoLmZpbmRMYXN0S2V5ID0gZmluZExhc3RLZXk7XG4gICAgbG9kYXNoLmhhcyA9IGhhcztcbiAgICBsb2Rhc2guaWRlbnRpdHkgPSBpZGVudGl0eTtcbiAgICBsb2Rhc2guaW5kZXhPZiA9IGluZGV4T2Y7XG4gICAgbG9kYXNoLmlzQXJndW1lbnRzID0gaXNBcmd1bWVudHM7XG4gICAgbG9kYXNoLmlzQXJyYXkgPSBpc0FycmF5O1xuICAgIGxvZGFzaC5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG4gICAgbG9kYXNoLmlzRGF0ZSA9IGlzRGF0ZTtcbiAgICBsb2Rhc2guaXNFbGVtZW50ID0gaXNFbGVtZW50O1xuICAgIGxvZGFzaC5pc0VtcHR5ID0gaXNFbXB0eTtcbiAgICBsb2Rhc2guaXNFcXVhbCA9IGlzRXF1YWw7XG4gICAgbG9kYXNoLmlzRmluaXRlID0gaXNGaW5pdGU7XG4gICAgbG9kYXNoLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuICAgIGxvZGFzaC5pc05hTiA9IGlzTmFOO1xuICAgIGxvZGFzaC5pc051bGwgPSBpc051bGw7XG4gICAgbG9kYXNoLmlzTnVtYmVyID0gaXNOdW1iZXI7XG4gICAgbG9kYXNoLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG4gICAgbG9kYXNoLmlzUGxhaW5PYmplY3QgPSBpc1BsYWluT2JqZWN0O1xuICAgIGxvZGFzaC5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuICAgIGxvZGFzaC5pc1N0cmluZyA9IGlzU3RyaW5nO1xuICAgIGxvZGFzaC5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuICAgIGxvZGFzaC5sYXN0SW5kZXhPZiA9IGxhc3RJbmRleE9mO1xuICAgIGxvZGFzaC5taXhpbiA9IG1peGluO1xuICAgIGxvZGFzaC5ub0NvbmZsaWN0ID0gbm9Db25mbGljdDtcbiAgICBsb2Rhc2gubm9vcCA9IG5vb3A7XG4gICAgbG9kYXNoLm5vdyA9IG5vdztcbiAgICBsb2Rhc2gucGFyc2VJbnQgPSBwYXJzZUludDtcbiAgICBsb2Rhc2gucmFuZG9tID0gcmFuZG9tO1xuICAgIGxvZGFzaC5yZWR1Y2UgPSByZWR1Y2U7XG4gICAgbG9kYXNoLnJlZHVjZVJpZ2h0ID0gcmVkdWNlUmlnaHQ7XG4gICAgbG9kYXNoLnJlc3VsdCA9IHJlc3VsdDtcbiAgICBsb2Rhc2gucnVuSW5Db250ZXh0ID0gcnVuSW5Db250ZXh0O1xuICAgIGxvZGFzaC5zaXplID0gc2l6ZTtcbiAgICBsb2Rhc2guc29tZSA9IHNvbWU7XG4gICAgbG9kYXNoLnNvcnRlZEluZGV4ID0gc29ydGVkSW5kZXg7XG4gICAgbG9kYXNoLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgbG9kYXNoLnVuZXNjYXBlID0gdW5lc2NhcGU7XG4gICAgbG9kYXNoLnVuaXF1ZUlkID0gdW5pcXVlSWQ7XG5cbiAgICAvLyBhZGQgYWxpYXNlc1xuICAgIGxvZGFzaC5hbGwgPSBldmVyeTtcbiAgICBsb2Rhc2guYW55ID0gc29tZTtcbiAgICBsb2Rhc2guZGV0ZWN0ID0gZmluZDtcbiAgICBsb2Rhc2guZmluZFdoZXJlID0gZmluZDtcbiAgICBsb2Rhc2guZm9sZGwgPSByZWR1Y2U7XG4gICAgbG9kYXNoLmZvbGRyID0gcmVkdWNlUmlnaHQ7XG4gICAgbG9kYXNoLmluY2x1ZGUgPSBjb250YWlucztcbiAgICBsb2Rhc2guaW5qZWN0ID0gcmVkdWNlO1xuXG4gICAgbWl4aW4oZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc291cmNlID0ge31cbiAgICAgIGZvck93bihsb2Rhc2gsIGZ1bmN0aW9uKGZ1bmMsIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgaWYgKCFsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XG4gICAgICAgICAgc291cmNlW21ldGhvZE5hbWVdID0gZnVuYztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gc291cmNlO1xuICAgIH0oKSwgZmFsc2UpO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvLyBhZGQgZnVuY3Rpb25zIGNhcGFibGUgb2YgcmV0dXJuaW5nIHdyYXBwZWQgYW5kIHVud3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZ1xuICAgIGxvZGFzaC5maXJzdCA9IGZpcnN0O1xuICAgIGxvZGFzaC5sYXN0ID0gbGFzdDtcbiAgICBsb2Rhc2guc2FtcGxlID0gc2FtcGxlO1xuXG4gICAgLy8gYWRkIGFsaWFzZXNcbiAgICBsb2Rhc2gudGFrZSA9IGZpcnN0O1xuICAgIGxvZGFzaC5oZWFkID0gZmlyc3Q7XG5cbiAgICBmb3JPd24obG9kYXNoLCBmdW5jdGlvbihmdW5jLCBtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgY2FsbGJhY2thYmxlID0gbWV0aG9kTmFtZSAhPT0gJ3NhbXBsZSc7XG4gICAgICBpZiAoIWxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0pIHtcbiAgICAgICAgbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXT0gZnVuY3Rpb24obiwgZ3VhcmQpIHtcbiAgICAgICAgICB2YXIgY2hhaW5BbGwgPSB0aGlzLl9fY2hhaW5fXyxcbiAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYyh0aGlzLl9fd3JhcHBlZF9fLCBuLCBndWFyZCk7XG5cbiAgICAgICAgICByZXR1cm4gIWNoYWluQWxsICYmIChuID09IG51bGwgfHwgKGd1YXJkICYmICEoY2FsbGJhY2thYmxlICYmIHR5cGVvZiBuID09ICdmdW5jdGlvbicpKSlcbiAgICAgICAgICAgID8gcmVzdWx0XG4gICAgICAgICAgICA6IG5ldyBsb2Rhc2hXcmFwcGVyKHJlc3VsdCwgY2hhaW5BbGwpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2VtYW50aWMgdmVyc2lvbiBudW1iZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBzdHJpbmdcbiAgICAgKi9cbiAgICBsb2Rhc2guVkVSU0lPTiA9ICcyLjQuMSc7XG5cbiAgICAvLyBhZGQgXCJDaGFpbmluZ1wiIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlclxuICAgIGxvZGFzaC5wcm90b3R5cGUuY2hhaW4gPSB3cmFwcGVyQ2hhaW47XG4gICAgbG9kYXNoLnByb3RvdHlwZS50b1N0cmluZyA9IHdyYXBwZXJUb1N0cmluZztcbiAgICBsb2Rhc2gucHJvdG90eXBlLnZhbHVlID0gd3JhcHBlclZhbHVlT2Y7XG4gICAgbG9kYXNoLnByb3RvdHlwZS52YWx1ZU9mID0gd3JhcHBlclZhbHVlT2Y7XG5cbiAgICAvLyBhZGQgYEFycmF5YCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdW53cmFwcGVkIHZhbHVlc1xuICAgIGZvckVhY2goWydqb2luJywgJ3BvcCcsICdzaGlmdCddLCBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IGFycmF5UmVmW21ldGhvZE5hbWVdO1xuICAgICAgbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hhaW5BbGwgPSB0aGlzLl9fY2hhaW5fXyxcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcy5fX3dyYXBwZWRfXywgYXJndW1lbnRzKTtcblxuICAgICAgICByZXR1cm4gY2hhaW5BbGxcbiAgICAgICAgICA/IG5ldyBsb2Rhc2hXcmFwcGVyKHJlc3VsdCwgY2hhaW5BbGwpXG4gICAgICAgICAgOiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gYWRkIGBBcnJheWAgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHRoZSBleGlzdGluZyB3cmFwcGVkIHZhbHVlXG4gICAgZm9yRWFjaChbJ3B1c2gnLCAncmV2ZXJzZScsICdzb3J0JywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBhcnJheVJlZlttZXRob2ROYW1lXTtcbiAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZnVuYy5hcHBseSh0aGlzLl9fd3JhcHBlZF9fLCBhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgYEFycmF5YCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gbmV3IHdyYXBwZWQgdmFsdWVzXG4gICAgZm9yRWFjaChbJ2NvbmNhdCcsICdzbGljZScsICdzcGxpY2UnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBhcnJheVJlZlttZXRob2ROYW1lXTtcbiAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBsb2Rhc2hXcmFwcGVyKGZ1bmMuYXBwbHkodGhpcy5fX3dyYXBwZWRfXywgYXJndW1lbnRzKSwgdGhpcy5fX2NoYWluX18pO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBsb2Rhc2g7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvLyBleHBvc2UgTG8tRGFzaFxuICB2YXIgXyA9IHJ1bkluQ29udGV4dCgpO1xuXG4gIC8vIHNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMgbGlrZSByLmpzIGNoZWNrIGZvciBjb25kaXRpb24gcGF0dGVybnMgbGlrZSB0aGUgZm9sbG93aW5nOlxuICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBFeHBvc2UgTG8tRGFzaCB0byB0aGUgZ2xvYmFsIG9iamVjdCBldmVuIHdoZW4gYW4gQU1EIGxvYWRlciBpcyBwcmVzZW50IGluXG4gICAgLy8gY2FzZSBMby1EYXNoIGlzIGxvYWRlZCB3aXRoIGEgUmVxdWlyZUpTIHNoaW0gY29uZmlnLlxuICAgIC8vIFNlZSBodHRwOi8vcmVxdWlyZWpzLm9yZy9kb2NzL2FwaS5odG1sI2NvbmZpZy1zaGltXG4gICAgcm9vdC5fID0gXztcblxuICAgIC8vIGRlZmluZSBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlIHNvLCB0aHJvdWdoIHBhdGggbWFwcGluZywgaXQgY2FuIGJlXG4gICAgLy8gcmVmZXJlbmNlZCBhcyB0aGUgXCJ1bmRlcnNjb3JlXCIgbW9kdWxlXG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG4gIH1cbiAgLy8gY2hlY2sgZm9yIGBleHBvcnRzYCBhZnRlciBgZGVmaW5lYCBpbiBjYXNlIGEgYnVpbGQgb3B0aW1pemVyIGFkZHMgYW4gYGV4cG9ydHNgIG9iamVjdFxuICBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7XG4gICAgLy8gaW4gTm9kZS5qcyBvciBSaW5nb0pTXG4gICAgaWYgKG1vZHVsZUV4cG9ydHMpIHtcbiAgICAgIChmcmVlTW9kdWxlLmV4cG9ydHMgPSBfKS5fID0gXztcbiAgICB9XG4gICAgLy8gaW4gTmFyd2hhbCBvciBSaGlubyAtcmVxdWlyZVxuICAgIGVsc2Uge1xuICAgICAgZnJlZUV4cG9ydHMuXyA9IF87XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIC8vIGluIGEgYnJvd3NlciBvciBSaGlub1xuICAgIHJvb3QuXyA9IF87XG4gIH1cbn0uY2FsbCh0aGlzKSk7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KSIsIi8qISBzaGlmdHkgLSB2MS4yLjIgLSAyMDE0LTEwLTA5IC0gaHR0cDovL2plcmVteWNrYWhuLmdpdGh1Yi5pby9zaGlmdHkgKi9cbjsoZnVuY3Rpb24gKHJvb3QpIHtcblxuLyohXG4gKiBTaGlmdHkgQ29yZVxuICogQnkgSmVyZW15IEthaG4gLSBqZXJlbXlja2FobkBnbWFpbC5jb21cbiAqL1xuXG4vLyBVZ2xpZnlKUyBkZWZpbmUgaGFjay4gIFVzZWQgZm9yIHVuaXQgdGVzdGluZy4gIENvbnRlbnRzIG9mIHRoaXMgaWYgYXJlXG4vLyBjb21waWxlZCBhd2F5LlxuaWYgKHR5cGVvZiBTSElGVFlfREVCVUdfTk9XID09PSAndW5kZWZpbmVkJykge1xuICBTSElGVFlfREVCVUdfTk9XID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiArbmV3IERhdGUoKTtcbiAgfTtcbn1cblxudmFyIFR3ZWVuYWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIEFsaWFzZXMgdGhhdCBnZXQgZGVmaW5lZCBsYXRlciBpbiB0aGlzIGZ1bmN0aW9uXG4gIHZhciBmb3JtdWxhO1xuXG4gIC8vIENPTlNUQU5UU1xuICB2YXIgREVGQVVMVF9TQ0hFRFVMRV9GVU5DVElPTjtcbiAgdmFyIERFRkFVTFRfRUFTSU5HID0gJ2xpbmVhcic7XG4gIHZhciBERUZBVUxUX0RVUkFUSU9OID0gNTAwO1xuICB2YXIgVVBEQVRFX1RJTUUgPSAxMDAwIC8gNjA7XG5cbiAgdmFyIF9ub3cgPSBEYXRlLm5vd1xuICAgICAgID8gRGF0ZS5ub3dcbiAgICAgICA6IGZ1bmN0aW9uICgpIHtyZXR1cm4gK25ldyBEYXRlKCk7fTtcblxuICB2YXIgbm93ID0gU0hJRlRZX0RFQlVHX05PV1xuICAgICAgID8gU0hJRlRZX0RFQlVHX05PV1xuICAgICAgIDogX25vdztcblxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKSBzaGltIGJ5IFBhdWwgSXJpc2ggKG1vZGlmaWVkIGZvciBTaGlmdHkpXG4gICAgLy8gaHR0cDovL3BhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy9cbiAgICBERUZBVUxUX1NDSEVEVUxFX0ZVTkNUSU9OID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgICB8fCB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgIHx8ICh3aW5kb3cubW96Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgICAgJiYgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSlcbiAgICAgICB8fCBzZXRUaW1lb3V0O1xuICB9IGVsc2Uge1xuICAgIERFRkFVTFRfU0NIRURVTEVfRlVOQ1RJT04gPSBzZXRUaW1lb3V0O1xuICB9XG5cbiAgZnVuY3Rpb24gbm9vcCAoKSB7XG4gICAgLy8gTk9PUCFcbiAgfVxuXG4gIC8qIVxuICAgKiBIYW5keSBzaG9ydGN1dCBmb3IgZG9pbmcgYSBmb3ItaW4gbG9vcC4gVGhpcyBpcyBub3QgYSBcIm5vcm1hbFwiIGVhY2hcbiAgICogZnVuY3Rpb24sIGl0IGlzIG9wdGltaXplZCBmb3IgU2hpZnR5LiAgVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIG9ubHkgcmVjZWl2ZXNcbiAgICogdGhlIHByb3BlcnR5IG5hbWUsIG5vdCB0aGUgdmFsdWUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICogQHBhcmFtIHtGdW5jdGlvbihzdHJpbmcpfSBmblxuICAgKi9cbiAgZnVuY3Rpb24gZWFjaCAob2JqLCBmbikge1xuICAgIHZhciBrZXk7XG4gICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGZuKGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyohXG4gICAqIFBlcmZvcm0gYSBzaGFsbG93IGNvcHkgb2YgT2JqZWN0IHByb3BlcnRpZXMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRPYmplY3QgVGhlIG9iamVjdCB0byBjb3B5IGludG9cbiAgICogQHBhcmFtIHtPYmplY3R9IHNyY09iamVjdCBUaGUgb2JqZWN0IHRvIGNvcHkgZnJvbVxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEEgcmVmZXJlbmNlIHRvIHRoZSBhdWdtZW50ZWQgYHRhcmdldE9iamAgT2JqZWN0XG4gICAqL1xuICBmdW5jdGlvbiBzaGFsbG93Q29weSAodGFyZ2V0T2JqLCBzcmNPYmopIHtcbiAgICBlYWNoKHNyY09iaiwgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgIHRhcmdldE9ialtwcm9wXSA9IHNyY09ialtwcm9wXTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0YXJnZXRPYmo7XG4gIH1cblxuICAvKiFcbiAgICogQ29waWVzIGVhY2ggcHJvcGVydHkgZnJvbSBzcmMgb250byB0YXJnZXQsIGJ1dCBvbmx5IGlmIHRoZSBwcm9wZXJ0eSB0b1xuICAgKiBjb3B5IHRvIHRhcmdldCBpcyB1bmRlZmluZWQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgTWlzc2luZyBwcm9wZXJ0aWVzIGluIHRoaXMgT2JqZWN0IGFyZSBmaWxsZWQgaW5cbiAgICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICAgKi9cbiAgZnVuY3Rpb24gZGVmYXVsdHMgKHRhcmdldCwgc3JjKSB7XG4gICAgZWFjaChzcmMsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICBpZiAodHlwZW9mIHRhcmdldFtwcm9wXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc3JjW3Byb3BdO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyohXG4gICAqIENhbGN1bGF0ZXMgdGhlIGludGVycG9sYXRlZCB0d2VlbiB2YWx1ZXMgb2YgYW4gT2JqZWN0IGZvciBhIGdpdmVuXG4gICAqIHRpbWVzdGFtcC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGZvclBvc2l0aW9uIFRoZSBwb3NpdGlvbiB0byBjb21wdXRlIHRoZSBzdGF0ZSBmb3IuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjdXJyZW50U3RhdGUgQ3VycmVudCBzdGF0ZSBwcm9wZXJ0aWVzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3JpZ2luYWxTdGF0ZTogVGhlIG9yaWdpbmFsIHN0YXRlIHByb3BlcnRpZXMgdGhlIE9iamVjdCBpc1xuICAgKiB0d2VlbmluZyBmcm9tLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0U3RhdGU6IFRoZSBkZXN0aW5hdGlvbiBzdGF0ZSBwcm9wZXJ0aWVzIHRoZSBPYmplY3RcbiAgICogaXMgdHdlZW5pbmcgdG8uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbjogVGhlIGxlbmd0aCBvZiB0aGUgdHdlZW4gaW4gbWlsbGlzZWNvbmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZXN0YW1wOiBUaGUgVU5JWCBlcG9jaCB0aW1lIGF0IHdoaWNoIHRoZSB0d2VlbiBiZWdhbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVhc2luZzogVGhpcyBPYmplY3QncyBrZXlzIG11c3QgY29ycmVzcG9uZCB0byB0aGUga2V5cyBpblxuICAgKiB0YXJnZXRTdGF0ZS5cbiAgICovXG4gIGZ1bmN0aW9uIHR3ZWVuUHJvcHMgKGZvclBvc2l0aW9uLCBjdXJyZW50U3RhdGUsIG9yaWdpbmFsU3RhdGUsIHRhcmdldFN0YXRlLFxuICAgIGR1cmF0aW9uLCB0aW1lc3RhbXAsIGVhc2luZykge1xuICAgIHZhciBub3JtYWxpemVkUG9zaXRpb24gPSAoZm9yUG9zaXRpb24gLSB0aW1lc3RhbXApIC8gZHVyYXRpb247XG5cbiAgICB2YXIgcHJvcDtcbiAgICBmb3IgKHByb3AgaW4gY3VycmVudFN0YXRlKSB7XG4gICAgICBpZiAoY3VycmVudFN0YXRlLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIGN1cnJlbnRTdGF0ZVtwcm9wXSA9IHR3ZWVuUHJvcChvcmlnaW5hbFN0YXRlW3Byb3BdLFxuICAgICAgICAgIHRhcmdldFN0YXRlW3Byb3BdLCBmb3JtdWxhW2Vhc2luZ1twcm9wXV0sIG5vcm1hbGl6ZWRQb3NpdGlvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxuXG4gIC8qIVxuICAgKiBUd2VlbnMgYSBzaW5nbGUgcHJvcGVydHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgdmFsdWUgdGhhdCB0aGUgdHdlZW4gc3RhcnRlZCBmcm9tLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSB2YWx1ZSB0aGF0IHRoZSB0d2VlbiBzaG91bGQgZW5kIGF0LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYXNpbmdGdW5jIFRoZSBlYXNpbmcgY3VydmUgdG8gYXBwbHkgdG8gdGhlIHR3ZWVuLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb24gVGhlIG5vcm1hbGl6ZWQgcG9zaXRpb24gKGJldHdlZW4gMC4wIGFuZCAxLjApIHRvXG4gICAqIGNhbGN1bGF0ZSB0aGUgbWlkcG9pbnQgb2YgJ3N0YXJ0JyBhbmQgJ2VuZCcgYWdhaW5zdC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgdHdlZW5lZCB2YWx1ZS5cbiAgICovXG4gIGZ1bmN0aW9uIHR3ZWVuUHJvcCAoc3RhcnQsIGVuZCwgZWFzaW5nRnVuYywgcG9zaXRpb24pIHtcbiAgICByZXR1cm4gc3RhcnQgKyAoZW5kIC0gc3RhcnQpICogZWFzaW5nRnVuYyhwb3NpdGlvbik7XG4gIH1cblxuICAvKiFcbiAgICogQXBwbGllcyBhIGZpbHRlciB0byBUd2VlbmFibGUgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSB7VHdlZW5hYmxlfSB0d2VlbmFibGUgVGhlIGBUd2VlbmFibGVgIGluc3RhbmNlIHRvIGNhbGwgdGhlIGZpbHRlclxuICAgKiB1cG9uLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsdGVyTmFtZSBUaGUgbmFtZSBvZiB0aGUgZmlsdGVyIHRvIGFwcGx5LlxuICAgKi9cbiAgZnVuY3Rpb24gYXBwbHlGaWx0ZXIgKHR3ZWVuYWJsZSwgZmlsdGVyTmFtZSkge1xuICAgIHZhciBmaWx0ZXJzID0gVHdlZW5hYmxlLnByb3RvdHlwZS5maWx0ZXI7XG4gICAgdmFyIGFyZ3MgPSB0d2VlbmFibGUuX2ZpbHRlckFyZ3M7XG5cbiAgICBlYWNoKGZpbHRlcnMsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICBpZiAodHlwZW9mIGZpbHRlcnNbbmFtZV1bZmlsdGVyTmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZpbHRlcnNbbmFtZV1bZmlsdGVyTmFtZV0uYXBwbHkodHdlZW5hYmxlLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhciB0aW1lb3V0SGFuZGxlcl9lbmRUaW1lO1xuICB2YXIgdGltZW91dEhhbmRsZXJfY3VycmVudFRpbWU7XG4gIHZhciB0aW1lb3V0SGFuZGxlcl9pc0VuZGVkO1xuICAvKiFcbiAgICogSGFuZGxlcyB0aGUgdXBkYXRlIGxvZ2ljIGZvciBvbmUgc3RlcCBvZiBhIHR3ZWVuLlxuICAgKiBAcGFyYW0ge1R3ZWVuYWJsZX0gdHdlZW5hYmxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lc3RhbXBcbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjdXJyZW50U3RhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9yaWdpbmFsU3RhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFN0YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlYXNpbmdcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3RlcFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9uKEZ1bmN0aW9uLG51bWJlcil9fSBzY2hlZHVsZVxuICAgKi9cbiAgZnVuY3Rpb24gdGltZW91dEhhbmRsZXIgKHR3ZWVuYWJsZSwgdGltZXN0YW1wLCBkdXJhdGlvbiwgY3VycmVudFN0YXRlLFxuICAgIG9yaWdpbmFsU3RhdGUsIHRhcmdldFN0YXRlLCBlYXNpbmcsIHN0ZXAsIHNjaGVkdWxlKSB7XG4gICAgdGltZW91dEhhbmRsZXJfZW5kVGltZSA9IHRpbWVzdGFtcCArIGR1cmF0aW9uO1xuICAgIHRpbWVvdXRIYW5kbGVyX2N1cnJlbnRUaW1lID0gTWF0aC5taW4obm93KCksIHRpbWVvdXRIYW5kbGVyX2VuZFRpbWUpO1xuICAgIHRpbWVvdXRIYW5kbGVyX2lzRW5kZWQgPSB0aW1lb3V0SGFuZGxlcl9jdXJyZW50VGltZSA+PSB0aW1lb3V0SGFuZGxlcl9lbmRUaW1lO1xuXG4gICAgaWYgKHR3ZWVuYWJsZS5pc1BsYXlpbmcoKSAmJiAhdGltZW91dEhhbmRsZXJfaXNFbmRlZCkge1xuICAgICAgc2NoZWR1bGUodHdlZW5hYmxlLl90aW1lb3V0SGFuZGxlciwgVVBEQVRFX1RJTUUpO1xuXG4gICAgICBhcHBseUZpbHRlcih0d2VlbmFibGUsICdiZWZvcmVUd2VlbicpO1xuICAgICAgdHdlZW5Qcm9wcyh0aW1lb3V0SGFuZGxlcl9jdXJyZW50VGltZSwgY3VycmVudFN0YXRlLCBvcmlnaW5hbFN0YXRlLFxuICAgICAgICB0YXJnZXRTdGF0ZSwgZHVyYXRpb24sIHRpbWVzdGFtcCwgZWFzaW5nKTtcbiAgICAgIGFwcGx5RmlsdGVyKHR3ZWVuYWJsZSwgJ2FmdGVyVHdlZW4nKTtcblxuICAgICAgc3RlcChjdXJyZW50U3RhdGUpO1xuICAgIH0gZWxzZSBpZiAodGltZW91dEhhbmRsZXJfaXNFbmRlZCkge1xuICAgICAgc3RlcCh0YXJnZXRTdGF0ZSk7XG4gICAgICB0d2VlbmFibGUuc3RvcCh0cnVlKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qIVxuICAgKiBDcmVhdGVzIGEgdXNhYmxlIGVhc2luZyBPYmplY3QgZnJvbSBlaXRoZXIgYSBzdHJpbmcgb3IgYW5vdGhlciBlYXNpbmdcbiAgICogT2JqZWN0LiAgSWYgYGVhc2luZ2AgaXMgYW4gT2JqZWN0LCB0aGVuIHRoaXMgZnVuY3Rpb24gY2xvbmVzIGl0IGFuZCBmaWxsc1xuICAgKiBpbiB0aGUgbWlzc2luZyBwcm9wZXJ0aWVzIHdpdGggXCJsaW5lYXJcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGZyb21Ud2VlblBhcmFtc1xuICAgKiBAcGFyYW0ge09iamVjdHxzdHJpbmd9IGVhc2luZ1xuICAgKi9cbiAgZnVuY3Rpb24gY29tcG9zZUVhc2luZ09iamVjdCAoZnJvbVR3ZWVuUGFyYW1zLCBlYXNpbmcpIHtcbiAgICB2YXIgY29tcG9zZWRFYXNpbmcgPSB7fTtcblxuICAgIGlmICh0eXBlb2YgZWFzaW5nID09PSAnc3RyaW5nJykge1xuICAgICAgZWFjaChmcm9tVHdlZW5QYXJhbXMsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgIGNvbXBvc2VkRWFzaW5nW3Byb3BdID0gZWFzaW5nO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVhY2goZnJvbVR3ZWVuUGFyYW1zLCBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICBpZiAoIWNvbXBvc2VkRWFzaW5nW3Byb3BdKSB7XG4gICAgICAgICAgY29tcG9zZWRFYXNpbmdbcHJvcF0gPSBlYXNpbmdbcHJvcF0gfHwgREVGQVVMVF9FQVNJTkc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBjb21wb3NlZEVhc2luZztcbiAgfVxuXG4gIC8qKlxuICAgKiBUd2VlbmFibGUgY29uc3RydWN0b3IuXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X2luaXRpYWxTdGF0ZSBUaGUgdmFsdWVzIHRoYXQgdGhlIGluaXRpYWwgdHdlZW4gc2hvdWxkIHN0YXJ0IGF0IGlmIGEgXCJmcm9tXCIgb2JqZWN0IGlzIG5vdCBwcm92aWRlZCB0byBUd2VlbmFibGUjdHdlZW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X2NvbmZpZyBTZWUgVHdlZW5hYmxlLnByb3RvdHlwZS5zZXRDb25maWcoKVxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGZ1bmN0aW9uIFR3ZWVuYWJsZSAob3B0X2luaXRpYWxTdGF0ZSwgb3B0X2NvbmZpZykge1xuICAgIHRoaXMuX2N1cnJlbnRTdGF0ZSA9IG9wdF9pbml0aWFsU3RhdGUgfHwge307XG4gICAgdGhpcy5fY29uZmlndXJlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3NjaGVkdWxlRnVuY3Rpb24gPSBERUZBVUxUX1NDSEVEVUxFX0ZVTkNUSU9OO1xuXG4gICAgLy8gVG8gcHJldmVudCB1bm5lY2Vzc2FyeSBjYWxscyB0byBzZXRDb25maWcgZG8gbm90IHNldCBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gaGVyZS5cbiAgICAvLyBPbmx5IHNldCBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gaW1tZWRpYXRlbHkgYmVmb3JlIHR3ZWVuaW5nIGlmIG5vbmUgaGFzIGJlZW4gc2V0LlxuICAgIGlmICh0eXBlb2Ygb3B0X2NvbmZpZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuc2V0Q29uZmlnKG9wdF9jb25maWcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmUgYW5kIHN0YXJ0IGEgdHdlZW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X2NvbmZpZyBTZWUgVHdlZW5hYmxlLnByb3RvdHlwZS5zZXRDb25maWcoKVxuICAgKiBAcmV0dXJuIHtUd2VlbmFibGV9XG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLnR3ZWVuID0gZnVuY3Rpb24gKG9wdF9jb25maWcpIHtcbiAgICBpZiAodGhpcy5faXNUd2VlbmluZykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gT25seSBzZXQgZGVmYXVsdCBjb25maWcgaWYgbm8gY29uZmlndXJhdGlvbiBoYXMgYmVlbiBzZXQgcHJldmlvdXNseSBhbmQgbm9uZSBpcyBwcm92aWRlZCBub3cuXG4gICAgaWYgKG9wdF9jb25maWcgIT09IHVuZGVmaW5lZCB8fCAhdGhpcy5fY29uZmlndXJlZCkge1xuICAgICAgdGhpcy5zZXRDb25maWcob3B0X2NvbmZpZyk7XG4gICAgfVxuXG4gICAgdGhpcy5fc3RhcnQodGhpcy5nZXQoKSk7XG4gICAgcmV0dXJuIHRoaXMucmVzdW1lKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHR3ZWVuIGNvbmZpZ3VyYXRpb24uIGBjb25maWdgIG1heSBoYXZlIHRoZSBmb2xsb3dpbmcgb3B0aW9uczpcbiAgICpcbiAgICogLSBfX2Zyb21fXyAoX09iamVjdD1fKTogU3RhcnRpbmcgcG9zaXRpb24uICBJZiBvbWl0dGVkLCB0aGUgY3VycmVudCBzdGF0ZSBpcyB1c2VkLlxuICAgKiAtIF9fdG9fXyAoX09iamVjdD1fKTogRW5kaW5nIHBvc2l0aW9uLlxuICAgKiAtIF9fZHVyYXRpb25fXyAoX251bWJlcj1fKTogSG93IG1hbnkgbWlsbGlzZWNvbmRzIHRvIGFuaW1hdGUgZm9yLlxuICAgKiAtIF9fc3RhcnRfXyAoX0Z1bmN0aW9uKE9iamVjdCk9Xyk6IEZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2hlbiB0aGUgdHdlZW4gYmVnaW5zLiAgUmVjZWl2ZXMgdGhlIHN0YXRlIG9mIHRoZSB0d2VlbiBhcyB0aGUgb25seSBwYXJhbWV0ZXIuXG4gICAqIC0gX19zdGVwX18gKF9GdW5jdGlvbihPYmplY3QpPV8pOiBGdW5jdGlvbiB0byBleGVjdXRlIG9uIGV2ZXJ5IHRpY2suICBSZWNlaXZlcyB0aGUgc3RhdGUgb2YgdGhlIHR3ZWVuIGFzIHRoZSBvbmx5IHBhcmFtZXRlci4gIFRoaXMgZnVuY3Rpb24gaXMgbm90IGNhbGxlZCBvbiB0aGUgZmluYWwgc3RlcCBvZiB0aGUgYW5pbWF0aW9uLCBidXQgYGZpbmlzaGAgaXMuXG4gICAqIC0gX19maW5pc2hfXyAoX0Z1bmN0aW9uKE9iamVjdCk9Xyk6IEZ1bmN0aW9uIHRvIGV4ZWN1dGUgdXBvbiB0d2VlbiBjb21wbGV0aW9uLiAgUmVjZWl2ZXMgdGhlIHN0YXRlIG9mIHRoZSB0d2VlbiBhcyB0aGUgb25seSBwYXJhbWV0ZXIuXG4gICAqIC0gX19lYXNpbmdfXyAoX09iamVjdHxzdHJpbmc9Xyk6IEVhc2luZyBjdXJ2ZSBuYW1lKHMpIHRvIHVzZSBmb3IgdGhlIHR3ZWVuLlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqIEByZXR1cm4ge1R3ZWVuYWJsZX1cbiAgICovXG4gIFR3ZWVuYWJsZS5wcm90b3R5cGUuc2V0Q29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICB0aGlzLl9jb25maWd1cmVkID0gdHJ1ZTtcblxuICAgIC8vIEluaXQgdGhlIGludGVybmFsIHN0YXRlXG4gICAgdGhpcy5fcGF1c2VkQXRUaW1lID0gbnVsbDtcbiAgICB0aGlzLl9zdGFydCA9IGNvbmZpZy5zdGFydCB8fCBub29wO1xuICAgIHRoaXMuX3N0ZXAgPSBjb25maWcuc3RlcCB8fCBub29wO1xuICAgIHRoaXMuX2ZpbmlzaCA9IGNvbmZpZy5maW5pc2ggfHwgbm9vcDtcbiAgICB0aGlzLl9kdXJhdGlvbiA9IGNvbmZpZy5kdXJhdGlvbiB8fCBERUZBVUxUX0RVUkFUSU9OO1xuICAgIHRoaXMuX2N1cnJlbnRTdGF0ZSA9IGNvbmZpZy5mcm9tIHx8IHRoaXMuZ2V0KCk7XG4gICAgdGhpcy5fb3JpZ2luYWxTdGF0ZSA9IHRoaXMuZ2V0KCk7XG4gICAgdGhpcy5fdGFyZ2V0U3RhdGUgPSBjb25maWcudG8gfHwgdGhpcy5nZXQoKTtcbiAgICB0aGlzLl90aW1lc3RhbXAgPSBub3coKTtcblxuICAgIC8vIEFsaWFzZXMgdXNlZCBiZWxvd1xuICAgIHZhciBjdXJyZW50U3RhdGUgPSB0aGlzLl9jdXJyZW50U3RhdGU7XG4gICAgdmFyIHRhcmdldFN0YXRlID0gdGhpcy5fdGFyZ2V0U3RhdGU7XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB0aGVyZSBpcyBhbHdheXMgc29tZXRoaW5nIHRvIHR3ZWVuIHRvLlxuICAgIGRlZmF1bHRzKHRhcmdldFN0YXRlLCBjdXJyZW50U3RhdGUpO1xuXG4gICAgdGhpcy5fZWFzaW5nID0gY29tcG9zZUVhc2luZ09iamVjdChcbiAgICAgIGN1cnJlbnRTdGF0ZSwgY29uZmlnLmVhc2luZyB8fCBERUZBVUxUX0VBU0lORyk7XG5cbiAgICB0aGlzLl9maWx0ZXJBcmdzID1cbiAgICAgIFtjdXJyZW50U3RhdGUsIHRoaXMuX29yaWdpbmFsU3RhdGUsIHRhcmdldFN0YXRlLCB0aGlzLl9lYXNpbmddO1xuXG4gICAgYXBwbHlGaWx0ZXIodGhpcywgJ3R3ZWVuQ3JlYXRlZCcpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gc2hhbGxvd0NvcHkoe30sIHRoaXMuX2N1cnJlbnRTdGF0ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZVxuICAgKi9cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICB0aGlzLl9jdXJyZW50U3RhdGUgPSBzdGF0ZTtcbiAgfTtcblxuICAvKipcbiAgICogUGF1c2VzIGEgdHdlZW4uICBQYXVzZWQgdHdlZW5zIGNhbiBiZSByZXN1bWVkIGZyb20gdGhlIHBvaW50IGF0IHdoaWNoIHRoZXkgd2VyZSBwYXVzZWQuICBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIFtgc3RvcCgpYF0oI3N0b3ApLCBhcyB0aGF0IG1ldGhvZCBjYXVzZXMgYSB0d2VlbiB0byBzdGFydCBvdmVyIHdoZW4gaXQgaXMgcmVzdW1lZC5cbiAgICogQHJldHVybiB7VHdlZW5hYmxlfVxuICAgKi9cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9wYXVzZWRBdFRpbWUgPSBub3coKTtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc3VtZXMgYSBwYXVzZWQgdHdlZW4uXG4gICAqIEByZXR1cm4ge1R3ZWVuYWJsZX1cbiAgICovXG4gIFR3ZWVuYWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fdGltZXN0YW1wICs9IG5vdygpIC0gdGhpcy5fcGF1c2VkQXRUaW1lO1xuICAgIH1cblxuICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5faXNUd2VlbmluZyA9IHRydWU7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5fdGltZW91dEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aW1lb3V0SGFuZGxlcihzZWxmLCBzZWxmLl90aW1lc3RhbXAsIHNlbGYuX2R1cmF0aW9uLCBzZWxmLl9jdXJyZW50U3RhdGUsXG4gICAgICAgIHNlbGYuX29yaWdpbmFsU3RhdGUsIHNlbGYuX3RhcmdldFN0YXRlLCBzZWxmLl9lYXNpbmcsIHNlbGYuX3N0ZXAsXG4gICAgICAgIHNlbGYuX3NjaGVkdWxlRnVuY3Rpb24pO1xuICAgIH07XG5cbiAgICB0aGlzLl90aW1lb3V0SGFuZGxlcigpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3BzIGFuZCBjYW5jZWxzIGEgdHdlZW4uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGdvdG9FbmQgSWYgZmFsc2Ugb3Igb21pdHRlZCwgdGhlIHR3ZWVuIGp1c3Qgc3RvcHMgYXQgaXRzIGN1cnJlbnQgc3RhdGUsIGFuZCB0aGUgXCJmaW5pc2hcIiBoYW5kbGVyIGlzIG5vdCBpbnZva2VkLiAgSWYgdHJ1ZSwgdGhlIHR3ZWVuZWQgb2JqZWN0J3MgdmFsdWVzIGFyZSBpbnN0YW50bHkgc2V0IHRvIHRoZSB0YXJnZXQgdmFsdWVzLCBhbmQgXCJmaW5pc2hcIiBpcyBpbnZva2VkLlxuICAgKiBAcmV0dXJuIHtUd2VlbmFibGV9XG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoZ290b0VuZCkge1xuICAgIHRoaXMuX2lzVHdlZW5pbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3RpbWVvdXRIYW5kbGVyID0gbm9vcDtcblxuICAgIGlmIChnb3RvRW5kKSB7XG4gICAgICBzaGFsbG93Q29weSh0aGlzLl9jdXJyZW50U3RhdGUsIHRoaXMuX3RhcmdldFN0YXRlKTtcbiAgICAgIGFwcGx5RmlsdGVyKHRoaXMsICdhZnRlclR3ZWVuRW5kJyk7XG4gICAgICB0aGlzLl9maW5pc2guY2FsbCh0aGlzLCB0aGlzLl9jdXJyZW50U3RhdGUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGEgdHdlZW4gaXMgcnVubmluZy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIFR3ZWVuYWJsZS5wcm90b3R5cGUuaXNQbGF5aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1R3ZWVuaW5nICYmICF0aGlzLl9pc1BhdXNlZDtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyBhIGN1c3RvbSBzY2hlZHVsZSBmdW5jdGlvbi5cbiAgICpcbiAgICogSWYgYSBjdXN0b20gZnVuY3Rpb24gaXMgbm90IHNldCB0aGUgZGVmYXVsdCBvbmUgaXMgdXNlZCBbYHJlcXVlc3RBbmltYXRpb25GcmFtZWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS93aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBbYHNldFRpbWVvdXRgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93LnNldFRpbWVvdXQpKS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbihGdW5jdGlvbixudW1iZXIpfSBzY2hlZHVsZUZ1bmN0aW9uIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgdG8gc2NoZWR1bGUgdGhlIG5leHQgZnJhbWUgdG8gYmUgcmVuZGVyZWRcbiAgICovXG4gIFR3ZWVuYWJsZS5wcm90b3R5cGUuc2V0U2NoZWR1bGVGdW5jdGlvbiA9IGZ1bmN0aW9uIChzY2hlZHVsZUZ1bmN0aW9uKSB7XG4gICAgdGhpcy5fc2NoZWR1bGVGdW5jdGlvbiA9IHNjaGVkdWxlRnVuY3Rpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIGBkZWxldGVgcyBhbGwgXCJvd25cIiBwcm9wZXJ0aWVzLiAgQ2FsbCB0aGlzIHdoZW4gdGhlIGBUd2VlbmFibGVgIGluc3RhbmNlIGlzIG5vIGxvbmdlciBuZWVkZWQgdG8gZnJlZSBtZW1vcnkuXG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb3A7XG4gICAgZm9yIChwcm9wIGluIHRoaXMpIHtcbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKiFcbiAgICogRmlsdGVycyBhcmUgdXNlZCBmb3IgdHJhbnNmb3JtaW5nIHRoZSBwcm9wZXJ0aWVzIG9mIGEgdHdlZW4gYXQgdmFyaW91c1xuICAgKiBwb2ludHMgaW4gYSBUd2VlbmFibGUncyBsaWZlIGN5Y2xlLiAgU2VlIHRoZSBSRUFETUUgZm9yIG1vcmUgaW5mbyBvbiB0aGlzLlxuICAgKi9cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS5maWx0ZXIgPSB7fTtcblxuICAvKiFcbiAgICogVGhpcyBvYmplY3QgY29udGFpbnMgYWxsIG9mIHRoZSB0d2VlbnMgYXZhaWxhYmxlIHRvIFNoaWZ0eS4gIEl0IGlzIGV4dGVuZGlibGUgLSBzaW1wbHkgYXR0YWNoIHByb3BlcnRpZXMgdG8gdGhlIFR3ZWVuYWJsZS5wcm90b3R5cGUuZm9ybXVsYSBPYmplY3QgZm9sbG93aW5nIHRoZSBzYW1lIGZvcm1hdCBhdCBsaW5lYXIuXG4gICAqXG4gICAqIGBwb3NgIHNob3VsZCBiZSBhIG5vcm1hbGl6ZWQgYG51bWJlcmAgKGJldHdlZW4gMCBhbmQgMSkuXG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGEgPSB7XG4gICAgbGluZWFyOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgfTtcblxuICBmb3JtdWxhID0gVHdlZW5hYmxlLnByb3RvdHlwZS5mb3JtdWxhO1xuXG4gIHNoYWxsb3dDb3B5KFR3ZWVuYWJsZSwge1xuICAgICdub3cnOiBub3dcbiAgICAsJ2VhY2gnOiBlYWNoXG4gICAgLCd0d2VlblByb3BzJzogdHdlZW5Qcm9wc1xuICAgICwndHdlZW5Qcm9wJzogdHdlZW5Qcm9wXG4gICAgLCdhcHBseUZpbHRlcic6IGFwcGx5RmlsdGVyXG4gICAgLCdzaGFsbG93Q29weSc6IHNoYWxsb3dDb3B5XG4gICAgLCdkZWZhdWx0cyc6IGRlZmF1bHRzXG4gICAgLCdjb21wb3NlRWFzaW5nT2JqZWN0JzogY29tcG9zZUVhc2luZ09iamVjdFxuICB9KTtcblxuICAvLyBgcm9vdGAgaXMgcHJvdmlkZWQgaW4gdGhlIGludHJvL291dHJvIGZpbGVzLlxuXG4gIC8vIEEgaG9vayB1c2VkIGZvciB1bml0IHRlc3RpbmcuXG4gIGlmICh0eXBlb2YgU0hJRlRZX0RFQlVHX05PVyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJvb3QudGltZW91dEhhbmRsZXIgPSB0aW1lb3V0SGFuZGxlcjtcbiAgfVxuXG4gIC8vIEJvb3RzdHJhcCBUd2VlbmFibGUgYXBwcm9wcmlhdGVseSBmb3IgdGhlIGVudmlyb25tZW50LlxuICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFR3ZWVuYWJsZTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTURcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge3JldHVybiBUd2VlbmFibGU7fSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHJvb3QuVHdlZW5hYmxlID09PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEJyb3dzZXI6IE1ha2UgYFR3ZWVuYWJsZWAgZ2xvYmFsbHkgYWNjZXNzaWJsZS5cbiAgICByb290LlR3ZWVuYWJsZSA9IFR3ZWVuYWJsZTtcbiAgfVxuXG4gIHJldHVybiBUd2VlbmFibGU7XG5cbn0gKCkpO1xuXG4vKiFcbiAqIEFsbCBlcXVhdGlvbnMgYXJlIGFkYXB0ZWQgZnJvbSBUaG9tYXMgRnVjaHMnIFtTY3JpcHR5Ml0oaHR0cHM6Ly9naXRodWIuY29tL21hZHJvYmJ5L3NjcmlwdHkyL2Jsb2IvbWFzdGVyL3NyYy9lZmZlY3RzL3RyYW5zaXRpb25zL3Blbm5lci5qcykuXG4gKlxuICogQmFzZWQgb24gRWFzaW5nIEVxdWF0aW9ucyAoYykgMjAwMyBbUm9iZXJ0IFBlbm5lcl0oaHR0cDovL3d3dy5yb2JlcnRwZW5uZXIuY29tLyksIGFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgd29yayBpcyBbc3ViamVjdCB0byB0ZXJtc10oaHR0cDovL3d3dy5yb2JlcnRwZW5uZXIuY29tL2Vhc2luZ190ZXJtc19vZl91c2UuaHRtbCkuXG4gKi9cblxuLyohXG4gKiAgVEVSTVMgT0YgVVNFIC0gRUFTSU5HIEVRVUFUSU9OU1xuICogIE9wZW4gc291cmNlIHVuZGVyIHRoZSBCU0QgTGljZW5zZS5cbiAqICBFYXNpbmcgRXF1YXRpb25zIChjKSAyMDAzIFJvYmVydCBQZW5uZXIsIGFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cblxuOyhmdW5jdGlvbiAoKSB7XG5cbiAgVHdlZW5hYmxlLnNoYWxsb3dDb3B5KFR3ZWVuYWJsZS5wcm90b3R5cGUuZm9ybXVsYSwge1xuICAgIGVhc2VJblF1YWQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiBNYXRoLnBvdyhwb3MsIDIpO1xuICAgIH0sXG5cbiAgICBlYXNlT3V0UXVhZDogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIC0oTWF0aC5wb3coKHBvcyAtIDEpLCAyKSAtIDEpO1xuICAgIH0sXG5cbiAgICBlYXNlSW5PdXRRdWFkOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICBpZiAoKHBvcyAvPSAwLjUpIDwgMSkge3JldHVybiAwLjUgKiBNYXRoLnBvdyhwb3MsMik7fVxuICAgICAgcmV0dXJuIC0wLjUgKiAoKHBvcyAtPSAyKSAqIHBvcyAtIDIpO1xuICAgIH0sXG5cbiAgICBlYXNlSW5DdWJpYzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIE1hdGgucG93KHBvcywgMyk7XG4gICAgfSxcblxuICAgIGVhc2VPdXRDdWJpYzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIChNYXRoLnBvdygocG9zIC0gMSksIDMpICsgMSk7XG4gICAgfSxcblxuICAgIGVhc2VJbk91dEN1YmljOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICBpZiAoKHBvcyAvPSAwLjUpIDwgMSkge3JldHVybiAwLjUgKiBNYXRoLnBvdyhwb3MsMyk7fVxuICAgICAgcmV0dXJuIDAuNSAqIChNYXRoLnBvdygocG9zIC0gMiksMykgKyAyKTtcbiAgICB9LFxuXG4gICAgZWFzZUluUXVhcnQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiBNYXRoLnBvdyhwb3MsIDQpO1xuICAgIH0sXG5cbiAgICBlYXNlT3V0UXVhcnQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiAtKE1hdGgucG93KChwb3MgLSAxKSwgNCkgLSAxKTtcbiAgICB9LFxuXG4gICAgZWFzZUluT3V0UXVhcnQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIGlmICgocG9zIC89IDAuNSkgPCAxKSB7cmV0dXJuIDAuNSAqIE1hdGgucG93KHBvcyw0KTt9XG4gICAgICByZXR1cm4gLTAuNSAqICgocG9zIC09IDIpICogTWF0aC5wb3cocG9zLDMpIC0gMik7XG4gICAgfSxcblxuICAgIGVhc2VJblF1aW50OiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gTWF0aC5wb3cocG9zLCA1KTtcbiAgICB9LFxuXG4gICAgZWFzZU91dFF1aW50OiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gKE1hdGgucG93KChwb3MgLSAxKSwgNSkgKyAxKTtcbiAgICB9LFxuXG4gICAgZWFzZUluT3V0UXVpbnQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIGlmICgocG9zIC89IDAuNSkgPCAxKSB7cmV0dXJuIDAuNSAqIE1hdGgucG93KHBvcyw1KTt9XG4gICAgICByZXR1cm4gMC41ICogKE1hdGgucG93KChwb3MgLSAyKSw1KSArIDIpO1xuICAgIH0sXG5cbiAgICBlYXNlSW5TaW5lOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gLU1hdGguY29zKHBvcyAqIChNYXRoLlBJIC8gMikpICsgMTtcbiAgICB9LFxuXG4gICAgZWFzZU91dFNpbmU6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiBNYXRoLnNpbihwb3MgKiAoTWF0aC5QSSAvIDIpKTtcbiAgICB9LFxuXG4gICAgZWFzZUluT3V0U2luZTogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuICgtMC41ICogKE1hdGguY29zKE1hdGguUEkgKiBwb3MpIC0gMSkpO1xuICAgIH0sXG5cbiAgICBlYXNlSW5FeHBvOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gKHBvcyA9PT0gMCkgPyAwIDogTWF0aC5wb3coMiwgMTAgKiAocG9zIC0gMSkpO1xuICAgIH0sXG5cbiAgICBlYXNlT3V0RXhwbzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIChwb3MgPT09IDEpID8gMSA6IC1NYXRoLnBvdygyLCAtMTAgKiBwb3MpICsgMTtcbiAgICB9LFxuXG4gICAgZWFzZUluT3V0RXhwbzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgaWYgKHBvcyA9PT0gMCkge3JldHVybiAwO31cbiAgICAgIGlmIChwb3MgPT09IDEpIHtyZXR1cm4gMTt9XG4gICAgICBpZiAoKHBvcyAvPSAwLjUpIDwgMSkge3JldHVybiAwLjUgKiBNYXRoLnBvdygyLDEwICogKHBvcyAtIDEpKTt9XG4gICAgICByZXR1cm4gMC41ICogKC1NYXRoLnBvdygyLCAtMTAgKiAtLXBvcykgKyAyKTtcbiAgICB9LFxuXG4gICAgZWFzZUluQ2lyYzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIC0oTWF0aC5zcXJ0KDEgLSAocG9zICogcG9zKSkgLSAxKTtcbiAgICB9LFxuXG4gICAgZWFzZU91dENpcmM6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiBNYXRoLnNxcnQoMSAtIE1hdGgucG93KChwb3MgLSAxKSwgMikpO1xuICAgIH0sXG5cbiAgICBlYXNlSW5PdXRDaXJjOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICBpZiAoKHBvcyAvPSAwLjUpIDwgMSkge3JldHVybiAtMC41ICogKE1hdGguc3FydCgxIC0gcG9zICogcG9zKSAtIDEpO31cbiAgICAgIHJldHVybiAwLjUgKiAoTWF0aC5zcXJ0KDEgLSAocG9zIC09IDIpICogcG9zKSArIDEpO1xuICAgIH0sXG5cbiAgICBlYXNlT3V0Qm91bmNlOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICBpZiAoKHBvcykgPCAoMSAvIDIuNzUpKSB7XG4gICAgICAgIHJldHVybiAoNy41NjI1ICogcG9zICogcG9zKTtcbiAgICAgIH0gZWxzZSBpZiAocG9zIDwgKDIgLyAyLjc1KSkge1xuICAgICAgICByZXR1cm4gKDcuNTYyNSAqIChwb3MgLT0gKDEuNSAvIDIuNzUpKSAqIHBvcyArIDAuNzUpO1xuICAgICAgfSBlbHNlIGlmIChwb3MgPCAoMi41IC8gMi43NSkpIHtcbiAgICAgICAgcmV0dXJuICg3LjU2MjUgKiAocG9zIC09ICgyLjI1IC8gMi43NSkpICogcG9zICsgMC45Mzc1KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAoNy41NjI1ICogKHBvcyAtPSAoMi42MjUgLyAyLjc1KSkgKiBwb3MgKyAwLjk4NDM3NSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVhc2VJbkJhY2s6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgIHJldHVybiAocG9zKSAqIHBvcyAqICgocyArIDEpICogcG9zIC0gcyk7XG4gICAgfSxcblxuICAgIGVhc2VPdXRCYWNrOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICByZXR1cm4gKHBvcyA9IHBvcyAtIDEpICogcG9zICogKChzICsgMSkgKiBwb3MgKyBzKSArIDE7XG4gICAgfSxcblxuICAgIGVhc2VJbk91dEJhY2s6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgIGlmICgocG9zIC89IDAuNSkgPCAxKSB7cmV0dXJuIDAuNSAqIChwb3MgKiBwb3MgKiAoKChzICo9ICgxLjUyNSkpICsgMSkgKiBwb3MgLSBzKSk7fVxuICAgICAgcmV0dXJuIDAuNSAqICgocG9zIC09IDIpICogcG9zICogKCgocyAqPSAoMS41MjUpKSArIDEpICogcG9zICsgcykgKyAyKTtcbiAgICB9LFxuXG4gICAgZWxhc3RpYzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIC0xICogTWF0aC5wb3coNCwtOCAqIHBvcykgKiBNYXRoLnNpbigocG9zICogNiAtIDEpICogKDIgKiBNYXRoLlBJKSAvIDIpICsgMTtcbiAgICB9LFxuXG4gICAgc3dpbmdGcm9tVG86IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgIHJldHVybiAoKHBvcyAvPSAwLjUpIDwgMSkgPyAwLjUgKiAocG9zICogcG9zICogKCgocyAqPSAoMS41MjUpKSArIDEpICogcG9zIC0gcykpIDpcbiAgICAgICAgICAwLjUgKiAoKHBvcyAtPSAyKSAqIHBvcyAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHBvcyArIHMpICsgMik7XG4gICAgfSxcblxuICAgIHN3aW5nRnJvbTogZnVuY3Rpb24gKHBvcykge1xuICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgcmV0dXJuIHBvcyAqIHBvcyAqICgocyArIDEpICogcG9zIC0gcyk7XG4gICAgfSxcblxuICAgIHN3aW5nVG86IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgIHJldHVybiAocG9zIC09IDEpICogcG9zICogKChzICsgMSkgKiBwb3MgKyBzKSArIDE7XG4gICAgfSxcblxuICAgIGJvdW5jZTogZnVuY3Rpb24gKHBvcykge1xuICAgICAgaWYgKHBvcyA8ICgxIC8gMi43NSkpIHtcbiAgICAgICAgcmV0dXJuICg3LjU2MjUgKiBwb3MgKiBwb3MpO1xuICAgICAgfSBlbHNlIGlmIChwb3MgPCAoMiAvIDIuNzUpKSB7XG4gICAgICAgIHJldHVybiAoNy41NjI1ICogKHBvcyAtPSAoMS41IC8gMi43NSkpICogcG9zICsgMC43NSk7XG4gICAgICB9IGVsc2UgaWYgKHBvcyA8ICgyLjUgLyAyLjc1KSkge1xuICAgICAgICByZXR1cm4gKDcuNTYyNSAqIChwb3MgLT0gKDIuMjUgLyAyLjc1KSkgKiBwb3MgKyAwLjkzNzUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICg3LjU2MjUgKiAocG9zIC09ICgyLjYyNSAvIDIuNzUpKSAqIHBvcyArIDAuOTg0Mzc1KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYm91bmNlUGFzdDogZnVuY3Rpb24gKHBvcykge1xuICAgICAgaWYgKHBvcyA8ICgxIC8gMi43NSkpIHtcbiAgICAgICAgcmV0dXJuICg3LjU2MjUgKiBwb3MgKiBwb3MpO1xuICAgICAgfSBlbHNlIGlmIChwb3MgPCAoMiAvIDIuNzUpKSB7XG4gICAgICAgIHJldHVybiAyIC0gKDcuNTYyNSAqIChwb3MgLT0gKDEuNSAvIDIuNzUpKSAqIHBvcyArIDAuNzUpO1xuICAgICAgfSBlbHNlIGlmIChwb3MgPCAoMi41IC8gMi43NSkpIHtcbiAgICAgICAgcmV0dXJuIDIgLSAoNy41NjI1ICogKHBvcyAtPSAoMi4yNSAvIDIuNzUpKSAqIHBvcyArIDAuOTM3NSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMiAtICg3LjU2MjUgKiAocG9zIC09ICgyLjYyNSAvIDIuNzUpKSAqIHBvcyArIDAuOTg0Mzc1KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZWFzZUZyb21UbzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgaWYgKChwb3MgLz0gMC41KSA8IDEpIHtyZXR1cm4gMC41ICogTWF0aC5wb3cocG9zLDQpO31cbiAgICAgIHJldHVybiAtMC41ICogKChwb3MgLT0gMikgKiBNYXRoLnBvdyhwb3MsMykgLSAyKTtcbiAgICB9LFxuXG4gICAgZWFzZUZyb206IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiBNYXRoLnBvdyhwb3MsNCk7XG4gICAgfSxcblxuICAgIGVhc2VUbzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIE1hdGgucG93KHBvcywwLjI1KTtcbiAgICB9XG4gIH0pO1xuXG59KCkpO1xuXG4vKiFcbiAqIFRoZSBCZXppZXIgbWFnaWMgaW4gdGhpcyBmaWxlIGlzIGFkYXB0ZWQvY29waWVkIGFsbW9zdCB3aG9sZXNhbGUgZnJvbVxuICogW1NjcmlwdHkyXShodHRwczovL2dpdGh1Yi5jb20vbWFkcm9iYnkvc2NyaXB0eTIvYmxvYi9tYXN0ZXIvc3JjL2VmZmVjdHMvdHJhbnNpdGlvbnMvY3ViaWMtYmV6aWVyLmpzKSxcbiAqIHdoaWNoIHdhcyBhZGFwdGVkIGZyb20gQXBwbGUgY29kZSAod2hpY2ggcHJvYmFibHkgY2FtZSBmcm9tXG4gKiBbaGVyZV0oaHR0cDovL29wZW5zb3VyY2UuYXBwbGUuY29tL3NvdXJjZS9XZWJDb3JlL1dlYkNvcmUtOTU1LjY2L3BsYXRmb3JtL2dyYXBoaWNzL1VuaXRCZXppZXIuaCkpLlxuICogU3BlY2lhbCB0aGFua3MgdG8gQXBwbGUgYW5kIFRob21hcyBGdWNocyBmb3IgbXVjaCBvZiB0aGlzIGNvZGUuXG4gKi9cblxuLyohXG4gKiAgQ29weXJpZ2h0IChjKSAyMDA2IEFwcGxlIENvbXB1dGVyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuICogIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICpcbiAqICAxLiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqXG4gKiAgMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICogIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAqICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqXG4gKiAgMy4gTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlcihzKSBub3IgdGhlIG5hbWVzIG9mIGFueVxuICogIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gKiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqXG4gKiAgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuICogIFwiQVMgSVNcIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTyxcbiAqICBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0VcbiAqICBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFXG4gKiAgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuICogIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbiAqICBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT05cbiAqICBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuICogIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG4gKiAgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKi9cbjsoZnVuY3Rpb24gKCkge1xuICAvLyBwb3J0IG9mIHdlYmtpdCBjdWJpYyBiZXppZXIgaGFuZGxpbmcgYnkgaHR0cDovL3d3dy5uZXR6Z2VzdGEuZGUvZGV2L1xuICBmdW5jdGlvbiBjdWJpY0JlemllckF0VGltZSh0LHAxeCxwMXkscDJ4LHAyeSxkdXJhdGlvbikge1xuICAgIHZhciBheCA9IDAsYnggPSAwLGN4ID0gMCxheSA9IDAsYnkgPSAwLGN5ID0gMDtcbiAgICBmdW5jdGlvbiBzYW1wbGVDdXJ2ZVgodCkge3JldHVybiAoKGF4ICogdCArIGJ4KSAqIHQgKyBjeCkgKiB0O31cbiAgICBmdW5jdGlvbiBzYW1wbGVDdXJ2ZVkodCkge3JldHVybiAoKGF5ICogdCArIGJ5KSAqIHQgKyBjeSkgKiB0O31cbiAgICBmdW5jdGlvbiBzYW1wbGVDdXJ2ZURlcml2YXRpdmVYKHQpIHtyZXR1cm4gKDMuMCAqIGF4ICogdCArIDIuMCAqIGJ4KSAqIHQgKyBjeDt9XG4gICAgZnVuY3Rpb24gc29sdmVFcHNpbG9uKGR1cmF0aW9uKSB7cmV0dXJuIDEuMCAvICgyMDAuMCAqIGR1cmF0aW9uKTt9XG4gICAgZnVuY3Rpb24gc29sdmUoeCxlcHNpbG9uKSB7cmV0dXJuIHNhbXBsZUN1cnZlWShzb2x2ZUN1cnZlWCh4LGVwc2lsb24pKTt9XG4gICAgZnVuY3Rpb24gZmFicyhuKSB7aWYgKG4gPj0gMCkge3JldHVybiBuO31lbHNlIHtyZXR1cm4gMCAtIG47fX1cbiAgICBmdW5jdGlvbiBzb2x2ZUN1cnZlWCh4LGVwc2lsb24pIHtcbiAgICAgIHZhciB0MCx0MSx0Mix4MixkMixpO1xuICAgICAgZm9yICh0MiA9IHgsIGkgPSAwOyBpIDwgODsgaSsrKSB7eDIgPSBzYW1wbGVDdXJ2ZVgodDIpIC0geDsgaWYgKGZhYnMoeDIpIDwgZXBzaWxvbikge3JldHVybiB0Mjt9IGQyID0gc2FtcGxlQ3VydmVEZXJpdmF0aXZlWCh0Mik7IGlmIChmYWJzKGQyKSA8IDFlLTYpIHticmVhazt9IHQyID0gdDIgLSB4MiAvIGQyO31cbiAgICAgIHQwID0gMC4wOyB0MSA9IDEuMDsgdDIgPSB4OyBpZiAodDIgPCB0MCkge3JldHVybiB0MDt9IGlmICh0MiA+IHQxKSB7cmV0dXJuIHQxO31cbiAgICAgIHdoaWxlICh0MCA8IHQxKSB7eDIgPSBzYW1wbGVDdXJ2ZVgodDIpOyBpZiAoZmFicyh4MiAtIHgpIDwgZXBzaWxvbikge3JldHVybiB0Mjt9IGlmICh4ID4geDIpIHt0MCA9IHQyO31lbHNlIHt0MSA9IHQyO30gdDIgPSAodDEgLSB0MCkgKiAwLjUgKyB0MDt9XG4gICAgICByZXR1cm4gdDI7IC8vIEZhaWx1cmUuXG4gICAgfVxuICAgIGN4ID0gMy4wICogcDF4OyBieCA9IDMuMCAqIChwMnggLSBwMXgpIC0gY3g7IGF4ID0gMS4wIC0gY3ggLSBieDsgY3kgPSAzLjAgKiBwMXk7IGJ5ID0gMy4wICogKHAyeSAtIHAxeSkgLSBjeTsgYXkgPSAxLjAgLSBjeSAtIGJ5O1xuICAgIHJldHVybiBzb2x2ZSh0LCBzb2x2ZUVwc2lsb24oZHVyYXRpb24pKTtcbiAgfVxuICAvKiFcbiAgICogIGdldEN1YmljQmV6aWVyVHJhbnNpdGlvbih4MSwgeTEsIHgyLCB5MikgLT4gRnVuY3Rpb25cbiAgICpcbiAgICogIEdlbmVyYXRlcyBhIHRyYW5zaXRpb24gZWFzaW5nIGZ1bmN0aW9uIHRoYXQgaXMgY29tcGF0aWJsZVxuICAgKiAgd2l0aCBXZWJLaXQncyBDU1MgdHJhbnNpdGlvbnMgYC13ZWJraXQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25gXG4gICAqICBDU1MgcHJvcGVydHkuXG4gICAqXG4gICAqICBUaGUgVzNDIGhhcyBtb3JlIGluZm9ybWF0aW9uIGFib3V0XG4gICAqICA8YSBocmVmPVwiaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy10cmFuc2l0aW9ucy8jdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25fdGFnXCI+XG4gICAqICBDU1MzIHRyYW5zaXRpb24gdGltaW5nIGZ1bmN0aW9uczwvYT4uXG4gICAqXG4gICAqICBAcGFyYW0ge251bWJlcn0geDFcbiAgICogIEBwYXJhbSB7bnVtYmVyfSB5MVxuICAgKiAgQHBhcmFtIHtudW1iZXJ9IHgyXG4gICAqICBAcGFyYW0ge251bWJlcn0geTJcbiAgICogIEByZXR1cm4ge2Z1bmN0aW9ufVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0Q3ViaWNCZXppZXJUcmFuc2l0aW9uICh4MSwgeTEsIHgyLCB5Mikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gY3ViaWNCZXppZXJBdFRpbWUocG9zLHgxLHkxLHgyLHkyLDEpO1xuICAgIH07XG4gIH1cbiAgLy8gRW5kIHBvcnRlZCBjb2RlXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBCZXppZXIgZWFzaW5nIGZ1bmN0aW9uIGFuZCBhdHRhY2hlcyBpdCB0byBgVHdlZW5hYmxlLnByb3RvdHlwZS5mb3JtdWxhYC4gIFRoaXMgZnVuY3Rpb24gZ2l2ZXMgeW91IHRvdGFsIGNvbnRyb2wgb3ZlciB0aGUgZWFzaW5nIGN1cnZlLiAgTWF0dGhldyBMZWluJ3MgW0NlYXNlcl0oaHR0cDovL21hdHRoZXdsZWluLmNvbS9jZWFzZXIvKSBpcyBhIHVzZWZ1bCB0b29sIGZvciB2aXN1YWxpemluZyB0aGUgY3VydmVzIHlvdSBjYW4gbWFrZSB3aXRoIHRoaXMgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBlYXNpbmcgY3VydmUuICBPdmVyd3JpdGVzIHRoZSBvbGQgZWFzaW5nIGZ1bmN0aW9uIG9uIFR3ZWVuYWJsZS5wcm90b3R5cGUuZm9ybXVsYSBpZiBpdCBleGlzdHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4MVxuICAgKiBAcGFyYW0ge251bWJlcn0geTFcbiAgICogQHBhcmFtIHtudW1iZXJ9IHgyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5MlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGVhc2luZyBmdW5jdGlvbiB0aGF0IHdhcyBhdHRhY2hlZCB0byBUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGEuXG4gICAqL1xuICBUd2VlbmFibGUuc2V0QmV6aWVyRnVuY3Rpb24gPSBmdW5jdGlvbiAobmFtZSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgY3ViaWNCZXppZXJUcmFuc2l0aW9uID0gZ2V0Q3ViaWNCZXppZXJUcmFuc2l0aW9uKHgxLCB5MSwgeDIsIHkyKTtcbiAgICBjdWJpY0JlemllclRyYW5zaXRpb24ueDEgPSB4MTtcbiAgICBjdWJpY0JlemllclRyYW5zaXRpb24ueTEgPSB5MTtcbiAgICBjdWJpY0JlemllclRyYW5zaXRpb24ueDIgPSB4MjtcbiAgICBjdWJpY0JlemllclRyYW5zaXRpb24ueTIgPSB5MjtcblxuICAgIHJldHVybiBUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGFbbmFtZV0gPSBjdWJpY0JlemllclRyYW5zaXRpb247XG4gIH07XG5cblxuICAvKipcbiAgICogYGRlbGV0ZWBzIGFuIGVhc2luZyBmdW5jdGlvbiBmcm9tIGBUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGFgLiAgQmUgY2FyZWZ1bCB3aXRoIHRoaXMgbWV0aG9kLCBhcyBpdCBgZGVsZXRlYHMgd2hhdGV2ZXIgZWFzaW5nIGZvcm11bGEgbWF0Y2hlcyBgbmFtZWAgKHdoaWNoIG1lYW5zIHlvdSBjYW4gZGVsZXRlIGRlZmF1bHQgU2hpZnR5IGVhc2luZyBmdW5jdGlvbnMpLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZWFzaW5nIGZ1bmN0aW9uIHRvIGRlbGV0ZS5cbiAgICogQHJldHVybiB7ZnVuY3Rpb259XG4gICAqL1xuICBUd2VlbmFibGUudW5zZXRCZXppZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgZGVsZXRlIFR3ZWVuYWJsZS5wcm90b3R5cGUuZm9ybXVsYVtuYW1lXTtcbiAgfTtcblxufSkoKTtcblxuOyhmdW5jdGlvbiAoKSB7XG5cbiAgZnVuY3Rpb24gZ2V0SW50ZXJwb2xhdGVkVmFsdWVzIChcbiAgICBmcm9tLCBjdXJyZW50LCB0YXJnZXRTdGF0ZSwgcG9zaXRpb24sIGVhc2luZykge1xuICAgIHJldHVybiBUd2VlbmFibGUudHdlZW5Qcm9wcyhcbiAgICAgIHBvc2l0aW9uLCBjdXJyZW50LCBmcm9tLCB0YXJnZXRTdGF0ZSwgMSwgMCwgZWFzaW5nKTtcbiAgfVxuXG4gIC8vIEZha2UgYSBUd2VlbmFibGUgYW5kIHBhdGNoIHNvbWUgaW50ZXJuYWxzLiAgVGhpcyBhcHByb2FjaCBhbGxvd3MgdXMgdG9cbiAgLy8gc2tpcCB1bmVjY2Vzc2FyeSBwcm9jZXNzaW5nIGFuZCBvYmplY3QgcmVjcmVhdGlvbiwgY3V0dGluZyBkb3duIG9uIGdhcmJhZ2VcbiAgLy8gY29sbGVjdGlvbiBwYXVzZXMuXG4gIHZhciBtb2NrVHdlZW5hYmxlID0gbmV3IFR3ZWVuYWJsZSgpO1xuICBtb2NrVHdlZW5hYmxlLl9maWx0ZXJBcmdzID0gW107XG5cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIG1pZHBvaW50IG9mIHR3byBPYmplY3RzLiAgVGhpcyBtZXRob2QgZWZmZWN0aXZlbHkgY2FsY3VsYXRlcyBhIHNwZWNpZmljIGZyYW1lIG9mIGFuaW1hdGlvbiB0aGF0IFtUd2VlbmFibGUjdHdlZW5dKHNoaWZ0eS5jb3JlLmpzLmh0bWwjdHdlZW4pIGRvZXMgbWFueSB0aW1lcyBvdmVyIHRoZSBjb3Vyc2Ugb2YgYSB0d2Vlbi5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogYGBgXG4gICAqICB2YXIgaW50ZXJwb2xhdGVkVmFsdWVzID0gVHdlZW5hYmxlLmludGVycG9sYXRlKHtcbiAgICogICAgd2lkdGg6ICcxMDBweCcsXG4gICAqICAgIG9wYWNpdHk6IDAsXG4gICAqICAgIGNvbG9yOiAnI2ZmZidcbiAgICogIH0sIHtcbiAgICogICAgd2lkdGg6ICcyMDBweCcsXG4gICAqICAgIG9wYWNpdHk6IDEsXG4gICAqICAgIGNvbG9yOiAnIzAwMCdcbiAgICogIH0sIDAuNSk7XG4gICAqXG4gICAqICBjb25zb2xlLmxvZyhpbnRlcnBvbGF0ZWRWYWx1ZXMpO1xuICAgKiAgLy8ge29wYWNpdHk6IDAuNSwgd2lkdGg6IFwiMTUwcHhcIiwgY29sb3I6IFwicmdiKDEyNywxMjcsMTI3KVwifVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGZyb20gVGhlIHN0YXJ0aW5nIHZhbHVlcyB0byB0d2VlbiBmcm9tLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0U3RhdGUgVGhlIGVuZGluZyB2YWx1ZXMgdG8gdHdlZW4gdG8uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwb3NpdGlvbiBUaGUgbm9ybWFsaXplZCBwb3NpdGlvbiB2YWx1ZSAoYmV0d2VlbiAwLjAgYW5kIDEuMCkgdG8gaW50ZXJwb2xhdGUgdGhlIHZhbHVlcyBiZXR3ZWVuIGBmcm9tYCBhbmQgYHRvYCBmb3IuICBgZnJvbWAgcmVwcmVzZW50cyAwIGFuZCBgdG9gIHJlcHJlc2VudHMgYDFgLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IGVhc2luZyBUaGUgZWFzaW5nIGN1cnZlKHMpIHRvIGNhbGN1bGF0ZSB0aGUgbWlkcG9pbnQgYWdhaW5zdC4gIFlvdSBjYW4gcmVmZXJlbmNlIGFueSBlYXNpbmcgZnVuY3Rpb24gYXR0YWNoZWQgdG8gYFR3ZWVuYWJsZS5wcm90b3R5cGUuZm9ybXVsYWAuICBJZiBvbWl0dGVkLCB0aGlzIGRlZmF1bHRzIHRvIFwibGluZWFyXCIuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIFR3ZWVuYWJsZS5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uIChmcm9tLCB0YXJnZXRTdGF0ZSwgcG9zaXRpb24sIGVhc2luZykge1xuICAgIHZhciBjdXJyZW50ID0gVHdlZW5hYmxlLnNoYWxsb3dDb3B5KHt9LCBmcm9tKTtcbiAgICB2YXIgZWFzaW5nT2JqZWN0ID0gVHdlZW5hYmxlLmNvbXBvc2VFYXNpbmdPYmplY3QoXG4gICAgICBmcm9tLCBlYXNpbmcgfHwgJ2xpbmVhcicpO1xuXG4gICAgbW9ja1R3ZWVuYWJsZS5zZXQoe30pO1xuXG4gICAgLy8gQWxpYXMgYW5kIHJldXNlIHRoZSBfZmlsdGVyQXJncyBhcnJheSBpbnN0ZWFkIG9mIHJlY3JlYXRpbmcgaXQuXG4gICAgdmFyIGZpbHRlckFyZ3MgPSBtb2NrVHdlZW5hYmxlLl9maWx0ZXJBcmdzO1xuICAgIGZpbHRlckFyZ3MubGVuZ3RoID0gMDtcbiAgICBmaWx0ZXJBcmdzWzBdID0gY3VycmVudDtcbiAgICBmaWx0ZXJBcmdzWzFdID0gZnJvbTtcbiAgICBmaWx0ZXJBcmdzWzJdID0gdGFyZ2V0U3RhdGU7XG4gICAgZmlsdGVyQXJnc1szXSA9IGVhc2luZ09iamVjdDtcblxuICAgIC8vIEFueSBkZWZpbmVkIHZhbHVlIHRyYW5zZm9ybWF0aW9uIG11c3QgYmUgYXBwbGllZFxuICAgIFR3ZWVuYWJsZS5hcHBseUZpbHRlcihtb2NrVHdlZW5hYmxlLCAndHdlZW5DcmVhdGVkJyk7XG4gICAgVHdlZW5hYmxlLmFwcGx5RmlsdGVyKG1vY2tUd2VlbmFibGUsICdiZWZvcmVUd2VlbicpO1xuXG4gICAgdmFyIGludGVycG9sYXRlZFZhbHVlcyA9IGdldEludGVycG9sYXRlZFZhbHVlcyhcbiAgICAgIGZyb20sIGN1cnJlbnQsIHRhcmdldFN0YXRlLCBwb3NpdGlvbiwgZWFzaW5nT2JqZWN0KTtcblxuICAgIC8vIFRyYW5zZm9ybSB2YWx1ZXMgYmFjayBpbnRvIHRoZWlyIG9yaWdpbmFsIGZvcm1hdFxuICAgIFR3ZWVuYWJsZS5hcHBseUZpbHRlcihtb2NrVHdlZW5hYmxlLCAnYWZ0ZXJUd2VlbicpO1xuXG4gICAgcmV0dXJuIGludGVycG9sYXRlZFZhbHVlcztcbiAgfTtcblxufSgpKTtcblxuLyoqXG4gKiBBZGRzIHN0cmluZyBpbnRlcnBvbGF0aW9uIHN1cHBvcnQgdG8gU2hpZnR5LlxuICpcbiAqIFRoZSBUb2tlbiBleHRlbnNpb24gYWxsb3dzIFNoaWZ0eSB0byB0d2VlbiBudW1iZXJzIGluc2lkZSBvZiBzdHJpbmdzLiAgQW1vbmcgb3RoZXIgdGhpbmdzLCB0aGlzIGFsbG93cyB5b3UgdG8gYW5pbWF0ZSBDU1MgcHJvcGVydGllcy4gIEZvciBleGFtcGxlLCB5b3UgY2FuIGRvIHRoaXM6XG4gKlxuICogYGBgXG4gKiB2YXIgdHdlZW5hYmxlID0gbmV3IFR3ZWVuYWJsZSgpO1xuICogdHdlZW5hYmxlLnR3ZWVuKHtcbiAqICAgZnJvbTogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDQ1cHgpJ30sXG4gKiAgIHRvOiB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoOTB4cCknfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBgdHJhbnNsYXRlWCg0NSlgIHdpbGwgYmUgdHdlZW5lZCB0byBgdHJhbnNsYXRlWCg5MClgLiAgVG8gZGVtb25zdHJhdGU6XG4gKlxuICogYGBgXG4gKiB2YXIgdHdlZW5hYmxlID0gbmV3IFR3ZWVuYWJsZSgpO1xuICogdHdlZW5hYmxlLnR3ZWVuKHtcbiAqICAgZnJvbTogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDQ1cHgpJ30sXG4gKiAgIHRvOiB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoOTBweCknfSxcbiAqICAgc3RlcDogZnVuY3Rpb24gKHN0YXRlKSB7XG4gKiAgICAgY29uc29sZS5sb2coc3RhdGUudHJhbnNmb3JtKTtcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBUaGUgYWJvdmUgc25pcHBldCB3aWxsIGxvZyBzb21ldGhpbmcgbGlrZSB0aGlzIGluIHRoZSBjb25zb2xlOlxuICpcbiAqIGBgYFxuICogdHJhbnNsYXRlWCg2MC4zcHgpXG4gKiAuLi5cbiAqIHRyYW5zbGF0ZVgoNzYuMDVweClcbiAqIC4uLlxuICogdHJhbnNsYXRlWCg5MHB4KVxuICogYGBgXG4gKlxuICogQW5vdGhlciB1c2UgZm9yIHRoaXMgaXMgYW5pbWF0aW5nIGNvbG9yczpcbiAqXG4gKiBgYGBcbiAqIHZhciB0d2VlbmFibGUgPSBuZXcgVHdlZW5hYmxlKCk7XG4gKiB0d2VlbmFibGUudHdlZW4oe1xuICogICBmcm9tOiB7IGNvbG9yOiAncmdiKDAsMjU1LDApJ30sXG4gKiAgIHRvOiB7IGNvbG9yOiAncmdiKDI1NSwwLDI1NSknfSxcbiAqICAgc3RlcDogZnVuY3Rpb24gKHN0YXRlKSB7XG4gKiAgICAgY29uc29sZS5sb2coc3RhdGUuY29sb3IpO1xuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFRoZSBhYm92ZSBzbmlwcGV0IHdpbGwgbG9nIHNvbWV0aGluZyBsaWtlIHRoaXM6XG4gKlxuICogYGBgXG4gKiByZ2IoODQsMTcwLDg0KVxuICogLi4uXG4gKiByZ2IoMTcwLDg0LDE3MClcbiAqIC4uLlxuICogcmdiKDI1NSwwLDI1NSlcbiAqIGBgYFxuICpcbiAqIFRoaXMgZXh0ZW5zaW9uIGFsc28gc3VwcG9ydHMgaGV4YWRlY2ltYWwgY29sb3JzLCBpbiBib3RoIGxvbmcgKGAjZmYwMGZmYCkgYW5kIHNob3J0IChgI2YwZmApIGZvcm1zLiAgQmUgYXdhcmUgdGhhdCBoZXhhZGVjaW1hbCBpbnB1dCB2YWx1ZXMgd2lsbCBiZSBjb252ZXJ0ZWQgaW50byB0aGUgZXF1aXZhbGVudCBSR0Igb3V0cHV0IHZhbHVlcy4gIFRoaXMgaXMgZG9uZSB0byBvcHRpbWl6ZSBmb3IgcGVyZm9ybWFuY2UuXG4gKlxuICogYGBgXG4gKiB2YXIgdHdlZW5hYmxlID0gbmV3IFR3ZWVuYWJsZSgpO1xuICogdHdlZW5hYmxlLnR3ZWVuKHtcbiAqICAgZnJvbTogeyBjb2xvcjogJyMwZjAnfSxcbiAqICAgdG86IHsgY29sb3I6ICcjZjBmJ30sXG4gKiAgIHN0ZXA6IGZ1bmN0aW9uIChzdGF0ZSkge1xuICogICAgIGNvbnNvbGUubG9nKHN0YXRlLmNvbG9yKTtcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBUaGlzIHNuaXBwZXQgd2lsbCBnZW5lcmF0ZSB0aGUgc2FtZSBvdXRwdXQgYXMgdGhlIG9uZSBiZWZvcmUgaXQgYmVjYXVzZSBlcXVpdmFsZW50IHZhbHVlcyB3ZXJlIHN1cHBsaWVkIChqdXN0IGluIGhleGFkZWNpbWFsIGZvcm0gcmF0aGVyIHRoYW4gUkdCKTpcbiAqXG4gKiBgYGBcbiAqIHJnYig4NCwxNzAsODQpXG4gKiAuLi5cbiAqIHJnYigxNzAsODQsMTcwKVxuICogLi4uXG4gKiByZ2IoMjU1LDAsMjU1KVxuICogYGBgXG4gKlxuICogIyMgRWFzaW5nIHN1cHBvcnRcbiAqXG4gKiBFYXNpbmcgd29ya3Mgc29tZXdoYXQgZGlmZmVyZW50bHkgaW4gdGhlIFRva2VuIGV4dGVuc2lvbi4gIFRoaXMgaXMgYmVjYXVzZSBzb21lIENTUyBwcm9wZXJ0aWVzIGhhdmUgbXVsdGlwbGUgdmFsdWVzIGluIHRoZW0sIGFuZCB5b3UgbWlnaHQgbmVlZCB0byB0d2VlbiBlYWNoIHZhbHVlIGFsb25nIGl0cyBvd24gZWFzaW5nIGN1cnZlLiAgQSBiYXNpYyBleGFtcGxlOlxuICpcbiAqIGBgYFxuICogdmFyIHR3ZWVuYWJsZSA9IG5ldyBUd2VlbmFibGUoKTtcbiAqIHR3ZWVuYWJsZS50d2Vlbih7XG4gKiAgIGZyb206IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgwcHgpIHRyYW5zbGF0ZVkoMHB4KSd9LFxuICogICB0bzogeyB0cmFuc2Zvcm06ICAgJ3RyYW5zbGF0ZVgoMTAwcHgpIHRyYW5zbGF0ZVkoMTAwcHgpJ30sXG4gKiAgIGVhc2luZzogeyB0cmFuc2Zvcm06ICdlYXNlSW5RdWFkJyB9LFxuICogICBzdGVwOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAqICAgICBjb25zb2xlLmxvZyhzdGF0ZS50cmFuc2Zvcm0pO1xuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFRoZSBhYm92ZSBzbmlwcGV0IGNyZWF0ZSB2YWx1ZXMgbGlrZSB0aGlzOlxuICpcbiAqIGBgYFxuICogdHJhbnNsYXRlWCgxMS41NjAwMDAwMDAwMDAwMDJweCkgdHJhbnNsYXRlWSgxMS41NjAwMDAwMDAwMDAwMDJweClcbiAqIC4uLlxuICogdHJhbnNsYXRlWCg0Ni4yNDAwMDAwMDAwMDAwMXB4KSB0cmFuc2xhdGVZKDQ2LjI0MDAwMDAwMDAwMDAxcHgpXG4gKiAuLi5cbiAqIHRyYW5zbGF0ZVgoMTAwcHgpIHRyYW5zbGF0ZVkoMTAwcHgpXG4gKiBgYGBcbiAqXG4gKiBJbiB0aGlzIGNhc2UsIHRoZSB2YWx1ZXMgZm9yIGB0cmFuc2xhdGVYYCBhbmQgYHRyYW5zbGF0ZVlgIGFyZSBhbHdheXMgdGhlIHNhbWUgZm9yIGVhY2ggc3RlcCBvZiB0aGUgdHdlZW4sIGJlY2F1c2UgdGhleSBoYXZlIHRoZSBzYW1lIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIGFuZCBib3RoIHVzZSB0aGUgc2FtZSBlYXNpbmcgY3VydmUuICBXZSBjYW4gYWxzbyB0d2VlbiBgdHJhbnNsYXRlWGAgYW5kIGB0cmFuc2xhdGVZYCBhbG9uZyBpbmRlcGVuZGVudCBjdXJ2ZXM6XG4gKlxuICogYGBgXG4gKiB2YXIgdHdlZW5hYmxlID0gbmV3IFR3ZWVuYWJsZSgpO1xuICogdHdlZW5hYmxlLnR3ZWVuKHtcbiAqICAgZnJvbTogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDBweCkgdHJhbnNsYXRlWSgwcHgpJ30sXG4gKiAgIHRvOiB7IHRyYW5zZm9ybTogICAndHJhbnNsYXRlWCgxMDBweCkgdHJhbnNsYXRlWSgxMDBweCknfSxcbiAqICAgZWFzaW5nOiB7IHRyYW5zZm9ybTogJ2Vhc2VJblF1YWQgYm91bmNlJyB9LFxuICogICBzdGVwOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAqICAgICBjb25zb2xlLmxvZyhzdGF0ZS50cmFuc2Zvcm0pO1xuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFRoZSBhYm92ZSBzbmlwcGV0IGNyZWF0ZSB2YWx1ZXMgbGlrZSB0aGlzOlxuICpcbiAqIGBgYFxuICogdHJhbnNsYXRlWCgxMC44OXB4KSB0cmFuc2xhdGVZKDgyLjM1NTYyNXB4KVxuICogLi4uXG4gKiB0cmFuc2xhdGVYKDQ0Ljg5MDAwMDAwMDAwMDAxcHgpIHRyYW5zbGF0ZVkoODYuNzMwNjI1MDAwMDAwMDJweClcbiAqIC4uLlxuICogdHJhbnNsYXRlWCgxMDBweCkgdHJhbnNsYXRlWSgxMDBweClcbiAqIGBgYFxuICpcbiAqIGB0cmFuc2xhdGVYYCBhbmQgYHRyYW5zbGF0ZVlgIGFyZSBub3QgaW4gc3luYyBhbnltb3JlLCBiZWNhdXNlIGBlYXNlSW5RdWFkYCB3YXMgc3BlY2lmaWVkIGZvciBgdHJhbnNsYXRlWGAgYW5kIGBib3VuY2VgIGZvciBgdHJhbnNsYXRlWWAuICBNaXhpbmcgYW5kIG1hdGNoaW5nIGVhc2luZyBjdXJ2ZXMgY2FuIG1ha2UgZm9yIHNvbWUgaW50ZXJlc3RpbmcgbW90aW9uIGluIHlvdXIgYW5pbWF0aW9ucy5cbiAqXG4gKiBUaGUgb3JkZXIgb2YgdGhlIHNwYWNlLXNlcGFyYXRlZCBlYXNpbmcgY3VydmVzIGNvcnJlc3BvbmQgdGhlIHRva2VuIHZhbHVlcyB0aGV5IGFwcGx5IHRvLiAgSWYgdGhlcmUgYXJlIG1vcmUgdG9rZW4gdmFsdWVzIHRoYW4gZWFzaW5nIGN1cnZlcyBsaXN0ZWQsIHRoZSBsYXN0IGVhc2luZyBjdXJ2ZSBsaXN0ZWQgaXMgdXNlZC5cbiAqL1xuZnVuY3Rpb24gdG9rZW4gKCkge1xuICAvLyBGdW5jdGlvbmFsaXR5IGZvciB0aGlzIGV4dGVuc2lvbiBydW5zIGltcGxpY2l0bHkgaWYgaXQgaXMgbG9hZGVkLlxufSAvKiEqL1xuXG4vLyB0b2tlbiBmdW5jdGlvbiBpcyBkZWZpbmVkIGFib3ZlIG9ubHkgc28gdGhhdCBkb3gtZm91bmRhdGlvbiBzZWVzIGl0IGFzXG4vLyBkb2N1bWVudGF0aW9uIGFuZCByZW5kZXJzIGl0LiAgSXQgaXMgbmV2ZXIgdXNlZCwgYW5kIGlzIG9wdGltaXplZCBhd2F5IGF0XG4vLyBidWlsZCB0aW1lLlxuXG47KGZ1bmN0aW9uIChUd2VlbmFibGUpIHtcblxuICAvKiFcbiAgICogQHR5cGVkZWYge3tcbiAgICogICBmb3JtYXRTdHJpbmc6IHN0cmluZ1xuICAgKiAgIGNodW5rTmFtZXM6IEFycmF5LjxzdHJpbmc+XG4gICAqIH19XG4gICAqL1xuICB2YXIgZm9ybWF0TWFuaWZlc3Q7XG5cbiAgLy8gQ09OU1RBTlRTXG5cbiAgdmFyIFJfTlVNQkVSX0NPTVBPTkVOVCA9IC8oXFxkfFxcLXxcXC4pLztcbiAgdmFyIFJfRk9STUFUX0NIVU5LUyA9IC8oW15cXC0wLTlcXC5dKykvZztcbiAgdmFyIFJfVU5GT1JNQVRURURfVkFMVUVTID0gL1swLTkuXFwtXSsvZztcbiAgdmFyIFJfUkdCID0gbmV3IFJlZ0V4cChcbiAgICAncmdiXFxcXCgnICsgUl9VTkZPUk1BVFRFRF9WQUxVRVMuc291cmNlICtcbiAgICAoLyxcXHMqLy5zb3VyY2UpICsgUl9VTkZPUk1BVFRFRF9WQUxVRVMuc291cmNlICtcbiAgICAoLyxcXHMqLy5zb3VyY2UpICsgUl9VTkZPUk1BVFRFRF9WQUxVRVMuc291cmNlICsgJ1xcXFwpJywgJ2cnKTtcbiAgdmFyIFJfUkdCX1BSRUZJWCA9IC9eLipcXCgvO1xuICB2YXIgUl9IRVggPSAvIyhbMC05XXxbYS1mXSl7Myw2fS9naTtcbiAgdmFyIFZBTFVFX1BMQUNFSE9MREVSID0gJ1ZBTCc7XG5cbiAgLy8gSEVMUEVSU1xuXG4gIHZhciBnZXRGb3JtYXRDaHVua3NGcm9tX2FjY3VtdWxhdG9yID0gW107XG4gIC8qIVxuICAgKiBAcGFyYW0ge0FycmF5Lm51bWJlcn0gcmF3VmFsdWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcmVmaXhcbiAgICpcbiAgICogQHJldHVybiB7QXJyYXkuPHN0cmluZz59XG4gICAqL1xuICBmdW5jdGlvbiBnZXRGb3JtYXRDaHVua3NGcm9tIChyYXdWYWx1ZXMsIHByZWZpeCkge1xuICAgIGdldEZvcm1hdENodW5rc0Zyb21fYWNjdW11bGF0b3IubGVuZ3RoID0gMDtcblxuICAgIHZhciByYXdWYWx1ZXNMZW5ndGggPSByYXdWYWx1ZXMubGVuZ3RoO1xuICAgIHZhciBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHJhd1ZhbHVlc0xlbmd0aDsgaSsrKSB7XG4gICAgICBnZXRGb3JtYXRDaHVua3NGcm9tX2FjY3VtdWxhdG9yLnB1c2goJ18nICsgcHJlZml4ICsgJ18nICsgaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldEZvcm1hdENodW5rc0Zyb21fYWNjdW11bGF0b3I7XG4gIH1cblxuICAvKiFcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdHRlZFN0cmluZ1xuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiBnZXRGb3JtYXRTdHJpbmdGcm9tIChmb3JtYXR0ZWRTdHJpbmcpIHtcbiAgICB2YXIgY2h1bmtzID0gZm9ybWF0dGVkU3RyaW5nLm1hdGNoKFJfRk9STUFUX0NIVU5LUyk7XG5cbiAgICBpZiAoIWNodW5rcykge1xuICAgICAgLy8gY2h1bmtzIHdpbGwgYmUgbnVsbCBpZiB0aGVyZSB3ZXJlIG5vIHRva2VucyB0byBwYXJzZSBpblxuICAgICAgLy8gZm9ybWF0dGVkU3RyaW5nIChmb3IgZXhhbXBsZSwgaWYgZm9ybWF0dGVkU3RyaW5nIGlzICcyJykuICBDb2VyY2VcbiAgICAgIC8vIGNodW5rcyB0byBiZSB1c2VmdWwgaGVyZS5cbiAgICAgIGNodW5rcyA9IFsnJywgJyddO1xuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBvbmx5IG9uZSBjaHVuaywgYXNzdW1lIHRoYXQgdGhlIHN0cmluZyBpcyBhIG51bWJlclxuICAgICAgLy8gZm9sbG93ZWQgYnkgYSB0b2tlbi4uLlxuICAgICAgLy8gTk9URTogVGhpcyBtYXkgYmUgYW4gdW53aXNlIGFzc3VtcHRpb24uXG4gICAgfSBlbHNlIGlmIChjaHVua3MubGVuZ3RoID09PSAxIHx8XG4gICAgICAgIC8vIC4uLm9yIGlmIHRoZSBzdHJpbmcgc3RhcnRzIHdpdGggYSBudW1iZXIgY29tcG9uZW50IChcIi5cIiwgXCItXCIsIG9yIGFcbiAgICAgICAgLy8gZGlnaXQpLi4uXG4gICAgICAgIGZvcm1hdHRlZFN0cmluZ1swXS5tYXRjaChSX05VTUJFUl9DT01QT05FTlQpKSB7XG4gICAgICAvLyAuLi5wcmVwZW5kIGFuIGVtcHR5IHN0cmluZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBmb3JtYXR0ZWQgbnVtYmVyXG4gICAgICAvLyBpcyBwcm9wZXJseSByZXBsYWNlZCBieSBWQUxVRV9QTEFDRUhPTERFUlxuICAgICAgY2h1bmtzLnVuc2hpZnQoJycpO1xuICAgIH1cblxuICAgIHJldHVybiBjaHVua3Muam9pbihWQUxVRV9QTEFDRUhPTERFUik7XG4gIH1cblxuICAvKiFcbiAgICogQ29udmVydCBhbGwgaGV4IGNvbG9yIHZhbHVlcyB3aXRoaW4gYSBzdHJpbmcgdG8gYW4gcmdiIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlT2JqZWN0XG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH0gVGhlIG1vZGlmaWVkIG9ialxuICAgKi9cbiAgZnVuY3Rpb24gc2FuaXRpemVPYmplY3RGb3JIZXhQcm9wcyAoc3RhdGVPYmplY3QpIHtcbiAgICBUd2VlbmFibGUuZWFjaChzdGF0ZU9iamVjdCwgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgIHZhciBjdXJyZW50UHJvcCA9IHN0YXRlT2JqZWN0W3Byb3BdO1xuXG4gICAgICBpZiAodHlwZW9mIGN1cnJlbnRQcm9wID09PSAnc3RyaW5nJyAmJiBjdXJyZW50UHJvcC5tYXRjaChSX0hFWCkpIHtcbiAgICAgICAgc3RhdGVPYmplY3RbcHJvcF0gPSBzYW5pdGl6ZUhleENodW5rc1RvUkdCKGN1cnJlbnRQcm9wKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qIVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGZ1bmN0aW9uICBzYW5pdGl6ZUhleENodW5rc1RvUkdCIChzdHIpIHtcbiAgICByZXR1cm4gZmlsdGVyU3RyaW5nQ2h1bmtzKFJfSEVYLCBzdHIsIGNvbnZlcnRIZXhUb1JHQik7XG4gIH1cblxuICAvKiFcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhleFN0cmluZ1xuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiBjb252ZXJ0SGV4VG9SR0IgKGhleFN0cmluZykge1xuICAgIHZhciByZ2JBcnIgPSBoZXhUb1JHQkFycmF5KGhleFN0cmluZyk7XG4gICAgcmV0dXJuICdyZ2IoJyArIHJnYkFyclswXSArICcsJyArIHJnYkFyclsxXSArICcsJyArIHJnYkFyclsyXSArICcpJztcbiAgfVxuXG4gIHZhciBoZXhUb1JHQkFycmF5X3JldHVybkFycmF5ID0gW107XG4gIC8qIVxuICAgKiBDb252ZXJ0IGEgaGV4YWRlY2ltYWwgc3RyaW5nIHRvIGFuIGFycmF5IHdpdGggdGhyZWUgaXRlbXMsIG9uZSBlYWNoIGZvclxuICAgKiB0aGUgcmVkLCBibHVlLCBhbmQgZ3JlZW4gZGVjaW1hbCB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoZXggQSBoZXhhZGVjaW1hbCBzdHJpbmcuXG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheS48bnVtYmVyPn0gVGhlIGNvbnZlcnRlZCBBcnJheSBvZiBSR0IgdmFsdWVzIGlmIGBoZXhgIGlzIGFcbiAgICogdmFsaWQgc3RyaW5nLCBvciBhbiBBcnJheSBvZiB0aHJlZSAwJ3MuXG4gICAqL1xuICBmdW5jdGlvbiBoZXhUb1JHQkFycmF5IChoZXgpIHtcblxuICAgIGhleCA9IGhleC5yZXBsYWNlKC8jLywgJycpO1xuXG4gICAgLy8gSWYgdGhlIHN0cmluZyBpcyBhIHNob3J0aGFuZCB0aHJlZSBkaWdpdCBoZXggbm90YXRpb24sIG5vcm1hbGl6ZSBpdCB0b1xuICAgIC8vIHRoZSBzdGFuZGFyZCBzaXggZGlnaXQgbm90YXRpb25cbiAgICBpZiAoaGV4Lmxlbmd0aCA9PT0gMykge1xuICAgICAgaGV4ID0gaGV4LnNwbGl0KCcnKTtcbiAgICAgIGhleCA9IGhleFswXSArIGhleFswXSArIGhleFsxXSArIGhleFsxXSArIGhleFsyXSArIGhleFsyXTtcbiAgICB9XG5cbiAgICBoZXhUb1JHQkFycmF5X3JldHVybkFycmF5WzBdID0gaGV4VG9EZWMoaGV4LnN1YnN0cigwLCAyKSk7XG4gICAgaGV4VG9SR0JBcnJheV9yZXR1cm5BcnJheVsxXSA9IGhleFRvRGVjKGhleC5zdWJzdHIoMiwgMikpO1xuICAgIGhleFRvUkdCQXJyYXlfcmV0dXJuQXJyYXlbMl0gPSBoZXhUb0RlYyhoZXguc3Vic3RyKDQsIDIpKTtcblxuICAgIHJldHVybiBoZXhUb1JHQkFycmF5X3JldHVybkFycmF5O1xuICB9XG5cbiAgLyohXG4gICAqIENvbnZlcnQgYSBiYXNlLTE2IG51bWJlciB0byBiYXNlLTEwLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IGhleCBUaGUgdmFsdWUgdG8gY29udmVydFxuICAgKlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYmFzZS0xMCBlcXVpdmFsZW50IG9mIGBoZXhgLlxuICAgKi9cbiAgZnVuY3Rpb24gaGV4VG9EZWMgKGhleCkge1xuICAgIHJldHVybiBwYXJzZUludChoZXgsIDE2KTtcbiAgfVxuXG4gIC8qIVxuICAgKiBSdW5zIGEgZmlsdGVyIG9wZXJhdGlvbiBvbiBhbGwgY2h1bmtzIG9mIGEgc3RyaW5nIHRoYXQgbWF0Y2ggYSBSZWdFeHBcbiAgICpcbiAgICogQHBhcmFtIHtSZWdFeHB9IHBhdHRlcm5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuZmlsdGVyZWRTdHJpbmdcbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpfSBmaWx0ZXJcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZnVuY3Rpb24gZmlsdGVyU3RyaW5nQ2h1bmtzIChwYXR0ZXJuLCB1bmZpbHRlcmVkU3RyaW5nLCBmaWx0ZXIpIHtcbiAgICB2YXIgcGF0dGVuTWF0Y2hlcyA9IHVuZmlsdGVyZWRTdHJpbmcubWF0Y2gocGF0dGVybik7XG4gICAgdmFyIGZpbHRlcmVkU3RyaW5nID0gdW5maWx0ZXJlZFN0cmluZy5yZXBsYWNlKHBhdHRlcm4sIFZBTFVFX1BMQUNFSE9MREVSKTtcblxuICAgIGlmIChwYXR0ZW5NYXRjaGVzKSB7XG4gICAgICB2YXIgcGF0dGVuTWF0Y2hlc0xlbmd0aCA9IHBhdHRlbk1hdGNoZXMubGVuZ3RoO1xuICAgICAgdmFyIGN1cnJlbnRDaHVuaztcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXR0ZW5NYXRjaGVzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY3VycmVudENodW5rID0gcGF0dGVuTWF0Y2hlcy5zaGlmdCgpO1xuICAgICAgICBmaWx0ZXJlZFN0cmluZyA9IGZpbHRlcmVkU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgICAgVkFMVUVfUExBQ0VIT0xERVIsIGZpbHRlcihjdXJyZW50Q2h1bmspKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmlsdGVyZWRTdHJpbmc7XG4gIH1cblxuICAvKiFcbiAgICogQ2hlY2sgZm9yIGZsb2F0aW5nIHBvaW50IHZhbHVlcyB3aXRoaW4gcmdiIHN0cmluZ3MgYW5kIHJvdW5kcyB0aGVtLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0dGVkU3RyaW5nXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGZ1bmN0aW9uIHNhbml0aXplUkdCQ2h1bmtzIChmb3JtYXR0ZWRTdHJpbmcpIHtcbiAgICByZXR1cm4gZmlsdGVyU3RyaW5nQ2h1bmtzKFJfUkdCLCBmb3JtYXR0ZWRTdHJpbmcsIHNhbml0aXplUkdCQ2h1bmspO1xuICB9XG5cbiAgLyohXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZ2JDaHVua1xuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiBzYW5pdGl6ZVJHQkNodW5rIChyZ2JDaHVuaykge1xuICAgIHZhciBudW1iZXJzID0gcmdiQ2h1bmsubWF0Y2goUl9VTkZPUk1BVFRFRF9WQUxVRVMpO1xuICAgIHZhciBudW1iZXJzTGVuZ3RoID0gbnVtYmVycy5sZW5ndGg7XG4gICAgdmFyIHNhbml0aXplZFN0cmluZyA9IHJnYkNodW5rLm1hdGNoKFJfUkdCX1BSRUZJWClbMF07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlcnNMZW5ndGg7IGkrKykge1xuICAgICAgc2FuaXRpemVkU3RyaW5nICs9IHBhcnNlSW50KG51bWJlcnNbaV0sIDEwKSArICcsJztcbiAgICB9XG5cbiAgICBzYW5pdGl6ZWRTdHJpbmcgPSBzYW5pdGl6ZWRTdHJpbmcuc2xpY2UoMCwgLTEpICsgJyknO1xuXG4gICAgcmV0dXJuIHNhbml0aXplZFN0cmluZztcbiAgfVxuXG4gIC8qIVxuICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGVPYmplY3RcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBBbiBPYmplY3Qgb2YgZm9ybWF0TWFuaWZlc3RzIHRoYXQgY29ycmVzcG9uZCB0b1xuICAgKiB0aGUgc3RyaW5nIHByb3BlcnRpZXMgb2Ygc3RhdGVPYmplY3RcbiAgICovXG4gIGZ1bmN0aW9uIGdldEZvcm1hdE1hbmlmZXN0cyAoc3RhdGVPYmplY3QpIHtcbiAgICB2YXIgbWFuaWZlc3RBY2N1bXVsYXRvciA9IHt9O1xuXG4gICAgVHdlZW5hYmxlLmVhY2goc3RhdGVPYmplY3QsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICB2YXIgY3VycmVudFByb3AgPSBzdGF0ZU9iamVjdFtwcm9wXTtcblxuICAgICAgaWYgKHR5cGVvZiBjdXJyZW50UHJvcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIHJhd1ZhbHVlcyA9IGdldFZhbHVlc0Zyb20oY3VycmVudFByb3ApO1xuXG4gICAgICAgIG1hbmlmZXN0QWNjdW11bGF0b3JbcHJvcF0gPSB7XG4gICAgICAgICAgJ2Zvcm1hdFN0cmluZyc6IGdldEZvcm1hdFN0cmluZ0Zyb20oY3VycmVudFByb3ApXG4gICAgICAgICAgLCdjaHVua05hbWVzJzogZ2V0Rm9ybWF0Q2h1bmtzRnJvbShyYXdWYWx1ZXMsIHByb3ApXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWFuaWZlc3RBY2N1bXVsYXRvcjtcbiAgfVxuXG4gIC8qIVxuICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGVPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IGZvcm1hdE1hbmlmZXN0c1xuICAgKi9cbiAgZnVuY3Rpb24gZXhwYW5kRm9ybWF0dGVkUHJvcGVydGllcyAoc3RhdGVPYmplY3QsIGZvcm1hdE1hbmlmZXN0cykge1xuICAgIFR3ZWVuYWJsZS5lYWNoKGZvcm1hdE1hbmlmZXN0cywgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgIHZhciBjdXJyZW50UHJvcCA9IHN0YXRlT2JqZWN0W3Byb3BdO1xuICAgICAgdmFyIHJhd1ZhbHVlcyA9IGdldFZhbHVlc0Zyb20oY3VycmVudFByb3ApO1xuICAgICAgdmFyIHJhd1ZhbHVlc0xlbmd0aCA9IHJhd1ZhbHVlcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3VmFsdWVzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RhdGVPYmplY3RbZm9ybWF0TWFuaWZlc3RzW3Byb3BdLmNodW5rTmFtZXNbaV1dID0gK3Jhd1ZhbHVlc1tpXTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIHN0YXRlT2JqZWN0W3Byb3BdO1xuICAgIH0pO1xuICB9XG5cbiAgLyohXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZU9iamVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gZm9ybWF0TWFuaWZlc3RzXG4gICAqL1xuICBmdW5jdGlvbiBjb2xsYXBzZUZvcm1hdHRlZFByb3BlcnRpZXMgKHN0YXRlT2JqZWN0LCBmb3JtYXRNYW5pZmVzdHMpIHtcbiAgICBUd2VlbmFibGUuZWFjaChmb3JtYXRNYW5pZmVzdHMsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICB2YXIgY3VycmVudFByb3AgPSBzdGF0ZU9iamVjdFtwcm9wXTtcbiAgICAgIHZhciBmb3JtYXRDaHVua3MgPSBleHRyYWN0UHJvcGVydHlDaHVua3MoXG4gICAgICAgIHN0YXRlT2JqZWN0LCBmb3JtYXRNYW5pZmVzdHNbcHJvcF0uY2h1bmtOYW1lcyk7XG4gICAgICB2YXIgdmFsdWVzTGlzdCA9IGdldFZhbHVlc0xpc3QoXG4gICAgICAgIGZvcm1hdENodW5rcywgZm9ybWF0TWFuaWZlc3RzW3Byb3BdLmNodW5rTmFtZXMpO1xuICAgICAgY3VycmVudFByb3AgPSBnZXRGb3JtYXR0ZWRWYWx1ZXMoXG4gICAgICAgIGZvcm1hdE1hbmlmZXN0c1twcm9wXS5mb3JtYXRTdHJpbmcsIHZhbHVlc0xpc3QpO1xuICAgICAgc3RhdGVPYmplY3RbcHJvcF0gPSBzYW5pdGl6ZVJHQkNodW5rcyhjdXJyZW50UHJvcCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiFcbiAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlT2JqZWN0XG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IGNodW5rTmFtZXNcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgZXh0cmFjdGVkIHZhbHVlIGNodW5rcy5cbiAgICovXG4gIGZ1bmN0aW9uIGV4dHJhY3RQcm9wZXJ0eUNodW5rcyAoc3RhdGVPYmplY3QsIGNodW5rTmFtZXMpIHtcbiAgICB2YXIgZXh0cmFjdGVkVmFsdWVzID0ge307XG4gICAgdmFyIGN1cnJlbnRDaHVua05hbWUsIGNodW5rTmFtZXNMZW5ndGggPSBjaHVua05hbWVzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtOYW1lc0xlbmd0aDsgaSsrKSB7XG4gICAgICBjdXJyZW50Q2h1bmtOYW1lID0gY2h1bmtOYW1lc1tpXTtcbiAgICAgIGV4dHJhY3RlZFZhbHVlc1tjdXJyZW50Q2h1bmtOYW1lXSA9IHN0YXRlT2JqZWN0W2N1cnJlbnRDaHVua05hbWVdO1xuICAgICAgZGVsZXRlIHN0YXRlT2JqZWN0W2N1cnJlbnRDaHVua05hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiBleHRyYWN0ZWRWYWx1ZXM7XG4gIH1cblxuICB2YXIgZ2V0VmFsdWVzTGlzdF9hY2N1bXVsYXRvciA9IFtdO1xuICAvKiFcbiAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlT2JqZWN0XG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IGNodW5rTmFtZXNcbiAgICpcbiAgICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59XG4gICAqL1xuICBmdW5jdGlvbiBnZXRWYWx1ZXNMaXN0IChzdGF0ZU9iamVjdCwgY2h1bmtOYW1lcykge1xuICAgIGdldFZhbHVlc0xpc3RfYWNjdW11bGF0b3IubGVuZ3RoID0gMDtcbiAgICB2YXIgY2h1bmtOYW1lc0xlbmd0aCA9IGNodW5rTmFtZXMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVua05hbWVzTGVuZ3RoOyBpKyspIHtcbiAgICAgIGdldFZhbHVlc0xpc3RfYWNjdW11bGF0b3IucHVzaChzdGF0ZU9iamVjdFtjaHVua05hbWVzW2ldXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldFZhbHVlc0xpc3RfYWNjdW11bGF0b3I7XG4gIH1cblxuICAvKiFcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdFN0cmluZ1xuICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSByYXdWYWx1ZXNcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkVmFsdWVzIChmb3JtYXRTdHJpbmcsIHJhd1ZhbHVlcykge1xuICAgIHZhciBmb3JtYXR0ZWRWYWx1ZVN0cmluZyA9IGZvcm1hdFN0cmluZztcbiAgICB2YXIgcmF3VmFsdWVzTGVuZ3RoID0gcmF3VmFsdWVzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3VmFsdWVzTGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvcm1hdHRlZFZhbHVlU3RyaW5nID0gZm9ybWF0dGVkVmFsdWVTdHJpbmcucmVwbGFjZShcbiAgICAgICAgVkFMVUVfUExBQ0VIT0xERVIsICtyYXdWYWx1ZXNbaV0udG9GaXhlZCg0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlU3RyaW5nO1xuICB9XG5cbiAgLyohXG4gICAqIE5vdGU6IEl0J3MgdGhlIGR1dHkgb2YgdGhlIGNhbGxlciB0byBjb252ZXJ0IHRoZSBBcnJheSBlbGVtZW50cyBvZiB0aGVcbiAgICogcmV0dXJuIHZhbHVlIGludG8gbnVtYmVycy4gIFRoaXMgaXMgYSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXR0ZWRTdHJpbmdcbiAgICpcbiAgICogQHJldHVybiB7QXJyYXkuPHN0cmluZz58bnVsbH1cbiAgICovXG4gIGZ1bmN0aW9uIGdldFZhbHVlc0Zyb20gKGZvcm1hdHRlZFN0cmluZykge1xuICAgIHJldHVybiBmb3JtYXR0ZWRTdHJpbmcubWF0Y2goUl9VTkZPUk1BVFRFRF9WQUxVRVMpO1xuICB9XG5cbiAgLyohXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlYXNpbmdPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IHRva2VuRGF0YVxuICAgKi9cbiAgZnVuY3Rpb24gZXhwYW5kRWFzaW5nT2JqZWN0IChlYXNpbmdPYmplY3QsIHRva2VuRGF0YSkge1xuICAgIFR3ZWVuYWJsZS5lYWNoKHRva2VuRGF0YSwgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgIHZhciBjdXJyZW50UHJvcCA9IHRva2VuRGF0YVtwcm9wXTtcbiAgICAgIHZhciBjaHVua05hbWVzID0gY3VycmVudFByb3AuY2h1bmtOYW1lcztcbiAgICAgIHZhciBjaHVua0xlbmd0aCA9IGNodW5rTmFtZXMubGVuZ3RoO1xuICAgICAgdmFyIGVhc2luZ0NodW5rcyA9IGVhc2luZ09iamVjdFtwcm9wXS5zcGxpdCgnICcpO1xuICAgICAgdmFyIGxhc3RFYXNpbmdDaHVuayA9IGVhc2luZ0NodW5rc1tlYXNpbmdDaHVua3MubGVuZ3RoIC0gMV07XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtMZW5ndGg7IGkrKykge1xuICAgICAgICBlYXNpbmdPYmplY3RbY2h1bmtOYW1lc1tpXV0gPSBlYXNpbmdDaHVua3NbaV0gfHwgbGFzdEVhc2luZ0NodW5rO1xuICAgICAgfVxuXG4gICAgICBkZWxldGUgZWFzaW5nT2JqZWN0W3Byb3BdO1xuICAgIH0pO1xuICB9XG5cbiAgLyohXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlYXNpbmdPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IHRva2VuRGF0YVxuICAgKi9cbiAgZnVuY3Rpb24gY29sbGFwc2VFYXNpbmdPYmplY3QgKGVhc2luZ09iamVjdCwgdG9rZW5EYXRhKSB7XG4gICAgVHdlZW5hYmxlLmVhY2godG9rZW5EYXRhLCBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgdmFyIGN1cnJlbnRQcm9wID0gdG9rZW5EYXRhW3Byb3BdO1xuICAgICAgdmFyIGNodW5rTmFtZXMgPSBjdXJyZW50UHJvcC5jaHVua05hbWVzO1xuICAgICAgdmFyIGNodW5rTGVuZ3RoID0gY2h1bmtOYW1lcy5sZW5ndGg7XG4gICAgICB2YXIgY29tcG9zZWRFYXNpbmdTdHJpbmcgPSAnJztcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVua0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbXBvc2VkRWFzaW5nU3RyaW5nICs9ICcgJyArIGVhc2luZ09iamVjdFtjaHVua05hbWVzW2ldXTtcbiAgICAgICAgZGVsZXRlIGVhc2luZ09iamVjdFtjaHVua05hbWVzW2ldXTtcbiAgICAgIH1cblxuICAgICAgZWFzaW5nT2JqZWN0W3Byb3BdID0gY29tcG9zZWRFYXNpbmdTdHJpbmcuc3Vic3RyKDEpO1xuICAgIH0pO1xuICB9XG5cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS5maWx0ZXIudG9rZW4gPSB7XG4gICAgJ3R3ZWVuQ3JlYXRlZCc6IGZ1bmN0aW9uIChjdXJyZW50U3RhdGUsIGZyb21TdGF0ZSwgdG9TdGF0ZSwgZWFzaW5nT2JqZWN0KSB7XG4gICAgICBzYW5pdGl6ZU9iamVjdEZvckhleFByb3BzKGN1cnJlbnRTdGF0ZSk7XG4gICAgICBzYW5pdGl6ZU9iamVjdEZvckhleFByb3BzKGZyb21TdGF0ZSk7XG4gICAgICBzYW5pdGl6ZU9iamVjdEZvckhleFByb3BzKHRvU3RhdGUpO1xuICAgICAgdGhpcy5fdG9rZW5EYXRhID0gZ2V0Rm9ybWF0TWFuaWZlc3RzKGN1cnJlbnRTdGF0ZSk7XG4gICAgfSxcblxuICAgICdiZWZvcmVUd2Vlbic6IGZ1bmN0aW9uIChjdXJyZW50U3RhdGUsIGZyb21TdGF0ZSwgdG9TdGF0ZSwgZWFzaW5nT2JqZWN0KSB7XG4gICAgICBleHBhbmRFYXNpbmdPYmplY3QoZWFzaW5nT2JqZWN0LCB0aGlzLl90b2tlbkRhdGEpO1xuICAgICAgZXhwYW5kRm9ybWF0dGVkUHJvcGVydGllcyhjdXJyZW50U3RhdGUsIHRoaXMuX3Rva2VuRGF0YSk7XG4gICAgICBleHBhbmRGb3JtYXR0ZWRQcm9wZXJ0aWVzKGZyb21TdGF0ZSwgdGhpcy5fdG9rZW5EYXRhKTtcbiAgICAgIGV4cGFuZEZvcm1hdHRlZFByb3BlcnRpZXModG9TdGF0ZSwgdGhpcy5fdG9rZW5EYXRhKTtcbiAgICB9LFxuXG4gICAgJ2FmdGVyVHdlZW4nOiBmdW5jdGlvbiAoY3VycmVudFN0YXRlLCBmcm9tU3RhdGUsIHRvU3RhdGUsIGVhc2luZ09iamVjdCkge1xuICAgICAgY29sbGFwc2VGb3JtYXR0ZWRQcm9wZXJ0aWVzKGN1cnJlbnRTdGF0ZSwgdGhpcy5fdG9rZW5EYXRhKTtcbiAgICAgIGNvbGxhcHNlRm9ybWF0dGVkUHJvcGVydGllcyhmcm9tU3RhdGUsIHRoaXMuX3Rva2VuRGF0YSk7XG4gICAgICBjb2xsYXBzZUZvcm1hdHRlZFByb3BlcnRpZXModG9TdGF0ZSwgdGhpcy5fdG9rZW5EYXRhKTtcbiAgICAgIGNvbGxhcHNlRWFzaW5nT2JqZWN0KGVhc2luZ09iamVjdCwgdGhpcy5fdG9rZW5EYXRhKTtcbiAgICB9XG4gIH07XG5cbn0gKFR3ZWVuYWJsZSkpO1xuXG59KHRoaXMpKTtcbiIsInZhciBUd2VlbmFibGUgPSByZXF1aXJlKCdzaGlmdHknKTtcblxudmFyIEVBU0lOR19BTElBU0VTID0ge1xuICAgIGVhc2VJbjogJ2Vhc2VJbkN1YmljJyxcbiAgICBlYXNlT3V0OiAnZWFzZU91dEN1YmljJyxcbiAgICBlYXNlSW5PdXQ6ICdlYXNlSW5PdXRDdWJpYydcbn07XG5cbi8vIEJhc2Ugb2JqZWN0IGZvciBkaWZmZXJlbnQgcHJvZ3Jlc3MgYmFyIHNoYXBlc1xudmFyIFByb2dyZXNzID0gZnVuY3Rpb24oY29udGFpbmVyLCBvcHRzKSB7XG4gICAgLy8gUHJldmVudCBjYWxsaW5nIGNvbnN0cnVjdG9yIHdpdGhvdXQgcGFyYW1ldGVycyBzbyBpbmhlcml0YW5jZVxuICAgIC8vIHdvcmtzIGNvcnJlY3RseVxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICB2YXIgc3ZnVmlldyA9IHRoaXMuX2NyZWF0ZVN2Z1ZpZXcob3B0cyk7XG5cbiAgICB2YXIgZWxlbWVudDtcbiAgICBpZiAoaXNTdHJpbmcoY29udGFpbmVyKSkge1xuICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQgPSBjb250YWluZXI7XG4gICAgfVxuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoc3ZnVmlldy5zdmcpO1xuXG4gICAgdmFyIG5ld09wdHMgPSBleHRlbmQoe1xuICAgICAgICBhdHRhY2htZW50OiB0aGlzXG4gICAgfSwgb3B0cyk7XG4gICAgdGhpcy5fcGF0aCA9IG5ldyBQYXRoKHN2Z1ZpZXcucGF0aCwgbmV3T3B0cyk7XG5cbiAgICAvLyBFeHBvc2UgcHVibGljIGF0dHJpYnV0ZXNcbiAgICB0aGlzLnBhdGggPSBzdmdWaWV3LnBhdGg7XG4gICAgdGhpcy50cmFpbCA9IHN2Z1ZpZXcudHJhaWw7XG59O1xuXG5Qcm9ncmVzcy5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uIGFuaW1hdGUocHJvZ3Jlc3MsIG9wdHMsIGNiKSB7XG4gICAgdGhpcy5fcGF0aC5hbmltYXRlKHByb2dyZXNzLCBvcHRzLCBjYik7XG59O1xuXG5Qcm9ncmVzcy5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgdGhpcy5fcGF0aC5zdG9wKCk7XG59O1xuXG5Qcm9ncmVzcy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KHByb2dyZXNzKSB7XG4gICAgdGhpcy5fcGF0aC5zZXQocHJvZ3Jlc3MpO1xufTtcblxuUHJvZ3Jlc3MucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhdGgudmFsdWUoKTtcbn07XG5cblByb2dyZXNzLnByb3RvdHlwZS5fY3JlYXRlU3ZnVmlldyA9IGZ1bmN0aW9uIF9jcmVhdGVTdmdWaWV3KG9wdHMpIHtcbiAgICBvcHRzID0gZXh0ZW5kKHtcbiAgICAgICAgY29sb3I6IFwiIzU1NVwiLFxuICAgICAgICBzdHJva2VXaWR0aDogMS4wLFxuICAgICAgICB0cmFpbENvbG9yOiBudWxsLFxuICAgICAgICBmaWxsOiBudWxsXG4gICAgfSwgb3B0cyk7XG5cbiAgICB2YXIgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG4gICAgdGhpcy5faW5pdGlhbGl6ZVN2ZyhzdmcsIG9wdHMpO1xuXG4gICAgdmFyIHRyYWlsUGF0aCA9IG51bGw7XG4gICAgaWYgKG9wdHMudHJhaWxDb2xvcikge1xuICAgICAgICB2YXIgdHJhaWxPcHRzID0gZXh0ZW5kKHt9LCBvcHRzKTtcbiAgICAgICAgdHJhaWxPcHRzLmNvbG9yID0gb3B0cy50cmFpbENvbG9yO1xuXG4gICAgICAgIC8vIFdoZW4gdHJhaWwgcGF0aCBpcyBzZXQsIGZpbGwgbXVzdCBiZSBzZXQgZm9yIGl0IGluc3RlYWQgb2YgdGhlXG4gICAgICAgIC8vIGFjdHVhbCBwYXRoIHRvIHByZXZlbnQgdHJhaWwgc3Ryb2tlIGZyb20gY2xpcHBpbmdcbiAgICAgICAgb3B0cy5maWxsID0gbnVsbDtcbiAgICAgICAgdHJhaWxQYXRoID0gdGhpcy5fY3JlYXRlUGF0aCh0cmFpbE9wdHMpO1xuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQodHJhaWxQYXRoKTtcbiAgICB9XG5cbiAgICB2YXIgcGF0aCA9IHRoaXMuX2NyZWF0ZVBhdGgob3B0cyk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3ZnOiBzdmcsXG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIHRyYWlsOiB0cmFpbFBhdGhcbiAgICB9O1xufTtcblxuUHJvZ3Jlc3MucHJvdG90eXBlLl9pbml0aWFsaXplU3ZnID0gZnVuY3Rpb24gX2luaXRpYWxpemVTdmcoc3ZnLCBvcHRzKSB7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgXCIwIDAgMTAwIDEwMFwiKTtcbn07XG5cblByb2dyZXNzLnByb3RvdHlwZS5fY3JlYXRlUGF0aCA9IGZ1bmN0aW9uIF9jcmVhdGVQYXRoKG9wdHMpIHtcbiAgICB2YXIgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwicGF0aFwiKTtcbiAgICBwYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgdGhpcy5fcGF0aFN0cmluZyhvcHRzKSk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgb3B0cy5jb2xvcik7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgb3B0cy5zdHJva2VXaWR0aCk7XG5cbiAgICBpZiAob3B0cy5maWxsKSB7XG4gICAgICAgIHBhdGguc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBvcHRzLmZpbGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGguc2V0QXR0cmlidXRlKFwiZmlsbC1vcGFjaXR5XCIsIFwiMFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aDtcbn07XG5cblByb2dyZXNzLnByb3RvdHlwZS5fcGF0aFN0cmluZyA9IGZ1bmN0aW9uIF9wYXRoU3RyaW5nKG9wdHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIGZvciBlYWNoIHByb2dyZXNzIGJhclwiKTtcbn07XG5cbi8vIFByb2dyZXNzIGJhciBzaGFwZXNcblxudmFyIExpbmUgPSBmdW5jdGlvbihjb250YWluZXIsIG9wdGlvbnMpIHtcbiAgICBQcm9ncmVzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuTGluZS5wcm90b3R5cGUgPSBuZXcgUHJvZ3Jlc3MoKTtcbkxpbmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGluZTtcblxuTGluZS5wcm90b3R5cGUuX2luaXRpYWxpemVTdmcgPSBmdW5jdGlvbiBfaW5pdGlhbGl6ZVN2ZyhzdmcsIG9wdHMpIHtcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBcIjAgMCAxMDAgXCIgKyBvcHRzLnN0cm9rZVdpZHRoKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcIm5vbmVcIik7XG59O1xuXG5MaW5lLnByb3RvdHlwZS5fcGF0aFN0cmluZyA9IGZ1bmN0aW9uIF9wYXRoU3RyaW5nKG9wdHMpIHtcbiAgICB2YXIgcGF0aFN0cmluZyA9IFwiTSAwLHtjfSBMIDEwMCx7Y31cIjtcbiAgICB2YXIgY2VudGVyID0gb3B0cy5zdHJva2VXaWR0aCAvIDI7XG4gICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXFx7Y1xcfS9nLCBjZW50ZXIpO1xuICAgIHJldHVybiBwYXRoU3RyaW5nO1xufTtcblxudmFyIENpcmNsZSA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgb3B0aW9ucykge1xuICAgIFByb2dyZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5DaXJjbGUucHJvdG90eXBlID0gbmV3IFByb2dyZXNzKCk7XG5DaXJjbGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2lyY2xlO1xuXG5DaXJjbGUucHJvdG90eXBlLl9wYXRoU3RyaW5nID0gZnVuY3Rpb24gX3BhdGhTdHJpbmcob3B0cykge1xuICAgIC8vIFVzZSB0d28gYXJjcyB0byBmb3JtIGEgY2lyY2xlXG4gICAgLy8gU2VlIHRoaXMgYW5zd2VyIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEwNDc3MzM0LzE0NDYwOTJcbiAgICB2YXIgcGF0aFN0cmluZyA9IFwiTSA1MCw1MCBtIDAsLXtyfSBhIHtyfSx7cn0gMCAxIDEgMCx7cioyfSBhIHtyfSx7cn0gMCAxIDEgMCwte3IqMn1cIjtcbiAgICB2YXIgciA9IDUwIC0gb3B0cy5zdHJva2VXaWR0aCAvIDI7XG4gICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXFx7clxcfS9nLCByKTtcbiAgICBwYXRoU3RyaW5nID0gcGF0aFN0cmluZy5yZXBsYWNlKC9cXHtyXFwqMlxcfS9nLCByICogMik7XG4gICAgcmV0dXJuIHBhdGhTdHJpbmc7XG59O1xuXG52YXIgU3F1YXJlID0gZnVuY3Rpb24oY29udGFpbmVyLCBvcHRpb25zKSB7XG4gICAgUHJvZ3Jlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cblNxdWFyZS5wcm90b3R5cGUgPSBuZXcgUHJvZ3Jlc3MoKTtcblNxdWFyZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTcXVhcmU7XG5cblNxdWFyZS5wcm90b3R5cGUuX3BhdGhTdHJpbmcgPSBmdW5jdGlvbiBfcGF0aFN0cmluZyhvcHRzKSB7XG4gICAgdmFyIHBhdGhTdHJpbmcgPSBcIk0gMCx7cy8yfSBMIHt3fSx7cy8yfSBMIHt3fSx7d30gTCB7cy8yfSx7d30gTCB7cy8yfSx7c31cIjtcbiAgICB2YXIgdyA9IDEwMCAtIG9wdHMuc3Ryb2tlV2lkdGggLyAyO1xuICAgIHBhdGhTdHJpbmcgPSBwYXRoU3RyaW5nLnJlcGxhY2UoL1xce3dcXH0vZywgdyk7XG4gICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXFx7c1xcfS9nLCBvcHRzLnN0cm9rZVdpZHRoKTtcbiAgICBwYXRoU3RyaW5nID0gcGF0aFN0cmluZy5yZXBsYWNlKC9cXHtzXFwvMlxcfS9nLCBvcHRzLnN0cm9rZVdpZHRoIC8gMik7XG4gICAgcmV0dXJuIHBhdGhTdHJpbmc7XG59O1xuXG4vLyBMb3dlciBsZXZlbCBBUEkgdG8gYW5pbWF0ZSBhbnkga2luZCBvZiBzdmcgcGF0aFxuXG52YXIgUGF0aCA9IGZ1bmN0aW9uKHBhdGgsIG9wdHMpIHtcbiAgICBvcHRzID0gZXh0ZW5kKHtcbiAgICAgICAgZHVyYXRpb246IDgwMCxcbiAgICAgICAgZWFzaW5nOiBcImxpbmVhclwiLFxuICAgICAgICBmcm9tOiB7fSxcbiAgICAgICAgdG86IHt9LFxuICAgICAgICBzdGVwOiBub29wXG4gICAgfSwgb3B0cyk7XG5cbiAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICB0aGlzLl9vcHRzID0gb3B0cztcbiAgICB0aGlzLl90d2VlbmFibGUgPSBudWxsO1xuXG4gICAgLy8gU2V0IHVwIHRoZSBzdGFydGluZyBwb3NpdGlvbnNcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fcGF0aC5nZXRUb3RhbExlbmd0aCgpO1xuICAgIHRoaXMuX3BhdGguc3R5bGUuc3Ryb2tlRGFzaGFycmF5ID0gbGVuZ3RoICsgJyAnICsgbGVuZ3RoO1xuICAgIHRoaXMuX3BhdGguc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IGxlbmd0aDtcbn07XG5cblBhdGgucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gdmFsdWUoKSB7XG4gICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl9wYXRoLCBudWxsKTtcbiAgICB2YXIgb2Zmc2V0ID0gY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdzdHJva2UtZGFzaG9mZnNldCcpO1xuICAgIC8vIFJlbW92ZSAncHgnIHN1ZmZpeFxuICAgIG9mZnNldCA9IHBhcnNlRmxvYXQob2Zmc2V0LCAxMCk7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX3BhdGguZ2V0VG90YWxMZW5ndGgoKTtcblxuICAgIHJldHVybiAxIC0gb2Zmc2V0IC8gbGVuZ3RoO1xufTtcblxuUGF0aC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KHByb2dyZXNzKSB7XG4gICAgdGhpcy5zdG9wKCk7XG5cbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fcGF0aC5nZXRUb3RhbExlbmd0aCgpO1xuICAgIHRoaXMuX3BhdGguc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IGxlbmd0aCAtIHByb2dyZXNzICogbGVuZ3RoO1xufTtcblxuUGF0aC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgdGhpcy5fc3RvcFR3ZWVuKCk7XG5cbiAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3BhdGgsIG51bGwpO1xuICAgIHZhciBvZmZzZXQgPSBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3N0cm9rZS1kYXNob2Zmc2V0Jyk7XG4gICAgdGhpcy5fcGF0aC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0ID0gb2Zmc2V0O1xufTtcblxuLy8gTWV0aG9kIGludHJvZHVjZWQgaGVyZTpcbi8vIGh0dHA6Ly9qYWtlYXJjaGliYWxkLmNvbS8yMDEzL2FuaW1hdGVkLWxpbmUtZHJhd2luZy1zdmcvXG5QYXRoLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gYW5pbWF0ZShwcm9ncmVzcywgb3B0cywgY2IpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihvcHRzKSkge1xuICAgICAgICBjYiA9IG9wdHM7XG4gICAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICAvLyBDb3B5IGRlZmF1bHQgb3B0cyB0byBuZXcgb2JqZWN0IHNvIGRlZmF1bHRzIGFyZSBub3QgbW9kaWZpZWRcbiAgICB2YXIgZGVmYXVsdE9wdHMgPSBleHRlbmQoe30sIHRoaXMuX29wdHMpO1xuICAgIG9wdHMgPSBleHRlbmQoZGVmYXVsdE9wdHMsIG9wdHMpO1xuXG4gICAgdGhpcy5zdG9wKCk7XG5cbiAgICAvLyBUcmlnZ2VyIGEgbGF5b3V0IHNvIHN0eWxlcyBhcmUgY2FsY3VsYXRlZCAmIHRoZSBicm93c2VyXG4gICAgLy8gcGlja3MgdXAgdGhlIHN0YXJ0aW5nIHBvc2l0aW9uIGJlZm9yZSBhbmltYXRpbmdcbiAgICB0aGlzLl9wYXRoLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl9wYXRoLCBudWxsKTtcbiAgICB2YXIgb2Zmc2V0ID0gY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdzdHJva2UtZGFzaG9mZnNldCcpO1xuICAgIC8vIFJlbW92ZSAncHgnIHN1ZmZpeFxuICAgIG9mZnNldCA9IHBhcnNlRmxvYXQob2Zmc2V0LCAxMCk7XG5cbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fcGF0aC5nZXRUb3RhbExlbmd0aCgpO1xuICAgIHZhciBuZXdPZmZzZXQgPSBsZW5ndGggLSBwcm9ncmVzcyAqIGxlbmd0aDtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHRoaXMuX3R3ZWVuYWJsZSA9IG5ldyBUd2VlbmFibGUoKTtcbiAgICB0aGlzLl90d2VlbmFibGUudHdlZW4oe1xuICAgICAgICBmcm9tOiBleHRlbmQoeyBvZmZzZXQ6IG9mZnNldCB9LCBvcHRzLmZyb20pLFxuICAgICAgICB0bzogZXh0ZW5kKHsgb2Zmc2V0OiBuZXdPZmZzZXQgfSwgb3B0cy50byksXG4gICAgICAgIGR1cmF0aW9uOiBvcHRzLmR1cmF0aW9uLFxuICAgICAgICBlYXNpbmc6IHRoaXMuX2Vhc2luZyhvcHRzLmVhc2luZyksXG4gICAgICAgIHN0ZXA6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgICBzZWxmLl9wYXRoLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBzdGF0ZS5vZmZzZXQ7XG4gICAgICAgICAgICBvcHRzLnN0ZXAoc3RhdGUsIG9wdHMuYXR0YWNobWVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAgIC8vIHN0ZXAgZnVuY3Rpb24gaXMgbm90IGNhbGxlZCBvbiB0aGUgbGFzdCBzdGVwIG9mIGFuaW1hdGlvblxuICAgICAgICAgICAgc2VsZi5fcGF0aC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0ID0gc3RhdGUub2Zmc2V0O1xuICAgICAgICAgICAgb3B0cy5zdGVwKHN0YXRlLCBvcHRzLmF0dGFjaG1lbnQpO1xuXG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYikpIHtcbiAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5QYXRoLnByb3RvdHlwZS5fc3RvcFR3ZWVuID0gZnVuY3Rpb24gX3N0b3BUd2VlbigpIHtcbiAgICBpZiAodGhpcy5fdHdlZW5hYmxlICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX3R3ZWVuYWJsZS5zdG9wKCk7XG4gICAgICAgIHRoaXMuX3R3ZWVuYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuX3R3ZWVuYWJsZSA9IG51bGw7XG4gICAgfVxufTtcblxuUGF0aC5wcm90b3R5cGUuX2Vhc2luZyA9IGZ1bmN0aW9uIF9lYXNpbmcoZWFzaW5nKSB7XG4gICAgaWYgKEVBU0lOR19BTElBU0VTLmhhc093blByb3BlcnR5KGVhc2luZykpIHtcbiAgICAgICAgcmV0dXJuIEVBU0lOR19BTElBU0VTW2Vhc2luZ107XG4gICAgfVxuXG4gICAgcmV0dXJuIGVhc2luZztcbn07XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb25zXG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vLyBDb3B5IGFsbCBhdHRyaWJ1dGVzIGZyb20gc291cmNlIG9iamVjdCB0byBkZXN0aW5hdGlvbiBvYmplY3QuXG4vLyBkZXN0aW5hdGlvbiBvYmplY3QgaXMgbXV0YXRlZC5cbmZ1bmN0aW9uIGV4dGVuZChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbiB8fCB7fTtcbiAgICBzb3VyY2UgPSBzb3VyY2UgfHwge307XG5cbiAgICBmb3IgKHZhciBhdHRyTmFtZSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uW2F0dHJOYW1lXSA9IHNvdXJjZVthdHRyTmFtZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGVzdGluYXRpb247XG59XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJyB8fCBvYmogaW5zdGFuY2VvZiBTdHJpbmc7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgTGluZTogTGluZSxcbiAgICBDaXJjbGU6IENpcmNsZSxcbiAgICBTcXVhcmU6IFNxdWFyZSxcbiAgICBQYXRoOiBQYXRoXG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9saWIvcmFuZG9tc3RyaW5nXCIpOyIsInZhciBjaGFycyA9ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlrbG1ub3BxcnN0dXZ3eHl6JztcblxuZXhwb3J0cy5nZW5lcmF0ZSA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICBsZW5ndGggPSBsZW5ndGggPyBsZW5ndGggOiAzMjtcbiAgXG4gIHZhciBzdHJpbmcgPSAnJztcbiAgXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcmFuZG9tTnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKTtcbiAgICBzdHJpbmcgKz0gY2hhcnMuc3Vic3RyaW5nKHJhbmRvbU51bWJlciwgcmFuZG9tTnVtYmVyICsgMSk7XG4gIH1cbiAgXG4gIHJldHVybiBzdHJpbmc7XG59Il19
